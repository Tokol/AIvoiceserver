(function(F,H){typeof exports=="object"&&typeof module<"u"?H(exports):typeof define=="function"&&define.amd?define(["exports"],H):(F=typeof globalThis<"u"?globalThis:F||self,H(F.OpenAIAgentsRealtime={}))})(this,(function(F){"use strict";var Lv=Object.defineProperty;var qu=F=>{throw TypeError(F)};var Uv=(F,H,ce)=>H in F?Lv(F,H,{enumerable:!0,configurable:!0,writable:!0,value:ce}):F[H]=ce;var S=(F,H,ce)=>Uv(F,typeof H!="symbol"?H+"":H,ce),as=(F,H,ce)=>H.has(F)||qu("Cannot "+ce);var p=(F,H,ce)=>(as(F,H,"read from private field"),ce?ce.call(F):H.get(F)),P=(F,H,ce)=>H.has(F)?qu("Cannot add the same private member more than once"):H instanceof WeakSet?H.add(F):H.set(F,ce),k=(F,H,ce,pr)=>(as(F,H,"write to private field"),pr?pr.call(F,ce):H.set(F,ce),ce),L=(F,H,ce)=>(as(F,H,"access private method"),ce);var on,Ct,jn,Je,Fn,Pt,xe,Rt,sn,an,Ln,un,Un,$t,Nt,et,Wu,ur,Gn,cn,Jn,Bn,ln,_e,tt,ft,ht,pn,Se,us,cs,bn,Ee,qn,Wn,Vn,Hn,zt,mt,gt,Dt,dn,Kn,fn,nt,ye,Zt,Vr,Vu,ve,yt,Ce,Hu,Ku,Yu,Xu,ls,Mt,Yn,Te,Xn,Qn,Q,er,_t,tr,vt,jt,Ft,me,nr,rt,Lt,Ut,mn,rr,Gt,ps,Qu,B,D,gn,Z,yn,_n,or,oe,vn,wn,Ke,sr,Jt,ir,ar,ee,cr,lr,ec,Kr,tc,ds,nc,fs;const H={version:"0.4.4"};async function ce(e){try{return[null,await e()]}catch(t){return[t,null]}}function pr(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,o])=>t.indexOf(+r)===-1).map(([r,o])=>o)}let hs=class{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}};function rc(){return new hs}const oc=rc();class ms{constructor(t){this.counter=0,this.metadataRegistry=(t==null?void 0:t.metadata)??oc,this.target=(t==null?void 0:t.target)??"draft-2020-12",this.unrepresentable=(t==null?void 0:t.unrepresentable)??"throw",this.override=(t==null?void 0:t.override)??(()=>{}),this.io=(t==null?void 0:t.io)??"output",this.seen=new Map}process(t,n={path:[],schemaPath:[]}){var c,h,m;var r;const o=t._zod.def,s={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},i=this.seen.get(t);if(i)return i.count++,n.schemaPath.includes(t)&&(i.cycle=n.path),i.schema;const u={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(t,u);const a=(h=(c=t._zod).toJSONSchema)==null?void 0:h.call(c);if(a)u.schema=a;else{const y={...n,schemaPath:[...n.schemaPath,t],path:n.path},b=t._zod.parent;if(b)u.ref=b,this.process(b,y),this.seen.get(b).isParent=!0;else{const _=u.schema;switch(o.type){case"string":{const g=_;g.type="string";const{minimum:v,maximum:w,format:O,patterns:x,contentEncoding:C}=t._zod.bag;if(typeof v=="number"&&(g.minLength=v),typeof w=="number"&&(g.maxLength=w),O&&(g.format=s[O]??O,g.format===""&&delete g.format),C&&(g.contentEncoding=C),x&&x.size>0){const $=[...x];$.length===1?g.pattern=$[0].source:$.length>1&&(u.schema.allOf=[...$.map(q=>({...this.target==="draft-7"?{type:"string"}:{},pattern:q.source}))])}break}case"number":{const g=_,{minimum:v,maximum:w,format:O,multipleOf:x,exclusiveMaximum:C,exclusiveMinimum:$}=t._zod.bag;typeof O=="string"&&O.includes("int")?g.type="integer":g.type="number",typeof $=="number"&&(g.exclusiveMinimum=$),typeof v=="number"&&(g.minimum=v,typeof $=="number"&&($>=v?delete g.minimum:delete g.exclusiveMinimum)),typeof C=="number"&&(g.exclusiveMaximum=C),typeof w=="number"&&(g.maximum=w,typeof C=="number"&&(C<=w?delete g.maximum:delete g.exclusiveMaximum)),typeof x=="number"&&(g.multipleOf=x);break}case"boolean":{const g=_;g.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{_.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{_.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const g=_,{minimum:v,maximum:w}=t._zod.bag;typeof v=="number"&&(g.minItems=v),typeof w=="number"&&(g.maxItems=w),g.type="array",g.items=this.process(o.element,{...y,path:[...y.path,"items"]});break}case"object":{const g=_;g.type="object",g.properties={};const v=o.shape;for(const x in v)g.properties[x]=this.process(v[x],{...y,path:[...y.path,"properties",x]});const w=new Set(Object.keys(v)),O=new Set([...w].filter(x=>{const C=o.shape[x]._zod;return this.io==="input"?C.optin===void 0:C.optout===void 0}));O.size>0&&(g.required=Array.from(O)),((m=o.catchall)==null?void 0:m._zod.def.type)==="never"?g.additionalProperties=!1:o.catchall?o.catchall&&(g.additionalProperties=this.process(o.catchall,{...y,path:[...y.path,"additionalProperties"]})):this.io==="output"&&(g.additionalProperties=!1);break}case"union":{const g=_;g.anyOf=o.options.map((v,w)=>this.process(v,{...y,path:[...y.path,"anyOf",w]}));break}case"intersection":{const g=_,v=this.process(o.left,{...y,path:[...y.path,"allOf",0]}),w=this.process(o.right,{...y,path:[...y.path,"allOf",1]}),O=C=>"allOf"in C&&Object.keys(C).length===1,x=[...O(v)?v.allOf:[v],...O(w)?w.allOf:[w]];g.allOf=x;break}case"tuple":{const g=_;g.type="array";const v=o.items.map((x,C)=>this.process(x,{...y,path:[...y.path,"prefixItems",C]}));if(this.target==="draft-2020-12"?g.prefixItems=v:g.items=v,o.rest){const x=this.process(o.rest,{...y,path:[...y.path,"items"]});this.target==="draft-2020-12"?g.items=x:g.additionalItems=x}o.rest&&(g.items=this.process(o.rest,{...y,path:[...y.path,"items"]}));const{minimum:w,maximum:O}=t._zod.bag;typeof w=="number"&&(g.minItems=w),typeof O=="number"&&(g.maxItems=O);break}case"record":{const g=_;g.type="object",g.propertyNames=this.process(o.keyType,{...y,path:[...y.path,"propertyNames"]}),g.additionalProperties=this.process(o.valueType,{...y,path:[...y.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const g=_,v=pr(o.entries);v.every(w=>typeof w=="number")&&(g.type="number"),v.every(w=>typeof w=="string")&&(g.type="string"),g.enum=v;break}case"literal":{const g=_,v=[];for(const w of o.values)if(w===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof w=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");v.push(Number(w))}else v.push(w);if(v.length!==0)if(v.length===1){const w=v[0];g.type=w===null?"null":typeof w,g.const=w}else v.every(w=>typeof w=="number")&&(g.type="number"),v.every(w=>typeof w=="string")&&(g.type="string"),v.every(w=>typeof w=="boolean")&&(g.type="string"),v.every(w=>w===null)&&(g.type="null"),g.enum=v;break}case"file":{const g=_,v={type:"string",format:"binary",contentEncoding:"binary"},{minimum:w,maximum:O,mime:x}=t._zod.bag;w!==void 0&&(v.minLength=w),O!==void 0&&(v.maxLength=O),x?x.length===1?(v.contentMediaType=x[0],Object.assign(g,v)):g.anyOf=x.map(C=>({...v,contentMediaType:C})):Object.assign(g,v);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const g=this.process(o.innerType,y);_.anyOf=[g,{type:"null"}];break}case"nonoptional":{this.process(o.innerType,y),u.ref=o.innerType;break}case"success":{const g=_;g.type="boolean";break}case"default":{this.process(o.innerType,y),u.ref=o.innerType,_.default=JSON.parse(JSON.stringify(o.defaultValue));break}case"prefault":{this.process(o.innerType,y),u.ref=o.innerType,this.io==="input"&&(_._prefault=JSON.parse(JSON.stringify(o.defaultValue)));break}case"catch":{this.process(o.innerType,y),u.ref=o.innerType;let g;try{g=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}_.default=g;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const g=_,v=t._zod.pattern;if(!v)throw new Error("Pattern not found in template literal");g.type="string",g.pattern=v.source;break}case"pipe":{const g=this.io==="input"?o.in._zod.def.type==="transform"?o.out:o.in:o.out;this.process(g,y),u.ref=g;break}case"readonly":{this.process(o.innerType,y),u.ref=o.innerType,_.readOnly=!0;break}case"promise":{this.process(o.innerType,y),u.ref=o.innerType;break}case"optional":{this.process(o.innerType,y),u.ref=o.innerType;break}case"lazy":{const g=t._zod.innerType;this.process(g,y),u.ref=g;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const l=this.metadataRegistry.get(t);return l&&Object.assign(u.schema,l),this.io==="input"&&de(t)&&(delete u.schema.examples,delete u.schema.default),this.io==="input"&&u.schema._prefault&&((r=u.schema).default??(r.default=u.schema._prefault)),delete u.schema._prefault,this.seen.get(t).schema}emit(t,n){var d,c,h,m,y,b;const r={cycles:(n==null?void 0:n.cycles)??"ref",reused:(n==null?void 0:n.reused)??"inline",external:(n==null?void 0:n.external)??void 0},o=this.seen.get(t);if(!o)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=_=>{var x;const g=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const C=(x=r.external.registry.get(_[0]))==null?void 0:x.id,$=r.external.uri??(G=>G);if(C)return{ref:$(C)};const q=_[1].defId??_[1].schema.id??`schema${this.counter++}`;return _[1].defId=q,{defId:q,ref:`${$("__shared")}#/${g}/${q}`}}if(_[1]===o)return{ref:"#"};const w=`#/${g}/`,O=_[1].schema.id??`__schema${this.counter++}`;return{defId:O,ref:w+O}},i=_=>{if(_[1].schema.$ref)return;const g=_[1],{ref:v,defId:w}=s(_);g.def={...g.schema},w&&(g.defId=w);const O=g.schema;for(const x in O)delete O[x];O.$ref=v};if(r.cycles==="throw")for(const _ of this.seen.entries()){const g=_[1];if(g.cycle)throw new Error(`Cycle detected: #/${(d=g.cycle)==null?void 0:d.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const _ of this.seen.entries()){const g=_[1];if(t===_[0]){i(_);continue}if(r.external){const w=(c=r.external.registry.get(_[0]))==null?void 0:c.id;if(t!==_[0]&&w){i(_);continue}}if((h=this.metadataRegistry.get(_[0]))==null?void 0:h.id){i(_);continue}if(g.cycle){i(_);continue}if(g.count>1&&r.reused==="ref"){i(_);continue}}const u=(_,g)=>{const v=this.seen.get(_),w=v.def??v.schema,O={...w};if(v.ref===null)return;const x=v.ref;if(v.ref=null,x){u(x,g);const C=this.seen.get(x).schema;C.$ref&&g.target==="draft-7"?(w.allOf=w.allOf??[],w.allOf.push(C)):(Object.assign(w,C),Object.assign(w,O))}v.isParent||this.override({zodSchema:_,jsonSchema:w,path:v.path??[]})};for(const _ of[...this.seen.entries()].reverse())u(_[0],{target:this.target});const a={};if(this.target==="draft-2020-12"?a.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?a.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(m=r.external)!=null&&m.uri){const _=(y=r.external.registry.get(t))==null?void 0:y.id;if(!_)throw new Error("Schema is missing an `id` property");a.$id=r.external.uri(_)}Object.assign(a,o.def);const l=((b=r.external)==null?void 0:b.defs)??{};for(const _ of this.seen.entries()){const g=_[1];g.def&&g.defId&&(l[g.defId]=g.def)}r.external||Object.keys(l).length>0&&(this.target==="draft-2020-12"?a.$defs=l:a.definitions=l);try{return JSON.parse(JSON.stringify(a))}catch{throw new Error("Error converting schema to JSON.")}}}function sc(e,t){if(e instanceof hs){const r=new ms(t),o={};for(const u of e._idmap.entries()){const[a,l]=u;r.process(l)}const s={},i={registry:e,uri:t==null?void 0:t.uri,defs:o};for(const u of e._idmap.entries()){const[a,l]=u;s[a]=r.emit(l,{...t,external:i})}if(Object.keys(o).length>0){const u=r.target==="draft-2020-12"?"$defs":"definitions";s.__shared={[u]:o}}return{schemas:s}}const n=new ms(t);return n.process(e),n.emit(e,t)}function de(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const o=e._zod.def;switch(o.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return de(o.element,n);case"object":{for(const s in o.shape)if(de(o.shape[s],n))return!0;return!1}case"union":{for(const s of o.options)if(de(s,n))return!0;return!1}case"intersection":return de(o.left,n)||de(o.right,n);case"tuple":{for(const s of o.items)if(de(s,n))return!0;return!!(o.rest&&de(o.rest,n))}case"record":return de(o.keyType,n)||de(o.valueType,n);case"map":return de(o.keyType,n)||de(o.valueType,n);case"set":return de(o.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return de(o.innerType,n);case"lazy":return de(o.getter(),n);case"default":return de(o.innerType,n);case"prefault":return de(o.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return de(o.in,n)||de(o.out,n);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${o.type}`)}function ic(e,t){const n={...e};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),n}const ac=Symbol("Let zodToJsonSchema decide on which parser to use"),gs={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},uc=e=>typeof e=="string"?{...gs,basePath:["#"],definitions:{},name:e}:{...gs,basePath:["#"],definitions:{},...e},Yr=e=>"_def"in e?e._def:e;function cc(e){if(!e)return!0;for(const t in e)return!1;return!0}const lc=e=>{const t=uc(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(t.definitions).map(([r,o])=>[Yr(o),{def:Yr(o),path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function ys(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function K(e,t,n,r,o){e[t]=n,ys(e,t,r,o)}var U;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(U||(U={}));function pc(){return{}}function dc(e,t){var r,o;const n={type:"array"};return((o=(r=e.type)==null?void 0:r._def)==null?void 0:o.typeName)!==U.ZodAny&&(n.items=V(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&K(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&K(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(K(n,"minItems",e.exactLength.value,e.exactLength.message,t),K(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function fc(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?K(n,"minimum",r.value,r.message,t):K(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),K(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?K(n,"maximum",r.value,r.message,t):K(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),K(n,"maximum",r.value,r.message,t));break;case"multipleOf":K(n,"multipleOf",r.value,r.message,t);break}return n}function hc(){return{type:"boolean"}}function mc(e,t){return V(e.type._def,t)}const gc=(e,t)=>V(e.innerType._def,t);function _s(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((o,s)=>_s(e,t,o))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return yc(e,t)}}const yc=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":K(n,"minimum",r.value,r.message,t);break;case"max":K(n,"maximum",r.value,r.message,t);break}return n};function _c(e,t){return{...V(e.innerType._def,t),default:e.defaultValue()}}function vc(e,t,n){return t.effectStrategy==="input"?V(e.schema._def,t,n):{}}function wc(e){return{type:"string",enum:[...e.values]}}const bc=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Ic(e,t){const n=[V(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),V(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(s=>!!s);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const o=[];return n.forEach(s=>{if(bc(s))o.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let i=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:u,...a}=s;i=a}else r=void 0;o.push(i)}}),o.length?{allOf:o,...r}:void 0}function Sc(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let Xr;const wt={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Xr===void 0&&(Xr=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Xr),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function vs(e,t){const n={type:"string"};function r(o){return t.patternStrategy==="escape"?Tc(o):o}if(e.checks)for(const o of e.checks)switch(o.kind){case"min":K(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,o.value):o.value,o.message,t);break;case"max":K(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,o.value):o.value,o.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Ze(n,"email",o.message,t);break;case"format:idn-email":Ze(n,"idn-email",o.message,t);break;case"pattern:zod":Me(n,wt.email,o.message,t);break}break;case"url":Ze(n,"uri",o.message,t);break;case"uuid":Ze(n,"uuid",o.message,t);break;case"regex":Me(n,o.regex,o.message,t);break;case"cuid":Me(n,wt.cuid,o.message,t);break;case"cuid2":Me(n,wt.cuid2,o.message,t);break;case"startsWith":Me(n,RegExp(`^${r(o.value)}`),o.message,t);break;case"endsWith":Me(n,RegExp(`${r(o.value)}$`),o.message,t);break;case"datetime":Ze(n,"date-time",o.message,t);break;case"date":Ze(n,"date",o.message,t);break;case"time":Ze(n,"time",o.message,t);break;case"duration":Ze(n,"duration",o.message,t);break;case"length":K(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,o.value):o.value,o.message,t),K(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,o.value):o.value,o.message,t);break;case"includes":{Me(n,RegExp(r(o.value)),o.message,t);break}case"ip":{o.version!=="v6"&&Ze(n,"ipv4",o.message,t),o.version!=="v4"&&Ze(n,"ipv6",o.message,t);break}case"emoji":Me(n,wt.emoji,o.message,t);break;case"ulid":{Me(n,wt.ulid,o.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Ze(n,"binary",o.message,t);break}case"contentEncoding:base64":{K(n,"contentEncoding","base64",o.message,t);break}case"pattern:zod":{Me(n,wt.base64,o.message,t);break}}break}case"nanoid":Me(n,wt.nanoid,o.message,t)}return n}const Tc=e=>Array.from(e).map(t=>/[a-zA-Z0-9]/.test(t)?t:`\\${t}`).join(""),Ze=(e,t,n,r)=>{var o;e.format||(o=e.anyOf)!=null&&o.some(s=>s.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):K(e,"format",t,n,r)},Me=(e,t,n,r)=>{var o;e.pattern||(o=e.allOf)!=null&&o.some(s=>s.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:ws(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):K(e,"pattern",ws(t,r),n,r)},ws=(e,t)=>{var l;const n=typeof e=="function"?e():e;if(!t.applyRegexFlags||!n.flags)return n.source;const r={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},o=r.i?n.source.toLowerCase():n.source;let s="",i=!1,u=!1,a=!1;for(let d=0;d<o.length;d++){if(i){s+=o[d],i=!1;continue}if(r.i){if(u){if(o[d].match(/[a-z]/)){a?(s+=o[d],s+=`${o[d-2]}-${o[d]}`.toUpperCase(),a=!1):o[d+1]==="-"&&((l=o[d+2])!=null&&l.match(/[a-z]/))?(s+=o[d],a=!0):s+=`${o[d]}${o[d].toUpperCase()}`;continue}}else if(o[d].match(/[a-z]/)){s+=`[${o[d]}${o[d].toUpperCase()}]`;continue}}if(r.m){if(o[d]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(o[d]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&o[d]==="."){s+=u?`${o[d]}\r
`:`[${o[d]}\r
]`;continue}s+=o[d],o[d]==="\\"?i=!0:u&&o[d]==="]"?u=!1:!u&&o[d]==="["&&(u=!0)}try{const d=new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return s};function bs(e,t){var r,o,s,i;if(t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===U.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((u,a)=>({...u,[a]:V(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",a]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:V(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if(t.target==="openApi3")return n;if(((o=e.keyType)==null?void 0:o._def.typeName)===U.ZodString&&((s=e.keyType._def.checks)!=null&&s.length)){const u=Object.entries(vs(e.keyType._def,t)).reduce((a,[l,d])=>l==="type"?a:{...a,[l]:d},{});return{...n,propertyNames:u}}else if(((i=e.keyType)==null?void 0:i._def.typeName)===U.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};return n}function Ac(e,t){if(t.mapStrategy==="record")return bs(e,t);const n=V(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=V(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function kc(e){const t=e.values,r=Object.keys(e.values).filter(s=>typeof t[t[s]]!="number").map(s=>t[s]),o=Array.from(new Set(r.map(s=>typeof s)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:r}}function Oc(){return{not:{}}}function xc(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const dr={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Ec(e,t){if(t.target==="openApi3")return Is(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in dr&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((o,s)=>{const i=dr[s._def.typeName];return i&&!o.includes(i)?[...o,i]:o},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((o,s)=>{const i=typeof s._def.value;switch(i){case"string":case"number":case"boolean":return[...o,i];case"bigint":return[...o,"integer"];case"object":if(s._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(r.length===n.length){const o=r.filter((s,i,u)=>u.indexOf(s)===i);return{type:o.length>1?o:o[0],enum:n.reduce((s,i)=>s.includes(i._def.value)?s:[...s,i._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,o)=>[...r,...o._def.values.filter(s=>!r.includes(s))],[])};return Is(e,t)}const Is=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,o)=>V(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${o}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Cc(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"||t.nullableStrategy==="property"?{type:dr[e.innerType._def.typeName],nullable:!0}:{type:[dr[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=V(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=V(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Pc(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",ys(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?K(n,"minimum",r.value,r.message,t):K(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),K(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?K(n,"maximum",r.value,r.message,t):K(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),K(n,"maximum",r.value,r.message,t));break;case"multipleOf":K(n,"multipleOf",r.value,r.message,t);break}return n}function Rc(e,t){return t.removeAdditionalStrategy==="strict"?e.catchall._def.typeName==="ZodNever"?e.unknownKeys!=="strict":V(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:e.catchall._def.typeName==="ZodNever"?e.unknownKeys==="passthrough":V(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function $c(e,t){const n={type:"object",...Object.entries(e.shape()).reduce((r,[o,s])=>{var a;if(s===void 0||s._def===void 0)return r;const i=[...t.currentPath,"properties",o],u=V(s._def,{...t,currentPath:i,propertyPath:i});if(u===void 0)return r;if(t.openaiStrictMode&&s.isOptional()&&!s.isNullable()&&typeof((a=s._def)==null?void 0:a.defaultValue)>"u")throw new Error(`Zod field at \`${i.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...r.properties,[o]:u},required:s.isOptional()&&!t.openaiStrictMode?r.required:[...r.required,o]}},{properties:{},required:[]}),additionalProperties:Rc(e,t)};return n.required.length||delete n.required,n}const Nc=(e,t)=>{if(t.propertyPath&&t.currentPath.slice(0,t.propertyPath.length).toString()===t.propertyPath.toString())return V(e.innerType._def,{...t,currentPath:t.currentPath});const n=V(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},zc=(e,t)=>{if(t.pipeStrategy==="input")return V(e.in._def,t);if(t.pipeStrategy==="output")return V(e.out._def,t);const n=V(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=V(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(o=>o!==void 0)}};function Dc(e,t){return V(e.type._def,t)}function Zc(e,t){const r={type:"array",uniqueItems:!0,items:V(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&K(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&K(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Mc(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>V(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:V(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>V(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function jc(){return{not:{}}}function Fc(){return{}}const Lc=(e,t)=>V(e.innerType._def,t);function V(e,t,n=!1){var i;const r=t.seen.get(e);if(t.override){const u=(i=t.override)==null?void 0:i.call(t,e,t,r,n);if(u!==ac)return u}if(r&&!n){const u=Uc(r,t);if(u!==void 0)return"$ref"in u&&t.seenRefs.add(u.$ref),u}const o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);const s=Jc(e,e.typeName,t,n);return s&&Bc(e,t,s),o.jsonSchema=s,s}const Uc=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"extract-to-root":const n=e.path.slice(t.basePath.length+1).join("_");return n!==t.name&&t.nameStrategy==="duplicate-ref"&&(t.definitions[n]=e.def),{$ref:[...t.basePath,t.definitionPath,n].join("/")};case"relative":return{$ref:Gc(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,o)=>t.currentPath[o]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Gc=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},Jc=(e,t,n,r)=>{switch(t){case U.ZodString:return vs(e,n);case U.ZodNumber:return Pc(e,n);case U.ZodObject:return $c(e,n);case U.ZodBigInt:return fc(e,n);case U.ZodBoolean:return hc();case U.ZodDate:return _s(e,n);case U.ZodUndefined:return jc();case U.ZodNull:return xc(n);case U.ZodArray:return dc(e,n);case U.ZodUnion:case U.ZodDiscriminatedUnion:return Ec(e,n);case U.ZodIntersection:return Ic(e,n);case U.ZodTuple:return Mc(e,n);case U.ZodRecord:return bs(e,n);case U.ZodLiteral:return Sc(e,n);case U.ZodEnum:return wc(e);case U.ZodNativeEnum:return kc(e);case U.ZodNullable:return Cc(e,n);case U.ZodOptional:return Nc(e,n);case U.ZodMap:return Ac(e,n);case U.ZodSet:return Zc(e,n);case U.ZodLazy:return V(e.getter()._def,n);case U.ZodPromise:return Dc(e,n);case U.ZodNaN:case U.ZodNever:return Oc();case U.ZodEffects:return vc(e,n,r);case U.ZodAny:return pc();case U.ZodUnknown:return Fc();case U.ZodDefault:return _c(e,n);case U.ZodBranded:return mc(e,n);case U.ZodReadonly:return Lc(e,n);case U.ZodCatch:return gc(e,n);case U.ZodPipeline:return zc(e,n);case U.ZodFunction:case U.ZodVoid:case U.ZodSymbol:return;default:return(o=>{})()}},Bc=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),qc=(e,t)=>{const n=lc(t),r=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,o=V(e._def,r===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,r]},!1)??{},s=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;s!==void 0&&(o.title=s);const i=(()=>{if(cc(n.definitions))return;const a={},l=new Set;for(let d=0;d<500;d++){const c=Object.entries(n.definitions).filter(([h])=>!l.has(h));if(c.length===0)break;for(const[h,m]of c)a[h]=V(Yr(m),{...n,currentPath:[...n.basePath,n.definitionPath,h]},!0)??{},l.add(h)}return a})(),u=r===void 0?i?{...o,[n.definitionPath]:i}:o:n.nameStrategy==="duplicate-ref"?{...o,...i||n.seenRefs.size?{[n.definitionPath]:{...i,...n.seenRefs.size?{[r]:o}:void 0}}:void 0}:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,r].join("/"),[n.definitionPath]:{...i,[r]:o}};return n.target==="jsonSchema7"?u.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),u};function Wc(e,{parser:t,callback:n}){const r={...e};return Object.defineProperties(r,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:t,enumerable:!1},$callback:{value:n,enumerable:!1}}),r}function Vc(e){if(e.type!=="object")throw new Error(`Root schema must have type: 'object' but got type: ${e.type?`'${e.type}'`:"undefined"}`);const t=structuredClone(e);return Ye(t,[],t)}function Qr(e){if(typeof e=="boolean")return!1;if(e.type==="null")return!0;for(const t of e.oneOf??[])if(Qr(t))return!0;for(const t of e.anyOf??[])if(Qr(t))return!0;return!1}function Ye(e,t,n){if(typeof e=="boolean")throw new TypeError(`Expected object schema but got boolean; path=${t.join("/")}`);if(!bt(e))throw new TypeError(`Expected ${JSON.stringify(e)} to be an object; path=${t.join("/")}`);const r=e.$defs;if(bt(r))for(const[h,m]of Object.entries(r))Ye(m,[...t,"$defs",h],n);const o=e.definitions;if(bt(o))for(const[h,m]of Object.entries(o))Ye(m,[...t,"definitions",h],n);e.type==="object"&&!("additionalProperties"in e)&&(e.additionalProperties=!1);const i=e.required??[],u=e.properties;if(bt(u)){for(const[h,m]of Object.entries(u))if(!Qr(m)&&!i.includes(h))throw new Error(`Zod field at \`${[...t,"properties",h].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);e.required=Object.keys(u),e.properties=Object.fromEntries(Object.entries(u).map(([h,m])=>[h,Ye(m,[...t,"properties",h],n)]))}const a=e.items;bt(a)&&(e.items=Ye(a,[...t,"items"],n));const l=e.anyOf;Array.isArray(l)&&(e.anyOf=l.map((h,m)=>Ye(h,[...t,"anyOf",String(m)],n)));const d=e.allOf;if(Array.isArray(d))if(d.length===1){const h=Ye(d[0],[...t,"allOf","0"],n);Object.assign(e,h),delete e.allOf}else e.allOf=d.map((h,m)=>Ye(h,[...t,"allOf",String(m)],n));e.default===null&&delete e.default;const c=e.$ref;if(c&&Kc(e,1)){if(typeof c!="string")throw new TypeError(`Received non-string $ref - ${c}; path=${t.join("/")}`);const h=Hc(n,c);if(typeof h=="boolean")throw new Error(`Expected \`$ref: ${c}\` to resolve to an object schema but got boolean`);if(!bt(h))throw new Error(`Expected \`$ref: ${c}\` to resolve to an object but got ${JSON.stringify(h)}`);return Object.assign(e,{...h,...e}),delete e.$ref,Ye(e,t,n)}return e}function Hc(e,t){if(!t.startsWith("#/"))throw new Error(`Unexpected $ref format ${JSON.stringify(t)}; Does not start with #/`);const n=t.slice(2).split("/");let r=e;for(const o of n){if(!bt(r))throw new Error(`encountered non-object entry while resolving ${t} - ${JSON.stringify(r)}`);const s=r[o];if(s===void 0)throw new Error(`Key ${o} not found while resolving ${t}`);r=s}return r}function bt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Kc(e,t){let n=0;for(const r in e)if(n++,n>t)return!0;return!1}function Ss(e,t){return qc(e,{openaiStrictMode:!0,name:t.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function Ts(e){return Vc(sc(e,{target:"draft-7"}))}function As(e){return"_zod"in e}function Yc(e,t,n){return ic({type:"json_schema",...n,name:t,strict:!0,schema:As(e)?Ts(e):Ss(e,{name:t})},r=>e.parse(JSON.parse(r)))}function Xc(e){return Wc({type:"function",name:e.name,parameters:As(e.parameters)?Ts(e.parameters):Ss(e.parameters,{name:e.name}),strict:!0,...e.description?{description:e.description}:void 0},{callback:e.function,parser:t=>e.parameters.parse(JSON.parse(t))})}class Be extends Error{constructor(n,r){super(n);S(this,"state");this.name=new.target.name,this.state=r}}class Qc extends Be{}class ks extends Be{}class Oe extends Be{}class el extends Oe{constructor(n,r,o,s){super(n,r);S(this,"originalError");S(this,"toolInvocation");this.originalError=o,this.toolInvocation=s}}class Y extends Be{}class Os extends Be{constructor(n,r,o){super(n,o);S(this,"error");this.error=r}}class tl extends Be{constructor(n,r,o){super(n,o);S(this,"error");this.error=r}}class xs extends Be{constructor(n,r,o){super(n,o);S(this,"result");this.result=r}}class fr extends Be{constructor(n,r,o){super(n,o);S(this,"result");this.result=r}}class nl extends Be{constructor(n,r,o){super(n,o);S(this,"result");this.result=r}}class rl extends Be{constructor(n,r,o){super(n,o);S(this,"result");this.result=r}}function Gv(e){return e}function Vt(e){var n;if(typeof e!="object"||e===null)return;const t=e;return((n=t._zod)==null?void 0:n.def)||t._def||t.def}function hr(e){const t=Vt(e);if(!t)return;const n=typeof t.typeName=="string"&&t.typeName||typeof t.type=="string"&&t.type;if(typeof n!="string")return;const r=n.toLowerCase();return r.startsWith("zod")?r.slice(3):r}function It(e){return Vt(e)?hr(e)==="object":!1}function ol(e){return typeof e=="object"&&e!==null&&"input"in e&&typeof e.input=="string"}const sl="http://json-schema.org/draft-07/schema#",il=new Set(["optional"]),al=new Set(["brand","branded","catch","default","effects","pipeline","pipe","prefault","readonly","refinement","transform"]),Es={string:{type:"string"},number:{type:"number"},bigint:{type:"integer"},boolean:{type:"boolean"},date:{type:"string",format:"date-time"}};function Cs(e){return typeof e=="object"&&e!==null&&e.type==="object"&&"properties"in e&&"additionalProperties"in e}function ul(e){const t=Ps(e);if(t)return Array.isArray(t.required)||(t.required=[]),typeof t.additionalProperties>"u"&&(t.additionalProperties=!1),typeof t.$schema!="string"&&(t.$schema=sl),t}function Ps(e){const t=wl(e);if(!t)return;const n={},r=[];for(const[o,s]of Object.entries(t)){const{schema:i,optional:u}=cl(s);if(!i)return;n[o]=i,u||r.push(o)}return{type:"object",properties:n,required:r,additionalProperties:!1}}function cl(e){let t=eo(e),n=!1;for(;il.has(hr(t)??"");){n=!0;const r=Vt(t),o=eo(r==null?void 0:r.innerType);if(!o||o===t)break;t=o}return{schema:qe(t),optional:n}}function qe(e){if(e===void 0)return;const t=eo(e),n=hr(t),r=Vt(t);if(n){if(n in Es)return Es[n];switch(n){case"object":return Ps(t);case"array":return ll(r);case"tuple":return pl(r);case"union":return dl(r);case"intersection":return fl(r);case"literal":return _l(r);case"enum":case"nativeenum":return vl(r);case"record":return hl(r);case"map":return ml(r);case"set":return gl(r);case"nullable":return yl(r);default:return}}}function ll(e){const t=qe(Rs(e,"element","items","type"));return t?{type:"array",items:t}:void 0}function pl(e){const t=$s(e==null?void 0:e.items).map(r=>qe(r)).filter(Boolean);if(!t.length)return;const n={type:"array",items:t,minItems:t.length};return e!=null&&e.rest||(n.maxItems=t.length),n}function dl(e){const t=$s((e==null?void 0:e.options)??(e==null?void 0:e.schemas)).map(n=>qe(n)).filter(Boolean);return t.length?{anyOf:t}:void 0}function fl(e){const t=qe(e==null?void 0:e.left),n=qe(e==null?void 0:e.right);return t&&n?{allOf:[t,n]}:void 0}function hl(e){const t=qe((e==null?void 0:e.valueType)??(e==null?void 0:e.values));return t?{type:"object",additionalProperties:t}:void 0}function ml(e){const t=qe((e==null?void 0:e.valueType)??(e==null?void 0:e.values));return t?{type:"array",items:t}:void 0}function gl(e){const t=qe(e==null?void 0:e.valueType);return t?{type:"array",items:t,uniqueItems:!0}:void 0}function yl(e){const t=qe((e==null?void 0:e.innerType)??(e==null?void 0:e.type));return t?{anyOf:[t,{type:"null"}]}:void 0}function eo(e){let t=e;for(;al.has(hr(t)??"");){const n=Vt(t),r=(n==null?void 0:n.innerType)??(n==null?void 0:n.schema)??(n==null?void 0:n.base)??(n==null?void 0:n.type)??(n==null?void 0:n.wrapped)??(n==null?void 0:n.underlying);if(!r||r===t)return t;t=r}return t}function Rs(e,...t){if(e){for(const n of t)if(n in e&&e[n]!==void 0)return e[n]}}function $s(e){return Array.isArray(e)?e:e===void 0?[]:[e]}function _l(e){if(!e)return;const t=Rs(e,"value","literal");if(t!==void 0)return{const:t,type:t===null?"null":typeof t}}function vl(e){if(e){if(Array.isArray(e.values))return{enum:e.values};if(e.entries&&typeof e.entries=="object")return{enum:Object.values(e.entries)};if(Array.isArray(e.options))return{enum:e.options};if(e.values&&typeof e.values=="object")return{enum:Object.values(e.values)};if(e.enum&&typeof e.enum=="object")return{enum:Object.values(e.enum)}}}function wl(e){if(typeof e!="object"||e===null)return;const t=e;if(t.shape&&typeof t.shape=="object")return t.shape;if(typeof t.shape=="function")try{return t.shape()}catch{return}const n=Vt(t),r=n==null?void 0:n.shape;if(r&&typeof r=="object")return r;if(typeof r=="function")try{return r()}catch{return}}const bl=Xc,Il=Yc;function Ns(e){return ul(e)}function mr(e){if(e=e.replace(/\s/g,"_"),e=e.replace(/[^a-zA-Z0-9]/g,"_"),e.length===0)throw new Error("Tool name cannot be empty");return e}function to(e,t){const n=r=>JSON.parse(r);if(It(e)){const r=s=>{const i=Ns(e);if(i)return{schema:i,parser:a=>e.parse(JSON.parse(a))};const u=s instanceof Error?` Upstream helper error: ${s.message}`:"";throw new Y(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${u}`)};let o;try{o=bl({name:t,parameters:e,function:()=>{},description:""})}catch(s){return r(s)}return Cs(o.parameters)?{schema:o.parameters,parser:o.$parseRaw}:r()}else if(typeof e=="object"&&e!==null)return{schema:e,parser:n};throw new Y("Input type is not a ZodObject or a valid JSON schema")}function zs(e){if(e==="text")return"text";if(It(e)){const t=(r,o)=>{const s=Ns(e);if(s)return{type:(r==null?void 0:r.type)??"json_schema",name:(r==null?void 0:r.name)??"output",strict:(r==null?void 0:r.strict)??!1,schema:s};const i=o instanceof Error?` Upstream helper error: ${o.message}`:"";throw new Y(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${i}`)};let n;try{n=Il(e,"output")}catch(r){return t(void 0,r)}return Cs(n.schema)?{type:n.type,name:n.name,strict:n.strict||!1,schema:n.schema}:t(n)}return e}function Sl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gr={exports:{}},no,Ds;function Tl(){if(Ds)return no;Ds=1;var e=1e3,t=e*60,n=t*60,r=n*24,o=r*7,s=r*365.25;no=function(d,c){c=c||{};var h=typeof d;if(h==="string"&&d.length>0)return i(d);if(h==="number"&&isFinite(d))return c.long?a(d):u(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function i(d){if(d=String(d),!(d.length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(c){var h=parseFloat(c[1]),m=(c[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return h*s;case"weeks":case"week":case"w":return h*o;case"days":case"day":case"d":return h*r;case"hours":case"hour":case"hrs":case"hr":case"h":return h*n;case"minutes":case"minute":case"mins":case"min":case"m":return h*t;case"seconds":case"second":case"secs":case"sec":case"s":return h*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function u(d){var c=Math.abs(d);return c>=r?Math.round(d/r)+"d":c>=n?Math.round(d/n)+"h":c>=t?Math.round(d/t)+"m":c>=e?Math.round(d/e)+"s":d+"ms"}function a(d){var c=Math.abs(d);return c>=r?l(d,c,r,"day"):c>=n?l(d,c,n,"hour"):c>=t?l(d,c,t,"minute"):c>=e?l(d,c,e,"second"):d+" ms"}function l(d,c,h,m){var y=c>=h*1.5;return Math.round(d/h)+" "+m+(y?"s":"")}return no}var ro,Zs;function Al(){if(Zs)return ro;Zs=1;function e(t){r.debug=r,r.default=r,r.coerce=l,r.disable=u,r.enable=s,r.enabled=a,r.humanize=Tl(),r.destroy=d,Object.keys(t).forEach(c=>{r[c]=t[c]}),r.names=[],r.skips=[],r.formatters={};function n(c){let h=0;for(let m=0;m<c.length;m++)h=(h<<5)-h+c.charCodeAt(m),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=n;function r(c){let h,m=null,y,b;function _(...g){if(!_.enabled)return;const v=_,w=Number(new Date),O=w-(h||w);v.diff=O,v.prev=h,v.curr=w,h=w,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let x=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,($,q)=>{if($==="%%")return"%";x++;const G=r.formatters[q];if(typeof G=="function"){const te=g[x];$=G.call(v,te),g.splice(x,1),x--}return $}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return _.namespace=c,_.useColors=r.useColors(),_.color=r.selectColor(c),_.extend=o,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(y!==r.namespaces&&(y=r.namespaces,b=r.enabled(c)),b),set:g=>{m=g}}),typeof r.init=="function"&&r.init(_),_}function o(c,h){const m=r(this.namespace+(typeof h>"u"?":":h)+c);return m.log=this.log,m}function s(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];const h=(typeof c=="string"?c:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const m of h)m[0]==="-"?r.skips.push(m.slice(1)):r.names.push(m)}function i(c,h){let m=0,y=0,b=-1,_=0;for(;m<c.length;)if(y<h.length&&(h[y]===c[m]||h[y]==="*"))h[y]==="*"?(b=y,_=m,y++):(m++,y++);else if(b!==-1)y=b+1,_++,m=_;else return!1;for(;y<h.length&&h[y]==="*";)y++;return y===h.length}function u(){const c=[...r.names,...r.skips.map(h=>"-"+h)].join(",");return r.enable(""),c}function a(c){for(const h of r.skips)if(i(c,h))return!1;for(const h of r.names)if(i(c,h))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return ro=e,ro}var Ms;function kl(){return Ms||(Ms=1,(function(e,t){t.formatArgs=r,t.save=o,t.load=s,t.useColors=n,t.storage=i(),t.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let a;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(a[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;a.splice(1,0,l,"color: inherit");let d=0,c=0;a[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(d++,h==="%c"&&(c=d))}),a.splice(c,0,l)}t.log=console.debug||console.log||(()=>{});function o(a){try{a?t.storage.setItem("debug",a):t.storage.removeItem("debug")}catch{}}function s(){let a;try{a=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!a&&typeof process<"u"&&"env"in process&&(a=process.env.DEBUG),a}function i(){try{return localStorage}catch{}}e.exports=Al()(t);const{formatters:u}=e.exports;u.j=function(a){try{return JSON.stringify(a)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(gr,gr.exports)),gr.exports}var Ol=kl();const xl=Sl(Ol);function js(){return Rm()}function Fs(e){const t=js();return typeof t<"u"&&(t[e]==="true"||t[e]==="1")}const Ls={get disabled(){return!0}},Us={get dontLogModelData(){return Fs("OPENAI_AGENTS_DONT_LOG_MODEL_DATA")},get dontLogToolData(){return Fs("OPENAI_AGENTS_DONT_LOG_TOOL_DATA")}},El=Us.dontLogModelData,Cl=Us.dontLogToolData;function oo(e="openai-agents"){return{namespace:e,debug:xl(e),error:(...t)=>console.error(...t),warn:(...t)=>console.warn(...t),dontLogModelData:El,dontLogToolData:Cl}}const R=oo("openai-agents:core"),Gs=20;function ot(e){if(e==null)return String(e);if(Js(e))return In(new Uint8Array(e));if(yr(e)){const t=e;return In(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}if(typeof e=="string")return e;if(typeof e=="object")try{return JSON.stringify(e,Rl)}catch{return"[object with circular references]"}return String(e)}function Js(e){if(e instanceof ArrayBuffer)return!0;const t=globalThis.SharedArrayBuffer;return!!(t&&e instanceof t)}function yr(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(e)}function so(e){return typeof e=="object"&&e!==null&&e.type==="Buffer"&&Array.isArray(e.data)}function Bs(e){const t=globalThis.Buffer;return!!(t&&typeof t.isBuffer=="function"&&t.isBuffer(e))}function In(e){if(e.length===0)return"[byte array (0 bytes)]";const t=Math.min(e.length,Gs),n=[];for(let s=0;s<t;s++)n.push(Pl(e[s]));const r=e.length>Gs?" ":"";return`[byte array ${n.join(" ")}${r} (${e.length} bytes)]`}function Pl(e){return`0x${e.toString(16).padStart(2,"0")}`}function Rl(e,t){if(Js(t))return In(new Uint8Array(t));if(yr(t)){const n=t;return In(new Uint8Array(n.buffer,n.byteOffset,n.byteLength))}return so(t)?In(Uint8Array.from(t.data)):t}function $l(e){return{type:"tool_input",name:e.name,run:e.run}}function Nl(e){return{type:"tool_output",name:e.name,run:e.run}}function zl(e){return e?e.map(t=>"type"in t&&t.type==="tool_input"?t:$l(t)):[]}function Dl(e){return e?e.map(t=>"type"in t&&t.type==="tool_output"?t:Nl(t)):[]}function io(e){return!!e&&typeof e=="object"&&typeof e.create=="function"}const ao=new WeakMap,Zl=new WeakMap,_r=new WeakMap;function qs(e){const t=Zl.get(e);if(t)return t;if(typeof e.computer=="function"||io(e.computer))return e.computer}function Ws(e,t,n){let r=_r.get(t);r||(r=new Map,_r.set(t,r)),r.set(e,n)}async function Vs(e){const{tool:t,runContext:n}=e,r=t;let o=ao.get(r);o||(o=new WeakMap,ao.set(r,o));const s=o.get(n);if(s)return Ws(t,n,s),s.computer;const i=qs(t),u=i&&io(i)?i:io(t.computer)?t.computer:void 0,a=typeof i=="function"?i:(u==null?void 0:u.create)??(typeof t.computer=="function"?t.computer:void 0),l=u==null?void 0:u.dispose,d=a&&typeof a=="function"?await a({runContext:n}):t.computer;if(!d)throw new Y("The computer tool did not provide a computer instance.");const c={computer:d,dispose:l};return o.set(n,c),Ws(t,n,c),t.computer=d,d}async function Hs({runContext:e}){const t=_r.get(e);if(!t)return;_r.delete(e);const n=[];for(const[r,o]of t.entries()){const s=ao.get(r);s==null||s.delete(e);const i=qs(r);i&&(r.computer=i),o.dispose&&n.push(async()=>{var u;await((u=o.dispose)==null?void 0:u.call(o,{runContext:e,computer:o.computer}))})}for(const r of n)try{await r()}catch(o){R.warn(`Failed to dispose computer for run context: ${o}`)}}function Ml(e,t){return`An error occurred while running the tool. Please try again. Error: ${t instanceof Error?t.toString():String(t)}`}function vr(e){const t=e.name?mr(e.name):mr(e.execute.name),n=typeof e.errorFunction>"u"?Ml:e.errorFunction;if(!t)throw new Error("Tool name cannot be empty. Either name your function or provide a name in the options.");const r=e.strict??!0;if(!r&&It(e.parameters))throw new Y("Strict mode is required for Zod parameters");const{parser:o,schema:s}=to(e.parameters,t);async function i(d,c,h){const[m,y]=await ce(()=>o(c));if(m!==null)throw R.dontLogToolData?R.debug(`Invalid JSON input for tool ${t}`):R.debug(`Invalid JSON input for tool ${t}: ${c}`),new el("Invalid JSON input for tool",void 0,m,{runContext:d,input:c,details:h});R.dontLogToolData?R.debug(`Invoking tool ${t}`):R.debug(`Invoking tool ${t} with input ${c}`);const b=await e.execute(y,d,h),_=ot(b);return R.dontLogToolData?R.debug(`Tool ${t} completed`):R.debug(`Tool ${t} returned: ${_}`),b}async function u(d,c,h){return i(d,c,h).catch(m=>{if(n){const y=En();return y==null||y.setError({message:"Error running tool (non-fatal)",data:{tool_name:t,error:m.toString()}}),n(d,m)}throw m})}const a=typeof e.needsApproval=="function"?e.needsApproval:async()=>typeof e.needsApproval=="boolean"?e.needsApproval:!1,l=typeof e.isEnabled=="function"?async(d,c)=>{const h=e.isEnabled;return!!await h({runContext:d,agent:c})}:async()=>typeof e.isEnabled=="boolean"?e.isEnabled:!0;return{type:"function",name:t,description:e.description,parameters:s,strict:r,invoke:u,needsApproval:a,isEnabled:l,inputGuardrails:zl(e.inputGuardrails),outputGuardrails:Dl(e.outputGuardrails)}}function A(e,t,n){function r(u,a){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:a,constr:i,traits:new Set},enumerable:!1}),u._zod.traits.has(e))return;u._zod.traits.add(e),t(u,a);const l=i.prototype,d=Object.keys(l);for(let c=0;c<d.length;c++){const h=d[c];h in u||(u[h]=l[h].bind(u))}}const o=(n==null?void 0:n.Parent)??Object;class s extends o{}Object.defineProperty(s,"name",{value:e});function i(u){var a;const l=n!=null&&n.Parent?new s:this;r(l,u),(a=l._zod).deferred??(a.deferred=[]);for(const d of l._zod.deferred)d();return l}return Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:u=>{var a,l;return n!=null&&n.Parent&&u instanceof n.Parent?!0:(l=(a=u==null?void 0:u._zod)==null?void 0:a.traits)==null?void 0:l.has(e)}}),Object.defineProperty(i,"name",{value:e}),i}class Ht extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Ks extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Ys={};function st(e){return Ys}function Xs(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,o])=>t.indexOf(+r)===-1).map(([r,o])=>o)}function uo(e,t){return typeof t=="bigint"?t.toString():t}function wr(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function co(e){return e==null}function lo(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function jl(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let o=(r.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(r)){const a=r.match(/\d?e-(\d?)/);a!=null&&a[1]&&(o=Number.parseInt(a[1]))}const s=n>o?n:o,i=Number.parseInt(e.toFixed(s).replace(".","")),u=Number.parseInt(t.toFixed(s).replace(".",""));return i%u/10**s}const Qs=Symbol("evaluating");function W(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==Qs)return r===void 0&&(r=Qs,r=n()),r},set(o){Object.defineProperty(e,t,{value:o})},configurable:!0})}function St(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function it(...e){const t={};for(const n of e){const r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function ei(e){return JSON.stringify(e)}function Fl(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const ti="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Sn(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Ll=wr(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Kt(e){if(Sn(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const n=t.prototype;return!(Sn(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function ni(e){return Kt(e)?{...e}:Array.isArray(e)?[...e]:e}const Ul=new Set(["string","number","symbol"]);function Yt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function at(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(r._zod.parent=e),r}function N(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Gl(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Jl={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Bl(e,t){const n=e._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const s=it(e._zod.def,{get shape(){const i={};for(const u in t){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);t[u]&&(i[u]=n.shape[u])}return St(this,"shape",i),i},checks:[]});return at(e,s)}function ql(e,t){const n=e._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const s=it(e._zod.def,{get shape(){const i={...e._zod.def.shape};for(const u in t){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);t[u]&&delete i[u]}return St(this,"shape",i),i},checks:[]});return at(e,s)}function Wl(e,t){if(!Kt(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0){const s=e._zod.def.shape;for(const i in t)if(Object.getOwnPropertyDescriptor(s,i)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const o=it(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return St(this,"shape",s),s}});return at(e,o)}function Vl(e,t){if(!Kt(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n=it(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return St(this,"shape",r),r}});return at(e,n)}function Hl(e,t){const n=it(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return St(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return at(e,n)}function Kl(e,t,n){const o=t._zod.def.checks;if(o&&o.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const i=it(t._zod.def,{get shape(){const u=t._zod.def.shape,a={...u};if(n)for(const l in n){if(!(l in u))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=e?new e({type:"optional",innerType:u[l]}):u[l])}else for(const l in u)a[l]=e?new e({type:"optional",innerType:u[l]}):u[l];return St(this,"shape",a),a},checks:[]});return at(t,i)}function Yl(e,t,n){const r=it(t._zod.def,{get shape(){const o=t._zod.def.shape,s={...o};if(n)for(const i in n){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(s[i]=new e({type:"nonoptional",innerType:o[i]}))}else for(const i in o)s[i]=new e({type:"nonoptional",innerType:o[i]});return St(this,"shape",s),s}});return at(t,r)}function Xt(e,t=0){var n;if(e.aborted===!0)return!0;for(let r=t;r<e.issues.length;r++)if(((n=e.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function Qt(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function br(e){return typeof e=="string"?e:e==null?void 0:e.message}function ut(e,t,n){var o,s,i,u,a,l;const r={...e,path:e.path??[]};if(!e.message){const d=br((i=(s=(o=e.inst)==null?void 0:o._zod.def)==null?void 0:s.error)==null?void 0:i.call(s,e))??br((u=t==null?void 0:t.error)==null?void 0:u.call(t,e))??br((a=n.customError)==null?void 0:a.call(n,e))??br((l=n.localeError)==null?void 0:l.call(n,e))??"Invalid input";r.message=d}return delete r.inst,delete r.continue,t!=null&&t.reportInput||delete r.input,r}function po(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Tn(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const ri=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,uo,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},oi=A("$ZodError",ri),si=A("$ZodError",ri,{Parent:Error});function Xl(e,t=n=>n.message){const n={},r=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}function Ql(e,t=n=>n.message){const n={_errors:[]},r=o=>{for(const s of o.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(i=>r({issues:i}));else if(s.code==="invalid_key")r({issues:s.issues});else if(s.code==="invalid_element")r({issues:s.issues});else if(s.path.length===0)n._errors.push(t(s));else{let i=n,u=0;for(;u<s.path.length;){const a=s.path[u];u===s.path.length-1?(i[a]=i[a]||{_errors:[]},i[a]._errors.push(t(s))):i[a]=i[a]||{_errors:[]},i=i[a],u++}}};return r(e),n}const fo=e=>(t,n,r,o)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new Ht;if(i.issues.length){const u=new((o==null?void 0:o.Err)??e)(i.issues.map(a=>ut(a,s,st())));throw ti(u,o==null?void 0:o.callee),u}return i.value},ho=e=>async(t,n,r,o)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise&&(i=await i),i.issues.length){const u=new((o==null?void 0:o.Err)??e)(i.issues.map(a=>ut(a,s,st())));throw ti(u,o==null?void 0:o.callee),u}return i.value},Ir=e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new Ht;return s.issues.length?{success:!1,error:new(e??oi)(s.issues.map(i=>ut(i,o,st())))}:{success:!0,data:s.value}},ep=Ir(si),Sr=e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},o);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(i=>ut(i,o,st())))}:{success:!0,data:s.value}},tp=Sr(si),np=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return fo(e)(t,n,o)},rp=e=>(t,n,r)=>fo(e)(t,n,r),op=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return ho(e)(t,n,o)},sp=e=>async(t,n,r)=>ho(e)(t,n,r),ip=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ir(e)(t,n,o)},ap=e=>(t,n,r)=>Ir(e)(t,n,r),up=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Sr(e)(t,n,o)},cp=e=>async(t,n,r)=>Sr(e)(t,n,r),lp=/^[cC][^\s-]{8,}$/,pp=/^[0-9a-z]+$/,dp=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,fp=/^[0-9a-vA-V]{20}$/,hp=/^[A-Za-z0-9]{27}$/,mp=/^[a-zA-Z0-9_-]{21}$/,gp=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,yp=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ii=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,_p=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,vp="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function wp(){return new RegExp(vp,"u")}const bp=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ip=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Sp=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Tp=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ap=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ai=/^[A-Za-z0-9_-]*$/,kp=/^\+[1-9]\d{6,14}$/,ui="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Op=new RegExp(`^${ui}$`);function ci(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function xp(e){return new RegExp(`^${ci(e)}$`)}function Ep(e){const t=ci({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${ui}T(?:${r})$`)}const Cp=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Pp=/^-?\d+$/,li=/^-?\d+(?:\.\d+)?$/,Rp=/^(?:true|false)$/i,$p=/^[^A-Z]*$/,Np=/^[^a-z]*$/,Ie=A("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),pi={number:"number",bigint:"bigint",object:"date"},di=A("$ZodCheckLessThan",(e,t)=>{Ie.init(e,t);const n=pi[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),fi=A("$ZodCheckGreaterThan",(e,t)=>{Ie.init(e,t);const n=pi[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),zp=A("$ZodCheckMultipleOf",(e,t)=>{Ie.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):jl(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Dp=A("$ZodCheckNumberFormat",(e,t)=>{var i;Ie.init(e,t),t.format=t.format||"float64";const n=(i=t.format)==null?void 0:i.includes("int"),r=n?"int":"number",[o,s]=Jl[t.format];e._zod.onattach.push(u=>{const a=u._zod.bag;a.format=t.format,a.minimum=o,a.maximum=s,n&&(a.pattern=Pp)}),e._zod.check=u=>{const a=u.value;if(n){if(!Number.isInteger(a)){u.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});return}if(!Number.isSafeInteger(a)){a>0?u.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,inclusive:!0,continue:!t.abort}):u.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,inclusive:!0,continue:!t.abort});return}}a<o&&u.issues.push({origin:"number",input:a,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),a>s&&u.issues.push({origin:"number",input:a,code:"too_big",maximum:s,inclusive:!0,inst:e,continue:!t.abort})}}),Zp=A("$ZodCheckMaxLength",(e,t)=>{var n;Ie.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!co(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const o=r.value;if(o.length<=t.maximum)return;const i=po(o);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Mp=A("$ZodCheckMinLength",(e,t)=>{var n;Ie.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!co(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const o=r.value;if(o.length>=t.minimum)return;const i=po(o);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),jp=A("$ZodCheckLengthEquals",(e,t)=>{var n;Ie.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!co(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=r=>{const o=r.value,s=o.length;if(s===t.length)return;const i=po(o),u=s>t.length;r.issues.push({origin:i,...u?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),Tr=A("$ZodCheckStringFormat",(e,t)=>{var n,r;Ie.init(e,t),e._zod.onattach.push(o=>{const s=o._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),Fp=A("$ZodCheckRegex",(e,t)=>{Tr.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Lp=A("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=$p),Tr.init(e,t)}),Up=A("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Np),Tr.init(e,t)}),Gp=A("$ZodCheckIncludes",(e,t)=>{Ie.init(e,t);const n=Yt(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(o=>{const s=o._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),Jp=A("$ZodCheckStartsWith",(e,t)=>{Ie.init(e,t);const n=new RegExp(`^${Yt(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),Bp=A("$ZodCheckEndsWith",(e,t)=>{Ie.init(e,t);const n=new RegExp(`.*${Yt(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),qp=A("$ZodCheckOverwrite",(e,t)=>{Ie.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class Wp{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(i=>i),o=Math.min(...r.map(i=>i.length-i.trimStart().length)),s=r.map(i=>i.slice(o)).map(i=>" ".repeat(this.indent*2)+i);for(const i of s)this.content.push(i)}compile(){const t=Function,n=this==null?void 0:this.args,o=[...((this==null?void 0:this.content)??[""]).map(s=>`  ${s}`)];return new t(...n,o.join(`
`))}}const Vp={major:4,minor:3,patch:5},ne=A("$ZodType",(e,t)=>{var o;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Vp;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const s of r)for(const i of s._zod.onattach)i(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),(o=e._zod.deferred)==null||o.push(()=>{e._zod.run=e._zod.parse});else{const s=(u,a,l)=>{let d=Xt(u),c;for(const h of a){if(h._zod.def.when){if(!h._zod.def.when(u))continue}else if(d)continue;const m=u.issues.length,y=h._zod.check(u);if(y instanceof Promise&&(l==null?void 0:l.async)===!1)throw new Ht;if(c||y instanceof Promise)c=(c??Promise.resolve()).then(async()=>{await y,u.issues.length!==m&&(d||(d=Xt(u,m)))});else{if(u.issues.length===m)continue;d||(d=Xt(u,m))}}return c?c.then(()=>u):u},i=(u,a,l)=>{if(Xt(u))return u.aborted=!0,u;const d=s(a,r,l);if(d instanceof Promise){if(l.async===!1)throw new Ht;return d.then(c=>e._zod.parse(c,l))}return e._zod.parse(d,l)};e._zod.run=(u,a)=>{if(a.skipChecks)return e._zod.parse(u,a);if(a.direction==="backward"){const d=e._zod.parse({value:u.value,issues:[]},{...a,skipChecks:!0});return d instanceof Promise?d.then(c=>i(c,u,a)):i(d,u,a)}const l=e._zod.parse(u,a);if(l instanceof Promise){if(a.async===!1)throw new Ht;return l.then(d=>s(d,r,a))}return s(l,r,a)}}W(e,"~standard",()=>({validate:s=>{var i;try{const u=ep(e,s);return u.success?{value:u.data}:{issues:(i=u.error)==null?void 0:i.issues}}catch{return tp(e,s).then(a=>{var l;return a.success?{value:a.data}:{issues:(l=a.error)==null?void 0:l.issues}})}},vendor:"zod",version:1}))}),mo=A("$ZodString",(e,t)=>{var n;ne.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??Cp(e._zod.bag),e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),se=A("$ZodStringFormat",(e,t)=>{Tr.init(e,t),mo.init(e,t)}),Hp=A("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=yp),se.init(e,t)}),Kp=A("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ii(r))}else t.pattern??(t.pattern=ii());se.init(e,t)}),Yp=A("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=_p),se.init(e,t)}),Xp=A("$ZodURL",(e,t)=>{se.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),o=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=o.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Qp=A("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=wp()),se.init(e,t)}),ed=A("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=mp),se.init(e,t)}),td=A("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=lp),se.init(e,t)}),nd=A("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=pp),se.init(e,t)}),rd=A("$ZodULID",(e,t)=>{t.pattern??(t.pattern=dp),se.init(e,t)}),od=A("$ZodXID",(e,t)=>{t.pattern??(t.pattern=fp),se.init(e,t)}),sd=A("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=hp),se.init(e,t)}),id=A("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Ep(t)),se.init(e,t)}),ad=A("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Op),se.init(e,t)}),ud=A("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=xp(t)),se.init(e,t)}),cd=A("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=gp),se.init(e,t)}),ld=A("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=bp),se.init(e,t),e._zod.bag.format="ipv4"}),pd=A("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Ip),se.init(e,t),e._zod.bag.format="ipv6",e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),dd=A("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Sp),se.init(e,t)}),fd=A("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Tp),se.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[o,s]=r;if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${o}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function hi(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const hd=A("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Ap),se.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=n=>{hi(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function md(e){if(!ai.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return hi(n)}const gd=A("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=ai),se.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=n=>{md(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),yd=A("$ZodE164",(e,t)=>{t.pattern??(t.pattern=kp),se.init(e,t)});function _d(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const o=JSON.parse(atob(r));return!("typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const vd=A("$ZodJWT",(e,t)=>{se.init(e,t),e._zod.check=n=>{_d(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),mi=A("$ZodNumber",(e,t)=>{ne.init(e,t),e._zod.pattern=e._zod.bag.pattern??li,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const o=n.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return n;const s=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...s?{received:s}:{}}),n}}),wd=A("$ZodNumberFormat",(e,t)=>{Dp.init(e,t),mi.init(e,t)}),bd=A("$ZodBoolean",(e,t)=>{ne.init(e,t),e._zod.pattern=Rp,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const o=n.value;return typeof o=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),n}}),Id=A("$ZodAny",(e,t)=>{ne.init(e,t),e._zod.parse=n=>n}),Sd=A("$ZodUnknown",(e,t)=>{ne.init(e,t),e._zod.parse=n=>n}),Td=A("$ZodNever",(e,t)=>{ne.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function gi(e,t,n){e.issues.length&&t.issues.push(...Qt(n,e.issues)),t.value[n]=e.value}const Ad=A("$ZodArray",(e,t)=>{ne.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const s=[];for(let i=0;i<o.length;i++){const u=o[i],a=t.element._zod.run({value:u,issues:[]},r);a instanceof Promise?s.push(a.then(l=>gi(l,n,i))):gi(a,n,i)}return s.length?Promise.all(s).then(()=>n):n}});function Ar(e,t,n,r,o){if(e.issues.length){if(o&&!(n in r))return;t.issues.push(...Qt(n,e.issues))}e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function yi(e){var r,o,s,i;const t=Object.keys(e.shape);for(const u of t)if(!((i=(s=(o=(r=e.shape)==null?void 0:r[u])==null?void 0:o._zod)==null?void 0:s.traits)!=null&&i.has("$ZodType")))throw new Error(`Invalid element at key "${u}": expected a Zod schema`);const n=Gl(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function _i(e,t,n,r,o,s){const i=[],u=o.keySet,a=o.catchall._zod,l=a.def.type,d=a.optout==="optional";for(const c in t){if(u.has(c))continue;if(l==="never"){i.push(c);continue}const h=a.run({value:t[c],issues:[]},r);h instanceof Promise?e.push(h.then(m=>Ar(m,n,c,t,d))):Ar(h,n,c,t,d)}return i.length&&n.issues.push({code:"unrecognized_keys",keys:i,input:t,inst:s}),e.length?Promise.all(e).then(()=>n):n}const kd=A("$ZodObject",(e,t)=>{ne.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!(n!=null&&n.get)){const u=t.shape;Object.defineProperty(t,"shape",{get:()=>{const a={...u};return Object.defineProperty(t,"shape",{value:a}),a}})}const r=wr(()=>yi(t));W(e._zod,"propValues",()=>{const u=t.shape,a={};for(const l in u){const d=u[l]._zod;if(d.values){a[l]??(a[l]=new Set);for(const c of d.values)a[l].add(c)}}return a});const o=Sn,s=t.catchall;let i;e._zod.parse=(u,a)=>{i??(i=r.value);const l=u.value;if(!o(l))return u.issues.push({expected:"object",code:"invalid_type",input:l,inst:e}),u;u.value={};const d=[],c=i.shape;for(const h of i.keys){const m=c[h],y=m._zod.optout==="optional",b=m._zod.run({value:l[h],issues:[]},a);b instanceof Promise?d.push(b.then(_=>Ar(_,u,h,l,y))):Ar(b,u,h,l,y)}return s?_i(d,l,u,a,r.value,e):d.length?Promise.all(d).then(()=>u):u}}),Od=A("$ZodObjectJIT",(e,t)=>{kd.init(e,t);const n=e._zod.parse,r=wr(()=>yi(t)),o=h=>{var w;const m=new Wp(["shape","payload","ctx"]),y=r.value,b=O=>{const x=ei(O);return`shape[${x}]._zod.run({ value: input[${x}], issues: [] }, ctx)`};m.write("const input = payload.value;");const _=Object.create(null);let g=0;for(const O of y.keys)_[O]=`key_${g++}`;m.write("const newResult = {};");for(const O of y.keys){const x=_[O],C=ei(O),$=h[O],q=((w=$==null?void 0:$._zod)==null?void 0:w.optout)==="optional";m.write(`const ${x} = ${b(O)};`),q?m.write(`
        if (${x}.issues.length) {
          if (${C} in input) {
            payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${C}, ...iss.path] : [${C}]
            })));
          }
        }
        
        if (${x}.value === undefined) {
          if (${C} in input) {
            newResult[${C}] = undefined;
          }
        } else {
          newResult[${C}] = ${x}.value;
        }
        
      `):m.write(`
        if (${x}.issues.length) {
          payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${C}, ...iss.path] : [${C}]
          })));
        }
        
        if (${x}.value === undefined) {
          if (${C} in input) {
            newResult[${C}] = undefined;
          }
        } else {
          newResult[${C}] = ${x}.value;
        }
        
      `)}m.write("payload.value = newResult;"),m.write("return payload;");const v=m.compile();return(O,x)=>v(h,O,x)};let s;const i=Sn,u=!Ys.jitless,l=u&&Ll.value,d=t.catchall;let c;e._zod.parse=(h,m)=>{c??(c=r.value);const y=h.value;return i(y)?u&&l&&(m==null?void 0:m.async)===!1&&m.jitless!==!0?(s||(s=o(t.shape)),h=s(h,m),d?_i([],y,h,m,c,e):h):n(h,m):(h.issues.push({expected:"object",code:"invalid_type",input:y,inst:e}),h)}});function vi(e,t,n,r){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;const o=e.filter(s=>!Xt(s));return o.length===1?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(s=>s.issues.map(i=>ut(i,r,st())))}),t)}const wi=A("$ZodUnion",(e,t)=>{ne.init(e,t),W(e._zod,"optin",()=>t.options.some(o=>o._zod.optin==="optional")?"optional":void 0),W(e._zod,"optout",()=>t.options.some(o=>o._zod.optout==="optional")?"optional":void 0),W(e._zod,"values",()=>{if(t.options.every(o=>o._zod.values))return new Set(t.options.flatMap(o=>Array.from(o._zod.values)))}),W(e._zod,"pattern",()=>{if(t.options.every(o=>o._zod.pattern)){const o=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${o.map(s=>lo(s.source)).join("|")})$`)}});const n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(o,s)=>{if(n)return r(o,s);let i=!1;const u=[];for(const a of t.options){const l=a._zod.run({value:o.value,issues:[]},s);if(l instanceof Promise)u.push(l),i=!0;else{if(l.issues.length===0)return l;u.push(l)}}return i?Promise.all(u).then(a=>vi(a,o,e,s)):vi(u,o,e,s)}}),xd=A("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,wi.init(e,t);const n=e._zod.parse;W(e._zod,"propValues",()=>{const o={};for(const s of t.options){const i=s._zod.propValues;if(!i||Object.keys(i).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(s)}"`);for(const[u,a]of Object.entries(i)){o[u]||(o[u]=new Set);for(const l of a)o[u].add(l)}}return o});const r=wr(()=>{var i;const o=t.options,s=new Map;for(const u of o){const a=(i=u._zod.propValues)==null?void 0:i[t.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(u)}"`);for(const l of a){if(s.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);s.set(l,u)}}return s});e._zod.parse=(o,s)=>{const i=o.value;if(!Sn(i))return o.issues.push({code:"invalid_type",expected:"object",input:i,inst:e}),o;const u=r.value.get(i==null?void 0:i[t.discriminator]);return u?u._zod.run(o,s):t.unionFallback?n(o,s):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:i,path:[t.discriminator],inst:e}),o)}}),Ed=A("$ZodIntersection",(e,t)=>{ne.init(e,t),e._zod.parse=(n,r)=>{const o=n.value,s=t.left._zod.run({value:o,issues:[]},r),i=t.right._zod.run({value:o,issues:[]},r);return s instanceof Promise||i instanceof Promise?Promise.all([s,i]).then(([a,l])=>bi(n,a,l)):bi(n,s,i)}});function go(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Kt(e)&&Kt(t)){const n=Object.keys(t),r=Object.keys(e).filter(s=>n.indexOf(s)!==-1),o={...e,...t};for(const s of r){const i=go(e[s],t[s]);if(!i.valid)return{valid:!1,mergeErrorPath:[s,...i.mergeErrorPath]};o[s]=i.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const o=e[r],s=t[r],i=go(o,s);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function bi(e,t,n){const r=new Map;let o;for(const u of t.issues)if(u.code==="unrecognized_keys"){o??(o=u);for(const a of u.keys)r.has(a)||r.set(a,{}),r.get(a).l=!0}else e.issues.push(u);for(const u of n.issues)if(u.code==="unrecognized_keys")for(const a of u.keys)r.has(a)||r.set(a,{}),r.get(a).r=!0;else e.issues.push(u);const s=[...r].filter(([,u])=>u.l&&u.r).map(([u])=>u);if(s.length&&o&&e.issues.push({...o,keys:s}),Xt(e))return e;const i=go(t.value,n.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const Cd=A("$ZodRecord",(e,t)=>{ne.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Kt(o))return n.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),n;const s=[],i=t.keyType._zod.values;if(i){n.value={};const u=new Set;for(const l of i)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){u.add(typeof l=="number"?l.toString():l);const d=t.valueType._zod.run({value:o[l],issues:[]},r);d instanceof Promise?s.push(d.then(c=>{c.issues.length&&n.issues.push(...Qt(l,c.issues)),n.value[l]=c.value})):(d.issues.length&&n.issues.push(...Qt(l,d.issues)),n.value[l]=d.value)}let a;for(const l in o)u.has(l)||(a=a??[],a.push(l));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:a})}else{n.value={};for(const u of Reflect.ownKeys(o)){if(u==="__proto__")continue;let a=t.keyType._zod.run({value:u,issues:[]},r);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof u=="string"&&li.test(u)&&a.issues.length&&a.issues.some(c=>c.code==="invalid_type"&&c.expected==="number")){const c=t.keyType._zod.run({value:Number(u),issues:[]},r);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");c.issues.length===0&&(a=c)}if(a.issues.length){t.mode==="loose"?n.value[u]=o[u]:n.issues.push({code:"invalid_key",origin:"record",issues:a.issues.map(c=>ut(c,r,st())),input:u,path:[u],inst:e});continue}const d=t.valueType._zod.run({value:o[u],issues:[]},r);d instanceof Promise?s.push(d.then(c=>{c.issues.length&&n.issues.push(...Qt(u,c.issues)),n.value[a.value]=c.value})):(d.issues.length&&n.issues.push(...Qt(u,d.issues)),n.value[a.value]=d.value)}}return s.length?Promise.all(s).then(()=>n):n}}),Pd=A("$ZodEnum",(e,t)=>{ne.init(e,t);const n=Xs(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(o=>Ul.has(typeof o)).map(o=>typeof o=="string"?Yt(o):o.toString()).join("|")})$`),e._zod.parse=(o,s)=>{const i=o.value;return r.has(i)||o.issues.push({code:"invalid_value",values:n,input:i,inst:e}),o}}),Rd=A("$ZodLiteral",(e,t)=>{if(ne.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");const n=new Set(t.values);e._zod.values=n,e._zod.pattern=new RegExp(`^(${t.values.map(r=>typeof r=="string"?Yt(r):r?Yt(r.toString()):String(r)).join("|")})$`),e._zod.parse=(r,o)=>{const s=r.value;return n.has(s)||r.issues.push({code:"invalid_value",values:t.values,input:s,inst:e}),r}}),$d=A("$ZodTransform",(e,t)=>{ne.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Ks(e.constructor.name);const o=t.transform(n.value,n);if(r.async)return(o instanceof Promise?o:Promise.resolve(o)).then(i=>(n.value=i,n));if(o instanceof Promise)throw new Ht;return n.value=o,n}});function Ii(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Si=A("$ZodOptional",(e,t)=>{ne.init(e,t),e._zod.optin="optional",e._zod.optout="optional",W(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),W(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${lo(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>Ii(s,n.value)):Ii(o,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),Nd=A("$ZodExactOptional",(e,t)=>{Si.init(e,t),W(e._zod,"values",()=>t.innerType._zod.values),W(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(n,r)=>t.innerType._zod.run(n,r)}),zd=A("$ZodNullable",(e,t)=>{ne.init(e,t),W(e._zod,"optin",()=>t.innerType._zod.optin),W(e._zod,"optout",()=>t.innerType._zod.optout),W(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${lo(n.source)}|null)$`):void 0}),W(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),Dd=A("$ZodDefault",(e,t)=>{ne.init(e,t),e._zod.optin="optional",W(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);if(n.value===void 0)return n.value=t.defaultValue,n;const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>Ti(s,t)):Ti(o,t)}});function Ti(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Zd=A("$ZodPrefault",(e,t)=>{ne.init(e,t),e._zod.optin="optional",W(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),Md=A("$ZodNonOptional",(e,t)=>{ne.init(e,t),W(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>Ai(s,e)):Ai(o,e)}});function Ai(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const jd=A("$ZodCatch",(e,t)=>{ne.init(e,t),W(e._zod,"optin",()=>t.innerType._zod.optin),W(e._zod,"optout",()=>t.innerType._zod.optout),W(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(i=>ut(i,r,st()))},input:n.value}),n.issues=[]),n)):(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(s=>ut(s,r,st()))},input:n.value}),n.issues=[]),n)}}),Fd=A("$ZodPipe",(e,t)=>{ne.init(e,t),W(e._zod,"values",()=>t.in._zod.values),W(e._zod,"optin",()=>t.in._zod.optin),W(e._zod,"optout",()=>t.out._zod.optout),W(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{if(r.direction==="backward"){const s=t.out._zod.run(n,r);return s instanceof Promise?s.then(i=>kr(i,t.in,r)):kr(s,t.in,r)}const o=t.in._zod.run(n,r);return o instanceof Promise?o.then(s=>kr(s,t.out,r)):kr(o,t.out,r)}});function kr(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const Ld=A("$ZodReadonly",(e,t)=>{ne.init(e,t),W(e._zod,"propValues",()=>t.innerType._zod.propValues),W(e._zod,"values",()=>t.innerType._zod.values),W(e._zod,"optin",()=>{var n,r;return(r=(n=t.innerType)==null?void 0:n._zod)==null?void 0:r.optin}),W(e._zod,"optout",()=>{var n,r;return(r=(n=t.innerType)==null?void 0:n._zod)==null?void 0:r.optout}),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(ki):ki(o)}});function ki(e){return e.value=Object.freeze(e.value),e}const Ud=A("$ZodLazy",(e,t)=>{ne.init(e,t),W(e._zod,"innerType",()=>t.getter()),W(e._zod,"pattern",()=>{var n,r;return(r=(n=e._zod.innerType)==null?void 0:n._zod)==null?void 0:r.pattern}),W(e._zod,"propValues",()=>{var n,r;return(r=(n=e._zod.innerType)==null?void 0:n._zod)==null?void 0:r.propValues}),W(e._zod,"optin",()=>{var n,r;return((r=(n=e._zod.innerType)==null?void 0:n._zod)==null?void 0:r.optin)??void 0}),W(e._zod,"optout",()=>{var n,r;return((r=(n=e._zod.innerType)==null?void 0:n._zod)==null?void 0:r.optout)??void 0}),e._zod.parse=(n,r)=>e._zod.innerType._zod.run(n,r)}),Gd=A("$ZodCustom",(e,t)=>{Ie.init(e,t),ne.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(s=>Oi(s,n,r,e));Oi(o,n,r,e)}});function Oi(e,t,n,r){if(!e){const o={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(o.params=r._zod.def.params),t.issues.push(Tn(o))}}var xi;class Jd{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const r=n[0];return this._map.set(t,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const o={...r,...this._map.get(t)};return Object.keys(o).length?o:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Bd(){return new Jd}(xi=globalThis).__zod_globalRegistry??(xi.__zod_globalRegistry=Bd());const An=globalThis.__zod_globalRegistry;function qd(e,t){return new e({type:"string",...N(t)})}function Wd(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...N(t)})}function Ei(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...N(t)})}function Vd(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...N(t)})}function Hd(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...N(t)})}function Kd(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...N(t)})}function Yd(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...N(t)})}function Xd(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...N(t)})}function Qd(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...N(t)})}function ef(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...N(t)})}function tf(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...N(t)})}function nf(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...N(t)})}function rf(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...N(t)})}function of(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...N(t)})}function sf(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...N(t)})}function af(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...N(t)})}function uf(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...N(t)})}function cf(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...N(t)})}function lf(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...N(t)})}function pf(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...N(t)})}function df(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...N(t)})}function ff(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...N(t)})}function hf(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...N(t)})}function mf(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...N(t)})}function gf(e,t){return new e({type:"string",format:"date",check:"string_format",...N(t)})}function yf(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...N(t)})}function _f(e,t){return new e({type:"string",format:"duration",check:"string_format",...N(t)})}function vf(e,t){return new e({type:"number",checks:[],...N(t)})}function wf(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...N(t)})}function bf(e,t){return new e({type:"boolean",...N(t)})}function If(e){return new e({type:"any"})}function Sf(e){return new e({type:"unknown"})}function Tf(e,t){return new e({type:"never",...N(t)})}function Ci(e,t){return new di({check:"less_than",...N(t),value:e,inclusive:!1})}function yo(e,t){return new di({check:"less_than",...N(t),value:e,inclusive:!0})}function Pi(e,t){return new fi({check:"greater_than",...N(t),value:e,inclusive:!1})}function _o(e,t){return new fi({check:"greater_than",...N(t),value:e,inclusive:!0})}function Ri(e,t){return new zp({check:"multiple_of",...N(t),value:e})}function $i(e,t){return new Zp({check:"max_length",...N(t),maximum:e})}function Or(e,t){return new Mp({check:"min_length",...N(t),minimum:e})}function Ni(e,t){return new jp({check:"length_equals",...N(t),length:e})}function Af(e,t){return new Fp({check:"string_format",format:"regex",...N(t),pattern:e})}function kf(e){return new Lp({check:"string_format",format:"lowercase",...N(e)})}function Of(e){return new Up({check:"string_format",format:"uppercase",...N(e)})}function xf(e,t){return new Gp({check:"string_format",format:"includes",...N(t),includes:e})}function Ef(e,t){return new Jp({check:"string_format",format:"starts_with",...N(t),prefix:e})}function Cf(e,t){return new Bp({check:"string_format",format:"ends_with",...N(t),suffix:e})}function en(e){return new qp({check:"overwrite",tx:e})}function Pf(e){return en(t=>t.normalize(e))}function Rf(){return en(e=>e.trim())}function $f(){return en(e=>e.toLowerCase())}function Nf(){return en(e=>e.toUpperCase())}function zf(){return en(e=>Fl(e))}function Df(e,t,n){return new e({type:"array",element:t,...N(n)})}function Zf(e,t,n){return new e({type:"custom",check:"custom",fn:t,...N(n)})}function Mf(e){const t=jf(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Tn(r,n.value,t._zod.def));else{const o=r;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),n.issues.push(Tn(o))}},e(n.value,n)));return t}function jf(e,t){const n=new Ie({check:"custom",...N(t)});return n._zod.check=e,n}function zi(e){let t=(e==null?void 0:e.target)??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:(e==null?void 0:e.metadata)??An,target:t,unrepresentable:(e==null?void 0:e.unrepresentable)??"throw",override:(e==null?void 0:e.override)??(()=>{}),io:(e==null?void 0:e.io)??"output",counter:0,seen:new Map,cycles:(e==null?void 0:e.cycles)??"ref",reused:(e==null?void 0:e.reused)??"inline",external:(e==null?void 0:e.external)??void 0}}function le(e,t,n={path:[],schemaPath:[]}){var d,c;var r;const o=e._zod.def,s=t.seen.get(e);if(s)return s.count++,n.schemaPath.includes(e)&&(s.cycle=n.path),s.schema;const i={schema:{},count:1,cycle:void 0,path:n.path};t.seen.set(e,i);const u=(c=(d=e._zod).toJSONSchema)==null?void 0:c.call(d);if(u)i.schema=u;else{const h={...n,schemaPath:[...n.schemaPath,e],path:n.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,i.schema,h);else{const y=i.schema,b=t.processors[o.type];if(!b)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${o.type}`);b(e,t,y,h)}const m=e._zod.parent;m&&(i.ref||(i.ref=m),le(m,t,h),t.seen.get(m).isParent=!0)}const a=t.metadataRegistry.get(e);return a&&Object.assign(i.schema,a),t.io==="input"&&be(e)&&(delete i.schema.examples,delete i.schema.default),t.io==="input"&&i.schema._prefault&&((r=i.schema).default??(r.default=i.schema._prefault)),delete i.schema._prefault,t.seen.get(e).schema}function Di(e,t){var i,u,a,l;const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const d of e.seen.entries()){const c=(i=e.metadataRegistry.get(d[0]))==null?void 0:i.id;if(c){const h=r.get(c);if(h&&h!==d[0])throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(c,d[0])}}const o=d=>{var b;const c=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const _=(b=e.external.registry.get(d[0]))==null?void 0:b.id,g=e.external.uri??(w=>w);if(_)return{ref:g(_)};const v=d[1].defId??d[1].schema.id??`schema${e.counter++}`;return d[1].defId=v,{defId:v,ref:`${g("__shared")}#/${c}/${v}`}}if(d[1]===n)return{ref:"#"};const m=`#/${c}/`,y=d[1].schema.id??`__schema${e.counter++}`;return{defId:y,ref:m+y}},s=d=>{if(d[1].schema.$ref)return;const c=d[1],{ref:h,defId:m}=o(d);c.def={...c.schema},m&&(c.defId=m);const y=c.schema;for(const b in y)delete y[b];y.$ref=h};if(e.cycles==="throw")for(const d of e.seen.entries()){const c=d[1];if(c.cycle)throw new Error(`Cycle detected: #/${(u=c.cycle)==null?void 0:u.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const d of e.seen.entries()){const c=d[1];if(t===d[0]){s(d);continue}if(e.external){const m=(a=e.external.registry.get(d[0]))==null?void 0:a.id;if(t!==d[0]&&m){s(d);continue}}if((l=e.metadataRegistry.get(d[0]))==null?void 0:l.id){s(d);continue}if(c.cycle){s(d);continue}if(c.count>1&&e.reused==="ref"){s(d);continue}}}function Zi(e,t){var i,u,a;const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const d=e.seen.get(l);if(d.ref===null)return;const c=d.def??d.schema,h={...c},m=d.ref;if(d.ref=null,m){r(m);const b=e.seen.get(m),_=b.schema;if(_.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(c.allOf=c.allOf??[],c.allOf.push(_)):Object.assign(c,_),Object.assign(c,h),l._zod.parent===m)for(const v in c)v==="$ref"||v==="allOf"||v in h||delete c[v];if(_.$ref)for(const v in c)v==="$ref"||v==="allOf"||v in b.def&&JSON.stringify(c[v])===JSON.stringify(b.def[v])&&delete c[v]}const y=l._zod.parent;if(y&&y!==m){r(y);const b=e.seen.get(y);if(b!=null&&b.schema.$ref&&(c.$ref=b.schema.$ref,b.def))for(const _ in c)_==="$ref"||_==="allOf"||_ in b.def&&JSON.stringify(c[_])===JSON.stringify(b.def[_])&&delete c[_]}e.override({zodSchema:l,jsonSchema:c,path:d.path??[]})};for(const l of[...e.seen.entries()].reverse())r(l[0]);const o={};if(e.target==="draft-2020-12"?o.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?o.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?o.$schema="http://json-schema.org/draft-04/schema#":e.target,(i=e.external)!=null&&i.uri){const l=(u=e.external.registry.get(t))==null?void 0:u.id;if(!l)throw new Error("Schema is missing an `id` property");o.$id=e.external.uri(l)}Object.assign(o,n.def??n.schema);const s=((a=e.external)==null?void 0:a.defs)??{};for(const l of e.seen.entries()){const d=l[1];d.def&&d.defId&&(s[d.defId]=d.def)}e.external||Object.keys(s).length>0&&(e.target==="draft-2020-12"?o.$defs=s:o.definitions=s);try{const l=JSON.parse(JSON.stringify(o));return Object.defineProperty(l,"~standard",{value:{...t["~standard"],jsonSchema:{input:xr(t,"input",e.processors),output:xr(t,"output",e.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function be(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const r=e._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return be(r.element,n);if(r.type==="set")return be(r.valueType,n);if(r.type==="lazy")return be(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return be(r.innerType,n);if(r.type==="intersection")return be(r.left,n)||be(r.right,n);if(r.type==="record"||r.type==="map")return be(r.keyType,n)||be(r.valueType,n);if(r.type==="pipe")return be(r.in,n)||be(r.out,n);if(r.type==="object"){for(const o in r.shape)if(be(r.shape[o],n))return!0;return!1}if(r.type==="union"){for(const o of r.options)if(be(o,n))return!0;return!1}if(r.type==="tuple"){for(const o of r.items)if(be(o,n))return!0;return!!(r.rest&&be(r.rest,n))}return!1}const Ff=(e,t={})=>n=>{const r=zi({...n,processors:t});return le(e,r),Di(r,e),Zi(r,e)},xr=(e,t,n={})=>r=>{const{libraryOptions:o,target:s}=r??{},i=zi({...o??{},target:s,io:t,processors:n});return le(e,i),Di(i,e),Zi(i,e)},Lf={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},Uf=(e,t,n,r)=>{const o=n;o.type="string";const{minimum:s,maximum:i,format:u,patterns:a,contentEncoding:l}=e._zod.bag;if(typeof s=="number"&&(o.minLength=s),typeof i=="number"&&(o.maxLength=i),u&&(o.format=Lf[u]??u,o.format===""&&delete o.format,u==="time"&&delete o.format),l&&(o.contentEncoding=l),a&&a.size>0){const d=[...a];d.length===1?o.pattern=d[0].source:d.length>1&&(o.allOf=[...d.map(c=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:c.source}))])}},Gf=(e,t,n,r)=>{const o=n,{minimum:s,maximum:i,format:u,multipleOf:a,exclusiveMaximum:l,exclusiveMinimum:d}=e._zod.bag;typeof u=="string"&&u.includes("int")?o.type="integer":o.type="number",typeof d=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(o.minimum=d,o.exclusiveMinimum=!0):o.exclusiveMinimum=d),typeof s=="number"&&(o.minimum=s,typeof d=="number"&&t.target!=="draft-04"&&(d>=s?delete o.minimum:delete o.exclusiveMinimum)),typeof l=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(o.maximum=l,o.exclusiveMaximum=!0):o.exclusiveMaximum=l),typeof i=="number"&&(o.maximum=i,typeof l=="number"&&t.target!=="draft-04"&&(l<=i?delete o.maximum:delete o.exclusiveMaximum)),typeof a=="number"&&(o.multipleOf=a)},Jf=(e,t,n,r)=>{n.type="boolean"},Bf=(e,t,n,r)=>{n.not={}},qf=(e,t,n,r)=>{},Wf=(e,t,n,r)=>{},Vf=(e,t,n,r)=>{const o=e._zod.def,s=Xs(o.entries);s.every(i=>typeof i=="number")&&(n.type="number"),s.every(i=>typeof i=="string")&&(n.type="string"),n.enum=s},Hf=(e,t,n,r)=>{const o=e._zod.def,s=[];for(const i of o.values)if(i===void 0){if(t.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof i=="bigint"){if(t.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");s.push(Number(i))}else s.push(i);if(s.length!==0)if(s.length===1){const i=s[0];n.type=i===null?"null":typeof i,t.target==="draft-04"||t.target==="openapi-3.0"?n.enum=[i]:n.const=i}else s.every(i=>typeof i=="number")&&(n.type="number"),s.every(i=>typeof i=="string")&&(n.type="string"),s.every(i=>typeof i=="boolean")&&(n.type="boolean"),s.every(i=>i===null)&&(n.type="null"),n.enum=s},Kf=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Yf=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Xf=(e,t,n,r)=>{const o=n,s=e._zod.def,{minimum:i,maximum:u}=e._zod.bag;typeof i=="number"&&(o.minItems=i),typeof u=="number"&&(o.maxItems=u),o.type="array",o.items=le(s.element,t,{...r,path:[...r.path,"items"]})},Qf=(e,t,n,r)=>{var l;const o=n,s=e._zod.def;o.type="object",o.properties={};const i=s.shape;for(const d in i)o.properties[d]=le(i[d],t,{...r,path:[...r.path,"properties",d]});const u=new Set(Object.keys(i)),a=new Set([...u].filter(d=>{const c=s.shape[d]._zod;return t.io==="input"?c.optin===void 0:c.optout===void 0}));a.size>0&&(o.required=Array.from(a)),((l=s.catchall)==null?void 0:l._zod.def.type)==="never"?o.additionalProperties=!1:s.catchall?s.catchall&&(o.additionalProperties=le(s.catchall,t,{...r,path:[...r.path,"additionalProperties"]})):t.io==="output"&&(o.additionalProperties=!1)},eh=(e,t,n,r)=>{const o=e._zod.def,s=o.inclusive===!1,i=o.options.map((u,a)=>le(u,t,{...r,path:[...r.path,s?"oneOf":"anyOf",a]}));s?n.oneOf=i:n.anyOf=i},th=(e,t,n,r)=>{const o=e._zod.def,s=le(o.left,t,{...r,path:[...r.path,"allOf",0]}),i=le(o.right,t,{...r,path:[...r.path,"allOf",1]}),u=l=>"allOf"in l&&Object.keys(l).length===1,a=[...u(s)?s.allOf:[s],...u(i)?i.allOf:[i]];n.allOf=a},nh=(e,t,n,r)=>{const o=n,s=e._zod.def;o.type="object";const i=s.keyType,u=i._zod.bag,a=u==null?void 0:u.patterns;if(s.mode==="loose"&&a&&a.size>0){const d=le(s.valueType,t,{...r,path:[...r.path,"patternProperties","*"]});o.patternProperties={};for(const c of a)o.patternProperties[c.source]=d}else(t.target==="draft-07"||t.target==="draft-2020-12")&&(o.propertyNames=le(s.keyType,t,{...r,path:[...r.path,"propertyNames"]})),o.additionalProperties=le(s.valueType,t,{...r,path:[...r.path,"additionalProperties"]});const l=i._zod.values;if(l){const d=[...l].filter(c=>typeof c=="string"||typeof c=="number");d.length>0&&(o.required=d)}},rh=(e,t,n,r)=>{const o=e._zod.def,s=le(o.innerType,t,r),i=t.seen.get(e);t.target==="openapi-3.0"?(i.ref=o.innerType,n.nullable=!0):n.anyOf=[s,{type:"null"}]},oh=(e,t,n,r)=>{const o=e._zod.def;le(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType},sh=(e,t,n,r)=>{const o=e._zod.def;le(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType,n.default=JSON.parse(JSON.stringify(o.defaultValue))},ih=(e,t,n,r)=>{const o=e._zod.def;le(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType,t.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(o.defaultValue)))},ah=(e,t,n,r)=>{const o=e._zod.def;le(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType;let i;try{i=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=i},uh=(e,t,n,r)=>{const o=e._zod.def,s=t.io==="input"?o.in._zod.def.type==="transform"?o.out:o.in:o.out;le(s,t,r);const i=t.seen.get(e);i.ref=s},ch=(e,t,n,r)=>{const o=e._zod.def;le(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType,n.readOnly=!0},Mi=(e,t,n,r)=>{const o=e._zod.def;le(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType},lh=(e,t,n,r)=>{const o=e._zod.innerType;le(o,t,r);const s=t.seen.get(e);s.ref=o},ph=A("ZodISODateTime",(e,t)=>{id.init(e,t),ae.init(e,t)});function dh(e){return mf(ph,e)}const fh=A("ZodISODate",(e,t)=>{ad.init(e,t),ae.init(e,t)});function hh(e){return gf(fh,e)}const mh=A("ZodISOTime",(e,t)=>{ud.init(e,t),ae.init(e,t)});function gh(e){return yf(mh,e)}const yh=A("ZodISODuration",(e,t)=>{cd.init(e,t),ae.init(e,t)});function _h(e){return _f(yh,e)}const ji=(e,t)=>{oi.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>Ql(e,n)},flatten:{value:n=>Xl(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,uo,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,uo,2)}},isEmpty:{get(){return e.issues.length===0}}})},vh=A("ZodError",ji),Re=A("ZodError",ji,{Parent:Error}),wh=fo(Re),bh=ho(Re),Ih=Ir(Re),Sh=Sr(Re),Th=np(Re),Ah=rp(Re),kh=op(Re),Oh=sp(Re),xh=ip(Re),Eh=ap(Re),Ch=up(Re),Ph=cp(Re),re=A("ZodType",(e,t)=>(ne.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:xr(e,"input"),output:xr(e,"output")}}),e.toJSONSchema=Ff(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(it(t,{checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),e.with=e.check,e.clone=(n,r)=>at(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e)),e.parse=(n,r)=>wh(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>Ih(e,n,r),e.parseAsync=async(n,r)=>bh(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>Sh(e,n,r),e.spa=e.safeParseAsync,e.encode=(n,r)=>Th(e,n,r),e.decode=(n,r)=>Ah(e,n,r),e.encodeAsync=async(n,r)=>kh(e,n,r),e.decodeAsync=async(n,r)=>Oh(e,n,r),e.safeEncode=(n,r)=>xh(e,n,r),e.safeDecode=(n,r)=>Eh(e,n,r),e.safeEncodeAsync=async(n,r)=>Ch(e,n,r),e.safeDecodeAsync=async(n,r)=>Ph(e,n,r),e.refine=(n,r)=>e.check(km(n,r)),e.superRefine=n=>e.check(Om(n)),e.overwrite=n=>e.check(en(n)),e.optional=()=>Wi(e),e.exactOptional=()=>dm(e),e.nullable=()=>Vi(e),e.nullish=()=>Wi(Vi(e)),e.nonoptional=n=>_m(e,n),e.array=()=>j(e),e.or=n=>je([e,n]),e.and=n=>im(e,n),e.transform=n=>Ki(e,lm(n)),e.default=n=>mm(e,n),e.prefault=n=>ym(e,n),e.catch=n=>wm(e,n),e.pipe=n=>Ki(e,n),e.readonly=()=>Sm(e),e.describe=n=>{const r=e.clone();return An.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){var n;return(n=An.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return An.get(e);const r=e.clone();return An.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=n=>n(e),e)),Fi=A("_ZodString",(e,t)=>{mo.init(e,t),re.init(e,t),e._zod.processJSONSchema=(r,o,s)=>Uf(e,r,o);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(Af(...r)),e.includes=(...r)=>e.check(xf(...r)),e.startsWith=(...r)=>e.check(Ef(...r)),e.endsWith=(...r)=>e.check(Cf(...r)),e.min=(...r)=>e.check(Or(...r)),e.max=(...r)=>e.check($i(...r)),e.length=(...r)=>e.check(Ni(...r)),e.nonempty=(...r)=>e.check(Or(1,...r)),e.lowercase=r=>e.check(kf(r)),e.uppercase=r=>e.check(Of(r)),e.trim=()=>e.check(Rf()),e.normalize=(...r)=>e.check(Pf(...r)),e.toLowerCase=()=>e.check($f()),e.toUpperCase=()=>e.check(Nf()),e.slugify=()=>e.check(zf())}),Rh=A("ZodString",(e,t)=>{mo.init(e,t),Fi.init(e,t),e.email=n=>e.check(Wd($h,n)),e.url=n=>e.check(Xd(Nh,n)),e.jwt=n=>e.check(hf(Hh,n)),e.emoji=n=>e.check(Qd(zh,n)),e.guid=n=>e.check(Ei(Li,n)),e.uuid=n=>e.check(Vd(Er,n)),e.uuidv4=n=>e.check(Hd(Er,n)),e.uuidv6=n=>e.check(Kd(Er,n)),e.uuidv7=n=>e.check(Yd(Er,n)),e.nanoid=n=>e.check(ef(Dh,n)),e.guid=n=>e.check(Ei(Li,n)),e.cuid=n=>e.check(tf(Zh,n)),e.cuid2=n=>e.check(nf(Mh,n)),e.ulid=n=>e.check(rf(jh,n)),e.base64=n=>e.check(pf(qh,n)),e.base64url=n=>e.check(df(Wh,n)),e.xid=n=>e.check(of(Fh,n)),e.ksuid=n=>e.check(sf(Lh,n)),e.ipv4=n=>e.check(af(Uh,n)),e.ipv6=n=>e.check(uf(Gh,n)),e.cidrv4=n=>e.check(cf(Jh,n)),e.cidrv6=n=>e.check(lf(Bh,n)),e.e164=n=>e.check(ff(Vh,n)),e.datetime=n=>e.check(dh(n)),e.date=n=>e.check(hh(n)),e.time=n=>e.check(gh(n)),e.duration=n=>e.check(_h(n))});function f(e){return qd(Rh,e)}const ae=A("ZodStringFormat",(e,t)=>{se.init(e,t),Fi.init(e,t)}),$h=A("ZodEmail",(e,t)=>{Yp.init(e,t),ae.init(e,t)}),Li=A("ZodGUID",(e,t)=>{Hp.init(e,t),ae.init(e,t)}),Er=A("ZodUUID",(e,t)=>{Kp.init(e,t),ae.init(e,t)}),Nh=A("ZodURL",(e,t)=>{Xp.init(e,t),ae.init(e,t)}),zh=A("ZodEmoji",(e,t)=>{Qp.init(e,t),ae.init(e,t)}),Dh=A("ZodNanoID",(e,t)=>{ed.init(e,t),ae.init(e,t)}),Zh=A("ZodCUID",(e,t)=>{td.init(e,t),ae.init(e,t)}),Mh=A("ZodCUID2",(e,t)=>{nd.init(e,t),ae.init(e,t)}),jh=A("ZodULID",(e,t)=>{rd.init(e,t),ae.init(e,t)}),Fh=A("ZodXID",(e,t)=>{od.init(e,t),ae.init(e,t)}),Lh=A("ZodKSUID",(e,t)=>{sd.init(e,t),ae.init(e,t)}),Uh=A("ZodIPv4",(e,t)=>{ld.init(e,t),ae.init(e,t)}),Gh=A("ZodIPv6",(e,t)=>{pd.init(e,t),ae.init(e,t)}),Jh=A("ZodCIDRv4",(e,t)=>{dd.init(e,t),ae.init(e,t)}),Bh=A("ZodCIDRv6",(e,t)=>{fd.init(e,t),ae.init(e,t)}),qh=A("ZodBase64",(e,t)=>{hd.init(e,t),ae.init(e,t)}),Wh=A("ZodBase64URL",(e,t)=>{gd.init(e,t),ae.init(e,t)}),Vh=A("ZodE164",(e,t)=>{yd.init(e,t),ae.init(e,t)}),Hh=A("ZodJWT",(e,t)=>{vd.init(e,t),ae.init(e,t)}),Ui=A("ZodNumber",(e,t)=>{mi.init(e,t),re.init(e,t),e._zod.processJSONSchema=(r,o,s)=>Gf(e,r,o),e.gt=(r,o)=>e.check(Pi(r,o)),e.gte=(r,o)=>e.check(_o(r,o)),e.min=(r,o)=>e.check(_o(r,o)),e.lt=(r,o)=>e.check(Ci(r,o)),e.lte=(r,o)=>e.check(yo(r,o)),e.max=(r,o)=>e.check(yo(r,o)),e.int=r=>e.check(Gi(r)),e.safe=r=>e.check(Gi(r)),e.positive=r=>e.check(Pi(0,r)),e.nonnegative=r=>e.check(_o(0,r)),e.negative=r=>e.check(Ci(0,r)),e.nonpositive=r=>e.check(yo(0,r)),e.multipleOf=(r,o)=>e.check(Ri(r,o)),e.step=(r,o)=>e.check(Ri(r,o)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function E(e){return vf(Ui,e)}const Kh=A("ZodNumberFormat",(e,t)=>{wd.init(e,t),Ui.init(e,t)});function Gi(e){return wf(Kh,e)}const Yh=A("ZodBoolean",(e,t)=>{bd.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Jf(e,n,r)});function ct(e){return bf(Yh,e)}const Xh=A("ZodAny",(e,t)=>{Id.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>qf()});function J(){return If(Xh)}const Qh=A("ZodUnknown",(e,t)=>{Sd.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Wf()});function Ji(){return Sf(Qh)}const em=A("ZodNever",(e,t)=>{Td.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Bf(e,n,r)});function tm(e){return Tf(em,e)}const nm=A("ZodArray",(e,t)=>{Ad.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Xf(e,n,r,o),e.element=t.element,e.min=(n,r)=>e.check(Or(n,r)),e.nonempty=n=>e.check(Or(1,n)),e.max=(n,r)=>e.check($i(n,r)),e.length=(n,r)=>e.check(Ni(n,r)),e.unwrap=()=>e.element});function j(e,t){return Df(nm,e,t)}const rm=A("ZodObject",(e,t)=>{Od.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Qf(e,n,r,o),W(e,"shape",()=>t.shape),e.keyof=()=>ue(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Ji()}),e.loose=()=>e.clone({...e._zod.def,catchall:Ji()}),e.strict=()=>e.clone({...e._zod.def,catchall:tm()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>Wl(e,n),e.safeExtend=n=>Vl(e,n),e.merge=n=>Hl(e,n),e.pick=n=>Bl(e,n),e.omit=n=>ql(e,n),e.partial=(...n)=>Kl(qi,e,n[0]),e.required=(...n)=>Yl(Hi,e,n[0])});function I(e,t){const n={type:"object",shape:e??{},...N(t)};return new rm(n)}const Bi=A("ZodUnion",(e,t)=>{wi.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>eh(e,n,r,o),e.options=t.options});function je(e,t){return new Bi({type:"union",options:e,...N(t)})}const om=A("ZodDiscriminatedUnion",(e,t)=>{Bi.init(e,t),xd.init(e,t)});function ge(e,t,n){return new om({type:"union",options:t,discriminator:e,...N(n)})}const sm=A("ZodIntersection",(e,t)=>{Ed.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>th(e,n,r,o)});function im(e,t){return new sm({type:"intersection",left:e,right:t})}const am=A("ZodRecord",(e,t)=>{Cd.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>nh(e,n,r,o),e.keyType=t.keyType,e.valueType=t.valueType});function X(e,t,n){return new am({type:"record",keyType:e,valueType:t,...N(n)})}const vo=A("ZodEnum",(e,t)=>{Pd.init(e,t),re.init(e,t),e._zod.processJSONSchema=(r,o,s)=>Vf(e,r,o),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,o)=>{const s={};for(const i of r)if(n.has(i))s[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new vo({...t,checks:[],...N(o),entries:s})},e.exclude=(r,o)=>{const s={...t.entries};for(const i of r)if(n.has(i))delete s[i];else throw new Error(`Key ${i} not found in enum`);return new vo({...t,checks:[],...N(o),entries:s})}});function ue(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new vo({type:"enum",entries:n,...N(t)})}const um=A("ZodLiteral",(e,t)=>{Rd.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Hf(e,n,r),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function T(e,t){return new um({type:"literal",values:Array.isArray(e)?e:[e],...N(t)})}const cm=A("ZodTransform",(e,t)=>{$d.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Yf(e,n),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Ks(e.constructor.name);n.addIssue=s=>{if(typeof s=="string")n.issues.push(Tn(s,n.value,t));else{const i=s;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),n.issues.push(Tn(i))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(s=>(n.value=s,n)):(n.value=o,n)}});function lm(e){return new cm({type:"transform",transform:e})}const qi=A("ZodOptional",(e,t)=>{Si.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Mi(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function Wi(e){return new qi({type:"optional",innerType:e})}const pm=A("ZodExactOptional",(e,t)=>{Nd.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Mi(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function dm(e){return new pm({type:"optional",innerType:e})}const fm=A("ZodNullable",(e,t)=>{zd.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>rh(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function Vi(e){return new fm({type:"nullable",innerType:e})}const hm=A("ZodDefault",(e,t)=>{Dd.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>sh(e,n,r,o),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function mm(e,t){return new hm({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():ni(t)}})}const gm=A("ZodPrefault",(e,t)=>{Zd.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>ih(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function ym(e,t){return new gm({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():ni(t)}})}const Hi=A("ZodNonOptional",(e,t)=>{Md.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>oh(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function _m(e,t){return new Hi({type:"nonoptional",innerType:e,...N(t)})}const vm=A("ZodCatch",(e,t)=>{jd.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>ah(e,n,r,o),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function wm(e,t){return new vm({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const bm=A("ZodPipe",(e,t)=>{Fd.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>uh(e,n,r,o),e.in=t.in,e.out=t.out});function Ki(e,t){return new bm({type:"pipe",in:e,out:t})}const Im=A("ZodReadonly",(e,t)=>{Ld.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>ch(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function Sm(e){return new Im({type:"readonly",innerType:e})}const Tm=A("ZodLazy",(e,t)=>{Ud.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>lh(e,n,r,o),e.unwrap=()=>e._zod.def.getter()});function Am(e){return new Tm({type:"lazy",getter:e})}const Yi=A("ZodCustom",(e,t)=>{Gd.init(e,t),re.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Kf(e,n)});function km(e,t={}){return Zf(Yi,e,t)}function Om(e){return Mf(e)}function Xi(e,t={}){const n=new Yi({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0,...N(t)});return n._zod.bag.Class=e,n._zod.check=r=>{r.value instanceof e||r.issues.push({code:"invalid_type",expected:e.name,input:r.value,inst:n,path:[...n._zod.def.path??[]]})},n}I({name:f(),description:f().optional(),inputSchema:I({type:T("object"),properties:X(f(),J()),required:j(f()),additionalProperties:ct()})});const wo={},bo={},xm=({server:e,agent:t})=>e.toolFilter&&typeof e.toolFilter=="function"&&t?`${e.name}:${t.name}`:e.name;async function Em({server:e,convertSchemasToStrict:t,runContext:n,agent:r,generateMCPToolCacheKey:o}){const s=(o||xm)({server:e,agent:r,runContext:n});if(e.cacheToolsList&&wo[s])return wo[s].map(u=>Qi(u,e,t));const i=async u=>{const a=await e.listTools();let l=a;if(n&&r){const c={runContext:n,agent:r,serverName:e.name},h=[];for(const m of a){const y=e.toolFilter;if(y)if(typeof y=="function"){if(!await y(c,m)){R.debug(`MCP Tool (server: ${e.name}, tool: ${m.name}) is blocked by the callable filter.`);continue}}else{const b=y.allowedToolNames??[],_=y.blockedToolNames??[];if(b.length>0||_.length>0){const g=b.length>0?b.includes(m.name):!0,v=_.length>0?_.includes(m.name):!1;if(!g||v){v?R.debug(`MCP Tool (server: ${e.name}, tool: ${m.name}) is blocked by the static filter.`):g||R.debug(`MCP Tool (server: ${e.name}, tool: ${m.name}) is not allowed by the static filter.`);continue}}}h.push(m)}l=h}u&&(u.spanData.result=l.map(c=>c.name));const d=l.map(c=>Qi(c,e,t));return e.cacheToolsList&&(wo[s]=l,bo[e.name]||(bo[e.name]=new Set),bo[e.name].add(s)),d};return tn()?Ug(i,{data:{server:e.name}}):i()}async function Cm(e,t,n,r=!1){const o=Array.isArray(e)?{mcpServers:e,runContext:t,agent:n,convertSchemasToStrict:r}:e,{mcpServers:s,convertSchemasToStrict:i=!1,runContext:u,agent:a,generateMCPToolCacheKey:l}=o,d=[],c=new Set;for(const h of s){const m=await Em({server:h,convertSchemasToStrict:i,runContext:u,agent:a,generateMCPToolCacheKey:l}),b=[...new Set(m.map(_=>_.name))].filter(_=>c.has(_));if(b.length>0)throw new Y(`Duplicate tool names found across MCP servers: ${b.join(", ")}`);for(const _ of m)c.add(_.name),d.push(_)}return d}function Qi(e,t,n){var i,u,a,l;async function r(d,c){let h={};typeof d=="string"&&d?h=JSON.parse(d):typeof d=="object"&&d!=null&&(h=d);const m=En();m&&(m.spanData.mcp_data={server:t.name});const y=await t.callTool(e.name,h);return y.length===1?y[0]:y}const o={...e.inputSchema,type:((i=e.inputSchema)==null?void 0:i.type)??"object",properties:((u=e.inputSchema)==null?void 0:u.properties)??{},required:((a=e.inputSchema)==null?void 0:a.required)??[],additionalProperties:((l=e.inputSchema)==null?void 0:l.additionalProperties)??!1};if(n||o.additionalProperties===!0)try{const d=Pm(o);return vr({name:e.name,description:e.description||"",parameters:d,strict:!0,execute:r})}catch(d){R.warn(`Error converting MCP schema to strict mode: ${d}`)}const s={...o,additionalProperties:!0};return vr({name:e.name,description:e.description||"",parameters:s,strict:!1,execute:r})}function Pm(e){const t={...e,additionalProperties:!1};return t.required||(t.required=[]),t}function Rm(){return{}}class Cr{constructor(){P(this,on,new EventTarget);P(this,Ct,new Map)}on(t,n){const r=t;let o=p(this,Ct).get(r);o||(o=new Map,p(this,Ct).set(r,o));let s=o.get(n);s||(s=new Set,o.set(n,s));const i=(u=>n(...u.detail??[]));return s.add(i),p(this,on).addEventListener(r,i),this}off(t,n){const r=t,o=p(this,Ct).get(r),s=o==null?void 0:o.get(n);if(s!=null&&s.size){for(const i of s)p(this,on).removeEventListener(r,i);o==null||o.delete(n),(o==null?void 0:o.size)===0&&p(this,Ct).delete(r)}return this}emit(t,...n){const r=new CustomEvent(t,{detail:n});return p(this,on).dispatchEvent(r)}once(t,n){const r=(...o)=>{this.off(t,r),n(...o)};return this.on(t,r),this}}on=new WeakMap,Ct=new WeakMap;const ea=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),$m=class{constructor(){}pipeTo(t,n){}pipeThrough(t,n){}},Nm=globalThis.ReadableStream,zm=globalThis.TransformStream;class ta{constructor(){S(this,"context",null)}run(t,n){return this.context=t,n()}getStore(){return this.context}enterWith(t){this.context=t}}class Dm{constructor(){}setTimeout(t,n){const r=setTimeout(t,n);return r.ref=typeof r.ref=="function"?r.ref:()=>r,r.unref=typeof r.unref=="function"?r.unref:()=>r,r.hasRef=typeof r.hasRef=="function"?r.hasRef:()=>!0,r.refresh=typeof r.refresh=="function"?r.refresh:()=>r,r}clearTimeout(t){window.clearTimeout(t)}}const Zm=new Dm;function lt(e){if(e.length===0)return"";const t=typeof globalThis<"u"&&globalThis.Buffer?globalThis.Buffer:void 0;if(t)return t.from(e).toString("base64");let n="";for(let i=0;i<e.length;i+=1)n+=String.fromCharCode(e[i]);if(typeof globalThis.btoa=="function")return globalThis.btoa(n);const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let o="",s=0;for(;s<n.length;){const i=n.charCodeAt(s++),u=n.charCodeAt(s++),a=n.charCodeAt(s++),l=i>>2,d=(i&3)<<4|u>>4,c=isNaN(u)?64:(u&15)<<2|a>>6,h=isNaN(a)?64:a&63;o+=r.charAt(l)+r.charAt(d)+r.charAt(c)+r.charAt(h)}return o}function Mm(e){if(e instanceof ArrayBuffer)return{__type:"ArrayBuffer",data:lt(new Uint8Array(e))};if(yr(e)){const t=e;return{__type:t.constructor.name,data:lt(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}}if(Bs(e)){const t=e;return{__type:"Buffer",data:lt(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}}if(so(e))return{__type:"Buffer",data:lt(Uint8Array.from(e.data))}}function jm(e){if(e instanceof ArrayBuffer)return new Uint8Array(e);if(yr(e)){const t=e;return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}if(Bs(e)){const t=e;return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}if(so(e))return Uint8Array.from(e.data)}function Pr(e){return typeof e=="string"?[{type:"message",role:"user",content:e}]:[...e]}function Fe(e){return JSON.stringify(e,Lm)}function Io(e){const t=new Map;for(const n of e){const r=Fe(n),o=t.get(r);o?o.push(n):t.set(r,[n])}return t}function Fm(e,t){const n=e.get(t);if(!n||n.length===0)return;const[r]=n;return n.shift(),n.length===0&&e.delete(t),r}function Rr(e,t){const n=Fe(t),r=e.get(n);if(!r||r.length===0)return!1;const o=r.findIndex(s=>s===t);return o===-1?!1:(r.splice(o,1),r.length===0&&e.delete(n),!0)}function Lm(e,t){const n=Mm(t);return n||t}function na(e){return e.filter(t=>t.type!=="tool_approval_item").map(t=>t.rawItem)}function Tt(e,t){const n=na(t);return[...Pr(e),...n]}const fe=I({providerData:X(f(),J()).optional()}),$e=fe.extend({id:f().optional()}),Um=fe.extend({type:T("refusal"),refusal:f()}),Gm=fe.extend({type:T("output_text"),text:f()}),So=fe.extend({type:T("input_text"),text:f()}),Jm=fe.extend({type:T("reasoning_text"),text:f()}),ra=fe.extend({type:T("input_image"),image:f().or(I({id:f().describe("OpenAI file ID")})).describe("Either base64 encoded image data, a data URL, or an object with a file ID.").optional(),detail:f().optional()}),oa=fe.extend({type:T("input_file"),file:f().describe("Either base64 encoded file data or a publicly accessible file URL").or(I({id:f().describe("OpenAI file ID")})).or(I({url:f().describe("Publicly accessible file URL")})).describe("Contents of the file or an object with a file ID.").optional(),filename:f().optional()}),sa=fe.extend({type:T("audio"),audio:f().or(I({id:f()})).describe("Base64 encoded audio data or file id"),format:f().nullable().optional(),transcript:f().nullable().optional()}),Bm=fe.extend({type:T("image"),image:f().describe("Base64 encoded image data")}),qm=fe.extend({type:T("text"),text:f()}),Wm=I({data:je([f(),Xi(Uint8Array)]).describe("Base64 image data, or raw bytes that will be base64 encoded automatically."),mediaType:f().optional()}),Vm=I({url:f().describe("Publicly accessible URL pointing to the image content")}),Hm=I({fileId:f().describe("OpenAI file ID referencing uploaded image content")}),Km=je([Wm,Vm,Hm]).describe("Inline image data or references to uploaded content."),Ym=I({data:je([f(),Xi(Uint8Array)]).describe("Base64 encoded file data, or raw bytes that will be encoded automatically."),mediaType:f().describe("IANA media type describing the file contents"),filename:f().describe("Filename associated with the inline data")}),Xm=I({url:f().describe("Publicly accessible URL for the file content"),filename:f().optional()}),Qm=I({id:f().describe("OpenAI file ID referencing uploaded content"),filename:f().optional()}),eg=je([f().describe("Existing data URL or base64 string"),Ym,Xm,Qm]).describe("Inline data (with metadata) or references pointing to file contents."),tg=(...e)=>f(),ng=fe.extend({type:T("image"),image:f().or(Km).optional(),detail:tg("low","high","auto").optional()}),rg=fe.extend({type:T("file"),file:eg}),og=fe.extend({type:T("computer_screenshot"),data:f().describe("Base64 encoded image data or URL")}),sg=ge("type",[I({type:T("screenshot")}),I({type:T("click"),x:E(),y:E(),button:ue(["left","right","wheel","back","forward"])}),I({type:T("double_click"),x:E(),y:E()}),I({type:T("scroll"),x:E(),y:E(),scroll_x:E(),scroll_y:E()}),I({type:T("type"),text:f()}),I({type:T("wait")}),I({type:T("move"),x:E(),y:E()}),I({type:T("keypress"),keys:j(f())}),I({type:T("drag"),path:j(I({x:E(),y:E()}))})]),ig=ge("type",[Gm,Um,sa,Bm]),To=$e.extend({type:T("message").optional()}),$r=To.extend({role:T("assistant"),status:ue(["in_progress","completed","incomplete"]),content:j(ig)}),ag=ge("type",[So,ra,oa,sa]),ia=To.extend({role:T("user"),content:j(ag).or(f())}),aa=To.extend({role:T("system"),content:f()});ge("role",[aa,$r,ia]);const kn=$e.extend({type:T("hosted_tool_call"),name:f().describe("The name of the hosted tool"),arguments:f().describe("The arguments of the hosted tool call").optional(),status:f().optional(),output:f().optional()}),On=$e.extend({type:T("function_call"),callId:f().describe("The ID of the tool call"),name:f().describe("The name of the function"),status:ue(["in_progress","completed","incomplete"]).optional(),arguments:f()}),ug=ge("type",[qm,ng,rg]),cg=ge("type",[So,ra,oa]),Nr=$e.extend({type:T("function_call_result"),name:f().describe("The name of the tool"),callId:f().describe("The ID of the tool call"),status:ue(["in_progress","completed","incomplete"]),output:je([f(),ug,j(cg)]).describe("Output returned by the tool call. Supports plain strings, legacy ToolOutput items, or structured input_* items.")}),Ao=$e.extend({type:T("computer_call"),callId:f().describe("The ID of the computer call"),status:ue(["in_progress","completed","incomplete"]),action:sg}),ua=$e.extend({type:T("computer_call_result"),callId:f().describe("The ID of the computer call"),output:og}),lg=I({commands:j(f()),timeoutMs:E().int().min(0).optional(),maxOutputLength:E().int().min(0).optional()}),zr=$e.extend({type:T("shell_call"),callId:f(),status:ue(["in_progress","completed","incomplete"]).optional(),action:lg}),pg=ge("type",[I({type:T("timeout")}),I({type:T("exit"),exitCode:E().int().nullable()})]),dg=I({stdout:f(),stderr:f(),outcome:pg}).passthrough(),ko=$e.extend({type:T("shell_call_output"),callId:f(),maxOutputLength:E().optional(),output:j(dg)}),fg=I({type:T("create_file"),path:f(),diff:f()}),hg=I({type:T("update_file"),path:f(),diff:f()}),mg=I({type:T("delete_file"),path:f()}),gg=ge("type",[fg,hg,mg]),Dr=$e.extend({type:T("apply_patch_call"),callId:f(),status:ue(["in_progress","completed"]),operation:gg}),Oo=$e.extend({type:T("apply_patch_call_output"),callId:f(),status:ue(["completed","failed"]),output:f().optional()}),yg=ge("type",[Ao,zr,Dr,On,kn]),xo=fe.extend({id:f().optional(),type:T("reasoning"),content:j(So),rawContent:j(Jm).optional()}),ca=$e.extend({type:T("compaction"),encrypted_content:f(),id:f().optional(),created_by:f().optional()}),la=$e.extend({type:T("unknown")}),Eo=ge("type",[$r,kn,On,Ao,zr,Dr,Nr,ko,Oo,xo,ca,la]),_g=je([ia,$r,aa,kn,On,Ao,zr,Dr,Nr,ua,ko,Oo,xo,ca,la]),vg=I({inputTokens:E(),outputTokens:E(),totalTokens:E(),inputTokensDetails:X(f(),E()).optional(),outputTokensDetails:X(f(),E()).optional(),endpoint:f().optional()}),wg=I({requests:E().optional(),inputTokens:E(),outputTokens:E(),totalTokens:E(),inputTokensDetails:je([X(f(),E()),j(X(f(),E()))]).optional(),outputTokensDetails:je([X(f(),E()),j(X(f(),E()))]).optional(),requestUsageEntries:j(vg).optional()}),pa=fe.extend({type:T("output_text_delta"),delta:f()}),bg=fe.extend({type:T("response_started")}),da=fe.extend({type:T("response_done"),response:fe.extend({id:f(),usage:wg,output:j(Eo)})}),Ig=fe.extend({type:T("model"),event:J().describe("The event from the model")});ge("type",[pa,da,bg,Ig]);function Sg(){const e={};return{ref:e,handler:()=>{var n;(n=e.current)==null||n.call(e)}}}function Tg(...e){const t=e.filter(Boolean);if(t.length===0)return;const n=AbortSignal.any;if(typeof n=="function")try{return n(t)}catch(s){R.debug(`AbortSignal.any failed, falling back: ${s}`)}const r=new AbortController,o=s=>{r.signal.aborted||r.abort(s)};for(const s of t){if(s.aborted){o(s.reason);break}s.addEventListener("abort",()=>o(s.reason),{once:!0})}return r.signal}class fa{constructor(t){S(this,"state");this.state=t}get history(){return Tt(this.input,this.newItems)}get output(){return Tt([],this.newItems)}get input(){return this.state._originalInput}get newItems(){return this.state._generatedItems}get rawResponses(){return this.state._modelResponses}get lastResponseId(){const t=this.rawResponses;return t&&t.length>0?t[t.length-1].responseId:void 0}get lastAgent(){return this.state._currentAgent}get activeAgent(){return this.lastAgent}get inputGuardrailResults(){return this.state._inputGuardrailResults}get outputGuardrailResults(){return this.state._outputGuardrailResults}get toolInputGuardrailResults(){return this.state._toolInputGuardrailResults}get toolOutputGuardrailResults(){return this.state._toolOutputGuardrailResults}get interruptions(){var t;return((t=this.state._currentStep)==null?void 0:t.type)==="next_step_interruption"?this.state._currentStep.data.interruptions:[]}get finalOutput(){var t;if(((t=this.state._currentStep)==null?void 0:t.type)==="next_step_final_output")return this.state._currentAgent.processFinalOutput(this.state._currentStep.output);R.warn("Accessed finalOutput before agent run is completed.")}}class Zr extends fa{constructor(t){super(t)}}class ha extends fa{constructor(n={}){super(n.state);P(this,et);S(this,"currentTurn",0);S(this,"maxTurns");P(this,jn,null);P(this,Je);P(this,Fn);P(this,Pt);P(this,xe);P(this,Rt);P(this,sn);P(this,an);P(this,Ln);P(this,un,!1);P(this,Un);P(this,$t);P(this,Nt);if(k(this,Pt,new AbortController),k(this,Je,Tg(n.signal,p(this,Pt).signal)),k(this,Fn,p(this,Je)),k(this,Rt,new Nm({start:r=>{k(this,xe,r)},cancel:()=>{p(this,Pt).signal.aborted||p(this,Pt).abort()}})),k(this,sn,new Promise((r,o)=>{k(this,an,r),k(this,Ln,o)})),p(this,Je)){const{ref:r,handler:o}=Sg();r.current=()=>{L(this,et,Wu).call(this)},k(this,$t,o),k(this,Nt,r),p(this,Je).aborted?o():p(this,Je).addEventListener("abort",o,{once:!0})}}get currentAgent(){return this.lastAgent}_addItem(n){var r;this.cancelled||(r=p(this,xe))==null||r.enqueue(n)}_done(){var n;!this.cancelled&&p(this,xe)&&(p(this,xe).close(),k(this,xe,void 0),(n=p(this,an))==null||n.call(this)),L(this,et,ur).call(this)}_raiseError(n){var r;!this.cancelled&&p(this,xe)&&(p(this,xe).error(n),k(this,xe,void 0)),k(this,jn,n),(r=p(this,Ln))==null||r.call(this,n),p(this,sn).catch(o=>{R.debug(`Resulted in an error: ${o}`)}),L(this,et,ur).call(this)}get cancelled(){return p(this,un)}toStream(){return p(this,Rt)}get completed(){return p(this,sn)}get error(){return p(this,jn)}toTextStream(n={}){const r=p(this,Rt).pipeThrough(new zm({transform(o,s){if(o.type==="raw_model_stream_event"&&o.data.type==="output_text_delta"){const i=pa.parse(o.data);s.enqueue(i.delta)}}}));return n.compatibleWithNodeStreams?$m.fromWeb(r):r}[Symbol.asyncIterator](){return p(this,Rt)[Symbol.asyncIterator]()}_setStreamLoopPromise(n){k(this,Un,n)}_getStreamLoopPromise(){return p(this,Un)}_getAbortSignal(){return p(this,Fn)??p(this,Je)}}jn=new WeakMap,Je=new WeakMap,Fn=new WeakMap,Pt=new WeakMap,xe=new WeakMap,Rt=new WeakMap,sn=new WeakMap,an=new WeakMap,Ln=new WeakMap,un=new WeakMap,Un=new WeakMap,$t=new WeakMap,Nt=new WeakMap,et=new WeakSet,Wu=function(){var r;if(p(this,un)){L(this,et,ur).call(this);return}k(this,un,!0);const n=p(this,xe);if(k(this,xe,void 0),n)try{n.close()}catch(o){R.debug(`Failed to close readable stream on abort: ${o}`)}(r=p(this,an))==null||r.call(this),L(this,et,ur).call(this)},ur=function(){if(p(this,Nt)&&(p(this,Nt).current=void 0),p(this,Je)&&p(this,$t))try{p(this,Je).removeEventListener("abort",p(this,$t))}catch(n){R.debug(`Failed to remove abort listener: ${n}`)}k(this,$t,void 0),k(this,Nt,void 0)};const ma=Symbol.for("openai.agents.core.asyncLocalStorage");let Co;function Xe(){try{const e=globalThis,t=e[ma];if(t)return t;const n=new ta;return e[ma]=n,n}catch{return Co||(Co=new ta),Co}}function xn(){const e=Xe().getStore();if((e==null?void 0:e.active)===!0)return e}function tn(){const e=xn();return e!=null&&e.trace?e.trace:null}function En(){const e=xn();return e!=null&&e.span?e.span:null}function ga(e,t,n){return async()=>{const r=tn();if(!r)throw new Error("No trace found");let o=!1,s=!1;const i=()=>{t.active=!1,t.trace=void 0,t.span=void 0,t.previousSpan=void 0,Xe().enterWith(n)};try{await r.start(),s=!0;const u=await e(r);if(u instanceof ha){const a=u._getStreamLoopPromise();if(a)return o=!0,a.finally(async()=>{try{s&&await r.end()}finally{i()}}),u}return s&&await r.end(),u}finally{o||i()}}}async function Ag(e,t,n={}){const o={trace:typeof e=="string"?Le().createTrace({...n,name:e}):e,active:!0},s=Xe().getStore();return Xe().run(o,ga(t,o,s))}async function kg(e,t={}){if(tn())return await e();const o={trace:Le().createTrace(t),active:!0},s=Xe().getStore();return Xe().run(o,ga(e,o,s))}function Po(e){const t=xn();if(!t)throw new Error("No existing trace found");t.span&&(t.span.previousSpan=t.previousSpan,t.previousSpan=t.span),e.previousSpan=t.span??t.previousSpan,t.span=e,Xe().enterWith(t)}function Cn(){var t;const e=xn();e&&(e.span=e.previousSpan,e.previousSpan=(t=e.previousSpan)==null?void 0:t.previousSpan,Xe().enterWith(e))}function At(e){const t=En();t&&t.setError(e)}function Og(e){var t,n,r;return{trace:(t=e.trace)==null?void 0:t.clone(),span:(n=e.span)==null?void 0:n.clone(),previousSpan:(r=e.previousSpan)==null?void 0:r.clone(),active:e.active}}function Ro(e){const t=xn();if(!t)return e();const n=Og(t);return Xe().run(n,e)}class xg{async export(t){if(Ls.disabled){R.debug("Tracing is disabled. Skipping export");return}for(const n of t)n.type==="trace"?console.log(`[Exporter] Export trace traceId=${n.traceId} name=${n.name}${n.groupId?` groupId=${n.groupId}`:""}`):console.log(`[Exporter] Export span: ${JSON.stringify(n)}`)}}class Eg{constructor(t,{maxQueueSize:n=1e3,maxBatchSize:r=100,scheduleDelay:o=5e3,exportTriggerRatio:s=.8}={}){P(this,Se);P(this,Gn);P(this,cn);P(this,Jn);P(this,Bn);P(this,ln);P(this,_e,[]);P(this,tt);P(this,ft,null);P(this,ht,!1);P(this,pn,null);k(this,Gn,n),k(this,cn,r),k(this,Jn,o),k(this,Bn,n*s),k(this,ln,t),k(this,tt,Zm),R.debug("Automatic trace export loop is not supported in this environment. You need to manually call `getGlobalTraceProvider().forceFlush()` to export traces.")}start(){k(this,pn,new AbortController),L(this,Se,cs).call(this)}async onTraceStart(t){await L(this,Se,us).call(this,t)}async onTraceEnd(t){}async onSpanStart(t){}async onSpanEnd(t){await L(this,Se,us).call(this,t)}async shutdown(t){var n;for(t&&p(this,tt).setTimeout(()=>{var r;(r=p(this,pn))==null||r.abort()},t),R.debug("Shutting down gracefully");p(this,_e).length>0;){if(R.debug(`Waiting for buffer to empty. Items left: ${p(this,_e).length}`),p(this,ht)||await L(this,Se,bn).call(this,!0),(n=p(this,pn))!=null&&n.signal.aborted){R.debug("Timeout reached, force flushing"),await L(this,Se,bn).call(this,!0);break}await new Promise(r=>p(this,tt).setTimeout(r,500))}R.debug("Buffer empty. Exiting"),p(this,tt)&&p(this,ft)&&p(this,tt).clearTimeout(p(this,ft))}async forceFlush(){p(this,_e).length>0&&await L(this,Se,bn).call(this,!0)}}Gn=new WeakMap,cn=new WeakMap,Jn=new WeakMap,Bn=new WeakMap,ln=new WeakMap,_e=new WeakMap,tt=new WeakMap,ft=new WeakMap,ht=new WeakMap,pn=new WeakMap,Se=new WeakSet,us=async function(t){if(p(this,_e).length+1>p(this,Gn)){R.error("Dropping trace because buffer is full");return}p(this,_e).push(t),p(this,_e).length>p(this,Bn)&&await L(this,Se,bn).call(this)},cs=function(){k(this,ft,p(this,tt).setTimeout(async()=>{await L(this,Se,bn).call(this),L(this,Se,cs).call(this)},p(this,Jn))),typeof p(this,ft).unref=="function"&&p(this,ft).unref()},bn=async function(t=!1){if(p(this,_e).length!==0){if(R.debug(`Exporting batches. Force: ${t}. Buffer size: ${p(this,_e).length}`),t||p(this,_e).length<p(this,cn)){const n=[...p(this,_e)];k(this,_e,[]),k(this,ht,!0),await p(this,ln).export(n),k(this,ht,!1)}else if(p(this,_e).length>0){const n=p(this,_e).splice(0,p(this,cn));k(this,ht,!0),await p(this,ln).export(n),k(this,ht,!1)}}};class Cg{constructor(){P(this,Ee,[])}start(){for(const t of p(this,Ee))t.start&&t.start()}addTraceProcessor(t){p(this,Ee).push(t)}setProcessors(t){R.debug("Shutting down old processors");for(const n of p(this,Ee))n.shutdown();k(this,Ee,t)}async onTraceStart(t){for(const n of p(this,Ee))await n.onTraceStart(t)}async onTraceEnd(t){for(const n of p(this,Ee))await n.onTraceEnd(t)}async onSpanStart(t){for(const n of p(this,Ee))await n.onSpanStart(t)}async onSpanEnd(t){for(const n of p(this,Ee))await n.onSpanEnd(t)}async shutdown(t){for(const n of p(this,Ee))await n.shutdown(t)}async forceFlush(){for(const t of p(this,Ee))await t.forceFlush()}}Ee=new WeakMap;let $o=null,No=null;function Pg(){return $o||($o=new xg),$o}function ya(){return No||(No=new Eg(Pg())),No}function _a(){return new Date().toISOString()}function va(){return`trace_${ea().replace(/-/g,"")}`}function Rg(){return`span_${ea().replace(/-/g,"").slice(0,24)}`}function $g(e){return Object.fromEntries(Object.entries(e).filter(([t])=>!t.startsWith("_")))}const rs=class rs{constructor(t,n){S(this,"type","trace.span");P(this,qn);P(this,Wn);P(this,Vn);P(this,Hn);P(this,zt);P(this,mt);P(this,gt);P(this,Dt);P(this,dn);P(this,Kn);k(this,Wn,t.traceId),k(this,Vn,t.spanId??Rg()),k(this,qn,t.data),k(this,zt,n),k(this,Hn,t.parentId??null),k(this,Dt,t.error??null),k(this,mt,t.startedAt??null),k(this,gt,t.endedAt??null),k(this,dn,t.tracingApiKey)}get traceId(){return p(this,Wn)}get spanData(){return p(this,qn)}get spanId(){return p(this,Vn)}get parentId(){return p(this,Hn)}get previousSpan(){return p(this,Kn)}set previousSpan(t){k(this,Kn,t)}start(){if(p(this,mt)){R.warn("Span already started");return}k(this,mt,_a()),p(this,zt).onSpanStart(this)}end(){if(p(this,gt)){R.debug("Span already finished",this.spanData);return}k(this,gt,_a()),p(this,zt).onSpanEnd(this)}setError(t){k(this,Dt,t)}get error(){return p(this,Dt)}get startedAt(){return p(this,mt)}get endedAt(){return p(this,gt)}get tracingApiKey(){return p(this,dn)}clone(){var n;const t=new rs({traceId:this.traceId,spanId:this.spanId,parentId:this.parentId??void 0,data:this.spanData,startedAt:p(this,mt)??void 0,endedAt:p(this,gt)??void 0,error:p(this,Dt)??void 0,tracingApiKey:p(this,dn)},p(this,zt));return t.previousSpan=(n=this.previousSpan)==null?void 0:n.clone(),t}toJSON(){return{object:this.type,id:this.spanId,trace_id:this.traceId,parent_id:this.parentId,started_at:this.startedAt,ended_at:this.endedAt,span_data:$g(this.spanData),error:this.error}}};qn=new WeakMap,Wn=new WeakMap,Vn=new WeakMap,Hn=new WeakMap,zt=new WeakMap,mt=new WeakMap,gt=new WeakMap,Dt=new WeakMap,dn=new WeakMap,Kn=new WeakMap;let Pn=rs;class pt extends Pn{constructor(t,n){super({traceId:"no-op",spanId:"no-op",data:t},n)}start(){}end(){}setError(){}toJSON(){return null}}const os=class os{constructor(t,n){S(this,"type","trace");S(this,"traceId");S(this,"name");S(this,"groupId",null);S(this,"metadata");S(this,"tracingApiKey");P(this,fn);P(this,nt);this.traceId=t.traceId??va(),this.name=t.name??"Agent workflow",this.groupId=t.groupId??null,this.metadata=t.metadata??{},this.tracingApiKey=t.tracingApiKey,k(this,fn,n??ya()),k(this,nt,t.started??!1)}async start(){p(this,nt)||(k(this,nt,!0),await p(this,fn).onTraceStart(this))}async end(){p(this,nt)&&(k(this,nt,!1),await p(this,fn).onTraceEnd(this))}clone(){return new os({traceId:this.traceId,name:this.name,groupId:this.groupId??void 0,metadata:this.metadata,started:p(this,nt),tracingApiKey:this.tracingApiKey})}toJSON(t){const n={object:this.type,id:this.traceId,workflow_name:this.name,group_id:this.groupId,metadata:this.metadata};return t!=null&&t.includeTracingApiKey&&this.tracingApiKey&&(n.tracing_api_key=this.tracingApiKey),n}};fn=new WeakMap,nt=new WeakMap;let Rn=os;class zo extends Rn{constructor(){super({})}async start(){}async end(){}toJSON(){return null}}class wa{constructor(){P(this,Vr);P(this,ye);P(this,Zt);k(this,ye,new Cg),k(this,Zt,Ls.disabled),L(this,Vr,Vu).call(this)}registerProcessor(t){p(this,ye).addTraceProcessor(t)}setProcessors(t){p(this,ye).setProcessors(t)}getCurrentTrace(){return tn()}getCurrentSpan(){return En()}setDisabled(t){k(this,Zt,t)}startExportLoop(){p(this,ye).start()}createTrace(t){if(p(this,Zt))return R.debug("Tracing is disabled, Not creating trace %o",t),new zo;const n=t.traceId??va(),r=t.name??"Agent workflow";return R.debug("Creating trace %s with name %s",n,r),new Rn({...t,name:r,traceId:n},p(this,ye))}createSpan(t,n){if(p(this,Zt)||t.disabled)return R.debug("Tracing is disabled, Not creating span %o",t),new pt(t.data,p(this,ye));let r,o,s;if(n){if(n instanceof Rn){if(n instanceof zo)return R.debug("Parent trace is no-op, returning NoopSpan"),new pt(t.data,p(this,ye));o=n.traceId,s=n.tracingApiKey}else if(n instanceof Pn){if(n instanceof pt)return R.debug("Parent span is no-op, returning NoopSpan"),new pt(t.data,p(this,ye));r=n.spanId,o=n.traceId,s=n.tracingApiKey}}else{const i=tn(),u=En();if(!i)return R.error("No active trace. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."),new pt(t.data,p(this,ye));if(u instanceof pt||i instanceof zo)return R.debug(`Parent ${u} or ${i} is no-op, returning NoopSpan`),new pt(t.data,p(this,ye));o=i.traceId,s=i.tracingApiKey,u?(R.debug("Using parent span %s",u.spanId),r=u.spanId):R.debug("No parent span, using current trace %s",i.traceId)}return o?(R.debug(`Creating span ${JSON.stringify(t.data)} with id ${t.spanId??o}`),new Pn({...t,traceId:o,parentId:r,tracingApiKey:s??t.tracingApiKey},p(this,ye))):(R.error("No traceId found. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."),new pt(t.data,p(this,ye)))}async shutdown(t){try{R.debug("Shutting down tracing provider"),await p(this,ye).shutdown(t)}catch(n){R.error("Error shutting down tracing provider %o",n)}}async forceFlush(){await p(this,ye).forceFlush()}}ye=new WeakMap,Zt=new WeakMap,Vr=new WeakSet,Vu=function(){if(typeof process<"u"&&typeof process.on=="function"){const t=async()=>{const n=setTimeout(()=>{console.warn("Cleanup timeout, forcing exit"),process.exit(1)},5e3);try{await this.shutdown()}finally{clearTimeout(n)}};process.on("beforeExit",t),process.on("SIGINT",async()=>{await t(),ba("SIGINT")||process.exit(130)}),process.on("SIGTERM",async()=>{await t(),ba("SIGTERM")||process.exit(0)}),process.on("unhandledRejection",async(n,r)=>{R.error("Unhandled rejection",n,r),await t(),Ng("unhandledRejection")||process.exit(1)})}};let Do;function ba(e){return process.listeners(e).length>1}function Ng(e){return process.listeners(e).length>1}function Le(){const e=Symbol.for("openai.agents.core.traceProvider");try{const t=globalThis,n=t[e];if(n)return n;const r=Object.getOwnPropertyDescriptor(t,e);if(r&&r.writable===!1&&r.configurable===!1&&!r.set)return Mr();if(!r)try{Object.defineProperty(t,e,{value:void 0,writable:!0,configurable:!0})}catch{return Mr()}try{const o=new wa;return t[e]=o,o}catch{return Mr()}}catch{return Mr()}}function Mr(){return Do||(Do=new wa),Do}function jr(e){return async(t,...n)=>Ro(async()=>{const r=e(...n);Po(r);try{return r.start(),await t(r)}catch(o){throw r.setError({message:o.message,data:o.data}),o}finally{r.end(),Cn()}})}function zg(e,t){var n;return Le().createSpan({...e,data:{type:"agent",name:((n=e==null?void 0:e.data)==null?void 0:n.name)??"Agent",...e==null?void 0:e.data}},t)}function Dg(e,t){var n,r;return Le().createSpan({...e,data:{type:"function",input:((n=e==null?void 0:e.data)==null?void 0:n.input)??"",output:((r=e==null?void 0:e.data)==null?void 0:r.output)??"",...e==null?void 0:e.data}},t)}const Ia=jr(Dg);function Zg(e,t){return Le().createSpan({...e,data:{type:"handoff",...e==null?void 0:e.data}},t)}const Mg=jr(Zg);function jg(e,t){return Le().createSpan({...e,data:{type:"guardrail",triggered:!1,...e==null?void 0:e.data}},t)}const Fg=jr(jg);function Lg(e,t){return Le().createSpan({...e,data:{type:"mcp_tools",...e==null?void 0:e.data}},t)}const Ug=jr(Lg);function Gg(e){Le().registerProcessor(e)}class Zo{on(t,n){return this.eventEmitter.on(t,n),this.eventEmitter}off(t,n){return this.eventEmitter.off(t,n),this.eventEmitter}emit(t,...n){return this.eventEmitter.emit(t,...n)}once(t,n){return this.eventEmitter.once(t,n),this.eventEmitter}}class Jg extends Zo{constructor(){super(...arguments);S(this,"eventEmitter",new Cr)}}class Bg extends Zo{constructor(){super(...arguments);S(this,"eventEmitter",new Cr)}}const qg="OPENAI_DEFAULT_MODEL";function Fr(e){return e.startsWith("gpt-5-chat")?!1:e.startsWith("gpt-5")}const Wg=new Set(["gpt-5.2","gpt-5.1"]);function Vg(e){return Wg.has(e)}function Sa(){return Fr(Ta())}function Ta(){var t;return((t=js()[qg])==null?void 0:t.toLowerCase())??"gpt-4.1"}function Hg(e){const t=Ta();return Fr(t)?Vg(t)?{reasoning:{effort:"none"},text:{verbosity:"low"}}:{reasoning:{effort:"low"},text:{verbosity:"low"}}:{}}class $n{constructor(t){S(this,"inputTokens");S(this,"outputTokens");S(this,"totalTokens");S(this,"inputTokensDetails");S(this,"outputTokensDetails");S(this,"endpoint");this.inputTokens=(t==null?void 0:t.inputTokens)??(t==null?void 0:t.input_tokens)??0,this.outputTokens=(t==null?void 0:t.outputTokens)??(t==null?void 0:t.output_tokens)??0,this.totalTokens=(t==null?void 0:t.totalTokens)??(t==null?void 0:t.total_tokens)??this.inputTokens+this.outputTokens;const n=(t==null?void 0:t.inputTokensDetails)??(t==null?void 0:t.input_tokens_details);this.inputTokensDetails=n||{};const r=(t==null?void 0:t.outputTokensDetails)??(t==null?void 0:t.output_tokens_details);this.outputTokensDetails=r||{},typeof(t==null?void 0:t.endpoint)<"u"&&(this.endpoint=t.endpoint)}}class Nn{constructor(t){S(this,"requests");S(this,"inputTokens");S(this,"outputTokens");S(this,"totalTokens");S(this,"inputTokensDetails",[]);S(this,"outputTokensDetails",[]);S(this,"requestUsageEntries");if(typeof t>"u")this.requests=0,this.inputTokens=0,this.outputTokens=0,this.totalTokens=0,this.inputTokensDetails=[],this.outputTokensDetails=[],this.requestUsageEntries=void 0;else{this.requests=(t==null?void 0:t.requests)??1,this.inputTokens=(t==null?void 0:t.inputTokens)??(t==null?void 0:t.input_tokens)??0,this.outputTokens=(t==null?void 0:t.outputTokens)??(t==null?void 0:t.output_tokens)??0,this.totalTokens=(t==null?void 0:t.totalTokens)??(t==null?void 0:t.total_tokens)??this.inputTokens+this.outputTokens;const n=(t==null?void 0:t.inputTokensDetails)??(t==null?void 0:t.input_tokens_details);Array.isArray(n)?this.inputTokensDetails=n:this.inputTokensDetails=n?[n]:[];const r=(t==null?void 0:t.outputTokensDetails)??(t==null?void 0:t.output_tokens_details);Array.isArray(r)?this.outputTokensDetails=r:this.outputTokensDetails=r?[r]:[];const o=(t==null?void 0:t.requestUsageEntries)??(t==null?void 0:t.request_usage_entries),s=Array.isArray(o)?o.map(i=>i instanceof $n?i:new $n(i)):void 0;this.requestUsageEntries=s&&s.length>0?s:void 0}}add(t){var n,r;this.requests+=t.requests??0,this.inputTokens+=t.inputTokens??0,this.outputTokens+=t.outputTokens??0,this.totalTokens+=t.totalTokens??0,t.inputTokensDetails&&this.inputTokensDetails.push(...t.inputTokensDetails),t.outputTokensDetails&&this.outputTokensDetails.push(...t.outputTokensDetails),Array.isArray(t.requestUsageEntries)&&t.requestUsageEntries.length>0?(this.requestUsageEntries??(this.requestUsageEntries=[]),this.requestUsageEntries.push(...t.requestUsageEntries.map(o=>o instanceof $n?o:new $n(o)))):t.requests===1&&t.totalTokens>0&&(this.requestUsageEntries??(this.requestUsageEntries=[]),this.requestUsageEntries.push(new $n({inputTokens:t.inputTokens,outputTokens:t.outputTokens,totalTokens:t.totalTokens,inputTokensDetails:(n=t.inputTokensDetails)==null?void 0:n[0],outputTokensDetails:(r=t.outputTokensDetails)==null?void 0:r[0]})))}}class dt{constructor(t={}){S(this,"context");S(this,"usage");P(this,ve);this.context=t,this.usage=new Nn,k(this,ve,new Map)}_rebuildApprovals(t){k(this,ve,new Map(Object.entries(t)))}_mergeApprovals(t){const n=(r,o)=>{if(r===!0||o===!0)return!0;const s=Array.isArray(r)?r:[],i=Array.isArray(o)?o:[];return Array.from(new Set([...s,...i]))};for(const[r,o]of Object.entries(t)){const s=p(this,ve).get(r);if(!s){p(this,ve).set(r,o);continue}p(this,ve).set(r,{approved:n(s.approved,o.approved),rejected:n(s.rejected,o.rejected)})}}isToolApproved(t){const{toolName:n,callId:r}=t,o=p(this,ve).get(n);if((o==null?void 0:o.approved)===!0&&o.rejected===!0)return R.warn("Tool is permanently approved and rejected at the same time. Approval takes precedence"),!0;if((o==null?void 0:o.approved)===!0)return!0;if((o==null?void 0:o.rejected)===!0)return!1;const s=Array.isArray(o==null?void 0:o.approved)?o.approved.includes(r):!1,i=Array.isArray(o==null?void 0:o.rejected)?o.rejected.includes(r):!1;if(s&&i)return R.warn(`Tool call ${r} is both approved and rejected at the same time. Approval takes precedence`),!0;if(s)return!0;if(i)return!1}approveTool(t,{alwaysApprove:n=!1}={}){const r=t.toolName??t.rawItem.name;if(n){p(this,ve).set(r,{approved:!0,rejected:[]});return}const o=p(this,ve).get(r)??{approved:[],rejected:[]};if(Array.isArray(o.approved)){const s="callId"in t.rawItem?t.rawItem.callId:t.rawItem.id;o.approved.push(s)}p(this,ve).set(r,o)}rejectTool(t,{alwaysReject:n=!1}={}){const r=t.toolName??t.rawItem.name;if(n){p(this,ve).set(r,{approved:!1,rejected:!0});return}const o=p(this,ve).get(r)??{approved:[],rejected:[]};if(Array.isArray(o.rejected)){const s="callId"in t.rawItem?t.rawItem.callId:t.rawItem.id;o.rejected.push(s)}p(this,ve).set(r,o)}toJSON(){return{context:this.context,usage:this.usage,approvals:Object.fromEntries(p(this,ve).entries())}}}ve=new WeakMap;function Aa(e){return JSON.stringify({assistant:e.name})}function Kg(e){return`transfer_to_${mr(e.name)}`}function Yg(e){return`Handoff to the ${e.name} agent to handle the request. ${e.handoffDescription??""}`}class ka{constructor(t,n){S(this,"toolName");S(this,"toolDescription");S(this,"inputJsonSchema",{type:"object",properties:{},required:[],additionalProperties:!1});S(this,"strictJsonSchema",!0);S(this,"onInvokeHandoff");S(this,"agentName");S(this,"inputFilter");S(this,"agent");S(this,"isEnabled",async()=>!0);this.agentName=t.name,this.onInvokeHandoff=n,this.toolName=Kg(t),this.toolDescription=Yg(t),this.agent=t}getHandoffAsFunctionTool(){return{type:"function",name:this.toolName,description:this.toolDescription,parameters:this.inputJsonSchema,strict:this.strictJsonSchema}}}function Oa(e,t={}){let n;const r=!!t.onHandoff,o=!!t.inputType;if(!(r===o))throw new Y("You must provide either both `onHandoff` and `inputType` or neither.");async function i(a,l){var d;if(n){if(!l)throw At({message:`Handoff function expected non empty input but got: ${l}`,data:{details:"input is empty"}}),new Oe("Handoff function expected non empty input");try{const c=await n(l);t.onHandoff&&await t.onHandoff(a,c)}catch(c){throw At({message:"Invalid JSON provided",data:{}}),R.dontLogToolData||R.error(`Invalid JSON when parsing: ${l}. Error: ${c}`),new Oe("Invalid JSON provided")}}else await((d=t.onHandoff)==null?void 0:d.call(t,a));return e}const u=new ka(e,i);if(typeof t.isEnabled=="function"){const a=t.isEnabled;u.isEnabled=async({runContext:l,agent:d})=>!!await a({runContext:l,agent:d})}else typeof t.isEnabled=="boolean"&&(u.isEnabled=async()=>t.isEnabled);if(t.inputType){const a=to(t.inputType,u.toolName);u.inputJsonSchema=a.schema,u.strictJsonSchema=!0,n=a.parser}return t.toolNameOverride&&(u.toolName=t.toolNameOverride),t.toolDescriptionOverride&&(u.toolDescription=t.toolDescriptionOverride),t.inputFilter&&(u.inputFilter=t.inputFilter),u}function Xg(e){return e instanceof ka?e:Oa(e)}class Qg{constructor(t){S(this,"data");S(this,"type","raw_model_stream_event");this.data=t}}class ey{constructor(t,n){S(this,"name");S(this,"item");S(this,"type","run_item_stream_event");this.name=t,this.item=n}}class ty{constructor(t){S(this,"agent");S(this,"type","agent_updated_stream_event");this.agent=t}}function xa({name:e,execute:t,runInParallel:n=!0}){return{type:"input",name:e,runInParallel:n,guardrailFunction:t,async run(r){return{guardrail:{type:"input",name:e},output:await t(r)}}}}function Mo({name:e,execute:t}){return{type:"output",name:e,guardrailFunction:t,async run(n){return{guardrail:{type:"output",name:e},agent:n.agent,agentOutput:n.agentOutput,output:await t(n)}}}}function ny(){throw new Error("No default model provider set. Make sure to set a provider using setDefaultModelProvider before calling getDefaultModelProvider or pass an explicit provider.")}class kt{constructor(){S(this,"type","base_item");S(this,"rawItem")}toJSON(){return{type:this.type,rawItem:this.rawItem}}}class zn extends kt{constructor(n,r){super();S(this,"rawItem");S(this,"agent");S(this,"type","message_output_item");this.rawItem=n,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}get content(){let n="";for(const r of this.rawItem.content)r.type==="output_text"&&(n+=r.text);return n}}class Ot extends kt{constructor(n,r){super();S(this,"rawItem");S(this,"agent");S(this,"type","tool_call_item");this.rawItem=n,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class Ue extends kt{constructor(n,r,o){super();S(this,"rawItem");S(this,"agent");S(this,"output");S(this,"type","tool_call_output_item");this.rawItem=n,this.agent=r,this.output=o}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON(),output:ot(this.output)}}}class jo extends kt{constructor(n,r){super();S(this,"rawItem");S(this,"agent");S(this,"type","reasoning_item");this.rawItem=n,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class Fo extends kt{constructor(n,r){super();S(this,"rawItem");S(this,"agent");S(this,"type","handoff_call_item");this.rawItem=n,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class Lo extends kt{constructor(n,r,o){super();S(this,"rawItem");S(this,"sourceAgent");S(this,"targetAgent");S(this,"type","handoff_output_item");this.rawItem=n,this.sourceAgent=r,this.targetAgent=o}toJSON(){return{...super.toJSON(),sourceAgent:this.sourceAgent.toJSON(),targetAgent:this.targetAgent.toJSON()}}}class pe extends kt{constructor(n,r,o){super();S(this,"rawItem");S(this,"agent");S(this,"toolName");S(this,"type","tool_approval_item");this.rawItem=n,this.agent=r,this.toolName=o,this.toolName=o??n.name}get name(){return this.toolName??this.rawItem.name}get arguments(){return"arguments"in this.rawItem?this.rawItem.arguments:void 0}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON(),toolName:this.toolName}}}class Ea{constructor(){P(this,yt,new Map)}addToolUse(t,n,r={}){const o=r.allowEmpty??!1;if(n.length===0&&!o){const s=p(this,yt).get(t);if(!s||s.length>0)return}if(!o){const s=p(this,yt).get(t);if(s&&s.length>0&&n.length===0)return}p(this,yt).set(t,n)}hasUsedTools(t){return p(this,yt).has(t)}toJSON(){return Object.fromEntries(Array.from(p(this,yt).entries()).map(([t,n])=>[t.name,n]))}}yt=new WeakMap;const ry=ge("type",[I({type:T("next_step_handoff"),newAgent:J()}),I({type:T("next_step_final_output"),output:f()}),I({type:T("next_step_run_again")}),I({type:T("next_step_interruption"),data:X(f(),J())})]);class We{constructor(t,n,r,o,s){S(this,"originalInput");S(this,"modelResponse");S(this,"preStepItems");S(this,"newStepItems");S(this,"nextStep");this.originalInput=t,this.modelResponse=n,this.preStepItems=r,this.newStepItems=o,this.nextStep=s}get generatedItems(){return this.preStepItems.concat(this.newStepItems)}}const Uo="1.2",Ca=["1.0","1.1",Uo],oy=ue(Ca),Ve=I({name:f()}),Pa=I({object:T("trace.span"),id:f(),trace_id:f(),parent_id:f().nullable(),started_at:f().nullable(),ended_at:f().nullable(),error:I({message:f(),data:X(f(),J()).optional()}).nullable(),span_data:X(f(),J())}).extend({previous_span:Am(()=>Pa).optional()}),sy=I({inputTokens:E(),outputTokens:E(),totalTokens:E(),inputTokensDetails:X(f(),E()).optional(),outputTokensDetails:X(f(),E()).optional(),endpoint:f().optional()}),Ra=I({requests:E(),inputTokens:E(),outputTokens:E(),totalTokens:E(),inputTokensDetails:j(X(f(),E())).optional(),outputTokensDetails:j(X(f(),E())).optional(),requestUsageEntries:j(sy).optional()}),$a=I({usage:Ra,output:j(Eo),responseId:f().optional(),providerData:X(f(),J()).optional()}),Na=ge("type",[I({type:T("message_output_item"),rawItem:$r,agent:Ve}),I({type:T("tool_call_item"),rawItem:yg.or(kn),agent:Ve}),I({type:T("tool_call_output_item"),rawItem:Nr.or(ua).or(ko).or(Oo),agent:Ve,output:f()}),I({type:T("reasoning_item"),rawItem:xo,agent:Ve}),I({type:T("handoff_call_item"),rawItem:On,agent:Ve}),I({type:T("handoff_output_item"),rawItem:Nr,sourceAgent:Ve,targetAgent:Ve}),I({type:T("tool_approval_item"),rawItem:On.or(kn).or(zr).or(Dr),agent:Ve,toolName:f().optional()})]),iy=I({object:T("trace"),id:f(),workflow_name:f(),group_id:f().nullable(),metadata:X(f(),J()),tracing_api_key:f().optional().nullable()}),ay=I({newItems:j(Na),toolsUsed:j(f()),handoffs:j(I({toolCall:J(),handoff:J()})),functions:j(I({toolCall:J(),tool:J()})),computerActions:j(I({toolCall:J(),computer:J()})),shellActions:j(I({toolCall:J(),shell:J()})).optional(),applyPatchActions:j(I({toolCall:J(),applyPatch:J()})).optional(),mcpApprovalRequests:j(I({requestItem:I({rawItem:I({type:T("hosted_tool_call"),name:f(),arguments:f().optional(),status:f().optional(),output:f().optional(),providerData:X(f(),J()).nullable().optional()})}),mcpTool:I({type:T("hosted_tool"),name:T("hosted_mcp"),providerData:X(f(),J())})})).optional()}),za=I({tripwireTriggered:ct(),outputInfo:J()}),uy=ge("type",[I({type:T("allow")}),I({type:T("rejectContent"),message:f()}),I({type:T("throwException")})]),Da=I({outputInfo:J().optional(),behavior:uy}),Za=I({type:je([T("tool_input"),T("tool_output")]),name:f()}),cy=I({guardrail:I({type:T("input"),name:f()}),output:za}),ly=I({guardrail:I({type:T("output"),name:f()}),agentOutput:J(),agent:Ve,output:za}),py=I({guardrail:Za.extend({type:T("tool_input")}),output:Da}),dy=I({guardrail:Za.extend({type:T("tool_output")}),output:Da}),Ma=I({$schemaVersion:oy,currentTurn:E(),currentAgent:Ve,originalInput:f().or(j(_g)),modelResponses:j($a),context:I({usage:Ra,approvals:X(f(),I({approved:j(f()).or(ct()),rejected:j(f()).or(ct())})),context:X(f(),J())}),toolUseTracker:X(f(),j(f())),maxTurns:E(),currentAgentSpan:Pa.nullable().optional(),noActiveAgentRun:ct(),inputGuardrailResults:j(cy),outputGuardrailResults:j(ly),toolInputGuardrailResults:j(py).optional().default([]),toolOutputGuardrailResults:j(dy).optional().default([]),currentTurnInProgress:ct().optional(),currentStep:ry.optional(),lastModelResponse:$a.optional(),generatedItems:j(Na),pendingAgentToolRuns:X(f(),f()).optional().default({}),lastProcessedResponse:ay.optional(),currentTurnPersistedItemCount:E().int().min(0).optional(),conversationId:f().optional(),previousResponseId:f().optional(),trace:iy.nullable()});class He{constructor(t,n,r,o){S(this,"_currentTurn",0);S(this,"_currentTurnInProgress",!1);S(this,"_currentAgent");S(this,"_originalInput");S(this,"_modelResponses");S(this,"_conversationId");S(this,"_previousResponseId");S(this,"_lastModelSettings");S(this,"_currentAgentSpan");S(this,"_context");S(this,"_toolUseTracker");S(this,"_pendingAgentToolRuns");S(this,"_generatedItems");S(this,"_currentTurnPersistedItemCount");S(this,"_maxTurns");S(this,"_noActiveAgentRun",!0);S(this,"_lastTurnResponse");S(this,"_inputGuardrailResults");S(this,"_outputGuardrailResults");S(this,"_toolInputGuardrailResults");S(this,"_toolOutputGuardrailResults");S(this,"_currentStep");S(this,"_finalOutputSource");S(this,"_lastProcessedResponse");S(this,"_trace",null);this._context=t,this._originalInput=structuredClone(n),this._modelResponses=[],this._currentAgentSpan=void 0,this._currentAgent=r,this._toolUseTracker=new Ea,this._pendingAgentToolRuns=new Map,this._generatedItems=[],this._currentTurnPersistedItemCount=0,this._maxTurns=o,this._inputGuardrailResults=[],this._outputGuardrailResults=[],this._toolInputGuardrailResults=[],this._toolOutputGuardrailResults=[],this._trace=tn()}get usage(){return this._context.usage}setConversationContext(t,n){this._conversationId=t,this._previousResponseId=n}setCurrentAgentSpan(t){this._currentAgentSpan=t}setCurrentAgent(t){this._currentAgent=t}get currentAgent(){return this._currentAgent}resetTurnPersistence(){this._currentTurnPersistedItemCount=0}rewindTurnPersistence(t){t<=0||(this._currentTurnPersistedItemCount=Math.max(0,this._currentTurnPersistedItemCount-t))}get history(){return Tt(this._originalInput,this._generatedItems)}getInterruptions(){var t;return((t=this._currentStep)==null?void 0:t.type)!=="next_step_interruption"?[]:this._currentStep.data.interruptions}getPendingAgentToolRunKey(t,n){return`${t}:${n}`}getPendingAgentToolRun(t,n){return this._pendingAgentToolRuns.get(this.getPendingAgentToolRunKey(t,n))}hasPendingAgentToolRun(t,n){return this._pendingAgentToolRuns.has(this.getPendingAgentToolRunKey(t,n))}setPendingAgentToolRun(t,n,r){this._pendingAgentToolRuns.set(this.getPendingAgentToolRunKey(t,n),r)}clearPendingAgentToolRun(t,n){this._pendingAgentToolRuns.delete(this.getPendingAgentToolRunKey(t,n))}approve(t,n={alwaysApprove:!1}){this._context.approveTool(t,n)}reject(t,n={alwaysReject:!1}){this._context.rejectTool(t,n)}toJSON(t={}){var s;const n=t.includeTracingApiKey===!0,r={$schemaVersion:Uo,currentTurn:this._currentTurn,currentAgent:{name:this._currentAgent.name},originalInput:this._originalInput,modelResponses:this._modelResponses.map(i=>({usage:{requests:i.usage.requests,inputTokens:i.usage.inputTokens,outputTokens:i.usage.outputTokens,totalTokens:i.usage.totalTokens,inputTokensDetails:i.usage.inputTokensDetails,outputTokensDetails:i.usage.outputTokensDetails,...i.usage.requestUsageEntries&&i.usage.requestUsageEntries.length>0?{requestUsageEntries:i.usage.requestUsageEntries.map(u=>({inputTokens:u.inputTokens,outputTokens:u.outputTokens,totalTokens:u.totalTokens,inputTokensDetails:u.inputTokensDetails,outputTokensDetails:u.outputTokensDetails,...u.endpoint?{endpoint:u.endpoint}:{}}))}:{}},output:i.output,responseId:i.responseId,providerData:i.providerData})),context:this._context.toJSON(),toolUseTracker:this._toolUseTracker.toJSON(),maxTurns:this._maxTurns,currentAgentSpan:(s=this._currentAgentSpan)==null?void 0:s.toJSON(),noActiveAgentRun:this._noActiveAgentRun,currentTurnInProgress:this._currentTurnInProgress,inputGuardrailResults:this._inputGuardrailResults,outputGuardrailResults:this._outputGuardrailResults.map(i=>({...i,agent:i.agent.toJSON()})),toolInputGuardrailResults:this._toolInputGuardrailResults,toolOutputGuardrailResults:this._toolOutputGuardrailResults,currentStep:this._currentStep,lastModelResponse:this._lastTurnResponse,generatedItems:this._generatedItems.map(i=>i.toJSON()),pendingAgentToolRuns:Object.fromEntries(this._pendingAgentToolRuns.entries()),currentTurnPersistedItemCount:this._currentTurnPersistedItemCount,lastProcessedResponse:this._lastProcessedResponse,conversationId:this._conversationId,previousResponseId:this._previousResponseId,trace:this._trace?this._trace.toJSON({includeTracingApiKey:n}):null},o=Ma.safeParse(r);if(!o.success)throw new Qc(`Failed to serialize run state. ${o.error.message}`);return o.data}toString(t={}){return JSON.stringify(this.toJSON(t))}static async fromString(t,n){return ja(t,n)}static async fromStringWithContext(t,n,r,o={}){return ja(t,n,{contextOverride:r,contextStrategy:o.contextStrategy})}}async function ja(e,t,n={}){const[r,o]=await ce(()=>JSON.parse(t));if(r)throw new Y(`Failed to parse run state. ${r instanceof Error?r.message:String(r)}`);const s=o.$schemaVersion;if(!s)throw new Y("Run state is missing schema version");if(!Ca.includes(s))throw new Y(`Run state schema version ${s} is not supported. Please use version ${Uo}.`);const i=Ma.parse(JSON.parse(t));return fy(e,i,n)}async function fy(e,t,n={}){var l,d,c,h,m,y;const r=hy(e),o=n.contextOverride,s=n.contextStrategy??"merge",i=o??new dt(t.context.context);o?s==="merge"&&i._mergeApprovals(t.context.approvals):i._rebuildApprovals(t.context.approvals);const u=r.get(t.currentAgent.name);if(!u)throw new Y(`Agent ${t.currentAgent.name} not found`);const a=new He(i,"",u,t.maxTurns);a._currentTurn=t.currentTurn,a._currentTurnInProgress=t.currentTurnInProgress??!1,a._conversationId=t.conversationId??void 0,a._previousResponseId=t.previousResponseId??void 0,a._toolUseTracker=new Ea;for(const[b,_]of Object.entries(t.toolUseTracker))a._toolUseTracker.addToolUse(r.get(b),_,{allowEmpty:!0});if(a._pendingAgentToolRuns=new Map(Object.entries(t.pendingAgentToolRuns??{})),t.currentAgentSpan){t.trace||R.warn("Trace is not set, skipping tracing setup");const b=Le().createTrace({traceId:(l=t.trace)==null?void 0:l.id,name:(d=t.trace)==null?void 0:d.workflow_name,groupId:((c=t.trace)==null?void 0:c.group_id)??void 0,metadata:(h=t.trace)==null?void 0:h.metadata,tracingApiKey:((m=t.trace)==null?void 0:m.tracing_api_key)??void 0});a._currentAgentSpan=Fa(b,t.currentAgentSpan),a._trace=b}return a._noActiveAgentRun=t.noActiveAgentRun,a._inputGuardrailResults=t.inputGuardrailResults,a._outputGuardrailResults=t.outputGuardrailResults.map(b=>({...b,agent:r.get(b.agent.name)})),a._toolInputGuardrailResults=t.toolInputGuardrailResults,a._toolOutputGuardrailResults=t.toolOutputGuardrailResults,a._currentStep=t.currentStep,a._originalInput=t.originalInput,a._modelResponses=t.modelResponses.map(La),a._lastTurnResponse=t.lastModelResponse?La(t.lastModelResponse):void 0,a._generatedItems=t.generatedItems.map(b=>Ua(b,r)),a._currentTurnPersistedItemCount=t.currentTurnPersistedItemCount??0,a._lastProcessedResponse=t.lastProcessedResponse?await my(r,a._currentAgent,a._context,t.lastProcessedResponse):void 0,((y=t.currentStep)==null?void 0:y.type)==="next_step_handoff"&&(a._currentStep={type:"next_step_handoff",newAgent:r.get(t.currentStep.newAgent.name)}),a}function hy(e){const t=new Map,n=[e];for(;n.length>0;){const r=n.shift();if(!t.has(r.name)){t.set(r.name,r);for(const o of r.handoffs)o instanceof Qe?t.has(o.name)||n.push(o):o.agent&&(t.has(o.agent.name)||n.push(o.agent))}}return t}function Fa(e,t){const n=t.span_data,r=t.previous_span?Fa(e,t.previous_span):void 0,o=Le().createSpan({spanId:t.id,traceId:t.trace_id,parentId:t.parent_id??void 0,startedAt:t.started_at??void 0,endedAt:t.ended_at??void 0,data:n},e);return o.previousSpan=r,o}function La(e){return{usage:new Nn(e.usage),output:e.output.map(n=>Eo.parse(n)),responseId:e.responseId,providerData:e.providerData}}function Ua(e,t){switch(e.type){case"message_output_item":return new zn(e.rawItem,t.get(e.agent.name));case"tool_call_item":return new Ot(e.rawItem,t.get(e.agent.name));case"tool_call_output_item":return new Ue(e.rawItem,t.get(e.agent.name),e.output);case"reasoning_item":return new jo(e.rawItem,t.get(e.agent.name));case"handoff_call_item":return new Fo(e.rawItem,t.get(e.agent.name));case"handoff_output_item":return new Lo(e.rawItem,t.get(e.sourceAgent.name),t.get(e.targetAgent.name));case"tool_approval_item":return new pe(e.rawItem,t.get(e.agent.name),e.toolName)}}async function my(e,t,n,r){const o=await t.getAllTools(n),s=new Map(o.filter(c=>c.type==="function").map(c=>[c.name,c])),i=new Map(o.filter(c=>c.type==="computer").map(c=>[c.name,c])),u=new Map(o.filter(c=>c.type==="shell").map(c=>[c.name,c])),a=new Map(o.filter(c=>c.type==="apply_patch").map(c=>[c.name,c])),l=new Map(t.handoffs.map(c=>c instanceof Qe?[c.name,Oa(c)]:[c.toolName,c])),d={newItems:r.newItems.map(c=>Ua(c,e)),toolsUsed:r.toolsUsed,handoffs:r.handoffs.map(c=>{if(!l.has(c.handoff.toolName))throw new Y(`Handoff ${c.handoff.toolName} not found`);return{toolCall:c.toolCall,handoff:l.get(c.handoff.toolName)}}),functions:await Promise.all(r.functions.map(async c=>{if(!s.has(c.tool.name))throw new Y(`Tool ${c.tool.name} not found`);return{toolCall:c.toolCall,tool:s.get(c.tool.name)}})),computerActions:r.computerActions.map(c=>{const h=c.computer.name;if(!i.has(h))throw new Y(`Computer tool ${h} not found`);return{toolCall:c.toolCall,computer:i.get(h)}}),shellActions:(r.shellActions??[]).map(c=>{const h=c.shell.name;if(!u.has(h))throw new Y(`Shell tool ${h} not found`);return{toolCall:c.toolCall,shell:u.get(h)}}),applyPatchActions:(r.applyPatchActions??[]).map(c=>{const h=c.applyPatch.name;if(!a.has(h))throw new Y(`Apply patch tool ${h} not found`);return{toolCall:c.toolCall,applyPatch:a.get(h)}}),mcpApprovalRequests:(r.mcpApprovalRequests??[]).map(c=>({requestItem:new pe(c.requestItem.rawItem,t),mcpTool:c.mcpTool}))};return{...d,hasToolsOrApprovalsToRun(){return d.handoffs.length>0||d.functions.length>0||d.mcpApprovalRequests.length>0||d.computerActions.length>0||d.shellActions.length>0||d.applyPatchActions.length>0}}}const Ga=10;async function gy(e,t,n,r,o){const s=(m,y)=>m.map(b=>{const _=structuredClone(b);return y&&_&&typeof _=="object"&&y.set(_,b),_}),i=new WeakMap,u=Io(r),a=[];for(const m of r)m&&typeof m=="object"&&a.push(m);const l=m=>{if(!m||typeof m!="object")return;const y=a.findIndex(b=>b===m);y!==-1&&a.splice(y,1)},d=()=>{const m=a.shift();return m&&Rr(u,m),m},h={input:s(r,i),instructions:o};if(!t)return{modelInput:h,sourceItems:[...r],persistedItems:[],filterApplied:!1};try{const m=await t({modelData:h,agent:e,context:n.context});if(!m||!Array.isArray(m.input))throw new Y("callModelInputFilter must return a ModelInputData object with an input array.");const y=m.input.map(_=>{if(!_||typeof _!="object")return;const g=i.get(_);if(g)return l(g),Rr(u,g),g;const v=Fe(_),w=Fm(u,v);if(w)return l(w),w;const O=d();if(O)return O}),b=s(m.input);return{modelInput:{input:b,instructions:typeof m.instructions>"u"?o:m.instructions},sourceItems:y,persistedItems:b.map(_=>structuredClone(_)),filterApplied:!0}}catch(m){throw At({message:"Error in callModelInputFilter",data:{error:String(m)}}),m}}class Ja{constructor({conversationId:t,previousResponseId:n}){S(this,"conversationId");S(this,"previousResponseId");S(this,"sentInitialInput",!1);S(this,"sentItems",new WeakSet);S(this,"serverItems",new WeakSet);S(this,"remainingInitialInput",null);this.conversationId=t??void 0,this.previousResponseId=n??void 0}primeFromState({originalInput:t,generatedItems:n,modelResponses:r}){if(this.sentInitialInput)return;const o=Pr(t),s=r.length>0,i=new Set;for(const a of r)for(const l of a.output)l&&typeof l=="object"&&(this.serverItems.add(l),i.add(Fe(l)));if(s){for(const a of o)a&&typeof a=="object"&&this.sentItems.add(a);this.sentInitialInput=!0,this.remainingInitialInput=null}const u=r[r.length-1];if(!this.conversationId&&(u!=null&&u.responseId)&&(this.previousResponseId=u.responseId),s)for(const a of n){const l=a.rawItem;if(!l||typeof l!="object")continue;const d=Fe(l);(this.serverItems.has(l)||i.has(d))&&this.sentItems.add(l)}}trackServerItems(t){if(t){for(const n of t.output)n&&typeof n=="object"&&this.serverItems.add(n);!this.conversationId&&t.responseId&&(this.previousResponseId=t.responseId)}}prepareInput(t,n){const r=[];if(this.sentInitialInput)this.remainingInitialInput&&this.remainingInitialInput.length>0&&r.push(...this.remainingInitialInput);else{const o=Pr(t);r.push(...o),this.remainingInitialInput=o.filter(s=>!!s&&typeof s=="object"),this.sentInitialInput=!0}for(const o of n){if(o.type==="tool_approval_item")continue;const s=o.rawItem;!s||typeof s!="object"||this.sentItems.has(s)||this.serverItems.has(s)||r.push(s)}return r}markInputAsSent(t,n){const r=new Set,o=(n==null?void 0:n.filterApplied)??!1,s=(n==null?void 0:n.filterApplied)&&!!n.allTurnItems;this.addDeliveredItems(r,t);const i=n==null?void 0:n.allTurnItems;s&&i&&this.addDeliveredItems(r,i),this.updateRemainingInitialInput(r,!!o)}addDeliveredItems(t,n){for(const r of n)!r||typeof r!="object"||t.has(r)||(t.add(r),this.sentItems.add(r))}updateRemainingInitialInput(t,n){if(!this.remainingInitialInput||this.remainingInitialInput.length===0||t.size===0){n&&this.remainingInitialInput&&(this.remainingInitialInput=null);return}this.remainingInitialInput=this.remainingInitialInput.filter(r=>!t.has(r)),this.remainingInitialInput.length===0?this.remainingInitialInput=null:n&&(this.remainingInitialInput=null)}}const Go=()=>{let e=!1,t=!1,n,r;const o=a=>{t=!0,n=a,e=!1};return{get pending(){return e},get failed(){return t},get error(){return n},markPending:()=>{e=!0},setPromise:a=>{a&&(e=!0,r=a.then(l=>l).catch(l=>(o(l),[])).finally(()=>{e=!1}))},setError:o,throwIfError:()=>{if(n)throw n},awaitCompletion:async a=>{if(r&&await r,n&&!(a!=null&&a.suppressErrors))throw n}}};async function Ba(e){const{state:t,guardrails:n,guardrailArgs:r,resultsTarget:o,onTripwire:s,isTripwireError:i,onError:u}=e;try{const a=await Promise.all(n.map(async l=>Fg(async d=>{const c=await l.run(r);return d.spanData.triggered=c.output.tripwireTriggered,c},{data:{name:l.name}},t._currentAgentSpan)));o.push(...a);for(const l of a)l.output.tripwireTriggered&&(t._currentAgentSpan&&t._currentAgentSpan.setError({message:"Guardrail tripwire triggered",data:{guardrail:l.guardrail.name}}),s(l));return a}catch(a){if(i(a))throw a;return u(a),[]}}function yy(e,t){return t.concat(e._currentAgent.inputGuardrails.map(xa))}function _y(e){const t=[],n=[];for(const r of e)r.runInParallel===!1?t.push(r):n.push(r);return{blocking:t,parallel:n}}async function qa(e,t){if(t.length===0)return[];const n={agent:e._currentAgent,input:e._originalInput,context:e._context};return await Ba({state:e,guardrails:t,guardrailArgs:n,resultsTarget:e._inputGuardrailResults,onTripwire:r=>{throw new xs(`Input guardrail triggered: ${JSON.stringify(r.output.outputInfo)}`,r,e)},isTripwireError:r=>r instanceof xs,onError:r=>{throw e._currentTurn--,new Os(`Input guardrail failed to complete: ${r}`,r,e)}})}async function Jo(e,t,n){const r=t.concat(e._currentAgent.outputGuardrails.map(Mo));if(r.length===0)return;const o=e._currentAgent.processFinalOutput(n),s=Tt([],e._generatedItems),i={agent:e._currentAgent,agentOutput:o,context:e._context,details:{modelResponse:e._lastTurnResponse,output:s}};await Ba({state:e,guardrails:r,guardrailArgs:i,resultsTarget:e._outputGuardrailResults,onTripwire:u=>{throw new fr(`Output guardrail triggered: ${JSON.stringify(u.output.outputInfo)}`,u,e)},isTripwireError:u=>u instanceof fr,onError:u=>{throw new Os(`Output guardrail failed to complete: ${u}`,u,e)}})}const Wa=e=>{var n;const t=e==null?void 0:e.providerData;return!!(t!=null&&t.reasoning||(n=t==null?void 0:t.text)!=null&&n.verbosity||t!=null&&t.reasoning_effort)};function vy(e,t){return typeof e=="string"&&e!==Qe.DEFAULT_MODEL_PLACEHOLDER||e?e:t??e??Qe.DEFAULT_MODEL_PLACEHOLDER}function wy(e,t,n){return e.resetToolChoice&&t.hasUsedTools(e)?{...n,toolChoice:void 0}:n}function by(e,t,n,r,o){const s=o??(typeof n=="string"?n:(n==null?void 0:n.model)??(n==null?void 0:n.name)),i=typeof s=="string"?!Fr(s):!0,u=Wa(t)||Wa(r);return Sa()&&e&&i&&u?Iy(r):r}function Iy(e){var r,o,s,i;const t=e.providerData?{...e.providerData}:void 0;t&&(t.text&&typeof t.text=="object"&&(t.text={...t.text},delete t.text.verbosity),delete t.reasoning,delete t.reasoning_effort);const n={...e,providerData:t};return e.reasoning&&(n.reasoning={...e.reasoning}),e.text&&(n.text={...e.text}),(r=n.providerData)==null||delete r.reasoning,(s=(o=n.providerData)==null?void 0:o.text)==null||delete s.verbosity,(i=n.providerData)==null||delete i.reasoning_effort,n.reasoning&&(delete n.reasoning.effort,delete n.reasoning.summary),n.text&&delete n.text.verbosity,n}function Sy(e,t,n){if(!e)throw At({message:t,data:n}),new Oe(t);return e}function Bo({output:e,tool:t,agent:n,errorMessage:r,errorData:o,items:s,toolsUsed:i,actions:u,buildAction:a}){const l=Sy(t,r,o);s.push(new Ot(e,n)),i.push(l.name),u.push(a(l))}function Ty(e,t,n,r){const o=t.get(e.name);if(o)return{type:"handoff",handoff:o};const s=n.get(e.name);if(!s){const i=`Tool ${e.name} not found in agent ${r.name}.`;throw At({message:i,data:{tool_name:e.name,agent_name:r.name}}),new Oe(i)}return{type:"function",tool:s}}function Va(e,t,n,r){var v;const o=[],s=[],i=[],u=[],a=[],l=[],d=[],c=[],h=new Map(r.map(w=>[w.toolName,w])),m=new Map(n.filter(w=>w.type==="function").map(w=>[w.name,w])),y=n.find(w=>w.type==="computer"),b=n.find(w=>w.type==="shell"),_=n.find(w=>w.type==="apply_patch"),g=new Map(n.filter(w=>{var O;return w.type==="hosted_tool"&&((O=w.providerData)==null?void 0:O.type)==="mcp"}).map(w=>w).map(w=>[w.providerData.server_label,w]));for(const w of e.output){if(w.type==="message")w.role==="assistant"&&o.push(new zn(w,t));else if(w.type==="hosted_tool_call"){o.push(new Ot(w,t));const x=w.name;if(c.push(x),((v=w.providerData)==null?void 0:v.type)==="mcp_approval_request"||w.name==="mcp_approval_request"){const C=w.providerData,$=C.server_label,q=g.get($);if(typeof q>"u"){const te=`MCP server (${$}) not found in Agent (${t.name})`;throw At({message:te,data:{mcp_server_label:$}}),new Oe(te)}const G=new pe({type:"hosted_tool_call",name:C.name,id:C.id,status:"in_progress",providerData:C},t);d.push({requestItem:G,mcpTool:q}),q.providerData.on_approval||o.push(G)}}else w.type==="reasoning"?o.push(new jo(w,t)):w.type==="computer_call"?Bo({output:w,tool:y,agent:t,errorMessage:"Model produced computer action without a computer tool.",errorData:{agent_name:t.name},items:o,toolsUsed:c,actions:u,buildAction:x=>({toolCall:w,computer:x})}):w.type==="shell_call"?Bo({output:w,tool:b,agent:t,errorMessage:"Model produced shell action without a shell tool.",errorData:{agent_name:t.name},items:o,toolsUsed:c,actions:a,buildAction:x=>({toolCall:w,shell:x})}):w.type==="apply_patch_call"&&Bo({output:w,tool:_,agent:t,errorMessage:"Model produced apply_patch action without an apply_patch tool.",errorData:{agent_name:t.name},items:o,toolsUsed:c,actions:l,buildAction:x=>({toolCall:w,applyPatch:x})});if(w.type!=="function_call")continue;c.push(w.name);const O=Ty(w,h,m,t);O.type==="handoff"?(o.push(new Fo(w,t)),s.push({toolCall:w,handoff:O.handoff})):(o.push(new Ot(w,t)),i.push({toolCall:w,tool:O.tool}))}return{newItems:o,handoffs:s,functions:i,computerActions:u,shellActions:a,applyPatchActions:l,mcpApprovalRequests:d,toolsUsed:c,hasToolsOrApprovalsToRun(){return s.length>0||i.length>0||d.length>0||u.length>0||a.length>0||l.length>0}}}const Ay=e=>{if(!e)return!1;if(e instanceof Error&&e.name==="AbortError")return!0;const t=typeof DOMException<"u"?DOMException:void 0;return!!(t&&e instanceof t&&e.name==="AbortError")};function ky(e){if(e instanceof zn)return"message_output_created";if(e instanceof Fo)return"handoff_requested";if(e instanceof Lo)return"handoff_occurred";if(e instanceof Ot)return"tool_called";if(e instanceof Ue)return"tool_output";if(e instanceof jo)return"reasoning_item_created";if(e instanceof pe)return"tool_approval_requested"}function Ha(e,t){const n=ky(t);if(!n){R.warn("Unknown item type: ",t);return}e._addItem(new ey(n,t))}function Ka(e,t){for(const n of t)Ha(e,n)}function Ya(e,t,n){const r=n==null?void 0:n.skipItems;for(const o of t.newStepItems)r!=null&&r.has(o)||Ha(e,o)}function Oy(e){return!!e&&typeof e.runCompaction=="function"}function xy(e){const{session:t}=e;if(!t)return;class n{constructor(){S(this,"session");S(this,"hasCallModelInputFilter");S(this,"persistInput");S(this,"originalSnapshot");S(this,"filteredSnapshot");S(this,"pendingWriteCounts");S(this,"persistedInput",!1);S(this,"setPreparedItems",o=>{const s=o??[];this.originalSnapshot=s.map(i=>structuredClone(i)),this.pendingWriteCounts=new Map;for(const i of s){const u=Fe(i);this.pendingWriteCounts.set(u,(this.pendingWriteCounts.get(u)??0)+1)}});S(this,"recordTurnItems",(o,s)=>{const i=this.pendingWriteCounts;if(s!==void 0){if(!i){this.filteredSnapshot=Ey(s);return}const u=Py({pendingCounts:i,sourceItems:o,filteredItems:s,existingSnapshot:this.filteredSnapshot});u!==void 0&&(this.filteredSnapshot=u);return}this.filteredSnapshot=Ry({pendingCounts:i,sourceItems:o,existingSnapshot:this.filteredSnapshot})});S(this,"getItemsForPersistence",()=>{if(this.filteredSnapshot!==void 0)return this.filteredSnapshot;if(!this.hasCallModelInputFilter)return this.originalSnapshot});S(this,"buildPersistInputOnce",o=>{if(!this.session||o)return;const s=this.persistInput??Xa;return async()=>{if(this.persistedInput)return;const i=this.getItemsForPersistence();!i||i.length===0||(this.persistedInput=!0,await s(this.session,i))}});this.session=e.session,this.hasCallModelInputFilter=e.hasCallModelInputFilter,this.persistInput=e.persistInput,this.originalSnapshot=e.resumingFromState?[]:void 0,this.filteredSnapshot=void 0,this.pendingWriteCounts=e.resumingFromState?new Map:void 0}}return new n}function Ey(e){return e.map(t=>structuredClone(t))}function Cy(e){const t=new WeakMap;for(const n of e){if(!n||typeof n!="object")continue;const r=(t.get(n)??0)+1;t.set(n,r)}return t}function Py(e){const{pendingCounts:t,sourceItems:n,filteredItems:r,existingSnapshot:o}=e,s=[],i=Cy(n),u=()=>{for(const[a,l]of t)if(l>0)return t.set(a,l-1),!0;return!1};for(let a=0;a<r.length;a++){const l=r[a];if(!l)continue;let d=!1;const c=n[a];if(c&&typeof c=="object"){const y=(i.get(c)??0)-1;if(i.set(c,y),y>0)continue;const b=Fe(c),_=t.get(b)??0;if(_>0){t.set(b,_-1),s.push(structuredClone(l)),d=!0;continue}}const h=Fe(l),m=t.get(h)??0;if(m>0){t.set(h,m-1),s.push(structuredClone(l)),d=!0;continue}!c&&u()&&(s.push(structuredClone(l)),d=!0),!d&&!c&&o===void 0&&s.push(structuredClone(l))}return s.length>0||o===void 0?s:o}function Ry(e){const{pendingCounts:t,sourceItems:n,existingSnapshot:r}=e;if(!t){const s=n.filter(i=>!!i).map(i=>structuredClone(i));return s.length>0?s:r===void 0?[]:r}const o=[];for(const s of n){if(!s)continue;const i=Fe(s),u=t.get(i)??0;u<=0||(t.set(i,u-1),o.push(structuredClone(s)))}return o.length>0?o:r===void 0?[]:r}async function $y(e,t,n){const r=n.state,o=r._currentTurnPersistedItemCount??0,s=n.newItems.slice(o);process.env.OPENAI_AGENTS__DEBUG_SAVE_SESSION&&console.debug("saveToSession:newRunItems",s.map(i=>i.type)),await tu({session:e,state:r,newRunItems:s,extraInputItems:t,lastResponseId:n.lastResponseId,alreadyPersistedCount:o})}async function Xa(e,t){if(!e||!t||t.length===0)return;const n=Qa(t);await e.addItems(n)}async function qo(e,t){const n=t.state,r=n._currentTurnPersistedItemCount??0,o=t.newItems.slice(r);await tu({session:e,state:n,newRunItems:o,lastResponseId:t.lastResponseId,alreadyPersistedCount:r})}async function Ny(e,t,n,r){if(!t)return{preparedInput:e,sessionItems:void 0};const o=(r==null?void 0:r.includeHistoryInPreparedInput)??!0,s=(r==null?void 0:r.preserveDroppedNewItems)??!1,i=await t.getItems(),u=Pr(e);if(!n)return{preparedInput:o?[...i,...u]:u,sessionItems:u};const a=i.slice(),l=u.slice(),d=await n(i,u);if(!Array.isArray(d))throw new Y("Session input callback must return an array of AgentInputItem objects.");const c=ru(a),h=ru(l),m=Io(a),y=Io(l),b=[];for(const g of d){const v=Fe(g);if(Rr(y,g)){ou(h,v),b.push(g);continue}if(Rr(m,g)){ou(c,v);continue}const w=c.get(v)??0;if(w>0){c.set(v,w-1);continue}const O=h.get(v)??0;if(O>0){h.set(v,O-1),b.push(g);continue}b.push(g)}const _=o?d:b.length>0?b:s?l:[];return s&&b.length===0&&l.length>0&&R.warn("sessionInputCallback dropped all new inputs in a server-managed conversation; original turn inputs were restored to avoid losing the API delta. Keep at least one new item or omit conversationId if you intended to drop them."),{preparedInput:_,sessionItems:b}}function Qa(e){return e.map(t=>Wo(Vo(t)))}function Wo(e,t={}){if(e==null)return e;const n=jm(e);if(n)return zy(n,t.mediaType);if(Array.isArray(e))return e.map(i=>Wo(i,t));if(!eu(e))return e;const r=e,o={},s=typeof r.mediaType=="string"&&r.mediaType.length>0?r.mediaType:t.mediaType;for(const[i,u]of Object.entries(r)){const a=i==="data"||i==="fileData"?{mediaType:s}:t;o[i]=Wo(u,a)}return o}function zy(e,t){const n=lt(e);return`data:${t&&!t.startsWith("data:")?t:"text/plain"};base64,${n}`}function eu(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}function Vo(e){if(e==null)return e;if(Array.isArray(e))return e.map(s=>Vo(s));if(!eu(e))return e;const t=e,n={},o=typeof t.type=="string"&&t.type.length>0&&Dy(t.type);for(const[s,i]of Object.entries(t))o&&s==="id"||(n[s]=Vo(i));return n}function Dy(e){switch(e){case"function_call":case"function_call_result":return!0;default:return!1}}async function tu(e){const{session:t,state:n,newRunItems:r,extraInputItems:o=[],lastResponseId:s,alreadyPersistedCount:i}=e;if(!t)return;const u=[...o,...na(r)];if(u.length===0){n._currentTurnPersistedItemCount=i+r.length,await nu(t,s,n);return}const a=Qa(u);await t.addItems(a),await nu(t,s,n),n._currentTurnPersistedItemCount=i+r.length}async function nu(e,t,n){var u,a;if(!Oy(e))return;const r=((u=n._lastModelSettings)==null?void 0:u.store)??((a=n._currentAgent.modelSettings)==null?void 0:a.store),o=typeof t>"u"&&typeof r>"u"?void 0:{...typeof t>"u"?{}:{responseId:t},...typeof r>"u"?{}:{store:r}},s=await e.runCompaction(o);if(!s)return;const i=s.usage;n._context.usage.add(new Nn({requests:1,inputTokens:i.inputTokens,outputTokens:i.outputTokens,totalTokens:i.totalTokens,inputTokensDetails:i.inputTokensDetails,outputTokensDetails:i.outputTokensDetails,requestUsageEntries:[i]}))}function ru(e){const t=new Map;for(const n of e){const r=Fe(n);t.set(r,(t.get(r)??0)+1)}return t}function ou(e,t){const n=(e.get(t)??0)-1;n<=0?e.delete(t):e.set(t,n)}function su(e){if(e.type!=="message"||e.role!=="assistant")return;const t=e.content[e.content.length-1];if(t.type==="output_text")return t.text}function Zy(e){return e.output.length===0?"":su(e.output[e.output.length-1])||""}function iu(e){return e.behavior??{type:"allow"}}async function au({guardrails:e,context:t,agent:n,toolCall:r,onResult:o}){const s=e??[];for(const i of s){const u=await i.run({context:t,agent:n,toolCall:r}),a=iu(u),l={guardrail:{type:"tool_input",name:i.name},output:{...u,behavior:a}};if(o==null||o(l),a.type==="rejectContent")return{type:"reject",message:a.message};if(a.type==="throwException")throw new nl(`Tool input guardrail triggered: ${i.name}`,l)}return{type:"allow"}}async function uu({guardrails:e,context:t,agent:n,toolCall:r,toolOutput:o,onResult:s}){const i=e??[];let u=o;for(const a of i){const l=await a.run({context:t,agent:n,toolCall:r,output:o}),d=iu(l),c={guardrail:{type:"tool_output",name:a.name},output:{...l,behavior:d}};if(s==null||s(c),d.type==="rejectContent"){u=d.message;break}if(d.type==="throwException")throw new rl(`Tool output guardrail triggered: ${a.name}`,c)}return u}const cu="Tool execution was not approved.";function Dn(e,t){const n=Vy(t);if(n){const r=n.map(Hy);return{type:"function_call_result",name:e.name,callId:e.callId,status:"completed",output:r}}return{type:"function_call_result",name:e.name,callId:e.callId,status:"completed",output:{type:"text",text:ot(t)}}}async function lu(e,t,n,r){const o={agent:e,runner:n,state:r};try{return await Promise.all(t.map(async i=>{const u=My(i);if(!u.success)return Fy(o,i,u.error);const a=await Uy(o,i,u.args);return a!=="approved"?a:Gy(o,i)}))}catch(s){throw new tl(`Failed to run function tools: ${s}`,s,r)}}function My(e){try{let t=e.toolCall.arguments;return e.tool.parameters&&(It(e.tool.parameters)?t=e.tool.parameters.parse(t):t=JSON.parse(t)),{success:!0,args:t}}catch(t){return R.debug(`Failed to parse tool arguments for ${e.tool.name}: ${t}`),{success:!1,error:t}}}function jy(e,t){return{type:"function_approval",tool:t.tool,runItem:new pe(t.toolCall,e.agent)}}function Fy(e,t,n){const r=`An error occurred while parsing tool arguments. Please try again with valid JSON. Error: ${n.message}`;return{type:"function_output",tool:t.tool,output:r,runItem:new Ue(Dn(t.toolCall,r),e.agent,r)}}async function Ly(e,t){const{agent:n}=e;return Ia(async r=>{const o="Tool execution was not approved.";return r.setError({message:o,data:{tool_name:t.tool.name,error:`Tool execution for ${t.toolCall.callId} was manually rejected by user.`}}),r.spanData.output=o,{type:"function_output",tool:t.tool,output:o,runItem:new Ue(Dn(t.toolCall,o),n,o)}},{data:{name:t.tool.name}})}async function Uy(e,t,n){const{state:r}=e;if(!await t.tool.needsApproval(r._context,n,t.toolCall.callId))return"approved";const s=r._context.isToolApproved({toolName:t.tool.name,callId:t.toolCall.callId});return s===!1?(r.clearPendingAgentToolRun(t.tool.name,t.toolCall.callId),await Ly(e,t)):s!==!0?jy(e,t):"approved"}async function Gy(e,t){const{agent:n,runner:r,state:o}=e;return Ia(async s=>{r.config.traceIncludeSensitiveData&&(s.spanData.input=t.toolCall.arguments);try{const i=await au({guardrails:t.tool.inputGuardrails,context:o._context,agent:n,toolCall:t.toolCall,onResult:c=>{o._toolInputGuardrailResults.push(c)}});Lr(r,o._context,n,t.tool,t.toolCall);let u;if(i.type==="reject")u=i.message;else{const c=o.getPendingAgentToolRun(t.tool.name,t.toolCall.callId);u=await t.tool.invoke(o._context,t.toolCall.arguments,{toolCall:t.toolCall,resumeState:c}),u=await uu({guardrails:t.tool.outputGuardrails,context:o._context,agent:n,toolCall:t.toolCall,toolOutput:u,onResult:h=>{o._toolOutputGuardrailResults.push(h)}})}const a=ot(u);Zn(r,o._context,n,t.tool,a,t.toolCall),r.config.traceIncludeSensitiveData&&(s.spanData.output=a);const l={type:"function_output",tool:t.tool,output:u,runItem:new Ue(Dn(t.toolCall,u),n,u)},d=b_(t.toolCall);if(d){l.agentRunResult=d;const c=d.interruptions;c.length>0?(l.interruptions=c,o.setPendingAgentToolRun(t.tool.name,t.toolCall.callId,d.state.toString())):o.clearPendingAgentToolRun(t.tool.name,t.toolCall.callId)}return l}catch(i){s.setError({message:"Error running tool",data:{tool_name:t.tool.name,error:String(i)}});const u=String(i);throw Zn(r,o._context,n,t.tool,u,t.toolCall),i}},{data:{name:t.tool.name}})}async function Jy(e,t){const n=t.action;let r;switch(n.type){case"click":await e.click(n.x,n.y,n.button);break;case"double_click":await e.doubleClick(n.x,n.y);break;case"drag":await e.drag(n.path.map(o=>[o.x,o.y]));break;case"keypress":await e.keypress(n.keys);break;case"move":await e.move(n.x,n.y);break;case"screenshot":r=await e.screenshot();break;case"scroll":await e.scroll(n.x,n.y,n.scroll_x,n.scroll_y);break;case"type":await e.type(n.text);break;case"wait":await e.wait();break}if(typeof r<"u"||typeof e.screenshot=="function"&&(r=await e.screenshot(),typeof r<"u"))return r;throw new Error("Computer does not implement screenshot()")}function pu(e){if(e instanceof Error)return e.message||e.toString();try{return JSON.stringify(e)}catch{return String(e)}}async function By(e){const{runContext:t,toolName:n,callId:r,approvalItem:o,needsApproval:s,onApproval:i}=e;if(!s)return"approved";if(i){const a=await i(t,o);a.approve===!0?t.approveTool(o):a.approve===!1&&t.rejectTool(o)}const u=t.isToolApproved({toolName:n,callId:r});return u===!0?"approved":u===!1?"rejected":"pending"}async function du(e){const{runContext:t,toolName:n,callId:r,approvalItem:o,needsApproval:s,onApproval:i,buildRejectionItem:u}=e,a=await By({runContext:t,toolName:n,callId:r,approvalItem:o,needsApproval:s,onApproval:i});return a==="rejected"?{status:"rejected",item:u()}:a==="pending"?{status:"pending",item:o}:{status:"approved"}}function Lr(e,t,n,r,o){e.emit("agent_tool_start",t,n,r,{toolCall:o}),typeof n.emit=="function"&&n.emit("agent_tool_start",t,r,{toolCall:o})}function Zn(e,t,n,r,o,s){e.emit("agent_tool_end",t,n,r,o,{toolCall:s}),typeof n.emit=="function"&&n.emit("agent_tool_end",t,r,o,{toolCall:s})}async function fu(e,t,n,r,o=void 0){const s=o??R,i=[];for(const u of t){const a=u.shell,l=u.toolCall,d=new pe(l,e,a.name),c=await du({runContext:r,toolName:a.name,callId:l.callId,approvalItem:d,needsApproval:await a.needsApproval(r,l.action,l.callId),onApproval:a.onApproval,buildRejectionItem:()=>{const _=cu,g={stdout:"",stderr:_,outcome:{type:"exit",exitCode:null}};return new Ue({type:"shell_call_output",callId:l.callId,output:[g]},e,_)}});if(c.status!=="approved"){i.push(c.item);continue}Lr(n,r,e,a,l);let h;const m={};let y;try{const _=await a.shell.run(l.action);h=_.output??[],_.providerData&&Object.assign(m,_.providerData),typeof _.maxOutputLength=="number"&&(y=_.maxOutputLength)}catch(_){h=[{stdout:"",stderr:pu(_),outcome:{type:"exit",exitCode:null}}],s.error("Failed to execute shell action:",_)}h=h??[],Zn(n,r,e,a,JSON.stringify(h),l);const b={type:"shell_call_output",callId:l.callId,output:h??[]};typeof y=="number"&&(b.maxOutputLength=y),Object.keys(m).length>0&&(b.providerData=m),i.push(new Ue(b,e,b.output))}return i}async function hu(e,t,n,r,o=void 0){const s=o??R,i=[];for(const u of t){const a=u.applyPatch,l=u.toolCall,d=new pe(l,e,a.name),c=await du({runContext:r,toolName:a.name,callId:l.callId,approvalItem:d,needsApproval:await a.needsApproval(r,l.operation,l.callId),onApproval:a.onApproval,buildRejectionItem:()=>{const b=cu;return new Ue({type:"apply_patch_call_output",callId:l.callId,status:"failed",output:b},e,b)}});if(c.status!=="approved"){i.push(c.item);continue}Lr(n,r,e,a,l);let h="completed",m="";try{let b;switch(l.operation.type){case"create_file":b=await a.editor.createFile(l.operation);break;case"update_file":b=await a.editor.updateFile(l.operation);break;case"delete_file":b=await a.editor.deleteFile(l.operation);break;default:throw new Error("Unsupported apply_patch operation")}b&&typeof b.status=="string"&&(h=b.status),b&&typeof b.output=="string"&&(m=b.output)}catch(b){h="failed",m=pu(b),s.error("Failed to execute apply_patch operation:",b)}Zn(n,r,e,a,m,l);const y={type:"apply_patch_call_output",callId:l.callId,status:h};m&&(y.output=m),i.push(new Ue(y,e,m))}return i}async function mu(e,t,n,r,o=void 0){const s=o??R,i=[];for(const u of t){const a=u.toolCall;Lr(n,r,e,u.computer,a);let l;try{const h=await Vs({tool:u.computer,runContext:r});l=await Jy(h,a)}catch(h){s.error("Failed to execute computer action:",h),l=""}Zn(n,r,e,u.computer,l,a);const d=l?`data:image/png;base64,${l}`:"",c={type:"computer_call_result",callId:a.callId,output:{type:"computer_screenshot",data:d}};i.push(new Ue(c,e,d))}return i}async function qy(e,t,n,r,o,s,i,u){if(r=[...r],s.length===0)return R.warn("Incorrectly called executeHandoffCalls with no handoffs. This should not happen. Moving on."),new We(t,o,n,r,{type:"next_step_run_again"});if(s.length>1){const l="Multiple handoffs detected, ignoring this one.";for(let d=1;d<s.length;d++)r.push(new Ue(Dn(s[d].toolCall,l),e,l))}const a=s[0];return Mg(async l=>{const d=a.handoff,c=await d.onInvokeHandoff(u,a.toolCall.arguments);if(l.spanData.to_agent=c.name,s.length>1){const m=s.map(y=>y.handoff.agentName);l.setError({message:"Multiple handoffs requested",data:{requested_agents:m}})}r.push(new Lo(Dn(a.toolCall,Aa(c)),e,c)),i.emit("agent_handoff",u,e,c),e.emit("agent_handoff",u,c);const h=d.inputFilter??i.config.handoffInputFilter;if(h){R.debug("Filtering inputs for handoff"),typeof h!="function"&&l.setError({message:"Invalid input filter",data:{details:"not callable"}});const m={inputHistory:Array.isArray(t)?[...t]:t,preHandoffItems:[...n],newItems:[...r],runContext:u},y=h(m);t=y.inputHistory,n=y.preHandoffItems,r=y.newItems}return new We(t,o,n,r,{type:"next_step_handoff",newAgent:c})},{data:{from_agent:e.name}})}const Ur={isFinalOutput:!1,isInterrupted:void 0};function Ho(e,t=[]){const n=[];for(const r of t)r instanceof pe&&n.push(r);for(const r of e)if(r.runItem instanceof pe&&n.push(r.runItem),r.type==="function_output"){if(Array.isArray(r.interruptions))n.push(...r.interruptions);else if(r.agentRunResult){const o=r.agentRunResult.interruptions;o.length>0&&n.push(...o)}}return n}async function Wy(e,t,n,r=[]){if(t.length===0&&r.length===0)return Ur;const o=Ho(t,r);if(o.length>0)return{isFinalOutput:!1,isInterrupted:!0,interruptions:o};if(e.toolUseBehavior==="run_llm_again")return Ur;const s=t[0];if(e.toolUseBehavior==="stop_on_first_tool")return(s==null?void 0:s.type)==="function_output"?{isFinalOutput:!0,isInterrupted:void 0,finalOutput:ot(s.output)}:Ur;const i=e.toolUseBehavior;if(typeof i=="object"){const u=t.find(a=>i.stopAtToolNames.includes(a.tool.name));return(u==null?void 0:u.type)==="function_output"?{isFinalOutput:!0,isInterrupted:void 0,finalOutput:ot(u.output)}:Ur}if(typeof i=="function")return i(n._context,t);throw new Y(`Invalid toolUseBehavior: ${i}`,n)}function Vy(e){if(Array.isArray(e)){const n=[];for(const r of e){const o=gu(r);if(!o)return null;n.push(o)}return n}const t=gu(e);return t?[t]:null}function gu(e){if(!xt(e))return null;const t=e.type;if(t==="text"&&typeof e.text=="string"){const n={type:"text",text:e.text};return xt(e.providerData)&&(n.providerData=e.providerData),n}if(t==="image"){const n={type:"image"};let r,o;const s=he(e.mediaType)?e.mediaType:void 0,i=e.image;if(typeof i=="string"&&i.length>0)r=i;else if(xt(i)){const u=i,a=he(u.mediaType)?u.mediaType:s;if(he(u.url)?r=u.url:(he(u.data)||u.data instanceof Uint8Array&&u.data.length>0)&&(r=Gr(u.data,a)),!r){const l=he(u.fileId)&&u.fileId||he(u.id)&&u.id||void 0;l&&(o=l)}}if(!r&&typeof e.imageUrl=="string"&&e.imageUrl.length>0&&(r=e.imageUrl),!o&&typeof e.fileId=="string"&&e.fileId.length>0&&(o=e.fileId),!r&&typeof e.data=="string"&&e.data.length>0?r=s?Gr(e.data,s):e.data:!r&&e.data instanceof Uint8Array&&e.data.length>0&&(r=Gr(e.data,s)),typeof e.detail=="string"&&e.detail.length>0&&(n.detail=e.detail),r)n.image=r;else if(o)n.image={fileId:o};else return null;return xt(e.providerData)&&(n.providerData=e.providerData),n}if(t==="file"){const n=Ky(e);if(!n)return null;const r={type:"file",file:n};return xt(e.providerData)&&(r.providerData=e.providerData),r}return null}function Hy(e){if(e.type==="text"){const n={type:"input_text",text:e.text};return e.providerData&&(n.providerData=e.providerData),n}if(e.type==="image"){const n={type:"input_image"};if(typeof e.detail=="string"&&e.detail.length>0&&(n.detail=e.detail),typeof e.image=="string"&&e.image.length>0)n.image=e.image;else if(xt(e.image)){const r=e.image,o=he(r.mediaType)?r.mediaType:void 0;if(he(r.url))n.image=r.url;else if(he(r.data))n.image=o&&!r.data.startsWith("data:")?nn(r.data,o):r.data;else if(r.data instanceof Uint8Array&&r.data.length>0){const s=lt(r.data);n.image=nn(s,o)}else{const s=he(r.fileId)&&r.fileId||he(r.id)&&r.id||void 0;s&&(n.image={id:s})}}return e.providerData&&(n.providerData=e.providerData),n}if(e.type==="file"){const n={type:"input_file"},r=e.file;if(typeof r=="string")n.file=r;else if(r&&typeof r=="object"){const o=r;if("data"in o&&o.data){const s=o.mediaType??"text/plain";if(typeof o.data=="string")n.file=nn(o.data,s);else{const i=lt(o.data);n.file=nn(i,s)}}else if(typeof o.url=="string"&&o.url.length>0)n.file={url:o.url};else{const s=typeof o.id=="string"&&o.id.length>0&&o.id||(typeof o.fileId=="string"&&o.fileId.length>0?o.fileId:void 0);s&&(n.file={id:s})}typeof o.filename=="string"&&o.filename.length>0&&(n.filename=o.filename)}return e.providerData&&(n.providerData=e.providerData),n}return e}function Ky(e){const t=e.file;if(typeof t=="string"&&t.length>0)return t;const n=Yy(t);if(n)return n;const r=Xy(e);return r||null}function Yy(e){if(!xt(e))return null;if("data"in e&&e.data!==void 0){const n=e.data,r=typeof n=="string"&&n.length>0,o=n instanceof Uint8Array&&n.length>0;return!r&&!o||!he(e.mediaType)||!he(e.filename)?null:{data:typeof n=="string"?n:new Uint8Array(n),mediaType:e.mediaType,filename:e.filename}}if(he(e.url)){const n={url:e.url};return he(e.filename)&&(n.filename=e.filename),n}const t=he(e.id)&&e.id||he(e.fileId)&&e.fileId;if(t){const n={id:t};return he(e.filename)&&(n.filename=e.filename),n}return null}function Xy(e){const t=typeof e.filename=="string"&&e.filename.length>0?e.filename:void 0,n=typeof e.mediaType=="string"&&e.mediaType.length>0?e.mediaType:void 0;if(typeof e.fileData=="string"&&e.fileData.length>0)return!n||!t?null:{data:e.fileData,mediaType:n,filename:t};if(e.fileData instanceof Uint8Array&&e.fileData.length>0)return!n||!t?null:{data:new Uint8Array(e.fileData),mediaType:n,filename:t};if(typeof e.fileUrl=="string"&&e.fileUrl.length>0){const r={url:e.fileUrl};return t&&(r.filename=t),r}if(typeof e.fileId=="string"&&e.fileId.length>0){const r={id:e.fileId};return t&&(r.filename=t),r}return null}function xt(e){return typeof e=="object"&&e!==null}function he(e){return typeof e=="string"&&e.length>0}function Gr(e,t){if(typeof e=="string")return t&&!e.startsWith("data:")?nn(e,t):e;const n=lt(e);return nn(n,t)}function nn(e,t){return t?`data:${t};base64,${e}`:e}async function yu({requests:e,agent:t,state:n,functionResults:r,appendIfNew:o,resolveApproval:s}){const i=new Set,u=new Set;for(const a of e){const l=a.requestItem.rawItem;if(l.type!=="hosted_tool_call")continue;const d=l.providerData;if(!d)continue;const c=a.mcpTool.providerData,h=l.id??d.id;if(c!=null&&c.on_approval){const y=await c.on_approval(n._context,a.requestItem),b={approve:y.approve,approval_request_id:h??d.id,reason:y.reason};o(new Ot({type:"hosted_tool_call",name:"mcp_approval_response",providerData:b},t));continue}const m=typeof s=="function"?s(l):void 0;if(typeof m<"u"&&h){const y={approve:m,approval_request_id:h,reason:void 0};o(new Ot({type:"hosted_tool_call",name:"mcp_approval_response",providerData:y},t));continue}r.push({type:"hosted_mcp_tool_approval",tool:a.mcpTool,runItem:a.requestItem}),o(a.requestItem),i.add(a.requestItem),h&&u.add(h)}return{pendingApprovals:i,pendingApprovalIds:u}}const Qy=["function_call","hosted_tool_call","shell_call","apply_patch_call"];function Ko(e){var t;return e.rawItem.type==="hosted_tool_call"&&((t=e.rawItem.providerData)==null?void 0:t.type)==="mcp_approval_request"}function e_(e,t){if(Ko(e))return"pending";const n=e.rawItem,r=e.toolName??("name"in n&&typeof n.name=="string"?n.name:void 0),o="callId"in n&&typeof n.callId=="string"?n.callId:"id"in n&&typeof n.id=="string"?n.id:void 0;if(!r||!o)return"pending";const s=t._context.isToolApproved({toolName:r,callId:o});return s===!0?"approved":s===!1?"rejected":"pending"}function t_(e){if(!e||typeof e!="object"||!("rawItem"in e))return!1;const t=e.rawItem;if(!t||typeof t!="object")return!1;const n=t.type;return Qy.includes(n)}function Jr(e){const t=e.rawItem;if(!t)return;if(t.type==="function_call"&&t.callId)return`function_call:${t.callId}`;if("callId"in t&&t.callId)return`${t.type}:${t.callId}`;const n="id"in t?t.id:void 0;if(n)return`${t.type}:${n}`;const r=typeof t.providerData=="object"&&t.providerData?t.providerData:void 0;if(r!=null&&r.id)return`${t.type}:provider:${r.id}`;const o="agent"in e&&e.agent?e.agent.name:"";try{return`${o}:${t.type}:${JSON.stringify(t)}`}catch{return`${o}:${t.type}`}}function _u(e){const t=new Set(e),n=new Set;for(const r of e)if(r instanceof pe){const o=Jr(r);o&&n.add(o)}return{seenItems:t,seenApprovalIdentities:n}}function vu(e,t,n){if(!n.seenItems.has(e)){if(e instanceof pe){const r=Jr(e);if(r){if(n.seenApprovalIdentities.has(r))return;n.seenApprovalIdentities.add(r)}}n.seenItems.add(e),t.push(e)}}function n_(e,t){const n=new Set;for(const r of e){if(!(r instanceof pe))continue;const o=r.rawItem;!o||o.type!==t||("callId"in o&&o.callId?n.add(o.callId):"id"in o&&o.id&&n.add(o.id))}return n}function Br(e,t){const n=new Set;for(const r of e){const o=r.rawItem;if(!o||typeof o!="object"||o.type!==t)continue;const s=o.callId;typeof s=="string"&&n.add(s)}return n}function wu(e,t,n){const r=n_(e,n);return r.size===0?[]:t.filter(o=>typeof o.toolCall.callId=="string"&&r.has(o.toolCall.callId))}function Yo(e,t){return e.filter(n=>{const r=n.toolCall.callId,o=typeof r=="string";return!(t.allowedCallIds&&t.allowedCallIds.size>0&&(!o||!t.allowedCallIds.has(r))||o&&t.completedCallIds.has(r))})}function bu(e,t=160){const n=e.trim();return n?n.length<=t?n:`${n.slice(0,t-3)}...`:"Schema validation failed."}function r_(e){try{if(e instanceof vh){const t=e.issues[0];if(t){const n=Array.isArray(t.path)?t.path:[],r=n.length>0?n.map(s=>String(s)).join("."):"(root)",o=bu(t.message??"");return`Invalid output type: final assistant output failed schema validation at "${r}" (${o}).`}return"Invalid output type: final assistant output failed schema validation."}if(e instanceof Error&&e.message)return`Invalid output type: ${bu(e.message)}`}catch{}return"Invalid output type: final assistant output did not match the expected schema."}async function o_(e,t,n,r,o,s,i){const u=n.filter(z=>z instanceof pe&&"callId"in z.rawItem&&z.rawItem.type==="function_call").map(z=>z.rawItem.callId),a=Br(n,"function_call_result"),l=Br(n,"shell_call_output"),d=Br(n,"apply_patch_call_output"),c=i.getInterruptions().filter(t_),h=new Set;for(const z of c){if(!(z instanceof pe)||Ko(z))continue;const M=z.rawItem;if(M.type==="function_call"&&M.callId&&a.has(M.callId)||M.type==="shell_call"&&M.callId&&l.has(M.callId)||M.type==="apply_patch_call"&&M.callId&&d.has(M.callId))continue;const ie=Jr(z);ie&&e_(z,i)==="pending"&&h.add(ie)}const m=o.functions.filter(z=>{const M=z.toolCall.callId;if(!M)return!1;const ie=u.includes(M),Pe=i.hasPendingAgentToolRun(z.tool.name,M);return!ie&&!Pe?!1:!a.has(M)}),y=Yo(wu(n,o.shellActions,"shell_call"),{completedCallIds:l}),b=Yo(o.computerActions,{completedCallIds:Br(n,"computer_call_result")}),_=Yo(wu(n,o.applyPatchActions,"apply_patch_call"),{completedCallIds:d}),g=await lu(e,m,s,i),v=b.length>0?await mu(e,b,s,i._context):[],w=y.length>0?await fu(e,y,s,i._context):[],O=_.length>0?await hu(e,_,s,i._context):[],x=[],C=_u(n),$=z=>vu(z,x,C);for(const z of g)z.type==="function_output"&&Array.isArray(z.interruptions)&&z.interruptions.length>0||$(z.runItem);for(const z of v)$(z);for(const z of w)$(z);for(const z of O)$(z);const q=Ho([],[...w,...O]),G=await yu({requests:o.mcpApprovalRequests,agent:e,state:i,functionResults:g,appendIfNew:$,resolveApproval:z=>{const M=z.providerData,ie=z.id??(M==null?void 0:M.id);if(ie)return i._context.isToolApproved({toolName:z.name,callId:ie})}}),te=n.filter(z=>{var ie;if(!(z instanceof pe))return!0;if(Ko(z)){if(G.pendingApprovals.has(z))return!0;const Pe=z.rawItem.id??((ie=z.rawItem.providerData)==null?void 0:ie.id);return Pe?G.pendingApprovalIds.has(Pe):!1}const M=Jr(z);return M?h.has(M):!0}),ze=new Set;for(const z of te)z instanceof pe&&ze.add(z);let Ae=0;for(const z of n)z instanceof pe&&!ze.has(z)&&Ae++;Ae>0&&i.rewindTurnPersistence(Ae);const De=await Su({agent:e,runner:s,state:i,functionResults:g,originalInput:t,newResponse:r,preStepItems:te,newItems:x,additionalInterruptions:q});return De||new We(t,r,te,x,{type:"next_step_run_again"})}async function Iu(e,t,n,r,o,s,i){const u=n,a=[],l=_u(n),d=O=>vu(O,a,l);for(const O of o.newItems)d(O);const[c,h,m,y]=await Promise.all([lu(e,o.functions,s,i),mu(e,o.computerActions,s,i._context),fu(e,o.shellActions,s,i._context),hu(e,o.applyPatchActions,s,i._context)]);for(const O of c)O.type==="function_output"&&Array.isArray(O.interruptions)&&O.interruptions.length>0||d(O.runItem);for(const O of h)d(O);for(const O of m)d(O);for(const O of y)d(O);const b=Ho([],[...m,...y]);if(o.mcpApprovalRequests.length>0&&await yu({requests:o.mcpApprovalRequests,agent:e,state:i,functionResults:c,appendIfNew:d,resolveApproval:O=>{const x=O.providerData,C=O.id??(x==null?void 0:x.id);if(C)return i._context.isToolApproved({toolName:O.name,callId:C})}}),o.handoffs.length>0)return await qy(e,t,u,a,r,o.handoffs,s,i._context);const _=await Su({agent:e,runner:s,state:i,functionResults:c,originalInput:t,newResponse:r,preStepItems:u,newItems:a,additionalInterruptions:b});if(_)return _;if(o.hasToolsOrApprovalsToRun())return new We(t,r,u,a,{type:"next_step_run_again"});const g=a.filter(O=>O instanceof zn),v=g.length>0?su(g[g.length-1].rawItem):void 0;if(typeof v>"u")return new We(t,r,u,a,{type:"next_step_run_again"});if(!(c.some(O=>O.runItem instanceof pe)||b.length>0)){if(e.outputType==="text")return new We(t,r,u,a,{type:"next_step_final_output",output:v});if(e.outputType!=="text"&&v){const{parser:O}=to(e.outputType,"final_output"),[x]=await ce(()=>O(v));if(x){const C=r_(x);throw At({message:C,data:{error:String(x)}}),new Oe(C)}return new We(t,r,u,a,{type:"next_step_final_output",output:v})}}return new We(t,r,u,a,{type:"next_step_run_again"})}async function Su({agent:e,runner:t,state:n,functionResults:r,originalInput:o,newResponse:s,preStepItems:i,newItems:u,additionalInterruptions:a=[]}){const l=await Wy(e,r,n,a);return l.isFinalOutput?new We(o,s,i,u,{type:"next_step_final_output",output:l.finalOutput}):l.isInterrupted?new We(o,s,i,u,{type:"next_step_interruption",data:{interruptions:l.interruptions}}):null}function s_(e){return!!e&&typeof e=="object"&&"environment"in e&&"dimensions"in e}function i_(e){if(e.type==="function")return{type:"function",name:e.name,description:e.description,parameters:e.parameters,strict:e.strict};if(e.type==="computer"){if(!s_(e.computer))throw new Y("Computer tool is not initialized for serialization. Call resolveComputer({ tool, runContext }) first (for example, when building a model payload outside Runner.run).");return{type:"computer",name:e.name,environment:e.computer.environment,dimensions:e.computer.dimensions}}return e.type==="shell"?{type:"shell",name:e.name}:e.type==="apply_patch"?{type:"apply_patch",name:e.name}:{type:"hosted_tool",name:e.name,providerData:e.providerData}}function a_(e){return{toolName:e.toolName,toolDescription:e.toolDescription,inputJsonSchema:e.inputJsonSchema,strictJsonSchema:e.strictJsonSchema}}function Tu(e,t){return e?!1:t?!0:"enabled_without_data"}function Au(e,t){const n=e.previousSpan?Au(e.previousSpan,t):void 0,r=n??t,o=Le().createSpan({spanId:e.spanId,parentId:e.parentId??void 0,startedAt:e.startedAt??void 0,endedAt:e.endedAt??void 0,data:e.spanData,error:e.error??void 0,tracingApiKey:e.tracingApiKey},r);return o.previousSpan=n,o}function u_(e,t,n){const r=n.traceId!==void 0&&n.traceId!==e.traceId,o=n.tracingApiKey!==void 0&&n.tracingApiKey!==e.tracingApiKey;return n.traceId!==void 0&&(e.traceId=n.traceId),n.workflowName!==void 0&&(e.name=n.workflowName),n.groupId!==void 0&&(e.groupId=n.groupId??null),n.traceMetadata!==void 0&&(e.metadata=n.traceMetadata),n.tracingApiKey!==void 0&&(e.tracingApiKey=n.tracingApiKey),t&&(r||o)?{trace:e,currentSpan:Au(t,e)}:{trace:e,currentSpan:t}}function c_(e){const{agent:t,handoffs:n,tools:r,currentSpan:o}=e,s=o;if(s)return s.spanData.tools=r.map(a=>a.name),s;const i=n.map(a=>a.agentName),u=zg({data:{name:t.name,handoffs:i,tools:r.map(a=>a.name),output_type:t.outputSchemaName}});return u.start(),Po(u),u}async function l_(e){const t=await p_(e);return await d_(t.tools,e._context),e.setCurrentAgentSpan(c_({agent:e._currentAgent,handoffs:t.handoffs,tools:t.tools,currentSpan:e._currentAgentSpan})),{...t,serializedHandoffs:t.handoffs.map(n=>a_(n)),serializedTools:t.tools.map(n=>i_(n)),toolsExplicitlyProvided:e._currentAgent.hasExplicitToolConfig()}}async function p_(e){const t=await e._currentAgent.getEnabledHandoffs(e._context),n=await e._currentAgent.getAllTools(e._context);return{handoffs:t,tools:n}}async function d_(e,t){const n=e.filter(r=>r.type==="computer");n.length!==0&&await Promise.all(n.map(async r=>{await Vs({tool:r,runContext:t})}))}async function ku(e){var b;const{state:t,input:n,generatedItems:r,isResumedState:o,preserveTurnPersistenceOnResume:s,continuingInterruptedTurn:i,serverConversationTracker:u,inputGuardrailDefs:a,guardrailHandlers:l,emitAgentStart:d}=e,c=await l_(t),{isResumingFromInterruption:h}=h_(t,{isResumedState:o,preserveTurnPersistenceOnResume:s,continuingInterruptedTurn:i});if(t._currentTurn>t._maxTurns)throw(b=t._currentAgentSpan)==null||b.setError({message:"Max turns exceeded",data:{max_turns:t._maxTurns}}),new ks(`Max turns (${t._maxTurns}) exceeded`,t);R.debug(`Running agent ${t._currentAgent.name} (turn ${t._currentTurn})`);const{parallelGuardrailPromise:m}=await f_(t,a,h,l),y=u?u.prepareInput(n,r):Tt(n,r);return t._noActiveAgentRun&&(t._currentAgent.emit("agent_start",t._context,t._currentAgent,y),d==null||d(t._context,t._currentAgent,y)),{artifacts:c,turnInput:y,parallelGuardrailPromise:m}}async function f_(e,t,n,r={}){var i;if(e._currentTurn!==1||n)return{};const o=yy(e,t),s=_y(o);return s.blocking.length>0&&await qa(e,s.blocking),s.parallel.length>0?((i=r.onParallelStart)==null||i.call(r),{parallelGuardrailPromise:qa(e,s.parallel).catch(l=>{var d;return(d=r.onParallelError)==null||d.call(r,l),[]})}):{}}function h_(e,t){const n=t.isResumedState&&t.continuingInterruptedTurn,r=t.isResumedState&&e._currentTurnInProgress===!0;return!n&&!r&&(e._currentTurn++,(!t.isResumedState||!t.preserveTurnPersistenceOnResume||e._currentTurnPersistedItemCount>e._generatedItems.length)&&e.resetTurnPersistence()),e._currentTurnInProgress=!0,{isResumingFromInterruption:n}}function Xo(e){const{state:t,turnResult:n,agent:r,toolsUsed:o,resetTurnPersistence:s,onStepItems:i}=e;i==null||i(n),t._toolUseTracker.addToolUse(r,o),t._originalInput=n.originalInput,t._generatedItems=n.generatedItems,s&&n.nextStep.type==="next_step_run_again"&&t.resetTurnPersistence(),t._currentStep=n.nextStep,t._finalOutputSource=n.nextStep.type==="next_step_final_output"?"turn_resolution":void 0}async function Ou(e){var s;const{state:t,runner:n,onStepItems:r}=e,o=await o_(t._currentAgent,t._originalInput,t._generatedItems,t._lastTurnResponse,t._lastProcessedResponse,n,t);return Xo({state:t,turnResult:o,agent:t._currentAgent,toolsUsed:((s=t._lastProcessedResponse)==null?void 0:s.toolsUsed)??[],resetTurnPersistence:!1,onStepItems:r}),o.nextStep.type==="next_step_interruption"?{nextStep:o.nextStep,action:"return_interruption"}:o.nextStep.type==="next_step_run_again"?{nextStep:o.nextStep,action:"rerun_turn"}:{nextStep:o.nextStep,action:"advance_step"}}function xu(e){const{state:t,outcome:n,setContinuingInterruptedTurn:r}=e;switch(n.action){case"return_interruption":return t._currentStep=n.nextStep,{shouldReturn:!0,shouldContinue:!1};case"rerun_turn":return r(!0),t._currentStep=void 0,{shouldReturn:!1,shouldContinue:!0};case"advance_step":return r(!1),t._currentStep=n.nextStep,{shouldReturn:!1,shouldContinue:!1};default:{const o=n.action;throw new Error(`Unhandled interruption outcome: ${o}`)}}}function m_(e,t){return{type:"message",role:"assistant",content:typeof e=="string"?[{type:"output_text",text:e}]:e,status:"completed",providerData:t}}const g_=e=>({input:e._originalInput,newItems:e._generatedItems,history:Tt(e._originalInput,e._generatedItems),output:Tt([],e._generatedItems),rawResponses:e._modelResponses,lastAgent:e._currentAgent,state:e}),y_=(e,t)=>e.outputType==="text"?String(t):JSON.stringify(t),__=(e,t)=>new zn(m_(t),e),Eu=async({error:e,state:t,errorHandlers:n,outputGuardrailDefs:r,emitAgentEnd:o,streamResult:s})=>{if(!(e instanceof ks))return;const i=(n==null?void 0:n.maxTurns)??(n==null?void 0:n.default);if(!i)return;const u=await i({error:e,context:t._context,runData:g_(t)});if(!u)return;const a=u.includeInHistory!==!1,l=y_(t._currentAgent,u.finalOutput);t._lastTurnResponse=void 0,t._lastProcessedResponse=void 0;const d=__(t._currentAgent,l);return a&&t._generatedItems.push(d),s&&Ka(s,[d]),t._currentStep={type:"next_step_final_output",output:l},t._finalOutputSource="error_handler",await Jo(t,r,l),t._currentTurnInProgress=!1,o(t._context,t._currentAgent,l),new Zr(t)};class v_ extends Bg{constructor(n={}){var r;super();P(this,Ce);S(this,"config");S(this,"traceOverrides");S(this,"inputGuardrailDefs");S(this,"outputGuardrailDefs");this.config={modelProvider:n.modelProvider??ny(),model:n.model,modelSettings:n.modelSettings,handoffInputFilter:n.handoffInputFilter,inputGuardrails:n.inputGuardrails,outputGuardrails:n.outputGuardrails,tracingDisabled:n.tracingDisabled??!1,traceIncludeSensitiveData:n.traceIncludeSensitiveData??!0,workflowName:n.workflowName??"Agent workflow",traceId:n.traceId,groupId:n.groupId,traceMetadata:n.traceMetadata,tracing:n.tracing,sessionInputCallback:n.sessionInputCallback,callModelInputFilter:n.callModelInputFilter},this.traceOverrides={...n.traceId!==void 0?{traceId:n.traceId}:{},...n.workflowName!==void 0?{workflowName:n.workflowName}:{},...n.groupId!==void 0?{groupId:n.groupId}:{},...n.traceMetadata!==void 0?{traceMetadata:n.traceMetadata}:{},...((r=n.tracing)==null?void 0:r.apiKey)!==void 0?{tracingApiKey:n.tracing.apiKey}:{}},this.inputGuardrailDefs=(n.inputGuardrails??[]).map(xa),this.outputGuardrailDefs=(n.outputGuardrails??[]).map(Mo)}async run(n,r,o={stream:!1,context:void 0}){var C;const s=o??{stream:!1,context:void 0},i=s.sessionInputCallback??this.config.sessionInputCallback,u=s.callModelInputFilter??this.config.callModelInputFilter,a=!!u,l=s.tracing??this.config.tracing,d={...this.traceOverrides,...((C=s.tracing)==null?void 0:C.apiKey)!==void 0?{tracingApiKey:s.tracing.apiKey}:{}},c={...s,sessionInputCallback:i,callModelInputFilter:u},h=r instanceof He,m=h&&r._currentTurnInProgress===!0,y=h?r._conversationId:void 0,b=h?r._previousResponseId:void 0,_=!!(c.conversationId??y)||!!(c.previousResponseId??b),g=c.session,v=xy({session:g,hasCallModelInputFilter:a,persistInput:Xa,resumingFromState:h});let w=r;if(!(w instanceof He)){const $=await Ny(w,g,i,{includeHistoryInPreparedInput:!_,preserveDroppedNewItems:_});if(_&&g){const q=$.sessionItems;q&&q.length>0?w=q:w=$.preparedInput}else w=$.preparedInput;v==null||v.setPreparedItems($.sessionItems)}const O=v==null?void 0:v.buildPersistInputOnce(_),x=async()=>{if(c.stream)return await L(this,Ce,Xu).call(this,n,w,c,O,v==null?void 0:v.recordTurnItems,m);const $=await L(this,Ce,Ku).call(this,n,w,c,v==null?void 0:v.recordTurnItems,m);return v&&!_&&await $y(g,v.getItemsForPersistence(),$),$};if(w instanceof He&&w._trace){const $=u_(w._trace,w._currentAgentSpan,d);return w._trace=$.trace,w._currentAgentSpan=$.currentSpan,Ag(w._trace,async()=>(w._currentAgentSpan&&Po(w._currentAgentSpan),x()))}return kg(async()=>x(),{traceId:this.config.traceId,name:this.config.workflowName,groupId:this.config.groupId,metadata:this.config.traceMetadata,tracingApiKey:l==null?void 0:l.apiKey})}}Ce=new WeakSet,Hu=async function(n){const r=n.model!==void 0&&n.model!==Qe.DEFAULT_MODEL_PLACEHOLDER||this.config.model!==void 0&&this.config.model!==Qe.DEFAULT_MODEL_PLACEHOLDER,o=vy(n.model,this.config.model),s=typeof o=="string"?o:void 0;return{model:typeof o=="string"?await this.config.modelProvider.getModel(o):o,explictlyModelSet:r,resolvedModelName:s}},Ku=async function(n,r,o,s,i){return Ro(async()=>{var m,y,b;const u=r instanceof He,a=u?r:new He(o.context instanceof dt?o.context:new dt(o.context),r,n,o.maxTurns??Ga),l=o.conversationId??(u?a._conversationId:void 0),d=o.previousResponseId??(u?a._previousResponseId:void 0);u||a.setConversationContext(l,d);const c=l||d?new Ja({conversationId:l,previousResponseId:d}):void 0;c&&u&&(c.primeFromState({originalInput:a._originalInput,generatedItems:a._generatedItems,modelResponses:a._modelResponses}),a.setConversationContext(c.conversationId,c.previousResponseId));let h=!1;try{for(;;){if(a._currentStep=a._currentStep??{type:"next_step_run_again"},a._currentStep.type==="next_step_interruption"){if(R.debug("Continuing from interruption"),!a._lastTurnResponse||!a._lastProcessedResponse)throw new Y("No model response found in previous state",a);const g=await Ou({state:a,runner:this}),{shouldReturn:v,shouldContinue:w}=xu({state:a,outcome:g,setContinuingInterruptedTurn:O=>{h=O}});if(v)return new Zr(a);if(w)continue}if(a._currentStep.type==="next_step_run_again"){const g=h;h=!1;const v=Go(),w=a._currentTurn,O=a._currentTurnPersistedItemCount,x=a._generatedItems.length,{artifacts:C,turnInput:$,parallelGuardrailPromise:q}=await ku({state:a,input:a._originalInput,generatedItems:a._generatedItems,isResumedState:u,preserveTurnPersistenceOnResume:i,continuingInterruptedTurn:g,serverConversationTracker:c,inputGuardrailDefs:this.inputGuardrailDefs,guardrailHandlers:{onParallelStart:v.markPending,onParallelError:v.setError},emitAgentStart:(Ae,De,z)=>{this.emit("agent_start",Ae,De,z)}});i&&a._currentTurn>w&&O<=x&&(a._currentTurnPersistedItemCount=O),v.setPromise(q);const G=await L(this,Ce,ls).call(this,a,o,C,$,c,s);v.throwIfError(),a._lastTurnResponse=await G.model.getResponse({systemInstructions:G.modelInput.instructions,prompt:G.prompt,...G.explictlyModelSet?{overridePromptModel:!0}:{},input:G.modelInput.input,previousResponseId:G.previousResponseId,conversationId:G.conversationId,modelSettings:G.modelSettings,tools:G.serializedTools,toolsExplicitlyProvided:G.toolsExplicitlyProvided,outputType:zs(a._currentAgent.outputType),handoffs:G.serializedHandoffs,tracing:Tu(this.config.tracingDisabled,this.config.traceIncludeSensitiveData),signal:o.signal}),c&&c.markInputAsSent(G.sourceItems,{filterApplied:G.filterApplied,allTurnItems:G.turnInput}),a._modelResponses.push(a._lastTurnResponse),a._context.usage.add(a._lastTurnResponse.usage),a._noActiveAgentRun=!1,c==null||c.trackServerItems(a._lastTurnResponse),c&&a.setConversationContext(c.conversationId,c.previousResponseId);const te=Va(a._lastTurnResponse,a._currentAgent,G.tools,G.handoffs);a._lastProcessedResponse=te;const ze=await Iu(a._currentAgent,a._originalInput,a._generatedItems,a._lastTurnResponse,a._lastProcessedResponse,this,a);Xo({state:a,turnResult:ze,agent:a._currentAgent,toolsUsed:((m=a._lastProcessedResponse)==null?void 0:m.toolsUsed)??[],resetTurnPersistence:!u}),await v.awaitCompletion()}const _=a._currentStep;if(!_){R.debug("Running next loop");continue}switch(_.type){case"next_step_final_output":return await Jo(a,this.outputGuardrailDefs,_.output),a._currentTurnInProgress=!1,this.emit("agent_end",a._context,a._currentAgent,_.output),a._currentAgent.emit("agent_end",a._context,_.output),new Zr(a);case"next_step_handoff":a.setCurrentAgent(_.newAgent),a._currentAgentSpan&&(a._currentAgentSpan.end(),Cn(),a.setCurrentAgentSpan(void 0)),a._noActiveAgentRun=!0,a._currentTurnInProgress=!1,a._currentStep={type:"next_step_run_again"};break;case"next_step_interruption":return new Zr(a);case"next_step_run_again":a._currentTurnInProgress=!1,R.debug("Running next loop");break;default:R.debug("Running next loop")}}}catch(_){a._currentTurnInProgress=!1;const g=await Eu({error:_,state:a,errorHandlers:o.errorHandlers,outputGuardrailDefs:this.outputGuardrailDefs,emitAgentEnd:(v,w,O)=>{this.emit("agent_end",v,w,O),w.emit("agent_end",v,O)}});if(g)return g;throw a._currentAgentSpan&&a._currentAgentSpan.setError({message:"Error in agent run",data:{error:String(_)}}),_}finally{if(((y=a._currentStep)==null?void 0:y.type)!=="next_step_interruption")try{await Hs({runContext:a._context})}catch(_){R.warn(`Failed to dispose computers after run: ${_}`)}a._currentAgentSpan&&(((b=a._currentStep)==null?void 0:b.type)!=="next_step_interruption"&&a._currentAgentSpan.end(),Cn())}})},Yu=async function(n,r,o,s,i,u){var w,O;const a=r.conversationId??n.state._conversationId,l=r.previousResponseId??n.state._previousResponseId,d=!!a||!!l,c=d?new Ja({conversationId:a,previousResponseId:l}):void 0;c&&n.state.setConversationContext(c.conversationId,c.previousResponseId);let h=!1,m=!1,y=Go();const b=async()=>{m||!s||(await s(),m=!0)};let _;const g=async()=>{if(await y.awaitCompletion(),y.failed)throw y.error;h&&!m&&!y.failed&&await b()};c&&o&&(c.primeFromState({originalInput:n.state._originalInput,generatedItems:n.state._generatedItems,modelResponses:n.state._modelResponses}),n.state.setConversationContext(c.conversationId,c.previousResponseId));let v=!1;try{for(;;){const x=n.state._currentAgent;if(n.state._currentStep=n.state._currentStep??{type:"next_step_run_again"},n.state._currentStep.type==="next_step_interruption"){if(R.debug("Continuing from interruption"),!n.state._lastTurnResponse||!n.state._lastProcessedResponse)throw new Y("No model response found in previous state",n.state);const $=await Ou({state:n.state,runner:this,onStepItems:te=>{Ya(n,te)}}),{shouldReturn:q,shouldContinue:G}=xu({state:n.state,outcome:$,setContinuingInterruptedTurn:te=>{v=te}});if(q)return;if(G)continue}if(n.state._currentStep.type==="next_step_run_again"){_=void 0,y=Go();const $=v;v=!1;const q=n.state._currentTurn,G=n.state._currentTurnPersistedItemCount,te=n.state._generatedItems.length,ze=await ku({state:n.state,input:n.input,generatedItems:n.newItems,isResumedState:o,preserveTurnPersistenceOnResume:u,continuingInterruptedTurn:$,serverConversationTracker:c,inputGuardrailDefs:this.inputGuardrailDefs,guardrailHandlers:{onParallelStart:()=>{y.markPending()},onParallelError:ke=>{y.setError(ke)}},emitAgentStart:(ke,Wt,Fv)=>{this.emit("agent_start",ke,Wt,Fv)}});u&&n.state._currentTurn>q&&G<=te&&(n.state._currentTurnPersistedItemCount=G);const{artifacts:Ae,turnInput:De}=ze;_=ze.parallelGuardrailPromise,y.setPromise(_);const z=y.pending,M=await L(this,Ce,ls).call(this,n.state,r,Ae,De,c,i);y.throwIfError();let ie,Pe=!1;const Bt=()=>{Pe||!c||(c.markInputAsSent(M.sourceItems,{filterApplied:M.filterApplied,allTurnItems:M.turnInput}),Pe=!0)};h=!0,z||await b();try{for await(const ke of M.model.getStreamedResponse({systemInstructions:M.modelInput.instructions,prompt:M.prompt,...M.explictlyModelSet?{overridePromptModel:!0}:{},input:M.modelInput.input,previousResponseId:M.previousResponseId,conversationId:M.conversationId,modelSettings:M.modelSettings,tools:M.serializedTools,toolsExplicitlyProvided:M.toolsExplicitlyProvided,handoffs:M.serializedHandoffs,outputType:zs(x.outputType),tracing:Tu(this.config.tracingDisabled,this.config.traceIncludeSensitiveData),signal:r.signal})){if(y.throwIfError(),Bt(),ke.type==="response_done"){const Wt=da.parse(ke);ie={usage:new Nn(Wt.response.usage),output:Wt.response.output,responseId:Wt.response.id},n.state._context.usage.add(ie.usage)}if(n.cancelled){await g();return}n._addItem(new Qg(ke))}}catch(ke){if(Ay(ke)){h&&Bt(),await g();return}throw ke}if(ie&&Bt(),await g(),n.cancelled)return;if(n.state._noActiveAgentRun=!1,!ie)throw new Oe("Model did not produce a final response!",n.state);n.state._lastTurnResponse=ie,c==null||c.trackServerItems(ie),c&&n.state.setConversationContext(c.conversationId,c.previousResponseId),n.state._modelResponses.push(n.state._lastTurnResponse);const qt=Va(n.state._lastTurnResponse,x,M.tools,M.handoffs);n.state._lastProcessedResponse=qt;const we=new Set(qt.newItems);we.size>0&&Ka(n,qt.newItems);const Hr=await Iu(x,n.state._originalInput,n.state._generatedItems,n.state._lastTurnResponse,n.state._lastProcessedResponse,this,n.state);Xo({state:n.state,turnResult:Hr,agent:x,toolsUsed:qt.toolsUsed,resetTurnPersistence:!o,onStepItems:ke=>{Ya(n,ke,{skipItems:we})}})}const C=n.state._currentStep;switch(C.type){case"next_step_final_output":await Jo(n.state,this.outputGuardrailDefs,C.output),n.state._currentTurnInProgress=!1,await b(),d||await qo(r.session,n),this.emit("agent_end",n.state._context,x,C.output),x.emit("agent_end",n.state._context,C.output);return;case"next_step_interruption":await b(),d||await qo(r.session,n);return;case"next_step_handoff":n.state.setCurrentAgent(C.newAgent),n.state._currentAgentSpan&&(n.state._currentAgentSpan.end(),Cn()),n.state.setCurrentAgentSpan(void 0),n._addItem(new ty(n.state._currentAgent)),n.state._noActiveAgentRun=!0,n.state._currentTurnInProgress=!1,n.state._currentStep={type:"next_step_run_again"};break;case"next_step_run_again":n.state._currentTurnInProgress=!1,R.debug("Running next loop");break;default:R.debug("Running next loop")}}}catch(x){if(n.state._currentTurnInProgress=!1,y.pending&&await y.awaitCompletion({suppressErrors:!0}),h&&!m&&!y.failed&&await b(),await Eu({error:x,state:n.state,errorHandlers:r.errorHandlers,outputGuardrailDefs:this.outputGuardrailDefs,emitAgentEnd:($,q,G)=>{this.emit("agent_end",$,q,G),q.emit("agent_end",$,G)},streamResult:n})){await b(),d||await qo(r.session,n);return}throw n.state._currentAgentSpan&&n.state._currentAgentSpan.setError({message:"Error in agent run",data:{error:String(x)}}),x}finally{if(y.pending&&await y.awaitCompletion({suppressErrors:!0}),h&&!m&&!y.failed&&await b(),((w=n.state._currentStep)==null?void 0:w.type)!=="next_step_interruption")try{await Hs({runContext:n.state._context})}catch(x){R.warn(`Failed to dispose computers after run: ${x}`)}n.state._currentAgentSpan&&(((O=n.state._currentStep)==null?void 0:O.type)!=="next_step_interruption"&&n.state._currentAgentSpan.end(),Cn())}},Xu=async function(n,r,o,s,i,u){return o=o??{},Ro(async()=>{const a=r instanceof He,l=a?r:new He(o.context instanceof dt?o.context:new dt(o.context),r,n,o.maxTurns??Ga),d=o.conversationId??(a?l._conversationId:void 0),c=o.previousResponseId??(a?l._previousResponseId:void 0);a||l.setConversationContext(d,c);const h=new ha({signal:o.signal,state:l}),m={...o,signal:h._getAbortSignal()};h.maxTurns=m.maxTurns??l._maxTurns;const y=L(this,Ce,Yu).call(this,h,m,a,s,i,u).then(()=>{h._done()},b=>{h._raiseError(b)});return h._setStreamLoopPromise(y),h})},ls=async function(n,r,o,s,i,u){const{model:a,explictlyModelSet:l,resolvedModelName:d}=await L(this,Ce,Hu).call(this,n._currentAgent);let c={...this.config.modelSettings,...n._currentAgent.modelSettings};c=by(l,n._currentAgent.modelSettings,a,c,d),c=wy(n._currentAgent,n._toolUseTracker,c),n._lastModelSettings=c;const h=await n._currentAgent.getSystemPrompt(n._context),m=await n._currentAgent.getPrompt(n._context),{modelInput:y,sourceItems:b,persistedItems:_,filterApplied:g}=await gy(n._currentAgent,r.callModelInputFilter,n._context,s,h);u==null||u(b,g?_:void 0);const v=(i==null?void 0:i.previousResponseId)??r.previousResponseId,w=(i==null?void 0:i.conversationId)??r.conversationId;return{...o,model:a,explictlyModelSet:l,modelSettings:c,modelInput:y,prompt:m,previousResponseId:v,conversationId:w,sourceItems:b,filterApplied:g,turnInput:s}};const Qo=new WeakMap;function w_(e,t){e&&Qo.set(e,t)}function b_(e){const t=Qo.get(e);return t&&Qo.delete(e),t}const I_=I({input:f()}),hn=class hn extends Jg{constructor(n){super();S(this,"name");S(this,"instructions");S(this,"prompt");S(this,"handoffDescription");S(this,"handoffs");S(this,"model");S(this,"modelSettings");S(this,"tools");S(this,"mcpServers");S(this,"inputGuardrails");S(this,"outputGuardrails");S(this,"outputType","text");S(this,"toolUseBehavior");S(this,"resetToolChoice");S(this,"_toolsExplicitlyConfigured");if(typeof n.name!="string"||n.name.trim()==="")throw new Y("Agent must have a name.");if(this.name=n.name,this.instructions=n.instructions??hn.DEFAULT_MODEL_PLACEHOLDER,this.prompt=n.prompt,this.handoffDescription=n.handoffDescription??"",this.handoffs=n.handoffs??[],this.model=n.model??"",this.modelSettings=n.modelSettings??Hg(),this.tools=n.tools??[],this._toolsExplicitlyConfigured=n.tools!==void 0,this.mcpServers=n.mcpServers??[],this.inputGuardrails=n.inputGuardrails??[],this.outputGuardrails=n.outputGuardrails??[],n.outputType&&(this.outputType=n.outputType),this.toolUseBehavior=n.toolUseBehavior??"run_llm_again",this.resetToolChoice=n.resetToolChoice??!0,n.model!==void 0&&Sa()&&(typeof n.model!="string"||!Fr(n.model))&&n.modelSettings===void 0&&(this.modelSettings={}),(n.handoffOutputTypeWarningEnabled===void 0||n.handoffOutputTypeWarningEnabled)&&this.handoffs&&this.outputType){const r=new Set([JSON.stringify(this.outputType)]);for(const o of this.handoffs)"outputType"in o&&o.outputType?r.add(JSON.stringify(o.outputType)):"agent"in o&&o.agent.outputType&&r.add(JSON.stringify(o.agent.outputType));r.size>1&&R.warn(`[Agent] Warning: Handoff agents have different output types: ${Array.from(r).join(", ")}. You can make it type-safe by using Agent.create({ ... }) method instead.`)}}static create(n){return new hn({...n,handoffs:n.handoffs,outputType:n.outputType,handoffOutputTypeWarningEnabled:!1})}get outputSchemaName(){if(this.outputType==="text")return"text";if(It(this.outputType))return"ZodOutput";if(typeof this.outputType=="object")return this.outputType.name;throw new Error(`Unknown output type: ${this.outputType}`)}clone(n){return new hn({...this,...n})}asTool(n){const{toolName:r,toolDescription:o,customOutputExtractor:s,needsApproval:i,runConfig:u,runOptions:a,resumeState:l,isEnabled:d,onStream:c}=n,h=new Map,m=async _=>{const g=h.get(_.event.type),v=h.get("*"),w=[...c?[c]:[],...g?Array.from(g):[],...v?Array.from(v):[]];await Promise.allSettled(w.map(O=>Promise.resolve().then(()=>O(_))))},b={...vr({name:r??mr(this.name),description:o??"",parameters:I_,strict:!0,needsApproval:i,isEnabled:d,execute:async(_,g,v)=>{var De;if(!ol(_))throw new Oe("Agent tool called with invalid input");const w=new v_(u??{}),O=(l==null?void 0:l.contextStrategy)??"merge",x=O==="preferSerialized"?void 0:(a==null?void 0:a.context)instanceof dt?a.context:typeof(a==null?void 0:a.context)<"u"?new dt(a.context):g;let C=_.input;v!=null&&v.resumeState&&(O==="preferSerialized"||!x?C=await He.fromString(this,v.resumeState):(O==="merge"&&g&&x!==g&&x._mergeApprovals(g.toJSON().approvals),C=await He.fromStringWithContext(this,v.resumeState,x,{contextStrategy:O==="replace"?"replace":"merge"})));const $=typeof c=="function"||h.size>0,q=$?await w.run(this,C,{context:g,...a??{},stream:!0}):await w.run(this,C,{context:g,...a??{}}),G={agent:this,toolCall:v==null?void 0:v.toolCall};if($){const z=q;for await(const M of z)await m({event:M,...G});await z.completed}const te=q,ze=typeof this.toolUseBehavior=="object"&&this.toolUseBehavior!==null&&"stopAtToolNames"in this.toolUseBehavior;typeof s!="function"&&ze&&R.debug(`You're passing the agent (name: ${this.name}) with toolUseBehavior.stopAtToolNames configured as a tool to a different agent; this may not work as you expect. You may want to have a wrapper function tool to consistently return the final output.`);let Ae;if(typeof s=="function")Ae=await s(te);else{const z=typeof te.finalOutput<"u"?this.outputType==="text"?String(te.finalOutput):JSON.stringify(te.finalOutput):void 0,M=te.rawResponses,ie=M&&M.length>0?Zy(M[M.length-1]):void 0,Pe=typeof ie=="string"&&ie.trim()===""?void 0:ie;Ae=((De=te.state)==null?void 0:De._finalOutputSource)==="error_handler"?z??Pe??"":Pe??z??""}return v!=null&&v.toolCall&&w_(v.toolCall,te),Ae}}),on:(_,g)=>{const v=h.get(_)??new Set;return v.add(g),h.set(_,v),b}};return b}async getSystemPrompt(n){return typeof this.instructions=="function"?await this.instructions(n,this):this.instructions}async getPrompt(n){return typeof this.prompt=="function"?await this.prompt(n,this):this.prompt}async getMcpTools(n){return this.mcpServers.length>0?Cm({mcpServers:this.mcpServers,runContext:n,agent:this,convertSchemasToStrict:!1}):[]}async getAllTools(n){const r=await this.getMcpTools(n),o=[];for(const s of this.tools){if(s.type==="function"){const i=s.isEnabled;if(!(typeof i=="function"?await i(n,this):typeof i=="boolean"?i:!0))continue}o.push(s)}return[...r,...o]}hasExplicitToolConfig(){return this._toolsExplicitlyConfigured}async getEnabledHandoffs(n){var s;const r=((s=this.handoffs)==null?void 0:s.map(i=>Xg(i)))??[],o=[];for(const i of r)await i.isEnabled({runContext:n,agent:this})&&o.push(i);return o}processFinalOutput(n){if(this.outputType==="text")return n;if(typeof this.outputType=="object"){const r=JSON.parse(n);return It(this.outputType)?this.outputType.parse(r):r}throw new Error(`Unknown output type: ${this.outputType}`)}toJSON(){return{name:this.name}}};S(hn,"DEFAULT_MODEL_PLACEHOLDER","");let Qe=hn;oo("openai-agents:mcp-servers"),Gg(ya());function Cu(e){const t=atob(e),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer}function Pu(e){const t=String.fromCharCode(...new Uint8Array(e));return btoa(t)}function Ru(e){if(typeof e>"u"||e===null||typeof e!="object"||!("type"in e)||typeof e.type!="string"||!e.type||e.type!=="message"||!("content"in e)||!Array.isArray(e.content)||e.content.length<1)return;const t=e.content[e.content.length-1];if(!(!("type"in t)||typeof t.type!="string")){if(t.type==="output_text")return typeof t.text=="string"?t.text:void 0;if(t.type==="output_audio")return typeof t.transcript=="string"?t.transcript:void 0}}function S_(e,t){const n=e.filter(s=>!t.some(i=>i.itemId===s.itemId)),r=t.filter(s=>!e.some(i=>i.itemId===s.itemId)),o=t.filter(s=>e.some(i=>i.itemId===s.itemId&&JSON.stringify(i)!==JSON.stringify(s)));return{removals:n,additions:r,updates:o}}function T_(){return typeof window>"u"?!1:typeof window.RTCPeerConnection<"u"}function $u(e){return e.role==="system"?e:e.role==="assistant"?{...e,content:e.content.map(t=>t.type==="output_audio"?{...t,audio:null}:t)}:e.role==="user"?{...e,content:e.content.map(t=>t.type==="input_audio"?{...t,audio:null}:t)}:e}function A_(e,t){if(e.role!=="assistant"||t.role!=="assistant")return t;const n=t.content.map((r,o)=>{if(r.type!=="output_audio"||!(typeof r.transcript!="string"||r.transcript.length===0))return r;const i=e.content[o];return i&&i.type==="output_audio"&&typeof i.transcript=="string"&&i.transcript.length>0?{...r,transcript:i.transcript}:r});return{...t,content:n}}function Nu(e,t,n){if(t.type==="conversation.item.input_audio_transcription.completed")return e.map(s=>{if(s.itemId===t.item_id&&s.type==="message"&&"role"in s&&s.role==="user"){const i=s.content.map(u=>u.type==="input_audio"?{...u,transcript:t.transcript}:u);return{...s,content:i,status:"completed"}}return s});const r=!n&&t.type==="message"?$u(t):t,o=e.findIndex(s=>s.itemId===t.itemId);if(o!==-1){const s=e[o],i=r.type==="message"&&s.type==="message"?A_(s,r):r;return e.map((u,a)=>a===o?i:!n&&u.type==="message"?$u(u):u)}else if(t.previousItemId){const s=e.findIndex(i=>i.itemId===t.previousItemId);return s!==-1?[...e.slice(0,s+1),r,...e.slice(s+1)]:[...e,r]}else return[...e,r]}const zu={"User-Agent":`Agents/JavaScript ${H.version}`,"X-OpenAI-Agents-SDK":`openai-agents-sdk.${H.version}`},k_=`openai-agents-sdk.${H.version}`;function O_(e,t){const{name:n,arguments:r,...o}=t;return new pe({type:"hosted_tool_call",name:n,arguments:JSON.stringify(r),status:"in_progress",providerData:{...o}},e)}function Du(e){if(e.rawItem.type!=="function_call"&&e.rawItem.type!=="hosted_tool_call")throw new Error("Invalid approval item type for Realtime MCP approval request");const{name:t,arguments:n,providerData:r}=e.rawItem,{itemId:o,serverLabel:s,...i}=r??{};if(!o||!s)throw new Error("Invalid approval item for Realtime MCP approval request");return{type:"mcp_approval_request",itemId:o,serverLabel:s,...i,name:t,arguments:n?JSON.parse(n):{},approved:null}}class x_ extends Qe{constructor(n){super(n);S(this,"voice");this.voice=n.voice}}function E_(e){return{debounceTextLength:e.debounceTextLength??100}}function C_({policyHint:e,...t}){const n=Mo(t),r=e??n.name;return{...n,policyHint:r,run:async o=>{const s=await n.run(o);return{...s,guardrail:{...s.guardrail,policyHint:r}}}}}function P_(e){return`
 Your last answer was blocked. 
Failed Guardrail Reason: ${e.guardrail.policyHint}. 
Failure Details: ${JSON.stringify(e.output.outputInfo??{})}. 
Please respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.
`.trim()}function Et(e,t){return e in t&&typeof t[e]<"u"}function R_(e){return Et("modalities",e)||Et("inputAudioFormat",e)||Et("outputAudioFormat",e)||Et("inputAudioTranscription",e)||Et("turnDetection",e)||Et("inputAudioNoiseReduction",e)||Et("speed",e)}function $_(e){var t,n,r,o,s,i,u,a;if(!R_(e)){const l=(t=e.audio)!=null&&t.input?{format:qr(e.audio.input.format),noiseReduction:e.audio.input.noiseReduction??null,transcription:e.audio.input.transcription,turnDetection:e.audio.input.turnDetection}:void 0,d=((r=(n=e.audio)==null?void 0:n.output)==null?void 0:r.voice)??e.voice,c=(o=e.audio)!=null&&o.output||typeof d<"u"?{format:qr((i=(s=e.audio)==null?void 0:s.output)==null?void 0:i.format),voice:d,speed:(a=(u=e.audio)==null?void 0:u.output)==null?void 0:a.speed}:void 0;return{model:e.model,instructions:e.instructions,toolChoice:e.toolChoice,tools:e.tools,tracing:e.tracing,providerData:e.providerData,prompt:e.prompt,outputModalities:e.outputModalities,audio:l||c?{input:l,output:c}:void 0}}return{model:e.model,instructions:e.instructions,toolChoice:e.toolChoice,tools:e.tools,tracing:e.tracing,providerData:e.providerData,prompt:e.prompt,outputModalities:e.modalities,audio:{input:{format:qr(e.inputAudioFormat),noiseReduction:e.inputAudioNoiseReduction??null,transcription:e.inputAudioTranscription,turnDetection:e.turnDetection},output:{format:qr(e.outputAudioFormat),voice:e.voice,speed:e.speed}}}}function qr(e){if(!e)return;if(typeof e=="object")return e;const t=String(e);return t==="pcm16"?{type:"audio/pcm",rate:24e3}:t==="g711_ulaw"?{type:"audio/pcmu"}:t==="g711_alaw"?{type:"audio/pcma"}:{type:"audio/pcm",rate:24e3}}I({itemId:f()});const Zu=ge("role",[I({itemId:f(),previousItemId:f().nullable().optional(),type:T("message"),role:T("system"),content:j(I({type:T("input_text"),text:f()}))}),I({itemId:f(),previousItemId:f().nullable().optional(),type:T("message"),role:T("user"),status:ue(["in_progress","completed"]),content:j(I({type:T("input_text"),text:f()}).or(I({type:T("input_audio"),audio:f().nullable().optional(),transcript:f().nullable()})))}),I({itemId:f(),previousItemId:f().nullable().optional(),type:T("message"),role:T("assistant"),status:ue(["in_progress","completed","incomplete"]),content:j(I({type:T("output_text"),text:f()}).or(I({type:T("output_audio"),audio:f().nullable().optional(),transcript:f().nullable().optional()})))})]),Mu=I({itemId:f(),previousItemId:f().nullable().optional(),type:T("function_call"),status:ue(["in_progress","completed","incomplete"]),arguments:f(),name:f(),output:f().nullable()}),ju=I({itemId:f(),previousItemId:f().nullable().optional(),type:ue(["mcp_call","mcp_tool_call"]),status:ue(["in_progress","completed","incomplete"]),arguments:f(),name:f(),output:f().nullable()}),N_=I({itemId:f(),type:T("mcp_approval_request"),serverLabel:f(),name:f(),arguments:X(f(),J()),approved:ct().optional().nullable()}),Ne=oo("openai-agents:realtime"),Fu=I({id:f().optional().nullable(),conversation_id:f().optional().nullable(),max_output_tokens:E().or(T("inf")).optional().nullable(),metadata:X(f(),J()).optional().nullable(),output_modalities:j(f()).optional().nullable(),object:T("realtime.response").optional().nullable(),output:j(J()).optional().nullable(),audio:I({output:I({format:J().optional().nullable(),voice:f().optional().nullable()}).optional().nullable()}).optional().nullable(),status:ue(["completed","incomplete","failed","cancelled","in_progress"]).optional().nullable(),status_details:X(f(),J()).optional().nullable(),usage:I({input_tokens:E().optional(),input_token_details:X(f(),J()).optional().nullable(),output_tokens:E().optional(),output_token_details:X(f(),J()).optional().nullable()}).optional().nullable()}),z_=I({id:f().optional(),audio:f().nullable().optional(),text:f().nullable().optional(),transcript:f().nullable().optional(),type:je([T("input_text"),T("input_audio"),T("item_reference"),T("output_text"),T("output_audio")])}),rn=I({id:f().optional(),arguments:f().optional(),call_id:f().optional(),content:j(z_).optional(),name:f().optional(),output:f().nullable().optional(),role:ue(["user","assistant","system"]).optional(),status:ue(["completed","incomplete","in_progress"]).optional(),type:ue(["message","function_call","function_call_output","mcp_list_tools","mcp_tool_call","mcp_call","mcp_approval_request","mcp_approval_response"]).optional(),approval_request_id:f().nullable().optional(),approve:ct().nullable().optional(),reason:f().nullable().optional(),server_label:f().optional(),error:J().nullable().optional(),tools:j(I({name:f(),description:f(),input_schema:X(f(),J()).optional()}).passthrough()).optional()}).passthrough(),D_=I({type:T("conversation.created"),event_id:f(),conversation:I({id:f().optional(),object:T("realtime.conversation").optional()})}),Z_=I({type:T("conversation.item.added"),event_id:f(),item:rn,previous_item_id:f().nullable().optional()}),M_=I({type:T("conversation.item.done"),event_id:f(),item:rn,previous_item_id:f().nullable().optional()}),j_=I({type:T("conversation.item.deleted"),event_id:f(),item_id:f()}),F_=I({type:T("conversation.item.input_audio_transcription.completed"),event_id:f(),item_id:f(),content_index:E(),transcript:f(),logprobs:j(J()).nullable().optional(),usage:I({type:T("tokens"),total_tokens:E(),input_tokens:E(),input_token_details:I({text_tokens:E(),audio_tokens:E()}),output_tokens:E()}).optional()}),L_=I({type:T("conversation.item.input_audio_transcription.delta"),event_id:f(),item_id:f(),content_index:E().optional(),delta:f().optional(),logprobs:j(J()).nullable().optional()}),U_=I({type:T("conversation.item.input_audio_transcription.failed"),event_id:f(),item_id:f(),content_index:E(),error:I({code:f().optional(),message:f().optional(),param:f().optional(),type:f().optional()})}),G_=I({type:T("conversation.item.retrieved"),event_id:f(),item:rn}),J_=I({type:T("conversation.item.truncated"),event_id:f(),item_id:f(),audio_end_ms:E(),content_index:E()}),B_=I({type:T("conversation.item.create"),item:rn,event_id:f().optional(),previous_item_id:f().nullable().optional()}),q_=I({type:T("conversation.item.delete"),item_id:f(),event_id:f().optional()}),W_=I({type:T("conversation.item.retrieve"),item_id:f(),event_id:f().optional()}),V_=I({type:T("conversation.item.truncate"),item_id:f(),audio_end_ms:E(),content_index:E(),event_id:f().optional()}),H_=I({type:T("error"),event_id:f().optional(),error:J().optional()}),K_=I({type:T("input_audio_buffer.cleared"),event_id:f()}),Y_=I({type:T("input_audio_buffer.append"),audio:f(),event_id:f().optional()}),X_=I({type:T("input_audio_buffer.clear"),event_id:f().optional()}),Q_=I({type:T("input_audio_buffer.commit"),event_id:f().optional()}),ev=I({type:T("input_audio_buffer.committed"),event_id:f(),item_id:f(),previous_item_id:f().nullable().optional()}),tv=I({type:T("input_audio_buffer.speech_started"),event_id:f(),item_id:f(),audio_start_ms:E()}),nv=I({type:T("input_audio_buffer.speech_stopped"),event_id:f(),item_id:f(),audio_end_ms:E()}),rv=I({type:T("output_audio_buffer.started"),event_id:f()}).passthrough(),ov=I({type:T("output_audio_buffer.stopped"),event_id:f()}).passthrough(),sv=I({type:T("output_audio_buffer.cleared"),event_id:f()}),iv=I({type:T("rate_limits.updated"),event_id:f(),rate_limits:j(I({limit:E().optional(),name:ue(["requests","tokens"]).optional(),remaining:E().optional(),reset_seconds:E().optional()}))}),av=I({type:T("response.output_audio.delta"),event_id:f(),item_id:f(),content_index:E(),delta:f(),output_index:E(),response_id:f()}),uv=I({type:T("response.output_audio.done"),event_id:f(),item_id:f(),content_index:E(),output_index:E(),response_id:f()}),cv=I({type:T("response.output_audio_transcript.delta"),event_id:f(),item_id:f(),content_index:E(),delta:f(),output_index:E(),response_id:f()}),lv=I({type:T("response.output_audio_transcript.done"),event_id:f(),item_id:f(),content_index:E(),transcript:f(),output_index:E(),response_id:f()}),pv=I({type:T("response.content_part.added"),event_id:f(),item_id:f(),content_index:E(),output_index:E(),response_id:f(),part:I({audio:f().optional(),text:f().optional(),transcript:f().optional(),type:ue(["text","audio"]).optional()})}),dv=I({type:T("response.content_part.done"),event_id:f(),item_id:f(),content_index:E(),output_index:E(),response_id:f(),part:I({audio:f().optional(),text:f().optional(),transcript:f().optional(),type:ue(["text","audio"]).optional()})}),fv=I({type:T("response.created"),event_id:f(),response:Fu}),Lu=I({type:T("response.done"),event_id:f(),response:Fu}),hv=I({type:T("response.function_call_arguments.delta"),event_id:f(),item_id:f(),call_id:f(),delta:f(),output_index:E(),response_id:f()}),mv=I({type:T("response.function_call_arguments.done"),event_id:f(),item_id:f(),call_id:f(),arguments:f(),output_index:E(),response_id:f()}),gv=I({type:T("response.output_item.added"),event_id:f(),item:rn,output_index:E(),response_id:f()}),yv=I({type:T("response.output_item.done"),event_id:f(),item:rn,output_index:E(),response_id:f()}),_v=I({type:T("response.output_text.delta"),event_id:f(),item_id:f(),content_index:E(),delta:f(),output_index:E(),response_id:f()}),vv=I({type:T("response.output_text.done"),event_id:f(),item_id:f(),content_index:E(),text:f(),output_index:E(),response_id:f()}),wv=I({type:T("session.created"),event_id:f(),session:J()}),bv=I({type:T("session.updated"),event_id:f(),session:J()}),Iv=I({type:T("response.cancel"),event_id:f().optional(),response_id:f().optional()}),Sv=I({type:T("response.create"),event_id:f().optional(),response:J().optional()}),Tv=I({type:T("session.update"),event_id:f().optional(),session:J()}),Av=I({type:T("mcp_list_tools.in_progress"),event_id:f().optional(),item_id:f().optional()}),kv=I({type:T("mcp_list_tools.completed"),event_id:f().optional(),item_id:f().optional()}),Ov=I({type:T("response.mcp_call_arguments.delta"),event_id:f(),response_id:f(),item_id:f(),output_index:E(),delta:f(),obfuscation:f()}),xv=I({type:T("response.mcp_call_arguments.done"),event_id:f(),response_id:f(),item_id:f(),output_index:E(),arguments:f()}),Ev=I({type:T("response.mcp_call.in_progress"),event_id:f(),output_index:E(),item_id:f()}),Cv=I({type:T("response.mcp_call.completed"),event_id:f(),output_index:E(),item_id:f()}),Pv=I({type:T("mcp_list_tools.failed"),event_id:f().optional(),item_id:f().optional()}),Rv=I({type:f(),event_id:f().optional().nullable()}).passthrough(),$v=ge("type",[D_,Z_,M_,j_,F_,L_,U_,G_,J_,H_,K_,ev,tv,nv,rv,ov,sv,iv,av,uv,cv,lv,pv,dv,fv,Lu,hv,mv,gv,yv,_v,vv,wv,bv,Av,kv,Pv,Ov,xv,Ev,Cv]);ge("type",[B_,q_,W_,V_,Y_,X_,Q_,Iv,Sv,Tv]);function es(e){const t=JSON.parse(e.data.toString()),n=$v.safeParse(t);if(!n.success){const r=Rv.safeParse(t);return r.success?{data:r.data,isGeneric:!0}:{data:null,isGeneric:!0}}return{data:n.data,isGeneric:!1}}const Uu="gpt-realtime",Ge={outputModalities:["audio"],audio:{input:{format:{type:"audio/pcm",rate:24e3},transcription:{model:"gpt-4o-mini-transcribe"},turnDetection:{type:"semantic_vad"},noiseReduction:null},output:{format:{type:"audio/pcm",rate:24e3},speed:1}}},ss=class ss extends Zo{constructor(n={}){super();P(this,Mt);P(this,Yn);P(this,Te,null);P(this,Xn,null);S(this,"eventEmitter",new Cr);k(this,Mt,n.model??Uu),k(this,Yn,n.apiKey)}get currentModel(){return p(this,Mt)}set currentModel(n){k(this,Mt,n)}_afterAudioDoneEvent(){}get _rawSessionConfig(){return p(this,Xn)??null}async _getApiKey(n){const r=n.apiKey??p(this,Yn);return typeof r=="function"?await r():r}_onMessage(n){var s,i,u,a,l,d;const{data:r,isGeneric:o}=es(n);if(r!==null&&(this.emit("*",r),!o)){if(r.type==="error"?this.emit("error",{type:"error",error:r}):this.emit(r.type,r),r.type==="response.created"){this.emit("turn_started",{type:"response_started",providerData:{...r}});return}if(r.type==="session.updated"&&k(this,Xn,r.session),r.type==="response.done"){const c=Lu.safeParse(r);if(!c.success){Ne.error("Error parsing response done event",c.error);return}const h=((s=c.data.response.usage)==null?void 0:s.input_tokens)??0,m=((i=c.data.response.usage)==null?void 0:i.output_tokens)??0,y=h+m,b=new Nn({inputTokens:h,inputTokensDetails:((u=c.data.response.usage)==null?void 0:u.input_token_details)??{},outputTokens:m,outputTokensDetails:((a=c.data.response.usage)==null?void 0:a.output_token_details)??{},totalTokens:y});this.emit("usage_update",b),this.emit("turn_done",{type:"response_done",response:{id:c.data.response.id??"",output:c.data.response.output??[],usage:{inputTokens:h,inputTokensDetails:((l=c.data.response.usage)==null?void 0:l.input_token_details)??{},outputTokens:m,outputTokensDetails:((d=c.data.response.usage)==null?void 0:d.output_token_details)??{},totalTokens:y}}});return}if(r.type==="response.output_audio.done"){this.emit("audio_done"),this._afterAudioDoneEvent();return}if(r.type==="conversation.item.deleted"){this.emit("item_deleted",{itemId:r.item_id});return}if(r.type==="conversation.item.input_audio_transcription.completed"||r.type==="conversation.item.truncated"){this.sendEvent({type:"conversation.item.retrieve",item_id:r.item_id});return}if(r.type==="conversation.item.input_audio_transcription.delta"||r.type==="response.output_text.delta"||r.type==="response.output_audio_transcript.delta"||r.type==="response.function_call_arguments.delta"){r.type==="response.output_audio_transcript.delta"&&this.emit("audio_transcript_delta",{type:"transcript_delta",delta:r.delta,itemId:r.item_id,responseId:r.response_id});return}if(r.type==="conversation.item.added"||r.type==="conversation.item.done"||r.type==="conversation.item.retrieved"){if(r.item.type==="mcp_list_tools"&&r.type==="conversation.item.done"){const c=r.item.server_label??"",h=r.item.tools??[];try{this.emit("mcp_tools_listed",{serverLabel:c,tools:h})}catch(m){Ne.error("Error emitting mcp_tools_listed",m,r.item)}return}if(r.item.type==="message"){const c=r.type==="conversation.item.added"||r.type==="conversation.item.done"?r.previous_item_id:null,h=Zu.parse({itemId:r.item.id,previousItemId:c,type:r.item.type,role:r.item.role,content:r.item.content,status:r.item.status});this.emit("item_update",h);return}if(r.item.type==="mcp_approval_request"&&r.type==="conversation.item.done"){const c=r.item,h=N_.parse({itemId:c.id,type:c.type,serverLabel:c.server_label,name:c.name,arguments:JSON.parse(c.arguments||"{}"),approved:c.approved});this.emit("item_update",h),this.emit("mcp_approval_request",h);return}if(r.item.type==="mcp_tool_call"||r.item.type==="mcp_call"){const c=r.type==="conversation.item.done"?"completed":"in_progress",h=ju.parse({itemId:r.item.id,type:r.item.type,status:c,arguments:r.item.arguments,name:r.item.name,output:r.item.output});this.emit("item_update",h),r.type==="conversation.item.done"&&this.emit("mcp_tool_call_completed",h);return}}if(r.type==="response.mcp_call.in_progress"){const c=r;this.sendEvent({type:"conversation.item.retrieve",item_id:c.item_id});return}if(r.type==="mcp_list_tools.in_progress"){const c=r;c.item_id&&this.sendEvent({type:"conversation.item.retrieve",item_id:c.item_id});return}if(r.type==="response.output_item.done"||r.type==="response.output_item.added"){const c=r.item;if(c.type==="function_call"&&c.status==="completed"){const h=Mu.parse({itemId:c.id,type:c.type,status:"in_progress",arguments:c.arguments,name:c.name,output:null});this.emit("item_update",h),this.emit("function_call",{id:c.id,type:"function_call",callId:c.call_id??"",arguments:c.arguments??"",name:c.name??""});return}if(c.type==="mcp_tool_call"||c.type==="mcp_call"){const h=ju.parse({itemId:c.id,type:c.type,status:r.type==="response.output_item.done"?"completed":"in_progress",arguments:c.arguments,name:c.name,output:c.output});this.emit("item_update",h);return}if(c.type==="message"){const h=Zu.parse({itemId:r.item.id,type:r.item.type,role:r.item.role,content:r.item.content,status:r.type==="response.output_item.done"?c.status??"completed":c.status??"in_progress"});this.emit("item_update",h);return}}}}_onError(n){this.emit("error",{type:"error",error:n})}_onOpen(){this.emit("connected")}_onClose(){this.emit("disconnected")}sendMessage(n,r,{triggerResponse:o=!0}={}){const s=typeof n=="string"?[{type:"input_text",text:n}]:n.content.map(i=>i.type==="input_image"?{type:"input_image",image_url:i.image,...i.providerData??{}}:i);this.sendEvent({type:"conversation.item.create",item:{type:"message",role:"user",content:s},...r}),o&&this.sendEvent({type:"response.create"})}addImage(n,{triggerResponse:r=!0}={}){this.sendMessage({type:"message",role:"user",content:[{type:"input_image",image:n}]},{},{triggerResponse:r})}_getMergedSessionConfig(n){var a,l,d,c,h,m,y,b,_,g,v,w,O,x,C,$,q,G,te,ze,Ae,De,z,M,ie,Pe,Bt,qt;const r=$_(n),o=(l=(a=r.audio)==null?void 0:a.input)==null?void 0:l.noiseReduction,s=(c=(d=r.audio)==null?void 0:d.input)==null?void 0:c.transcription,i=ss.buildTurnDetectionConfig((m=(h=r.audio)==null?void 0:h.input)==null?void 0:m.turnDetection),u={type:"realtime",instructions:r.instructions,model:r.model??p(this,Mt),output_modalities:r.outputModalities??Ge.outputModalities,audio:{input:{format:((b=(y=r.audio)==null?void 0:y.input)==null?void 0:b.format)??((g=(_=Ge.audio)==null?void 0:_.input)==null?void 0:g.format),noise_reduction:o===void 0?(w=(v=Ge.audio)==null?void 0:v.input)==null?void 0:w.noiseReduction:o,transcription:s===void 0?(x=(O=Ge.audio)==null?void 0:O.input)==null?void 0:x.transcription:s,turn_detection:i===void 0?($=(C=Ge.audio)==null?void 0:C.input)==null?void 0:$.turnDetection:i},output:{format:((G=(q=r.audio)==null?void 0:q.output)==null?void 0:G.format)??((ze=(te=Ge.audio)==null?void 0:te.output)==null?void 0:ze.format),voice:((De=(Ae=r.audio)==null?void 0:Ae.output)==null?void 0:De.voice)??((M=(z=Ge.audio)==null?void 0:z.output)==null?void 0:M.voice),speed:((Pe=(ie=r.audio)==null?void 0:ie.output)==null?void 0:Pe.speed)??((qt=(Bt=Ge.audio)==null?void 0:Bt.output)==null?void 0:qt.speed)}},tool_choice:r.toolChoice??Ge.toolChoice,...r.providerData??{}};return r.prompt&&(u.prompt={id:r.prompt.promptId,version:r.prompt.version,variables:r.prompt.variables}),r.tools&&r.tools.length>0&&(u.tools=r.tools.map(we=>{const Hr=ke=>Object.fromEntries(Object.entries(ke).filter(([,Wt])=>typeof Wt<"u"));return we.type==="mcp"?Hr({type:"mcp",server_label:we.server_label,server_url:we.server_url,server_description:we.server_description,connector_id:we.connector_id,authorization:we.authorization,headers:we.headers,allowed_tools:we.allowed_tools,require_approval:we.require_approval}):Hr({type:we.type,name:we.name,description:we.description,parameters:we.parameters})})),u}buildSessionPayload(n){return this._getMergedSessionConfig(n)}static buildTurnDetectionConfig(n){if(typeof n>"u")return;if(n===null)return null;const{type:r,createResponse:o,create_response:s,eagerness:i,interruptResponse:u,interrupt_response:a,prefixPaddingMs:l,prefix_padding_ms:d,silenceDurationMs:c,silence_duration_ms:h,threshold:m,idleTimeoutMs:y,idle_timeout_ms:b,..._}=n,g={type:r,create_response:o??s,eagerness:i,interrupt_response:u??a,prefix_padding_ms:l??d,silence_duration_ms:c??h,idle_timeout_ms:y??b,threshold:m,..._};return Object.keys(g).forEach(v=>{g[v]===void 0&&delete g[v]}),Object.keys(g).length>0?g:void 0}set _tracingConfig(n){k(this,Te,n)}_updateTracingConfig(n){var r,o,s;if(typeof p(this,Te)>"u"&&k(this,Te,null),n==="auto"){this.sendEvent({type:"session.update",session:{type:"realtime",tracing:"auto"}});return}if(p(this,Te)!==null&&typeof p(this,Te)!="string"&&typeof n!="string"){Ne.warn("Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.");return}if(n===null){Ne.debug("Disabling tracing for this session. It cannot be turned on for this session from this point on."),this.sendEvent({type:"session.update",session:{type:"realtime",tracing:null}});return}if(p(this,Te)===null||typeof p(this,Te)=="string"){this.sendEvent({type:"session.update",session:{type:"realtime",tracing:n}});return}if((n==null?void 0:n.group_id)!==((r=p(this,Te))==null?void 0:r.group_id)||(n==null?void 0:n.metadata)!==((o=p(this,Te))==null?void 0:o.metadata)||(n==null?void 0:n.workflow_name)!==((s=p(this,Te))==null?void 0:s.workflow_name)){Ne.warn("Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s",JSON.stringify(p(this,Te)),JSON.stringify(n));return}this.sendEvent({type:"session.update",session:{type:"realtime",tracing:n}})}updateSessionConfig(n){const r=this.buildSessionPayload(n);this.sendEvent({type:"session.update",session:r})}sendFunctionCallOutput(n,r,o=!0){this.sendEvent({type:"conversation.item.create",item:{type:"function_call_output",output:r,call_id:n.callId}});try{const s=Mu.parse({itemId:n.id,previousItemId:n.previousItemId,type:"function_call",status:"completed",arguments:n.arguments,name:n.name,output:r});this.emit("item_update",s)}catch(s){Ne.error("Error parsing tool call item",s,n)}o&&this.sendEvent({type:"response.create"})}sendAudio(n,{commit:r=!1}={}){this.sendEvent({type:"input_audio_buffer.append",audio:Pu(n)}),r&&this.sendEvent({type:"input_audio_buffer.commit"})}resetHistory(n,r){const{removals:o,additions:s,updates:i}=S_(n,r),u=new Set(o.map(l=>l.itemId));for(const l of i)u.add(l.itemId);if(u.size>0)for(const l of u)this.sendEvent({type:"conversation.item.delete",item_id:l});const a=[...s,...i];for(const l of a)if(l.type==="message"){const d={type:"message",role:l.role,content:l.content,id:l.itemId};l.role!=="system"&&l.status&&(d.status=l.status),this.sendEvent({type:"conversation.item.create",item:d})}else l.type==="function_call"&&Ne.warn("Function calls cannot be manually added or updated at the moment. Ignoring.")}sendMcpResponse(n,r){this.sendEvent({type:"conversation.item.create",previous_item_id:n.itemId,item:{type:"mcp_approval_response",approval_request_id:n.itemId,approve:r}})}};Mt=new WeakMap,Yn=new WeakMap,Te=new WeakMap,Xn=new WeakMap;let Mn=ss;class Gu extends Mn{constructor(n={}){if(typeof RTCPeerConnection>"u")throw new Error("WebRTC is not supported in this environment");super(n);S(this,"options");P(this,Qn);P(this,Q,{status:"disconnected",peerConnection:void 0,dataChannel:void 0,callId:void 0});P(this,er);P(this,_t,!1);P(this,tr,!1);this.options=n,k(this,Qn,n.baseUrl??"https://api.openai.com/v1/realtime/calls"),k(this,er,n.useInsecureApiKey??!1)}get callId(){return p(this,Q).callId}get status(){return p(this,Q).status}get connectionState(){return p(this,Q)}get muted(){return p(this,tr)}async connect(n){if(p(this,Q).status==="connected")return;p(this,Q).status==="connecting"&&Ne.warn("Realtime connection already in progress. Please await original promise");const r=n.model??this.currentModel;this.currentModel=r;const o=n.url??p(this,Qn),s=await this._getApiKey(n),i=typeof s=="string"&&s.startsWith("ek_");if(!p(this,er)&&!i)throw new Y("Using the WebRTC connection in a browser environment requires an ephemeral client key. If you need to use a regular API key, use the WebSocket transport or set the `useInsecureApiKey` option to true.");return new Promise(async(u,a)=>{var l,d;try{const c={...n.initialSessionConfig||{},model:this.currentModel},h=new URL(o);let m=new RTCPeerConnection;const y=m.createDataChannel("oai-events");let b;const _=C=>{C.onconnectionstatechange=()=>{switch(C.connectionState){case"disconnected":case"failed":case"closed":this.close();break}}};_(m),k(this,Q,{status:"connecting",peerConnection:m,dataChannel:y,callId:b}),this.emit("connection_change",p(this,Q).status),y.addEventListener("open",()=>{k(this,Q,{status:"connected",peerConnection:m,dataChannel:y,callId:b}),this.updateSessionConfig(c),this.emit("connection_change",p(this,Q).status),this._onOpen(),u()}),y.addEventListener("error",C=>{this.close(),this._onError(C),a(C)}),y.addEventListener("message",C=>{this._onMessage(C);const{data:$,isGeneric:q}=es(C);if(!(!$||q)&&($.type==="response.created"?k(this,_t,!0):$.type==="response.done"&&k(this,_t,!1),$.type==="session.created")){this._tracingConfig=$.session.tracing;const G=typeof c.tracing>"u"?"auto":c.tracing;this._updateTracingConfig(G)}});const g=this.options.audioElement??document.createElement("audio");g.autoplay=!0,m.ontrack=C=>{g.srcObject=C.streams[0]};const v=this.options.mediaStream??await navigator.mediaDevices.getUserMedia({audio:!0});if(m.addTrack(v.getAudioTracks()[0]),this.options.changePeerConnection){const C=m;m=await this.options.changePeerConnection(m),C!==m&&(C.onconnectionstatechange=null),_(m),k(this,Q,{...p(this,Q),peerConnection:m})}const w=await m.createOffer();if(await m.setLocalDescription(w),!w.sdp)throw new Error("Failed to create offer");const O=await fetch(h,{method:"POST",body:w.sdp,headers:{"Content-Type":"application/sdp",Authorization:`Bearer ${s}`,"X-OpenAI-Agents-SDK":zu["X-OpenAI-Agents-SDK"]}});b=(d=(l=O.headers)==null?void 0:l.get("Location"))==null?void 0:d.split("/").pop(),k(this,Q,{...p(this,Q),callId:b});const x={type:"answer",sdp:await O.text()};await m.setRemoteDescription(x)}catch(c){this.close(),this._onError(c),a(c)}})}sendEvent(n){if(!p(this,Q).dataChannel||p(this,Q).dataChannel.readyState!=="open")throw new Error("WebRTC data channel is not connected. Make sure you call `connect()` before sending events.");p(this,Q).dataChannel.send(JSON.stringify(n))}mute(n){k(this,tr,n),p(this,Q).peerConnection&&p(this,Q).peerConnection.getSenders().forEach(o=>{o.track&&(o.track.enabled=!n)})}_afterAudioDoneEvent(){k(this,_t,!1)}close(){if(p(this,Q).dataChannel&&p(this,Q).dataChannel.close(),p(this,Q).peerConnection){const n=p(this,Q).peerConnection;n.onconnectionstatechange=null,n.getSenders().forEach(r=>{var o;(o=r.track)==null||o.stop()}),n.close()}p(this,Q).status!=="disconnected"&&(k(this,Q,{status:"disconnected",peerConnection:void 0,dataChannel:void 0,callId:void 0}),this.emit("connection_change",p(this,Q).status),this._onClose())}interrupt(){p(this,_t)&&(this.sendEvent({type:"response.cancel"}),k(this,_t,!1)),this.sendEvent({type:"output_audio_buffer.clear"})}}Qn=new WeakMap,Q=new WeakMap,er=new WeakMap,_t=new WeakMap,tr=new WeakMap;const Nv=globalThis.WebSocket;class ts extends Mn{constructor(n={}){super(n);P(this,Gt);P(this,vt);P(this,jt);P(this,Ft);P(this,me,{status:"disconnected",websocket:void 0});P(this,nr);P(this,rt);P(this,Lt);S(this,"_firstAudioTimestamp");S(this,"_audioLengthMs",0);P(this,Ut,!1);P(this,mn);P(this,rr);k(this,jt,n.url),k(this,Ft,n.url),k(this,nr,n.useInsecureApiKey??!1),k(this,mn,n.createWebSocket),k(this,rr,n.skipOpenEventListeners??!1)}getCommonRequestHeaders(){return zu}get status(){return p(this,me).status}get connectionState(){return p(this,me)}get muted(){return null}get currentItemId(){return p(this,rt)}_onAudio(n){this.emit("audio",n)}_afterAudioDoneEvent(){L(this,Gt,ps).call(this)}async connect(n){const r=n.model??this.currentModel;this.currentModel=r,k(this,vt,await this._getApiKey(n));const o=n.callId;let s;n.url?(s=n.url,k(this,Ft,n.url)):o?s=`wss://api.openai.com/v1/realtime?call_id=${o}`:p(this,Ft)?s=p(this,Ft):s=`wss://api.openai.com/v1/realtime?model=${this.currentModel}`,k(this,jt,s);const i={...n.initialSessionConfig||{},model:this.currentModel};await new Promise((u,a)=>{L(this,Gt,Qu).call(this,u,a,i).catch(a)}),await this.updateSessionConfig(i)}sendEvent(n){if(!p(this,me).websocket)throw new Error("WebSocket is not connected. Make sure you call `connect()` before sending events.");p(this,me).websocket.send(JSON.stringify(n))}close(){var n;(n=p(this,me).websocket)==null||n.close(),k(this,rt,void 0),this._firstAudioTimestamp=void 0,this._audioLengthMs=0,k(this,Lt,void 0)}mute(n){throw new Error("Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.")}sendAudio(n,r={}){p(this,me).status==="connected"&&super.sendAudio(n,r)}_cancelResponse(){p(this,Ut)&&(this.sendEvent({type:"response.cancel"}),k(this,Ut,!1))}_interrupt(n,r=!0){if(n<0)return;r&&this._cancelResponse();const o=this._audioLengthMs??Number.POSITIVE_INFINITY,s=Math.max(0,Math.floor(Math.min(n,o)));this.emit("audio_interrupted"),this.sendEvent({type:"conversation.item.truncate",item_id:p(this,rt),content_index:p(this,Lt),audio_end_ms:s})}interrupt(n=!0){if(!p(this,rt)||typeof this._firstAudioTimestamp!="number")return;const r=Date.now()-this._firstAudioTimestamp;r>=0&&this._interrupt(r,n),L(this,Gt,ps).call(this)}}vt=new WeakMap,jt=new WeakMap,Ft=new WeakMap,me=new WeakMap,nr=new WeakMap,rt=new WeakMap,Lt=new WeakMap,Ut=new WeakMap,mn=new WeakMap,rr=new WeakMap,Gt=new WeakSet,ps=function(){k(this,rt,void 0),this._firstAudioTimestamp=void 0,this._audioLengthMs=0,k(this,Lt,void 0)},Qu=async function(n,r,o){if(p(this,me).websocket){n();return}if(!p(this,vt))throw new Y("API key is not set. Please call `connect()` with an API key first.");if(!p(this,vt).startsWith("ek_")&&!p(this,nr))throw new Y("Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.");let s=null;if(p(this,mn))s=await p(this,mn).call(this,{url:p(this,jt),apiKey:p(this,vt)});else{const u=["realtime","openai-insecure-api-key."+p(this,vt),k_];s=new Nv(p(this,jt),u)}k(this,me,{status:"connecting",websocket:s}),this.emit("connection_change",p(this,me).status);const i=()=>{k(this,me,{status:"connected",websocket:s}),this.emit("connection_change",p(this,me).status),this._onOpen(),n()};p(this,rr)===!0?i():s.addEventListener("open",i),s.addEventListener("error",u=>{this._onError(u),k(this,me,{status:"disconnected",websocket:void 0}),this.emit("connection_change",p(this,me).status),r(u)}),s.addEventListener("message",u=>{var d,c,h,m,y,b,_;this._onMessage(u);const{data:a,isGeneric:l}=es(u);if(!(!a||l)){if(a.type==="response.output_audio.delta"){k(this,Lt,a.content_index),k(this,rt,a.item_id),this._firstAudioTimestamp===void 0&&(this._firstAudioTimestamp=Date.now(),this._audioLengthMs=0);const g=Cu(a.delta),v=(h=(c=(d=this._rawSessionConfig)==null?void 0:d.audio)==null?void 0:c.output)==null?void 0:h.format;if(v&&typeof v=="object"){const O=v.type;if(O==="audio/pcmu"||O==="audio/pcma")this._audioLengthMs+=g.byteLength/8;else if(O==="audio/pcm"){const x=v.rate??24e3;this._audioLengthMs+=g.byteLength/2/x*1e3}else this._audioLengthMs+=g.byteLength/24/2}else typeof v=="string"?v.startsWith("g711_")?this._audioLengthMs+=g.byteLength/8:this._audioLengthMs+=g.byteLength/24/2:this._audioLengthMs+=g.byteLength/24/2;const w={type:"audio",data:g,responseId:a.response_id};this._onAudio(w)}else if(a.type==="input_audio_buffer.speech_started"){const g=((_=(b=(y=(m=this._rawSessionConfig)==null?void 0:m.audio)==null?void 0:y.input)==null?void 0:b.turn_detection)==null?void 0:_.interrupt_response)??!1;this.interrupt(!g)}else if(a.type==="response.created")k(this,Ut,!0);else if(a.type==="response.done")k(this,Ut,!1);else if(a.type==="session.created"){this._tracingConfig=a.session.tracing;const g=typeof o.tracing>"u"?"auto":o.tracing;this._updateTracingConfig(g)}}}),s.addEventListener("close",()=>{k(this,me,{status:"disconnected",websocket:void 0}),this.emit("connection_change",p(this,me).status),this._onClose()})};const Ju=Symbol("backgroundResult");function zv(e){return{[Ju]:!0,content:e}}function Bu(e){return typeof e=="object"&&e!==null&&Ju in e}function Dv(e){return e.type==="function"||e.type==="hosted_tool"&&e.name==="hosted_mcp"}function Zv(e){if(e.type==="function")return e;if(e.type==="hosted_tool"&&e.name==="hosted_mcp"){const t=e.providerData.server_url&&e.providerData.server_url.length>0?e.providerData.server_url:void 0;return{type:"mcp",server_label:e.providerData.server_label,server_url:t,headers:e.providerData.headers,allowed_tools:e.providerData.allowed_tools,require_approval:e.providerData.require_approval}}throw new Y(`Invalid tool type: ${e}`)}function Mv(){return JSON.parse(JSON.stringify(Ge))}const is=class is extends Cr{constructor(n,r={}){super();P(this,ee);S(this,"initialAgent");S(this,"options");P(this,B);P(this,D);P(this,gn);P(this,Z);P(this,yn,[]);P(this,_n);P(this,or,{});P(this,oe,[]);P(this,vn);P(this,wn,{});P(this,Ke,!1);P(this,sr,new Map);P(this,Jt,[]);P(this,ir,Mv());P(this,ar,!0);this.initialAgent=n,this.options=r,typeof r.transport>"u"&&T_()||r.transport==="webrtc"?k(this,B,new Gu):r.transport==="websocket"||typeof r.transport>"u"?k(this,B,new ts):k(this,B,r.transport),k(this,D,n),k(this,Z,new dt({...r.context??{},history:p(this,oe)})),k(this,yn,(r.outputGuardrails??[]).map(C_)),k(this,_n,E_(r.outputGuardrailSettings??{})),k(this,vn,r.historyStoreAudio??!1),k(this,ar,r.automaticallyTriggerResponseForMcpToolCalls??!0)}get transport(){return p(this,B)}get currentAgent(){return p(this,D)}get usage(){return p(this,Z).usage}get context(){return p(this,Z)}get muted(){return p(this,B).muted}get history(){return p(this,oe)}get availableMcpTools(){return p(this,Jt)}async getInitialSessionConfig(n={}){return await L(this,ee,cr).call(this,this.initialAgent),L(this,ee,lr).call(this,{...this.options.config??{},...n??{}})}static async computeInitialSessionConfig(n,r={},o={}){const s=new is(n,r);try{return await s.getInitialSessionConfig(o)}finally{s.close()}}async updateAgent(n){return p(this,D).emit("agent_handoff",p(this,Z),n),this.emit("agent_handoff",p(this,Z),p(this,D),n),await L(this,ee,cr).call(this,n),await p(this,B).updateSessionConfig(await L(this,ee,lr).call(this)),n}async connect(n){await L(this,ee,cr).call(this,this.initialAgent),L(this,ee,nc).call(this),await p(this,B).connect({apiKey:n.apiKey??this.options.apiKey,model:this.options.model,url:n.url,callId:n.callId,initialSessionConfig:await L(this,ee,lr).call(this,this.options.config)}),k(this,oe,[]),this.emit("history_updated",p(this,oe))}updateHistory(n){let r;typeof n=="function"?r=n(p(this,oe)):r=n,p(this,B).resetHistory(p(this,oe),r)}sendMessage(n,r={}){p(this,B).sendMessage(n,r)}addImage(n,{triggerResponse:r=!0}={}){p(this,B).addImage(n,{triggerResponse:r})}mute(n){p(this,B).mute(n)}close(){k(this,wn,{}),p(this,B).close()}sendAudio(n,r={}){p(this,B).sendAudio(n,r)}interrupt(){p(this,B).interrupt()}async approve(n,r={alwaysApprove:!1}){p(this,Z).approveTool(n,r);const o=n.toolName??n.rawItem.name,s=p(this,D).tools.find(i=>i.name===o);if(s&&s.type==="function"&&n.rawItem.type==="function_call")await L(this,ee,Kr).call(this,n.rawItem,s);else if(n.rawItem.type==="hosted_tool_call"){r.alwaysApprove&&Ne.warn("Always approving MCP tools is not supported. Use the allowed tools configuration instead.");const i=Du(n);p(this,B).sendMcpResponse(i,!0)}else throw new Oe(`Tool ${o??"unknown"} not found`)}async reject(n,r={alwaysReject:!1}){p(this,Z).rejectTool(n,r);const o=n.toolName??n.rawItem.name,s=p(this,D).tools.find(i=>i.name===o);if(s&&s.type==="function"&&n.rawItem.type==="function_call")await L(this,ee,Kr).call(this,n.rawItem,s);else if(n.rawItem.type==="hosted_tool_call"){r.alwaysReject&&Ne.warn("Always rejecting MCP tools is not supported. Use the allowed tools configuration instead.");const i=Du(n);p(this,B).sendMcpResponse(i,!1)}else throw new Oe(`Tool ${o??"unknown"} not found`)}};B=new WeakMap,D=new WeakMap,gn=new WeakMap,Z=new WeakMap,yn=new WeakMap,_n=new WeakMap,or=new WeakMap,oe=new WeakMap,vn=new WeakMap,wn=new WeakMap,Ke=new WeakMap,sr=new WeakMap,Jt=new WeakMap,ir=new WeakMap,ar=new WeakMap,ee=new WeakSet,cr=async function(n){k(this,D,n);const r=await p(this,D).getEnabledHandoffs(p(this,Z)),o=r.map(a=>a.getHandoffAsFunctionTool()),s=(await p(this,D).getAllTools(p(this,Z))).filter(Dv).map(Zv),i=typeof p(this,D).tools<"u"||typeof p(this,D).mcpServers<"u",u=r.length>0;k(this,gn,i||u?[...s,...o]:void 0),L(this,ee,fs).call(this)},lr=async function(n={}){const r=n??{},o=this.options.config??{},s=await p(this,D).getSystemPrompt(p(this,Z)),i=m=>{var b;const y=m.audio;return(b=y==null?void 0:y.output)==null?void 0:b.voice},u=this.options.tracingDisabled?null:this.options.workflowName?{workflow_name:this.options.workflowName}:"auto";u!==null&&u!=="auto"?(this.options.groupId&&(u.group_id=this.options.groupId),this.options.traceMetadata&&(u.metadata=this.options.traceMetadata)):(this.options.groupId||this.options.traceMetadata)&&Ne.warn("In order to set traceMetadata or a groupId you need to specify a workflowName.");const a=i(r)??i(o),l=r.voice??o.voice,d=typeof a<"u"?a:typeof l<"u"?l:p(this,D).voice,h={...{...p(this,ir)??{},...o,...r},instructions:s,voice:d,model:this.options.model,tools:p(this,gn),tracing:u,prompt:typeof p(this,D).prompt=="function"?await p(this,D).prompt(p(this,Z),p(this,D)):p(this,D).prompt};return k(this,ir,h),h},ec=async function(n,r){const o=await r.onInvokeHandoff(p(this,Z),n.arguments);p(this,D).emit("agent_handoff",p(this,Z),o),this.emit("agent_handoff",p(this,Z),p(this,D),o),await L(this,ee,cr).call(this,o),await p(this,B).updateSessionConfig(await L(this,ee,lr).call(this));const s=Aa(o);return p(this,B).sendFunctionCallOutput(n,s,!0),o},Kr=async function(n,r){p(this,Z).context.history=JSON.parse(JSON.stringify(p(this,oe)));let o=n.arguments;if(r.parameters&&(It(r.parameters)?o=r.parameters.parse(o):o=JSON.parse(o)),await r.needsApproval(p(this,Z),o,n.callId)){const d=this.context.isToolApproved({toolName:r.name,callId:n.callId});if(d===!1){this.emit("agent_tool_start",p(this,Z),p(this,D),r,{toolCall:n}),p(this,D).emit("agent_tool_start",p(this,Z),r,{toolCall:n});const c="Tool execution was not approved.";p(this,B).sendFunctionCallOutput(n,c,!0),this.emit("agent_tool_end",p(this,Z),p(this,D),r,c,{toolCall:n}),p(this,D).emit("agent_tool_end",p(this,Z),r,c,{toolCall:n});return}else if(typeof d>"u"){this.emit("tool_approval_requested",p(this,Z),p(this,D),{type:"function_approval",tool:r,approvalItem:new pe(n,p(this,D))});return}}const i=await au({guardrails:r.inputGuardrails,context:p(this,Z),agent:p(this,D),toolCall:n});this.emit("agent_tool_start",p(this,Z),p(this,D),r,{toolCall:n}),p(this,D).emit("agent_tool_start",p(this,Z),r,{toolCall:n}),p(this,Z).context.history=JSON.parse(JSON.stringify(p(this,oe)));const u=i.type==="reject"?i.message:await r.invoke(p(this,Z),n.arguments,{toolCall:n}),a=i.type==="reject"?u:await uu({guardrails:r.outputGuardrails,context:p(this,Z),agent:p(this,D),toolCall:n,toolOutput:u});let l;Bu(a)?(l=ot(a.content),p(this,B).sendFunctionCallOutput(n,l,!1)):(l=ot(a),p(this,B).sendFunctionCallOutput(n,l,!0)),this.emit("agent_tool_end",p(this,Z),p(this,D),r,l,{toolCall:n}),p(this,D).emit("agent_tool_end",p(this,Z),r,l,{toolCall:n})},tc=async function(n){const r=await p(this,D).getEnabledHandoffs(p(this,Z)),o=new Map(r.map(a=>[a.toolName,a])),s=await p(this,D).getAllTools(p(this,Z)),i=new Map(s.map(a=>[a.name,a])),u=o.get(n.name);if(u)await L(this,ee,ec).call(this,n,u);else{const a=i.get(n.name);if(a&&a.type==="function")await L(this,ee,Kr).call(this,n,a);else throw new Oe(`Tool ${n.name} not found`)}},ds=async function(n,r,o){if(p(this,yn).length===0)return;const s={agent:p(this,D),agentOutput:n,context:p(this,Z)},u=(await Promise.all(p(this,yn).map(a=>a.run(s)))).find(a=>a.output.tripwireTriggered);if(u){if(p(this,wn)[r])return;p(this,wn)[r]=!0;const a=new fr(`Output guardrail triggered: ${JSON.stringify(u.output.outputInfo)}`,u);this.emit("guardrail_tripped",p(this,Z),p(this,D),a,{itemId:o}),this.interrupt();const l=P_(u);this.sendMessage(l);return}},nc=function(){p(this,B).on("*",o=>{if(this.emit("transport_event",o),o.type==="conversation.item.input_audio_transcription.completed")try{const s=o;k(this,oe,Nu(p(this,oe),s,p(this,vn))),p(this,Z).context.history=p(this,oe),this.emit("history_updated",p(this,oe))}catch(s){this.emit("error",{type:"error",error:s})}}),p(this,B).on("mcp_tools_listed",({serverLabel:o,tools:s})=>{try{p(this,sr).set(o,s??[]),L(this,ee,fs).call(this)}catch(i){this.emit("error",{type:"error",error:i})}}),p(this,B).on("audio",o=>{p(this,Ke)||(k(this,Ke,!0),this.emit("audio_start",p(this,Z),p(this,D))),this.emit("audio",o)}),p(this,B).on("turn_started",()=>{k(this,Ke,!1),this.emit("agent_start",p(this,Z),p(this,D)),p(this,D).emit("agent_start",p(this,Z),p(this,D))}),p(this,B).on("turn_done",o=>{const s=o.response.output[o.response.output.length-1],i=Ru(s)??"",u=(s==null?void 0:s.id)??"";this.emit("agent_end",p(this,Z),p(this,D),i),p(this,D).emit("agent_end",p(this,Z),i),L(this,ee,ds).call(this,i,o.response.id,u)}),p(this,B).on("audio_done",()=>{p(this,Ke)&&k(this,Ke,!1),this.emit("audio_stopped",p(this,Z),p(this,D))});let n=0,r;p(this,B).on("audio_transcript_delta",o=>{try{const s=o.delta,i=o.itemId,u=o.responseId;r!==i&&(r=i,n=0);const l=(p(this,or)[i]??"")+s;if(p(this,or)[i]=l,p(this,_n).debounceTextLength<0)return;const d=Math.floor(l.length/p(this,_n).debounceTextLength);d>n&&(n=d,L(this,ee,ds).call(this,l,u,i))}catch(s){this.emit("error",{type:"error",error:s})}}),p(this,B).on("item_update",o=>{try{const s=!p(this,oe).some(i=>i.itemId===o.itemId);if(k(this,oe,Nu(p(this,oe),o,p(this,vn))),p(this,Z).context.history=p(this,oe),s){const i=p(this,oe).find(u=>u.itemId===o.itemId);i&&this.emit("history_added",i)}this.emit("history_updated",p(this,oe))}catch(s){this.emit("error",{type:"error",error:s})}}),p(this,B).on("item_deleted",o=>{try{k(this,oe,p(this,oe).filter(s=>s.itemId!==o.itemId)),p(this,Z).context.history=p(this,oe),this.emit("history_updated",p(this,oe))}catch(s){this.emit("error",{type:"error",error:s})}}),p(this,B).on("function_call",async o=>{try{await L(this,ee,tc).call(this,o)}catch(s){Ne.error("Error handling function call",s),this.emit("error",{type:"error",error:s})}}),p(this,B).on("usage_update",o=>{p(this,Z).usage.add(o)}),p(this,B).on("audio_interrupted",()=>{p(this,Ke)&&k(this,Ke,!1),this.emit("audio_interrupted",p(this,Z),p(this,D))}),p(this,B).on("error",o=>{this.emit("error",o)}),p(this,B).on("mcp_tool_call_completed",o=>{this.emit("mcp_tool_call_completed",p(this,Z),p(this,D),o),p(this,ar)&&p(this,B).sendEvent({type:"response.create"})}),p(this,B).on("mcp_approval_request",o=>{this.emit("tool_approval_requested",p(this,Z),p(this,D),{type:"mcp_approval_request",approvalItem:O_(p(this,D),o)})})},fs=function(){var a;const n=(a=p(this,gn))==null?void 0:a.filter(l=>l.type==="mcp"),r=l=>{const d=l.allowed_tools;if(d){if(Array.isArray(d))return d;if(d&&Array.isArray(d.tool_names))return d.tool_names}},o=new Map;for(const l of n){const d=p(this,sr).get(l.server_label)??[],c=r(l);for(const h of d)c&&!c.includes(h.name)||o.has(h.name)||o.set(h.name,h)}const s=Array.from(o.values()),i=p(this,Jt);(i.length!==s.length||JSON.stringify(i.map(l=>l.name).sort())!==JSON.stringify(s.map(l=>l.name).sort()))&&(k(this,Jt,s),this.emit("mcp_tools_changed",p(this,Jt)))};let Wr=is;class ns extends ts{constructor(t={}){super(t)}static async buildInitialConfig(t,n={},r={}){const o=await Wr.computeInitialSessionConfig(t,n,r);return new ns().buildSessionPayload(o)}sendAudio(t,n={}){throw new Error("OpenAIRealtimeSIP does not support sending audio buffers; audio is handled by the SIP call.")}async connect(t){if(!t.callId)throw new Y("OpenAIRealtimeSIP requires `callId` in the connect options.");await super.connect(t)}}const jv={base64ToArrayBuffer:Cu,arrayBufferToBase64:Pu,getLastTextFromAudioOutputMessage:Ru};F.DEFAULT_OPENAI_REALTIME_MODEL=Uu,F.DEFAULT_OPENAI_REALTIME_SESSION_CONFIG=Ge,F.ModelBehaviorError=Oe,F.OpenAIRealtimeBase=Mn,F.OpenAIRealtimeSIP=ns,F.OpenAIRealtimeWebRTC=Gu,F.OpenAIRealtimeWebSocket=ts,F.OutputGuardrailTripwireTriggered=fr,F.RealtimeAgent=x_,F.RealtimeSession=Wr,F.UserError=Y,F.backgroundResult=zv,F.isBackgroundResult=Bu,F.tool=vr,F.utils=jv,Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlbmFpLXJlYWx0aW1lLWFnZW50cy51bWQuanMiLCJzb3VyY2VzIjpbIi4uL21ldGFkYXRhLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc2FmZUV4ZWN1dGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvdXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3JlZ2lzdHJpZXMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS90by1qc29uLXNjaGVtYS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbGliL3BhcnNlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL09wdGlvbnMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS91dGlsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvUmVmcy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL2Vycm9yTWVzc2FnZXMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvem9kL3YzL3R5cGVzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2FueS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYXJyYXkubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2JpZ2ludC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYm9vbGVhbi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYnJhbmRlZC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvY2F0Y2gubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2RhdGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2RlZmF1bHQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2VmZmVjdHMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2VudW0ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2ludGVyc2VjdGlvbi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbGl0ZXJhbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvc3RyaW5nLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9yZWNvcmQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL21hcC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbmF0aXZlRW51bS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbmV2ZXIubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bGwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3VuaW9uLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udWxsYWJsZS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVtYmVyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9vYmplY3QubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL29wdGlvbmFsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9waXBlbGluZS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcHJvbWlzZS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvc2V0Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy90dXBsZS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5kZWZpbmVkLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmtub3duLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9yZWFkb25seS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlRGVmLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvem9kVG9Kc29uU2NoZW1hLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbGliL1Jlc3BvbnNlc1BhcnNlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL2xpYi90cmFuc2Zvcm0ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9oZWxwZXJzL3pvZC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2Vycm9ycy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3pvZENvbXBhdC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3R5cGVHdWFyZHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy96b2RKc29uU2NoZW1hQ29tcGF0Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvdG9vbHMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL21zL2luZGV4LmpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvbm9kZV9tb2R1bGVzL2RlYnVnL3NyYy9jb21tb24uanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2Jyb3dzZXIuanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2NvbmZpZy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2xvZ2dlci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3NtYXJ0U3RyaW5nLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdG9vbEd1YXJkcmFpbC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3Rvb2wubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL2NvcmUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvdXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS9lcnJvcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvcGFyc2UuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvcmVnZXhlcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS9jaGVja3MuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvZG9jLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3ZlcnNpb25zLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3NjaGVtYXMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvcmVnaXN0cmllcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS9hcGkuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvdG8tanNvbi1zY2hlbWEuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvanNvbi1zY2hlbWEtcHJvY2Vzc29ycy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY2xhc3NpYy9pc28uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NsYXNzaWMvZXJyb3JzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jbGFzc2ljL3BhcnNlLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jbGFzc2ljL3NjaGVtYXMuanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L21jcC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3NoaW1zL3NoaW1zLWJyb3dzZXIubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9iYXNlNjQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9iaW5hcnkubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5uZXIvaXRlbXMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90eXBlcy9wcm90b2NvbC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3Jlc3VsdC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvY29udGV4dC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvcHJvY2Vzc29yLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy91dGlscy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvc3BhbnMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3RyYWNlcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvcHJvdmlkZXIubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL2NyZWF0ZVNwYW5zLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9pbmRleC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2xpZmVjeWNsZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2RlZmF1bHRNb2RlbC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3VzYWdlLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuQ29udGV4dC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2hhbmRvZmYubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ldmVudHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ndWFyZHJhaWwubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9wcm92aWRlcnMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pdGVtcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bm5lci90b29sVXNlVHJhY2tlci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bm5lci9zdGVwcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1blN0YXRlLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVubmVyL2NvbnN0YW50cy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bm5lci9jb252ZXJzYXRpb24ubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5uZXIvZ3VhcmRyYWlscy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bm5lci9tb2RlbFNldHRpbmdzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVubmVyL21vZGVsT3V0cHV0cy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bm5lci9zdHJlYW1pbmcubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9tZW1vcnkvc2Vzc2lvbi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bm5lci9zZXNzaW9uUGVyc2lzdGVuY2UubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9tZXNzYWdlcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3Rvb2xHdWFyZHJhaWxzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVubmVyL3Rvb2xFeGVjdXRpb24ubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5uZXIvbWNwQXBwcm92YWxzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVubmVyL3R1cm5SZXNvbHV0aW9uLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc2VyaWFsaXplLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVubmVyL3RyYWNpbmcubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5uZXIvbW9kZWxQcmVwYXJhdGlvbi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bm5lci90dXJuUHJlcGFyYXRpb24ubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5uZXIvcnVuTG9vcC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2hlbHBlcnMvbWVzc2FnZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bm5lci9lcnJvckhhbmRsZXJzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvYWdlbnQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9tY3BTZXJ2ZXJzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvaW5kZXgubWpzIiwiLi4vdXRpbHMubWpzIiwiLi4vcmVhbHRpbWVBZ2VudC5tanMiLCIuLi9ndWFyZHJhaWwubWpzIiwiLi4vY2xpZW50TWVzc2FnZXMubWpzIiwiLi4vaXRlbXMubWpzIiwiLi4vbG9nZ2VyLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lQmFzZS5tanMiLCIuLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanMiLCIuLi9zaGltcy9zaGltcy1icm93c2VyLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcyIsIi4uL3Rvb2wubWpzIiwiLi4vcmVhbHRpbWVTZXNzaW9uLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lU2lwLm1qcyIsIi4uL2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGZpbGUgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWRcbmV4cG9ydCBjb25zdCBNRVRBREFUQSA9IHtcbiAgICBcIm5hbWVcIjogXCJAb3BlbmFpL2FnZW50cy1yZWFsdGltZVwiLFxuICAgIFwidmVyc2lvblwiOiBcIjAuNC40XCIsXG4gICAgXCJ2ZXJzaW9uc1wiOiB7XG4gICAgICAgIFwiQG9wZW5haS9hZ2VudHMtcmVhbHRpbWVcIjogXCIwLjQuNFwiLFxuICAgICAgICBcIkBvcGVuYWkvYWdlbnRzLWNvcmVcIjogXCJ3b3Jrc3BhY2U6KlwiXG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IE1FVEFEQVRBO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWV0YWRhdGEubWpzLm1hcCIsImV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWZlRXhlY3V0ZShmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgYXdhaXQgZm4oKV07XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gW2Vycm9yLCBudWxsXTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYWZlRXhlY3V0ZS5tanMubWFwIiwiLy8gZnVuY3Rpb25zXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0RXF1YWwodmFsKSB7XG4gICAgcmV0dXJuIHZhbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnROb3RFcXVhbCh2YWwpIHtcbiAgICByZXR1cm4gdmFsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydElzKF9hcmcpIHsgfVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydE5ldmVyKF94KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCk7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0KF8pIHsgfVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVudW1WYWx1ZXMoZW50cmllcykge1xuICAgIGNvbnN0IG51bWVyaWNWYWx1ZXMgPSBPYmplY3QudmFsdWVzKGVudHJpZXMpLmZpbHRlcigodikgPT4gdHlwZW9mIHYgPT09IFwibnVtYmVyXCIpO1xuICAgIGNvbnN0IHZhbHVlcyA9IE9iamVjdC5lbnRyaWVzKGVudHJpZXMpXG4gICAgICAgIC5maWx0ZXIoKFtrLCBfXSkgPT4gbnVtZXJpY1ZhbHVlcy5pbmRleE9mKCtrKSA9PT0gLTEpXG4gICAgICAgIC5tYXAoKFtfLCB2XSkgPT4gdik7XG4gICAgcmV0dXJuIHZhbHVlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBqb2luVmFsdWVzKGFycmF5LCBzZXBhcmF0b3IgPSBcInxcIikge1xuICAgIHJldHVybiBhcnJheS5tYXAoKHZhbCkgPT4gc3RyaW5naWZ5UHJpbWl0aXZlKHZhbCkpLmpvaW4oc2VwYXJhdG9yKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBqc29uU3RyaW5naWZ5UmVwbGFjZXIoXywgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJpZ2ludFwiKVxuICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5leHBvcnQgZnVuY3Rpb24gY2FjaGVkKGdldHRlcikge1xuICAgIGNvbnN0IHNldCA9IGZhbHNlO1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgICAgIGlmICghc2V0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBnZXR0ZXIoKTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhY2hlZCB2YWx1ZSBhbHJlYWR5IHNldFwiKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG51bGxpc2goaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjbGVhblJlZ2V4KHNvdXJjZSkge1xuICAgIGNvbnN0IHN0YXJ0ID0gc291cmNlLnN0YXJ0c1dpdGgoXCJeXCIpID8gMSA6IDA7XG4gICAgY29uc3QgZW5kID0gc291cmNlLmVuZHNXaXRoKFwiJFwiKSA/IHNvdXJjZS5sZW5ndGggLSAxIDogc291cmNlLmxlbmd0aDtcbiAgICByZXR1cm4gc291cmNlLnNsaWNlKHN0YXJ0LCBlbmQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb2F0U2FmZVJlbWFpbmRlcih2YWwsIHN0ZXApIHtcbiAgICBjb25zdCB2YWxEZWNDb3VudCA9ICh2YWwudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IHN0ZXBEZWNDb3VudCA9IChzdGVwLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBkZWNDb3VudCA9IHZhbERlY0NvdW50ID4gc3RlcERlY0NvdW50ID8gdmFsRGVjQ291bnQgOiBzdGVwRGVjQ291bnQ7XG4gICAgY29uc3QgdmFsSW50ID0gTnVtYmVyLnBhcnNlSW50KHZhbC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgY29uc3Qgc3RlcEludCA9IE51bWJlci5wYXJzZUludChzdGVwLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICByZXR1cm4gKHZhbEludCAlIHN0ZXBJbnQpIC8gMTAgKiogZGVjQ291bnQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lTGF6eShvYmplY3QsIGtleSwgZ2V0dGVyKSB7XG4gICAgY29uc3Qgc2V0ID0gZmFsc2U7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwga2V5LCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGlmICghc2V0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBnZXR0ZXIoKTtcbiAgICAgICAgICAgICAgICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhY2hlZCB2YWx1ZSBhbHJlYWR5IHNldFwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KHYpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIGtleSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2LFxuICAgICAgICAgICAgICAgIC8vIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gb2JqZWN0W2tleV0gPSB2O1xuICAgICAgICB9LFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzaWduUHJvcCh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcCwge1xuICAgICAgICB2YWx1ZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50QXRQYXRoKG9iaiwgcGF0aCkge1xuICAgIGlmICghcGF0aClcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICByZXR1cm4gcGF0aC5yZWR1Y2UoKGFjYywga2V5KSA9PiBhY2M/LltrZXldLCBvYmopO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHByb21pc2VBbGxPYmplY3QocHJvbWlzZXNPYmopIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocHJvbWlzZXNPYmopO1xuICAgIGNvbnN0IHByb21pc2VzID0ga2V5cy5tYXAoKGtleSkgPT4gcHJvbWlzZXNPYmpba2V5XSk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkT2JqID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmVzb2x2ZWRPYmpba2V5c1tpXV0gPSByZXN1bHRzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvbHZlZE9iajtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21TdHJpbmcobGVuZ3RoID0gMTApIHtcbiAgICBjb25zdCBjaGFycyA9IFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIjtcbiAgICBsZXQgc3RyID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHN0ciArPSBjaGFyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpXTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlc2Moc3RyKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHN0cik7XG59XG5leHBvcnQgY29uc3QgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZVxuICAgID8gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2VcbiAgICA6ICguLi5fYXJncykgPT4geyB9O1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KGRhdGEpIHtcbiAgICByZXR1cm4gdHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIgJiYgZGF0YSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShkYXRhKTtcbn1cbmV4cG9ydCBjb25zdCBhbGxvd3NFdmFsID0gY2FjaGVkKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuYXZpZ2F0b3I/LnVzZXJBZ2VudD8uaW5jbHVkZXMoXCJDbG91ZGZsYXJlXCIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgRiA9IEZ1bmN0aW9uO1xuICAgICAgICBuZXcgRihcIlwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChfKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG8pIHtcbiAgICBpZiAoaXNPYmplY3QobykgPT09IGZhbHNlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gbW9kaWZpZWQgY29uc3RydWN0b3JcbiAgICBjb25zdCBjdG9yID0gby5jb25zdHJ1Y3RvcjtcbiAgICBpZiAoY3RvciA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAvLyBtb2RpZmllZCBwcm90b3R5cGVcbiAgICBjb25zdCBwcm90ID0gY3Rvci5wcm90b3R5cGU7XG4gICAgaWYgKGlzT2JqZWN0KHByb3QpID09PSBmYWxzZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vIGN0b3IgZG9lc24ndCBoYXZlIHN0YXRpYyBgaXNQcm90b3R5cGVPZmBcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3QsIFwiaXNQcm90b3R5cGVPZlwiKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBudW1LZXlzKGRhdGEpIHtcbiAgICBsZXQga2V5Q291bnQgPSAwO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpKSB7XG4gICAgICAgICAgICBrZXlDb3VudCsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBrZXlDb3VudDtcbn1cbmV4cG9ydCBjb25zdCBnZXRQYXJzZWRUeXBlID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/IFwibmFuXCIgOiBcIm51bWJlclwiO1xuICAgICAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYm9vbGVhblwiO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCI7XG4gICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBcImJpZ2ludFwiO1xuICAgICAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJzeW1ib2xcIjtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhcnJheVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJudWxsXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS50aGVuICYmIHR5cGVvZiBkYXRhLnRoZW4gPT09IFwiZnVuY3Rpb25cIiAmJiBkYXRhLmNhdGNoICYmIHR5cGVvZiBkYXRhLmNhdGNoID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJwcm9taXNlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIE1hcCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibWFwXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIFNldCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic2V0XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIERhdGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJkYXRlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIEZpbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIEZpbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmaWxlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3RcIjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBkYXRhIHR5cGU6ICR7dH1gKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHByb3BlcnR5S2V5VHlwZXMgPSBuZXcgU2V0KFtcInN0cmluZ1wiLCBcIm51bWJlclwiLCBcInN5bWJvbFwiXSk7XG5leHBvcnQgY29uc3QgcHJpbWl0aXZlVHlwZXMgPSBuZXcgU2V0KFtcInN0cmluZ1wiLCBcIm51bWJlclwiLCBcImJpZ2ludFwiLCBcImJvb2xlYW5cIiwgXCJzeW1ib2xcIiwgXCJ1bmRlZmluZWRcIl0pO1xuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZVJlZ2V4KHN0cikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csIFwiXFxcXCQmXCIpO1xufVxuLy8gem9kLXNwZWNpZmljIHV0aWxzXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoaW5zdCwgZGVmLCBwYXJhbXMpIHtcbiAgICBjb25zdCBjbCA9IG5ldyBpbnN0Ll96b2QuY29uc3RyKGRlZiA/PyBpbnN0Ll96b2QuZGVmKTtcbiAgICBpZiAoIWRlZiB8fCBwYXJhbXM/LnBhcmVudClcbiAgICAgICAgY2wuX3pvZC5wYXJlbnQgPSBpbnN0O1xuICAgIHJldHVybiBjbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVQYXJhbXMoX3BhcmFtcykge1xuICAgIGNvbnN0IHBhcmFtcyA9IF9wYXJhbXM7XG4gICAgaWYgKCFwYXJhbXMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIHsgZXJyb3I6ICgpID0+IHBhcmFtcyB9O1xuICAgIGlmIChwYXJhbXM/Lm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAocGFyYW1zPy5lcnJvciAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHNwZWNpZnkgYm90aCBgbWVzc2FnZWAgYW5kIGBlcnJvcmAgcGFyYW1zXCIpO1xuICAgICAgICBwYXJhbXMuZXJyb3IgPSBwYXJhbXMubWVzc2FnZTtcbiAgICB9XG4gICAgZGVsZXRlIHBhcmFtcy5tZXNzYWdlO1xuICAgIGlmICh0eXBlb2YgcGFyYW1zLmVycm9yID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4geyAuLi5wYXJhbXMsIGVycm9yOiAoKSA9PiBwYXJhbXMuZXJyb3IgfTtcbiAgICByZXR1cm4gcGFyYW1zO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zcGFyZW50UHJveHkoZ2V0dGVyKSB7XG4gICAgbGV0IHRhcmdldDtcbiAgICByZXR1cm4gbmV3IFByb3h5KHt9LCB7XG4gICAgICAgIGdldChfLCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldChfLCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Quc2V0KHRhcmdldCwgcHJvcCwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzKF8sIHByb3ApIHtcbiAgICAgICAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuaGFzKHRhcmdldCwgcHJvcCk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlbGV0ZVByb3BlcnR5KF8sIHByb3ApIHtcbiAgICAgICAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBwcm9wKTtcbiAgICAgICAgfSxcbiAgICAgICAgb3duS2V5cyhfKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF8sIHByb3ApIHtcbiAgICAgICAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcCk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmluZVByb3BlcnR5KF8sIHByb3AsIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wLCBkZXNjcmlwdG9yKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnlQcmltaXRpdmUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJpZ2ludFwiKVxuICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKSArIFwiblwiO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiBgXCIke3ZhbHVlfVwiYDtcbiAgICByZXR1cm4gYCR7dmFsdWV9YDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBvcHRpb25hbEtleXMoc2hhcGUpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoc2hhcGUpLmZpbHRlcigoaykgPT4ge1xuICAgICAgICByZXR1cm4gc2hhcGVba10uX3pvZC5vcHRpbiA9PT0gXCJvcHRpb25hbFwiICYmIHNoYXBlW2tdLl96b2Qub3B0b3V0ID09PSBcIm9wdGlvbmFsXCI7XG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgTlVNQkVSX0ZPUk1BVF9SQU5HRVMgPSB7XG4gICAgc2FmZWludDogW051bWJlci5NSU5fU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUl0sXG4gICAgaW50MzI6IFstMjE0NzQ4MzY0OCwgMjE0NzQ4MzY0N10sXG4gICAgdWludDMyOiBbMCwgNDI5NDk2NzI5NV0sXG4gICAgZmxvYXQzMjogWy0zLjQwMjgyMzQ2NjM4NTI4ODZlMzgsIDMuNDAyODIzNDY2Mzg1Mjg4NmUzOF0sXG4gICAgZmxvYXQ2NDogWy1OdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFXSxcbn07XG5leHBvcnQgY29uc3QgQklHSU5UX0ZPUk1BVF9SQU5HRVMgPSB7XG4gICAgaW50NjQ6IFsvKiBAX19QVVJFX18qLyBCaWdJbnQoXCItOTIyMzM3MjAzNjg1NDc3NTgwOFwiKSwgLyogQF9fUFVSRV9fKi8gQmlnSW50KFwiOTIyMzM3MjAzNjg1NDc3NTgwN1wiKV0sXG4gICAgdWludDY0OiBbLyogQF9fUFVSRV9fKi8gQmlnSW50KDApLCAvKiBAX19QVVJFX18qLyBCaWdJbnQoXCIxODQ0Njc0NDA3MzcwOTU1MTYxNVwiKV0sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBpY2soc2NoZW1hLCBtYXNrKSB7XG4gICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICBjb25zdCBjdXJyRGVmID0gc2NoZW1hLl96b2QuZGVmOyAvLy5zaGFwZTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBtYXNrKSB7XG4gICAgICAgIGlmICghKGtleSBpbiBjdXJyRGVmLnNoYXBlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQga2V5OiBcIiR7a2V5fVwiYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtYXNrW2tleV0pXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgLy8gcGljayBrZXlcbiAgICAgICAgbmV3U2hhcGVba2V5XSA9IGN1cnJEZWYuc2hhcGVba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwge1xuICAgICAgICAuLi5zY2hlbWEuX3pvZC5kZWYsXG4gICAgICAgIHNoYXBlOiBuZXdTaGFwZSxcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBvbWl0KHNjaGVtYSwgbWFzaykge1xuICAgIGNvbnN0IG5ld1NoYXBlID0geyAuLi5zY2hlbWEuX3pvZC5kZWYuc2hhcGUgfTtcbiAgICBjb25zdCBjdXJyRGVmID0gc2NoZW1hLl96b2QuZGVmOyAvLy5zaGFwZTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBtYXNrKSB7XG4gICAgICAgIGlmICghKGtleSBpbiBjdXJyRGVmLnNoYXBlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQga2V5OiBcIiR7a2V5fVwiYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtYXNrW2tleV0pXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgZGVsZXRlIG5ld1NoYXBlW2tleV07XG4gICAgfVxuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIHtcbiAgICAgICAgLi4uc2NoZW1hLl96b2QuZGVmLFxuICAgICAgICBzaGFwZTogbmV3U2hhcGUsXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKHNjaGVtYSwgc2hhcGUpIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3Qoc2hhcGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgdG8gZXh0ZW5kOiBleHBlY3RlZCBhIHBsYWluIG9iamVjdFwiKTtcbiAgICB9XG4gICAgY29uc3QgZGVmID0ge1xuICAgICAgICAuLi5zY2hlbWEuX3pvZC5kZWYsXG4gICAgICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IF9zaGFwZSA9IHsgLi4uc2NoZW1hLl96b2QuZGVmLnNoYXBlLCAuLi5zaGFwZSB9O1xuICAgICAgICAgICAgYXNzaWduUHJvcCh0aGlzLCBcInNoYXBlXCIsIF9zaGFwZSk7IC8vIHNlbGYtY2FjaGluZ1xuICAgICAgICAgICAgcmV0dXJuIF9zaGFwZTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hlY2tzOiBbXSwgLy8gZGVsZXRlIGV4aXN0aW5nIGNoZWNrc1xuICAgIH07XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwgZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZShhLCBiKSB7XG4gICAgcmV0dXJuIGNsb25lKGEsIHtcbiAgICAgICAgLi4uYS5fem9kLmRlZixcbiAgICAgICAgZ2V0IHNoYXBlKCkge1xuICAgICAgICAgICAgY29uc3QgX3NoYXBlID0geyAuLi5hLl96b2QuZGVmLnNoYXBlLCAuLi5iLl96b2QuZGVmLnNoYXBlIH07XG4gICAgICAgICAgICBhc3NpZ25Qcm9wKHRoaXMsIFwic2hhcGVcIiwgX3NoYXBlKTsgLy8gc2VsZi1jYWNoaW5nXG4gICAgICAgICAgICByZXR1cm4gX3NoYXBlO1xuICAgICAgICB9LFxuICAgICAgICBjYXRjaGFsbDogYi5fem9kLmRlZi5jYXRjaGFsbCxcbiAgICAgICAgY2hlY2tzOiBbXSwgLy8gZGVsZXRlIGV4aXN0aW5nIGNoZWNrc1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpYWwoQ2xhc3MsIHNjaGVtYSwgbWFzaykge1xuICAgIGNvbnN0IG9sZFNoYXBlID0gc2NoZW1hLl96b2QuZGVmLnNoYXBlO1xuICAgIGNvbnN0IHNoYXBlID0geyAuLi5vbGRTaGFwZSB9O1xuICAgIGlmIChtYXNrKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1hc2spIHtcbiAgICAgICAgICAgIGlmICghKGtleSBpbiBvbGRTaGFwZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXk6IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgLy8gaWYgKG9sZFNoYXBlW2tleV0hLl96b2Qub3B0aW4gPT09IFwib3B0aW9uYWxcIikgY29udGludWU7XG4gICAgICAgICAgICBzaGFwZVtrZXldID0gQ2xhc3NcbiAgICAgICAgICAgICAgICA/IG5ldyBDbGFzcyh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib3B0aW9uYWxcIixcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiBvbGRTaGFwZVtrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRTaGFwZSkge1xuICAgICAgICAgICAgLy8gaWYgKG9sZFNoYXBlW2tleV0hLl96b2Qub3B0aW4gPT09IFwib3B0aW9uYWxcIikgY29udGludWU7XG4gICAgICAgICAgICBzaGFwZVtrZXldID0gQ2xhc3NcbiAgICAgICAgICAgICAgICA/IG5ldyBDbGFzcyh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib3B0aW9uYWxcIixcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiBvbGRTaGFwZVtrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIHtcbiAgICAgICAgLi4uc2NoZW1hLl96b2QuZGVmLFxuICAgICAgICBzaGFwZSxcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlZChDbGFzcywgc2NoZW1hLCBtYXNrKSB7XG4gICAgY29uc3Qgb2xkU2hhcGUgPSBzY2hlbWEuX3pvZC5kZWYuc2hhcGU7XG4gICAgY29uc3Qgc2hhcGUgPSB7IC4uLm9sZFNoYXBlIH07XG4gICAgaWYgKG1hc2spIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICAgICAgaWYgKCEoa2V5IGluIHNoYXBlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogXCIke2tleX1cImApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAvLyBvdmVyd3JpdGUgd2l0aCBub24tb3B0aW9uYWxcbiAgICAgICAgICAgIHNoYXBlW2tleV0gPSBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwibm9ub3B0aW9uYWxcIixcbiAgICAgICAgICAgICAgICBpbm5lclR5cGU6IG9sZFNoYXBlW2tleV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2xkU2hhcGUpIHtcbiAgICAgICAgICAgIC8vIG92ZXJ3cml0ZSB3aXRoIG5vbi1vcHRpb25hbFxuICAgICAgICAgICAgc2hhcGVba2V5XSA9IG5ldyBDbGFzcyh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJub25vcHRpb25hbFwiLFxuICAgICAgICAgICAgICAgIGlubmVyVHlwZTogb2xkU2hhcGVba2V5XSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIHtcbiAgICAgICAgLi4uc2NoZW1hLl96b2QuZGVmLFxuICAgICAgICBzaGFwZSxcbiAgICAgICAgLy8gb3B0aW9uYWw6IFtdLFxuICAgICAgICBjaGVja3M6IFtdLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFib3J0ZWQoeCwgc3RhcnRJbmRleCA9IDApIHtcbiAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IHguaXNzdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICh4Lmlzc3Vlc1tpXT8uY29udGludWUgIT09IHRydWUpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHByZWZpeElzc3VlcyhwYXRoLCBpc3N1ZXMpIHtcbiAgICByZXR1cm4gaXNzdWVzLm1hcCgoaXNzKSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgKF9hID0gaXNzKS5wYXRoID8/IChfYS5wYXRoID0gW10pO1xuICAgICAgICBpc3MucGF0aC51bnNoaWZ0KHBhdGgpO1xuICAgICAgICByZXR1cm4gaXNzO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVud3JhcE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIHJldHVybiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IG1lc3NhZ2UgOiBtZXNzYWdlPy5tZXNzYWdlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvbmZpZykge1xuICAgIGNvbnN0IGZ1bGwgPSB7IC4uLmlzcywgcGF0aDogaXNzLnBhdGggPz8gW10gfTtcbiAgICAvLyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICBpZiAoIWlzcy5tZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB1bndyYXBNZXNzYWdlKGlzcy5pbnN0Py5fem9kLmRlZj8uZXJyb3I/Lihpc3MpKSA/P1xuICAgICAgICAgICAgdW53cmFwTWVzc2FnZShjdHg/LmVycm9yPy4oaXNzKSkgPz9cbiAgICAgICAgICAgIHVud3JhcE1lc3NhZ2UoY29uZmlnLmN1c3RvbUVycm9yPy4oaXNzKSkgPz9cbiAgICAgICAgICAgIHVud3JhcE1lc3NhZ2UoY29uZmlnLmxvY2FsZUVycm9yPy4oaXNzKSkgPz9cbiAgICAgICAgICAgIFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICBmdWxsLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIH1cbiAgICAvLyBkZWxldGUgKGZ1bGwgYXMgYW55KS5kZWY7XG4gICAgZGVsZXRlIGZ1bGwuaW5zdDtcbiAgICBkZWxldGUgZnVsbC5jb250aW51ZTtcbiAgICBpZiAoIWN0eD8ucmVwb3J0SW5wdXQpIHtcbiAgICAgICAgZGVsZXRlIGZ1bGwuaW5wdXQ7XG4gICAgfVxuICAgIHJldHVybiBmdWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFNpemFibGVPcmlnaW4oaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBTZXQpXG4gICAgICAgIHJldHVybiBcInNldFwiO1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIE1hcClcbiAgICAgICAgcmV0dXJuIFwibWFwXCI7XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgRmlsZSlcbiAgICAgICAgcmV0dXJuIFwiZmlsZVwiO1xuICAgIHJldHVybiBcInVua25vd25cIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZW5ndGhhYmxlT3JpZ2luKGlucHV0KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKVxuICAgICAgICByZXR1cm4gXCJhcnJheVwiO1xuICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgIHJldHVybiBcInVua25vd25cIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc3N1ZSguLi5hcmdzKSB7XG4gICAgY29uc3QgW2lzcywgaW5wdXQsIGluc3RdID0gYXJncztcbiAgICBpZiAodHlwZW9mIGlzcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWVzc2FnZTogaXNzLFxuICAgICAgICAgICAgY29kZTogXCJjdXN0b21cIixcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgLi4uaXNzIH07XG59XG5leHBvcnQgZnVuY3Rpb24gY2xlYW5FbnVtKG9iaikge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhvYmopXG4gICAgICAgIC5maWx0ZXIoKFtrLCBfXSkgPT4ge1xuICAgICAgICAvLyByZXR1cm4gdHJ1ZSBpZiBOYU4sIG1lYW5pbmcgaXQncyBub3QgYSBudW1iZXIsIHRodXMgYSBzdHJpbmcga2V5XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oTnVtYmVyLnBhcnNlSW50KGssIDEwKSk7XG4gICAgfSlcbiAgICAgICAgLm1hcCgoZWwpID0+IGVsWzFdKTtcbn1cbi8vIGluc3RhbmNlb2ZcbmV4cG9ydCBjbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uX2FyZ3MpIHsgfVxufVxuIiwiZXhwb3J0IGNvbnN0ICRvdXRwdXQgPSBTeW1ib2woXCJab2RPdXRwdXRcIik7XG5leHBvcnQgY29uc3QgJGlucHV0ID0gU3ltYm9sKFwiWm9kSW5wdXRcIik7XG5leHBvcnQgY2xhc3MgJFpvZFJlZ2lzdHJ5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9pZG1hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgYWRkKHNjaGVtYSwgLi4uX21ldGEpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IF9tZXRhWzBdO1xuICAgICAgICB0aGlzLl9tYXAuc2V0KHNjaGVtYSwgbWV0YSk7XG4gICAgICAgIGlmIChtZXRhICYmIHR5cGVvZiBtZXRhID09PSBcIm9iamVjdFwiICYmIFwiaWRcIiBpbiBtZXRhKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faWRtYXAuaGFzKG1ldGEuaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJRCAke21ldGEuaWR9IGFscmVhZHkgZXhpc3RzIGluIHRoZSByZWdpc3RyeWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5faWRtYXAuc2V0KG1ldGEuaWQsIHNjaGVtYSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9tYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX2lkbWFwID0gbmV3IE1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVtb3ZlKHNjaGVtYSkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fbWFwLmdldChzY2hlbWEpO1xuICAgICAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PT0gXCJvYmplY3RcIiAmJiBcImlkXCIgaW4gbWV0YSkge1xuICAgICAgICAgICAgdGhpcy5faWRtYXAuZGVsZXRlKG1ldGEuaWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21hcC5kZWxldGUoc2NoZW1hKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldChzY2hlbWEpIHtcbiAgICAgICAgLy8gcmV0dXJuIHRoaXMuX21hcC5nZXQoc2NoZW1hKSBhcyBhbnk7XG4gICAgICAgIC8vIGluaGVyaXQgbWV0YWRhdGFcbiAgICAgICAgY29uc3QgcCA9IHNjaGVtYS5fem9kLnBhcmVudDtcbiAgICAgICAgaWYgKHApIHtcbiAgICAgICAgICAgIGNvbnN0IHBtID0geyAuLi4odGhpcy5nZXQocCkgPz8ge30pIH07XG4gICAgICAgICAgICBkZWxldGUgcG0uaWQ7IC8vIGRvIG5vdCBpbmhlcml0IGlkXG4gICAgICAgICAgICByZXR1cm4geyAuLi5wbSwgLi4udGhpcy5fbWFwLmdldChzY2hlbWEpIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5nZXQoc2NoZW1hKTtcbiAgICB9XG4gICAgaGFzKHNjaGVtYSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLmhhcyhzY2hlbWEpO1xuICAgIH1cbn1cbi8vIHJlZ2lzdHJpZXNcbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RyeSgpIHtcbiAgICByZXR1cm4gbmV3ICRab2RSZWdpc3RyeSgpO1xufVxuZXhwb3J0IGNvbnN0IGdsb2JhbFJlZ2lzdHJ5ID0gLypAX19QVVJFX18qLyByZWdpc3RyeSgpO1xuIiwiaW1wb3J0IHsgJFpvZFJlZ2lzdHJ5LCBnbG9iYWxSZWdpc3RyeSB9IGZyb20gXCIuL3JlZ2lzdHJpZXMuanNcIjtcbmltcG9ydCB7IGdldEVudW1WYWx1ZXMgfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5leHBvcnQgY2xhc3MgSlNPTlNjaGVtYUdlbmVyYXRvciB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIHRoaXMuY291bnRlciA9IDA7XG4gICAgICAgIHRoaXMubWV0YWRhdGFSZWdpc3RyeSA9IHBhcmFtcz8ubWV0YWRhdGEgPz8gZ2xvYmFsUmVnaXN0cnk7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gcGFyYW1zPy50YXJnZXQgPz8gXCJkcmFmdC0yMDIwLTEyXCI7XG4gICAgICAgIHRoaXMudW5yZXByZXNlbnRhYmxlID0gcGFyYW1zPy51bnJlcHJlc2VudGFibGUgPz8gXCJ0aHJvd1wiO1xuICAgICAgICB0aGlzLm92ZXJyaWRlID0gcGFyYW1zPy5vdmVycmlkZSA/PyAoKCkgPT4geyB9KTtcbiAgICAgICAgdGhpcy5pbyA9IHBhcmFtcz8uaW8gPz8gXCJvdXRwdXRcIjtcbiAgICAgICAgdGhpcy5zZWVuID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBwcm9jZXNzKHNjaGVtYSwgX3BhcmFtcyA9IHsgcGF0aDogW10sIHNjaGVtYVBhdGg6IFtdIH0pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgICAgIGNvbnN0IGZvcm1hdE1hcCA9IHtcbiAgICAgICAgICAgIGd1aWQ6IFwidXVpZFwiLFxuICAgICAgICAgICAgdXJsOiBcInVyaVwiLFxuICAgICAgICAgICAgZGF0ZXRpbWU6IFwiZGF0ZS10aW1lXCIsXG4gICAgICAgICAgICBqc29uX3N0cmluZzogXCJqc29uLXN0cmluZ1wiLFxuICAgICAgICAgICAgcmVnZXg6IFwiXCIsIC8vIGRvIG5vdCBzZXRcbiAgICAgICAgfTtcbiAgICAgICAgLy8gY2hlY2sgZm9yIHNjaGVtYSBpbiBzZWVuc1xuICAgICAgICBjb25zdCBzZWVuID0gdGhpcy5zZWVuLmdldChzY2hlbWEpO1xuICAgICAgICBpZiAoc2Vlbikge1xuICAgICAgICAgICAgc2Vlbi5jb3VudCsrO1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgY3ljbGVcbiAgICAgICAgICAgIGNvbnN0IGlzQ3ljbGUgPSBfcGFyYW1zLnNjaGVtYVBhdGguaW5jbHVkZXMoc2NoZW1hKTtcbiAgICAgICAgICAgIGlmIChpc0N5Y2xlKSB7XG4gICAgICAgICAgICAgICAgc2Vlbi5jeWNsZSA9IF9wYXJhbXMucGF0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWVuLnNjaGVtYTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbml0aWFsaXplXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgc2NoZW1hOiB7fSwgY291bnQ6IDEsIGN5Y2xlOiB1bmRlZmluZWQsIHBhdGg6IF9wYXJhbXMucGF0aCB9O1xuICAgICAgICB0aGlzLnNlZW4uc2V0KHNjaGVtYSwgcmVzdWx0KTtcbiAgICAgICAgLy8gY3VzdG9tIG1ldGhvZCBvdmVycmlkZXMgZGVmYXVsdCBiZWhhdmlvclxuICAgICAgICBjb25zdCBvdmVycmlkZVNjaGVtYSA9IHNjaGVtYS5fem9kLnRvSlNPTlNjaGVtYT8uKCk7XG4gICAgICAgIGlmIChvdmVycmlkZVNjaGVtYSkge1xuICAgICAgICAgICAgcmVzdWx0LnNjaGVtYSA9IG92ZXJyaWRlU2NoZW1hO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIC4uLl9wYXJhbXMsXG4gICAgICAgICAgICAgICAgc2NoZW1hUGF0aDogWy4uLl9wYXJhbXMuc2NoZW1hUGF0aCwgc2NoZW1hXSxcbiAgICAgICAgICAgICAgICBwYXRoOiBfcGFyYW1zLnBhdGgsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gc2NoZW1hLl96b2QucGFyZW50O1xuICAgICAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgICAgIC8vIHNjaGVtYSB3YXMgY2xvbmVkIGZyb20gYW5vdGhlciBzY2hlbWFcbiAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gcGFyZW50O1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2VzcyhwYXJlbnQsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWVuLmdldChwYXJlbnQpLmlzUGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IF9qc29uID0gcmVzdWx0LnNjaGVtYTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRlZi50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbWluaW11bSwgbWF4aW11bSwgZm9ybWF0LCBwYXR0ZXJucywgY29udGVudEVuY29kaW5nIH0gPSBzY2hlbWEuX3pvZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1pbmltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5taW5MZW5ndGggPSBtaW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXhpbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWF4TGVuZ3RoID0gbWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1c3RvbSBwYXR0ZXJuIG92ZXJyaWRlcyBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JtYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmZvcm1hdCA9IGZvcm1hdE1hcFtmb3JtYXRdID8/IGZvcm1hdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5mb3JtYXQgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLmZvcm1hdDsgLy8gZW1wdHkgZm9ybWF0IGlzIG5vdCB2YWxpZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRFbmNvZGluZylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmNvbnRlbnRFbmNvZGluZyA9IGNvbnRlbnRFbmNvZGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXR0ZXJucyAmJiBwYXR0ZXJucy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ZXMgPSBbLi4ucGF0dGVybnNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWdleGVzLmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5wYXR0ZXJuID0gcmVnZXhlc1swXS5zb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocmVnZXhlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zY2hlbWEuYWxsT2YgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5yZWdleGVzLm1hcCgocmVnZXgpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uKHRoaXMudGFyZ2V0ID09PSBcImRyYWZ0LTdcIiA/IHsgdHlwZTogXCJzdHJpbmdcIiB9IDoge30pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm46IHJlZ2V4LnNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibnVtYmVyXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbWluaW11bSwgbWF4aW11bSwgZm9ybWF0LCBtdWx0aXBsZU9mLCBleGNsdXNpdmVNYXhpbXVtLCBleGNsdXNpdmVNaW5pbXVtIH0gPSBzY2hlbWEuX3pvZC5iYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZvcm1hdCA9PT0gXCJzdHJpbmdcIiAmJiBmb3JtYXQuaW5jbHVkZXMoXCJpbnRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJpbnRlZ2VyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJudW1iZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXhjbHVzaXZlTWluaW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmV4Y2x1c2l2ZU1pbmltdW0gPSBleGNsdXNpdmVNaW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaW5pbXVtID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5taW5pbXVtID0gbWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1pbmltdW0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4Y2x1c2l2ZU1pbmltdW0gPj0gbWluaW11bSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLm1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLmV4Y2x1c2l2ZU1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGNsdXNpdmVNYXhpbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uZXhjbHVzaXZlTWF4aW11bSA9IGV4Y2x1c2l2ZU1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1heGltdW0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1heGltdW0gPSBtYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXhjbHVzaXZlTWF4aW11bSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhjbHVzaXZlTWF4aW11bSA8PSBtYXhpbXVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGpzb24ubWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGpzb24uZXhjbHVzaXZlTWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG11bHRpcGxlT2YgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5tdWx0aXBsZU9mID0gbXVsdGlwbGVPZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJib29sZWFuXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwiYm9vbGVhblwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImJpZ2ludFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJpZ0ludCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3ltYm9sXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3ltYm9scyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibnVsbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfanNvbi50eXBlID0gXCJudWxsXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYW55XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ1bmtub3duXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmRlZmluZWQgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInZvaWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWb2lkIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuZXZlclwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfanNvbi5ub3QgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkYXRlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0ZSBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXlcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtaW5pbXVtLCBtYXhpbXVtIH0gPSBzY2hlbWEuX3pvZC5iYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1pbmltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5taW5JdGVtcyA9IG1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1heGltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5tYXhJdGVtcyA9IG1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcImFycmF5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLml0ZW1zID0gdGhpcy5wcm9jZXNzKGRlZi5lbGVtZW50LCB7IC4uLnBhcmFtcywgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcIml0ZW1zXCJdIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm9iamVjdFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcIm9iamVjdFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5wcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaGFwZSA9IGRlZi5zaGFwZTsgLy8gcGFyYW1zLnNoYXBlQ2FjaGUuZ2V0KHNjaGVtYSkhO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2hhcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnByb3BlcnRpZXNba2V5XSA9IHRoaXMucHJvY2VzcyhzaGFwZVtrZXldLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcInByb3BlcnRpZXNcIiwga2V5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcXVpcmVkIGtleXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbEtleXMgPSBuZXcgU2V0KE9iamVjdC5rZXlzKHNoYXBlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCBvcHRpb25hbEtleXMgPSBuZXcgU2V0KGRlZi5vcHRpb25hbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXF1aXJlZEtleXMgPSBuZXcgU2V0KFsuLi5hbGxLZXlzXS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSBkZWYuc2hhcGVba2V5XS5fem9kO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlvID09PSBcImlucHV0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYub3B0aW4gPT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2Lm9wdG91dCA9PT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXF1aXJlZEtleXMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnJlcXVpcmVkID0gQXJyYXkuZnJvbShyZXF1aXJlZEtleXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2F0Y2hhbGxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWYuY2F0Y2hhbGw/Ll96b2QuZGVmLnR5cGUgPT09IFwibmV2ZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0cmljdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uYWRkaXRpb25hbFByb3BlcnRpZXMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFkZWYuY2F0Y2hhbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWd1bGFyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW8gPT09IFwib3V0cHV0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uYWRkaXRpb25hbFByb3BlcnRpZXMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRlZi5jYXRjaGFsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uYWRkaXRpb25hbFByb3BlcnRpZXMgPSB0aGlzLnByb2Nlc3MoZGVmLmNhdGNoYWxsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInVuaW9uXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uYW55T2YgPSBkZWYub3B0aW9ucy5tYXAoKHgsIGkpID0+IHRoaXMucHJvY2Vzcyh4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJhbnlPZlwiLCBpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbnRlcnNlY3Rpb25cIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IHRoaXMucHJvY2VzcyhkZWYubGVmdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYWxsT2ZcIiwgMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSB0aGlzLnByb2Nlc3MoZGVmLnJpZ2h0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJhbGxPZlwiLCAxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNTaW1wbGVJbnRlcnNlY3Rpb24gPSAodmFsKSA9PiBcImFsbE9mXCIgaW4gdmFsICYmIE9iamVjdC5rZXlzKHZhbCkubGVuZ3RoID09PSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsT2YgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGlzU2ltcGxlSW50ZXJzZWN0aW9uKGEpID8gYS5hbGxPZiA6IFthXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGlzU2ltcGxlSW50ZXJzZWN0aW9uKGIpID8gYi5hbGxPZiA6IFtiXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hbGxPZiA9IGFsbE9mO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInR1cGxlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwiYXJyYXlcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZWZpeEl0ZW1zID0gZGVmLml0ZW1zLm1hcCgoeCwgaSkgPT4gdGhpcy5wcm9jZXNzKHgsIHsgLi4ucGFyYW1zLCBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwicHJlZml4SXRlbXNcIiwgaV0gfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucHJlZml4SXRlbXMgPSBwcmVmaXhJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uaXRlbXMgPSBwcmVmaXhJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWYucmVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3QgPSB0aGlzLnByb2Nlc3MoZGVmLnJlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiaXRlbXNcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLml0ZW1zID0gcmVzdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uYWRkaXRpb25hbEl0ZW1zID0gcmVzdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGRpdGlvbmFsSXRlbXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWYucmVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uaXRlbXMgPSB0aGlzLnByb2Nlc3MoZGVmLnJlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiaXRlbXNcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbWluaW11bSwgbWF4aW11bSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaW5pbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWluSXRlbXMgPSBtaW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXhpbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWF4SXRlbXMgPSBtYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJlY29yZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcIm9iamVjdFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5wcm9wZXJ0eU5hbWVzID0gdGhpcy5wcm9jZXNzKGRlZi5rZXlUeXBlLCB7IC4uLnBhcmFtcywgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcInByb3BlcnR5TmFtZXNcIl0gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gdGhpcy5wcm9jZXNzKGRlZi52YWx1ZVR5cGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibWFwXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWFwIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzZXRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTZXQgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVudW1cIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gZ2V0RW51bVZhbHVlcyhkZWYuZW50cmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOdW1iZXIgZW51bXMgY2FuIGhhdmUgYm90aCBzdHJpbmcgYW5kIG51bWJlciB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZXMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcIm51bWJlclwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcIm51bWJlclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlcy5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwic3RyaW5nXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLmVudW0gPSB2YWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibGl0ZXJhbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiBkZWYudmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMaXRlcmFsIGB1bmRlZmluZWRgIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBhZGQgdG8gdmFsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJpZ0ludCBsaXRlcmFscyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxzLnB1c2goTnVtYmVyKHZhbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxzLnB1c2godmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nIChhbiB1bmRlZmluZWQgbGl0ZXJhbCB3YXMgc3RyaXBwZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWxzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHZhbHNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gdmFsID09PSBudWxsID8gXCJudWxsXCIgOiB0eXBlb2YgdmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uY29uc3QgPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFscy5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09IFwibnVtYmVyXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcIm51bWJlclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwic3RyaW5nXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcImJvb2xlYW5cIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwic3RyaW5nXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHMuZXZlcnkoKHYpID0+IHYgPT09IG51bGwpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcIm51bGxcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmVudW0gPSB2YWxzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZpbGVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogXCJiaW5hcnlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50RW5jb2Rpbmc6IFwiYmluYXJ5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtaW5pbXVtLCBtYXhpbXVtLCBtaW1lIH0gPSBzY2hlbWEuX3pvZC5iYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWluaW11bSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUubWluTGVuZ3RoID0gbWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXhpbXVtICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5tYXhMZW5ndGggPSBtYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWltZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5jb250ZW50TWVkaWFUeXBlID0gbWltZVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihqc29uLCBmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uYW55T2YgPSBtaW1lLm1hcCgobSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbUZpbGUgPSB7IC4uLmZpbGUsIGNvbnRlbnRNZWRpYVR5cGU6IG0gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtRmlsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihqc29uLCBmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHRocm93IG5ldyBFcnJvcihcIkZpbGUgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zZm9ybVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyYW5zZm9ybXMgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm51bGxhYmxlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlubmVyID0gdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfanNvbi5hbnlPZiA9IFtpbm5lciwgeyB0eXBlOiBcIm51bGxcIiB9XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub25vcHRpb25hbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN1Y2Nlc3NcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJib29sZWFuXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGVmYXVsdFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24uZGVmYXVsdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGVmLmRlZmF1bHRWYWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInByZWZhdWx0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbyA9PT0gXCJpbnB1dFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLl9wcmVmYXVsdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGVmLmRlZmF1bHRWYWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNhdGNoXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZSBjb25kaXRpb25hbHNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2F0Y2hWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2hWYWx1ZSA9IGRlZi5jYXRjaFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRHluYW1pYyBjYXRjaCB2YWx1ZXMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfanNvbi5kZWZhdWx0ID0gY2F0Y2hWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYW5cIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOYU4gY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRlbXBsYXRlX2xpdGVyYWxcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF0dGVybiA9IHNjaGVtYS5fem9kLnBhdHRlcm47XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhdHRlcm4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGF0dGVybiBub3QgZm91bmQgaW4gdGVtcGxhdGUgbGl0ZXJhbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwic3RyaW5nXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnBhdHRlcm4gPSBwYXR0ZXJuLnNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwaXBlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlubmVyVHlwZSA9IHRoaXMuaW8gPT09IFwiaW5wdXRcIiA/IChkZWYuaW4uX3pvZC5kZWYudHlwZSA9PT0gXCJ0cmFuc2Zvcm1cIiA/IGRlZi5vdXQgOiBkZWYuaW4pIDogZGVmLm91dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzcyhpbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJlYWRvbmx5XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfanNvbi5yZWFkT25seSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBwYXNzdGhyb3VnaCB0eXBlc1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicHJvbWlzZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm9wdGlvbmFsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibGF6eVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbm5lclR5cGUgPSBzY2hlbWEuX3pvZC5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjdXN0b21cIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDdXN0b20gdHlwZXMgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIG1ldGFkYXRhXG4gICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLm1ldGFkYXRhUmVnaXN0cnkuZ2V0KHNjaGVtYSk7XG4gICAgICAgIGlmIChtZXRhKVxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihyZXN1bHQuc2NoZW1hLCBtZXRhKTtcbiAgICAgICAgaWYgKHRoaXMuaW8gPT09IFwiaW5wdXRcIiAmJiBpc1RyYW5zZm9ybWluZyhzY2hlbWEpKSB7XG4gICAgICAgICAgICAvLyBleGFtcGxlcy9kZWZhdWx0cyBvbmx5IGFwcGx5IHRvIG91dHB1dCB0eXBlIG9mIHBpcGVcbiAgICAgICAgICAgIGRlbGV0ZSByZXN1bHQuc2NoZW1hLmV4YW1wbGVzO1xuICAgICAgICAgICAgZGVsZXRlIHJlc3VsdC5zY2hlbWEuZGVmYXVsdDtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXQgcHJlZmF1bHQgYXMgZGVmYXVsdFxuICAgICAgICBpZiAodGhpcy5pbyA9PT0gXCJpbnB1dFwiICYmIHJlc3VsdC5zY2hlbWEuX3ByZWZhdWx0KVxuICAgICAgICAgICAgKF9hID0gcmVzdWx0LnNjaGVtYSkuZGVmYXVsdCA/PyAoX2EuZGVmYXVsdCA9IHJlc3VsdC5zY2hlbWEuX3ByZWZhdWx0KTtcbiAgICAgICAgZGVsZXRlIHJlc3VsdC5zY2hlbWEuX3ByZWZhdWx0O1xuICAgICAgICAvLyBwdWxsaW5nIGZyZXNoIGZyb20gdGhpcy5zZWVuIGluIGNhc2UgaXQgd2FzIG92ZXJ3cml0dGVuXG4gICAgICAgIGNvbnN0IF9yZXN1bHQgPSB0aGlzLnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgICAgIHJldHVybiBfcmVzdWx0LnNjaGVtYTtcbiAgICB9XG4gICAgZW1pdChzY2hlbWEsIF9wYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgY3ljbGVzOiBfcGFyYW1zPy5jeWNsZXMgPz8gXCJyZWZcIixcbiAgICAgICAgICAgIHJldXNlZDogX3BhcmFtcz8ucmV1c2VkID8/IFwiaW5saW5lXCIsXG4gICAgICAgICAgICAvLyB1bnJlcHJlc2VudGFibGU6IF9wYXJhbXM/LnVucmVwcmVzZW50YWJsZSA/PyBcInRocm93XCIsXG4gICAgICAgICAgICAvLyB1cmk6IF9wYXJhbXM/LnVyaSA/PyAoKGlkKSA9PiBgJHtpZH1gKSxcbiAgICAgICAgICAgIGV4dGVybmFsOiBfcGFyYW1zPy5leHRlcm5hbCA/PyB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICAgIC8vIGl0ZXJhdGUgb3ZlciBzZWVuIG1hcDtcbiAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMuc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICAgICAgaWYgKCFyb290KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5wcm9jZXNzZWQgc2NoZW1hLiBUaGlzIGlzIGEgYnVnIGluIFpvZC5cIik7XG4gICAgICAgIC8vIGluaXRpYWxpemUgcmVzdWx0IHdpdGggcm9vdCBzY2hlbWEgZmllbGRzXG4gICAgICAgIC8vIE9iamVjdC5hc3NpZ24ocmVzdWx0LCBzZWVuLmNhY2hlZCk7XG4gICAgICAgIC8vIHJldHVybnMgYSByZWYgdG8gdGhlIHNjaGVtYVxuICAgICAgICAvLyBkZWZJZCB3aWxsIGJlIGVtcHR5IGlmIHRoZSByZWYgcG9pbnRzIHRvIGFuIGV4dGVybmFsIHNjaGVtYSAob3IgIylcbiAgICAgICAgY29uc3QgbWFrZVVSSSA9IChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgLy8gY29tcGFyaW5nIHRoZSBzZWVuIG9iamVjdHMgYmVjYXVzZSBzb21ldGltZXNcbiAgICAgICAgICAgIC8vIG11bHRpcGxlIHNjaGVtYXMgbWFwIHRvIHRoZSBzYW1lIHNlZW4gb2JqZWN0LlxuICAgICAgICAgICAgLy8gZS5nLiBsYXp5XG4gICAgICAgICAgICAvLyBleHRlcm5hbCBpcyBjb25maWd1cmVkXG4gICAgICAgICAgICBjb25zdCBkZWZzU2VnbWVudCA9IHRoaXMudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIiA/IFwiJGRlZnNcIiA6IFwiZGVmaW5pdGlvbnNcIjtcbiAgICAgICAgICAgIGlmIChwYXJhbXMuZXh0ZXJuYWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHRlcm5hbElkID0gcGFyYW1zLmV4dGVybmFsLnJlZ2lzdHJ5LmdldChlbnRyeVswXSk/LmlkOyAvLyA/PyBcIl9fc2hhcmVkXCI7Ly8gYF9fc2NoZW1hJHt0aGlzLmNvdW50ZXIrK31gO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHNjaGVtYSBpcyBpbiB0aGUgZXh0ZXJuYWwgcmVnaXN0cnlcbiAgICAgICAgICAgICAgICBjb25zdCB1cmlHZW5lcmF0b3IgPSBwYXJhbXMuZXh0ZXJuYWwudXJpID8/ICgoaWQpID0+IGlkKTtcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZXJuYWxJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyByZWY6IHVyaUdlbmVyYXRvcihleHRlcm5hbElkKSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UsIGFkZCB0byBfX3NoYXJlZFxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gZW50cnlbMV0uZGVmSWQgPz8gZW50cnlbMV0uc2NoZW1hLmlkID8/IGBzY2hlbWEke3RoaXMuY291bnRlcisrfWA7XG4gICAgICAgICAgICAgICAgZW50cnlbMV0uZGVmSWQgPSBpZDsgLy8gc2V0IGRlZklkIHNvIGl0IHdpbGwgYmUgcmV1c2VkIGlmIG5lZWRlZFxuICAgICAgICAgICAgICAgIHJldHVybiB7IGRlZklkOiBpZCwgcmVmOiBgJHt1cmlHZW5lcmF0b3IoXCJfX3NoYXJlZFwiKX0jLyR7ZGVmc1NlZ21lbnR9LyR7aWR9YCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVudHJ5WzFdID09PSByb290KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcmVmOiBcIiNcIiB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gc2VsZi1jb250YWluZWQgc2NoZW1hXG4gICAgICAgICAgICBjb25zdCB1cmlQcmVmaXggPSBgI2A7XG4gICAgICAgICAgICBjb25zdCBkZWZVcmlQcmVmaXggPSBgJHt1cmlQcmVmaXh9LyR7ZGVmc1NlZ21lbnR9L2A7XG4gICAgICAgICAgICBjb25zdCBkZWZJZCA9IGVudHJ5WzFdLnNjaGVtYS5pZCA/PyBgX19zY2hlbWEke3RoaXMuY291bnRlcisrfWA7XG4gICAgICAgICAgICByZXR1cm4geyBkZWZJZCwgcmVmOiBkZWZVcmlQcmVmaXggKyBkZWZJZCB9O1xuICAgICAgICB9O1xuICAgICAgICAvLyBzdG9yZWQgY2FjaGVkIHZlcnNpb24gaW4gYGRlZmAgcHJvcGVydHlcbiAgICAgICAgLy8gcmVtb3ZlIGFsbCBwcm9wZXJ0aWVzLCBzZXQgJHJlZlxuICAgICAgICBjb25zdCBleHRyYWN0VG9EZWYgPSAoZW50cnkpID0+IHtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBzY2hlbWEgaXMgYWxyZWFkeSBhIHJlZmVyZW5jZSwgZG8gbm90IGV4dHJhY3QgaXRcbiAgICAgICAgICAgIGlmIChlbnRyeVsxXS5zY2hlbWEuJHJlZikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNlZW4gPSBlbnRyeVsxXTtcbiAgICAgICAgICAgIGNvbnN0IHsgcmVmLCBkZWZJZCB9ID0gbWFrZVVSSShlbnRyeSk7XG4gICAgICAgICAgICBzZWVuLmRlZiA9IHsgLi4uc2Vlbi5zY2hlbWEgfTtcbiAgICAgICAgICAgIC8vIGRlZklkIHdvbid0IGJlIHNldCBpZiB0aGUgc2NoZW1hIGlzIGEgcmVmZXJlbmNlIHRvIGFuIGV4dGVybmFsIHNjaGVtYVxuICAgICAgICAgICAgaWYgKGRlZklkKVxuICAgICAgICAgICAgICAgIHNlZW4uZGVmSWQgPSBkZWZJZDtcbiAgICAgICAgICAgIC8vIHdpcGUgYXdheSBhbGwgcHJvcGVydGllcyBleGNlcHQgJHJlZlxuICAgICAgICAgICAgY29uc3Qgc2NoZW1hID0gc2Vlbi5zY2hlbWE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2NoZW1hW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzY2hlbWEuJHJlZiA9IHJlZjtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gdGhyb3cgb24gY3ljbGVzXG4gICAgICAgIC8vIGJyZWFrIGN5Y2xlc1xuICAgICAgICBpZiAocGFyYW1zLmN5Y2xlcyA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMuc2Vlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWVuID0gZW50cnlbMV07XG4gICAgICAgICAgICAgICAgaWYgKHNlZW4uY3ljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ3ljbGUgZGV0ZWN0ZWQ6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGAjLyR7c2Vlbi5jeWNsZT8uam9pbihcIi9cIil9Lzxyb290PmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1xcblxcblNldCB0aGUgYGN5Y2xlc2AgcGFyYW1ldGVyIHRvIGBcInJlZlwiYCB0byByZXNvbHZlIGN5Y2xpY2FsIHNjaGVtYXMgd2l0aCBkZWZzLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBleHRyYWN0IHNjaGVtYXMgaW50byAkZGVmc1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMuc2Vlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlZW4gPSBlbnRyeVsxXTtcbiAgICAgICAgICAgIC8vIGNvbnZlcnQgcm9vdCBzY2hlbWEgdG8gIyAkcmVmXG4gICAgICAgICAgICBpZiAoc2NoZW1hID09PSBlbnRyeVswXSkge1xuICAgICAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7IC8vIHRoaXMgaGFzIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHRoZSByb290IHNjaGVtYVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXh0cmFjdCBzY2hlbWFzIHRoYXQgYXJlIGluIHRoZSBleHRlcm5hbCByZWdpc3RyeVxuICAgICAgICAgICAgaWYgKHBhcmFtcy5leHRlcm5hbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4dCA9IHBhcmFtcy5leHRlcm5hbC5yZWdpc3RyeS5nZXQoZW50cnlbMF0pPy5pZDtcbiAgICAgICAgICAgICAgICBpZiAoc2NoZW1hICE9PSBlbnRyeVswXSAmJiBleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdFRvRGVmKGVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXh0cmFjdCBzY2hlbWFzIHdpdGggYGlkYCBtZXRhXG4gICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMubWV0YWRhdGFSZWdpc3RyeS5nZXQoZW50cnlbMF0pPy5pZDtcbiAgICAgICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBicmVhayBjeWNsZXNcbiAgICAgICAgICAgIGlmIChzZWVuLmN5Y2xlKSB7XG4gICAgICAgICAgICAgICAgLy8gYW55XG4gICAgICAgICAgICAgICAgZXh0cmFjdFRvRGVmKGVudHJ5KTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGV4dHJhY3QgcmV1c2VkIHNjaGVtYXNcbiAgICAgICAgICAgIGlmIChzZWVuLmNvdW50ID4gMSkge1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMucmV1c2VkID09PSBcInJlZlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJpb21lLWlnbm9yZSBsaW50OlxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmxhdHRlbiBfcmVmc1xuICAgICAgICBjb25zdCBmbGF0dGVuUmVmID0gKHpvZFNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWVuID0gdGhpcy5zZWVuLmdldCh6b2RTY2hlbWEpO1xuICAgICAgICAgICAgY29uc3Qgc2NoZW1hID0gc2Vlbi5kZWYgPz8gc2Vlbi5zY2hlbWE7XG4gICAgICAgICAgICBjb25zdCBfY2FjaGVkID0geyAuLi5zY2hlbWEgfTtcbiAgICAgICAgICAgIC8vIGFscmVhZHkgc2VlblxuICAgICAgICAgICAgaWYgKHNlZW4ucmVmID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZmxhdHRlbiByZWYgaWYgZGVmaW5lZFxuICAgICAgICAgICAgY29uc3QgcmVmID0gc2Vlbi5yZWY7XG4gICAgICAgICAgICBzZWVuLnJlZiA9IG51bGw7IC8vIHByZXZlbnQgcmVjdXJzaW9uXG4gICAgICAgICAgICBpZiAocmVmKSB7XG4gICAgICAgICAgICAgICAgZmxhdHRlblJlZihyZWYsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgLy8gbWVyZ2UgcmVmZXJlbmNlZCBzY2hlbWEgaW50byBjdXJyZW50XG4gICAgICAgICAgICAgICAgY29uc3QgcmVmU2NoZW1hID0gdGhpcy5zZWVuLmdldChyZWYpLnNjaGVtYTtcbiAgICAgICAgICAgICAgICBpZiAocmVmU2NoZW1hLiRyZWYgJiYgcGFyYW1zLnRhcmdldCA9PT0gXCJkcmFmdC03XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hLmFsbE9mID0gc2NoZW1hLmFsbE9mID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICBzY2hlbWEuYWxsT2YucHVzaChyZWZTY2hlbWEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihzY2hlbWEsIHJlZlNjaGVtYSk7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2NoZW1hLCBfY2FjaGVkKTsgLy8gcHJldmVudCBvdmVyd3JpdGluZyBhbnkgZmllbGRzIGluIHRoZSBvcmlnaW5hbCBzY2hlbWFcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBleGVjdXRlIG92ZXJyaWRlc1xuICAgICAgICAgICAgaWYgKCFzZWVuLmlzUGFyZW50KVxuICAgICAgICAgICAgICAgIHRoaXMub3ZlcnJpZGUoe1xuICAgICAgICAgICAgICAgICAgICB6b2RTY2hlbWE6IHpvZFNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAganNvblNjaGVtYTogc2NoZW1hLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBzZWVuLnBhdGggPz8gW10sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgWy4uLnRoaXMuc2Vlbi5lbnRyaWVzKCldLnJldmVyc2UoKSkge1xuICAgICAgICAgICAgZmxhdHRlblJlZihlbnRyeVswXSwgeyB0YXJnZXQ6IHRoaXMudGFyZ2V0IH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiKSB7XG4gICAgICAgICAgICByZXN1bHQuJHNjaGVtYSA9IFwiaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQvMjAyMC0xMi9zY2hlbWFcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC03XCIpIHtcbiAgICAgICAgICAgIHJlc3VsdC4kc2NoZW1hID0gXCJodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSNcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgSW52YWxpZCB0YXJnZXQ6ICR7dGhpcy50YXJnZXR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy5leHRlcm5hbD8udXJpKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHBhcmFtcy5leHRlcm5hbC5yZWdpc3RyeS5nZXQoc2NoZW1hKT8uaWQ7XG4gICAgICAgICAgICBpZiAoIWlkKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNjaGVtYSBpcyBtaXNzaW5nIGFuIGBpZGAgcHJvcGVydHlcIik7XG4gICAgICAgICAgICByZXN1bHQuJGlkID0gcGFyYW1zLmV4dGVybmFsLnVyaShpZCk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmFzc2lnbihyZXN1bHQsIHJvb3QuZGVmKTtcbiAgICAgICAgLy8gYnVpbGQgZGVmcyBvYmplY3RcbiAgICAgICAgY29uc3QgZGVmcyA9IHBhcmFtcy5leHRlcm5hbD8uZGVmcyA/PyB7fTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLnNlZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBzZWVuID0gZW50cnlbMV07XG4gICAgICAgICAgICBpZiAoc2Vlbi5kZWYgJiYgc2Vlbi5kZWZJZCkge1xuICAgICAgICAgICAgICAgIGRlZnNbc2Vlbi5kZWZJZF0gPSBzZWVuLmRlZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBzZXQgZGVmaW5pdGlvbnMgaW4gcmVzdWx0XG4gICAgICAgIGlmIChwYXJhbXMuZXh0ZXJuYWwpIHtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhkZWZzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIikge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuJGRlZnMgPSBkZWZzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlZmluaXRpb25zID0gZGVmcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIHRoaXMgXCJmaW5hbGl6ZXNcIiB0aGlzIHNjaGVtYSBhbmQgZW5zdXJlcyBhbGwgY3ljbGVzIGFyZSByZW1vdmVkXG4gICAgICAgICAgICAvLyBlYWNoIGNhbGwgdG8gLmVtaXQoKSBpcyBmdW5jdGlvbmFsbHkgaW5kZXBlbmRlbnRcbiAgICAgICAgICAgIC8vIHRob3VnaCB0aGUgc2VlbiBtYXAgaXMgc2hhcmVkXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2Vycikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgY29udmVydGluZyBzY2hlbWEgdG8gSlNPTi5cIik7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdG9KU09OU2NoZW1hKGlucHV0LCBfcGFyYW1zKSB7XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgJFpvZFJlZ2lzdHJ5KSB7XG4gICAgICAgIGNvbnN0IGdlbiA9IG5ldyBKU09OU2NoZW1hR2VuZXJhdG9yKF9wYXJhbXMpO1xuICAgICAgICBjb25zdCBkZWZzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgaW5wdXQuX2lkbWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgW18sIHNjaGVtYV0gPSBlbnRyeTtcbiAgICAgICAgICAgIGdlbi5wcm9jZXNzKHNjaGVtYSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2NoZW1hcyA9IHt9O1xuICAgICAgICBjb25zdCBleHRlcm5hbCA9IHtcbiAgICAgICAgICAgIHJlZ2lzdHJ5OiBpbnB1dCxcbiAgICAgICAgICAgIHVyaTogX3BhcmFtcz8udXJpLFxuICAgICAgICAgICAgZGVmcyxcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBpbnB1dC5faWRtYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBba2V5LCBzY2hlbWFdID0gZW50cnk7XG4gICAgICAgICAgICBzY2hlbWFzW2tleV0gPSBnZW4uZW1pdChzY2hlbWEsIHtcbiAgICAgICAgICAgICAgICAuLi5fcGFyYW1zLFxuICAgICAgICAgICAgICAgIGV4dGVybmFsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRlZnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZnNTZWdtZW50ID0gZ2VuLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIgPyBcIiRkZWZzXCIgOiBcImRlZmluaXRpb25zXCI7XG4gICAgICAgICAgICBzY2hlbWFzLl9fc2hhcmVkID0ge1xuICAgICAgICAgICAgICAgIFtkZWZzU2VnbWVudF06IGRlZnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHNjaGVtYXMgfTtcbiAgICB9XG4gICAgY29uc3QgZ2VuID0gbmV3IEpTT05TY2hlbWFHZW5lcmF0b3IoX3BhcmFtcyk7XG4gICAgZ2VuLnByb2Nlc3MoaW5wdXQpO1xuICAgIHJldHVybiBnZW4uZW1pdChpbnB1dCwgX3BhcmFtcyk7XG59XG5mdW5jdGlvbiBpc1RyYW5zZm9ybWluZyhfc2NoZW1hLCBfY3R4KSB7XG4gICAgY29uc3QgY3R4ID0gX2N0eCA/PyB7IHNlZW46IG5ldyBTZXQoKSB9O1xuICAgIGlmIChjdHguc2Vlbi5oYXMoX3NjaGVtYSkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjdHguc2Vlbi5hZGQoX3NjaGVtYSk7XG4gICAgY29uc3Qgc2NoZW1hID0gX3NjaGVtYTtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgc3dpdGNoIChkZWYudHlwZSkge1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgY2FzZSBcImJpZ2ludFwiOlxuICAgICAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgICAgICBjYXNlIFwiZGF0ZVwiOlxuICAgICAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgY2FzZSBcIm51bGxcIjpcbiAgICAgICAgY2FzZSBcImFueVwiOlxuICAgICAgICBjYXNlIFwidW5rbm93blwiOlxuICAgICAgICBjYXNlIFwibmV2ZXJcIjpcbiAgICAgICAgY2FzZSBcInZvaWRcIjpcbiAgICAgICAgY2FzZSBcImxpdGVyYWxcIjpcbiAgICAgICAgY2FzZSBcImVudW1cIjpcbiAgICAgICAgY2FzZSBcIm5hblwiOlxuICAgICAgICBjYXNlIFwiZmlsZVwiOlxuICAgICAgICBjYXNlIFwidGVtcGxhdGVfbGl0ZXJhbFwiOlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBjYXNlIFwiYXJyYXlcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5lbGVtZW50LCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJvYmplY3RcIjoge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGVmLnNoYXBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzVHJhbnNmb3JtaW5nKGRlZi5zaGFwZVtrZXldLCBjdHgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidW5pb25cIjoge1xuICAgICAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2YgZGVmLm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNUcmFuc2Zvcm1pbmcob3B0aW9uLCBjdHgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiaW50ZXJzZWN0aW9uXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYubGVmdCwgY3R4KSB8fCBpc1RyYW5zZm9ybWluZyhkZWYucmlnaHQsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInR1cGxlXCI6IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBkZWYuaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNUcmFuc2Zvcm1pbmcoaXRlbSwgY3R4KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVmLnJlc3QgJiYgaXNUcmFuc2Zvcm1pbmcoZGVmLnJlc3QsIGN0eCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInJlY29yZFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmtleVR5cGUsIGN0eCkgfHwgaXNUcmFuc2Zvcm1pbmcoZGVmLnZhbHVlVHlwZSwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwibWFwXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYua2V5VHlwZSwgY3R4KSB8fCBpc1RyYW5zZm9ybWluZyhkZWYudmFsdWVUeXBlLCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJzZXRcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi52YWx1ZVR5cGUsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW5uZXIgdHlwZXNcbiAgICAgICAgY2FzZSBcInByb21pc2VcIjpcbiAgICAgICAgY2FzZSBcIm9wdGlvbmFsXCI6XG4gICAgICAgIGNhc2UgXCJub25vcHRpb25hbFwiOlxuICAgICAgICBjYXNlIFwibnVsbGFibGVcIjpcbiAgICAgICAgY2FzZSBcInJlYWRvbmx5XCI6XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmlubmVyVHlwZSwgY3R4KTtcbiAgICAgICAgY2FzZSBcImxhenlcIjpcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYuZ2V0dGVyKCksIGN0eCk7XG4gICAgICAgIGNhc2UgXCJkZWZhdWx0XCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYuaW5uZXJUeXBlLCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJwcmVmYXVsdFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmlubmVyVHlwZSwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiY3VzdG9tXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidHJhbnNmb3JtXCI6IHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJwaXBlXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYuaW4sIGN0eCkgfHwgaXNUcmFuc2Zvcm1pbmcoZGVmLm91dCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwic3VjY2Vzc1wiOiB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImNhdGNoXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgZGVmO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gc2NoZW1hIHR5cGU6ICR7ZGVmLnR5cGV9YCk7XG59XG4iLCJpbXBvcnQgeyBDb250ZW50RmlsdGVyRmluaXNoUmVhc29uRXJyb3IsIExlbmd0aEZpbmlzaFJlYXNvbkVycm9yLCBPcGVuQUlFcnJvciB9IGZyb20gXCIuLi9lcnJvci5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBpc0NoYXRDb21wbGV0aW9uRnVuY3Rpb25Ub29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbCAhPT0gdW5kZWZpbmVkICYmICdmdW5jdGlvbicgaW4gdG9vbCAmJiB0b29sLmZ1bmN0aW9uICE9PSB1bmRlZmluZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0KHJlc3BvbnNlX2Zvcm1hdCwgcGFyc2VyKSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi5yZXNwb25zZV9mb3JtYXQgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXJlc3BvbnNlLWZvcm1hdCcsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJHBhcnNlUmF3OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VyLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdChyZXNwb25zZV9mb3JtYXQsIHBhcnNlcikge1xuICAgIGNvbnN0IG9iaiA9IHsgLi4ucmVzcG9uc2VfZm9ybWF0IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS1yZXNwb25zZS1mb3JtYXQnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChyZXNwb25zZV9mb3JtYXQpIHtcbiAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0Py5bJyRicmFuZCddID09PSAnYXV0by1wYXJzZWFibGUtcmVzcG9uc2UtZm9ybWF0Jztcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1heWJlUGFyc2VDaGF0Q29tcGxldGlvbihjb21wbGV0aW9uLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNvbXBsZXRpb24sXG4gICAgICAgICAgICBjaG9pY2VzOiBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+IHtcbiAgICAgICAgICAgICAgICBhc3NlcnRUb29sQ2FsbHNBcmVDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbENhbGxzKGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmNob2ljZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hvaWNlLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4oY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sX2NhbGxzOiBjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VDaGF0Q29tcGxldGlvbihjb21wbGV0aW9uLCBwYXJhbXMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKSB7XG4gICAgY29uc3QgY2hvaWNlcyA9IGNvbXBsZXRpb24uY2hvaWNlcy5tYXAoKGNob2ljZSkgPT4ge1xuICAgICAgICBpZiAoY2hvaWNlLmZpbmlzaF9yZWFzb24gPT09ICdsZW5ndGgnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTGVuZ3RoRmluaXNoUmVhc29uRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hvaWNlLmZpbmlzaF9yZWFzb24gPT09ICdjb250ZW50X2ZpbHRlcicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBDb250ZW50RmlsdGVyRmluaXNoUmVhc29uRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBhc3NlcnRUb29sQ2FsbHNBcmVDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbENhbGxzKGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uY2hvaWNlLFxuICAgICAgICAgICAgbWVzc2FnZToge1xuICAgICAgICAgICAgICAgIC4uLmNob2ljZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIC4uLihjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzID9cbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9jYWxsczogY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscz8ubWFwKCh0b29sQ2FsbCkgPT4gcGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSkgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICBwYXJzZWQ6IGNob2ljZS5tZXNzYWdlLmNvbnRlbnQgJiYgIWNob2ljZS5tZXNzYWdlLnJlZnVzYWwgP1xuICAgICAgICAgICAgICAgICAgICBwYXJzZVJlc3BvbnNlRm9ybWF0KHBhcmFtcywgY2hvaWNlLm1lc3NhZ2UuY29udGVudClcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4geyAuLi5jb21wbGV0aW9uLCBjaG9pY2VzIH07XG59XG5mdW5jdGlvbiBwYXJzZVJlc3BvbnNlRm9ybWF0KHBhcmFtcywgY29udGVudCkge1xuICAgIGlmIChwYXJhbXMucmVzcG9uc2VfZm9ybWF0Py50eXBlICE9PSAnanNvbl9zY2hlbWEnKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLnJlc3BvbnNlX2Zvcm1hdD8udHlwZSA9PT0gJ2pzb25fc2NoZW1hJykge1xuICAgICAgICBpZiAoJyRwYXJzZVJhdycgaW4gcGFyYW1zLnJlc3BvbnNlX2Zvcm1hdCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VfZm9ybWF0ID0gcGFyYW1zLnJlc3BvbnNlX2Zvcm1hdDtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZV9mb3JtYXQuJHBhcnNlUmF3KGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIHBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGNvbnN0IGlucHV0VG9vbCA9IHBhcmFtcy50b29scz8uZmluZCgoaW5wdXRUb29sKSA9PiBpc0NoYXRDb21wbGV0aW9uRnVuY3Rpb25Ub29sKGlucHV0VG9vbCkgJiYgaW5wdXRUb29sLmZ1bmN0aW9uPy5uYW1lID09PSB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lKTsgLy8gVFMgZG9lc24ndCBuYXJyb3cgYmFzZWQgb24gaXNDaGF0Q29tcGxldGlvblRvb2xcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi50b29sQ2FsbCxcbiAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIC4uLnRvb2xDYWxsLmZ1bmN0aW9uLFxuICAgICAgICAgICAgcGFyc2VkX2FyZ3VtZW50czogaXNBdXRvUGFyc2FibGVUb29sKGlucHV0VG9vbCkgPyBpbnB1dFRvb2wuJHBhcnNlUmF3KHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICA6IGlucHV0VG9vbD8uZnVuY3Rpb24uc3RyaWN0ID8gSlNPTi5wYXJzZSh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zIHx8ICEoJ3Rvb2xzJyBpbiBwYXJhbXMpIHx8ICFwYXJhbXMudG9vbHMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBpbnB1dFRvb2wgPSBwYXJhbXMudG9vbHM/LmZpbmQoKGlucHV0VG9vbCkgPT4gaXNDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbChpbnB1dFRvb2wpICYmIGlucHV0VG9vbC5mdW5jdGlvbj8ubmFtZSA9PT0gdG9vbENhbGwuZnVuY3Rpb24ubmFtZSk7XG4gICAgcmV0dXJuIChpc0NoYXRDb21wbGV0aW9uRnVuY3Rpb25Ub29sKGlucHV0VG9vbCkgJiZcbiAgICAgICAgKGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uZnVuY3Rpb24uc3RyaWN0IHx8IGZhbHNlKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykge1xuICAgIGlmIChpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0KHBhcmFtcy5yZXNwb25zZV9mb3JtYXQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gKHBhcmFtcy50b29scz8uc29tZSgodCkgPT4gaXNBdXRvUGFyc2FibGVUb29sKHQpIHx8ICh0LnR5cGUgPT09ICdmdW5jdGlvbicgJiYgdC5mdW5jdGlvbi5zdHJpY3QgPT09IHRydWUpKSA/PyBmYWxzZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VG9vbENhbGxzQXJlQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2xDYWxscyh0b29sQ2FsbHMpIHtcbiAgICBmb3IgKGNvbnN0IHRvb2xDYWxsIG9mIHRvb2xDYWxscyB8fCBbXSkge1xuICAgICAgICBpZiAodG9vbENhbGwudHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBDdXJyZW50bHkgb25seSBcXGBmdW5jdGlvblxcYCB0b29sIGNhbGxzIGFyZSBzdXBwb3J0ZWQ7IFJlY2VpdmVkIFxcYCR7dG9vbENhbGwudHlwZX1cXGBgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUlucHV0VG9vbHModG9vbHMpIHtcbiAgICBmb3IgKGNvbnN0IHRvb2wgb2YgdG9vbHMgPz8gW10pIHtcbiAgICAgICAgaWYgKHRvb2wudHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBDdXJyZW50bHkgb25seSBcXGBmdW5jdGlvblxcYCB0b29sIHR5cGVzIHN1cHBvcnQgYXV0by1wYXJzaW5nOyBSZWNlaXZlZCBcXGAke3Rvb2wudHlwZX1cXGBgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9vbC5mdW5jdGlvbi5zdHJpY3QgIT09IHRydWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPcGVuQUlFcnJvcihgVGhlIFxcYCR7dG9vbC5mdW5jdGlvbi5uYW1lfVxcYCB0b29sIGlzIG5vdCBtYXJrZWQgd2l0aCBcXGBzdHJpY3Q6IHRydWVcXGAuIE9ubHkgc3RyaWN0IGZ1bmN0aW9uIHRvb2xzIGNhbiBiZSBhdXRvLXBhcnNlZGApO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFyc2VyLm1qcy5tYXAiLCJleHBvcnQgY29uc3QgaWdub3JlT3ZlcnJpZGUgPSBTeW1ib2woJ0xldCB6b2RUb0pzb25TY2hlbWEgZGVjaWRlIG9uIHdoaWNoIHBhcnNlciB0byB1c2UnKTtcbmNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgIG5hbWU6IHVuZGVmaW5lZCxcbiAgICAkcmVmU3RyYXRlZ3k6ICdyb290JyxcbiAgICBlZmZlY3RTdHJhdGVneTogJ2lucHV0JyxcbiAgICBwaXBlU3RyYXRlZ3k6ICdhbGwnLFxuICAgIGRhdGVTdHJhdGVneTogJ2Zvcm1hdDpkYXRlLXRpbWUnLFxuICAgIG1hcFN0cmF0ZWd5OiAnZW50cmllcycsXG4gICAgbnVsbGFibGVTdHJhdGVneTogJ2Zyb20tdGFyZ2V0JyxcbiAgICByZW1vdmVBZGRpdGlvbmFsU3RyYXRlZ3k6ICdwYXNzdGhyb3VnaCcsXG4gICAgZGVmaW5pdGlvblBhdGg6ICdkZWZpbml0aW9ucycsXG4gICAgdGFyZ2V0OiAnanNvblNjaGVtYTcnLFxuICAgIHN0cmljdFVuaW9uczogZmFsc2UsXG4gICAgZXJyb3JNZXNzYWdlczogZmFsc2UsXG4gICAgbWFya2Rvd25EZXNjcmlwdGlvbjogZmFsc2UsXG4gICAgcGF0dGVyblN0cmF0ZWd5OiAnZXNjYXBlJyxcbiAgICBhcHBseVJlZ2V4RmxhZ3M6IGZhbHNlLFxuICAgIGVtYWlsU3RyYXRlZ3k6ICdmb3JtYXQ6ZW1haWwnLFxuICAgIGJhc2U2NFN0cmF0ZWd5OiAnY29udGVudEVuY29kaW5nOmJhc2U2NCcsXG4gICAgbmFtZVN0cmF0ZWd5OiAncmVmJyxcbn07XG5leHBvcnQgY29uc3QgZ2V0RGVmYXVsdE9wdGlvbnMgPSAob3B0aW9ucykgPT4ge1xuICAgIC8vIFdlIG5lZWQgdG8gYWRkIGBkZWZpbml0aW9uc2AgaGVyZSBhcyB3ZSBtYXkgbXV0YXRlIGl0XG4gICAgcmV0dXJuICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycgP1xuICAgICAgICB7XG4gICAgICAgICAgICAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgICAgICAgICAgIGJhc2VQYXRoOiBbJyMnXSxcbiAgICAgICAgICAgIGRlZmluaXRpb25zOiB7fSxcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMsXG4gICAgICAgIH1cbiAgICAgICAgOiB7XG4gICAgICAgICAgICAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgICAgICAgICAgIGJhc2VQYXRoOiBbJyMnXSxcbiAgICAgICAgICAgIGRlZmluaXRpb25zOiB7fSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH0pO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9wdGlvbnMubWpzLm1hcCIsImV4cG9ydCBjb25zdCB6b2REZWYgPSAoem9kU2NoZW1hKSA9PiB7XG4gICAgcmV0dXJuICdfZGVmJyBpbiB6b2RTY2hlbWEgPyB6b2RTY2hlbWEuX2RlZiA6IHpvZFNjaGVtYTtcbn07XG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eU9iaihvYmopIHtcbiAgICBpZiAoIW9iailcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgZm9yIChjb25zdCBfayBpbiBvYmopXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWwubWpzLm1hcCIsImltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSBcIi4vT3B0aW9ucy5tanNcIjtcbmltcG9ydCB7IHpvZERlZiB9IGZyb20gXCIuL3V0aWwubWpzXCI7XG5leHBvcnQgY29uc3QgZ2V0UmVmcyA9IChvcHRpb25zKSA9PiB7XG4gICAgY29uc3QgX29wdGlvbnMgPSBnZXREZWZhdWx0T3B0aW9ucyhvcHRpb25zKTtcbiAgICBjb25zdCBjdXJyZW50UGF0aCA9IF9vcHRpb25zLm5hbWUgIT09IHVuZGVmaW5lZCA/XG4gICAgICAgIFsuLi5fb3B0aW9ucy5iYXNlUGF0aCwgX29wdGlvbnMuZGVmaW5pdGlvblBhdGgsIF9vcHRpb25zLm5hbWVdXG4gICAgICAgIDogX29wdGlvbnMuYmFzZVBhdGg7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uX29wdGlvbnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBjdXJyZW50UGF0aCxcbiAgICAgICAgcHJvcGVydHlQYXRoOiB1bmRlZmluZWQsXG4gICAgICAgIHNlZW5SZWZzOiBuZXcgU2V0KCksXG4gICAgICAgIHNlZW46IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoX29wdGlvbnMuZGVmaW5pdGlvbnMpLm1hcCgoW25hbWUsIGRlZl0pID0+IFtcbiAgICAgICAgICAgIHpvZERlZihkZWYpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlZjogem9kRGVmKGRlZiksXG4gICAgICAgICAgICAgICAgcGF0aDogWy4uLl9vcHRpb25zLmJhc2VQYXRoLCBfb3B0aW9ucy5kZWZpbml0aW9uUGF0aCwgbmFtZV0sXG4gICAgICAgICAgICAgICAgLy8gUmVzb2x1dGlvbiBvZiByZWZlcmVuY2VzIHdpbGwgYmUgZm9yY2VkIGV2ZW4gdGhvdWdoIHNlZW4sIHNvIGl0J3Mgb2sgdGhhdCB0aGUgc2NoZW1hIGlzIHVuZGVmaW5lZCBoZXJlIGZvciBub3cuXG4gICAgICAgICAgICAgICAganNvblNjaGVtYTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSkpLFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVmcy5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGFkZEVycm9yTWVzc2FnZShyZXMsIGtleSwgZXJyb3JNZXNzYWdlLCByZWZzKSB7XG4gICAgaWYgKCFyZWZzPy5lcnJvck1lc3NhZ2VzKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKGVycm9yTWVzc2FnZSkge1xuICAgICAgICByZXMuZXJyb3JNZXNzYWdlID0ge1xuICAgICAgICAgICAgLi4ucmVzLmVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgIFtrZXldOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCBrZXksIHZhbHVlLCBlcnJvck1lc3NhZ2UsIHJlZnMpIHtcbiAgICByZXNba2V5XSA9IHZhbHVlO1xuICAgIGFkZEVycm9yTWVzc2FnZShyZXMsIGtleSwgZXJyb3JNZXNzYWdlLCByZWZzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9yTWVzc2FnZXMubWpzLm1hcCIsImltcG9ydCB7IFpvZEVycm9yLCBab2RJc3N1ZUNvZGUsIH0gZnJvbSBcIi4vWm9kRXJyb3IuanNcIjtcbmltcG9ydCB7IGRlZmF1bHRFcnJvck1hcCwgZ2V0RXJyb3JNYXAgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGVycm9yVXRpbCB9IGZyb20gXCIuL2hlbHBlcnMvZXJyb3JVdGlsLmpzXCI7XG5pbXBvcnQgeyBESVJUWSwgSU5WQUxJRCwgT0ssIFBhcnNlU3RhdHVzLCBhZGRJc3N1ZVRvQ29udGV4dCwgaXNBYm9ydGVkLCBpc0FzeW5jLCBpc0RpcnR5LCBpc1ZhbGlkLCBtYWtlSXNzdWUsIH0gZnJvbSBcIi4vaGVscGVycy9wYXJzZVV0aWwuanNcIjtcbmltcG9ydCB7IHV0aWwsIFpvZFBhcnNlZFR5cGUsIGdldFBhcnNlZFR5cGUgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmNsYXNzIFBhcnNlSW5wdXRMYXp5UGF0aCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCB2YWx1ZSwgcGF0aCwga2V5KSB7XG4gICAgICAgIHRoaXMuX2NhY2hlZFBhdGggPSBbXTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMuZGF0YSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5fa2V5ID0ga2V5O1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZWRQYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5fa2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCAuLi50aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkUGF0aC5wdXNoKC4uLnRoaXMuX3BhdGgsIHRoaXMuX2tleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBhdGg7XG4gICAgfVxufVxuY29uc3QgaGFuZGxlUmVzdWx0ID0gKGN0eCwgcmVzdWx0KSA9PiB7XG4gICAgaWYgKGlzVmFsaWQocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQudmFsdWUgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghY3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWxpZGF0aW9uIGZhaWxlZCBidXQgbm8gaXNzdWVzIGRldGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59O1xuZnVuY3Rpb24gcHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGNvbnN0IHsgZXJyb3JNYXAsIGludmFsaWRfdHlwZV9lcnJvciwgcmVxdWlyZWRfZXJyb3IsIGRlc2NyaXB0aW9uIH0gPSBwYXJhbXM7XG4gICAgaWYgKGVycm9yTWFwICYmIChpbnZhbGlkX3R5cGVfZXJyb3IgfHwgcmVxdWlyZWRfZXJyb3IpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgdXNlIFwiaW52YWxpZF90eXBlX2Vycm9yXCIgb3IgXCJyZXF1aXJlZF9lcnJvclwiIGluIGNvbmp1bmN0aW9uIHdpdGggY3VzdG9tIGVycm9yIG1hcC5gKTtcbiAgICB9XG4gICAgaWYgKGVycm9yTWFwKVxuICAgICAgICByZXR1cm4geyBlcnJvck1hcDogZXJyb3JNYXAsIGRlc2NyaXB0aW9uIH07XG4gICAgY29uc3QgY3VzdG9tTWFwID0gKGlzcywgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbWVzc2FnZSB9ID0gcGFyYW1zO1xuICAgICAgICBpZiAoaXNzLmNvZGUgPT09IFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY3R4LmRhdGEgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gcmVxdWlyZWRfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc3MuY29kZSAhPT0gXCJpbnZhbGlkX3R5cGVcIilcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogbWVzc2FnZSA/PyBpbnZhbGlkX3R5cGVfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgIH07XG4gICAgcmV0dXJuIHsgZXJyb3JNYXA6IGN1c3RvbU1hcCwgZGVzY3JpcHRpb24gfTtcbn1cbmV4cG9ydCBjbGFzcyBab2RUeXBlIHtcbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGVzY3JpcHRpb247XG4gICAgfVxuICAgIF9nZXRUeXBlKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBfZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCkge1xuICAgICAgICByZXR1cm4gKGN0eCB8fCB7XG4gICAgICAgICAgICBjb21tb246IGlucHV0LnBhcmVudC5jb21tb24sXG4gICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IG5ldyBQYXJzZVN0YXR1cygpLFxuICAgICAgICAgICAgY3R4OiB7XG4gICAgICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgICAgIGRhdGE6IGlucHV0LmRhdGEsXG4gICAgICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgICAgIHBhdGg6IGlucHV0LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfcGFyc2VTeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3luY2hyb25vdXMgcGFyc2UgZW5jb3VudGVyZWQgcHJvbWlzZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgX3BhcnNlQXN5bmMoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2UoaW5wdXQpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgfVxuICAgIHBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNhZmVQYXJzZShkYXRhLCBwYXJhbXMpO1xuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmRhdGE7XG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG4gICAgc2FmZVBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiBwYXJhbXM/LmFzeW5jID8/IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlU3luYyh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIFwifnZhbGlkYXRlXCIoZGF0YSkge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiAhIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQocmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnI/Lm1lc3NhZ2U/LnRvTG93ZXJDYXNlKCk/LmluY2x1ZGVzKFwiZW5jb3VudGVyZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eC5jb21tb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlQXN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSkudGhlbigocmVzdWx0KSA9PiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc2FmZVBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIGFzeW5jIHNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1heWJlQXN5bmNSZXN1bHQgPSB0aGlzLl9wYXJzZSh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgKGlzQXN5bmMobWF5YmVBc3luY1Jlc3VsdCkgPyBtYXliZUFzeW5jUmVzdWx0IDogUHJvbWlzZS5yZXNvbHZlKG1heWJlQXN5bmNSZXN1bHQpKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIHJlZmluZShjaGVjaywgbWVzc2FnZSkge1xuICAgICAgICBjb25zdCBnZXRJc3N1ZVByb3BlcnRpZXMgPSAodmFsKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG1lc3NhZ2UgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UodmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNoZWNrKHZhbCk7XG4gICAgICAgICAgICBjb25zdCBzZXRFcnJvciA9ICgpID0+IGN0eC5hZGRJc3N1ZSh7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmN1c3RvbSxcbiAgICAgICAgICAgICAgICAuLi5nZXRJc3N1ZVByb3BlcnRpZXModmFsKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiICYmIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlZmluZW1lbnQoY2hlY2ssIHJlZmluZW1lbnREYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KCh2YWwsIGN0eCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFjaGVjayh2YWwpKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHR5cGVvZiByZWZpbmVtZW50RGF0YSA9PT0gXCJmdW5jdGlvblwiID8gcmVmaW5lbWVudERhdGEodmFsLCBjdHgpIDogcmVmaW5lbWVudERhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3JlZmluZW1lbnQocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicmVmaW5lbWVudFwiLCByZWZpbmVtZW50IH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdXBlclJlZmluZShyZWZpbmVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KHJlZmluZW1lbnQpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihkZWYpIHtcbiAgICAgICAgLyoqIEFsaWFzIG9mIHNhZmVQYXJzZUFzeW5jICovXG4gICAgICAgIHRoaXMuc3BhID0gdGhpcy5zYWZlUGFyc2VBc3luYztcbiAgICAgICAgdGhpcy5fZGVmID0gZGVmO1xuICAgICAgICB0aGlzLnBhcnNlID0gdGhpcy5wYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZSA9IHRoaXMuc2FmZVBhcnNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucGFyc2VBc3luYyA9IHRoaXMucGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZUFzeW5jID0gdGhpcy5zYWZlUGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc3BhLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lID0gdGhpcy5yZWZpbmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWZpbmVtZW50ID0gdGhpcy5yZWZpbmVtZW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3VwZXJSZWZpbmUgPSB0aGlzLnN1cGVyUmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3B0aW9uYWwgPSB0aGlzLm9wdGlvbmFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGFibGUgPSB0aGlzLm51bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGlzaCA9IHRoaXMubnVsbGlzaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmFycmF5ID0gdGhpcy5hcnJheS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnByb21pc2UgPSB0aGlzLnByb21pc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vciA9IHRoaXMub3IuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hbmQgPSB0aGlzLmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRoaXMudHJhbnNmb3JtLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYnJhbmQgPSB0aGlzLmJyYW5kLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IHRoaXMuZGVmYXVsdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5jYXRjaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlc2NyaWJlID0gdGhpcy5kZXNjcmliZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBpcGUgPSB0aGlzLnBpcGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWFkb25seSA9IHRoaXMucmVhZG9ubHkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pc051bGxhYmxlID0gdGhpcy5pc051bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IHRoaXMuaXNPcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzW1wifnN0YW5kYXJkXCJdID0ge1xuICAgICAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgICAgIHZlbmRvcjogXCJ6b2RcIixcbiAgICAgICAgICAgIHZhbGlkYXRlOiAoZGF0YSkgPT4gdGhpc1tcIn52YWxpZGF0ZVwiXShkYXRhKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgb3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGlzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVsbGFibGUoKS5vcHRpb25hbCgpO1xuICAgIH1cbiAgICBhcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZEFycmF5LmNyZWF0ZSh0aGlzKTtcbiAgICB9XG4gICAgcHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZFByb21pc2UuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG9yKG9wdGlvbikge1xuICAgICAgICByZXR1cm4gWm9kVW5pb24uY3JlYXRlKFt0aGlzLCBvcHRpb25dLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBhbmQoaW5jb21pbmcpIHtcbiAgICAgICAgcmV0dXJuIFpvZEludGVyc2VjdGlvbi5jcmVhdGUodGhpcywgaW5jb21pbmcsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh0cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0gfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlZmF1bHQoZGVmKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBpbm5lclR5cGU6IHRoaXMsXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERlZmF1bHQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBicmFuZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCcmFuZGVkKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZCxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaChkZWYpIHtcbiAgICAgICAgY29uc3QgY2F0Y2hWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQ2F0Y2goe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgY2F0Y2hWYWx1ZTogY2F0Y2hWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVzY3JpYmUoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3QgVGhpcyA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgVGhpcyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBpcGUodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBab2RQaXBlbGluZS5jcmVhdGUodGhpcywgdGFyZ2V0KTtcbiAgICB9XG4gICAgcmVhZG9ubHkoKSB7XG4gICAgICAgIHJldHVybiBab2RSZWFkb25seS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIGlzT3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZSh1bmRlZmluZWQpLnN1Y2Nlc3M7XG4gICAgfVxuICAgIGlzTnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZShudWxsKS5zdWNjZXNzO1xuICAgIH1cbn1cbmNvbnN0IGN1aWRSZWdleCA9IC9eY1teXFxzLV17OCx9JC9pO1xuY29uc3QgY3VpZDJSZWdleCA9IC9eWzAtOWEtel0rJC87XG5jb25zdCB1bGlkUmVnZXggPSAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kL2k7XG4vLyBjb25zdCB1dWlkUmVnZXggPVxuLy8gICAvXihbYS1mMC05XXs4fS1bYS1mMC05XXs0fS1bMS01XVthLWYwLTldezN9LVthLWYwLTldezR9LVthLWYwLTldezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDApJC9pO1xuY29uc3QgdXVpZFJlZ2V4ID0gL15bMC05YS1mQS1GXXs4fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXsxMn0kL2k7XG5jb25zdCBuYW5vaWRSZWdleCA9IC9eW2EtejAtOV8tXXsyMX0kL2k7XG5jb25zdCBqd3RSZWdleCA9IC9eW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dK1xcLltBLVphLXowLTktX10qJC87XG5jb25zdCBkdXJhdGlvblJlZ2V4ID0gL15bLStdP1AoPyEkKSg/Oig/OlstK10/XFxkK1kpfCg/OlstK10/XFxkK1suLF1cXGQrWSQpKT8oPzooPzpbLStdP1xcZCtNKXwoPzpbLStdP1xcZCtbLixdXFxkK00kKSk/KD86KD86Wy0rXT9cXGQrVyl8KD86Wy0rXT9cXGQrWy4sXVxcZCtXJCkpPyg/Oig/OlstK10/XFxkK0QpfCg/OlstK10/XFxkK1suLF1cXGQrRCQpKT8oPzpUKD89W1xcZCstXSkoPzooPzpbLStdP1xcZCtIKXwoPzpbLStdP1xcZCtbLixdXFxkK0gkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/OlstK10/XFxkKyg/OlsuLF1cXGQrKT9TKT8pPz8kLztcbi8vIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ2MTgxLzE1NTAxNTVcbi8vIG9sZCB2ZXJzaW9uOiB0b28gc2xvdywgZGlkbid0IHN1cHBvcnQgdW5pY29kZVxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvaTtcbi8vb2xkIGVtYWlsIHJlZ2V4XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID0gL14oKFtePD4oKVtcXF0uLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXS4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKCg/IS0pKFtePD4oKVtcXF0uLDs6XFxzQFwiXStcXC4pK1tePD4oKVtcXF0uLDs6XFxzQFwiXXsxLH0pW14tPD4oKVtcXF0uLDs6XFxzQFwiXSQvaTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFxcWygoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcXSl8KFxcW0lQdjY6KChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKVxcXSl8KFtBLVphLXowLTldKFtBLVphLXowLTktXSpbQS1aYS16MC05XSkqKFxcLltBLVphLXpdezIsfSkrKSkkLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXpBLVowLTlcXC5cXCFcXCNcXCRcXCVcXCZcXCdcXCpcXCtcXC9cXD1cXD9cXF5cXF9cXGBcXHtcXHxcXH1cXH5cXC1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKD86W2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKnxcIig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxXFx4MjMtXFx4NWJcXHg1ZC1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKlwiKUAoPzooPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/fFxcWyg/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/fFthLXowLTktXSpbYS16MC05XTooPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMS1cXHg1YVxceDUzLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkrKVxcXSkkL2k7XG5jb25zdCBlbWFpbFJlZ2V4ID0gL14oPyFcXC4pKD8hLipcXC5cXC4pKFtBLVowLTlfJytcXC1cXC5dKilbQS1aMC05XystXUAoW0EtWjAtOV1bQS1aMC05XFwtXSpcXC4pK1tBLVpdezIsfSQvaTtcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXowLTkuISMkJSbigJkqKy89P15fYHt8fX4tXStAW2EtejAtOS1dKyg/OlxcLlthLXowLTlcXC1dKykqJC9pO1xuLy8gZnJvbSBodHRwczovL3RoZWtldmluc2NvdHQuY29tL2Vtb2ppcy1pbi1qYXZhc2NyaXB0LyN3cml0aW5nLWEtcmVndWxhci1leHByZXNzaW9uXG5jb25zdCBfZW1vamlSZWdleCA9IGBeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJGA7XG5sZXQgZW1vamlSZWdleDtcbi8vIGZhc3Rlciwgc2ltcGxlciwgc2FmZXJcbmNvbnN0IGlwdjRSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pJC87XG5jb25zdCBpcHY0Q2lkclJlZ2V4ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC8oM1swLTJdfFsxMl0/WzAtOV0pJC87XG4vLyBjb25zdCBpcHY2UmVnZXggPVxuLy8gL14oKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpJC87XG5jb25zdCBpcHY2UmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSkkLztcbmNvbnN0IGlwdjZDaWRyUmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSlcXC8oMTJbMC04XXwxWzAxXVswLTldfFsxLTldP1swLTldKSQvO1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzg2MDM5Mi9kZXRlcm1pbmUtaWYtc3RyaW5nLWlzLWluLWJhc2U2NC11c2luZy1qYXZhc2NyaXB0XG5jb25zdCBiYXNlNjRSZWdleCA9IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLztcbi8vIGh0dHBzOi8vYmFzZTY0Lmd1cnUvc3RhbmRhcmRzL2Jhc2U2NHVybFxuY29uc3QgYmFzZTY0dXJsUmVnZXggPSAvXihbMC05YS16QS1aLV9dezR9KSooKFswLTlhLXpBLVotX117Mn0oPT0pPyl8KFswLTlhLXpBLVotX117M30oPSk/KSk/JC87XG4vLyBzaW1wbGVcbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS1cXFxcZHsyfS1cXFxcZHsyfWA7XG4vLyBubyBsZWFwIHllYXIgdmFsaWRhdGlvblxuLy8gY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYFxcXFxkezR9LSgoMFsxMzU3OF18MTB8MTIpLTMxfCgwWzEzLTldfDFbMC0yXSktMzB8KDBbMS05XXwxWzAtMl0pLSgwWzEtOV18MVxcXFxkfDJcXFxcZCkpYDtcbi8vIHdpdGggbGVhcCB5ZWFyIHZhbGlkYXRpb25cbmNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGAoKFxcXFxkXFxcXGRbMjQ2OF1bMDQ4XXxcXFxcZFxcXFxkWzEzNTc5XVsyNl18XFxcXGRcXFxcZDBbNDhdfFswMjQ2OF1bMDQ4XTAwfFsxMzU3OV1bMjZdMDApLTAyLTI5fFxcXFxkezR9LSgoMFsxMzU3OF18MVswMl0pLSgwWzEtOV18WzEyXVxcXFxkfDNbMDFdKXwoMFs0NjldfDExKS0oMFsxLTldfFsxMl1cXFxcZHwzMCl8KDAyKS0oMFsxLTldfDFcXFxcZHwyWzAtOF0pKSlgO1xuY29uc3QgZGF0ZVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7ZGF0ZVJlZ2V4U291cmNlfSRgKTtcbmZ1bmN0aW9uIHRpbWVSZWdleFNvdXJjZShhcmdzKSB7XG4gICAgbGV0IHNlY29uZHNSZWdleFNvdXJjZSA9IGBbMC01XVxcXFxkYDtcbiAgICBpZiAoYXJncy5wcmVjaXNpb24pIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfVxcXFwuXFxcXGR7JHthcmdzLnByZWNpc2lvbn19YDtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJncy5wcmVjaXNpb24gPT0gbnVsbCkge1xuICAgICAgICBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgJHtzZWNvbmRzUmVnZXhTb3VyY2V9KFxcXFwuXFxcXGQrKT9gO1xuICAgIH1cbiAgICBjb25zdCBzZWNvbmRzUXVhbnRpZmllciA9IGFyZ3MucHJlY2lzaW9uID8gXCIrXCIgOiBcIj9cIjsgLy8gcmVxdWlyZSBzZWNvbmRzIGlmIHByZWNpc2lvbiBpcyBub256ZXJvXG4gICAgcmV0dXJuIGAoWzAxXVxcXFxkfDJbMC0zXSk6WzAtNV1cXFxcZCg6JHtzZWNvbmRzUmVnZXhTb3VyY2V9KSR7c2Vjb25kc1F1YW50aWZpZXJ9YDtcbn1cbmZ1bmN0aW9uIHRpbWVSZWdleChhcmdzKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3RpbWVSZWdleFNvdXJjZShhcmdzKX0kYCk7XG59XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMxNDMyMzFcbmV4cG9ydCBmdW5jdGlvbiBkYXRldGltZVJlZ2V4KGFyZ3MpIHtcbiAgICBsZXQgcmVnZXggPSBgJHtkYXRlUmVnZXhTb3VyY2V9VCR7dGltZVJlZ2V4U291cmNlKGFyZ3MpfWA7XG4gICAgY29uc3Qgb3B0cyA9IFtdO1xuICAgIG9wdHMucHVzaChhcmdzLmxvY2FsID8gYFo/YCA6IGBaYCk7XG4gICAgaWYgKGFyZ3Mub2Zmc2V0KVxuICAgICAgICBvcHRzLnB1c2goYChbKy1dXFxcXGR7Mn06P1xcXFxkezJ9KWApO1xuICAgIHJlZ2V4ID0gYCR7cmVnZXh9KCR7b3B0cy5qb2luKFwifFwiKX0pYDtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7cmVnZXh9JGApO1xufVxuZnVuY3Rpb24gaXNWYWxpZElQKGlwLCB2ZXJzaW9uKSB7XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY0XCIgfHwgIXZlcnNpb24pICYmIGlwdjRSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY2XCIgfHwgIXZlcnNpb24pICYmIGlwdjZSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNWYWxpZEpXVChqd3QsIGFsZykge1xuICAgIGlmICghand0UmVnZXgudGVzdChqd3QpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2hlYWRlcl0gPSBqd3Quc3BsaXQoXCIuXCIpO1xuICAgICAgICBpZiAoIWhlYWRlcilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VBbnlEZWYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW55Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QvdjMnO1xuaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBcnJheURlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgfTtcbiAgICBpZiAoZGVmLnR5cGU/Ll9kZWY/LnR5cGVOYW1lICE9PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55KSB7XG4gICAgICAgIHJlcy5pdGVtcyA9IHBhcnNlRGVmKGRlZi50eXBlLl9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGRlZi5taW5MZW5ndGgpIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5JdGVtcycsIGRlZi5taW5MZW5ndGgudmFsdWUsIGRlZi5taW5MZW5ndGgubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4SXRlbXMnLCBkZWYubWF4TGVuZ3RoLnZhbHVlLCBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluSXRlbXMnLCBkZWYuZXhhY3RMZW5ndGgudmFsdWUsIGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhJdGVtcycsIGRlZi5leGFjdExlbmd0aC52YWx1ZSwgZGVmLmV4YWN0TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJpZ2ludERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAnaW50NjQnLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpZ2ludC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQm9vbGVhbkRlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJvb2xlYW4ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQnJhbmRlZERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKF9kZWYudHlwZS5fZGVmLCByZWZzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyYW5kZWQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlQ2F0Y2hEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2gubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBvdmVycmlkZURhdGVTdHJhdGVneSkge1xuICAgIGNvbnN0IHN0cmF0ZWd5ID0gb3ZlcnJpZGVEYXRlU3RyYXRlZ3kgPz8gcmVmcy5kYXRlU3RyYXRlZ3k7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3RyYXRlZ3kpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhbnlPZjogc3RyYXRlZ3kubWFwKChpdGVtLCBpKSA9PiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBpdGVtKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN3aXRjaCAoc3RyYXRlZ3kpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgY2FzZSAnZm9ybWF0OmRhdGUtdGltZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUtdGltZScsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdmb3JtYXQ6ZGF0ZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnaW50ZWdlcic6XG4gICAgICAgICAgICByZXR1cm4gaW50ZWdlckRhdGVQYXJzZXIoZGVmLCByZWZzKTtcbiAgICB9XG59XG5jb25zdCBpbnRlZ2VyRGF0ZVBhcnNlciA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAndW5peC10aW1lJyxcbiAgICB9O1xuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCAvLyBUaGlzIGlzIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgLy8gVGhpcyBpcyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGVmYXVsdERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucGFyc2VEZWYoX2RlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyksXG4gICAgICAgIGRlZmF1bHQ6IF9kZWYuZGVmYXVsdFZhbHVlKCksXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRWZmZWN0c0RlZihfZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gcmVmcy5lZmZlY3RTdHJhdGVneSA9PT0gJ2lucHV0JyA/IHBhcnNlRGVmKF9kZWYuc2NoZW1hLl9kZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbikgOiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVmZmVjdHMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZUVudW1EZWYoZGVmKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgIGVudW06IFsuLi5kZWYudmFsdWVzXSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW51bS5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5jb25zdCBpc0pzb25TY2hlbWE3QWxsT2ZUeXBlID0gKHR5cGUpID0+IHtcbiAgICBpZiAoJ3R5cGUnIGluIHR5cGUgJiYgdHlwZS50eXBlID09PSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAnYWxsT2YnIGluIHR5cGU7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IGFsbE9mID0gW1xuICAgICAgICBwYXJzZURlZihkZWYubGVmdC5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMCddLFxuICAgICAgICB9KSxcbiAgICAgICAgcGFyc2VEZWYoZGVmLnJpZ2h0Ll9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcxJ10sXG4gICAgICAgIH0pLFxuICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpO1xuICAgIGxldCB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSByZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5JyA/IHsgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzOiBmYWxzZSB9IDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG1lcmdlZEFsbE9mID0gW107XG4gICAgLy8gSWYgZWl0aGVyIG9mIHRoZSBzY2hlbWFzIGlzIGFuIGFsbE9mLCBtZXJnZSB0aGVtIGludG8gYSBzaW5nbGUgYWxsT2ZcbiAgICBhbGxPZi5mb3JFYWNoKChzY2hlbWEpID0+IHtcbiAgICAgICAgaWYgKGlzSnNvblNjaGVtYTdBbGxPZlR5cGUoc2NoZW1hKSkge1xuICAgICAgICAgICAgbWVyZ2VkQWxsT2YucHVzaCguLi5zY2hlbWEuYWxsT2YpO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS51bmV2YWx1YXRlZFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIElmIG9uZSBvZiB0aGUgc2NoZW1hcyBoYXMgbm8gdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzIHNldCxcbiAgICAgICAgICAgICAgICAvLyB0aGUgbWVyZ2VkIHNjaGVtYSBzaG91bGQgYWxzbyBoYXZlIG5vIHVuZXZhbHVhdGVkUHJvcGVydGllcyBzZXRcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmVzdGVkU2NoZW1hID0gc2NoZW1hO1xuICAgICAgICAgICAgaWYgKCdhZGRpdGlvbmFsUHJvcGVydGllcycgaW4gc2NoZW1hICYmIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGFkZGl0aW9uYWxQcm9wZXJ0aWVzLCAuLi5yZXN0IH0gPSBzY2hlbWE7XG4gICAgICAgICAgICAgICAgbmVzdGVkU2NoZW1hID0gcmVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFzIHNvb24gYXMgb25lIG9mIHRoZSBzY2hlbWFzIGhhcyBhZGRpdGlvbmFsUHJvcGVydGllcyBzZXQgbm90IHRvIGZhbHNlLCB3ZSBhbGxvdyB1bmV2YWx1YXRlZFByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJnZWRBbGxPZi5wdXNoKG5lc3RlZFNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWVyZ2VkQWxsT2YubGVuZ3RoID9cbiAgICAgICAge1xuICAgICAgICAgICAgYWxsT2Y6IG1lcmdlZEFsbE9mLFxuICAgICAgICAgICAgLi4udW5ldmFsdWF0ZWRQcm9wZXJ0aWVzLFxuICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJzZWN0aW9uLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VMaXRlcmFsRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0eXBlb2YgZGVmLnZhbHVlO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSAnYmlnaW50JyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnbnVtYmVyJyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnYm9vbGVhbicgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IEFycmF5LmlzQXJyYXkoZGVmLnZhbHVlKSA/ICdhcnJheScgOiAnb2JqZWN0JyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBwYXJzZWRUeXBlID09PSAnYmlnaW50JyA/ICdpbnRlZ2VyJyA6IHBhcnNlZFR5cGUsXG4gICAgICAgICAgICBlbnVtOiBbZGVmLnZhbHVlXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZSA9PT0gJ2JpZ2ludCcgPyAnaW50ZWdlcicgOiBwYXJzZWRUeXBlLFxuICAgICAgICBjb25zdDogZGVmLnZhbHVlLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXRlcmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5sZXQgZW1vamlSZWdleDtcbi8qKlxuICogR2VuZXJhdGVkIGZyb20gdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm91bmQgaGVyZSBhcyBvZiAyMDI0LTA1LTIyOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kL2Jsb2IvbWFzdGVyL3NyYy90eXBlcy50cy5cbiAqXG4gKiBFeHByZXNzaW9ucyB3aXRoIC9pIGZsYWcgaGF2ZSBiZWVuIGNoYW5nZWQgYWNjb3JkaW5nbHkuXG4gKi9cbmV4cG9ydCBjb25zdCB6b2RQYXR0ZXJucyA9IHtcbiAgICAvKipcbiAgICAgKiBgY2Agd2FzIGNoYW5nZWQgdG8gYFtjQ11gIHRvIHJlcGxpY2F0ZSAvaSBmbGFnXG4gICAgICovXG4gICAgY3VpZDogL15bY0NdW15cXHMtXXs4LH0kLyxcbiAgICBjdWlkMjogL15bMC05YS16XSskLyxcbiAgICB1bGlkOiAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kLyxcbiAgICAvKipcbiAgICAgKiBgYS16YCB3YXMgYWRkZWQgdG8gcmVwbGljYXRlIC9pIGZsYWdcbiAgICAgKi9cbiAgICBlbWFpbDogL14oPyFcXC4pKD8hLipcXC5cXC4pKFthLXpBLVowLTlfJytcXC1cXC5dKilbYS16QS1aMC05XystXUAoW2EtekEtWjAtOV1bYS16QS1aMC05XFwtXSpcXC4pK1thLXpBLVpdezIsfSQvLFxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdGVkIGEgdmFsaWQgVW5pY29kZSBSZWdFeHBcbiAgICAgKlxuICAgICAqIExhemlseSBpbnN0YW50aWF0ZSBzaW5jZSB0aGlzIHR5cGUgb2YgcmVnZXggaXNuJ3Qgc3VwcG9ydGVkXG4gICAgICogaW4gYWxsIGVudnMgKGUuZy4gUmVhY3QgTmF0aXZlKS5cbiAgICAgKlxuICAgICAqIFNlZTpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvaXNzdWVzLzI0MzNcbiAgICAgKiBGaXggaW4gWm9kOlxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbmhhY2tzL3pvZC9jb21taXQvOTM0MGZkNTFlNDg1NzZhNzVhZGM5MTliZmY2NWRiYzRhNWQ0Yzk5YlxuICAgICAqL1xuICAgIGVtb2ppOiAoKSA9PiB7XG4gICAgICAgIGlmIChlbW9qaVJlZ2V4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVtb2ppUmVnZXggPSBSZWdFeHAoJ14oXFxcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfXxcXFxccHtFbW9qaV9Db21wb25lbnR9KSskJywgJ3UnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW1vamlSZWdleDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFVudXNlZFxuICAgICAqL1xuICAgIHV1aWQ6IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC8sXG4gICAgLyoqXG4gICAgICogVW51c2VkXG4gICAgICovXG4gICAgaXB2NDogL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSkkLyxcbiAgICAvKipcbiAgICAgKiBVbnVzZWRcbiAgICAgKi9cbiAgICBpcHY2OiAvXigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSkkLyxcbiAgICBiYXNlNjQ6IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLyxcbiAgICBuYW5vaWQ6IC9eW2EtekEtWjAtOV8tXXsyMX0kLyxcbn07XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHByb2Nlc3NQYXR0ZXJuKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiByZWZzLnBhdHRlcm5TdHJhdGVneSA9PT0gJ2VzY2FwZScgPyBlc2NhcGVOb25BbHBoYU51bWVyaWModmFsdWUpIDogdmFsdWU7XG4gICAgfVxuICAgIGlmIChkZWYuY2hlY2tzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5MZW5ndGgnLCB0eXBlb2YgcmVzLm1pbkxlbmd0aCA9PT0gJ251bWJlcicgPyBNYXRoLm1heChyZXMubWluTGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4TGVuZ3RoJywgdHlwZW9mIHJlcy5tYXhMZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5taW4ocmVzLm1heExlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVmcy5lbWFpbFN0cmF0ZWd5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtYXQ6ZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdlbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9ybWF0Omlkbi1lbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2lkbi1lbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGF0dGVybjp6b2QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5lbWFpbCwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXJsJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3VyaScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1dWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3V1aWQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmVnZXgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgY2hlY2sucmVnZXgsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmN1aWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkMic6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkMiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0c1dpdGgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGBeJHtwcm9jZXNzUGF0dGVybihjaGVjay52YWx1ZSl9YCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmRzV2l0aCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAoYCR7cHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpfSRgKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUtdGltZScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGltZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd0aW1lJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2R1cmF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2R1cmF0aW9uJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlbmd0aCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluTGVuZ3RoJywgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heExlbmd0aCcsIHR5cGVvZiByZXMubWF4TGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWluKHJlcy5tYXhMZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW5jbHVkZXMnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAocHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdpcCc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY0JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY2JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Vtb2ppJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmVtb2ppLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndWxpZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLnVsaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnYmFzZTY0Jzoge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZnMuYmFzZTY0U3RyYXRlZ3kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdDpiaW5hcnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2JpbmFyeScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudEVuY29kaW5nOmJhc2U2NCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2NvbnRlbnRFbmNvZGluZycsICdiYXNlNjQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdHRlcm46em9kJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5iYXNlNjQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICduYW5vaWQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5uYW5vaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICd0b0xvd2VyQ2FzZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAndG9VcHBlckNhc2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RyaW0nOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAoKF8pID0+IHsgfSkoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5jb25zdCBlc2NhcGVOb25BbHBoYU51bWVyaWMgPSAodmFsdWUpID0+IEFycmF5LmZyb20odmFsdWUpXG4gICAgLm1hcCgoYykgPT4gKC9bYS16QS1aMC05XS8udGVzdChjKSA/IGMgOiBgXFxcXCR7Y31gKSlcbiAgICAuam9pbignJyk7XG5jb25zdCBhZGRGb3JtYXQgPSAoc2NoZW1hLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEuZm9ybWF0IHx8IHNjaGVtYS5hbnlPZj8uc29tZSgoeCkgPT4geC5mb3JtYXQpKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFueU9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYW55T2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLmZvcm1hdCkge1xuICAgICAgICAgICAgc2NoZW1hLmFueU9mLnB1c2goe1xuICAgICAgICAgICAgICAgIGZvcm1hdDogc2NoZW1hLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAuLi4oc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgICAgICByZWZzLmVycm9yTWVzc2FnZXMgJiYge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBzY2hlbWEuZXJyb3JNZXNzYWdlLmZvcm1hdCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGUgc2NoZW1hLmZvcm1hdDtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKHtcbiAgICAgICAgICAgIGZvcm1hdDogdmFsdWUsXG4gICAgICAgICAgICAuLi4obWVzc2FnZSAmJiByZWZzLmVycm9yTWVzc2FnZXMgJiYgeyBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBtZXNzYWdlIH0gfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdmb3JtYXQnLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbmNvbnN0IGFkZFBhdHRlcm4gPSAoc2NoZW1hLCByZWdleCwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEucGF0dGVybiB8fCBzY2hlbWEuYWxsT2Y/LnNvbWUoKHgpID0+IHgucGF0dGVybikpIHtcbiAgICAgICAgaWYgKCFzY2hlbWEuYWxsT2YpIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbGxPZiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlbWEucGF0dGVybikge1xuICAgICAgICAgICAgc2NoZW1hLmFsbE9mLnB1c2goe1xuICAgICAgICAgICAgICAgIHBhdHRlcm46IHNjaGVtYS5wYXR0ZXJuLFxuICAgICAgICAgICAgICAgIC4uLihzY2hlbWEuZXJyb3JNZXNzYWdlICYmXG4gICAgICAgICAgICAgICAgICAgIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBzY2hlbWEuZXJyb3JNZXNzYWdlLnBhdHRlcm4gfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5wYXR0ZXJuO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS5lcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2NoZW1hLmVycm9yTWVzc2FnZS5wYXR0ZXJuO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHtcbiAgICAgICAgICAgIHBhdHRlcm46IHByb2Nlc3NSZWdFeHAocmVnZXgsIHJlZnMpLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IHBhdHRlcm46IG1lc3NhZ2UgfSB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ3BhdHRlcm4nLCBwcm9jZXNzUmVnRXhwKHJlZ2V4LCByZWZzKSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbi8vIE11dGF0ZSB6LnN0cmluZy5yZWdleCgpIGluIGEgYmVzdCBhdHRlbXB0IHRvIGFjY29tbW9kYXRlIGZvciByZWdleCBmbGFncyB3aGVuIGFwcGx5UmVnZXhGbGFncyBpcyB0cnVlXG5jb25zdCBwcm9jZXNzUmVnRXhwID0gKHJlZ2V4T3JGdW5jdGlvbiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IHJlZ2V4ID0gdHlwZW9mIHJlZ2V4T3JGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHJlZ2V4T3JGdW5jdGlvbigpIDogcmVnZXhPckZ1bmN0aW9uO1xuICAgIGlmICghcmVmcy5hcHBseVJlZ2V4RmxhZ3MgfHwgIXJlZ2V4LmZsYWdzKVxuICAgICAgICByZXR1cm4gcmVnZXguc291cmNlO1xuICAgIC8vIEN1cnJlbnRseSBoYW5kbGVkIGZsYWdzXG4gICAgY29uc3QgZmxhZ3MgPSB7XG4gICAgICAgIGk6IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdpJyksIC8vIENhc2UtaW5zZW5zaXRpdmVcbiAgICAgICAgbTogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ20nKSwgLy8gYF5gIGFuZCBgJGAgbWF0Y2hlcyBhZGphY2VudCB0byBuZXdsaW5lIGNoYXJhY3RlcnNcbiAgICAgICAgczogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ3MnKSwgLy8gYC5gIG1hdGNoZXMgbmV3bGluZXNcbiAgICB9O1xuICAgIC8vIFRoZSBnZW5lcmFsIHByaW5jaXBsZSBoZXJlIGlzIHRvIHN0ZXAgdGhyb3VnaCBlYWNoIGNoYXJhY3Rlciwgb25lIGF0IGEgdGltZSwgYXBwbHlpbmcgbXV0YXRpb25zIGFzIGZsYWdzIHJlcXVpcmUuIFdlIGtlZXAgdHJhY2sgd2hlbiB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaXMgZXNjYXBlZCwgYW5kIHdoZW4gaXQncyBpbnNpZGUgYSBncm91cCAvbGlrZSBbdGhpc10vIG9yIChhbHNvKSBhIHJhbmdlIGxpa2UgL1thLXpdLy4gVGhlIGZvbGxvd2luZyBpcyBmYWlybHkgYnJpdHRsZSBpbXBlcmF0aXZlIGNvZGU7IGVkaXQgYXQgeW91ciBwZXJpbCFcbiAgICBjb25zdCBzb3VyY2UgPSBmbGFncy5pID8gcmVnZXguc291cmNlLnRvTG93ZXJDYXNlKCkgOiByZWdleC5zb3VyY2U7XG4gICAgbGV0IHBhdHRlcm4gPSAnJztcbiAgICBsZXQgaXNFc2NhcGVkID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzRXNjYXBlZCkge1xuICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICBpc0VzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbGFncy5pKSB7XG4gICAgICAgICAgICBpZiAoaW5DaGFyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkNoYXJSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAke3NvdXJjZVtpIC0gMl19LSR7c291cmNlW2ldfWAudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2kgKyAxXSA9PT0gJy0nICYmIHNvdXJjZVtpICsgMl0/Lm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHNvdXJjZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYCR7c291cmNlW2ldfSR7c291cmNlW2ldLnRvVXBwZXJDYXNlKCl9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzb3VyY2VbaV0ubWF0Y2goL1thLXpdLykpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGBbJHtzb3VyY2VbaV19JHtzb3VyY2VbaV0udG9VcHBlckNhc2UoKX1dYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MubSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVtpXSA9PT0gJ14nKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgKF58KD88PVtcXHJcXG5dKSlgO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2ldID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAoJHwoPz1bXFxyXFxuXSkpYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MucyAmJiBzb3VyY2VbaV0gPT09ICcuJykge1xuICAgICAgICAgICAgcGF0dGVybiArPSBpbkNoYXJHcm91cCA/IGAke3NvdXJjZVtpXX1cXHJcXG5gIDogYFske3NvdXJjZVtpXX1cXHJcXG5dYDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICBpZiAoc291cmNlW2ldID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIGlzRXNjYXBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5DaGFyR3JvdXAgJiYgc291cmNlW2ldID09PSAnXScpIHtcbiAgICAgICAgICAgIGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWluQ2hhckdyb3VwICYmIHNvdXJjZVtpXSA9PT0gJ1snKSB7XG4gICAgICAgICAgICBpbkNoYXJHcm91cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVnZXhUZXN0ID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBjb252ZXJ0IHJlZ2V4IHBhdHRlcm4gYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oJy8nKX0gdG8gYSBmbGFnLWluZGVwZW5kZW50IGZvcm0hIEZhbGxpbmcgYmFjayB0byB0aGUgZmxhZy1pZ25vcmFudCBzb3VyY2VgKTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnNvdXJjZTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm47XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5nLm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QvdjMnO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3N0cmluZy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgJiYgZGVmLmtleVR5cGU/Ll9kZWYudHlwZU5hbWUgPT09IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IGRlZi5rZXlUeXBlLl9kZWYudmFsdWVzLnJlZHVjZSgoYWNjLCBrZXkpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uYWNjLFxuICAgICAgICAgICAgICAgIFtrZXldOiBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIGtleV0sXG4gICAgICAgICAgICAgICAgfSkgPz8ge30sXG4gICAgICAgICAgICB9KSwge30pLFxuICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWRkaXRpb25hbFByb3BlcnRpZXMnXSxcbiAgICAgICAgfSkgPz8ge30sXG4gICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG4gICAgaWYgKGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nICYmIGRlZi5rZXlUeXBlLl9kZWYuY2hlY2tzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IE9iamVjdC5lbnRyaWVzKHBhcnNlU3RyaW5nRGVmKGRlZi5rZXlUeXBlLl9kZWYsIHJlZnMpKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiAoa2V5ID09PSAndHlwZScgPyBhY2MgOiB7IC4uLmFjYywgW2tleV06IHZhbHVlIH0pLCB7fSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWVzOiBrZXlUeXBlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChkZWYua2V5VHlwZT8uX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZXM6IHtcbiAgICAgICAgICAgICAgICBlbnVtOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWNvcmQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9yZWNvcmQubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNYXBEZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMubWFwU3RyYXRlZ3kgPT09ICdyZWNvcmQnKSB7XG4gICAgICAgIHJldHVybiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpO1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0gcGFyc2VEZWYoZGVmLmtleVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsICdpdGVtcycsICcwJ10sXG4gICAgfSkgfHwge307XG4gICAgY29uc3QgdmFsdWVzID0gcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2l0ZW1zJywgJ2l0ZW1zJywgJzEnXSxcbiAgICB9KSB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICBtYXhJdGVtczogMTI1LFxuICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIGl0ZW1zOiBba2V5cywgdmFsdWVzXSxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiAyLFxuICAgICAgICAgICAgbWF4SXRlbXM6IDIsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTmF0aXZlRW51bURlZihkZWYpIHtcbiAgICBjb25zdCBvYmplY3QgPSBkZWYudmFsdWVzO1xuICAgIGNvbnN0IGFjdHVhbEtleXMgPSBPYmplY3Qua2V5cyhkZWYudmFsdWVzKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdFtvYmplY3Rba2V5XV0gIT09ICdudW1iZXInO1xuICAgIH0pO1xuICAgIGNvbnN0IGFjdHVhbFZhbHVlcyA9IGFjdHVhbEtleXMubWFwKChrZXkpID0+IG9iamVjdFtrZXldKTtcbiAgICBjb25zdCBwYXJzZWRUeXBlcyA9IEFycmF5LmZyb20obmV3IFNldChhY3R1YWxWYWx1ZXMubWFwKCh2YWx1ZXMpID0+IHR5cGVvZiB2YWx1ZXMpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZXMubGVuZ3RoID09PSAxID9cbiAgICAgICAgICAgIHBhcnNlZFR5cGVzWzBdID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICAgICAgJ3N0cmluZydcbiAgICAgICAgICAgICAgICA6ICdudW1iZXInXG4gICAgICAgICAgICA6IFsnc3RyaW5nJywgJ251bWJlciddLFxuICAgICAgICBlbnVtOiBhY3R1YWxWYWx1ZXMsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5hdGl2ZUVudW0ubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZU5ldmVyRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VOdWxsRGVmKHJlZnMpIHtcbiAgICByZXR1cm4gcmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgP1xuICAgICAgICB7XG4gICAgICAgICAgICBlbnVtOiBbJ251bGwnXSxcbiAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgdHlwZTogJ251bGwnLFxuICAgICAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bnVsbC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcHJpbWl0aXZlTWFwcGluZ3MgPSB7XG4gICAgWm9kU3RyaW5nOiAnc3RyaW5nJyxcbiAgICBab2ROdW1iZXI6ICdudW1iZXInLFxuICAgIFpvZEJpZ0ludDogJ2ludGVnZXInLFxuICAgIFpvZEJvb2xlYW46ICdib29sZWFuJyxcbiAgICBab2ROdWxsOiAnbnVsbCcsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKVxuICAgICAgICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBkZWYub3B0aW9ucyBpbnN0YW5jZW9mIE1hcCA/IEFycmF5LmZyb20oZGVmLm9wdGlvbnMudmFsdWVzKCkpIDogZGVmLm9wdGlvbnM7XG4gICAgLy8gVGhpcyBibG9ja3MgdHJpZXMgdG8gbG9vayBhaGVhZCBhIGJpdCB0byBwcm9kdWNlIG5pY2VyIGxvb2tpbmcgc2NoZW1hcyB3aXRoIHR5cGUgYXJyYXkgaW5zdGVhZCBvZiBhbnlPZi5cbiAgICBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lIGluIHByaW1pdGl2ZU1hcHBpbmdzICYmICgheC5fZGVmLmNoZWNrcyB8fCAheC5fZGVmLmNoZWNrcy5sZW5ndGgpKSkge1xuICAgICAgICAvLyBhbGwgdHlwZXMgaW4gdW5pb24gYXJlIHByaW1pdGl2ZSBhbmQgbGFjayBjaGVja3MsIHNvIG1pZ2h0IGFzIHdlbGwgc3F1YXNoIGludG8ge3R5cGU6IFsuLi5dfVxuICAgICAgICBjb25zdCB0eXBlcyA9IG9wdGlvbnMucmVkdWNlKCh0eXBlcywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHByaW1pdGl2ZU1hcHBpbmdzW3guX2RlZi50eXBlTmFtZV07IC8vQ2FuIGJlIHNhZmVseSBjYXN0ZWQgZHVlIHRvIHJvdyA0M1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgJiYgIXR5cGVzLmluY2x1ZGVzKHR5cGUpID8gWy4uLnR5cGVzLCB0eXBlXSA6IHR5cGVzO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlcy5sZW5ndGggPiAxID8gdHlwZXMgOiB0eXBlc1swXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lID09PSAnWm9kTGl0ZXJhbCcgJiYgIXguZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIC8vIGFsbCBvcHRpb25zIGxpdGVyYWxzXG4gICAgICAgIGNvbnN0IHR5cGVzID0gb3B0aW9ucy5yZWR1Y2UoKGFjYywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiB4Ll9kZWYudmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCB0eXBlXTtcbiAgICAgICAgICAgICAgICBjYXNlICdiaWdpbnQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgJ2ludGVnZXInXTtcbiAgICAgICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoeC5fZGVmLnZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsICdudWxsJ107XG4gICAgICAgICAgICAgICAgY2FzZSAnc3ltYm9sJzpcbiAgICAgICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGlmICh0eXBlcy5sZW5ndGggPT09IG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBhbGwgdGhlIGxpdGVyYWxzIGFyZSBwcmltaXRpdmUsIGFzIGZhciBhcyBudWxsIGNhbiBiZSBjb25zaWRlcmVkIHByaW1pdGl2ZVxuICAgICAgICAgICAgY29uc3QgdW5pcXVlVHlwZXMgPSB0eXBlcy5maWx0ZXIoKHgsIGksIGEpID0+IGEuaW5kZXhPZih4KSA9PT0gaSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHVuaXF1ZVR5cGVzLmxlbmd0aCA+IDEgPyB1bmlxdWVUeXBlcyA6IHVuaXF1ZVR5cGVzWzBdLFxuICAgICAgICAgICAgICAgIGVudW06IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYy5pbmNsdWRlcyh4Ll9kZWYudmFsdWUpID8gYWNjIDogWy4uLmFjYywgeC5fZGVmLnZhbHVlXTtcbiAgICAgICAgICAgICAgICB9LCBbXSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gJ1pvZEVudW0nKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiBbLi4uYWNjLCAuLi54Ll9kZWYudmFsdWVzLmZpbHRlcigoeCkgPT4gIWFjYy5pbmNsdWRlcyh4KSldLCBbXSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBhc0FueU9mKGRlZiwgcmVmcyk7XG59XG5jb25zdCBhc0FueU9mID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IGFueU9mID0gKGRlZi5vcHRpb25zIGluc3RhbmNlb2YgTWFwID8gQXJyYXkuZnJvbShkZWYub3B0aW9ucy52YWx1ZXMoKSkgOiBkZWYub3B0aW9ucylcbiAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgYCR7aX1gXSxcbiAgICB9KSlcbiAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4ICYmICghcmVmcy5zdHJpY3RVbmlvbnMgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh4KS5sZW5ndGggPiAwKSkpO1xuICAgIHJldHVybiBhbnlPZi5sZW5ndGggPyB7IGFueU9mIH0gOiB1bmRlZmluZWQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5pb24ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcHJpbWl0aXZlTWFwcGluZ3MgfSBmcm9tIFwiLi91bmlvbi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bGxhYmxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChbJ1pvZFN0cmluZycsICdab2ROdW1iZXInLCAnWm9kQmlnSW50JywgJ1pvZEJvb2xlYW4nLCAnWm9kTnVsbCddLmluY2x1ZGVzKGRlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZSkgJiZcbiAgICAgICAgKCFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzIHx8ICFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzLmxlbmd0aCkpIHtcbiAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnIHx8IHJlZnMubnVsbGFibGVTdHJhdGVneSA9PT0gJ3Byb3BlcnR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLFxuICAgICAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogW3ByaW1pdGl2ZU1hcHBpbmdzW2RlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZV0sICdudWxsJ10sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChiYXNlICYmICckcmVmJyBpbiBiYXNlKVxuICAgICAgICAgICAgcmV0dXJuIHsgYWxsT2Y6IFtiYXNlXSwgbnVsbGFibGU6IHRydWUgfTtcbiAgICAgICAgcmV0dXJuIGJhc2UgJiYgeyAuLi5iYXNlLCBudWxsYWJsZTogdHJ1ZSB9O1xuICAgIH1cbiAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzAnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gYmFzZSAmJiB7IGFueU9mOiBbYmFzZSwgeyB0eXBlOiAnbnVsbCcgfV0gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bGxhYmxlLm1qcy5tYXAiLCJpbXBvcnQgeyBhZGRFcnJvck1lc3NhZ2UsIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bWJlckRlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgcmVzLnR5cGUgPSAnaW50ZWdlcic7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKHJlcywgJ3R5cGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bWJlci5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5mdW5jdGlvbiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy5yZW1vdmVBZGRpdGlvbmFsU3RyYXRlZ3kgPT09ICdzdHJpY3QnKSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgIT09ICdzdHJpY3QnXG4gICAgICAgICAgICA6IHBhcnNlRGVmKGRlZi5jYXRjaGFsbC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsUHJvcGVydGllcyddLFxuICAgICAgICAgICAgfSkgPz8gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgPT09ICdwYXNzdGhyb3VnaCdcbiAgICAgICAgICAgIDogcGFyc2VEZWYoZGVmLmNhdGNoYWxsLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJ10sXG4gICAgICAgICAgICB9KSA/PyB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAuLi5PYmplY3QuZW50cmllcyhkZWYuc2hhcGUoKSkucmVkdWNlKChhY2MsIFtwcm9wTmFtZSwgcHJvcERlZl0pID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9wRGVmID09PSB1bmRlZmluZWQgfHwgcHJvcERlZi5fZGVmID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5UGF0aCA9IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIHByb3BOYW1lXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERlZiA9IHBhcnNlRGVmKHByb3BEZWYuX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IHByb3BlcnR5UGF0aCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVBhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChwYXJzZWREZWYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgaWYgKHJlZnMub3BlbmFpU3RyaWN0TW9kZSAmJlxuICAgICAgICAgICAgICAgIHByb3BEZWYuaXNPcHRpb25hbCgpICYmXG4gICAgICAgICAgICAgICAgIXByb3BEZWYuaXNOdWxsYWJsZSgpICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHByb3BEZWYuX2RlZj8uZGVmYXVsdFZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9kIGZpZWxkIGF0IFxcYCR7cHJvcGVydHlQYXRoLmpvaW4oJy8nKX1cXGAgdXNlcyBcXGAub3B0aW9uYWwoKVxcYCB3aXRob3V0IFxcYC5udWxsYWJsZSgpXFxgIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFQSS4gU2VlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvc3RydWN0dXJlZC1vdXRwdXRzP2FwaS1tb2RlPXJlc3BvbnNlcyNhbGwtZmllbGRzLW11c3QtYmUtcmVxdWlyZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5hY2MucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgW3Byb3BOYW1lXTogcGFyc2VkRGVmLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHByb3BEZWYuaXNPcHRpb25hbCgpICYmICFyZWZzLm9wZW5haVN0cmljdE1vZGUgPyBhY2MucmVxdWlyZWQgOiBbLi4uYWNjLnJlcXVpcmVkLCBwcm9wTmFtZV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCB7IHByb3BlcnRpZXM6IHt9LCByZXF1aXJlZDogW10gfSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpLFxuICAgIH07XG4gICAgaWYgKCFyZXN1bHQucmVxdWlyZWQubGVuZ3RoKVxuICAgICAgICBkZWxldGUgcmVzdWx0LnJlcXVpcmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmplY3QubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlT3B0aW9uYWxEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgaWYgKHJlZnMucHJvcGVydHlQYXRoICYmXG4gICAgICAgIHJlZnMuY3VycmVudFBhdGguc2xpY2UoMCwgcmVmcy5wcm9wZXJ0eVBhdGgubGVuZ3RoKS50b1N0cmluZygpID09PSByZWZzLnByb3BlcnR5UGF0aC50b1N0cmluZygpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHsgLi4ucmVmcywgY3VycmVudFBhdGg6IHJlZnMuY3VycmVudFBhdGggfSk7XG4gICAgfVxuICAgIGNvbnN0IGlubmVyU2NoZW1hID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzEnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gaW5uZXJTY2hlbWEgP1xuICAgICAgICB7XG4gICAgICAgICAgICBhbnlPZjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbm90OiB7fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlubmVyU2NoZW1hLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfVxuICAgICAgICA6IHt9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVBpcGVsaW5lRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ2lucHV0Jykge1xuICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmluLl9kZWYsIHJlZnMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ291dHB1dCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBwYXJzZURlZihkZWYuaW4uX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcwJ10sXG4gICAgfSk7XG4gICAgY29uc3QgYiA9IHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsIGEgPyAnMScgOiAnMCddLFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFsbE9mOiBbYSwgYl0uZmlsdGVyKCh4KSA9PiB4ICE9PSB1bmRlZmluZWQpLFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZWxpbmUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpIHtcbiAgICByZXR1cm4gcGFyc2VEZWYoZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9taXNlLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNldERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBpdGVtcyA9IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgIH0pO1xuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgdW5pcXVlSXRlbXM6IHRydWUsXG4gICAgICAgIGl0ZW1zLFxuICAgIH07XG4gICAgaWYgKGRlZi5taW5TaXplKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMoc2NoZW1hLCAnbWluSXRlbXMnLCBkZWYubWluU2l6ZS52YWx1ZSwgZGVmLm1pblNpemUubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4U2l6ZSkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ21heEl0ZW1zJywgZGVmLm1heFNpemUudmFsdWUsIGRlZi5tYXhTaXplLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2V0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVR1cGxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChkZWYucmVzdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgaXRlbXM6IGRlZi5pdGVtc1xuICAgICAgICAgICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCBgJHtpfWBdLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiAoeCA9PT0gdW5kZWZpbmVkID8gYWNjIDogWy4uLmFjYywgeF0pLCBbXSksXG4gICAgICAgICAgICBhZGRpdGlvbmFsSXRlbXM6IHBhcnNlRGVmKGRlZi5yZXN0Ll9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxJdGVtcyddLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgbWF4SXRlbXM6IGRlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICBpdGVtczogZGVmLml0ZW1zXG4gICAgICAgICAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsIGAke2l9YF0sXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIHgpID0+ICh4ID09PSB1bmRlZmluZWQgPyBhY2MgOiBbLi4uYWNjLCB4XSksIFtdKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10dXBsZS5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5kZWZpbmVkRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuZGVmaW5lZC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5rbm93bkRlZigpIHtcbiAgICByZXR1cm4ge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bmtub3duLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVJlYWRvbmx5RGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWRvbmx5Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QvdjMnO1xuaW1wb3J0IHsgcGFyc2VBbnlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FueS5tanNcIjtcbmltcG9ydCB7IHBhcnNlQXJyYXlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FycmF5Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VCaWdpbnREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JpZ2ludC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQm9vbGVhbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvYm9vbGVhbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlQnJhbmRlZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvYnJhbmRlZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQ2F0Y2hEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2NhdGNoLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEYXRlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWZhdWx0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kZWZhdWx0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFZmZlY3RzRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lZmZlY3RzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lbnVtLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VJbnRlcnNlY3Rpb25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2ludGVyc2VjdGlvbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlTGl0ZXJhbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbGl0ZXJhbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTWFwRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9tYXAubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5hdGl2ZUVudW1EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL25hdGl2ZUVudW0ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5ldmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uZXZlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbnVsbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbGFibGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bGxhYmxlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOdW1iZXJEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bWJlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlT2JqZWN0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vYmplY3QubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU9wdGlvbmFsRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vcHRpb25hbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlUGlwZWxpbmVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3BpcGVsaW5lLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9taXNlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9wcm9taXNlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3JlY29yZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2V0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9zZXQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3BhcnNlcnMvc3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VUdXBsZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvdHVwbGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVuZGVmaW5lZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5kZWZpbmVkLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmlvbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5pb24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVua25vd25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3Vua25vd24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWRvbmx5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9yZWFkb25seS5tanNcIjtcbmltcG9ydCB7IGlnbm9yZU92ZXJyaWRlIH0gZnJvbSBcIi4vT3B0aW9ucy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbiA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2Vlbkl0ZW0gPSByZWZzLnNlZW4uZ2V0KGRlZik7XG4gICAgaWYgKHJlZnMub3ZlcnJpZGUpIHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVSZXN1bHQgPSByZWZzLm92ZXJyaWRlPy4oZGVmLCByZWZzLCBzZWVuSXRlbSwgZm9yY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgaWYgKG92ZXJyaWRlUmVzdWx0ICE9PSBpZ25vcmVPdmVycmlkZSkge1xuICAgICAgICAgICAgcmV0dXJuIG92ZXJyaWRlUmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzZWVuSXRlbSAmJiAhZm9yY2VSZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNlZW5TY2hlbWEgPSBnZXQkcmVmKHNlZW5JdGVtLCByZWZzKTtcbiAgICAgICAgaWYgKHNlZW5TY2hlbWEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCckcmVmJyBpbiBzZWVuU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5zZWVuUmVmcy5hZGQoc2VlblNjaGVtYS4kcmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWVuU2NoZW1hO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld0l0ZW0gPSB7IGRlZiwgcGF0aDogcmVmcy5jdXJyZW50UGF0aCwganNvblNjaGVtYTogdW5kZWZpbmVkIH07XG4gICAgcmVmcy5zZWVuLnNldChkZWYsIG5ld0l0ZW0pO1xuICAgIGNvbnN0IGpzb25TY2hlbWEgPSBzZWxlY3RQYXJzZXIoZGVmLCBkZWYudHlwZU5hbWUsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgaWYgKGpzb25TY2hlbWEpIHtcbiAgICAgICAgYWRkTWV0YShkZWYsIHJlZnMsIGpzb25TY2hlbWEpO1xuICAgIH1cbiAgICBuZXdJdGVtLmpzb25TY2hlbWEgPSBqc29uU2NoZW1hO1xuICAgIHJldHVybiBqc29uU2NoZW1hO1xufVxuY29uc3QgZ2V0JHJlZiA9IChpdGVtLCByZWZzKSA9PiB7XG4gICAgc3dpdGNoIChyZWZzLiRyZWZTdHJhdGVneSkge1xuICAgICAgICBjYXNlICdyb290JzpcbiAgICAgICAgICAgIHJldHVybiB7ICRyZWY6IGl0ZW0ucGF0aC5qb2luKCcvJykgfTtcbiAgICAgICAgLy8gdGhpcyBjYXNlIGlzIG5lZWRlZCBhcyBPcGVuQUkgc3RyaWN0IG1vZGUgZG9lc24ndCBzdXBwb3J0IHRvcC1sZXZlbCBgJHJlZmBzLCBpLmUuXG4gICAgICAgIC8vIHRoZSB0b3AtbGV2ZWwgc2NoZW1hICptdXN0KiBiZSBge1widHlwZVwiOiBcIm9iamVjdFwiLCBcInByb3BlcnRpZXNcIjogey4uLn19YCBidXQgaWYgd2UgZXZlclxuICAgICAgICAvLyBuZWVkIHRvIGRlZmluZSBhIGAkcmVmYCwgcmVsYXRpdmUgYCRyZWZgcyBhcmVuJ3Qgc3VwcG9ydGVkLCBzbyB3ZSBuZWVkIHRvIGV4dHJhY3RcbiAgICAgICAgLy8gdGhlIHNjaGVtYSB0byBgIy9kZWZpbml0aW9ucy9gIGFuZCByZWZlcmVuY2UgdGhhdC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gZS5nLiBpZiB3ZSBuZWVkIHRvIHJlZmVyZW5jZSBhIHNjaGVtYSBhdFxuICAgICAgICAvLyBgW1wiI1wiLFwiZGVmaW5pdGlvbnNcIixcImNvbnRhY3RQZXJzb25cIixcInByb3BlcnRpZXNcIixcInBlcnNvbjFcIixcInByb3BlcnRpZXNcIixcIm5hbWVcIl1gXG4gICAgICAgIC8vIHRoZW4gd2UnbGwgZXh0cmFjdCBpdCBvdXQgdG8gYGNvbnRhY3RQZXJzb25fcHJvcGVydGllc19wZXJzb24xX3Byb3BlcnRpZXNfbmFtZWBcbiAgICAgICAgY2FzZSAnZXh0cmFjdC10by1yb290JzpcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBpdGVtLnBhdGguc2xpY2UocmVmcy5iYXNlUGF0aC5sZW5ndGggKyAxKS5qb2luKCdfJyk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIGV4dHJhY3QgdGhlIHJvb3Qgc2NoZW1hIGluIHRoaXMgY2FzZSwgYXMgaXQncyBhbHJlYWR5XG4gICAgICAgICAgICAvLyBiZWVuIGFkZGVkIHRvIHRoZSBkZWZpbml0aW9uc1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09IHJlZnMubmFtZSAmJiByZWZzLm5hbWVTdHJhdGVneSA9PT0gJ2R1cGxpY2F0ZS1yZWYnKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5kZWZpbml0aW9uc1tuYW1lXSA9IGl0ZW0uZGVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgJHJlZjogWy4uLnJlZnMuYmFzZVBhdGgsIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSB9O1xuICAgICAgICBjYXNlICdyZWxhdGl2ZSc6XG4gICAgICAgICAgICByZXR1cm4geyAkcmVmOiBnZXRSZWxhdGl2ZVBhdGgocmVmcy5jdXJyZW50UGF0aCwgaXRlbS5wYXRoKSB9O1xuICAgICAgICBjYXNlICdub25lJzpcbiAgICAgICAgY2FzZSAnc2Vlbic6IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnBhdGgubGVuZ3RoIDwgcmVmcy5jdXJyZW50UGF0aC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBpdGVtLnBhdGguZXZlcnkoKHZhbHVlLCBpbmRleCkgPT4gcmVmcy5jdXJyZW50UGF0aFtpbmRleF0gPT09IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgUmVjdXJzaXZlIHJlZmVyZW5jZSBkZXRlY3RlZCBhdCAke3JlZnMuY3VycmVudFBhdGguam9pbignLycpfSEgRGVmYXVsdGluZyB0byBhbnlgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVmcy4kcmVmU3RyYXRlZ3kgPT09ICdzZWVuJyA/IHt9IDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IGdldFJlbGF0aXZlUGF0aCA9IChwYXRoQSwgcGF0aEIpID0+IHtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBwYXRoQS5sZW5ndGggJiYgaSA8IHBhdGhCLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChwYXRoQVtpXSAhPT0gcGF0aEJbaV0pXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIFsocGF0aEEubGVuZ3RoIC0gaSkudG9TdHJpbmcoKSwgLi4ucGF0aEIuc2xpY2UoaSldLmpvaW4oJy8nKTtcbn07XG5jb25zdCBzZWxlY3RQYXJzZXIgPSAoZGVmLCB0eXBlTmFtZSwgcmVmcywgZm9yY2VSZXNvbHV0aW9uKSA9PiB7XG4gICAgc3dpdGNoICh0eXBlTmFtZSkge1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTdHJpbmc6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVtYmVyRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCaWdJbnQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VCaWdpbnREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUJvb2xlYW5EZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGF0ZTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURhdGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5kZWZpbmVkRGVmKCk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsRGVmKHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFycmF5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuaW9uOlxuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VVbmlvbkRlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RJbnRlcnNlY3Rpb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnRlcnNlY3Rpb25EZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VUdXBsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWNvcmQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUxpdGVyYWxEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmF0aXZlRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPcHRpb25hbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9wdGlvbmFsRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE1hcDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU1hcERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTZXREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURlZihkZWYuZ2V0dGVyKCkuX2RlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFByb21pc2U6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQcm9taXNlRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXI6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOZXZlckRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRWZmZWN0c0RlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFueURlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5rbm93bkRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRGVmYXVsdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCcmFuZGVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQnJhbmRlZERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVJlYWRvbmx5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ2F0Y2hEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQaXBlbGluZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RGdW5jdGlvbjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZDpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sOlxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAoKF8pID0+IHVuZGVmaW5lZCkodHlwZU5hbWUpO1xuICAgIH1cbn07XG5jb25zdCBhZGRNZXRhID0gKGRlZiwgcmVmcywganNvblNjaGVtYSkgPT4ge1xuICAgIGlmIChkZWYuZGVzY3JpcHRpb24pIHtcbiAgICAgICAganNvblNjaGVtYS5kZXNjcmlwdGlvbiA9IGRlZi5kZXNjcmlwdGlvbjtcbiAgICAgICAgaWYgKHJlZnMubWFya2Rvd25EZXNjcmlwdGlvbikge1xuICAgICAgICAgICAganNvblNjaGVtYS5tYXJrZG93bkRlc2NyaXB0aW9uID0gZGVmLmRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBqc29uU2NoZW1hO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlRGVmLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UmVmcyB9IGZyb20gXCIuL1JlZnMubWpzXCI7XG5pbXBvcnQgeyB6b2REZWYsIGlzRW1wdHlPYmogfSBmcm9tIFwiLi91dGlsLm1qc1wiO1xuY29uc3Qgem9kVG9Kc29uU2NoZW1hID0gKHNjaGVtYSwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHJlZnMgPSBnZXRSZWZzKG9wdGlvbnMpO1xuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycgPyBvcHRpb25zXG4gICAgICAgIDogb3B0aW9ucz8ubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IG9wdGlvbnM/Lm5hbWU7XG4gICAgY29uc3QgbWFpbiA9IHBhcnNlRGVmKHNjaGVtYS5fZGVmLCBuYW1lID09PSB1bmRlZmluZWQgPyByZWZzIDogKHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICB9KSwgZmFsc2UpID8/IHt9O1xuICAgIGNvbnN0IHRpdGxlID0gdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIG9wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID9cbiAgICAgICAgb3B0aW9ucy5uYW1lXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG1haW4udGl0bGUgPSB0aXRsZTtcbiAgICB9XG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSAoKCkgPT4ge1xuICAgICAgICBpZiAoaXNFbXB0eU9iaihyZWZzLmRlZmluaXRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZpbml0aW9ucyA9IHt9O1xuICAgICAgICBjb25zdCBwcm9jZXNzZWREZWZpbml0aW9ucyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy8gdGhlIGNhbGwgdG8gYHBhcnNlRGVmKClgIGhlcmUgbWlnaHQgaXRzZWxmIGFkZCBtb3JlIGVudHJpZXMgdG8gYC5kZWZpbml0aW9uc2BcbiAgICAgICAgLy8gc28gd2UgbmVlZCB0byBjb250aW51YWxseSBldmFsdWF0ZSBkZWZpbml0aW9ucyB1bnRpbCB3ZSd2ZSByZXNvbHZlZCBhbGwgb2YgdGhlbVxuICAgICAgICAvL1xuICAgICAgICAvLyB3ZSBoYXZlIGEgZ2VuZXJvdXMgaXRlcmF0aW9uIGxpbWl0IGhlcmUgdG8gYXZvaWQgYmxvd2luZyB1cCB0aGUgc3RhY2sgaWYgdGhlcmVcbiAgICAgICAgLy8gYXJlIGFueSBidWdzIHRoYXQgd291bGQgb3RoZXJ3aXNlIHJlc3VsdCBpbiB1cyBpdGVyYXRpbmcgaW5kZWZpbml0ZWx5XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTAwOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0RlZmluaXRpb25zID0gT2JqZWN0LmVudHJpZXMocmVmcy5kZWZpbml0aW9ucykuZmlsdGVyKChba2V5XSkgPT4gIXByb2Nlc3NlZERlZmluaXRpb25zLmhhcyhrZXkpKTtcbiAgICAgICAgICAgIGlmIChuZXdEZWZpbml0aW9ucy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHNjaGVtYV0gb2YgbmV3RGVmaW5pdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uc1trZXldID1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VEZWYoem9kRGVmKHNjaGVtYSksIHsgLi4ucmVmcywgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBrZXldIH0sIHRydWUpID8/IHt9O1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZERlZmluaXRpb25zLmFkZChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9ucztcbiAgICB9KSgpO1xuICAgIGNvbnN0IGNvbWJpbmVkID0gbmFtZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgZGVmaW5pdGlvbnMgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgW3JlZnMuZGVmaW5pdGlvblBhdGhdOiBkZWZpbml0aW9ucyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogbWFpblxuICAgICAgICA6IHJlZnMubmFtZVN0cmF0ZWd5ID09PSAnZHVwbGljYXRlLXJlZicgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgLi4uKGRlZmluaXRpb25zIHx8IHJlZnMuc2VlblJlZnMuc2l6ZSA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRlZmluaXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgYWN0dWFsbHkgZHVwbGljYXRlIHRoZSBzY2hlbWEgZGVmaW5pdGlvbiBpZiBpdCB3YXMgZXZlciByZWZlcmVuY2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBkdXBsaWNhdGlvbiBpcyBjb21wbGV0ZWx5IHBvaW50bGVzc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihyZWZzLnNlZW5SZWZzLnNpemUgPyB7IFtuYW1lXTogbWFpbiB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgJHJlZjogWy4uLihyZWZzLiRyZWZTdHJhdGVneSA9PT0gJ3JlbGF0aXZlJyA/IFtdIDogcmVmcy5iYXNlUGF0aCksIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSxcbiAgICAgICAgICAgICAgICBbcmVmcy5kZWZpbml0aW9uUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmaW5pdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIFtuYW1lXTogbWFpbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgY29tYmluZWQuJHNjaGVtYSA9ICdodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5Jykge1xuICAgICAgICBjb21iaW5lZC4kc2NoZW1hID0gJ2h0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMTktMDkvc2NoZW1hIyc7XG4gICAgfVxuICAgIHJldHVybiBjb21iaW5lZDtcbn07XG5leHBvcnQgeyB6b2RUb0pzb25TY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZFRvSnNvblNjaGVtYS5tanMubWFwIiwiaW1wb3J0IHsgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5pbXBvcnQgeyBpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0IH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWF5YmVQYXJzZVJlc3BvbnNlKHJlc3BvbnNlLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICAgICAgb3V0cHV0X3BhcnNlZDogbnVsbCxcbiAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZF9hcmd1bWVudHM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZXNwb25zZShyZXNwb25zZSwgcGFyYW1zKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0gcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgaXRlbSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnb3V0cHV0X3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50LnRleHQpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH0pO1xuICAgIGNvbnN0IHBhcnNlZCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLCB7IG91dHB1dCB9KTtcbiAgICBpZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocmVzcG9uc2UsICdvdXRwdXRfdGV4dCcpKSB7XG4gICAgICAgIGFkZE91dHB1dFRleHQocGFyc2VkKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhcnNlZCwgJ291dHB1dF9wYXJzZWQnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHBhcnNlZC5vdXRwdXQpIHtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0LnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb250ZW50IG9mIG91dHB1dC5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcgJiYgY29udGVudC5wYXJzZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50LnBhcnNlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBwYXJzZWQ7XG59XG5mdW5jdGlvbiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50KSB7XG4gICAgaWYgKHBhcmFtcy50ZXh0Py5mb3JtYXQ/LnR5cGUgIT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICgnJHBhcnNlUmF3JyBpbiBwYXJhbXMudGV4dD8uZm9ybWF0KSB7XG4gICAgICAgIGNvbnN0IHRleHRfZm9ybWF0ID0gcGFyYW1zLnRleHQ/LmZvcm1hdDtcbiAgICAgICAgcmV0dXJuIHRleHRfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykge1xuICAgIGlmIChpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0KHBhcmFtcy50ZXh0Py5mb3JtYXQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZnVuY3Rpb24gZ2V0SW5wdXRUb29sQnlOYW1lKGlucHV0X3Rvb2xzLCBuYW1lKSB7XG4gICAgcmV0dXJuIGlucHV0X3Rvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0b29sLm5hbWUgPT09IG5hbWUpO1xufVxuZnVuY3Rpb24gcGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSA/IGlucHV0VG9vbC4kcGFyc2VSYXcodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgOiBpbnB1dFRvb2w/LnN0cmljdCA/IEpTT04ucGFyc2UodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkT3V0cHV0VGV4dChyc3ApIHtcbiAgICBjb25zdCB0ZXh0cyA9IFtdO1xuICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHJzcC5vdXRwdXQpIHtcbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgY29udGVudCBvZiBvdXRwdXQuY29udGVudCkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgIHRleHRzLnB1c2goY29udGVudC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByc3Aub3V0cHV0X3RleHQgPSB0ZXh0cy5qb2luKCcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3BvbnNlc1BhcnNlci5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaWN0SnNvblNjaGVtYShzY2hlbWEpIHtcbiAgICBpZiAoc2NoZW1hLnR5cGUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgUm9vdCBzY2hlbWEgbXVzdCBoYXZlIHR5cGU6ICdvYmplY3QnIGJ1dCBnb3QgdHlwZTogJHtzY2hlbWEudHlwZSA/IGAnJHtzY2hlbWEudHlwZX0nYCA6ICd1bmRlZmluZWQnfWApO1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWFDb3B5ID0gc3RydWN0dXJlZENsb25lKHNjaGVtYSk7XG4gICAgcmV0dXJuIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoc2NoZW1hQ29weSwgW10sIHNjaGVtYUNvcHkpO1xufVxuZnVuY3Rpb24gaXNOdWxsYWJsZShzY2hlbWEpIHtcbiAgICBpZiAodHlwZW9mIHNjaGVtYSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHNjaGVtYS50eXBlID09PSAnbnVsbCcpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZvciAoY29uc3Qgb25lT2ZWYXJpYW50IG9mIHNjaGVtYS5vbmVPZiA/PyBbXSkge1xuICAgICAgICBpZiAoaXNOdWxsYWJsZShvbmVPZlZhcmlhbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGFsbE9mVmFyaWFudCBvZiBzY2hlbWEuYW55T2YgPz8gW10pIHtcbiAgICAgICAgaWYgKGlzTnVsbGFibGUoYWxsT2ZWYXJpYW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBNdXRhdGVzIHRoZSBnaXZlbiBKU09OIHNjaGVtYSB0byBlbnN1cmUgaXQgY29uZm9ybXMgdG8gdGhlIGBzdHJpY3RgIHN0YW5kYXJkXG4gKiB0aGF0IHRoZSBBUEkgZXhwZWN0cy5cbiAqL1xuZnVuY3Rpb24gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShqc29uU2NoZW1hLCBwYXRoLCByb290KSB7XG4gICAgaWYgKHR5cGVvZiBqc29uU2NoZW1hID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgb2JqZWN0IHNjaGVtYSBidXQgZ290IGJvb2xlYW47IHBhdGg9JHtwYXRoLmpvaW4oJy8nKX1gKTtcbiAgICB9XG4gICAgaWYgKCFpc09iamVjdChqc29uU2NoZW1hKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCAke0pTT04uc3RyaW5naWZ5KGpzb25TY2hlbWEpfSB0byBiZSBhbiBvYmplY3Q7IHBhdGg9JHtwYXRoLmpvaW4oJy8nKX1gKTtcbiAgICB9XG4gICAgLy8gSGFuZGxlICRkZWZzIChub24tc3RhbmRhcmQgYnV0IHNvbWV0aW1lcyB1c2VkKVxuICAgIGNvbnN0IGRlZnMgPSBqc29uU2NoZW1hLiRkZWZzO1xuICAgIGlmIChpc09iamVjdChkZWZzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtkZWZOYW1lLCBkZWZTY2hlbWFdIG9mIE9iamVjdC5lbnRyaWVzKGRlZnMpKSB7XG4gICAgICAgICAgICBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGRlZlNjaGVtYSwgWy4uLnBhdGgsICckZGVmcycsIGRlZk5hbWVdLCByb290KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBIYW5kbGUgZGVmaW5pdGlvbnMgKGRyYWZ0LTA0IHN0eWxlLCBkZXByZWNhdGVkIGluIGRyYWZ0LTA3IGJ1dCBzdGlsbCB1c2VkKVxuICAgIGNvbnN0IGRlZmluaXRpb25zID0ganNvblNjaGVtYS5kZWZpbml0aW9ucztcbiAgICBpZiAoaXNPYmplY3QoZGVmaW5pdGlvbnMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2RlZmluaXRpb25OYW1lLCBkZWZpbml0aW9uU2NoZW1hXSBvZiBPYmplY3QuZW50cmllcyhkZWZpbml0aW9ucykpIHtcbiAgICAgICAgICAgIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoZGVmaW5pdGlvblNjaGVtYSwgWy4uLnBhdGgsICdkZWZpbml0aW9ucycsIGRlZmluaXRpb25OYW1lXSwgcm9vdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQWRkIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSB0byBvYmplY3QgdHlwZXNcbiAgICBjb25zdCB0eXAgPSBqc29uU2NoZW1hLnR5cGU7XG4gICAgaWYgKHR5cCA9PT0gJ29iamVjdCcgJiYgISgnYWRkaXRpb25hbFByb3BlcnRpZXMnIGluIGpzb25TY2hlbWEpKSB7XG4gICAgICAgIGpzb25TY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPSBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWlyZWQgPSBqc29uU2NoZW1hLnJlcXVpcmVkID8/IFtdO1xuICAgIC8vIEhhbmRsZSBvYmplY3QgcHJvcGVydGllc1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBqc29uU2NoZW1hLnByb3BlcnRpZXM7XG4gICAgaWYgKGlzT2JqZWN0KHByb3BlcnRpZXMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpKSB7XG4gICAgICAgICAgICBpZiAoIWlzTnVsbGFibGUodmFsdWUpICYmICFyZXF1aXJlZC5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBab2QgZmllbGQgYXQgXFxgJHtbLi4ucGF0aCwgJ3Byb3BlcnRpZXMnLCBrZXldLmpvaW4oJy8nKX1cXGAgdXNlcyBcXGAub3B0aW9uYWwoKVxcYCB3aXRob3V0IFxcYC5udWxsYWJsZSgpXFxgIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFQSS4gU2VlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvc3RydWN0dXJlZC1vdXRwdXRzP2FwaS1tb2RlPXJlc3BvbnNlcyNhbGwtZmllbGRzLW11c3QtYmUtcmVxdWlyZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBqc29uU2NoZW1hLnJlcXVpcmVkID0gT2JqZWN0LmtleXMocHJvcGVydGllcyk7XG4gICAgICAgIGpzb25TY2hlbWEucHJvcGVydGllcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhwcm9wZXJ0aWVzKS5tYXAoKFtrZXksIHByb3BTY2hlbWFdKSA9PiBbXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHByb3BTY2hlbWEsIFsuLi5wYXRoLCAncHJvcGVydGllcycsIGtleV0sIHJvb3QpLFxuICAgICAgICBdKSk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBhcnJheXNcbiAgICBjb25zdCBpdGVtcyA9IGpzb25TY2hlbWEuaXRlbXM7XG4gICAgaWYgKGlzT2JqZWN0KGl0ZW1zKSkge1xuICAgICAgICBqc29uU2NoZW1hLml0ZW1zID0gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShpdGVtcywgWy4uLnBhdGgsICdpdGVtcyddLCByb290KTtcbiAgICB9XG4gICAgLy8gSGFuZGxlIHVuaW9ucyAoYW55T2YpXG4gICAgY29uc3QgYW55T2YgPSBqc29uU2NoZW1hLmFueU9mO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFueU9mKSkge1xuICAgICAgICBqc29uU2NoZW1hLmFueU9mID0gYW55T2YubWFwKCh2YXJpYW50LCBpKSA9PiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHZhcmlhbnQsIFsuLi5wYXRoLCAnYW55T2YnLCBTdHJpbmcoaSldLCByb290KSk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBpbnRlcnNlY3Rpb25zIChhbGxPZilcbiAgICBjb25zdCBhbGxPZiA9IGpzb25TY2hlbWEuYWxsT2Y7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsT2YpKSB7XG4gICAgICAgIGlmIChhbGxPZi5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkID0gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShhbGxPZlswXSwgWy4uLnBhdGgsICdhbGxPZicsICcwJ10sIHJvb3QpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihqc29uU2NoZW1hLCByZXNvbHZlZCk7XG4gICAgICAgICAgICBkZWxldGUganNvblNjaGVtYS5hbGxPZjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGpzb25TY2hlbWEuYWxsT2YgPSBhbGxPZi5tYXAoKGVudHJ5LCBpKSA9PiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGVudHJ5LCBbLi4ucGF0aCwgJ2FsbE9mJywgU3RyaW5nKGkpXSwgcm9vdCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFN0cmlwIGBudWxsYCBkZWZhdWx0cyBhcyB0aGVyZSdzIG5vIG1lYW5pbmdmdWwgZGlzdGluY3Rpb25cbiAgICBpZiAoanNvblNjaGVtYS5kZWZhdWx0ID09PSBudWxsKSB7XG4gICAgICAgIGRlbGV0ZSBqc29uU2NoZW1hLmRlZmF1bHQ7XG4gICAgfVxuICAgIC8vIEhhbmRsZSAkcmVmIHdpdGggYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gICAgY29uc3QgcmVmID0ganNvblNjaGVtYS4kcmVmO1xuICAgIGlmIChyZWYgJiYgaGFzTW9yZVRoYW5OS2V5cyhqc29uU2NoZW1hLCAxKSkge1xuICAgICAgICBpZiAodHlwZW9mIHJlZiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFJlY2VpdmVkIG5vbi1zdHJpbmcgJHJlZiAtICR7cmVmfTsgcGF0aD0ke3BhdGguam9pbignLycpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc29sdmVkID0gcmVzb2x2ZVJlZihyb290LCByZWYpO1xuICAgICAgICBpZiAodHlwZW9mIHJlc29sdmVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgXFxgJHJlZjogJHtyZWZ9XFxgIHRvIHJlc29sdmUgdG8gYW4gb2JqZWN0IHNjaGVtYSBidXQgZ290IGJvb2xlYW5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzT2JqZWN0KHJlc29sdmVkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBcXGAkcmVmOiAke3JlZn1cXGAgdG8gcmVzb2x2ZSB0byBhbiBvYmplY3QgYnV0IGdvdCAke0pTT04uc3RyaW5naWZ5KHJlc29sdmVkKX1gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcm9wZXJ0aWVzIGZyb20gdGhlIGpzb24gc2NoZW1hIHRha2UgcHJpb3JpdHkgb3ZlciB0aGUgb25lcyBvbiB0aGUgYCRyZWZgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oanNvblNjaGVtYSwgeyAuLi5yZXNvbHZlZCwgLi4uanNvblNjaGVtYSB9KTtcbiAgICAgICAgZGVsZXRlIGpzb25TY2hlbWEuJHJlZjtcbiAgICAgICAgLy8gU2luY2UgdGhlIHNjaGVtYSBleHBhbmRlZCBmcm9tIGAkcmVmYCBtaWdodCBub3QgaGF2ZSBgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlYCBhcHBsaWVkLFxuICAgICAgICAvLyB3ZSBjYWxsIGBlbnN1cmVTdHJpY3RKc29uU2NoZW1hYCBhZ2FpbiB0byBmaXggdGhlIGlubGluZWQgc2NoZW1hIGFuZCBlbnN1cmUgaXQncyB2YWxpZC5cbiAgICAgICAgcmV0dXJuIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoanNvblNjaGVtYSwgcGF0aCwgcm9vdCk7XG4gICAgfVxuICAgIHJldHVybiBqc29uU2NoZW1hO1xufVxuZnVuY3Rpb24gcmVzb2x2ZVJlZihyb290LCByZWYpIHtcbiAgICBpZiAoIXJlZi5zdGFydHNXaXRoKCcjLycpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCAkcmVmIGZvcm1hdCAke0pTT04uc3RyaW5naWZ5KHJlZil9OyBEb2VzIG5vdCBzdGFydCB3aXRoICMvYCk7XG4gICAgfVxuICAgIGNvbnN0IHBhdGhQYXJ0cyA9IHJlZi5zbGljZSgyKS5zcGxpdCgnLycpO1xuICAgIGxldCByZXNvbHZlZCA9IHJvb3Q7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgcGF0aFBhcnRzKSB7XG4gICAgICAgIGlmICghaXNPYmplY3QocmVzb2x2ZWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGVuY291bnRlcmVkIG5vbi1vYmplY3QgZW50cnkgd2hpbGUgcmVzb2x2aW5nICR7cmVmfSAtICR7SlNPTi5zdHJpbmdpZnkocmVzb2x2ZWQpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcmVzb2x2ZWRba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgS2V5ICR7a2V5fSBub3QgZm91bmQgd2hpbGUgcmVzb2x2aW5nICR7cmVmfWApO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmVkID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXNvbHZlZDtcbn1cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBvYmogIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkob2JqKTtcbn1cbmZ1bmN0aW9uIGhhc01vcmVUaGFuTktleXMob2JqLCBuKSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoY29uc3QgXyBpbiBvYmopIHtcbiAgICAgICAgaSsrO1xuICAgICAgICBpZiAoaSA+IG4pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5tanMubWFwIiwiaW1wb3J0ICogYXMgejQgZnJvbSAnem9kL3Y0JztcbmltcG9ydCB7IG1ha2VQYXJzZWFibGVSZXNwb25zZUZvcm1hdCwgbWFrZVBhcnNlYWJsZVRleHRGb3JtYXQsIG1ha2VQYXJzZWFibGVUb29sLCB9IGZyb20gXCIuLi9saWIvcGFyc2VyLm1qc1wiO1xuaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hIGFzIF96b2RUb0pzb25TY2hlbWEgfSBmcm9tIFwiLi4vX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBtYWtlUGFyc2VhYmxlUmVzcG9uc2VUb29sIH0gZnJvbSBcIi4uL2xpYi9SZXNwb25zZXNQYXJzZXIubWpzXCI7XG5pbXBvcnQgeyB0b1N0cmljdEpzb25TY2hlbWEgfSBmcm9tIFwiLi4vbGliL3RyYW5zZm9ybS5tanNcIjtcbmZ1bmN0aW9uIHpvZFYzVG9Kc29uU2NoZW1hKHNjaGVtYSwgb3B0aW9ucykge1xuICAgIHJldHVybiBfem9kVG9Kc29uU2NoZW1hKHNjaGVtYSwge1xuICAgICAgICBvcGVuYWlTdHJpY3RNb2RlOiB0cnVlLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUsXG4gICAgICAgIG5hbWVTdHJhdGVneTogJ2R1cGxpY2F0ZS1yZWYnLFxuICAgICAgICAkcmVmU3RyYXRlZ3k6ICdleHRyYWN0LXRvLXJvb3QnLFxuICAgICAgICBudWxsYWJsZVN0cmF0ZWd5OiAncHJvcGVydHknLFxuICAgIH0pO1xufVxuZnVuY3Rpb24gem9kVjRUb0pzb25TY2hlbWEoc2NoZW1hKSB7XG4gICAgcmV0dXJuIHRvU3RyaWN0SnNvblNjaGVtYSh6NC50b0pTT05TY2hlbWEoc2NoZW1hLCB7XG4gICAgICAgIHRhcmdldDogJ2RyYWZ0LTcnLFxuICAgIH0pKTtcbn1cbmZ1bmN0aW9uIGlzWm9kVjQoem9kT2JqZWN0KSB7XG4gICAgcmV0dXJuICdfem9kJyBpbiB6b2RPYmplY3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjaGF0IGNvbXBsZXRpb24gYEpTT05TY2hlbWFgIHJlc3BvbnNlIGZvcm1hdCBvYmplY3QgZnJvbVxuICogdGhlIGdpdmVuIFpvZCBzY2hlbWEuXG4gKlxuICogSWYgdGhpcyBpcyBwYXNzZWQgdG8gdGhlIGAucGFyc2UoKWAsIGAuc3RyZWFtKClgIG9yIGAucnVuVG9vbHMoKWBcbiAqIGNoYXQgY29tcGxldGlvbiBtZXRob2RzIHRoZW4gdGhlIHJlc3BvbnNlIG1lc3NhZ2Ugd2lsbCBjb250YWluIGFcbiAqIGAucGFyc2VkYCBwcm9wZXJ0eSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgcGFyc2luZyB0aGUgY29udGVudCB3aXRoXG4gKiB0aGUgZ2l2ZW4gWm9kIG9iamVjdC5cbiAqXG4gKiBgYGB0c1xuICogY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IGNsaWVudC5jaGF0LmNvbXBsZXRpb25zLnBhcnNlKHtcbiAqICAgIG1vZGVsOiAnZ3B0LTRvLTIwMjQtMDgtMDYnLFxuICogICAgbWVzc2FnZXM6IFtcbiAqICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogJ1lvdSBhcmUgYSBoZWxwZnVsIG1hdGggdHV0b3IuJyB9LFxuICogICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ3NvbHZlIDh4ICsgMzEgPSAyJyB9LFxuICogICAgXSxcbiAqICAgIHJlc3BvbnNlX2Zvcm1hdDogem9kUmVzcG9uc2VGb3JtYXQoXG4gKiAgICAgIHoub2JqZWN0KHtcbiAqICAgICAgICBzdGVwczogei5hcnJheSh6Lm9iamVjdCh7XG4gKiAgICAgICAgICBleHBsYW5hdGlvbjogei5zdHJpbmcoKSxcbiAqICAgICAgICAgIGFuc3dlcjogei5zdHJpbmcoKSxcbiAqICAgICAgICB9KSksXG4gKiAgICAgICAgZmluYWxfYW5zd2VyOiB6LnN0cmluZygpLFxuICogICAgICB9KSxcbiAqICAgICAgJ21hdGhfYW5zd2VyJyxcbiAqICAgICksXG4gKiAgfSk7XG4gKiAgY29uc3QgbWVzc2FnZSA9IGNvbXBsZXRpb24uY2hvaWNlc1swXT8ubWVzc2FnZTtcbiAqICBpZiAobWVzc2FnZT8ucGFyc2VkKSB7XG4gKiAgICBjb25zb2xlLmxvZyhtZXNzYWdlLnBhcnNlZCk7XG4gKiAgICBjb25zb2xlLmxvZyhtZXNzYWdlLnBhcnNlZC5maW5hbF9hbnN3ZXIpO1xuICogfVxuICogYGBgXG4gKlxuICogVGhpcyBjYW4gYmUgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBgLmNyZWF0ZSgpYCBtZXRob2QgYnV0IHdpbGwgbm90XG4gKiByZXN1bHQgaW4gYW55IGF1dG9tYXRpYyBwYXJzaW5nLCB5b3UnbGwgaGF2ZSB0byBwYXJzZSB0aGUgcmVzcG9uc2UgeW91cnNlbGYuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6b2RSZXNwb25zZUZvcm1hdCh6b2RPYmplY3QsIG5hbWUsIHByb3BzKSB7XG4gICAgcmV0dXJuIG1ha2VQYXJzZWFibGVSZXNwb25zZUZvcm1hdCh7XG4gICAgICAgIHR5cGU6ICdqc29uX3NjaGVtYScsXG4gICAgICAgIGpzb25fc2NoZW1hOiB7XG4gICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICBzY2hlbWE6IGlzWm9kVjQoem9kT2JqZWN0KSA/IHpvZFY0VG9Kc29uU2NoZW1hKHpvZE9iamVjdCkgOiB6b2RWM1RvSnNvblNjaGVtYSh6b2RPYmplY3QsIHsgbmFtZSB9KSxcbiAgICAgICAgfSxcbiAgICB9LCAoY29udGVudCkgPT4gem9kT2JqZWN0LnBhcnNlKEpTT04ucGFyc2UoY29udGVudCkpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB6b2RUZXh0Rm9ybWF0KHpvZE9iamVjdCwgbmFtZSwgcHJvcHMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVRleHRGb3JtYXQoe1xuICAgICAgICB0eXBlOiAnanNvbl9zY2hlbWEnLFxuICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICBzY2hlbWE6IGlzWm9kVjQoem9kT2JqZWN0KSA/IHpvZFY0VG9Kc29uU2NoZW1hKHpvZE9iamVjdCkgOiB6b2RWM1RvSnNvblNjaGVtYSh6b2RPYmplY3QsIHsgbmFtZSB9KSxcbiAgICB9LCAoY29udGVudCkgPT4gem9kT2JqZWN0LnBhcnNlKEpTT04ucGFyc2UoY29udGVudCkpKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNoYXQgY29tcGxldGlvbiBgZnVuY3Rpb25gIHRvb2wgdGhhdCBjYW4gYmUgaW52b2tlZFxuICogYXV0b21hdGljYWxseSBieSB0aGUgY2hhdCBjb21wbGV0aW9uIGAucnVuVG9vbHMoKWAgbWV0aG9kIG9yIGF1dG9tYXRpY2FsbHlcbiAqIHBhcnNlZCBieSBgLnBhcnNlKClgIC8gYC5zdHJlYW0oKWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6b2RGdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPXG4gICAgcmV0dXJuIG1ha2VQYXJzZWFibGVUb29sKHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IGlzWm9kVjQob3B0aW9ucy5wYXJhbWV0ZXJzKSA/XG4gICAgICAgICAgICAgICAgem9kVjRUb0pzb25TY2hlbWEob3B0aW9ucy5wYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgIDogem9kVjNUb0pzb25TY2hlbWEob3B0aW9ucy5wYXJhbWV0ZXJzLCB7IG5hbWU6IG9wdGlvbnMubmFtZSB9KSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmRlc2NyaXB0aW9uID8geyBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbiB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgfSxcbiAgICB9LCB7XG4gICAgICAgIGNhbGxiYWNrOiBvcHRpb25zLmZ1bmN0aW9uLFxuICAgICAgICBwYXJzZXI6IChhcmdzKSA9PiBvcHRpb25zLnBhcmFtZXRlcnMucGFyc2UoSlNPTi5wYXJzZShhcmdzKSksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gem9kUmVzcG9uc2VzRnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHJldHVybiBtYWtlUGFyc2VhYmxlUmVzcG9uc2VUb29sKHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICBwYXJhbWV0ZXJzOiBpc1pvZFY0KG9wdGlvbnMucGFyYW1ldGVycykgP1xuICAgICAgICAgICAgem9kVjRUb0pzb25TY2hlbWEob3B0aW9ucy5wYXJhbWV0ZXJzKVxuICAgICAgICAgICAgOiB6b2RWM1RvSnNvblNjaGVtYShvcHRpb25zLnBhcmFtZXRlcnMsIHsgbmFtZTogb3B0aW9ucy5uYW1lIH0pLFxuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgIC4uLihvcHRpb25zLmRlc2NyaXB0aW9uID8geyBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbiB9IDogdW5kZWZpbmVkKSxcbiAgICB9LCB7XG4gICAgICAgIGNhbGxiYWNrOiBvcHRpb25zLmZ1bmN0aW9uLFxuICAgICAgICBwYXJzZXI6IChhcmdzKSA9PiBvcHRpb25zLnBhcmFtZXRlcnMucGFyc2UoSlNPTi5wYXJzZShhcmdzKSksXG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD16b2QubWpzLm1hcCIsIi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIGVycm9ycyB0aHJvd24gYnkgdGhlIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudHNFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBzdGF0ZTtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gbmV3LnRhcmdldC5uYW1lO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBTeXN0ZW0gZXJyb3IgdGhyb3duIHdoZW4gdGhlIGxpYnJhcnkgZW5jb3VudGVycyBhbiBlcnJvciB0aGF0IGlzIG5vdCBjYXVzZWQgYnkgdGhlIHVzZXInc1xuICogbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbUVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgaXMgZXhjZWVkZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgbW9kZWwgYmVoYXZpb3IgaXMgdW5leHBlY3RlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vZGVsQmVoYXZpb3JFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSBtb2RlbCBwcm9kdWNlcyBpbnZhbGlkIHRvb2wgaW5wdXQuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkVG9vbElucHV0RXJyb3IgZXh0ZW5kcyBNb2RlbEJlaGF2aW9yRXJyb3Ige1xuICAgIC8qKiBUaGUgb3JpZ2luYWwgZXJyb3IgdGhyb3duIGR1cmluZyB2YWxpZGF0aW9uLCBpZiBhbnkuICovXG4gICAgb3JpZ2luYWxFcnJvcjtcbiAgICAvKiogQ29udGV4dCBmcm9tIHRoZSB0b29sIGludm9jYXRpb24gdGhhdCBmYWlsZWQuICovXG4gICAgdG9vbEludm9jYXRpb247XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgc3RhdGUsIG9yaWdpbmFsRXJyb3IsIHRvb2xJbnZvY2F0aW9uKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5vcmlnaW5hbEVycm9yID0gb3JpZ2luYWxFcnJvcjtcbiAgICAgICAgdGhpcy50b29sSW52b2NhdGlvbiA9IHRvb2xJbnZvY2F0aW9uO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlIGVycm9yIGlzIGNhdXNlZCBieSB0aGUgbGlicmFyeSB1c2VyJ3MgbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSBndWFyZHJhaWwgZXhlY3V0aW9uIGZhaWxzLlxuICovXG5leHBvcnQgY2xhc3MgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG4gICAgZXJyb3I7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZXJyb3IsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSB0b29sIGNhbGwgZmFpbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sQ2FsbEVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIGVycm9yO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGFuIGlucHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhbiBvdXRwdXQgZ3VhcmRyYWlsIHRyaXB3aXJlIGlzIHRyaWdnZXJlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhIHRvb2wgaW5wdXQgZ3VhcmRyYWlsIHRyaXB3aXJlIGlzIHRyaWdnZXJlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFRvb2xJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhIHRvb2wgb3V0cHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG4gICAgcmVzdWx0O1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHJlc3VsdCwgc3RhdGUpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgc3RhdGUpO1xuICAgICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvcnMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBhc1pvZFR5cGUoc2NoZW1hKSB7XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWFkWm9kRGVmaW5pdGlvbihpbnB1dCkge1xuICAgIGlmICh0eXBlb2YgaW5wdXQgIT09ICdvYmplY3QnIHx8IGlucHV0ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGlucHV0O1xuICAgIHJldHVybiBjYW5kaWRhdGUuX3pvZD8uZGVmIHx8IGNhbmRpZGF0ZS5fZGVmIHx8IGNhbmRpZGF0ZS5kZWY7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVhZFpvZFR5cGUoaW5wdXQpIHtcbiAgICBjb25zdCBkZWYgPSByZWFkWm9kRGVmaW5pdGlvbihpbnB1dCk7XG4gICAgaWYgKCFkZWYpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgcmF3VHlwZSA9ICh0eXBlb2YgZGVmLnR5cGVOYW1lID09PSAnc3RyaW5nJyAmJiBkZWYudHlwZU5hbWUpIHx8XG4gICAgICAgICh0eXBlb2YgZGVmLnR5cGUgPT09ICdzdHJpbmcnICYmIGRlZi50eXBlKTtcbiAgICBpZiAodHlwZW9mIHJhd1R5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxvd2VyID0gcmF3VHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBsb3dlci5zdGFydHNXaXRoKCd6b2QnKSA/IGxvd2VyLnNsaWNlKDMpIDogbG93ZXI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD16b2RDb21wYXQubWpzLm1hcCIsImltcG9ydCB7IHJlYWRab2REZWZpbml0aW9uLCByZWFkWm9kVHlwZSB9IGZyb20gXCIuL3pvZENvbXBhdC5tanNcIjtcbi8qKlxuICogVmVyaWZpZXMgdGhhdCBhbiBpbnB1dCBpcyBhIFpvZE9iamVjdCB3aXRob3V0IG5lZWRpbmcgdG8gaGF2ZSBab2QgYXQgcnVudGltZSBzaW5jZSBpdCdzIGFuXG4gKiBvcHRpb25hbCBkZXBlbmRlbmN5LlxuICogQHBhcmFtIGlucHV0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNab2RPYmplY3QoaW5wdXQpIHtcbiAgICBjb25zdCBkZWZpbml0aW9uID0gcmVhZFpvZERlZmluaXRpb24oaW5wdXQpO1xuICAgIGlmICghZGVmaW5pdGlvbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHR5cGUgPSByZWFkWm9kVHlwZShpbnB1dCk7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdvYmplY3QnO1xufVxuLyoqXG4gKiBWZXJpZmllcyB0aGF0IGFuIGlucHV0IGlzIGFuIG9iamVjdCB3aXRoIGFuIGBpbnB1dGAgcHJvcGVydHkuXG4gKiBAcGFyYW0gaW5wdXRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FnZW50VG9vbElucHV0KGlucHV0KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXG4gICAgICAgICdpbnB1dCcgaW4gaW5wdXQgJiZcbiAgICAgICAgdHlwZW9mIGlucHV0LmlucHV0ID09PSAnc3RyaW5nJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlR3VhcmRzLm1qcy5tYXAiLCJpbXBvcnQgeyByZWFkWm9kRGVmaW5pdGlvbiwgcmVhZFpvZFR5cGUgfSBmcm9tIFwiLi96b2RDb21wYXQubWpzXCI7XG5jb25zdCBKU09OX1NDSEVNQV9EUkFGVF8wNyA9ICdodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSMnO1xuY29uc3QgT1BUSU9OQUxfV1JBUFBFUlMgPSBuZXcgU2V0KFsnb3B0aW9uYWwnXSk7XG5jb25zdCBERUNPUkFUT1JfV1JBUFBFUlMgPSBuZXcgU2V0KFtcbiAgICAnYnJhbmQnLFxuICAgICdicmFuZGVkJyxcbiAgICAnY2F0Y2gnLFxuICAgICdkZWZhdWx0JyxcbiAgICAnZWZmZWN0cycsXG4gICAgJ3BpcGVsaW5lJyxcbiAgICAncGlwZScsXG4gICAgJ3ByZWZhdWx0JyxcbiAgICAncmVhZG9ubHknLFxuICAgICdyZWZpbmVtZW50JyxcbiAgICAndHJhbnNmb3JtJyxcbl0pO1xuLy8gUHJpbWl0aXZlIGxlYWYgbm9kZXMgbWFwIDE6MSB0byBKU09OIFNjaGVtYSB0eXBlczsgZXZlcnl0aGluZyBlbHNlIGlzIGhhbmRsZWRcbi8vIGJ5IHRoZSBzcGVjaWFsaXNlZCBidWlsZGVycyBmdXJ0aGVyIGRvd24uXG5jb25zdCBTSU1QTEVfVFlQRV9NQVBQSU5HID0ge1xuICAgIHN0cmluZzogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgIG51bWJlcjogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgIGJpZ2ludDogeyB0eXBlOiAnaW50ZWdlcicgfSxcbiAgICBib29sZWFuOiB7IHR5cGU6ICdib29sZWFuJyB9LFxuICAgIGRhdGU6IHsgdHlwZTogJ3N0cmluZycsIGZvcm1hdDogJ2RhdGUtdGltZScgfSxcbn07XG5leHBvcnQgZnVuY3Rpb24gaGFzSnNvblNjaGVtYU9iamVjdFNoYXBlKHZhbHVlKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHZhbHVlICE9PSBudWxsICYmXG4gICAgICAgIHZhbHVlLnR5cGUgPT09ICdvYmplY3QnICYmXG4gICAgICAgICdwcm9wZXJ0aWVzJyBpbiB2YWx1ZSAmJlxuICAgICAgICAnYWRkaXRpb25hbFByb3BlcnRpZXMnIGluIHZhbHVlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB6b2RKc29uU2NoZW1hQ29tcGF0KGlucHV0KSB7XG4gICAgLy8gQXR0ZW1wdCB0byBidWlsZCBhbiBvYmplY3Qgc2NoZW1hIGZyb20gWm9kJ3MgaW50ZXJuYWwgc2hhcGUuIElmIHdlIGNhbm5vdFxuICAgIC8vIHVuZGVyc3RhbmQgdGhlIHN0cnVjdHVyZSB3ZSByZXR1cm4gdW5kZWZpbmVkLCBsZXR0aW5nIGNhbGxlcnMgcmFpc2UgYVxuICAgIC8vIGRlc2NyaXB0aXZlIGVycm9yIGluc3RlYWQgb2YgZW1pdHRpbmcgYW4gaW52YWxpZCBzY2hlbWEuXG4gICAgY29uc3Qgc2NoZW1hID0gYnVpbGRPYmplY3RTY2hlbWEoaW5wdXQpO1xuICAgIGlmICghc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghQXJyYXkuaXNBcnJheShzY2hlbWEucmVxdWlyZWQpKSB7XG4gICAgICAgIHNjaGVtYS5yZXF1aXJlZCA9IFtdO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2NoZW1hLiRzY2hlbWEgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNjaGVtYS4kc2NoZW1hID0gSlNPTl9TQ0hFTUFfRFJBRlRfMDc7XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59XG5mdW5jdGlvbiBidWlsZE9iamVjdFNjaGVtYSh2YWx1ZSkge1xuICAgIGNvbnN0IHNoYXBlID0gcmVhZFNoYXBlKHZhbHVlKTtcbiAgICBpZiAoIXNoYXBlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7fTtcbiAgICBjb25zdCByZXF1aXJlZCA9IFtdO1xuICAgIGZvciAoY29uc3QgW2tleSwgZmllbGRdIG9mIE9iamVjdC5lbnRyaWVzKHNoYXBlKSkge1xuICAgICAgICBjb25zdCB7IHNjaGVtYSwgb3B0aW9uYWwgfSA9IGNvbnZlcnRQcm9wZXJ0eShmaWVsZCk7XG4gICAgICAgIGlmICghc2NoZW1hKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHByb3BlcnRpZXNba2V5XSA9IHNjaGVtYTtcbiAgICAgICAgaWYgKCFvcHRpb25hbCkge1xuICAgICAgICAgICAgcmVxdWlyZWQucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IHR5cGU6ICdvYmplY3QnLCBwcm9wZXJ0aWVzLCByZXF1aXJlZCwgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlIH07XG59XG5mdW5jdGlvbiBjb252ZXJ0UHJvcGVydHkodmFsdWUpIHtcbiAgICAvLyBSZW1vdmUgd3JhcHBlciBkZWNvcmF0b3JzIChicmFuZCwgdHJhbnNmb3JtLCBldGMuKSBiZWZvcmUgYXR0ZW1wdGluZyB0b1xuICAgIC8vIGNsYXNzaWZ5IHRoZSBub2RlLCB0cmFja2luZyB3aGV0aGVyIHdlIGNyb3NzZWQgYW4gYG9wdGlvbmFsYCBib3VuZGFyeSBzbyB3ZVxuICAgIC8vIGNhbiBwb3B1bGF0ZSB0aGUgYHJlcXVpcmVkYCBhcnJheSBsYXRlci5cbiAgICBsZXQgY3VycmVudCA9IHVud3JhcERlY29yYXRvcnModmFsdWUpO1xuICAgIGxldCBvcHRpb25hbCA9IGZhbHNlO1xuICAgIHdoaWxlIChPUFRJT05BTF9XUkFQUEVSUy5oYXMocmVhZFpvZFR5cGUoY3VycmVudCkgPz8gJycpKSB7XG4gICAgICAgIG9wdGlvbmFsID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgZGVmID0gcmVhZFpvZERlZmluaXRpb24oY3VycmVudCk7XG4gICAgICAgIGNvbnN0IG5leHQgPSB1bndyYXBEZWNvcmF0b3JzKGRlZj8uaW5uZXJUeXBlKTtcbiAgICAgICAgaWYgKCFuZXh0IHx8IG5leHQgPT09IGN1cnJlbnQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnQgPSBuZXh0O1xuICAgIH1cbiAgICByZXR1cm4geyBzY2hlbWE6IGNvbnZlcnRTY2hlbWEoY3VycmVudCksIG9wdGlvbmFsIH07XG59XG5mdW5jdGlvbiBjb252ZXJ0U2NoZW1hKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgdW53cmFwcGVkID0gdW53cmFwRGVjb3JhdG9ycyh2YWx1ZSk7XG4gICAgY29uc3QgdHlwZSA9IHJlYWRab2RUeXBlKHVud3JhcHBlZCk7XG4gICAgY29uc3QgZGVmID0gcmVhZFpvZERlZmluaXRpb24odW53cmFwcGVkKTtcbiAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHR5cGUgaW4gU0lNUExFX1RZUEVfTUFQUElORykge1xuICAgICAgICByZXR1cm4gU0lNUExFX1RZUEVfTUFQUElOR1t0eXBlXTtcbiAgICB9XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRPYmplY3RTY2hlbWEodW53cmFwcGVkKTtcbiAgICAgICAgY2FzZSAnYXJyYXknOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkQXJyYXlTY2hlbWEoZGVmKTtcbiAgICAgICAgY2FzZSAndHVwbGUnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkVHVwbGVTY2hlbWEoZGVmKTtcbiAgICAgICAgY2FzZSAndW5pb24nOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkVW5pb25TY2hlbWEoZGVmKTtcbiAgICAgICAgY2FzZSAnaW50ZXJzZWN0aW9uJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZEludGVyc2VjdGlvblNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICdsaXRlcmFsJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZExpdGVyYWwoZGVmKTtcbiAgICAgICAgY2FzZSAnZW51bSc6XG4gICAgICAgIGNhc2UgJ25hdGl2ZWVudW0nOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkRW51bShkZWYpO1xuICAgICAgICBjYXNlICdyZWNvcmQnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkUmVjb3JkU2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ21hcCc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRNYXBTY2hlbWEoZGVmKTtcbiAgICAgICAgY2FzZSAnc2V0JzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZFNldFNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICdudWxsYWJsZSc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGROdWxsYWJsZVNjaGVtYShkZWYpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG4vLyAtLS0gSlNPTiBTY2hlbWEgYnVpbGRlcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZnVuY3Rpb24gYnVpbGRBcnJheVNjaGVtYShkZWYpIHtcbiAgICBjb25zdCBpdGVtcyA9IGNvbnZlcnRTY2hlbWEoZXh0cmFjdEZpcnN0KGRlZiwgJ2VsZW1lbnQnLCAnaXRlbXMnLCAndHlwZScpKTtcbiAgICByZXR1cm4gaXRlbXMgPyB7IHR5cGU6ICdhcnJheScsIGl0ZW1zIH0gOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZFR1cGxlU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IGl0ZW1zID0gY29lcmNlQXJyYXkoZGVmPy5pdGVtcylcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gY29udmVydFNjaGVtYShpdGVtKSlcbiAgICAgICAgLmZpbHRlcihCb29sZWFuKTtcbiAgICBpZiAoIWl0ZW1zLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgIGl0ZW1zLFxuICAgICAgICBtaW5JdGVtczogaXRlbXMubGVuZ3RoLFxuICAgIH07XG4gICAgaWYgKCFkZWY/LnJlc3QpIHtcbiAgICAgICAgc2NoZW1hLm1heEl0ZW1zID0gaXRlbXMubGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuZnVuY3Rpb24gYnVpbGRVbmlvblNjaGVtYShkZWYpIHtcbiAgICBjb25zdCBvcHRpb25zID0gY29lcmNlQXJyYXkoZGVmPy5vcHRpb25zID8/IGRlZj8uc2NoZW1hcylcbiAgICAgICAgLm1hcCgob3B0aW9uKSA9PiBjb252ZXJ0U2NoZW1hKG9wdGlvbikpXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gICAgcmV0dXJuIG9wdGlvbnMubGVuZ3RoID8geyBhbnlPZjogb3B0aW9ucyB9IDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gYnVpbGRJbnRlcnNlY3Rpb25TY2hlbWEoZGVmKSB7XG4gICAgY29uc3QgbGVmdCA9IGNvbnZlcnRTY2hlbWEoZGVmPy5sZWZ0KTtcbiAgICBjb25zdCByaWdodCA9IGNvbnZlcnRTY2hlbWEoZGVmPy5yaWdodCk7XG4gICAgcmV0dXJuIGxlZnQgJiYgcmlnaHQgPyB7IGFsbE9mOiBbbGVmdCwgcmlnaHRdIH0gOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZFJlY29yZFNjaGVtYShkZWYpIHtcbiAgICBjb25zdCB2YWx1ZVNjaGVtYSA9IGNvbnZlcnRTY2hlbWEoZGVmPy52YWx1ZVR5cGUgPz8gZGVmPy52YWx1ZXMpO1xuICAgIHJldHVybiB2YWx1ZVNjaGVtYVxuICAgICAgICA/IHsgdHlwZTogJ29iamVjdCcsIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB2YWx1ZVNjaGVtYSB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gYnVpbGRNYXBTY2hlbWEoZGVmKSB7XG4gICAgY29uc3QgdmFsdWVTY2hlbWEgPSBjb252ZXJ0U2NoZW1hKGRlZj8udmFsdWVUeXBlID8/IGRlZj8udmFsdWVzKTtcbiAgICByZXR1cm4gdmFsdWVTY2hlbWEgPyB7IHR5cGU6ICdhcnJheScsIGl0ZW1zOiB2YWx1ZVNjaGVtYSB9IDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gYnVpbGRTZXRTY2hlbWEoZGVmKSB7XG4gICAgY29uc3QgdmFsdWVTY2hlbWEgPSBjb252ZXJ0U2NoZW1hKGRlZj8udmFsdWVUeXBlKTtcbiAgICByZXR1cm4gdmFsdWVTY2hlbWFcbiAgICAgICAgPyB7IHR5cGU6ICdhcnJheScsIGl0ZW1zOiB2YWx1ZVNjaGVtYSwgdW5pcXVlSXRlbXM6IHRydWUgfVxuICAgICAgICA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkTnVsbGFibGVTY2hlbWEoZGVmKSB7XG4gICAgY29uc3QgaW5uZXIgPSBjb252ZXJ0U2NoZW1hKGRlZj8uaW5uZXJUeXBlID8/IGRlZj8udHlwZSk7XG4gICAgcmV0dXJuIGlubmVyID8geyBhbnlPZjogW2lubmVyLCB7IHR5cGU6ICdudWxsJyB9XSB9IDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gdW53cmFwRGVjb3JhdG9ycyh2YWx1ZSkge1xuICAgIGxldCBjdXJyZW50ID0gdmFsdWU7XG4gICAgd2hpbGUgKERFQ09SQVRPUl9XUkFQUEVSUy5oYXMocmVhZFpvZFR5cGUoY3VycmVudCkgPz8gJycpKSB7XG4gICAgICAgIGNvbnN0IGRlZiA9IHJlYWRab2REZWZpbml0aW9uKGN1cnJlbnQpO1xuICAgICAgICBjb25zdCBuZXh0ID0gZGVmPy5pbm5lclR5cGUgPz9cbiAgICAgICAgICAgIGRlZj8uc2NoZW1hID8/XG4gICAgICAgICAgICBkZWY/LmJhc2UgPz9cbiAgICAgICAgICAgIGRlZj8udHlwZSA/P1xuICAgICAgICAgICAgZGVmPy53cmFwcGVkID8/XG4gICAgICAgICAgICBkZWY/LnVuZGVybHlpbmc7XG4gICAgICAgIGlmICghbmV4dCB8fCBuZXh0ID09PSBjdXJyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gbmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnQ7XG59XG5mdW5jdGlvbiBleHRyYWN0Rmlyc3QoZGVmLCAuLi5rZXlzKSB7XG4gICAgaWYgKCFkZWYpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgICBpZiAoa2V5IGluIGRlZiAmJiBkZWZba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGNvZXJjZUFycmF5KHZhbHVlKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyBbXSA6IFt2YWx1ZV07XG59XG5mdW5jdGlvbiBidWlsZExpdGVyYWwoZGVmKSB7XG4gICAgaWYgKCFkZWYpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgbGl0ZXJhbCA9IGV4dHJhY3RGaXJzdChkZWYsICd2YWx1ZScsICdsaXRlcmFsJyk7XG4gICAgaWYgKGxpdGVyYWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjb25zdDogbGl0ZXJhbCxcbiAgICAgICAgdHlwZTogbGl0ZXJhbCA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBsaXRlcmFsLFxuICAgIH07XG59XG5mdW5jdGlvbiBidWlsZEVudW0oZGVmKSB7XG4gICAgaWYgKCFkZWYpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGVmLnZhbHVlcykpIHtcbiAgICAgICAgcmV0dXJuIHsgZW51bTogZGVmLnZhbHVlcyB9O1xuICAgIH1cbiAgICBpZiAoZGVmLmVudHJpZXMgJiYgdHlwZW9mIGRlZi5lbnRyaWVzID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4geyBlbnVtOiBPYmplY3QudmFsdWVzKGRlZi5lbnRyaWVzKSB9O1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShkZWYub3B0aW9ucykpIHtcbiAgICAgICAgcmV0dXJuIHsgZW51bTogZGVmLm9wdGlvbnMgfTtcbiAgICB9XG4gICAgaWYgKGRlZi52YWx1ZXMgJiYgdHlwZW9mIGRlZi52YWx1ZXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiB7IGVudW06IE9iamVjdC52YWx1ZXMoZGVmLnZhbHVlcykgfTtcbiAgICB9XG4gICAgaWYgKGRlZi5lbnVtICYmIHR5cGVvZiBkZWYuZW51bSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIHsgZW51bTogT2JqZWN0LnZhbHVlcyhkZWYuZW51bSkgfTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIHJlYWRTaGFwZShpbnB1dCkge1xuICAgIGlmICh0eXBlb2YgaW5wdXQgIT09ICdvYmplY3QnIHx8IGlucHV0ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGlucHV0O1xuICAgIGlmIChjYW5kaWRhdGUuc2hhcGUgJiYgdHlwZW9mIGNhbmRpZGF0ZS5zaGFwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZS5zaGFwZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjYW5kaWRhdGUuc2hhcGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBjYW5kaWRhdGUuc2hhcGUoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGRlZiA9IHJlYWRab2REZWZpbml0aW9uKGNhbmRpZGF0ZSk7XG4gICAgY29uc3Qgc2hhcGUgPSBkZWY/LnNoYXBlO1xuICAgIGlmIChzaGFwZSAmJiB0eXBlb2Ygc2hhcGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBzaGFwZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzaGFwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHNoYXBlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9em9kSnNvblNjaGVtYUNvbXBhdC5tanMubWFwIiwiaW1wb3J0IHsgem9kUmVzcG9uc2VzRnVuY3Rpb24sIHpvZFRleHRGb3JtYXQgfSBmcm9tICdvcGVuYWkvaGVscGVycy96b2QnO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IHpvZEpzb25TY2hlbWFDb21wYXQsIGhhc0pzb25TY2hlbWFPYmplY3RTaGFwZSwgfSBmcm9tIFwiLi96b2RKc29uU2NoZW1hQ29tcGF0Lm1qc1wiO1xuaW1wb3J0IHsgYXNab2RUeXBlIH0gZnJvbSBcIi4vem9kQ29tcGF0Lm1qc1wiO1xuY29uc3Qgem9kUmVzcG9uc2VzRnVuY3Rpb25Db21wYXQgPSB6b2RSZXNwb25zZXNGdW5jdGlvbjtcbi8vIFRoZSBgLnNjaGVtYWAgcGF5bG9hZCBpcyBhbGwgd2UgbmVlZCwgc28gYSBsaWdodHdlaWdodCBzaWduYXR1cmUga2VlcHMgdGhlIGNvbXBpbGVyIGhhcHB5LlxuY29uc3Qgem9kVGV4dEZvcm1hdENvbXBhdCA9IHpvZFRleHRGb3JtYXQ7XG4vLyBvcGVuYWkvaGVscGVycy96b2QgY2Fubm90IGVtaXQgc3RyaWN0IHNjaGVtYXMgZm9yIGV2ZXJ5IFpvZCBydW50aW1lXG4vLyAobm90YWJseSBab2QgdjQpLCBzbyB3ZSBkZWxlZ2F0ZSB0byBhIHNtYWxsIGxvY2FsIGNvbnZlcnRlciBsaXZpbmcgaW5cbi8vIHpvZEpzb25TY2hlbWFDb21wYXQudHMgd2hlbmV2ZXIgaXRzIG91dHB1dCBpcyBtaXNzaW5nIHRoZSByZXF1aXJlZCBKU09OIFNjaGVtYSBiaXRzLlxuZnVuY3Rpb24gYnVpbGRKc29uU2NoZW1hRnJvbVpvZChpbnB1dFR5cGUpIHtcbiAgICByZXR1cm4gem9kSnNvblNjaGVtYUNvbXBhdChpbnB1dFR5cGUpO1xufVxuLyoqXG4gKiBDb252ZXJ0IGEgc3RyaW5nIHRvIGEgZnVuY3Rpb24gdG9vbCBuYW1lIGJ5IHJlcGxhY2luZyBzcGFjZXMgd2l0aCB1bmRlcnNjb3JlcyBhbmRcbiAqIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVycyB3aXRoIHVuZGVyc2NvcmVzLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAqIEByZXR1cm5zIFRoZSBmdW5jdGlvbiB0b29sIG5hbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0Z1bmN0aW9uVG9vbE5hbWUobmFtZSkge1xuICAgIC8vIFJlcGxhY2Ugc3BhY2VzIHdpdGggdW5kZXJzY29yZXNcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9cXHMvZywgJ18nKTtcbiAgICAvLyBSZXBsYWNlIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVycyB3aXRoIHVuZGVyc2NvcmVzXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW15hLXpBLVowLTldL2csICdfJyk7XG4gICAgLy8gRW5zdXJlIHRoZSBuYW1lIGlzIG5vdCBlbXB0eVxuICAgIGlmIChuYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rvb2wgbmFtZSBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICB9XG4gICAgcmV0dXJuIG5hbWU7XG59XG4vKipcbiAqIEdldCB0aGUgc2NoZW1hIGFuZCBwYXJzZXIgZnJvbSBhbiBpbnB1dCB0eXBlLiBJZiB0aGUgaW5wdXQgdHlwZSBpcyBhIFpvZE9iamVjdCwgd2Ugd2lsbCBjb252ZXJ0XG4gKiBpdCBpbnRvIGEgSlNPTiBTY2hlbWEgYW5kIHVzZSBab2QgYXMgcGFyc2VyLiBJZiB0aGUgaW5wdXQgdHlwZSBpcyBhIEpTT04gc2NoZW1hLCB3ZSB1c2UgdGhlXG4gKiBKU09OLnBhcnNlIGZ1bmN0aW9uIHRvIGdldCB0aGUgcGFyc2VyLlxuICogQHBhcmFtIGlucHV0VHlwZSAtIFRoZSBpbnB1dCB0eXBlIHRvIGdldCB0aGUgc2NoZW1hIGFuZCBwYXJzZXIgZnJvbS5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuXG4gKiBAcmV0dXJucyBUaGUgc2NoZW1hIGFuZCBwYXJzZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGlucHV0VHlwZSwgbmFtZSkge1xuICAgIGNvbnN0IHBhcnNlciA9IChpbnB1dCkgPT4gSlNPTi5wYXJzZShpbnB1dCk7XG4gICAgaWYgKGlzWm9kT2JqZWN0KGlucHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3QgdXNlRmFsbGJhY2sgPSAob3JpZ2luYWxFcnJvcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tTY2hlbWEgPSBidWlsZEpzb25TY2hlbWFGcm9tWm9kKGlucHV0VHlwZSk7XG4gICAgICAgICAgICBpZiAoZmFsbGJhY2tTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzY2hlbWE6IGZhbGxiYWNrU2NoZW1hLFxuICAgICAgICAgICAgICAgICAgICBwYXJzZXI6IChyYXdJbnB1dCkgPT4gaW5wdXRUeXBlLnBhcnNlKEpTT04ucGFyc2UocmF3SW5wdXQpKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gb3JpZ2luYWxFcnJvciBpbnN0YW5jZW9mIEVycm9yXG4gICAgICAgICAgICAgICAgPyBgIFVwc3RyZWFtIGhlbHBlciBlcnJvcjogJHtvcmlnaW5hbEVycm9yLm1lc3NhZ2V9YFxuICAgICAgICAgICAgICAgIDogJyc7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBVbmFibGUgdG8gY29udmVydCB0aGUgcHJvdmlkZWQgWm9kIHNjaGVtYSB0byBKU09OIFNjaGVtYS4gRW5zdXJlIHRoYXQgdGhlIFxcYHpvZFxcYCBwYWNrYWdlIGlzIGF2YWlsYWJsZSBhdCBydW50aW1lIG9yIHByb3ZpZGUgYSBKU09OIHNjaGVtYSBvYmplY3QgaW5zdGVhZC4ke2Vycm9yTWVzc2FnZX1gKTtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGZvcm1hdHRlZEZ1bmN0aW9uO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9ybWF0dGVkRnVuY3Rpb24gPSB6b2RSZXNwb25zZXNGdW5jdGlvbkNvbXBhdCh7XG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiBhc1pvZFR5cGUoaW5wdXRUeXBlKSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbjogKCkgPT4geyB9LCAvLyBlbXB0eSBmdW5jdGlvbiBoZXJlIHRvIHNhdGlzZnkgdGhlIE9wZW5BSSBoZWxwZXJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB1c2VGYWxsYmFjayhlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0pzb25TY2hlbWFPYmplY3RTaGFwZShmb3JtYXR0ZWRGdW5jdGlvbi5wYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IGZvcm1hdHRlZEZ1bmN0aW9uLnBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcGFyc2VyOiBmb3JtYXR0ZWRGdW5jdGlvbi4kcGFyc2VSYXcsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1c2VGYWxsYmFjaygpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXRUeXBlID09PSAnb2JqZWN0JyAmJiBpbnB1dFR5cGUgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNjaGVtYTogaW5wdXRUeXBlLFxuICAgICAgICAgICAgcGFyc2VyLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdJbnB1dCB0eXBlIGlzIG5vdCBhIFpvZE9iamVjdCBvciBhIHZhbGlkIEpTT04gc2NoZW1hJyk7XG59XG4vKipcbiAqIENvbnZlcnRzIHRoZSBhZ2VudCBvdXRwdXQgdHlwZSBwcm92aWRlZCB0byBhIHNlcmlhbGl6YWJsZSB2ZXJzaW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUob3V0cHV0VHlwZSkge1xuICAgIGlmIChvdXRwdXRUeXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgcmV0dXJuICd0ZXh0JztcbiAgICB9XG4gICAgaWYgKGlzWm9kT2JqZWN0KG91dHB1dFR5cGUpKSB7XG4gICAgICAgIGNvbnN0IHVzZUZhbGxiYWNrID0gKGV4aXN0aW5nLCBvcmlnaW5hbEVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmYWxsYmFja1NjaGVtYSA9IGJ1aWxkSnNvblNjaGVtYUZyb21ab2Qob3V0cHV0VHlwZSk7XG4gICAgICAgICAgICBpZiAoZmFsbGJhY2tTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBleGlzdGluZz8udHlwZSA/PyAnanNvbl9zY2hlbWEnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBleGlzdGluZz8ubmFtZSA/PyAnb3V0cHV0JyxcbiAgICAgICAgICAgICAgICAgICAgc3RyaWN0OiBleGlzdGluZz8uc3RyaWN0ID8/IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBzY2hlbWE6IGZhbGxiYWNrU2NoZW1hLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBvcmlnaW5hbEVycm9yIGluc3RhbmNlb2YgRXJyb3JcbiAgICAgICAgICAgICAgICA/IGAgVXBzdHJlYW0gaGVscGVyIGVycm9yOiAke29yaWdpbmFsRXJyb3IubWVzc2FnZX1gXG4gICAgICAgICAgICAgICAgOiAnJztcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYFVuYWJsZSB0byBjb252ZXJ0IHRoZSBwcm92aWRlZCBab2Qgc2NoZW1hIHRvIEpTT04gU2NoZW1hLiBFbnN1cmUgdGhhdCB0aGUgXFxgem9kXFxgIHBhY2thZ2UgaXMgYXZhaWxhYmxlIGF0IHJ1bnRpbWUgb3IgcHJvdmlkZSBhIEpTT04gc2NoZW1hIG9iamVjdCBpbnN0ZWFkLiR7ZXJyb3JNZXNzYWdlfWApO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgb3V0cHV0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgb3V0cHV0ID0gem9kVGV4dEZvcm1hdENvbXBhdChhc1pvZFR5cGUob3V0cHV0VHlwZSksICdvdXRwdXQnKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB1c2VGYWxsYmFjayh1bmRlZmluZWQsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzSnNvblNjaGVtYU9iamVjdFNoYXBlKG91dHB1dC5zY2hlbWEpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IG91dHB1dC50eXBlLFxuICAgICAgICAgICAgICAgIG5hbWU6IG91dHB1dC5uYW1lLFxuICAgICAgICAgICAgICAgIHN0cmljdDogb3V0cHV0LnN0cmljdCB8fCBmYWxzZSxcbiAgICAgICAgICAgICAgICBzY2hlbWE6IG91dHB1dC5zY2hlbWEsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1c2VGYWxsYmFjayhvdXRwdXQpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0VHlwZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2xzLm1qcy5tYXAiLCIvKipcbiAqIEhlbHBlcnMuXG4gKi9cblxudmFyIHMgPSAxMDAwO1xudmFyIG0gPSBzICogNjA7XG52YXIgaCA9IG0gKiA2MDtcbnZhciBkID0gaCAqIDI0O1xudmFyIHcgPSBkICogNztcbnZhciB5ID0gZCAqIDM2NS4yNTtcblxuLyoqXG4gKiBQYXJzZSBvciBmb3JtYXQgdGhlIGdpdmVuIGB2YWxgLlxuICpcbiAqIE9wdGlvbnM6XG4gKlxuICogIC0gYGxvbmdgIHZlcmJvc2UgZm9ybWF0dGluZyBbZmFsc2VdXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSB2YWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiB2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIG51bWJlclxuICogQHJldHVybiB7U3RyaW5nfE51bWJlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodmFsLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWw7XG4gIGlmICh0eXBlID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwYXJzZSh2YWwpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInICYmIGlzRmluaXRlKHZhbCkpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5sb25nID8gZm10TG9uZyh2YWwpIDogZm10U2hvcnQodmFsKTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ3ZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgdmFsaWQgbnVtYmVyLiB2YWw9JyArXG4gICAgICBKU09OLnN0cmluZ2lmeSh2YWwpXG4gICk7XG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBgc3RyYCBhbmQgcmV0dXJuIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgc3RyID0gU3RyaW5nKHN0cik7XG4gIGlmIChzdHIubGVuZ3RoID4gMTAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBtYXRjaCA9IC9eKC0/KD86XFxkKyk/XFwuP1xcZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyhcbiAgICBzdHJcbiAgKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMV0pO1xuICB2YXIgdHlwZSA9IChtYXRjaFsyXSB8fCAnbXMnKS50b0xvd2VyQ2FzZSgpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd5ZWFycyc6XG4gICAgY2FzZSAneWVhcic6XG4gICAgY2FzZSAneXJzJzpcbiAgICBjYXNlICd5cic6XG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gbiAqIHk7XG4gICAgY2FzZSAnd2Vla3MnOlxuICAgIGNhc2UgJ3dlZWsnOlxuICAgIGNhc2UgJ3cnOlxuICAgICAgcmV0dXJuIG4gKiB3O1xuICAgIGNhc2UgJ2RheXMnOlxuICAgIGNhc2UgJ2RheSc6XG4gICAgY2FzZSAnZCc6XG4gICAgICByZXR1cm4gbiAqIGQ7XG4gICAgY2FzZSAnaG91cnMnOlxuICAgIGNhc2UgJ2hvdXInOlxuICAgIGNhc2UgJ2hycyc6XG4gICAgY2FzZSAnaHInOlxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIG4gKiBoO1xuICAgIGNhc2UgJ21pbnV0ZXMnOlxuICAgIGNhc2UgJ21pbnV0ZSc6XG4gICAgY2FzZSAnbWlucyc6XG4gICAgY2FzZSAnbWluJzpcbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiBuICogbTtcbiAgICBjYXNlICdzZWNvbmRzJzpcbiAgICBjYXNlICdzZWNvbmQnOlxuICAgIGNhc2UgJ3NlY3MnOlxuICAgIGNhc2UgJ3NlYyc6XG4gICAgY2FzZSAncyc6XG4gICAgICByZXR1cm4gbiAqIHM7XG4gICAgY2FzZSAnbWlsbGlzZWNvbmRzJzpcbiAgICBjYXNlICdtaWxsaXNlY29uZCc6XG4gICAgY2FzZSAnbXNlY3MnOlxuICAgIGNhc2UgJ21zZWMnOlxuICAgIGNhc2UgJ21zJzpcbiAgICAgIHJldHVybiBuO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogU2hvcnQgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10U2hvcnQobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gZCkgKyAnZCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGgpICsgJ2gnO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArICdtJztcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gcykgKyAncyc7XG4gIH1cbiAgcmV0dXJuIG1zICsgJ21zJztcbn1cblxuLyoqXG4gKiBMb25nIGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdExvbmcobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBkLCAnZGF5Jyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgaCwgJ2hvdXInKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBtLCAnbWludXRlJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgcywgJ3NlY29uZCcpO1xuICB9XG4gIHJldHVybiBtcyArICcgbXMnO1xufVxuXG4vKipcbiAqIFBsdXJhbGl6YXRpb24gaGVscGVyLlxuICovXG5cbmZ1bmN0aW9uIHBsdXJhbChtcywgbXNBYnMsIG4sIG5hbWUpIHtcbiAgdmFyIGlzUGx1cmFsID0gbXNBYnMgPj0gbiAqIDEuNTtcbiAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBuKSArICcgJyArIG5hbWUgKyAoaXNQbHVyYWwgPyAncycgOiAnJyk7XG59XG4iLCJcbi8qKlxuICogVGhpcyBpcyB0aGUgY29tbW9uIGxvZ2ljIGZvciBib3RoIHRoZSBOb2RlLmpzIGFuZCB3ZWIgYnJvd3NlclxuICogaW1wbGVtZW50YXRpb25zIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5mdW5jdGlvbiBzZXR1cChlbnYpIHtcblx0Y3JlYXRlRGVidWcuZGVidWcgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuZGVmYXVsdCA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5jb2VyY2UgPSBjb2VyY2U7XG5cdGNyZWF0ZURlYnVnLmRpc2FibGUgPSBkaXNhYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGUgPSBlbmFibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRjcmVhdGVEZWJ1Zy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cdGNyZWF0ZURlYnVnLmRlc3Ryb3kgPSBkZXN0cm95O1xuXG5cdE9iamVjdC5rZXlzKGVudikuZm9yRWFjaChrZXkgPT4ge1xuXHRcdGNyZWF0ZURlYnVnW2tleV0gPSBlbnZba2V5XTtcblx0fSk7XG5cblx0LyoqXG5cdCogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG5cdCovXG5cblx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHQvKipcblx0KiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG5cdCpcblx0KiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlciBvciB1cHBlci1jYXNlIGxldHRlciwgaS5lLiBcIm5cIiBhbmQgXCJOXCIuXG5cdCovXG5cdGNyZWF0ZURlYnVnLmZvcm1hdHRlcnMgPSB7fTtcblxuXHQvKipcblx0KiBTZWxlY3RzIGEgY29sb3IgZm9yIGEgZGVidWcgbmFtZXNwYWNlXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHN0cmluZyBmb3IgdGhlIGRlYnVnIGluc3RhbmNlIHRvIGJlIGNvbG9yZWRcblx0KiBAcmV0dXJuIHtOdW1iZXJ8U3RyaW5nfSBBbiBBTlNJIGNvbG9yIGNvZGUgZm9yIHRoZSBnaXZlbiBuYW1lc3BhY2Vcblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG5cdFx0bGV0IGhhc2ggPSAwO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lc3BhY2UubGVuZ3RoOyBpKyspIHtcblx0XHRcdGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0aGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcblx0XHR9XG5cblx0XHRyZXR1cm4gY3JlYXRlRGVidWcuY29sb3JzW01hdGguYWJzKGhhc2gpICUgY3JlYXRlRGVidWcuY29sb3JzLmxlbmd0aF07XG5cdH1cblx0Y3JlYXRlRGVidWcuc2VsZWN0Q29sb3IgPSBzZWxlY3RDb2xvcjtcblxuXHQvKipcblx0KiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZXNwYWNlYC5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2Vcblx0KiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcblx0XHRsZXQgcHJldlRpbWU7XG5cdFx0bGV0IGVuYWJsZU92ZXJyaWRlID0gbnVsbDtcblx0XHRsZXQgbmFtZXNwYWNlc0NhY2hlO1xuXHRcdGxldCBlbmFibGVkQ2FjaGU7XG5cblx0XHRmdW5jdGlvbiBkZWJ1ZyguLi5hcmdzKSB7XG5cdFx0XHQvLyBEaXNhYmxlZD9cblx0XHRcdGlmICghZGVidWcuZW5hYmxlZCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHNlbGYgPSBkZWJ1ZztcblxuXHRcdFx0Ly8gU2V0IGBkaWZmYCB0aW1lc3RhbXBcblx0XHRcdGNvbnN0IGN1cnIgPSBOdW1iZXIobmV3IERhdGUoKSk7XG5cdFx0XHRjb25zdCBtcyA9IGN1cnIgLSAocHJldlRpbWUgfHwgY3Vycik7XG5cdFx0XHRzZWxmLmRpZmYgPSBtcztcblx0XHRcdHNlbGYucHJldiA9IHByZXZUaW1lO1xuXHRcdFx0c2VsZi5jdXJyID0gY3Vycjtcblx0XHRcdHByZXZUaW1lID0gY3VycjtcblxuXHRcdFx0YXJnc1swXSA9IGNyZWF0ZURlYnVnLmNvZXJjZShhcmdzWzBdKTtcblxuXHRcdFx0aWYgKHR5cGVvZiBhcmdzWzBdICE9PSAnc3RyaW5nJykge1xuXHRcdFx0XHQvLyBBbnl0aGluZyBlbHNlIGxldCdzIGluc3BlY3Qgd2l0aCAlT1xuXHRcdFx0XHRhcmdzLnVuc2hpZnQoJyVPJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFwcGx5IGFueSBgZm9ybWF0dGVyc2AgdHJhbnNmb3JtYXRpb25zXG5cdFx0XHRsZXQgaW5kZXggPSAwO1xuXHRcdFx0YXJnc1swXSA9IGFyZ3NbMF0ucmVwbGFjZSgvJShbYS16QS1aJV0pL2csIChtYXRjaCwgZm9ybWF0KSA9PiB7XG5cdFx0XHRcdC8vIElmIHdlIGVuY291bnRlciBhbiBlc2NhcGVkICUgdGhlbiBkb24ndCBpbmNyZWFzZSB0aGUgYXJyYXkgaW5kZXhcblx0XHRcdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRcdFx0cmV0dXJuICclJztcblx0XHRcdFx0fVxuXHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRjb25zdCBmb3JtYXR0ZXIgPSBjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzW2Zvcm1hdF07XG5cdFx0XHRcdGlmICh0eXBlb2YgZm9ybWF0dGVyID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0Y29uc3QgdmFsID0gYXJnc1tpbmRleF07XG5cdFx0XHRcdFx0bWF0Y2ggPSBmb3JtYXR0ZXIuY2FsbChzZWxmLCB2YWwpO1xuXG5cdFx0XHRcdFx0Ly8gTm93IHdlIG5lZWQgdG8gcmVtb3ZlIGBhcmdzW2luZGV4XWAgc2luY2UgaXQncyBpbmxpbmVkIGluIHRoZSBgZm9ybWF0YFxuXHRcdFx0XHRcdGFyZ3Muc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0XHRpbmRleC0tO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBtYXRjaDtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBBcHBseSBlbnYtc3BlY2lmaWMgZm9ybWF0dGluZyAoY29sb3JzLCBldGMuKVxuXHRcdFx0Y3JlYXRlRGVidWcuZm9ybWF0QXJncy5jYWxsKHNlbGYsIGFyZ3MpO1xuXG5cdFx0XHRjb25zdCBsb2dGbiA9IHNlbGYubG9nIHx8IGNyZWF0ZURlYnVnLmxvZztcblx0XHRcdGxvZ0ZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXHRcdH1cblxuXHRcdGRlYnVnLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcblx0XHRkZWJ1Zy51c2VDb2xvcnMgPSBjcmVhdGVEZWJ1Zy51c2VDb2xvcnMoKTtcblx0XHRkZWJ1Zy5jb2xvciA9IGNyZWF0ZURlYnVnLnNlbGVjdENvbG9yKG5hbWVzcGFjZSk7XG5cdFx0ZGVidWcuZXh0ZW5kID0gZXh0ZW5kO1xuXHRcdGRlYnVnLmRlc3Ryb3kgPSBjcmVhdGVEZWJ1Zy5kZXN0cm95OyAvLyBYWFggVGVtcG9yYXJ5LiBXaWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZWJ1ZywgJ2VuYWJsZWQnLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcblx0XHRcdGdldDogKCkgPT4ge1xuXHRcdFx0XHRpZiAoZW5hYmxlT3ZlcnJpZGUgIT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gZW5hYmxlT3ZlcnJpZGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5hbWVzcGFjZXNDYWNoZSAhPT0gY3JlYXRlRGVidWcubmFtZXNwYWNlcykge1xuXHRcdFx0XHRcdG5hbWVzcGFjZXNDYWNoZSA9IGNyZWF0ZURlYnVnLm5hbWVzcGFjZXM7XG5cdFx0XHRcdFx0ZW5hYmxlZENhY2hlID0gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVuYWJsZWRDYWNoZTtcblx0XHRcdH0sXG5cdFx0XHRzZXQ6IHYgPT4ge1xuXHRcdFx0XHRlbmFibGVPdmVycmlkZSA9IHY7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBFbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuXHRcdGlmICh0eXBlb2YgY3JlYXRlRGVidWcuaW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y3JlYXRlRGVidWcuaW5pdChkZWJ1Zyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlYnVnO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7XG5cdFx0Y29uc3QgbmV3RGVidWcgPSBjcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSArICh0eXBlb2YgZGVsaW1pdGVyID09PSAndW5kZWZpbmVkJyA/ICc6JyA6IGRlbGltaXRlcikgKyBuYW1lc3BhY2UpO1xuXHRcdG5ld0RlYnVnLmxvZyA9IHRoaXMubG9nO1xuXHRcdHJldHVybiBuZXdEZWJ1Zztcblx0fVxuXG5cdC8qKlxuXHQqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcblx0KiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuXHRcdGNyZWF0ZURlYnVnLnNhdmUobmFtZXNwYWNlcyk7XG5cdFx0Y3JlYXRlRGVidWcubmFtZXNwYWNlcyA9IG5hbWVzcGFjZXM7XG5cblx0XHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRcdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0XHRjb25zdCBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycgPyBuYW1lc3BhY2VzIDogJycpXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXFxzKy9nLCAnLCcpXG5cdFx0XHQuc3BsaXQoJywnKVxuXHRcdFx0LmZpbHRlcihCb29sZWFuKTtcblxuXHRcdGZvciAoY29uc3QgbnMgb2Ygc3BsaXQpIHtcblx0XHRcdGlmIChuc1swXSA9PT0gJy0nKSB7XG5cdFx0XHRcdGNyZWF0ZURlYnVnLnNraXBzLnB1c2gobnMuc2xpY2UoMSkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3JlYXRlRGVidWcubmFtZXMucHVzaChucyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gc3RyaW5nIG1hdGNoZXMgYSBuYW1lc3BhY2UgdGVtcGxhdGUsIGhvbm9yaW5nXG5cdCAqIGFzdGVyaXNrcyBhcyB3aWxkY2FyZHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcblx0ICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRmdW5jdGlvbiBtYXRjaGVzVGVtcGxhdGUoc2VhcmNoLCB0ZW1wbGF0ZSkge1xuXHRcdGxldCBzZWFyY2hJbmRleCA9IDA7XG5cdFx0bGV0IHRlbXBsYXRlSW5kZXggPSAwO1xuXHRcdGxldCBzdGFySW5kZXggPSAtMTtcblx0XHRsZXQgbWF0Y2hJbmRleCA9IDA7XG5cblx0XHR3aGlsZSAoc2VhcmNoSW5kZXggPCBzZWFyY2gubGVuZ3RoKSB7XG5cdFx0XHRpZiAodGVtcGxhdGVJbmRleCA8IHRlbXBsYXRlLmxlbmd0aCAmJiAodGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09IHNlYXJjaFtzZWFyY2hJbmRleF0gfHwgdGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09ICcqJykpIHtcblx0XHRcdFx0Ly8gTWF0Y2ggY2hhcmFjdGVyIG9yIHByb2NlZWQgd2l0aCB3aWxkY2FyZFxuXHRcdFx0XHRpZiAodGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09ICcqJykge1xuXHRcdFx0XHRcdHN0YXJJbmRleCA9IHRlbXBsYXRlSW5kZXg7XG5cdFx0XHRcdFx0bWF0Y2hJbmRleCA9IHNlYXJjaEluZGV4O1xuXHRcdFx0XHRcdHRlbXBsYXRlSW5kZXgrKzsgLy8gU2tpcCB0aGUgJyonXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VhcmNoSW5kZXgrKztcblx0XHRcdFx0XHR0ZW1wbGF0ZUluZGV4Kys7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoc3RhckluZGV4ICE9PSAtMSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5lZ2F0ZWQtY29uZGl0aW9uXG5cdFx0XHRcdC8vIEJhY2t0cmFjayB0byB0aGUgbGFzdCAnKicgYW5kIHRyeSB0byBtYXRjaCBtb3JlIGNoYXJhY3RlcnNcblx0XHRcdFx0dGVtcGxhdGVJbmRleCA9IHN0YXJJbmRleCArIDE7XG5cdFx0XHRcdG1hdGNoSW5kZXgrKztcblx0XHRcdFx0c2VhcmNoSW5kZXggPSBtYXRjaEluZGV4O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlOyAvLyBObyBtYXRjaFxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSB0cmFpbGluZyAnKicgaW4gdGVtcGxhdGVcblx0XHR3aGlsZSAodGVtcGxhdGVJbmRleCA8IHRlbXBsYXRlLmxlbmd0aCAmJiB0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSB7XG5cdFx0XHR0ZW1wbGF0ZUluZGV4Kys7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRlbXBsYXRlSW5kZXggPT09IHRlbXBsYXRlLmxlbmd0aDtcblx0fVxuXG5cdC8qKlxuXHQqIERpc2FibGUgZGVidWcgb3V0cHV0LlxuXHQqXG5cdCogQHJldHVybiB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZGlzYWJsZSgpIHtcblx0XHRjb25zdCBuYW1lc3BhY2VzID0gW1xuXHRcdFx0Li4uY3JlYXRlRGVidWcubmFtZXMsXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5za2lwcy5tYXAobmFtZXNwYWNlID0+ICctJyArIG5hbWVzcGFjZSlcblx0XHRdLmpvaW4oJywnKTtcblx0XHRjcmVhdGVEZWJ1Zy5lbmFibGUoJycpO1xuXHRcdHJldHVybiBuYW1lc3BhY2VzO1xuXHR9XG5cblx0LyoqXG5cdCogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBtb2RlIG5hbWUgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0KiBAcmV0dXJuIHtCb29sZWFufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGVuYWJsZWQobmFtZSkge1xuXHRcdGZvciAoY29uc3Qgc2tpcCBvZiBjcmVhdGVEZWJ1Zy5za2lwcykge1xuXHRcdFx0aWYgKG1hdGNoZXNUZW1wbGF0ZShuYW1lLCBza2lwKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yIChjb25zdCBucyBvZiBjcmVhdGVEZWJ1Zy5uYW1lcykge1xuXHRcdFx0aWYgKG1hdGNoZXNUZW1wbGF0ZShuYW1lLCBucykpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCogQ29lcmNlIGB2YWxgLlxuXHQqXG5cdCogQHBhcmFtIHtNaXhlZH0gdmFsXG5cdCogQHJldHVybiB7TWl4ZWR9XG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcblx0XHRpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG5cdFx0fVxuXHRcdHJldHVybiB2YWw7XG5cdH1cblxuXHQvKipcblx0KiBYWFggRE8gTk9UIFVTRS4gVGhpcyBpcyBhIHRlbXBvcmFyeSBzdHViIGZ1bmN0aW9uLlxuXHQqIFhYWCBJdCBXSUxMIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblx0Ki9cblx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0fVxuXG5cdGNyZWF0ZURlYnVnLmVuYWJsZShjcmVhdGVEZWJ1Zy5sb2FkKCkpO1xuXG5cdHJldHVybiBjcmVhdGVEZWJ1Zztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXR1cDtcbiIsIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHdlYiBicm93c2VyIGltcGxlbWVudGF0aW9uIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5leHBvcnRzLmZvcm1hdEFyZ3MgPSBmb3JtYXRBcmdzO1xuZXhwb3J0cy5zYXZlID0gc2F2ZTtcbmV4cG9ydHMubG9hZCA9IGxvYWQ7XG5leHBvcnRzLnVzZUNvbG9ycyA9IHVzZUNvbG9ycztcbmV4cG9ydHMuc3RvcmFnZSA9IGxvY2Fsc3RvcmFnZSgpO1xuZXhwb3J0cy5kZXN0cm95ID0gKCgpID0+IHtcblx0bGV0IHdhcm5lZCA9IGZhbHNlO1xuXG5cdHJldHVybiAoKSA9PiB7XG5cdFx0aWYgKCF3YXJuZWQpIHtcblx0XHRcdHdhcm5lZCA9IHRydWU7XG5cdFx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0XHR9XG5cdH07XG59KSgpO1xuXG4vKipcbiAqIENvbG9ycy5cbiAqL1xuXG5leHBvcnRzLmNvbG9ycyA9IFtcblx0JyMwMDAwQ0MnLFxuXHQnIzAwMDBGRicsXG5cdCcjMDAzM0NDJyxcblx0JyMwMDMzRkYnLFxuXHQnIzAwNjZDQycsXG5cdCcjMDA2NkZGJyxcblx0JyMwMDk5Q0MnLFxuXHQnIzAwOTlGRicsXG5cdCcjMDBDQzAwJyxcblx0JyMwMENDMzMnLFxuXHQnIzAwQ0M2NicsXG5cdCcjMDBDQzk5Jyxcblx0JyMwMENDQ0MnLFxuXHQnIzAwQ0NGRicsXG5cdCcjMzMwMENDJyxcblx0JyMzMzAwRkYnLFxuXHQnIzMzMzNDQycsXG5cdCcjMzMzM0ZGJyxcblx0JyMzMzY2Q0MnLFxuXHQnIzMzNjZGRicsXG5cdCcjMzM5OUNDJyxcblx0JyMzMzk5RkYnLFxuXHQnIzMzQ0MwMCcsXG5cdCcjMzNDQzMzJyxcblx0JyMzM0NDNjYnLFxuXHQnIzMzQ0M5OScsXG5cdCcjMzNDQ0NDJyxcblx0JyMzM0NDRkYnLFxuXHQnIzY2MDBDQycsXG5cdCcjNjYwMEZGJyxcblx0JyM2NjMzQ0MnLFxuXHQnIzY2MzNGRicsXG5cdCcjNjZDQzAwJyxcblx0JyM2NkNDMzMnLFxuXHQnIzk5MDBDQycsXG5cdCcjOTkwMEZGJyxcblx0JyM5OTMzQ0MnLFxuXHQnIzk5MzNGRicsXG5cdCcjOTlDQzAwJyxcblx0JyM5OUNDMzMnLFxuXHQnI0NDMDAwMCcsXG5cdCcjQ0MwMDMzJyxcblx0JyNDQzAwNjYnLFxuXHQnI0NDMDA5OScsXG5cdCcjQ0MwMENDJyxcblx0JyNDQzAwRkYnLFxuXHQnI0NDMzMwMCcsXG5cdCcjQ0MzMzMzJyxcblx0JyNDQzMzNjYnLFxuXHQnI0NDMzM5OScsXG5cdCcjQ0MzM0NDJyxcblx0JyNDQzMzRkYnLFxuXHQnI0NDNjYwMCcsXG5cdCcjQ0M2NjMzJyxcblx0JyNDQzk5MDAnLFxuXHQnI0NDOTkzMycsXG5cdCcjQ0NDQzAwJyxcblx0JyNDQ0NDMzMnLFxuXHQnI0ZGMDAwMCcsXG5cdCcjRkYwMDMzJyxcblx0JyNGRjAwNjYnLFxuXHQnI0ZGMDA5OScsXG5cdCcjRkYwMENDJyxcblx0JyNGRjAwRkYnLFxuXHQnI0ZGMzMwMCcsXG5cdCcjRkYzMzMzJyxcblx0JyNGRjMzNjYnLFxuXHQnI0ZGMzM5OScsXG5cdCcjRkYzM0NDJyxcblx0JyNGRjMzRkYnLFxuXHQnI0ZGNjYwMCcsXG5cdCcjRkY2NjMzJyxcblx0JyNGRjk5MDAnLFxuXHQnI0ZGOTkzMycsXG5cdCcjRkZDQzAwJyxcblx0JyNGRkNDMzMnXG5dO1xuXG4vKipcbiAqIEN1cnJlbnRseSBvbmx5IFdlYktpdC1iYXNlZCBXZWIgSW5zcGVjdG9ycywgRmlyZWZveCA+PSB2MzEsXG4gKiBhbmQgdGhlIEZpcmVidWcgZXh0ZW5zaW9uIChhbnkgRmlyZWZveCB2ZXJzaW9uKSBhcmUga25vd25cbiAqIHRvIHN1cHBvcnQgXCIlY1wiIENTUyBjdXN0b21pemF0aW9ucy5cbiAqXG4gKiBUT0RPOiBhZGQgYSBgbG9jYWxTdG9yYWdlYCB2YXJpYWJsZSB0byBleHBsaWNpdGx5IGVuYWJsZS9kaXNhYmxlIGNvbG9yc1xuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5mdW5jdGlvbiB1c2VDb2xvcnMoKSB7XG5cdC8vIE5COiBJbiBhbiBFbGVjdHJvbiBwcmVsb2FkIHNjcmlwdCwgZG9jdW1lbnQgd2lsbCBiZSBkZWZpbmVkIGJ1dCBub3QgZnVsbHlcblx0Ly8gaW5pdGlhbGl6ZWQuIFNpbmNlIHdlIGtub3cgd2UncmUgaW4gQ2hyb21lLCB3ZSdsbCBqdXN0IGRldGVjdCB0aGlzIGNhc2Vcblx0Ly8gZXhwbGljaXRseVxuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnByb2Nlc3MgJiYgKHdpbmRvdy5wcm9jZXNzLnR5cGUgPT09ICdyZW5kZXJlcicgfHwgd2luZG93LnByb2Nlc3MuX19ud2pzKSkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gSW50ZXJuZXQgRXhwbG9yZXIgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQgY29sb3JzLlxuXHRpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goLyhlZGdlfHRyaWRlbnQpXFwvKFxcZCspLykpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRsZXQgbTtcblxuXHQvLyBJcyB3ZWJraXQ/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE2NDU5NjA2LzM3Njc3M1xuXHQvLyBkb2N1bWVudCBpcyB1bmRlZmluZWQgaW4gcmVhY3QtbmF0aXZlOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL3B1bGwvMTYzMlxuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmV0dXJuLWFzc2lnblxuXHRyZXR1cm4gKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuV2Via2l0QXBwZWFyYW5jZSkgfHxcblx0XHQvLyBJcyBmaXJlYnVnPyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zOTgxMjAvMzc2NzczXG5cdFx0KHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS5maXJlYnVnIHx8ICh3aW5kb3cuY29uc29sZS5leGNlcHRpb24gJiYgd2luZG93LmNvbnNvbGUudGFibGUpKSkgfHxcblx0XHQvLyBJcyBmaXJlZm94ID49IHYzMT9cblx0XHQvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1Rvb2xzL1dlYl9Db25zb2xlI1N0eWxpbmdfbWVzc2FnZXNcblx0XHQodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiAobSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvZmlyZWZveFxcLyhcXGQrKS8pKSAmJiBwYXJzZUludChtWzFdLCAxMCkgPj0gMzEpIHx8XG5cdFx0Ly8gRG91YmxlIGNoZWNrIHdlYmtpdCBpbiB1c2VyQWdlbnQganVzdCBpbiBjYXNlIHdlIGFyZSBpbiBhIHdvcmtlclxuXHRcdCh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvYXBwbGV3ZWJraXRcXC8oXFxkKykvKSk7XG59XG5cbi8qKlxuICogQ29sb3JpemUgbG9nIGFyZ3VtZW50cyBpZiBlbmFibGVkLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0QXJncyhhcmdzKSB7XG5cdGFyZ3NbMF0gPSAodGhpcy51c2VDb2xvcnMgPyAnJWMnIDogJycpICtcblx0XHR0aGlzLm5hbWVzcGFjZSArXG5cdFx0KHRoaXMudXNlQ29sb3JzID8gJyAlYycgOiAnICcpICtcblx0XHRhcmdzWzBdICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnJWMgJyA6ICcgJykgK1xuXHRcdCcrJyArIG1vZHVsZS5leHBvcnRzLmh1bWFuaXplKHRoaXMuZGlmZik7XG5cblx0aWYgKCF0aGlzLnVzZUNvbG9ycykge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IGMgPSAnY29sb3I6ICcgKyB0aGlzLmNvbG9yO1xuXHRhcmdzLnNwbGljZSgxLCAwLCBjLCAnY29sb3I6IGluaGVyaXQnKTtcblxuXHQvLyBUaGUgZmluYWwgXCIlY1wiIGlzIHNvbWV3aGF0IHRyaWNreSwgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvdGhlclxuXHQvLyBhcmd1bWVudHMgcGFzc2VkIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgdGhlICVjLCBzbyB3ZSBuZWVkIHRvXG5cdC8vIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgaW5kZXggdG8gaW5zZXJ0IHRoZSBDU1MgaW50b1xuXHRsZXQgaW5kZXggPSAwO1xuXHRsZXQgbGFzdEMgPSAwO1xuXHRhcmdzWzBdLnJlcGxhY2UoLyVbYS16QS1aJV0vZywgbWF0Y2ggPT4ge1xuXHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpbmRleCsrO1xuXHRcdGlmIChtYXRjaCA9PT0gJyVjJykge1xuXHRcdFx0Ly8gV2Ugb25seSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgKmxhc3QqICVjXG5cdFx0XHQvLyAodGhlIHVzZXIgbWF5IGhhdmUgcHJvdmlkZWQgdGhlaXIgb3duKVxuXHRcdFx0bGFzdEMgPSBpbmRleDtcblx0XHR9XG5cdH0pO1xuXG5cdGFyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtcbn1cblxuLyoqXG4gKiBJbnZva2VzIGBjb25zb2xlLmRlYnVnKClgIHdoZW4gYXZhaWxhYmxlLlxuICogTm8tb3Agd2hlbiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGEgXCJmdW5jdGlvblwiLlxuICogSWYgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBhdmFpbGFibGUsIGZhbGxzIGJhY2tcbiAqIHRvIGBjb25zb2xlLmxvZ2AuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuZXhwb3J0cy5sb2cgPSBjb25zb2xlLmRlYnVnIHx8IGNvbnNvbGUubG9nIHx8ICgoKSA9PiB7fSk7XG5cbi8qKlxuICogU2F2ZSBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzYXZlKG5hbWVzcGFjZXMpIHtcblx0dHJ5IHtcblx0XHRpZiAobmFtZXNwYWNlcykge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnNldEl0ZW0oJ2RlYnVnJywgbmFtZXNwYWNlcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGV4cG9ydHMuc3RvcmFnZS5yZW1vdmVJdGVtKCdkZWJ1ZycpO1xuXHRcdH1cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxuLyoqXG4gKiBMb2FkIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybnMgdGhlIHByZXZpb3VzbHkgcGVyc2lzdGVkIGRlYnVnIG1vZGVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbG9hZCgpIHtcblx0bGV0IHI7XG5cdHRyeSB7XG5cdFx0ciA9IGV4cG9ydHMuc3RvcmFnZS5nZXRJdGVtKCdkZWJ1ZycpIHx8IGV4cG9ydHMuc3RvcmFnZS5nZXRJdGVtKCdERUJVRycpIDtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cblxuXHQvLyBJZiBkZWJ1ZyBpc24ndCBzZXQgaW4gTFMsIGFuZCB3ZSdyZSBpbiBFbGVjdHJvbiwgdHJ5IHRvIGxvYWQgJERFQlVHXG5cdGlmICghciAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgJ2VudicgaW4gcHJvY2Vzcykge1xuXHRcdHIgPSBwcm9jZXNzLmVudi5ERUJVRztcblx0fVxuXG5cdHJldHVybiByO1xufVxuXG4vKipcbiAqIExvY2Fsc3RvcmFnZSBhdHRlbXB0cyB0byByZXR1cm4gdGhlIGxvY2Fsc3RvcmFnZS5cbiAqXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHNhZmFyaSB0aHJvd3NcbiAqIHdoZW4gYSB1c2VyIGRpc2FibGVzIGNvb2tpZXMvbG9jYWxzdG9yYWdlXG4gKiBhbmQgeW91IGF0dGVtcHQgdG8gYWNjZXNzIGl0LlxuICpcbiAqIEByZXR1cm4ge0xvY2FsU3RvcmFnZX1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGxvY2Fsc3RvcmFnZSgpIHtcblx0dHJ5IHtcblx0XHQvLyBUVk1MS2l0IChBcHBsZSBUViBKUyBSdW50aW1lKSBkb2VzIG5vdCBoYXZlIGEgd2luZG93IG9iamVjdCwganVzdCBsb2NhbFN0b3JhZ2UgaW4gdGhlIGdsb2JhbCBjb250ZXh0XG5cdFx0Ly8gVGhlIEJyb3dzZXIgYWxzbyBoYXMgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dC5cblx0XHRyZXR1cm4gbG9jYWxTdG9yYWdlO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY29tbW9uJykoZXhwb3J0cyk7XG5cbmNvbnN0IHtmb3JtYXR0ZXJzfSA9IG1vZHVsZS5leHBvcnRzO1xuXG4vKipcbiAqIE1hcCAlaiB0byBgSlNPTi5zdHJpbmdpZnkoKWAsIHNpbmNlIG5vIFdlYiBJbnNwZWN0b3JzIGRvIHRoYXQgYnkgZGVmYXVsdC5cbiAqL1xuXG5mb3JtYXR0ZXJzLmogPSBmdW5jdGlvbiAodikge1xuXHR0cnkge1xuXHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSh2KTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRyZXR1cm4gJ1tVbmV4cGVjdGVkSlNPTlBhcnNlRXJyb3JdOiAnICsgZXJyb3IubWVzc2FnZTtcblx0fVxufTtcbiIsImltcG9ydCB7IGxvYWRFbnYgYXMgX2xvYWRFbnYsIGlzQnJvd3NlckVudmlyb25tZW50LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbi8qKlxuICogTG9hZHMgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZyb20gdGhlIHByb2Nlc3MgZW52aXJvbm1lbnQuXG4gKlxuICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRFbnYoKSB7XG4gICAgcmV0dXJuIF9sb2FkRW52KCk7XG59XG4vKipcbiAqIENoZWNrcyBpZiBhIGZsYWcgaXMgZW5hYmxlZCBpbiB0aGUgZW52aXJvbm1lbnQuXG4gKlxuICogQHBhcmFtIGZsYWdOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZsYWcgdG8gY2hlY2suXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZsYWcgaXMgZW5hYmxlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGlzRW5hYmxlZChmbGFnTmFtZSkge1xuICAgIGNvbnN0IGVudiA9IGxvYWRFbnYoKTtcbiAgICByZXR1cm4gKHR5cGVvZiBlbnYgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIChlbnZbZmxhZ05hbWVdID09PSAndHJ1ZScgfHwgZW52W2ZsYWdOYW1lXSA9PT0gJzEnKSk7XG59XG4vKipcbiAqIEdsb2JhbCBjb25maWd1cmF0aW9uIGZvciB0cmFjaW5nLlxuICovXG5leHBvcnQgY29uc3QgdHJhY2luZyA9IHtcbiAgICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsb2FkRW52KCkuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xuICAgICAgICAgICAgLy8gZGlzYWJsaW5nIGJ5IGRlZmF1bHQgaW4gdGVzdHNcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc0VuYWJsZWQoJ09QRU5BSV9BR0VOVFNfRElTQUJMRV9UUkFDSU5HJyk7XG4gICAgfSxcbn07XG4vKipcbiAqIEdsb2JhbCBjb25maWd1cmF0aW9uIGZvciBsb2dnaW5nLlxuICovXG5leHBvcnQgY29uc3QgbG9nZ2luZyA9IHtcbiAgICBnZXQgZG9udExvZ01vZGVsRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW5hYmxlZCgnT1BFTkFJX0FHRU5UU19ET05UX0xPR19NT0RFTF9EQVRBJyk7XG4gICAgfSxcbiAgICBnZXQgZG9udExvZ1Rvb2xEYXRhKCkge1xuICAgICAgICByZXR1cm4gaXNFbmFibGVkKCdPUEVOQUlfQUdFTlRTX0RPTlRfTE9HX1RPT0xfREFUQScpO1xuICAgIH0sXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZmlnLm1qcy5tYXAiLCJpbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHsgbG9nZ2luZyB9IGZyb20gXCIuL2NvbmZpZy5tanNcIjtcbi8qKlxuICogQnkgZGVmYXVsdCB3ZSBkb24ndCBsb2cgTExNIGlucHV0cy9vdXRwdXRzLCB0byBwcmV2ZW50IGV4cG9zaW5nIHNlbnNpdGl2ZSBkYXRhLiBTZXQgdGhpcyBmbGFnXG4gKiB0byBlbmFibGUgbG9nZ2luZyB0aGVtLlxuICovXG5jb25zdCBkb250TG9nTW9kZWxEYXRhID0gbG9nZ2luZy5kb250TG9nTW9kZWxEYXRhO1xuLyoqXG4gKiBCeSBkZWZhdWx0IHdlIGRvbid0IGxvZyB0b29sIGlucHV0cy9vdXRwdXRzLCB0byBwcmV2ZW50IGV4cG9zaW5nIHNlbnNpdGl2ZSBkYXRhLiBTZXQgdGhpcyBmbGFnXG4gKiB0byBlbmFibGUgbG9nZ2luZyB0aGVtLlxuICovXG5jb25zdCBkb250TG9nVG9vbERhdGEgPSBsb2dnaW5nLmRvbnRMb2dUb29sRGF0YTtcbi8qKlxuICogR2V0IGEgbG9nZ2VyIGZvciBhIGdpdmVuIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIG5hbWVzcGFjZSAtIHRoZSBuYW1lc3BhY2UgdG8gdXNlIGZvciB0aGUgbG9nZ2VyLlxuICogQHJldHVybnMgQSBsb2dnZXIgb2JqZWN0IHdpdGggYGRlYnVnYCBhbmQgYGVycm9yYCBtZXRob2RzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2VyKG5hbWVzcGFjZSA9ICdvcGVuYWktYWdlbnRzJykge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgZGVidWc6IGRlYnVnKG5hbWVzcGFjZSksXG4gICAgICAgIGVycm9yOiAoLi4uYXJncykgPT4gY29uc29sZS5lcnJvciguLi5hcmdzKSxcbiAgICAgICAgd2FybjogKC4uLmFyZ3MpID0+IGNvbnNvbGUud2FybiguLi5hcmdzKSxcbiAgICAgICAgZG9udExvZ01vZGVsRGF0YSxcbiAgICAgICAgZG9udExvZ1Rvb2xEYXRhLFxuICAgIH07XG59XG5leHBvcnQgY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdvcGVuYWktYWdlbnRzOmNvcmUnKTtcbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvZ2dlci5tanMubWFwIiwiY29uc3QgQllURV9QUkVWSUVXX0xJTUlUID0gMjA7XG5leHBvcnQgZnVuY3Rpb24gdG9TbWFydFN0cmluZyh2YWx1ZSkge1xuICAgIC8vIFByb2R1Y2UgYSBodW1hbi1mcmllbmRseSBzdHJpbmcgcmVwcmVzZW50YXRpb24gd2hpbGUgcHJlc2VydmluZyBlbm91Z2ggZGV0YWlsIGZvciBkZWJ1Z2dpbmcgd29ya2Zsb3dzLlxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlckxpa2UodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkodmFsdWUpKTtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJWaWV3KHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgc21hcnRTdHJpbmdSZXBsYWNlcik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9lKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1tvYmplY3Qgd2l0aCBjaXJjdWxhciByZWZlcmVuY2VzXSc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheUJ1ZmZlckxpa2UodmFsdWUpIHtcbiAgICAvLyBEZXRlY3QgcmF3IEFycmF5QnVmZmVyLWJhY2tlZCBwYXlsb2FkcyBzbyBjYWxsZXJzIGNhbiBnZW5lcmF0ZSBmdWxsIHByZXZpZXdzIHJhdGhlciB0aGFuIHRydW5jYXRlZCBoYXNoZXMuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHNoYXJlZEFycmF5QnVmZmVyQ3RvciA9IGdsb2JhbFRoaXMuU2hhcmVkQXJyYXlCdWZmZXI7XG4gICAgcmV0dXJuIEJvb2xlYW4oc2hhcmVkQXJyYXlCdWZmZXJDdG9yICYmIHZhbHVlIGluc3RhbmNlb2Ygc2hhcmVkQXJyYXlCdWZmZXJDdG9yKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWx1ZSkge1xuICAgIC8vIFRyZWF0IHR5cGVkIGFycmF5IHZpZXdzIGFzIGJpbmFyeSBkYXRhIGZvciBjb25zaXN0ZW50IHNlcmlhbGl6YXRpb24uXG4gICAgcmV0dXJuIHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KHZhbHVlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1NlcmlhbGl6ZWRCdWZmZXJTbmFwc2hvdCh2YWx1ZSkge1xuICAgIC8vIFN1cHBvcnQgc2VyaWFsaXplZCBCdWZmZXIgc25hcHNob3RzIChlLmcuLCBmcm9tIEpTT04ucGFyc2UpIGVtaXR0ZWQgYnkgc29tZSB0b29sIG91dHB1dHMuXG4gICAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHZhbHVlICE9PSBudWxsICYmXG4gICAgICAgIHZhbHVlLnR5cGUgPT09ICdCdWZmZXInICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkodmFsdWUuZGF0YSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTm9kZUJ1ZmZlcih2YWx1ZSkge1xuICAgIC8vIERldGVjdCBydW50aW1lIEJ1ZmZlcnMgd2l0aG91dCBpbXBvcnRpbmcgbm9kZS1zcGVjaWZpYyBzaGltcywgaGFuZGxpbmcgYnJvd3NlciBidWlsZHMgZ3JhY2VmdWxseS5cbiAgICBjb25zdCBidWZmZXJDdG9yID0gZ2xvYmFsVGhpcy5CdWZmZXI7XG4gICAgcmV0dXJuIEJvb2xlYW4oYnVmZmVyQ3RvciAmJlxuICAgICAgICB0eXBlb2YgYnVmZmVyQ3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICBidWZmZXJDdG9yLmlzQnVmZmVyKHZhbHVlKSk7XG59XG5mdW5jdGlvbiBmb3JtYXRCeXRlQXJyYXkoYnl0ZXMpIHtcbiAgICBpZiAoYnl0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnW2J5dGUgYXJyYXkgKDAgYnl0ZXMpXSc7XG4gICAgfVxuICAgIGNvbnN0IHByZXZpZXdMZW5ndGggPSBNYXRoLm1pbihieXRlcy5sZW5ndGgsIEJZVEVfUFJFVklFV19MSU1JVCk7XG4gICAgY29uc3QgcHJldmlld1BhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2aWV3TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcHJldmlld1BhcnRzLnB1c2goZm9ybWF0Qnl0ZShieXRlc1tpXSkpO1xuICAgIH1cbiAgICBjb25zdCBlbGxpcHNpcyA9IGJ5dGVzLmxlbmd0aCA+IEJZVEVfUFJFVklFV19MSU1JVCA/ICcg4oCmJyA6ICcnO1xuICAgIGNvbnN0IHByZXZpZXcgPSBwcmV2aWV3UGFydHMuam9pbignICcpO1xuICAgIHJldHVybiBgW2J5dGUgYXJyYXkgJHtwcmV2aWV3fSR7ZWxsaXBzaXN9ICgke2J5dGVzLmxlbmd0aH0gYnl0ZXMpXWA7XG59XG5mdW5jdGlvbiBmb3JtYXRCeXRlKGJ5dGUpIHtcbiAgICByZXR1cm4gYDB4JHtieXRlLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpfWA7XG59XG5mdW5jdGlvbiBzbWFydFN0cmluZ1JlcGxhY2VyKF9rZXksIG5lc3RlZFZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJMaWtlKG5lc3RlZFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZm9ybWF0Qnl0ZUFycmF5KG5ldyBVaW50OEFycmF5KG5lc3RlZFZhbHVlKSk7XG4gICAgfVxuICAgIGlmIChpc0FycmF5QnVmZmVyVmlldyhuZXN0ZWRWYWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IG5lc3RlZFZhbHVlO1xuICAgICAgICByZXR1cm4gZm9ybWF0Qnl0ZUFycmF5KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpO1xuICAgIH1cbiAgICBpZiAoaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QobmVzdGVkVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkoVWludDhBcnJheS5mcm9tKG5lc3RlZFZhbHVlLmRhdGEpKTtcbiAgICB9XG4gICAgcmV0dXJuIG5lc3RlZFZhbHVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c21hcnRTdHJpbmcubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBkZWZpbmVUb29sSW5wdXRHdWFyZHJhaWwoYXJncykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICd0b29sX2lucHV0JyxcbiAgICAgICAgbmFtZTogYXJncy5uYW1lLFxuICAgICAgICBydW46IGFyZ3MucnVuLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lVG9vbE91dHB1dEd1YXJkcmFpbChhcmdzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3Rvb2xfb3V0cHV0JyxcbiAgICAgICAgbmFtZTogYXJncy5uYW1lLFxuICAgICAgICBydW46IGFyZ3MucnVuLFxuICAgIH07XG59XG5leHBvcnQgY29uc3QgVG9vbEd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0RmFjdG9yeSA9IHtcbiAgICBhbGxvdyhvdXRwdXRJbmZvKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiZWhhdmlvcjogeyB0eXBlOiAnYWxsb3cnIH0sXG4gICAgICAgICAgICBvdXRwdXRJbmZvLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgcmVqZWN0Q29udGVudChtZXNzYWdlLCBvdXRwdXRJbmZvKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiZWhhdmlvcjogeyB0eXBlOiAncmVqZWN0Q29udGVudCcsIG1lc3NhZ2UgfSxcbiAgICAgICAgICAgIG91dHB1dEluZm8sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0aHJvd0V4Y2VwdGlvbihvdXRwdXRJbmZvKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiZWhhdmlvcjogeyB0eXBlOiAndGhyb3dFeGNlcHRpb24nIH0sXG4gICAgICAgICAgICBvdXRwdXRJbmZvLFxuICAgICAgICB9O1xuICAgIH0sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVUb29sSW5wdXRHdWFyZHJhaWxzKGd1YXJkcmFpbHMpIHtcbiAgICBpZiAoIWd1YXJkcmFpbHMpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICByZXR1cm4gZ3VhcmRyYWlscy5tYXAoKGdyKSA9PiAndHlwZScgaW4gZ3IgJiYgZ3IudHlwZSA9PT0gJ3Rvb2xfaW5wdXQnXG4gICAgICAgID8gZ3JcbiAgICAgICAgOiBkZWZpbmVUb29sSW5wdXRHdWFyZHJhaWwoZ3IpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlVG9vbE91dHB1dEd1YXJkcmFpbHMoZ3VhcmRyYWlscykge1xuICAgIGlmICghZ3VhcmRyYWlscykge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHJldHVybiBndWFyZHJhaWxzLm1hcCgoZ3IpID0+ICd0eXBlJyBpbiBnciAmJiBnci50eXBlID09PSAndG9vbF9vdXRwdXQnXG4gICAgICAgID8gZ3JcbiAgICAgICAgOiBkZWZpbmVUb29sT3V0cHV0R3VhcmRyYWlsKGdyKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29sR3VhcmRyYWlsLm1qcy5tYXAiLCJpbXBvcnQgeyBzYWZlRXhlY3V0ZSB9IGZyb20gXCIuL3V0aWxzL3NhZmVFeGVjdXRlLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCB9IGZyb20gXCIuL3V0aWxzL3R5cGVHdWFyZHMubWpzXCI7XG5pbXBvcnQgeyBJbnZhbGlkVG9vbElucHV0RXJyb3IsIFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgcmVzb2x2ZVRvb2xJbnB1dEd1YXJkcmFpbHMsIHJlc29sdmVUb29sT3V0cHV0R3VhcmRyYWlscywgfSBmcm9tIFwiLi90b29sR3VhcmRyYWlsLm1qc1wiO1xuZnVuY3Rpb24gaXNDb21wdXRlclByb3ZpZGVyKGNhbmRpZGF0ZSkge1xuICAgIHJldHVybiAoISFjYW5kaWRhdGUgJiZcbiAgICAgICAgdHlwZW9mIGNhbmRpZGF0ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdHlwZW9mIGNhbmRpZGF0ZS5jcmVhdGUgPT09ICdmdW5jdGlvbicpO1xufVxuLyoqXG4gKiBFeHBvc2VzIGEgY29tcHV0ZXIgdG8gdGhlIGFnZW50IGFzIGEgdG9vbCB0byBiZSBjYWxsZWQuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBjb25maWd1cmF0aW9uIGZvciB0aGUgY29tcHV0ZXIgdG9vbCBsaWtlIHNwZWNpZnlpbmcgdGhlIGxvY2F0aW9uIG9mIHlvdXIgYWdlbnRcbiAqIEByZXR1cm5zIGEgY29tcHV0ZXIgdG9vbCBkZWZpbml0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlclRvb2wob3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucy5jb21wdXRlcikge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdjb21wdXRlclRvb2wgcmVxdWlyZXMgYSBjb21wdXRlciBpbnN0YW5jZSBvciBhbiBpbml0aWFsaXplciBmdW5jdGlvbi4nKTtcbiAgICB9XG4gICAgY29uc3QgdG9vbCA9IHtcbiAgICAgICAgdHlwZTogJ2NvbXB1dGVyJyxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lID8/ICdjb21wdXRlcl91c2VfcHJldmlldycsXG4gICAgICAgIGNvbXB1dGVyOiBvcHRpb25zLmNvbXB1dGVyLFxuICAgIH07XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmNvbXB1dGVyID09PSAnZnVuY3Rpb24nIHx8XG4gICAgICAgIGlzQ29tcHV0ZXJQcm92aWRlcihvcHRpb25zLmNvbXB1dGVyKSkge1xuICAgICAgICBjb21wdXRlckluaXRpYWxpemVyTWFwLnNldCh0b29sLCBvcHRpb25zLmNvbXB1dGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHRvb2w7XG59XG4vLyBLZWVwcyBwZXItdG9vbCBjYWNoZSBvZiBjb21wdXRlciBpbnN0YW5jZXMga2V5ZWQgYnkgUnVuQ29udGV4dCBzbyBlYWNoIHJ1biBnZXRzIGl0cyBvd24gaW5zdGFuY2UuXG5jb25zdCBjb21wdXRlckNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbi8vIFRyYWNrcyB0aGUgaW5pdGlhbGl6ZXIgc28gd2UgZG8gbm90IG92ZXJ3cml0ZSB0aGUgY2FsbGFibGUgb24gdGhlIHRvb2wgd2hlbiB3ZSBtZW1vaXplIHRoZSByZXNvbHZlZCBpbnN0YW5jZS5cbmNvbnN0IGNvbXB1dGVySW5pdGlhbGl6ZXJNYXAgPSBuZXcgV2Vha01hcCgpO1xuLy8gQWxsb3dzIGNsZWFudXAgcm91dGluZXMgdG8gZmluZCBhbGwgcmVzb2x2ZWQgY29tcHV0ZXIgaW5zdGFuY2VzIGZvciBhIGdpdmVuIHJ1biBjb250ZXh0LlxuY29uc3QgY29tcHV0ZXJzQnlSdW5Db250ZXh0ID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIGdldENvbXB1dGVySW5pdGlhbGl6ZXIodG9vbCkge1xuICAgIGNvbnN0IGluaXRpYWxpemVyID0gY29tcHV0ZXJJbml0aWFsaXplck1hcC5nZXQodG9vbCk7XG4gICAgaWYgKGluaXRpYWxpemVyKSB7XG4gICAgICAgIHJldHVybiBpbml0aWFsaXplcjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0b29sLmNvbXB1dGVyID09PSAnZnVuY3Rpb24nIHx8XG4gICAgICAgIGlzQ29tcHV0ZXJQcm92aWRlcih0b29sLmNvbXB1dGVyKSkge1xuICAgICAgICByZXR1cm4gdG9vbC5jb21wdXRlcjtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIHRyYWNrUmVzb2x2ZWRDb21wdXRlcih0b29sLCBydW5Db250ZXh0LCByZXNvbHZlZCkge1xuICAgIGxldCByZXNvbHZlZEJ5UnVuID0gY29tcHV0ZXJzQnlSdW5Db250ZXh0LmdldChydW5Db250ZXh0KTtcbiAgICBpZiAoIXJlc29sdmVkQnlSdW4pIHtcbiAgICAgICAgcmVzb2x2ZWRCeVJ1biA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29tcHV0ZXJzQnlSdW5Db250ZXh0LnNldChydW5Db250ZXh0LCByZXNvbHZlZEJ5UnVuKTtcbiAgICB9XG4gICAgcmVzb2x2ZWRCeVJ1bi5zZXQodG9vbCwgcmVzb2x2ZWQpO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgY29tcHV0ZXIgaW5zdGFuY2UgZm9yIHRoZSBwcm92aWRlZCBydW4gY29udGV4dC4gQ2FjaGVzIHBlciBydW4gdG8gYXZvaWQgc2hhcmluZyBhY3Jvc3MgcnVucy5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZUNvbXB1dGVyKGFyZ3MpIHtcbiAgICBjb25zdCB7IHRvb2wsIHJ1bkNvbnRleHQgfSA9IGFyZ3M7XG4gICAgLy8gQ2FjaGUgaW5zdGFuY2VzIHBlciBSdW5Db250ZXh0IHNvIGEgc2luZ2xlIENvbXB1dGVyIGlzIG5vdCBzaGFyZWQgYWNyb3NzIHNpbXVsdGFuZW91cyBydW5zLlxuICAgIGNvbnN0IHRvb2xLZXkgPSB0b29sO1xuICAgIGxldCBwZXJDb250ZXh0ID0gY29tcHV0ZXJDYWNoZS5nZXQodG9vbEtleSk7XG4gICAgaWYgKCFwZXJDb250ZXh0KSB7XG4gICAgICAgIHBlckNvbnRleHQgPSBuZXcgV2Vha01hcCgpO1xuICAgICAgICBjb21wdXRlckNhY2hlLnNldCh0b29sS2V5LCBwZXJDb250ZXh0KTtcbiAgICB9XG4gICAgY29uc3QgY2FjaGVkID0gcGVyQ29udGV4dC5nZXQocnVuQ29udGV4dCk7XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgICB0cmFja1Jlc29sdmVkQ29tcHV0ZXIodG9vbCwgcnVuQ29udGV4dCwgY2FjaGVkKTtcbiAgICAgICAgcmV0dXJuIGNhY2hlZC5jb21wdXRlcjtcbiAgICB9XG4gICAgY29uc3QgaW5pdGlhbGl6ZXJDb25maWcgPSBnZXRDb21wdXRlckluaXRpYWxpemVyKHRvb2wpO1xuICAgIGNvbnN0IGxpZmVjeWNsZSA9IGluaXRpYWxpemVyQ29uZmlnICYmIGlzQ29tcHV0ZXJQcm92aWRlcihpbml0aWFsaXplckNvbmZpZylcbiAgICAgICAgPyBpbml0aWFsaXplckNvbmZpZ1xuICAgICAgICA6IGlzQ29tcHV0ZXJQcm92aWRlcih0b29sLmNvbXB1dGVyKVxuICAgICAgICAgICAgPyB0b29sLmNvbXB1dGVyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBpbml0aWFsaXplciA9IHR5cGVvZiBpbml0aWFsaXplckNvbmZpZyA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IGluaXRpYWxpemVyQ29uZmlnXG4gICAgICAgIDogKGxpZmVjeWNsZT8uY3JlYXRlID8/XG4gICAgICAgICAgICAodHlwZW9mIHRvb2wuY29tcHV0ZXIgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICA/IHRvb2wuY29tcHV0ZXJcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCkpO1xuICAgIGNvbnN0IGRpc3Bvc2VyID0gbGlmZWN5Y2xlPy5kaXNwb3NlO1xuICAgIGNvbnN0IGNvbXB1dGVyID0gaW5pdGlhbGl6ZXIgJiYgdHlwZW9mIGluaXRpYWxpemVyID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gYXdhaXQgaW5pdGlhbGl6ZXIoeyBydW5Db250ZXh0IH0pXG4gICAgICAgIDogdG9vbC5jb21wdXRlcjtcbiAgICBpZiAoIWNvbXB1dGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1RoZSBjb21wdXRlciB0b29sIGRpZCBub3QgcHJvdmlkZSBhIGNvbXB1dGVyIGluc3RhbmNlLicpO1xuICAgIH1cbiAgICBjb25zdCByZXNvbHZlZCA9IHtcbiAgICAgICAgY29tcHV0ZXIsXG4gICAgICAgIGRpc3Bvc2U6IGRpc3Bvc2VyLFxuICAgIH07XG4gICAgcGVyQ29udGV4dC5zZXQocnVuQ29udGV4dCwgcmVzb2x2ZWQpO1xuICAgIHRyYWNrUmVzb2x2ZWRDb21wdXRlcih0b29sLCBydW5Db250ZXh0LCByZXNvbHZlZCk7XG4gICAgdG9vbC5jb21wdXRlciA9IGNvbXB1dGVyO1xuICAgIHJldHVybiBjb21wdXRlcjtcbn1cbi8qKlxuICogRGlzcG9zZXMgYW55IGNvbXB1dGVyIGluc3RhbmNlcyBjcmVhdGVkIGZvciB0aGUgcHJvdmlkZWQgcnVuIGNvbnRleHQuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRpc3Bvc2VSZXNvbHZlZENvbXB1dGVycyh7IHJ1bkNvbnRleHQsIH0pIHtcbiAgICBjb25zdCByZXNvbHZlZEJ5UnVuID0gY29tcHV0ZXJzQnlSdW5Db250ZXh0LmdldChydW5Db250ZXh0KTtcbiAgICBpZiAoIXJlc29sdmVkQnlSdW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb21wdXRlcnNCeVJ1bkNvbnRleHQuZGVsZXRlKHJ1bkNvbnRleHQpO1xuICAgIGNvbnN0IGRpc3Bvc2VycyA9IFtdO1xuICAgIGZvciAoY29uc3QgW3Rvb2wsIHJlc29sdmVkXSBvZiByZXNvbHZlZEJ5UnVuLmVudHJpZXMoKSkge1xuICAgICAgICBjb25zdCBwZXJDb250ZXh0ID0gY29tcHV0ZXJDYWNoZS5nZXQodG9vbCk7XG4gICAgICAgIHBlckNvbnRleHQ/LmRlbGV0ZShydW5Db250ZXh0KTtcbiAgICAgICAgY29uc3Qgc3RvcmVkSW5pdGlhbGl6ZXIgPSBnZXRDb21wdXRlckluaXRpYWxpemVyKHRvb2wpO1xuICAgICAgICBpZiAoc3RvcmVkSW5pdGlhbGl6ZXIpIHtcbiAgICAgICAgICAgIHRvb2wuY29tcHV0ZXIgPSBzdG9yZWRJbml0aWFsaXplcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzb2x2ZWQuZGlzcG9zZSkge1xuICAgICAgICAgICAgZGlzcG9zZXJzLnB1c2goYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHJlc29sdmVkLmRpc3Bvc2U/Lih7IHJ1bkNvbnRleHQsIGNvbXB1dGVyOiByZXNvbHZlZC5jb21wdXRlciB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgZGlzcG9zZSBvZiBkaXNwb3NlcnMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBGYWlsZWQgdG8gZGlzcG9zZSBjb21wdXRlciBmb3IgcnVuIGNvbnRleHQ6ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2hlbGxUb29sKG9wdGlvbnMpIHtcbiAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICA6IGFzeW5jICgpID0+IHR5cGVvZiBvcHRpb25zLm5lZWRzQXBwcm92YWwgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgPyBvcHRpb25zLm5lZWRzQXBwcm92YWxcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3NoZWxsJyxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lID8/ICdzaGVsbCcsXG4gICAgICAgIHNoZWxsOiBvcHRpb25zLnNoZWxsLFxuICAgICAgICBuZWVkc0FwcHJvdmFsLFxuICAgICAgICBvbkFwcHJvdmFsOiBvcHRpb25zLm9uQXBwcm92YWwsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVBhdGNoVG9vbChvcHRpb25zKSB7XG4gICAgY29uc3QgbmVlZHNBcHByb3ZhbCA9IHR5cGVvZiBvcHRpb25zLm5lZWRzQXBwcm92YWwgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBvcHRpb25zLm5lZWRzQXBwcm92YWxcbiAgICAgICAgOiBhc3luYyAoKSA9PiB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnYm9vbGVhbidcbiAgICAgICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdhcHBseV9wYXRjaCcsXG4gICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSA/PyAnYXBwbHlfcGF0Y2gnLFxuICAgICAgICBlZGl0b3I6IG9wdGlvbnMuZWRpdG9yLFxuICAgICAgICBuZWVkc0FwcHJvdmFsLFxuICAgICAgICBvbkFwcHJvdmFsOiBvcHRpb25zLm9uQXBwcm92YWwsXG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGhvc3RlZCBNQ1AgdG9vbCBkZWZpbml0aW9uLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gQ29uZmlndXJhdGlvbiBmb3IgdGhlIGhvc3RlZCBNQ1AgdG9vbCwgaW5jbHVkaW5nIHNlcnZlciBjb25uZWN0aW9uIGRldGFpbHNcbiAqIGFuZCBhcHByb3ZhbCByZXF1aXJlbWVudHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBob3N0ZWRNY3BUb29sKG9wdGlvbnMpIHtcbiAgICBpZiAoJ3NlcnZlclVybCcgaW4gb3B0aW9ucykge1xuICAgICAgICAvLyB0aGUgTUNQIHNlcnZlcnMgY29tYXB0aWJsZSB3aXRoIHRoZSBzcGVjaWZpY2F0aW9uXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnbmV2ZXInXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgc2VydmVyX3VybDogb3B0aW9ucy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogb3B0aW9ucy5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6ICduZXZlcicsXG4gICAgICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIob3B0aW9ucy5hbGxvd2VkVG9vbHMpLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfdXJsOiBvcHRpb25zLnNlcnZlclVybCxcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiBvcHRpb25zLmF1dGhvcml6YXRpb24sXG4gICAgICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIob3B0aW9ucy5hbGxvd2VkVG9vbHMpLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiB0eXBlb2Ygb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICAgID8gJ2Fsd2F5cydcbiAgICAgICAgICAgICAgICAgICAgOiBidWlsZFJlcXVpcmVBcHByb3ZhbChvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCksXG4gICAgICAgICAgICAgICAgb25fYXBwcm92YWw6IG9wdGlvbnMub25BcHByb3ZhbCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2wnLFxuICAgICAgICAgICAgbmFtZTogJ2hvc3RlZF9tY3AnLFxuICAgICAgICAgICAgcHJvdmlkZXJEYXRhLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmICgnY29ubmVjdG9ySWQnIGluIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gT3BlbkFJJ3MgY29ubmVjdG9yc1xuICAgICAgICBjb25zdCBwcm92aWRlckRhdGEgPSB0eXBlb2Ygb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ25ldmVyJ1xuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgIGNvbm5lY3Rvcl9pZDogb3B0aW9ucy5jb25uZWN0b3JJZCxcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiBvcHRpb25zLmF1dGhvcml6YXRpb24sXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogJ25ldmVyJyxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgIGNvbm5lY3Rvcl9pZDogb3B0aW9ucy5jb25uZWN0b3JJZCxcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiBvcHRpb25zLmF1dGhvcml6YXRpb24sXG4gICAgICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIob3B0aW9ucy5hbGxvd2VkVG9vbHMpLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiB0eXBlb2Ygb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICAgID8gJ2Fsd2F5cydcbiAgICAgICAgICAgICAgICAgICAgOiBidWlsZFJlcXVpcmVBcHByb3ZhbChvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCksXG4gICAgICAgICAgICAgICAgb25fYXBwcm92YWw6IG9wdGlvbnMub25BcHByb3ZhbCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2wnLFxuICAgICAgICAgICAgbmFtZTogJ2hvc3RlZF9tY3AnLFxuICAgICAgICAgICAgcHJvdmlkZXJEYXRhLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gdGhlIE1DUCBzZXJ2ZXJzIGNvbWFwdGlibGUgd2l0aCB0aGUgc3BlY2lmaWNhdGlvblxuICAgICAgICBjb25zdCBwcm92aWRlckRhdGEgPSB0eXBlb2Ygb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ25ldmVyJ1xuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6ICduZXZlcicsXG4gICAgICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIob3B0aW9ucy5hbGxvd2VkVG9vbHMpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiB0eXBlb2Ygb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICAgID8gJ2Fsd2F5cydcbiAgICAgICAgICAgICAgICAgICAgOiBidWlsZFJlcXVpcmVBcHByb3ZhbChvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCksXG4gICAgICAgICAgICAgICAgb25fYXBwcm92YWw6IG9wdGlvbnMub25BcHByb3ZhbCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2wnLFxuICAgICAgICAgICAgbmFtZTogJ2hvc3RlZF9tY3AnLFxuICAgICAgICAgICAgcHJvdmlkZXJEYXRhLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8qKlxuICogVGhlIGRlZmF1bHQgZnVuY3Rpb24gdG8gaW52b2tlIHdoZW4gYW4gZXJyb3Igb2NjdXJzIHdoaWxlIHJ1bm5pbmcgdGhlIHRvb2wuXG4gKlxuICogQWx3YXlzIHJldHVybnMgYEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJ1bm5pbmcgdGhlIHRvb2wuIFBsZWFzZSB0cnkgYWdhaW4uIEVycm9yOiA8ZXJyb3IgZGV0YWlscz5gXG4gKlxuICogQHBhcmFtIGNvbnRleHQgQW4gaW5zdGFuY2Ugb2YgdGhlIGN1cnJlbnQgUnVuQ29udGV4dFxuICogQHBhcmFtIGVycm9yIFRoZSBlcnJvciB0aGF0IG9jY3VycmVkXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRUb29sRXJyb3JGdW5jdGlvbihjb250ZXh0LCBlcnJvcikge1xuICAgIGNvbnN0IGRldGFpbHMgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IudG9TdHJpbmcoKSA6IFN0cmluZyhlcnJvcik7XG4gICAgcmV0dXJuIGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBydW5uaW5nIHRoZSB0b29sLiBQbGVhc2UgdHJ5IGFnYWluLiBFcnJvcjogJHtkZXRhaWxzfWA7XG59XG4vKipcbiAqIEV4cG9zZXMgYSBmdW5jdGlvbiB0byB0aGUgYWdlbnQgYXMgYSB0b29sIHRvIGJlIGNhbGxlZFxuICpcbiAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zIGZvciB0aGUgdG9vbFxuICogQHJldHVybnMgQSBuZXcgdG9vbFxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9vbChvcHRpb25zKSB7XG4gICAgY29uc3QgbmFtZSA9IG9wdGlvbnMubmFtZVxuICAgICAgICA/IHRvRnVuY3Rpb25Ub29sTmFtZShvcHRpb25zLm5hbWUpXG4gICAgICAgIDogdG9GdW5jdGlvblRvb2xOYW1lKG9wdGlvbnMuZXhlY3V0ZS5uYW1lKTtcbiAgICBjb25zdCB0b29sRXJyb3JGdW5jdGlvbiA9IHR5cGVvZiBvcHRpb25zLmVycm9yRnVuY3Rpb24gPT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gZGVmYXVsdFRvb2xFcnJvckZ1bmN0aW9uXG4gICAgICAgIDogb3B0aW9ucy5lcnJvckZ1bmN0aW9uO1xuICAgIGlmICghbmFtZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rvb2wgbmFtZSBjYW5ub3QgYmUgZW1wdHkuIEVpdGhlciBuYW1lIHlvdXIgZnVuY3Rpb24gb3IgcHJvdmlkZSBhIG5hbWUgaW4gdGhlIG9wdGlvbnMuJyk7XG4gICAgfVxuICAgIGNvbnN0IHN0cmljdE1vZGUgPSBvcHRpb25zLnN0cmljdCA/PyB0cnVlO1xuICAgIGlmICghc3RyaWN0TW9kZSAmJiBpc1pvZE9iamVjdChvcHRpb25zLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1N0cmljdCBtb2RlIGlzIHJlcXVpcmVkIGZvciBab2QgcGFyYW1ldGVycycpO1xuICAgIH1cbiAgICBjb25zdCB7IHBhcnNlciwgc2NoZW1hOiBwYXJhbWV0ZXJzIH0gPSBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKG9wdGlvbnMucGFyYW1ldGVycywgbmFtZSk7XG4gICAgYXN5bmMgZnVuY3Rpb24gX2ludm9rZShydW5Db250ZXh0LCBpbnB1dCwgZGV0YWlscykge1xuICAgICAgICBjb25zdCBbZXJyb3IsIHBhcnNlZF0gPSBhd2FpdCBzYWZlRXhlY3V0ZSgoKSA9PiBwYXJzZXIoaW5wdXQpKTtcbiAgICAgICAgaWYgKGVycm9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAobG9nZ2VyLmRvbnRMb2dUb29sRGF0YSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgSW52YWxpZCBKU09OIGlucHV0IGZvciB0b29sICR7bmFtZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgSW52YWxpZCBKU09OIGlucHV0IGZvciB0b29sICR7bmFtZX06ICR7aW5wdXR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBzdXBwbHkgdGhlIHNhbWUgY29udGV4dCBhcyBvcHRpb25zLmV4ZWN1dGUgZm9yIGNvbnN1bWluZ1xuICAgICAgICAgICAgLy8gZG93bnN0cmVhbSBjb2RlIHRvIGltcGxlbWVudCBzZWxmLWhlYWxpbmcgYW5kL29yIHRyYWNpbmdcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkVG9vbElucHV0RXJyb3IoJ0ludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCcsIHVuZGVmaW5lZCwgLy8gbm8gUnVuU3RhdGUgYXZhaWxhYmxlIGluIHRoaXMgY29udGV4dFxuICAgICAgICAgICAgZXJyb3IsIHsgcnVuQ29udGV4dCwgaW5wdXQsIGRldGFpbHMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgSW52b2tpbmcgdG9vbCAke25hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludm9raW5nIHRvb2wgJHtuYW1lfSB3aXRoIGlucHV0ICR7aW5wdXR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3B0aW9ucy5leGVjdXRlKHBhcnNlZCwgcnVuQ29udGV4dCwgZGV0YWlscyk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcocmVzdWx0KTtcbiAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgVG9vbCAke25hbWV9IGNvbXBsZXRlZGApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBUb29sICR7bmFtZX0gcmV0dXJuZWQ6ICR7c3RyaW5nUmVzdWx0fWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIGludm9rZShydW5Db250ZXh0LCBpbnB1dCwgZGV0YWlscykge1xuICAgICAgICByZXR1cm4gX2ludm9rZShydW5Db250ZXh0LCBpbnB1dCwgZGV0YWlscykuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAodG9vbEVycm9yRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFNwYW4/LnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHJ1bm5pbmcgdG9vbCAobm9uLWZhdGFsKScsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0b29sRXJyb3JGdW5jdGlvbihydW5Db250ZXh0LCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICBjb25zdCBpc0VuYWJsZWQgPSB0eXBlb2Ygb3B0aW9ucy5pc0VuYWJsZWQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBhc3luYyAocnVuQ29udGV4dCwgYWdlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByZWRpY2F0ZSA9IG9wdGlvbnMuaXNFbmFibGVkO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJlZGljYXRlKHsgcnVuQ29udGV4dCwgYWdlbnQgfSk7XG4gICAgICAgICAgICByZXR1cm4gQm9vbGVhbihyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMuaXNFbmFibGVkID09PSAnYm9vbGVhbicgPyBvcHRpb25zLmlzRW5hYmxlZCA6IHRydWU7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24sXG4gICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgIHN0cmljdDogc3RyaWN0TW9kZSxcbiAgICAgICAgaW52b2tlLFxuICAgICAgICBuZWVkc0FwcHJvdmFsLFxuICAgICAgICBpc0VuYWJsZWQsXG4gICAgICAgIGlucHV0R3VhcmRyYWlsczogcmVzb2x2ZVRvb2xJbnB1dEd1YXJkcmFpbHMob3B0aW9ucy5pbnB1dEd1YXJkcmFpbHMpLFxuICAgICAgICBvdXRwdXRHdWFyZHJhaWxzOiByZXNvbHZlVG9vbE91dHB1dEd1YXJkcmFpbHMob3B0aW9ucy5vdXRwdXRHdWFyZHJhaWxzKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gYnVpbGRSZXF1aXJlQXBwcm92YWwocmVxdWlyZUFwcHJvdmFsKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgaWYgKHJlcXVpcmVBcHByb3ZhbC5hbHdheXMpIHtcbiAgICAgICAgcmVzdWx0LmFsd2F5cyA9IHsgdG9vbF9uYW1lczogcmVxdWlyZUFwcHJvdmFsLmFsd2F5cy50b29sTmFtZXMgfTtcbiAgICB9XG4gICAgaWYgKHJlcXVpcmVBcHByb3ZhbC5uZXZlcikge1xuICAgICAgICByZXN1bHQubmV2ZXIgPSB7IHRvb2xfbmFtZXM6IHJlcXVpcmVBcHByb3ZhbC5uZXZlci50b29sTmFtZXMgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKGFsbG93ZWRUb29scykge1xuICAgIGlmICh0eXBlb2YgYWxsb3dlZFRvb2xzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhbGxvd2VkVG9vbHMpKSB7XG4gICAgICAgIHJldHVybiB7IHRvb2xfbmFtZXM6IGFsbG93ZWRUb29scyB9O1xuICAgIH1cbiAgICByZXR1cm4geyB0b29sX25hbWVzOiBhbGxvd2VkVG9vbHM/LnRvb2xOYW1lcyA/PyBbXSB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9vbC5tanMubWFwIiwiLyoqIEEgc3BlY2lhbCBjb25zdGFudCB3aXRoIHR5cGUgYG5ldmVyYCAqL1xuZXhwb3J0IGNvbnN0IE5FVkVSID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgc3RhdHVzOiBcImFib3J0ZWRcIixcbn0pO1xuZXhwb3J0IC8qQF9fTk9fU0lERV9FRkZFQ1RTX18qLyBmdW5jdGlvbiAkY29uc3RydWN0b3IobmFtZSwgaW5pdGlhbGl6ZXIsIHBhcmFtcykge1xuICAgIGZ1bmN0aW9uIGluaXQoaW5zdCwgZGVmKSB7XG4gICAgICAgIGlmICghaW5zdC5fem9kKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zdCwgXCJfem9kXCIsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICBkZWYsXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0cjogXyxcbiAgICAgICAgICAgICAgICAgICAgdHJhaXRzOiBuZXcgU2V0KCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnN0Ll96b2QudHJhaXRzLmhhcyhuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGluc3QuX3pvZC50cmFpdHMuYWRkKG5hbWUpO1xuICAgICAgICBpbml0aWFsaXplcihpbnN0LCBkZWYpO1xuICAgICAgICAvLyBzdXBwb3J0IHByb3RvdHlwZSBtb2RpZmljYXRpb25zXG4gICAgICAgIGNvbnN0IHByb3RvID0gXy5wcm90b3R5cGU7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwcm90byk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgayA9IGtleXNbaV07XG4gICAgICAgICAgICBpZiAoIShrIGluIGluc3QpKSB7XG4gICAgICAgICAgICAgICAgaW5zdFtrXSA9IHByb3RvW2tdLmJpbmQoaW5zdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZG9lc24ndCB3b3JrIGlmIFBhcmVudCBoYXMgYSBjb25zdHJ1Y3RvciB3aXRoIGFyZ3VtZW50c1xuICAgIGNvbnN0IFBhcmVudCA9IHBhcmFtcz8uUGFyZW50ID8/IE9iamVjdDtcbiAgICBjbGFzcyBEZWZpbml0aW9uIGV4dGVuZHMgUGFyZW50IHtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERlZmluaXRpb24sIFwibmFtZVwiLCB7IHZhbHVlOiBuYW1lIH0pO1xuICAgIGZ1bmN0aW9uIF8oZGVmKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgaW5zdCA9IHBhcmFtcz8uUGFyZW50ID8gbmV3IERlZmluaXRpb24oKSA6IHRoaXM7XG4gICAgICAgIGluaXQoaW5zdCwgZGVmKTtcbiAgICAgICAgKF9hID0gaW5zdC5fem9kKS5kZWZlcnJlZCA/PyAoX2EuZGVmZXJyZWQgPSBbXSk7XG4gICAgICAgIGZvciAoY29uc3QgZm4gb2YgaW5zdC5fem9kLmRlZmVycmVkKSB7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnN0O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoXywgXCJpbml0XCIsIHsgdmFsdWU6IGluaXQgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF8sIFN5bWJvbC5oYXNJbnN0YW5jZSwge1xuICAgICAgICB2YWx1ZTogKGluc3QpID0+IHtcbiAgICAgICAgICAgIGlmIChwYXJhbXM/LlBhcmVudCAmJiBpbnN0IGluc3RhbmNlb2YgcGFyYW1zLlBhcmVudClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBpbnN0Py5fem9kPy50cmFpdHM/LmhhcyhuYW1lKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoXywgXCJuYW1lXCIsIHsgdmFsdWU6IG5hbWUgfSk7XG4gICAgcmV0dXJuIF87XG59XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gICBVVElMSVRJRVMgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmV4cG9ydCBjb25zdCAkYnJhbmQgPSBTeW1ib2woXCJ6b2RfYnJhbmRcIik7XG5leHBvcnQgY2xhc3MgJFpvZEFzeW5jRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKGBFbmNvdW50ZXJlZCBQcm9taXNlIGR1cmluZyBzeW5jaHJvbm91cyBwYXJzZS4gVXNlIC5wYXJzZUFzeW5jKCkgaW5zdGVhZC5gKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgJFpvZEVuY29kZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgc3VwZXIoYEVuY291bnRlcmVkIHVuaWRpcmVjdGlvbmFsIHRyYW5zZm9ybSBkdXJpbmcgZW5jb2RlOiAke25hbWV9YCk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiWm9kRW5jb2RlRXJyb3JcIjtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgZ2xvYmFsQ29uZmlnID0ge307XG5leHBvcnQgZnVuY3Rpb24gY29uZmlnKG5ld0NvbmZpZykge1xuICAgIGlmIChuZXdDb25maWcpXG4gICAgICAgIE9iamVjdC5hc3NpZ24oZ2xvYmFsQ29uZmlnLCBuZXdDb25maWcpO1xuICAgIHJldHVybiBnbG9iYWxDb25maWc7XG59XG4iLCIvLyBmdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRFcXVhbCh2YWwpIHtcbiAgICByZXR1cm4gdmFsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydE5vdEVxdWFsKHZhbCkge1xuICAgIHJldHVybiB2YWw7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0SXMoX2FyZykgeyB9XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoX3gpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHZhbHVlIGluIGV4aGF1c3RpdmUgY2hlY2tcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0KF8pIHsgfVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVudW1WYWx1ZXMoZW50cmllcykge1xuICAgIGNvbnN0IG51bWVyaWNWYWx1ZXMgPSBPYmplY3QudmFsdWVzKGVudHJpZXMpLmZpbHRlcigodikgPT4gdHlwZW9mIHYgPT09IFwibnVtYmVyXCIpO1xuICAgIGNvbnN0IHZhbHVlcyA9IE9iamVjdC5lbnRyaWVzKGVudHJpZXMpXG4gICAgICAgIC5maWx0ZXIoKFtrLCBfXSkgPT4gbnVtZXJpY1ZhbHVlcy5pbmRleE9mKCtrKSA9PT0gLTEpXG4gICAgICAgIC5tYXAoKFtfLCB2XSkgPT4gdik7XG4gICAgcmV0dXJuIHZhbHVlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBqb2luVmFsdWVzKGFycmF5LCBzZXBhcmF0b3IgPSBcInxcIikge1xuICAgIHJldHVybiBhcnJheS5tYXAoKHZhbCkgPT4gc3RyaW5naWZ5UHJpbWl0aXZlKHZhbCkpLmpvaW4oc2VwYXJhdG9yKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBqc29uU3RyaW5naWZ5UmVwbGFjZXIoXywgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJpZ2ludFwiKVxuICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5leHBvcnQgZnVuY3Rpb24gY2FjaGVkKGdldHRlcikge1xuICAgIGNvbnN0IHNldCA9IGZhbHNlO1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgICAgIGlmICghc2V0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBnZXR0ZXIoKTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhY2hlZCB2YWx1ZSBhbHJlYWR5IHNldFwiKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG51bGxpc2goaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjbGVhblJlZ2V4KHNvdXJjZSkge1xuICAgIGNvbnN0IHN0YXJ0ID0gc291cmNlLnN0YXJ0c1dpdGgoXCJeXCIpID8gMSA6IDA7XG4gICAgY29uc3QgZW5kID0gc291cmNlLmVuZHNXaXRoKFwiJFwiKSA/IHNvdXJjZS5sZW5ndGggLSAxIDogc291cmNlLmxlbmd0aDtcbiAgICByZXR1cm4gc291cmNlLnNsaWNlKHN0YXJ0LCBlbmQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb2F0U2FmZVJlbWFpbmRlcih2YWwsIHN0ZXApIHtcbiAgICBjb25zdCB2YWxEZWNDb3VudCA9ICh2YWwudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IHN0ZXBTdHJpbmcgPSBzdGVwLnRvU3RyaW5nKCk7XG4gICAgbGV0IHN0ZXBEZWNDb3VudCA9IChzdGVwU3RyaW5nLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgaWYgKHN0ZXBEZWNDb3VudCA9PT0gMCAmJiAvXFxkP2UtXFxkPy8udGVzdChzdGVwU3RyaW5nKSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IHN0ZXBTdHJpbmcubWF0Y2goL1xcZD9lLShcXGQ/KS8pO1xuICAgICAgICBpZiAobWF0Y2g/LlsxXSkge1xuICAgICAgICAgICAgc3RlcERlY0NvdW50ID0gTnVtYmVyLnBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBkZWNDb3VudCA9IHZhbERlY0NvdW50ID4gc3RlcERlY0NvdW50ID8gdmFsRGVjQ291bnQgOiBzdGVwRGVjQ291bnQ7XG4gICAgY29uc3QgdmFsSW50ID0gTnVtYmVyLnBhcnNlSW50KHZhbC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgY29uc3Qgc3RlcEludCA9IE51bWJlci5wYXJzZUludChzdGVwLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICByZXR1cm4gKHZhbEludCAlIHN0ZXBJbnQpIC8gMTAgKiogZGVjQ291bnQ7XG59XG5jb25zdCBFVkFMVUFUSU5HID0gU3ltYm9sKFwiZXZhbHVhdGluZ1wiKTtcbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVMYXp5KG9iamVjdCwga2V5LCBnZXR0ZXIpIHtcbiAgICBsZXQgdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwga2V5LCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gRVZBTFVBVElORykge1xuICAgICAgICAgICAgICAgIC8vIENpcmN1bGFyIHJlZmVyZW5jZSBkZXRlY3RlZCwgcmV0dXJuIHVuZGVmaW5lZCB0byBicmVhayB0aGUgY3ljbGVcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IEVWQUxVQVRJTkc7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBnZXR0ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KHYpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIGtleSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2LFxuICAgICAgICAgICAgICAgIC8vIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gb2JqZWN0W2tleV0gPSB2O1xuICAgICAgICB9LFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gb2JqZWN0Q2xvbmUob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaiksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG9iaikpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnblByb3AodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3AsIHtcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VEZWZzKC4uLmRlZnMpIHtcbiAgICBjb25zdCBtZXJnZWREZXNjcmlwdG9ycyA9IHt9O1xuICAgIGZvciAoY29uc3QgZGVmIG9mIGRlZnMpIHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvcnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhkZWYpO1xuICAgICAgICBPYmplY3QuYXNzaWduKG1lcmdlZERlc2NyaXB0b3JzLCBkZXNjcmlwdG9ycyk7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7fSwgbWVyZ2VkRGVzY3JpcHRvcnMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lRGVmKHNjaGVtYSkge1xuICAgIHJldHVybiBtZXJnZURlZnMoc2NoZW1hLl96b2QuZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50QXRQYXRoKG9iaiwgcGF0aCkge1xuICAgIGlmICghcGF0aClcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICByZXR1cm4gcGF0aC5yZWR1Y2UoKGFjYywga2V5KSA9PiBhY2M/LltrZXldLCBvYmopO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHByb21pc2VBbGxPYmplY3QocHJvbWlzZXNPYmopIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocHJvbWlzZXNPYmopO1xuICAgIGNvbnN0IHByb21pc2VzID0ga2V5cy5tYXAoKGtleSkgPT4gcHJvbWlzZXNPYmpba2V5XSk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkT2JqID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmVzb2x2ZWRPYmpba2V5c1tpXV0gPSByZXN1bHRzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvbHZlZE9iajtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21TdHJpbmcobGVuZ3RoID0gMTApIHtcbiAgICBjb25zdCBjaGFycyA9IFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIjtcbiAgICBsZXQgc3RyID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHN0ciArPSBjaGFyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpXTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlc2Moc3RyKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHN0cik7XG59XG5leHBvcnQgZnVuY3Rpb24gc2x1Z2lmeShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dFxuICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAudHJpbSgpXG4gICAgICAgIC5yZXBsYWNlKC9bXlxcd1xccy1dL2csIFwiXCIpXG4gICAgICAgIC5yZXBsYWNlKC9bXFxzXy1dKy9nLCBcIi1cIilcbiAgICAgICAgLnJlcGxhY2UoL14tK3wtKyQvZywgXCJcIik7XG59XG5leHBvcnQgY29uc3QgY2FwdHVyZVN0YWNrVHJhY2UgPSAoXCJjYXB0dXJlU3RhY2tUcmFjZVwiIGluIEVycm9yID8gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgOiAoLi4uX2FyZ3MpID0+IHsgfSk7XG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoZGF0YSkge1xuICAgIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiBkYXRhICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KGRhdGEpO1xufVxuZXhwb3J0IGNvbnN0IGFsbG93c0V2YWwgPSBjYWNoZWQoKCkgPT4ge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuYXZpZ2F0b3I/LnVzZXJBZ2VudD8uaW5jbHVkZXMoXCJDbG91ZGZsYXJlXCIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgRiA9IEZ1bmN0aW9uO1xuICAgICAgICBuZXcgRihcIlwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChfKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG8pIHtcbiAgICBpZiAoaXNPYmplY3QobykgPT09IGZhbHNlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gbW9kaWZpZWQgY29uc3RydWN0b3JcbiAgICBjb25zdCBjdG9yID0gby5jb25zdHJ1Y3RvcjtcbiAgICBpZiAoY3RvciA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAodHlwZW9mIGN0b3IgIT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgLy8gbW9kaWZpZWQgcHJvdG90eXBlXG4gICAgY29uc3QgcHJvdCA9IGN0b3IucHJvdG90eXBlO1xuICAgIGlmIChpc09iamVjdChwcm90KSA9PT0gZmFsc2UpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBjdG9yIGRvZXNuJ3QgaGF2ZSBzdGF0aWMgYGlzUHJvdG90eXBlT2ZgXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm90LCBcImlzUHJvdG90eXBlT2ZcIikgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gc2hhbGxvd0Nsb25lKG8pIHtcbiAgICBpZiAoaXNQbGFpbk9iamVjdChvKSlcbiAgICAgICAgcmV0dXJuIHsgLi4ubyB9O1xuICAgIGlmIChBcnJheS5pc0FycmF5KG8pKVxuICAgICAgICByZXR1cm4gWy4uLm9dO1xuICAgIHJldHVybiBvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG51bUtleXMoZGF0YSkge1xuICAgIGxldCBrZXlDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSkpIHtcbiAgICAgICAgICAgIGtleUNvdW50Kys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleUNvdW50O1xufVxuZXhwb3J0IGNvbnN0IGdldFBhcnNlZFR5cGUgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCI7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gXCJuYW5cIiA6IFwibnVtYmVyXCI7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJib29sZWFuXCI7XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiZnVuY3Rpb25cIjtcbiAgICAgICAgY2FzZSBcImJpZ2ludFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYmlnaW50XCI7XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgIHJldHVybiBcInN5bWJvbFwiO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImFycmF5XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIm51bGxcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRoZW4gJiYgdHlwZW9mIGRhdGEudGhlbiA9PT0gXCJmdW5jdGlvblwiICYmIGRhdGEuY2F0Y2ggJiYgdHlwZW9mIGRhdGEuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInByb21pc2VcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJtYXBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgU2V0ICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzZXRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImRhdGVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGlmICh0eXBlb2YgRmlsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImZpbGVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIm9iamVjdFwiO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGRhdGEgdHlwZTogJHt0fWApO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgcHJvcGVydHlLZXlUeXBlcyA9IG5ldyBTZXQoW1wic3RyaW5nXCIsIFwibnVtYmVyXCIsIFwic3ltYm9sXCJdKTtcbmV4cG9ydCBjb25zdCBwcmltaXRpdmVUeXBlcyA9IG5ldyBTZXQoW1wic3RyaW5nXCIsIFwibnVtYmVyXCIsIFwiYmlnaW50XCIsIFwiYm9vbGVhblwiLCBcInN5bWJvbFwiLCBcInVuZGVmaW5lZFwiXSk7XG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG59XG4vLyB6b2Qtc3BlY2lmaWMgdXRpbHNcbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShpbnN0LCBkZWYsIHBhcmFtcykge1xuICAgIGNvbnN0IGNsID0gbmV3IGluc3QuX3pvZC5jb25zdHIoZGVmID8/IGluc3QuX3pvZC5kZWYpO1xuICAgIGlmICghZGVmIHx8IHBhcmFtcz8ucGFyZW50KVxuICAgICAgICBjbC5fem9kLnBhcmVudCA9IGluc3Q7XG4gICAgcmV0dXJuIGNsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVBhcmFtcyhfcGFyYW1zKSB7XG4gICAgY29uc3QgcGFyYW1zID0gX3BhcmFtcztcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGlmICh0eXBlb2YgcGFyYW1zID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4geyBlcnJvcjogKCkgPT4gcGFyYW1zIH07XG4gICAgaWYgKHBhcmFtcz8ubWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChwYXJhbXM/LmVycm9yICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc3BlY2lmeSBib3RoIGBtZXNzYWdlYCBhbmQgYGVycm9yYCBwYXJhbXNcIik7XG4gICAgICAgIHBhcmFtcy5lcnJvciA9IHBhcmFtcy5tZXNzYWdlO1xuICAgIH1cbiAgICBkZWxldGUgcGFyYW1zLm1lc3NhZ2U7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMuZXJyb3IgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiB7IC4uLnBhcmFtcywgZXJyb3I6ICgpID0+IHBhcmFtcy5lcnJvciB9O1xuICAgIHJldHVybiBwYXJhbXM7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhbnNwYXJlbnRQcm94eShnZXR0ZXIpIHtcbiAgICBsZXQgdGFyZ2V0O1xuICAgIHJldHVybiBuZXcgUHJveHkoe30sIHtcbiAgICAgICAgZ2V0KF8sIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KF8sIHByb3AsIHZhbHVlLCByZWNlaXZlcikge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5zZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpO1xuICAgICAgICB9LFxuICAgICAgICBoYXMoXywgcHJvcCkge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5oYXModGFyZ2V0LCBwcm9wKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVsZXRlUHJvcGVydHkoXywgcHJvcCkge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3ApO1xuICAgICAgICB9LFxuICAgICAgICBvd25LZXlzKF8pIHtcbiAgICAgICAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoXywgcHJvcCkge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVmaW5lUHJvcGVydHkoXywgcHJvcCwgZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3AsIGRlc2NyaXB0b3IpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeVByaW1pdGl2ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpICsgXCJuXCI7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIGBcIiR7dmFsdWV9XCJgO1xuICAgIHJldHVybiBgJHt2YWx1ZX1gO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG9wdGlvbmFsS2V5cyhzaGFwZSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzaGFwZSkuZmlsdGVyKChrKSA9PiB7XG4gICAgICAgIHJldHVybiBzaGFwZVtrXS5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIgJiYgc2hhcGVba10uX3pvZC5vcHRvdXQgPT09IFwib3B0aW9uYWxcIjtcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBOVU1CRVJfRk9STUFUX1JBTkdFUyA9IHtcbiAgICBzYWZlaW50OiBbTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXSxcbiAgICBpbnQzMjogWy0yMTQ3NDgzNjQ4LCAyMTQ3NDgzNjQ3XSxcbiAgICB1aW50MzI6IFswLCA0Mjk0OTY3Mjk1XSxcbiAgICBmbG9hdDMyOiBbLTMuNDAyODIzNDY2Mzg1Mjg4NmUzOCwgMy40MDI4MjM0NjYzODUyODg2ZTM4XSxcbiAgICBmbG9hdDY0OiBbLU51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUVdLFxufTtcbmV4cG9ydCBjb25zdCBCSUdJTlRfRk9STUFUX1JBTkdFUyA9IHtcbiAgICBpbnQ2NDogWy8qIEBfX1BVUkVfXyovIEJpZ0ludChcIi05MjIzMzcyMDM2ODU0Nzc1ODA4XCIpLCAvKiBAX19QVVJFX18qLyBCaWdJbnQoXCI5MjIzMzcyMDM2ODU0Nzc1ODA3XCIpXSxcbiAgICB1aW50NjQ6IFsvKiBAX19QVVJFX18qLyBCaWdJbnQoMCksIC8qIEBfX1BVUkVfXyovIEJpZ0ludChcIjE4NDQ2NzQ0MDczNzA5NTUxNjE1XCIpXSxcbn07XG5leHBvcnQgZnVuY3Rpb24gcGljayhzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBjdXJyRGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIGNvbnN0IGNoZWNrcyA9IGN1cnJEZWYuY2hlY2tzO1xuICAgIGNvbnN0IGhhc0NoZWNrcyA9IGNoZWNrcyAmJiBjaGVja3MubGVuZ3RoID4gMDtcbiAgICBpZiAoaGFzQ2hlY2tzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIi5waWNrKCkgY2Fubm90IGJlIHVzZWQgb24gb2JqZWN0IHNjaGVtYXMgY29udGFpbmluZyByZWZpbmVtZW50c1wiKTtcbiAgICB9XG4gICAgY29uc3QgZGVmID0gbWVyZ2VEZWZzKHNjaGVtYS5fem9kLmRlZiwge1xuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBjdXJyRGVmLnNoYXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXk6IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBjdXJyRGVmLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhc3NpZ25Qcm9wKHRoaXMsIFwic2hhcGVcIiwgbmV3U2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBuZXdTaGFwZTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICB9KTtcbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCBkZWYpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG9taXQoc2NoZW1hLCBtYXNrKSB7XG4gICAgY29uc3QgY3VyckRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBjb25zdCBjaGVja3MgPSBjdXJyRGVmLmNoZWNrcztcbiAgICBjb25zdCBoYXNDaGVja3MgPSBjaGVja3MgJiYgY2hlY2tzLmxlbmd0aCA+IDA7XG4gICAgaWYgKGhhc0NoZWNrcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIub21pdCgpIGNhbm5vdCBiZSB1c2VkIG9uIG9iamVjdCBzY2hlbWFzIGNvbnRhaW5pbmcgcmVmaW5lbWVudHNcIik7XG4gICAgfVxuICAgIGNvbnN0IGRlZiA9IG1lcmdlRGVmcyhzY2hlbWEuX3pvZC5kZWYsIHtcbiAgICAgICAgZ2V0IHNoYXBlKCkge1xuICAgICAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7IC4uLnNjaGVtYS5fem9kLmRlZi5zaGFwZSB9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBjdXJyRGVmLnNoYXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXk6IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdTaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXNzaWduUHJvcCh0aGlzLCBcInNoYXBlXCIsIG5ld1NoYXBlKTsgLy8gc2VsZi1jYWNoaW5nXG4gICAgICAgICAgICByZXR1cm4gbmV3U2hhcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwgZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQoc2NoZW1hLCBzaGFwZSkge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChzaGFwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbnB1dCB0byBleHRlbmQ6IGV4cGVjdGVkIGEgcGxhaW4gb2JqZWN0XCIpO1xuICAgIH1cbiAgICBjb25zdCBjaGVja3MgPSBzY2hlbWEuX3pvZC5kZWYuY2hlY2tzO1xuICAgIGNvbnN0IGhhc0NoZWNrcyA9IGNoZWNrcyAmJiBjaGVja3MubGVuZ3RoID4gMDtcbiAgICBpZiAoaGFzQ2hlY2tzKSB7XG4gICAgICAgIC8vIE9ubHkgdGhyb3cgaWYgbmV3IHNoYXBlIG92ZXJsYXBzIHdpdGggZXhpc3Rpbmcgc2hhcGVcbiAgICAgICAgLy8gVXNlIGdldE93blByb3BlcnR5RGVzY3JpcHRvciB0byBjaGVjayBrZXkgZXhpc3RlbmNlIHdpdGhvdXQgYWNjZXNzaW5nIHZhbHVlc1xuICAgICAgICBjb25zdCBleGlzdGluZ1NoYXBlID0gc2NoZW1hLl96b2QuZGVmLnNoYXBlO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzaGFwZSkge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZXhpc3RpbmdTaGFwZSwga2V5KSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IG92ZXJ3cml0ZSBrZXlzIG9uIG9iamVjdCBzY2hlbWFzIGNvbnRhaW5pbmcgcmVmaW5lbWVudHMuIFVzZSBgLnNhZmVFeHRlbmQoKWAgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZGVmID0gbWVyZ2VEZWZzKHNjaGVtYS5fem9kLmRlZiwge1xuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBfc2hhcGUgPSB7IC4uLnNjaGVtYS5fem9kLmRlZi5zaGFwZSwgLi4uc2hhcGUgfTtcbiAgICAgICAgICAgIGFzc2lnblByb3AodGhpcywgXCJzaGFwZVwiLCBfc2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBfc2hhcGU7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwgZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzYWZlRXh0ZW5kKHNjaGVtYSwgc2hhcGUpIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3Qoc2hhcGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgdG8gc2FmZUV4dGVuZDogZXhwZWN0ZWQgYSBwbGFpbiBvYmplY3RcIik7XG4gICAgfVxuICAgIGNvbnN0IGRlZiA9IG1lcmdlRGVmcyhzY2hlbWEuX3pvZC5kZWYsIHtcbiAgICAgICAgZ2V0IHNoYXBlKCkge1xuICAgICAgICAgICAgY29uc3QgX3NoYXBlID0geyAuLi5zY2hlbWEuX3pvZC5kZWYuc2hhcGUsIC4uLnNoYXBlIH07XG4gICAgICAgICAgICBhc3NpZ25Qcm9wKHRoaXMsIFwic2hhcGVcIiwgX3NoYXBlKTsgLy8gc2VsZi1jYWNoaW5nXG4gICAgICAgICAgICByZXR1cm4gX3NoYXBlO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIGRlZik7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2UoYSwgYikge1xuICAgIGNvbnN0IGRlZiA9IG1lcmdlRGVmcyhhLl96b2QuZGVmLCB7XG4gICAgICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IF9zaGFwZSA9IHsgLi4uYS5fem9kLmRlZi5zaGFwZSwgLi4uYi5fem9kLmRlZi5zaGFwZSB9O1xuICAgICAgICAgICAgYXNzaWduUHJvcCh0aGlzLCBcInNoYXBlXCIsIF9zaGFwZSk7IC8vIHNlbGYtY2FjaGluZ1xuICAgICAgICAgICAgcmV0dXJuIF9zaGFwZTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IGNhdGNoYWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGIuX3pvZC5kZWYuY2F0Y2hhbGw7XG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrczogW10sIC8vIGRlbGV0ZSBleGlzdGluZyBjaGVja3NcbiAgICB9KTtcbiAgICByZXR1cm4gY2xvbmUoYSwgZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aWFsKENsYXNzLCBzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBjdXJyRGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIGNvbnN0IGNoZWNrcyA9IGN1cnJEZWYuY2hlY2tzO1xuICAgIGNvbnN0IGhhc0NoZWNrcyA9IGNoZWNrcyAmJiBjaGVja3MubGVuZ3RoID4gMDtcbiAgICBpZiAoaGFzQ2hlY2tzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIi5wYXJ0aWFsKCkgY2Fubm90IGJlIHVzZWQgb24gb2JqZWN0IHNjaGVtYXMgY29udGFpbmluZyByZWZpbmVtZW50c1wiKTtcbiAgICB9XG4gICAgY29uc3QgZGVmID0gbWVyZ2VEZWZzKHNjaGVtYS5fem9kLmRlZiwge1xuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBvbGRTaGFwZSA9IHNjaGVtYS5fem9kLmRlZi5zaGFwZTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlID0geyAuLi5vbGRTaGFwZSB9O1xuICAgICAgICAgICAgaWYgKG1hc2spIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtYXNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBvbGRTaGFwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogXCIke2tleX1cImApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIChvbGRTaGFwZVtrZXldIS5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gQ2xhc3NcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogb2xkU2hhcGVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRTaGFwZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiAob2xkU2hhcGVba2V5XSEuX3pvZC5vcHRpbiA9PT0gXCJvcHRpb25hbFwiKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVba2V5XSA9IENsYXNzXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG5ldyBDbGFzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvcHRpb25hbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyVHlwZTogb2xkU2hhcGVba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG9sZFNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXNzaWduUHJvcCh0aGlzLCBcInNoYXBlXCIsIHNoYXBlKTsgLy8gc2VsZi1jYWNoaW5nXG4gICAgICAgICAgICByZXR1cm4gc2hhcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwgZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlZChDbGFzcywgc2NoZW1hLCBtYXNrKSB7XG4gICAgY29uc3QgZGVmID0gbWVyZ2VEZWZzKHNjaGVtYS5fem9kLmRlZiwge1xuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBvbGRTaGFwZSA9IHNjaGVtYS5fem9kLmRlZi5zaGFwZTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlID0geyAuLi5vbGRTaGFwZSB9O1xuICAgICAgICAgICAgaWYgKG1hc2spIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtYXNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBzaGFwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogXCIke2tleX1cImApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIG92ZXJ3cml0ZSB3aXRoIG5vbi1vcHRpb25hbFxuICAgICAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibm9ub3B0aW9uYWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyVHlwZTogb2xkU2hhcGVba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2xkU2hhcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gb3ZlcndyaXRlIHdpdGggbm9uLW9wdGlvbmFsXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJub25vcHRpb25hbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhc3NpZ25Qcm9wKHRoaXMsIFwic2hhcGVcIiwgc2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBzaGFwZTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCBkZWYpO1xufVxuLy8gaW52YWxpZF90eXBlIHwgdG9vX2JpZyB8IHRvb19zbWFsbCB8IGludmFsaWRfZm9ybWF0IHwgbm90X211bHRpcGxlX29mIHwgdW5yZWNvZ25pemVkX2tleXMgfCBpbnZhbGlkX3VuaW9uIHwgaW52YWxpZF9rZXkgfCBpbnZhbGlkX2VsZW1lbnQgfCBpbnZhbGlkX3ZhbHVlIHwgY3VzdG9tXG5leHBvcnQgZnVuY3Rpb24gYWJvcnRlZCh4LCBzdGFydEluZGV4ID0gMCkge1xuICAgIGlmICh4LmFib3J0ZWQgPT09IHRydWUpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4OyBpIDwgeC5pc3N1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHguaXNzdWVzW2ldPy5jb250aW51ZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHByZWZpeElzc3VlcyhwYXRoLCBpc3N1ZXMpIHtcbiAgICByZXR1cm4gaXNzdWVzLm1hcCgoaXNzKSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgKF9hID0gaXNzKS5wYXRoID8/IChfYS5wYXRoID0gW10pO1xuICAgICAgICBpc3MucGF0aC51bnNoaWZ0KHBhdGgpO1xuICAgICAgICByZXR1cm4gaXNzO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVud3JhcE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIHJldHVybiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IG1lc3NhZ2UgOiBtZXNzYWdlPy5tZXNzYWdlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvbmZpZykge1xuICAgIGNvbnN0IGZ1bGwgPSB7IC4uLmlzcywgcGF0aDogaXNzLnBhdGggPz8gW10gfTtcbiAgICAvLyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICBpZiAoIWlzcy5tZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB1bndyYXBNZXNzYWdlKGlzcy5pbnN0Py5fem9kLmRlZj8uZXJyb3I/Lihpc3MpKSA/P1xuICAgICAgICAgICAgdW53cmFwTWVzc2FnZShjdHg/LmVycm9yPy4oaXNzKSkgPz9cbiAgICAgICAgICAgIHVud3JhcE1lc3NhZ2UoY29uZmlnLmN1c3RvbUVycm9yPy4oaXNzKSkgPz9cbiAgICAgICAgICAgIHVud3JhcE1lc3NhZ2UoY29uZmlnLmxvY2FsZUVycm9yPy4oaXNzKSkgPz9cbiAgICAgICAgICAgIFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICBmdWxsLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIH1cbiAgICAvLyBkZWxldGUgKGZ1bGwgYXMgYW55KS5kZWY7XG4gICAgZGVsZXRlIGZ1bGwuaW5zdDtcbiAgICBkZWxldGUgZnVsbC5jb250aW51ZTtcbiAgICBpZiAoIWN0eD8ucmVwb3J0SW5wdXQpIHtcbiAgICAgICAgZGVsZXRlIGZ1bGwuaW5wdXQ7XG4gICAgfVxuICAgIHJldHVybiBmdWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFNpemFibGVPcmlnaW4oaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBTZXQpXG4gICAgICAgIHJldHVybiBcInNldFwiO1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIE1hcClcbiAgICAgICAgcmV0dXJuIFwibWFwXCI7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIEZpbGUpXG4gICAgICAgIHJldHVybiBcImZpbGVcIjtcbiAgICByZXR1cm4gXCJ1bmtub3duXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVuZ3RoYWJsZU9yaWdpbihpbnB1dCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSlcbiAgICAgICAgcmV0dXJuIFwiYXJyYXlcIjtcbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICByZXR1cm4gXCJ1bmtub3duXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VkVHlwZShkYXRhKSB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyBcIm5hblwiIDogXCJudW1iZXJcIjtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwib2JqZWN0XCI6IHtcbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibnVsbFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhcnJheVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb2JqID0gZGF0YTtcbiAgICAgICAgICAgIGlmIChvYmogJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgXCJjb25zdHJ1Y3RvclwiIGluIG9iaiAmJiBvYmouY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNzdWUoLi4uYXJncykge1xuICAgIGNvbnN0IFtpc3MsIGlucHV0LCBpbnN0XSA9IGFyZ3M7XG4gICAgaWYgKHR5cGVvZiBpc3MgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGlzcyxcbiAgICAgICAgICAgIGNvZGU6IFwiY3VzdG9tXCIsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IC4uLmlzcyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuRW51bShvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMob2JqKVxuICAgICAgICAuZmlsdGVyKChbaywgX10pID0+IHtcbiAgICAgICAgLy8gcmV0dXJuIHRydWUgaWYgTmFOLCBtZWFuaW5nIGl0J3Mgbm90IGEgbnVtYmVyLCB0aHVzIGEgc3RyaW5nIGtleVxuICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKE51bWJlci5wYXJzZUludChrLCAxMCkpO1xuICAgIH0pXG4gICAgICAgIC5tYXAoKGVsKSA9PiBlbFsxXSk7XG59XG4vLyBDb2RlYyB1dGlsaXR5IGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFRvVWludDhBcnJheShiYXNlNjQpIHtcbiAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBhdG9iKGJhc2U2NCk7XG4gICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShiaW5hcnlTdHJpbmcubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmFyeVN0cmluZy5sZW5ndGg7IGkrKykge1xuICAgICAgICBieXRlc1tpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gdWludDhBcnJheVRvQmFzZTY0KGJ5dGVzKSB7XG4gICAgbGV0IGJpbmFyeVN0cmluZyA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBiaW5hcnlTdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBidG9hKGJpbmFyeVN0cmluZyk7XG59XG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0dXJsVG9VaW50OEFycmF5KGJhc2U2NHVybCkge1xuICAgIGNvbnN0IGJhc2U2NCA9IGJhc2U2NHVybC5yZXBsYWNlKC8tL2csIFwiK1wiKS5yZXBsYWNlKC9fL2csIFwiL1wiKTtcbiAgICBjb25zdCBwYWRkaW5nID0gXCI9XCIucmVwZWF0KCg0IC0gKGJhc2U2NC5sZW5ndGggJSA0KSkgJSA0KTtcbiAgICByZXR1cm4gYmFzZTY0VG9VaW50OEFycmF5KGJhc2U2NCArIHBhZGRpbmcpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVpbnQ4QXJyYXlUb0Jhc2U2NHVybChieXRlcykge1xuICAgIHJldHVybiB1aW50OEFycmF5VG9CYXNlNjQoYnl0ZXMpLnJlcGxhY2UoL1xcKy9nLCBcIi1cIikucmVwbGFjZSgvXFwvL2csIFwiX1wiKS5yZXBsYWNlKC89L2csIFwiXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhleFRvVWludDhBcnJheShoZXgpIHtcbiAgICBjb25zdCBjbGVhbkhleCA9IGhleC5yZXBsYWNlKC9eMHgvLCBcIlwiKTtcbiAgICBpZiAoY2xlYW5IZXgubGVuZ3RoICUgMiAhPT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhleCBzdHJpbmcgbGVuZ3RoXCIpO1xuICAgIH1cbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGNsZWFuSGV4Lmxlbmd0aCAvIDIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2xlYW5IZXgubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgYnl0ZXNbaSAvIDJdID0gTnVtYmVyLnBhcnNlSW50KGNsZWFuSGV4LnNsaWNlKGksIGkgKyAyKSwgMTYpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gdWludDhBcnJheVRvSGV4KGJ5dGVzKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oYnl0ZXMpXG4gICAgICAgIC5tYXAoKGIpID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKSlcbiAgICAgICAgLmpvaW4oXCJcIik7XG59XG4vLyBpbnN0YW5jZW9mXG5leHBvcnQgY2xhc3MgQ2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKC4uLl9hcmdzKSB7IH1cbn1cbiIsImltcG9ydCB7ICRjb25zdHJ1Y3RvciB9IGZyb20gXCIuL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSBcIi4vdXRpbC5qc1wiO1xuY29uc3QgaW5pdGlhbGl6ZXIgPSAoaW5zdCwgZGVmKSA9PiB7XG4gICAgaW5zdC5uYW1lID0gXCIkWm9kRXJyb3JcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zdCwgXCJfem9kXCIsIHtcbiAgICAgICAgdmFsdWU6IGluc3QuX3pvZCxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGluc3QsIFwiaXNzdWVzXCIsIHtcbiAgICAgICAgdmFsdWU6IGRlZixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgfSk7XG4gICAgaW5zdC5tZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkoZGVmLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciwgMik7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGluc3QsIFwidG9TdHJpbmdcIiwge1xuICAgICAgICB2YWx1ZTogKCkgPT4gaW5zdC5tZXNzYWdlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICB9KTtcbn07XG5leHBvcnQgY29uc3QgJFpvZEVycm9yID0gJGNvbnN0cnVjdG9yKFwiJFpvZEVycm9yXCIsIGluaXRpYWxpemVyKTtcbmV4cG9ydCBjb25zdCAkWm9kUmVhbEVycm9yID0gJGNvbnN0cnVjdG9yKFwiJFpvZEVycm9yXCIsIGluaXRpYWxpemVyLCB7IFBhcmVudDogRXJyb3IgfSk7XG5leHBvcnQgZnVuY3Rpb24gZmxhdHRlbkVycm9yKGVycm9yLCBtYXBwZXIgPSAoaXNzdWUpID0+IGlzc3VlLm1lc3NhZ2UpIHtcbiAgICBjb25zdCBmaWVsZEVycm9ycyA9IHt9O1xuICAgIGNvbnN0IGZvcm1FcnJvcnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHN1YiBvZiBlcnJvci5pc3N1ZXMpIHtcbiAgICAgICAgaWYgKHN1Yi5wYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSA9IGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSB8fCBbXTtcbiAgICAgICAgICAgIGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXS5wdXNoKG1hcHBlcihzdWIpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvcm1FcnJvcnMucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgZm9ybUVycm9ycywgZmllbGRFcnJvcnMgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRFcnJvcihlcnJvciwgbWFwcGVyID0gKGlzc3VlKSA9PiBpc3N1ZS5tZXNzYWdlKSB7XG4gICAgY29uc3QgZmllbGRFcnJvcnMgPSB7IF9lcnJvcnM6IFtdIH07XG4gICAgY29uc3QgcHJvY2Vzc0Vycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaXNzdWUgb2YgZXJyb3IuaXNzdWVzKSB7XG4gICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3VuaW9uXCIgJiYgaXNzdWUuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlzc3VlLmVycm9ycy5tYXAoKGlzc3VlcykgPT4gcHJvY2Vzc0Vycm9yKHsgaXNzdWVzIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9rZXlcIikge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcih7IGlzc3VlczogaXNzdWUuaXNzdWVzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX2VsZW1lbnRcIikge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcih7IGlzc3VlczogaXNzdWUuaXNzdWVzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUucGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9ycy5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgY3VyciA9IGZpZWxkRXJyb3JzO1xuICAgICAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGlzc3VlLnBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gaXNzdWUucGF0aFtpXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybWluYWwgPSBpID09PSBpc3N1ZS5wYXRoLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGVybWluYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXS5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VyciA9IGN1cnJbZWxdO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBwcm9jZXNzRXJyb3IoZXJyb3IpO1xuICAgIHJldHVybiBmaWVsZEVycm9ycztcbn1cbmV4cG9ydCBmdW5jdGlvbiB0cmVlaWZ5RXJyb3IoZXJyb3IsIG1hcHBlciA9IChpc3N1ZSkgPT4gaXNzdWUubWVzc2FnZSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHsgZXJyb3JzOiBbXSB9O1xuICAgIGNvbnN0IHByb2Nlc3NFcnJvciA9IChlcnJvciwgcGF0aCA9IFtdKSA9PiB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGZvciAoY29uc3QgaXNzdWUgb2YgZXJyb3IuaXNzdWVzKSB7XG4gICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3VuaW9uXCIgJiYgaXNzdWUuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8vIHJlZ3VsYXIgdW5pb24gZXJyb3JcbiAgICAgICAgICAgICAgICBpc3N1ZS5lcnJvcnMubWFwKChpc3N1ZXMpID0+IHByb2Nlc3NFcnJvcih7IGlzc3VlcyB9LCBpc3N1ZS5wYXRoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfa2V5XCIpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoeyBpc3N1ZXM6IGlzc3VlLmlzc3VlcyB9LCBpc3N1ZS5wYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9lbGVtZW50XCIpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoeyBpc3N1ZXM6IGlzc3VlLmlzc3VlcyB9LCBpc3N1ZS5wYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZ1bGxwYXRoID0gWy4uLnBhdGgsIC4uLmlzc3VlLnBhdGhdO1xuICAgICAgICAgICAgICAgIGlmIChmdWxscGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmVycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGN1cnIgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgZnVsbHBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZnVsbHBhdGhbaV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1pbmFsID0gaSA9PT0gZnVsbHBhdGgubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyci5wcm9wZXJ0aWVzID8/IChjdXJyLnByb3BlcnRpZXMgPSB7fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAoX2EgPSBjdXJyLnByb3BlcnRpZXMpW2VsXSA/PyAoX2FbZWxdID0geyBlcnJvcnM6IFtdIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyciA9IGN1cnIucHJvcGVydGllc1tlbF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyLml0ZW1zID8/IChjdXJyLml0ZW1zID0gW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgKF9iID0gY3Vyci5pdGVtcylbZWxdID8/IChfYltlbF0gPSB7IGVycm9yczogW10gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyID0gY3Vyci5pdGVtc1tlbF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlcm1pbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyLmVycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHByb2Nlc3NFcnJvcihlcnJvcik7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKiBGb3JtYXQgYSBab2RFcnJvciBhcyBhIGh1bWFuLXJlYWRhYmxlIHN0cmluZyBpbiB0aGUgZm9sbG93aW5nIGZvcm0uXG4gKlxuICogRnJvbVxuICpcbiAqIGBgYHRzXG4gKiBab2RFcnJvciB7XG4gKiAgIGlzc3VlczogW1xuICogICAgIHtcbiAqICAgICAgIGV4cGVjdGVkOiAnc3RyaW5nJyxcbiAqICAgICAgIGNvZGU6ICdpbnZhbGlkX3R5cGUnLFxuICogICAgICAgcGF0aDogWyAndXNlcm5hbWUnIF0sXG4gKiAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dDogZXhwZWN0ZWQgc3RyaW5nJ1xuICogICAgIH0sXG4gKiAgICAge1xuICogICAgICAgZXhwZWN0ZWQ6ICdudW1iZXInLFxuICogICAgICAgY29kZTogJ2ludmFsaWRfdHlwZScsXG4gKiAgICAgICBwYXRoOiBbICdmYXZvcml0ZU51bWJlcnMnLCAxIF0sXG4gKiAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dDogZXhwZWN0ZWQgbnVtYmVyJ1xuICogICAgIH1cbiAqICAgXTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIHRvXG4gKlxuICogYGBgXG4gKiB1c2VybmFtZVxuICogICDinJYgRXhwZWN0ZWQgbnVtYmVyLCByZWNlaXZlZCBzdHJpbmcgYXQgXCJ1c2VybmFtZVxuICogZmF2b3JpdGVOdW1iZXJzWzBdXG4gKiAgIOKcliBJbnZhbGlkIGlucHV0OiBleHBlY3RlZCBudW1iZXJcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Eb3RQYXRoKF9wYXRoKSB7XG4gICAgY29uc3Qgc2VncyA9IFtdO1xuICAgIGNvbnN0IHBhdGggPSBfcGF0aC5tYXAoKHNlZykgPT4gKHR5cGVvZiBzZWcgPT09IFwib2JqZWN0XCIgPyBzZWcua2V5IDogc2VnKSk7XG4gICAgZm9yIChjb25zdCBzZWcgb2YgcGF0aCkge1xuICAgICAgICBpZiAodHlwZW9mIHNlZyA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgIHNlZ3MucHVzaChgWyR7c2VnfV1gKTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHNlZyA9PT0gXCJzeW1ib2xcIilcbiAgICAgICAgICAgIHNlZ3MucHVzaChgWyR7SlNPTi5zdHJpbmdpZnkoU3RyaW5nKHNlZykpfV1gKTtcbiAgICAgICAgZWxzZSBpZiAoL1teXFx3JF0vLnRlc3Qoc2VnKSlcbiAgICAgICAgICAgIHNlZ3MucHVzaChgWyR7SlNPTi5zdHJpbmdpZnkoc2VnKX1dYCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNlZ3MubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHNlZ3MucHVzaChcIi5cIik7XG4gICAgICAgICAgICBzZWdzLnB1c2goc2VnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2Vncy5qb2luKFwiXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHByZXR0aWZ5RXJyb3IoZXJyb3IpIHtcbiAgICBjb25zdCBsaW5lcyA9IFtdO1xuICAgIC8vIHNvcnQgYnkgcGF0aCBsZW5ndGhcbiAgICBjb25zdCBpc3N1ZXMgPSBbLi4uZXJyb3IuaXNzdWVzXS5zb3J0KChhLCBiKSA9PiAoYS5wYXRoID8/IFtdKS5sZW5ndGggLSAoYi5wYXRoID8/IFtdKS5sZW5ndGgpO1xuICAgIC8vIFByb2Nlc3MgZWFjaCBpc3N1ZVxuICAgIGZvciAoY29uc3QgaXNzdWUgb2YgaXNzdWVzKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYOKcliAke2lzc3VlLm1lc3NhZ2V9YCk7XG4gICAgICAgIGlmIChpc3N1ZS5wYXRoPy5sZW5ndGgpXG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAgIOKGkiBhdCAke3RvRG90UGF0aChpc3N1ZS5wYXRoKX1gKTtcbiAgICB9XG4gICAgLy8gQ29udmVydCBNYXAgdG8gZm9ybWF0dGVkIHN0cmluZ1xuICAgIHJldHVybiBsaW5lcy5qb2luKFwiXFxuXCIpO1xufVxuIiwiaW1wb3J0ICogYXMgY29yZSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBlcnJvcnMgZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gXCIuL3V0aWwuanNcIjtcbmV4cG9ydCBjb25zdCBfcGFyc2UgPSAoX0VycikgPT4gKHNjaGVtYSwgdmFsdWUsIF9jdHgsIF9wYXJhbXMpID0+IHtcbiAgICBjb25zdCBjdHggPSBfY3R4ID8gT2JqZWN0LmFzc2lnbihfY3R4LCB7IGFzeW5jOiBmYWxzZSB9KSA6IHsgYXN5bmM6IGZhbHNlIH07XG4gICAgY29uc3QgcmVzdWx0ID0gc2NoZW1hLl96b2QucnVuKHsgdmFsdWUsIGlzc3VlczogW10gfSwgY3R4KTtcbiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB0aHJvdyBuZXcgY29yZS4kWm9kQXN5bmNFcnJvcigpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyAoX3BhcmFtcz8uRXJyID8/IF9FcnIpKHJlc3VsdC5pc3N1ZXMubWFwKChpc3MpID0+IHV0aWwuZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29yZS5jb25maWcoKSkpKTtcbiAgICAgICAgdXRpbC5jYXB0dXJlU3RhY2tUcmFjZShlLCBfcGFyYW1zPy5jYWxsZWUpO1xuICAgICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0LnZhbHVlO1xufTtcbmV4cG9ydCBjb25zdCBwYXJzZSA9IC8qIEBfX1BVUkVfXyovIF9wYXJzZShlcnJvcnMuJFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgX3BhcnNlQXN5bmMgPSAoX0VycikgPT4gYXN5bmMgKHNjaGVtYSwgdmFsdWUsIF9jdHgsIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGN0eCA9IF9jdHggPyBPYmplY3QuYXNzaWduKF9jdHgsIHsgYXN5bmM6IHRydWUgfSkgOiB7IGFzeW5jOiB0cnVlIH07XG4gICAgbGV0IHJlc3VsdCA9IHNjaGVtYS5fem9kLnJ1bih7IHZhbHVlLCBpc3N1ZXM6IFtdIH0sIGN0eCk7XG4gICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHJlc3VsdDtcbiAgICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyAocGFyYW1zPy5FcnIgPz8gX0VycikocmVzdWx0Lmlzc3Vlcy5tYXAoKGlzcykgPT4gdXRpbC5maW5hbGl6ZUlzc3VlKGlzcywgY3R4LCBjb3JlLmNvbmZpZygpKSkpO1xuICAgICAgICB1dGlsLmNhcHR1cmVTdGFja1RyYWNlKGUsIHBhcmFtcz8uY2FsbGVlKTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbn07XG5leHBvcnQgY29uc3QgcGFyc2VBc3luYyA9IC8qIEBfX1BVUkVfXyovIF9wYXJzZUFzeW5jKGVycm9ycy4kWm9kUmVhbEVycm9yKTtcbmV4cG9ydCBjb25zdCBfc2FmZVBhcnNlID0gKF9FcnIpID0+IChzY2hlbWEsIHZhbHVlLCBfY3R4KSA9PiB7XG4gICAgY29uc3QgY3R4ID0gX2N0eCA/IHsgLi4uX2N0eCwgYXN5bmM6IGZhbHNlIH0gOiB7IGFzeW5jOiBmYWxzZSB9O1xuICAgIGNvbnN0IHJlc3VsdCA9IHNjaGVtYS5fem9kLnJ1bih7IHZhbHVlLCBpc3N1ZXM6IFtdIH0sIGN0eCk7XG4gICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IGNvcmUuJFpvZEFzeW5jRXJyb3IoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5pc3N1ZXMubGVuZ3RoXG4gICAgICAgID8ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogbmV3IChfRXJyID8/IGVycm9ycy4kWm9kRXJyb3IpKHJlc3VsdC5pc3N1ZXMubWFwKChpc3MpID0+IHV0aWwuZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29yZS5jb25maWcoKSkpKSxcbiAgICAgICAgfVxuICAgICAgICA6IHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0LnZhbHVlIH07XG59O1xuZXhwb3J0IGNvbnN0IHNhZmVQYXJzZSA9IC8qIEBfX1BVUkVfXyovIF9zYWZlUGFyc2UoZXJyb3JzLiRab2RSZWFsRXJyb3IpO1xuZXhwb3J0IGNvbnN0IF9zYWZlUGFyc2VBc3luYyA9IChfRXJyKSA9PiBhc3luYyAoc2NoZW1hLCB2YWx1ZSwgX2N0eCkgPT4ge1xuICAgIGNvbnN0IGN0eCA9IF9jdHggPyBPYmplY3QuYXNzaWduKF9jdHgsIHsgYXN5bmM6IHRydWUgfSkgOiB7IGFzeW5jOiB0cnVlIH07XG4gICAgbGV0IHJlc3VsdCA9IHNjaGVtYS5fem9kLnJ1bih7IHZhbHVlLCBpc3N1ZXM6IFtdIH0sIGN0eCk7XG4gICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHJlc3VsdDtcbiAgICByZXR1cm4gcmVzdWx0Lmlzc3Vlcy5sZW5ndGhcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBuZXcgX0VycihyZXN1bHQuaXNzdWVzLm1hcCgoaXNzKSA9PiB1dGlsLmZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvcmUuY29uZmlnKCkpKSksXG4gICAgICAgIH1cbiAgICAgICAgOiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdC52YWx1ZSB9O1xufTtcbmV4cG9ydCBjb25zdCBzYWZlUGFyc2VBc3luYyA9IC8qIEBfX1BVUkVfXyovIF9zYWZlUGFyc2VBc3luYyhlcnJvcnMuJFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgX2VuY29kZSA9IChfRXJyKSA9PiAoc2NoZW1hLCB2YWx1ZSwgX2N0eCkgPT4ge1xuICAgIGNvbnN0IGN0eCA9IF9jdHggPyBPYmplY3QuYXNzaWduKF9jdHgsIHsgZGlyZWN0aW9uOiBcImJhY2t3YXJkXCIgfSkgOiB7IGRpcmVjdGlvbjogXCJiYWNrd2FyZFwiIH07XG4gICAgcmV0dXJuIF9wYXJzZShfRXJyKShzY2hlbWEsIHZhbHVlLCBjdHgpO1xufTtcbmV4cG9ydCBjb25zdCBlbmNvZGUgPSAvKiBAX19QVVJFX18qLyBfZW5jb2RlKGVycm9ycy4kWm9kUmVhbEVycm9yKTtcbmV4cG9ydCBjb25zdCBfZGVjb2RlID0gKF9FcnIpID0+IChzY2hlbWEsIHZhbHVlLCBfY3R4KSA9PiB7XG4gICAgcmV0dXJuIF9wYXJzZShfRXJyKShzY2hlbWEsIHZhbHVlLCBfY3R4KTtcbn07XG5leHBvcnQgY29uc3QgZGVjb2RlID0gLyogQF9fUFVSRV9fKi8gX2RlY29kZShlcnJvcnMuJFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgX2VuY29kZUFzeW5jID0gKF9FcnIpID0+IGFzeW5jIChzY2hlbWEsIHZhbHVlLCBfY3R4KSA9PiB7XG4gICAgY29uc3QgY3R4ID0gX2N0eCA/IE9iamVjdC5hc3NpZ24oX2N0eCwgeyBkaXJlY3Rpb246IFwiYmFja3dhcmRcIiB9KSA6IHsgZGlyZWN0aW9uOiBcImJhY2t3YXJkXCIgfTtcbiAgICByZXR1cm4gX3BhcnNlQXN5bmMoX0Vycikoc2NoZW1hLCB2YWx1ZSwgY3R4KTtcbn07XG5leHBvcnQgY29uc3QgZW5jb2RlQXN5bmMgPSAvKiBAX19QVVJFX18qLyBfZW5jb2RlQXN5bmMoZXJyb3JzLiRab2RSZWFsRXJyb3IpO1xuZXhwb3J0IGNvbnN0IF9kZWNvZGVBc3luYyA9IChfRXJyKSA9PiBhc3luYyAoc2NoZW1hLCB2YWx1ZSwgX2N0eCkgPT4ge1xuICAgIHJldHVybiBfcGFyc2VBc3luYyhfRXJyKShzY2hlbWEsIHZhbHVlLCBfY3R4KTtcbn07XG5leHBvcnQgY29uc3QgZGVjb2RlQXN5bmMgPSAvKiBAX19QVVJFX18qLyBfZGVjb2RlQXN5bmMoZXJyb3JzLiRab2RSZWFsRXJyb3IpO1xuZXhwb3J0IGNvbnN0IF9zYWZlRW5jb2RlID0gKF9FcnIpID0+IChzY2hlbWEsIHZhbHVlLCBfY3R4KSA9PiB7XG4gICAgY29uc3QgY3R4ID0gX2N0eCA/IE9iamVjdC5hc3NpZ24oX2N0eCwgeyBkaXJlY3Rpb246IFwiYmFja3dhcmRcIiB9KSA6IHsgZGlyZWN0aW9uOiBcImJhY2t3YXJkXCIgfTtcbiAgICByZXR1cm4gX3NhZmVQYXJzZShfRXJyKShzY2hlbWEsIHZhbHVlLCBjdHgpO1xufTtcbmV4cG9ydCBjb25zdCBzYWZlRW5jb2RlID0gLyogQF9fUFVSRV9fKi8gX3NhZmVFbmNvZGUoZXJyb3JzLiRab2RSZWFsRXJyb3IpO1xuZXhwb3J0IGNvbnN0IF9zYWZlRGVjb2RlID0gKF9FcnIpID0+IChzY2hlbWEsIHZhbHVlLCBfY3R4KSA9PiB7XG4gICAgcmV0dXJuIF9zYWZlUGFyc2UoX0Vycikoc2NoZW1hLCB2YWx1ZSwgX2N0eCk7XG59O1xuZXhwb3J0IGNvbnN0IHNhZmVEZWNvZGUgPSAvKiBAX19QVVJFX18qLyBfc2FmZURlY29kZShlcnJvcnMuJFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgX3NhZmVFbmNvZGVBc3luYyA9IChfRXJyKSA9PiBhc3luYyAoc2NoZW1hLCB2YWx1ZSwgX2N0eCkgPT4ge1xuICAgIGNvbnN0IGN0eCA9IF9jdHggPyBPYmplY3QuYXNzaWduKF9jdHgsIHsgZGlyZWN0aW9uOiBcImJhY2t3YXJkXCIgfSkgOiB7IGRpcmVjdGlvbjogXCJiYWNrd2FyZFwiIH07XG4gICAgcmV0dXJuIF9zYWZlUGFyc2VBc3luYyhfRXJyKShzY2hlbWEsIHZhbHVlLCBjdHgpO1xufTtcbmV4cG9ydCBjb25zdCBzYWZlRW5jb2RlQXN5bmMgPSAvKiBAX19QVVJFX18qLyBfc2FmZUVuY29kZUFzeW5jKGVycm9ycy4kWm9kUmVhbEVycm9yKTtcbmV4cG9ydCBjb25zdCBfc2FmZURlY29kZUFzeW5jID0gKF9FcnIpID0+IGFzeW5jIChzY2hlbWEsIHZhbHVlLCBfY3R4KSA9PiB7XG4gICAgcmV0dXJuIF9zYWZlUGFyc2VBc3luYyhfRXJyKShzY2hlbWEsIHZhbHVlLCBfY3R4KTtcbn07XG5leHBvcnQgY29uc3Qgc2FmZURlY29kZUFzeW5jID0gLyogQF9fUFVSRV9fKi8gX3NhZmVEZWNvZGVBc3luYyhlcnJvcnMuJFpvZFJlYWxFcnJvcik7XG4iLCJpbXBvcnQgKiBhcyB1dGlsIGZyb20gXCIuL3V0aWwuanNcIjtcbmV4cG9ydCBjb25zdCBjdWlkID0gL15bY0NdW15cXHMtXXs4LH0kLztcbmV4cG9ydCBjb25zdCBjdWlkMiA9IC9eWzAtOWEtel0rJC87XG5leHBvcnQgY29uc3QgdWxpZCA9IC9eWzAtOUEtSEpLTU5QLVRWLVphLWhqa21ucC10di16XXsyNn0kLztcbmV4cG9ydCBjb25zdCB4aWQgPSAvXlswLTlhLXZBLVZdezIwfSQvO1xuZXhwb3J0IGNvbnN0IGtzdWlkID0gL15bQS1aYS16MC05XXsyN30kLztcbmV4cG9ydCBjb25zdCBuYW5vaWQgPSAvXlthLXpBLVowLTlfLV17MjF9JC87XG4vKiogSVNPIDg2MDEtMSBkdXJhdGlvbiByZWdleC4gRG9lcyBub3Qgc3VwcG9ydCB0aGUgODYwMS0yIGV4dGVuc2lvbnMgbGlrZSBuZWdhdGl2ZSBkdXJhdGlvbnMgb3IgZnJhY3Rpb25hbC9uZWdhdGl2ZSBjb21wb25lbnRzLiAqL1xuZXhwb3J0IGNvbnN0IGR1cmF0aW9uID0gL15QKD86KFxcZCtXKXwoPyEuKlcpKD89XFxkfFRcXGQpKFxcZCtZKT8oXFxkK00pPyhcXGQrRCk/KFQoPz1cXGQpKFxcZCtIKT8oXFxkK00pPyhcXGQrKFsuLF1cXGQrKT9TKT8pPykkLztcbi8qKiBJbXBsZW1lbnRzIElTTyA4NjAxLTIgZXh0ZW5zaW9ucyBsaWtlIGV4cGxpY2l0ICstIHByZWZpeGVzLCBtaXhpbmcgd2Vla3Mgd2l0aCBvdGhlciB1bml0cywgYW5kIGZyYWN0aW9uYWwvbmVnYXRpdmUgY29tcG9uZW50cy4gKi9cbmV4cG9ydCBjb25zdCBleHRlbmRlZER1cmF0aW9uID0gL15bLStdP1AoPyEkKSg/Oig/OlstK10/XFxkK1kpfCg/OlstK10/XFxkK1suLF1cXGQrWSQpKT8oPzooPzpbLStdP1xcZCtNKXwoPzpbLStdP1xcZCtbLixdXFxkK00kKSk/KD86KD86Wy0rXT9cXGQrVyl8KD86Wy0rXT9cXGQrWy4sXVxcZCtXJCkpPyg/Oig/OlstK10/XFxkK0QpfCg/OlstK10/XFxkK1suLF1cXGQrRCQpKT8oPzpUKD89W1xcZCstXSkoPzooPzpbLStdP1xcZCtIKXwoPzpbLStdP1xcZCtbLixdXFxkK0gkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/OlstK10/XFxkKyg/OlsuLF1cXGQrKT9TKT8pPz8kLztcbi8qKiBBIHJlZ2V4IGZvciBhbnkgVVVJRC1saWtlIGlkZW50aWZpZXI6IDgtNC00LTQtMTIgaGV4IHBhdHRlcm4gKi9cbmV4cG9ydCBjb25zdCBndWlkID0gL14oWzAtOWEtZkEtRl17OH0tWzAtOWEtZkEtRl17NH0tWzAtOWEtZkEtRl17NH0tWzAtOWEtZkEtRl17NH0tWzAtOWEtZkEtRl17MTJ9KSQvO1xuLyoqIFJldHVybnMgYSByZWdleCBmb3IgdmFsaWRhdGluZyBhbiBSRkMgOTU2Mi80MTIyIFVVSUQuXG4gKlxuICogQHBhcmFtIHZlcnNpb24gT3B0aW9uYWxseSBzcGVjaWZ5IGEgdmVyc2lvbiAxLTguIElmIG5vIHZlcnNpb24gaXMgc3BlY2lmaWVkLCBhbGwgdmVyc2lvbnMgYXJlIHN1cHBvcnRlZC4gKi9cbmV4cG9ydCBjb25zdCB1dWlkID0gKHZlcnNpb24pID0+IHtcbiAgICBpZiAoIXZlcnNpb24pXG4gICAgICAgIHJldHVybiAvXihbMC05YS1mQS1GXXs4fS1bMC05YS1mQS1GXXs0fS1bMS04XVswLTlhLWZBLUZdezN9LVs4OWFiQUJdWzAtOWEtZkEtRl17M30tWzAtOWEtZkEtRl17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMHxmZmZmZmZmZi1mZmZmLWZmZmYtZmZmZi1mZmZmZmZmZmZmZmYpJC87XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4oWzAtOWEtZkEtRl17OH0tWzAtOWEtZkEtRl17NH0tJHt2ZXJzaW9ufVswLTlhLWZBLUZdezN9LVs4OWFiQUJdWzAtOWEtZkEtRl17M30tWzAtOWEtZkEtRl17MTJ9KSRgKTtcbn07XG5leHBvcnQgY29uc3QgdXVpZDQgPSAvKkBfX1BVUkVfXyovIHV1aWQoNCk7XG5leHBvcnQgY29uc3QgdXVpZDYgPSAvKkBfX1BVUkVfXyovIHV1aWQoNik7XG5leHBvcnQgY29uc3QgdXVpZDcgPSAvKkBfX1BVUkVfXyovIHV1aWQoNyk7XG4vKiogUHJhY3RpY2FsIGVtYWlsIHZhbGlkYXRpb24gKi9cbmV4cG9ydCBjb25zdCBlbWFpbCA9IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbQS1aYS16MC05XycrXFwtXFwuXSopW0EtWmEtejAtOV8rLV1AKFtBLVphLXowLTldW0EtWmEtejAtOVxcLV0qXFwuKStbQS1aYS16XXsyLH0kLztcbi8qKiBFcXVpdmFsZW50IHRvIHRoZSBIVE1MNSBpbnB1dFt0eXBlPWVtYWlsXSB2YWxpZGF0aW9uIGltcGxlbWVudGVkIGJ5IGJyb3dzZXJzLiBTb3VyY2U6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvRWxlbWVudC9pbnB1dC9lbWFpbCAqL1xuZXhwb3J0IGNvbnN0IGh0bWw1RW1haWwgPSAvXlthLXpBLVowLTkuISMkJSYnKisvPT9eX2B7fH1+LV0rQFthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPyg/OlxcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqJC87XG4vKiogVGhlIGNsYXNzaWMgZW1haWxyZWdleC5jb20gcmVnZXggZm9yIFJGQyA1MzIyLWNvbXBsaWFudCBlbWFpbHMgKi9cbmV4cG9ydCBjb25zdCByZmM1MzIyRW1haWwgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcbi8qKiBBIGxvb3NlIHJlZ2V4IHRoYXQgYWxsb3dzIFVuaWNvZGUgY2hhcmFjdGVycywgZW5mb3JjZXMgbGVuZ3RoIGxpbWl0cywgYW5kIHRoYXQncyBhYm91dCBpdC4gKi9cbmV4cG9ydCBjb25zdCB1bmljb2RlRW1haWwgPSAvXlteXFxzQFwiXXsxLDY0fUBbXlxcc0BdezEsMjU1fSQvdTtcbmV4cG9ydCBjb25zdCBpZG5FbWFpbCA9IHVuaWNvZGVFbWFpbDtcbmV4cG9ydCBjb25zdCBicm93c2VyRW1haWwgPSAvXlthLXpBLVowLTkuISMkJSYnKisvPT9eX2B7fH1+LV0rQFthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPyg/OlxcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqJC87XG4vLyBmcm9tIGh0dHBzOi8vdGhla2V2aW5zY290dC5jb20vZW1vamlzLWluLWphdmFzY3JpcHQvI3dyaXRpbmctYS1yZWd1bGFyLWV4cHJlc3Npb25cbmNvbnN0IF9lbW9qaSA9IGBeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJGA7XG5leHBvcnQgZnVuY3Rpb24gZW1vamkoKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoX2Vtb2ppLCBcInVcIik7XG59XG5leHBvcnQgY29uc3QgaXB2NCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pJC87XG5leHBvcnQgY29uc3QgaXB2NiA9IC9eKChbMC05YS1mQS1GXXsxLDR9Oil7N31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318OikpJC87XG5leHBvcnQgY29uc3QgbWFjID0gKGRlbGltaXRlcikgPT4ge1xuICAgIGNvbnN0IGVzY2FwZWREZWxpbSA9IHV0aWwuZXNjYXBlUmVnZXgoZGVsaW1pdGVyID8/IFwiOlwiKTtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXig/OlswLTlBLUZdezJ9JHtlc2NhcGVkRGVsaW19KXs1fVswLTlBLUZdezJ9JHxeKD86WzAtOWEtZl17Mn0ke2VzY2FwZWREZWxpbX0pezV9WzAtOWEtZl17Mn0kYCk7XG59O1xuZXhwb3J0IGNvbnN0IGNpZHJ2NCA9IC9eKCgyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSgyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwvKFswLTldfFsxLTJdWzAtOV18M1swLTJdKSQvO1xuZXhwb3J0IGNvbnN0IGNpZHJ2NiA9IC9eKChbMC05YS1mQS1GXXsxLDR9Oil7N31bMC05YS1mQS1GXXsxLDR9fDo6fChbMC05YS1mQS1GXXsxLDR9KT86OihbMC05YS1mQS1GXXsxLDR9Oj8pezAsNn0pXFwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLztcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NjAzOTIvZGV0ZXJtaW5lLWlmLXN0cmluZy1pcy1pbi1iYXNlNjQtdXNpbmctamF2YXNjcmlwdFxuZXhwb3J0IGNvbnN0IGJhc2U2NCA9IC9eJHxeKD86WzAtOWEtekEtWisvXXs0fSkqKD86KD86WzAtOWEtekEtWisvXXsyfT09KXwoPzpbMC05YS16QS1aKy9dezN9PSkpPyQvO1xuZXhwb3J0IGNvbnN0IGJhc2U2NHVybCA9IC9eW0EtWmEtejAtOV8tXSokLztcbi8vIGJhc2VkIG9uIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNjE3OS9yZWd1bGFyLWV4cHJlc3Npb24tdG8tbWF0Y2gtZG5zLWhvc3RuYW1lLW9yLWlwLWFkZHJlc3Ncbi8vIGV4cG9ydCBjb25zdCBob3N0bmFtZTogUmVnRXhwID0gL14oW2EtekEtWjAtOS1dK1xcLikqW2EtekEtWjAtOS1dKyQvO1xuZXhwb3J0IGNvbnN0IGhvc3RuYW1lID0gL14oPz0uezEsMjUzfVxcLj8kKVthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPyg/OlxcLlthLXpBLVowLTldKD86Wy0wLTlhLXpBLVpdezAsNjF9WzAtOWEtekEtWl0pPykqXFwuPyQvO1xuZXhwb3J0IGNvbnN0IGRvbWFpbiA9IC9eKFthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pP1xcLikrW2EtekEtWl17Mix9JC87XG4vLyBodHRwczovL2Jsb2cuc3RldmVubGV2aXRoYW4uY29tL2FyY2hpdmVzL3ZhbGlkYXRlLXBob25lLW51bWJlciNyNC0zIChyZWdleCBzYW5zIHNwYWNlcylcbi8vIEUuMTY0OiBsZWFkaW5nIGRpZ2l0IG11c3QgYmUgMS05OyB0b3RhbCBkaWdpdHMgKGV4Y2x1ZGluZyAnKycpIGJldHdlZW4gNy0xNVxuZXhwb3J0IGNvbnN0IGUxNjQgPSAvXlxcK1sxLTldXFxkezYsMTR9JC87XG4vLyBjb25zdCBkYXRlU291cmNlID0gYCgoXFxcXGRcXFxcZFsyNDY4XVswNDhdfFxcXFxkXFxcXGRbMTM1NzldWzI2XXxcXFxcZFxcXFxkMFs0OF18WzAyNDY4XVswNDhdMDB8WzEzNTc5XVsyNl0wMCktMDItMjl8XFxcXGR7NH0tKCgwWzEzNTc4XXwxWzAyXSktKDBbMS05XXxbMTJdXFxcXGR8M1swMV0pfCgwWzQ2OV18MTEpLSgwWzEtOV18WzEyXVxcXFxkfDMwKXwoMDIpLSgwWzEtOV18MVxcXFxkfDJbMC04XSkpKWA7XG5jb25zdCBkYXRlU291cmNlID0gYCg/Oig/OlxcXFxkXFxcXGRbMjQ2OF1bMDQ4XXxcXFxcZFxcXFxkWzEzNTc5XVsyNl18XFxcXGRcXFxcZDBbNDhdfFswMjQ2OF1bMDQ4XTAwfFsxMzU3OV1bMjZdMDApLTAyLTI5fFxcXFxkezR9LSg/Oig/OjBbMTM1NzhdfDFbMDJdKS0oPzowWzEtOV18WzEyXVxcXFxkfDNbMDFdKXwoPzowWzQ2OV18MTEpLSg/OjBbMS05XXxbMTJdXFxcXGR8MzApfCg/OjAyKS0oPzowWzEtOV18MVxcXFxkfDJbMC04XSkpKWA7XG5leHBvcnQgY29uc3QgZGF0ZSA9IC8qQF9fUFVSRV9fKi8gbmV3IFJlZ0V4cChgXiR7ZGF0ZVNvdXJjZX0kYCk7XG5mdW5jdGlvbiB0aW1lU291cmNlKGFyZ3MpIHtcbiAgICBjb25zdCBoaG1tID0gYCg/OlswMV1cXFxcZHwyWzAtM10pOlswLTVdXFxcXGRgO1xuICAgIGNvbnN0IHJlZ2V4ID0gdHlwZW9mIGFyZ3MucHJlY2lzaW9uID09PSBcIm51bWJlclwiXG4gICAgICAgID8gYXJncy5wcmVjaXNpb24gPT09IC0xXG4gICAgICAgICAgICA/IGAke2hobW19YFxuICAgICAgICAgICAgOiBhcmdzLnByZWNpc2lvbiA9PT0gMFxuICAgICAgICAgICAgICAgID8gYCR7aGhtbX06WzAtNV1cXFxcZGBcbiAgICAgICAgICAgICAgICA6IGAke2hobW19OlswLTVdXFxcXGRcXFxcLlxcXFxkeyR7YXJncy5wcmVjaXNpb259fWBcbiAgICAgICAgOiBgJHtoaG1tfSg/OjpbMC01XVxcXFxkKD86XFxcXC5cXFxcZCspPyk/YDtcbiAgICByZXR1cm4gcmVnZXg7XG59XG5leHBvcnQgZnVuY3Rpb24gdGltZShhcmdzKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3RpbWVTb3VyY2UoYXJncyl9JGApO1xufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMTQzMjMxXG5leHBvcnQgZnVuY3Rpb24gZGF0ZXRpbWUoYXJncykge1xuICAgIGNvbnN0IHRpbWUgPSB0aW1lU291cmNlKHsgcHJlY2lzaW9uOiBhcmdzLnByZWNpc2lvbiB9KTtcbiAgICBjb25zdCBvcHRzID0gW1wiWlwiXTtcbiAgICBpZiAoYXJncy5sb2NhbClcbiAgICAgICAgb3B0cy5wdXNoKFwiXCIpO1xuICAgIC8vIGlmIChhcmdzLm9mZnNldCkgb3B0cy5wdXNoKGAoWystXVxcXFxkezJ9OlxcXFxkezJ9KWApO1xuICAgIGlmIChhcmdzLm9mZnNldClcbiAgICAgICAgb3B0cy5wdXNoKGAoWystXSg/OlswMV1cXFxcZHwyWzAtM10pOlswLTVdXFxcXGQpYCk7XG4gICAgY29uc3QgdGltZVJlZ2V4ID0gYCR7dGltZX0oPzoke29wdHMuam9pbihcInxcIil9KWA7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke2RhdGVTb3VyY2V9VCg/OiR7dGltZVJlZ2V4fSkkYCk7XG59XG5leHBvcnQgY29uc3Qgc3RyaW5nID0gKHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IHJlZ2V4ID0gcGFyYW1zID8gYFtcXFxcc1xcXFxTXXske3BhcmFtcz8ubWluaW11bSA/PyAwfSwke3BhcmFtcz8ubWF4aW11bSA/PyBcIlwifX1gIDogYFtcXFxcc1xcXFxTXSpgO1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHtyZWdleH0kYCk7XG59O1xuZXhwb3J0IGNvbnN0IGJpZ2ludCA9IC9eLT9cXGQrbj8kLztcbmV4cG9ydCBjb25zdCBpbnRlZ2VyID0gL14tP1xcZCskLztcbmV4cG9ydCBjb25zdCBudW1iZXIgPSAvXi0/XFxkKyg/OlxcLlxcZCspPyQvO1xuZXhwb3J0IGNvbnN0IGJvb2xlYW4gPSAvXig/OnRydWV8ZmFsc2UpJC9pO1xuY29uc3QgX251bGwgPSAvXm51bGwkL2k7XG5leHBvcnQgeyBfbnVsbCBhcyBudWxsIH07XG5jb25zdCBfdW5kZWZpbmVkID0gL151bmRlZmluZWQkL2k7XG5leHBvcnQgeyBfdW5kZWZpbmVkIGFzIHVuZGVmaW5lZCB9O1xuLy8gcmVnZXggZm9yIHN0cmluZyB3aXRoIG5vIHVwcGVyY2FzZSBsZXR0ZXJzXG5leHBvcnQgY29uc3QgbG93ZXJjYXNlID0gL15bXkEtWl0qJC87XG4vLyByZWdleCBmb3Igc3RyaW5nIHdpdGggbm8gbG93ZXJjYXNlIGxldHRlcnNcbmV4cG9ydCBjb25zdCB1cHBlcmNhc2UgPSAvXlteYS16XSokLztcbi8vIHJlZ2V4IGZvciBoZXhhZGVjaW1hbCBzdHJpbmdzIChhbnkgbGVuZ3RoKVxuZXhwb3J0IGNvbnN0IGhleCA9IC9eWzAtOWEtZkEtRl0qJC87XG4vLyBIYXNoIHJlZ2V4ZXMgZm9yIGRpZmZlcmVudCBhbGdvcml0aG1zIGFuZCBlbmNvZGluZ3Ncbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYmFzZTY0IHJlZ2V4IHdpdGggZXhhY3QgbGVuZ3RoIGFuZCBwYWRkaW5nXG5mdW5jdGlvbiBmaXhlZEJhc2U2NChib2R5TGVuZ3RoLCBwYWRkaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF5bQS1aYS16MC05Ky9deyR7Ym9keUxlbmd0aH19JHtwYWRkaW5nfSRgKTtcbn1cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYmFzZTY0dXJsIHJlZ2V4IHdpdGggZXhhY3QgbGVuZ3RoIChubyBwYWRkaW5nKVxuZnVuY3Rpb24gZml4ZWRCYXNlNjR1cmwobGVuZ3RoKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF5bQS1aYS16MC05Xy1deyR7bGVuZ3RofX0kYCk7XG59XG4vLyBNRDUgKDE2IGJ5dGVzKTogYmFzZTY0ID0gMjQgY2hhcnMgdG90YWwgKDIyICsgXCI9PVwiKVxuZXhwb3J0IGNvbnN0IG1kNV9oZXggPSAvXlswLTlhLWZBLUZdezMyfSQvO1xuZXhwb3J0IGNvbnN0IG1kNV9iYXNlNjQgPSAvKkBfX1BVUkVfXyovIGZpeGVkQmFzZTY0KDIyLCBcIj09XCIpO1xuZXhwb3J0IGNvbnN0IG1kNV9iYXNlNjR1cmwgPSAvKkBfX1BVUkVfXyovIGZpeGVkQmFzZTY0dXJsKDIyKTtcbi8vIFNIQTEgKDIwIGJ5dGVzKTogYmFzZTY0ID0gMjggY2hhcnMgdG90YWwgKDI3ICsgXCI9XCIpXG5leHBvcnQgY29uc3Qgc2hhMV9oZXggPSAvXlswLTlhLWZBLUZdezQwfSQvO1xuZXhwb3J0IGNvbnN0IHNoYTFfYmFzZTY0ID0gLypAX19QVVJFX18qLyBmaXhlZEJhc2U2NCgyNywgXCI9XCIpO1xuZXhwb3J0IGNvbnN0IHNoYTFfYmFzZTY0dXJsID0gLypAX19QVVJFX18qLyBmaXhlZEJhc2U2NHVybCgyNyk7XG4vLyBTSEEyNTYgKDMyIGJ5dGVzKTogYmFzZTY0ID0gNDQgY2hhcnMgdG90YWwgKDQzICsgXCI9XCIpXG5leHBvcnQgY29uc3Qgc2hhMjU2X2hleCA9IC9eWzAtOWEtZkEtRl17NjR9JC87XG5leHBvcnQgY29uc3Qgc2hhMjU2X2Jhc2U2NCA9IC8qQF9fUFVSRV9fKi8gZml4ZWRCYXNlNjQoNDMsIFwiPVwiKTtcbmV4cG9ydCBjb25zdCBzaGEyNTZfYmFzZTY0dXJsID0gLypAX19QVVJFX18qLyBmaXhlZEJhc2U2NHVybCg0Myk7XG4vLyBTSEEzODQgKDQ4IGJ5dGVzKTogYmFzZTY0ID0gNjQgY2hhcnMgdG90YWwgKG5vIHBhZGRpbmcpXG5leHBvcnQgY29uc3Qgc2hhMzg0X2hleCA9IC9eWzAtOWEtZkEtRl17OTZ9JC87XG5leHBvcnQgY29uc3Qgc2hhMzg0X2Jhc2U2NCA9IC8qQF9fUFVSRV9fKi8gZml4ZWRCYXNlNjQoNjQsIFwiXCIpO1xuZXhwb3J0IGNvbnN0IHNoYTM4NF9iYXNlNjR1cmwgPSAvKkBfX1BVUkVfXyovIGZpeGVkQmFzZTY0dXJsKDY0KTtcbi8vIFNIQTUxMiAoNjQgYnl0ZXMpOiBiYXNlNjQgPSA4OCBjaGFycyB0b3RhbCAoODYgKyBcIj09XCIpXG5leHBvcnQgY29uc3Qgc2hhNTEyX2hleCA9IC9eWzAtOWEtZkEtRl17MTI4fSQvO1xuZXhwb3J0IGNvbnN0IHNoYTUxMl9iYXNlNjQgPSAvKkBfX1BVUkVfXyovIGZpeGVkQmFzZTY0KDg2LCBcIj09XCIpO1xuZXhwb3J0IGNvbnN0IHNoYTUxMl9iYXNlNjR1cmwgPSAvKkBfX1BVUkVfXyovIGZpeGVkQmFzZTY0dXJsKDg2KTtcbiIsIi8vIGltcG9ydCB7ICRab2RUeXBlIH0gZnJvbSBcIi4vc2NoZW1hcy5qc1wiO1xuaW1wb3J0ICogYXMgY29yZSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyByZWdleGVzIGZyb20gXCIuL3JlZ2V4ZXMuanNcIjtcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSBcIi4vdXRpbC5qc1wiO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVjayA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIHZhciBfYTtcbiAgICBpbnN0Ll96b2QgPz8gKGluc3QuX3pvZCA9IHt9KTtcbiAgICBpbnN0Ll96b2QuZGVmID0gZGVmO1xuICAgIChfYSA9IGluc3QuX3pvZCkub25hdHRhY2ggPz8gKF9hLm9uYXR0YWNoID0gW10pO1xufSk7XG5jb25zdCBudW1lcmljT3JpZ2luTWFwID0ge1xuICAgIG51bWJlcjogXCJudW1iZXJcIixcbiAgICBiaWdpbnQ6IFwiYmlnaW50XCIsXG4gICAgb2JqZWN0OiBcImRhdGVcIixcbn07XG5leHBvcnQgY29uc3QgJFpvZENoZWNrTGVzc1RoYW4gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrTGVzc1RoYW5cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7XG4gICAgY29uc3Qgb3JpZ2luID0gbnVtZXJpY09yaWdpbk1hcFt0eXBlb2YgZGVmLnZhbHVlXTtcbiAgICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdCkgPT4ge1xuICAgICAgICBjb25zdCBiYWcgPSBpbnN0Ll96b2QuYmFnO1xuICAgICAgICBjb25zdCBjdXJyID0gKGRlZi5pbmNsdXNpdmUgPyBiYWcubWF4aW11bSA6IGJhZy5leGNsdXNpdmVNYXhpbXVtKSA/PyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIGlmIChkZWYudmFsdWUgPCBjdXJyKSB7XG4gICAgICAgICAgICBpZiAoZGVmLmluY2x1c2l2ZSlcbiAgICAgICAgICAgICAgICBiYWcubWF4aW11bSA9IGRlZi52YWx1ZTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBiYWcuZXhjbHVzaXZlTWF4aW11bSA9IGRlZi52YWx1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGlmIChkZWYuaW5jbHVzaXZlID8gcGF5bG9hZC52YWx1ZSA8PSBkZWYudmFsdWUgOiBwYXlsb2FkLnZhbHVlIDwgZGVmLnZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBvcmlnaW4sXG4gICAgICAgICAgICBjb2RlOiBcInRvb19iaWdcIixcbiAgICAgICAgICAgIG1heGltdW06IHR5cGVvZiBkZWYudmFsdWUgPT09IFwib2JqZWN0XCIgPyBkZWYudmFsdWUuZ2V0VGltZSgpIDogZGVmLnZhbHVlLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGRlZi5pbmNsdXNpdmUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tHcmVhdGVyVGhhbiA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tHcmVhdGVyVGhhblwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb25zdCBvcmlnaW4gPSBudW1lcmljT3JpZ2luTWFwW3R5cGVvZiBkZWYudmFsdWVdO1xuICAgIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7XG4gICAgICAgIGNvbnN0IGN1cnIgPSAoZGVmLmluY2x1c2l2ZSA/IGJhZy5taW5pbXVtIDogYmFnLmV4Y2x1c2l2ZU1pbmltdW0pID8/IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcbiAgICAgICAgaWYgKGRlZi52YWx1ZSA+IGN1cnIpIHtcbiAgICAgICAgICAgIGlmIChkZWYuaW5jbHVzaXZlKVxuICAgICAgICAgICAgICAgIGJhZy5taW5pbXVtID0gZGVmLnZhbHVlO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGJhZy5leGNsdXNpdmVNaW5pbXVtID0gZGVmLnZhbHVlO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgaWYgKGRlZi5pbmNsdXNpdmUgPyBwYXlsb2FkLnZhbHVlID49IGRlZi52YWx1ZSA6IHBheWxvYWQudmFsdWUgPiBkZWYudmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICAgIGNvZGU6IFwidG9vX3NtYWxsXCIsXG4gICAgICAgICAgICBtaW5pbXVtOiB0eXBlb2YgZGVmLnZhbHVlID09PSBcIm9iamVjdFwiID8gZGVmLnZhbHVlLmdldFRpbWUoKSA6IGRlZi52YWx1ZSxcbiAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBkZWYuaW5jbHVzaXZlLFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZENoZWNrTXVsdGlwbGVPZiA9IFxuLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDaGVja011bHRpcGxlT2ZcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAoX2EgPSBpbnN0Ll96b2QuYmFnKS5tdWx0aXBsZU9mID8/IChfYS5tdWx0aXBsZU9mID0gZGVmLnZhbHVlKTtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHBheWxvYWQudmFsdWUgIT09IHR5cGVvZiBkZWYudmFsdWUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgbWl4IG51bWJlciBhbmQgYmlnaW50IGluIG11bHRpcGxlX29mIGNoZWNrLlwiKTtcbiAgICAgICAgY29uc3QgaXNNdWx0aXBsZSA9IHR5cGVvZiBwYXlsb2FkLnZhbHVlID09PSBcImJpZ2ludFwiXG4gICAgICAgICAgICA/IHBheWxvYWQudmFsdWUgJSBkZWYudmFsdWUgPT09IEJpZ0ludCgwKVxuICAgICAgICAgICAgOiB1dGlsLmZsb2F0U2FmZVJlbWFpbmRlcihwYXlsb2FkLnZhbHVlLCBkZWYudmFsdWUpID09PSAwO1xuICAgICAgICBpZiAoaXNNdWx0aXBsZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBvcmlnaW46IHR5cGVvZiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgY29kZTogXCJub3RfbXVsdGlwbGVfb2ZcIixcbiAgICAgICAgICAgIGRpdmlzb3I6IGRlZi52YWx1ZSxcbiAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZENoZWNrTnVtYmVyRm9ybWF0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDaGVja051bWJlckZvcm1hdFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTsgLy8gbm8gZm9ybWF0IGNoZWNrc1xuICAgIGRlZi5mb3JtYXQgPSBkZWYuZm9ybWF0IHx8IFwiZmxvYXQ2NFwiO1xuICAgIGNvbnN0IGlzSW50ID0gZGVmLmZvcm1hdD8uaW5jbHVkZXMoXCJpbnRcIik7XG4gICAgY29uc3Qgb3JpZ2luID0gaXNJbnQgPyBcImludFwiIDogXCJudW1iZXJcIjtcbiAgICBjb25zdCBbbWluaW11bSwgbWF4aW11bV0gPSB1dGlsLk5VTUJFUl9GT1JNQVRfUkFOR0VTW2RlZi5mb3JtYXRdO1xuICAgIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7XG4gICAgICAgIGJhZy5mb3JtYXQgPSBkZWYuZm9ybWF0O1xuICAgICAgICBiYWcubWluaW11bSA9IG1pbmltdW07XG4gICAgICAgIGJhZy5tYXhpbXVtID0gbWF4aW11bTtcbiAgICAgICAgaWYgKGlzSW50KVxuICAgICAgICAgICAgYmFnLnBhdHRlcm4gPSByZWdleGVzLmludGVnZXI7XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBpZiAoaXNJbnQpIHtcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICAvLyBpbnZhbGlkX2Zvcm1hdCBpc3N1ZVxuICAgICAgICAgICAgICAgIC8vIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIC8vICAgZXhwZWN0ZWQ6IGRlZi5mb3JtYXQsXG4gICAgICAgICAgICAgICAgLy8gICBmb3JtYXQ6IGRlZi5mb3JtYXQsXG4gICAgICAgICAgICAgICAgLy8gICBjb2RlOiBcImludmFsaWRfZm9ybWF0XCIsXG4gICAgICAgICAgICAgICAgLy8gICBpbnB1dCxcbiAgICAgICAgICAgICAgICAvLyAgIGluc3QsXG4gICAgICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAgICAgLy8gaW52YWxpZF90eXBlIGlzc3VlXG4gICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBvcmlnaW4sXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogZGVmLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3R5cGVcIixcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgLy8gbm90X211bHRpcGxlX29mIGlzc3VlXG4gICAgICAgICAgICAgICAgLy8gcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgLy8gICBjb2RlOiBcIm5vdF9tdWx0aXBsZV9vZlwiLFxuICAgICAgICAgICAgICAgIC8vICAgb3JpZ2luOiBcIm51bWJlclwiLFxuICAgICAgICAgICAgICAgIC8vICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgLy8gICBpbnN0LFxuICAgICAgICAgICAgICAgIC8vICAgZGl2aXNvcjogMSxcbiAgICAgICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzU2FmZUludGVnZXIoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0b29fYmlnXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBcInRvb19iaWdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm90ZTogXCJJbnRlZ2VycyBtdXN0IGJlIHdpdGhpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlLlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRvb19zbWFsbFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogXCJ0b29fc21hbGxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm90ZTogXCJJbnRlZ2VycyBtdXN0IGJlIHdpdGhpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlLlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dCA8IG1pbmltdW0pIHtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG9yaWdpbjogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICBjb2RlOiBcInRvb19zbWFsbFwiLFxuICAgICAgICAgICAgICAgIG1pbmltdW0sXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQgPiBtYXhpbXVtKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcmlnaW46IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgY29kZTogXCJ0b29fYmlnXCIsXG4gICAgICAgICAgICAgICAgbWF4aW11bSxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja0JpZ0ludEZvcm1hdCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tCaWdJbnRGb3JtYXRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7IC8vIG5vIGZvcm1hdCBjaGVja3NcbiAgICBjb25zdCBbbWluaW11bSwgbWF4aW11bV0gPSB1dGlsLkJJR0lOVF9GT1JNQVRfUkFOR0VTW2RlZi5mb3JtYXRdO1xuICAgIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7XG4gICAgICAgIGJhZy5mb3JtYXQgPSBkZWYuZm9ybWF0O1xuICAgICAgICBiYWcubWluaW11bSA9IG1pbmltdW07XG4gICAgICAgIGJhZy5tYXhpbXVtID0gbWF4aW11bTtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmIChpbnB1dCA8IG1pbmltdW0pIHtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG9yaWdpbjogXCJiaWdpbnRcIixcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICBjb2RlOiBcInRvb19zbWFsbFwiLFxuICAgICAgICAgICAgICAgIG1pbmltdW06IG1pbmltdW0sXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQgPiBtYXhpbXVtKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcmlnaW46IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgY29kZTogXCJ0b29fYmlnXCIsXG4gICAgICAgICAgICAgICAgbWF4aW11bSxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja01heFNpemUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrTWF4U2l6ZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7XG4gICAgKF9hID0gaW5zdC5fem9kLmRlZikud2hlbiA/PyAoX2Eud2hlbiA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIHJldHVybiAhdXRpbC5udWxsaXNoKHZhbCkgJiYgdmFsLnNpemUgIT09IHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyID0gKGluc3QuX3pvZC5iYWcubWF4aW11bSA/PyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICBpZiAoZGVmLm1heGltdW0gPCBjdXJyKVxuICAgICAgICAgICAgaW5zdC5fem9kLmJhZy5tYXhpbXVtID0gZGVmLm1heGltdW07XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBjb25zdCBzaXplID0gaW5wdXQuc2l6ZTtcbiAgICAgICAgaWYgKHNpemUgPD0gZGVmLm1heGltdW0pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgb3JpZ2luOiB1dGlsLmdldFNpemFibGVPcmlnaW4oaW5wdXQpLFxuICAgICAgICAgICAgY29kZTogXCJ0b29fYmlnXCIsXG4gICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4aW11bSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZENoZWNrTWluU2l6ZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tNaW5TaXplXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICAoX2EgPSBpbnN0Ll96b2QuZGVmKS53aGVuID8/IChfYS53aGVuID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgdmFsID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgcmV0dXJuICF1dGlsLm51bGxpc2godmFsKSAmJiB2YWwuc2l6ZSAhPT0gdW5kZWZpbmVkO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnIgPSAoaW5zdC5fem9kLmJhZy5taW5pbXVtID8/IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSk7XG4gICAgICAgIGlmIChkZWYubWluaW11bSA+IGN1cnIpXG4gICAgICAgICAgICBpbnN0Ll96b2QuYmFnLm1pbmltdW0gPSBkZWYubWluaW11bTtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGNvbnN0IHNpemUgPSBpbnB1dC5zaXplO1xuICAgICAgICBpZiAoc2l6ZSA+PSBkZWYubWluaW11bSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBvcmlnaW46IHV0aWwuZ2V0U2l6YWJsZU9yaWdpbihpbnB1dCksXG4gICAgICAgICAgICBjb2RlOiBcInRvb19zbWFsbFwiLFxuICAgICAgICAgICAgbWluaW11bTogZGVmLm1pbmltdW0sXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja1NpemVFcXVhbHMgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrU2l6ZUVxdWFsc1wiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7XG4gICAgKF9hID0gaW5zdC5fem9kLmRlZikud2hlbiA/PyAoX2Eud2hlbiA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIHJldHVybiAhdXRpbC5udWxsaXNoKHZhbCkgJiYgdmFsLnNpemUgIT09IHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdCkgPT4ge1xuICAgICAgICBjb25zdCBiYWcgPSBpbnN0Ll96b2QuYmFnO1xuICAgICAgICBiYWcubWluaW11bSA9IGRlZi5zaXplO1xuICAgICAgICBiYWcubWF4aW11bSA9IGRlZi5zaXplO1xuICAgICAgICBiYWcuc2l6ZSA9IGRlZi5zaXplO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IGlucHV0LnNpemU7XG4gICAgICAgIGlmIChzaXplID09PSBkZWYuc2l6ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdG9vQmlnID0gc2l6ZSA+IGRlZi5zaXplO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIG9yaWdpbjogdXRpbC5nZXRTaXphYmxlT3JpZ2luKGlucHV0KSxcbiAgICAgICAgICAgIC4uLih0b29CaWcgPyB7IGNvZGU6IFwidG9vX2JpZ1wiLCBtYXhpbXVtOiBkZWYuc2l6ZSB9IDogeyBjb2RlOiBcInRvb19zbWFsbFwiLCBtaW5pbXVtOiBkZWYuc2l6ZSB9KSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tNYXhMZW5ndGggPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrTWF4TGVuZ3RoXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICAoX2EgPSBpbnN0Ll96b2QuZGVmKS53aGVuID8/IChfYS53aGVuID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgdmFsID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgcmV0dXJuICF1dGlsLm51bGxpc2godmFsKSAmJiB2YWwubGVuZ3RoICE9PSB1bmRlZmluZWQ7XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QpID0+IHtcbiAgICAgICAgY29uc3QgY3VyciA9IChpbnN0Ll96b2QuYmFnLm1heGltdW0gPz8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgaWYgKGRlZi5tYXhpbXVtIDwgY3VycilcbiAgICAgICAgICAgIGluc3QuX3pvZC5iYWcubWF4aW11bSA9IGRlZi5tYXhpbXVtO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoIDw9IGRlZi5tYXhpbXVtKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBvcmlnaW4gPSB1dGlsLmdldExlbmd0aGFibGVPcmlnaW4oaW5wdXQpO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICAgIGNvZGU6IFwidG9vX2JpZ1wiLFxuICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heGltdW0sXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja01pbkxlbmd0aCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tNaW5MZW5ndGhcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIHZhciBfYTtcbiAgICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpO1xuICAgIChfYSA9IGluc3QuX3pvZC5kZWYpLndoZW4gPz8gKF9hLndoZW4gPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICBjb25zdCB2YWwgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICByZXR1cm4gIXV0aWwubnVsbGlzaCh2YWwpICYmIHZhbC5sZW5ndGggIT09IHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyID0gKGluc3QuX3pvZC5iYWcubWluaW11bSA/PyBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICBpZiAoZGVmLm1pbmltdW0gPiBjdXJyKVxuICAgICAgICAgICAgaW5zdC5fem9kLmJhZy5taW5pbXVtID0gZGVmLm1pbmltdW07XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBjb25zdCBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgIGlmIChsZW5ndGggPj0gZGVmLm1pbmltdW0pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IHV0aWwuZ2V0TGVuZ3RoYWJsZU9yaWdpbihpbnB1dCk7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgb3JpZ2luLFxuICAgICAgICAgICAgY29kZTogXCJ0b29fc21hbGxcIixcbiAgICAgICAgICAgIG1pbmltdW06IGRlZi5taW5pbXVtLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tMZW5ndGhFcXVhbHMgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrTGVuZ3RoRXF1YWxzXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICAoX2EgPSBpbnN0Ll96b2QuZGVmKS53aGVuID8/IChfYS53aGVuID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgdmFsID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgcmV0dXJuICF1dGlsLm51bGxpc2godmFsKSAmJiB2YWwubGVuZ3RoICE9PSB1bmRlZmluZWQ7XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QpID0+IHtcbiAgICAgICAgY29uc3QgYmFnID0gaW5zdC5fem9kLmJhZztcbiAgICAgICAgYmFnLm1pbmltdW0gPSBkZWYubGVuZ3RoO1xuICAgICAgICBiYWcubWF4aW11bSA9IGRlZi5sZW5ndGg7XG4gICAgICAgIGJhZy5sZW5ndGggPSBkZWYubGVuZ3RoO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoID09PSBkZWYubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBvcmlnaW4gPSB1dGlsLmdldExlbmd0aGFibGVPcmlnaW4oaW5wdXQpO1xuICAgICAgICBjb25zdCB0b29CaWcgPSBsZW5ndGggPiBkZWYubGVuZ3RoO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICAgIC4uLih0b29CaWcgPyB7IGNvZGU6IFwidG9vX2JpZ1wiLCBtYXhpbXVtOiBkZWYubGVuZ3RoIH0gOiB7IGNvZGU6IFwidG9vX3NtYWxsXCIsIG1pbmltdW06IGRlZi5sZW5ndGggfSksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZENoZWNrU3RyaW5nRm9ybWF0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDaGVja1N0cmluZ0Zvcm1hdFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7XG4gICAgICAgIGJhZy5mb3JtYXQgPSBkZWYuZm9ybWF0O1xuICAgICAgICBpZiAoZGVmLnBhdHRlcm4pIHtcbiAgICAgICAgICAgIGJhZy5wYXR0ZXJucyA/PyAoYmFnLnBhdHRlcm5zID0gbmV3IFNldCgpKTtcbiAgICAgICAgICAgIGJhZy5wYXR0ZXJucy5hZGQoZGVmLnBhdHRlcm4pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGRlZi5wYXR0ZXJuKVxuICAgICAgICAoX2EgPSBpbnN0Ll96b2QpLmNoZWNrID8/IChfYS5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICBkZWYucGF0dGVybi5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgaWYgKGRlZi5wYXR0ZXJuLnRlc3QocGF5bG9hZC52YWx1ZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3JpZ2luOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF9mb3JtYXRcIixcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IGRlZi5mb3JtYXQsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICAgICAgLi4uKGRlZi5wYXR0ZXJuID8geyBwYXR0ZXJuOiBkZWYucGF0dGVybi50b1N0cmluZygpIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICBlbHNlXG4gICAgICAgIChfYiA9IGluc3QuX3pvZCkuY2hlY2sgPz8gKF9iLmNoZWNrID0gKCkgPT4geyB9KTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja1JlZ2V4ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDaGVja1JlZ2V4XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kQ2hlY2tTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGRlZi5wYXR0ZXJuLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIGlmIChkZWYucGF0dGVybi50ZXN0KHBheWxvYWQudmFsdWUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIG9yaWdpbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF9mb3JtYXRcIixcbiAgICAgICAgICAgIGZvcm1hdDogXCJyZWdleFwiLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBwYXR0ZXJuOiBkZWYucGF0dGVybi50b1N0cmluZygpLFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZENoZWNrTG93ZXJDYXNlID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDaGVja0xvd2VyQ2FzZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gcmVnZXhlcy5sb3dlcmNhc2UpO1xuICAgICRab2RDaGVja1N0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tVcHBlckNhc2UgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrVXBwZXJDYXNlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLnVwcGVyY2FzZSk7XG4gICAgJFpvZENoZWNrU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja0luY2x1ZGVzID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDaGVja0luY2x1ZGVzXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvbnN0IGVzY2FwZWRSZWdleCA9IHV0aWwuZXNjYXBlUmVnZXgoZGVmLmluY2x1ZGVzKTtcbiAgICBjb25zdCBwYXR0ZXJuID0gbmV3IFJlZ0V4cCh0eXBlb2YgZGVmLnBvc2l0aW9uID09PSBcIm51bWJlclwiID8gYF4ueyR7ZGVmLnBvc2l0aW9ufX0ke2VzY2FwZWRSZWdleH1gIDogZXNjYXBlZFJlZ2V4KTtcbiAgICBkZWYucGF0dGVybiA9IHBhdHRlcm47XG4gICAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QpID0+IHtcbiAgICAgICAgY29uc3QgYmFnID0gaW5zdC5fem9kLmJhZztcbiAgICAgICAgYmFnLnBhdHRlcm5zID8/IChiYWcucGF0dGVybnMgPSBuZXcgU2V0KCkpO1xuICAgICAgICBiYWcucGF0dGVybnMuYWRkKHBhdHRlcm4pO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGlmIChwYXlsb2FkLnZhbHVlLmluY2x1ZGVzKGRlZi5pbmNsdWRlcywgZGVmLnBvc2l0aW9uKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBvcmlnaW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICBjb2RlOiBcImludmFsaWRfZm9ybWF0XCIsXG4gICAgICAgICAgICBmb3JtYXQ6IFwiaW5jbHVkZXNcIixcbiAgICAgICAgICAgIGluY2x1ZGVzOiBkZWYuaW5jbHVkZXMsXG4gICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja1N0YXJ0c1dpdGggPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrU3RhcnRzV2l0aFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb25zdCBwYXR0ZXJuID0gbmV3IFJlZ0V4cChgXiR7dXRpbC5lc2NhcGVSZWdleChkZWYucHJlZml4KX0uKmApO1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHBhdHRlcm4pO1xuICAgIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7XG4gICAgICAgIGJhZy5wYXR0ZXJucyA/PyAoYmFnLnBhdHRlcm5zID0gbmV3IFNldCgpKTtcbiAgICAgICAgYmFnLnBhdHRlcm5zLmFkZChwYXR0ZXJuKTtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICBpZiAocGF5bG9hZC52YWx1ZS5zdGFydHNXaXRoKGRlZi5wcmVmaXgpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIG9yaWdpbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF9mb3JtYXRcIixcbiAgICAgICAgICAgIGZvcm1hdDogXCJzdGFydHNfd2l0aFwiLFxuICAgICAgICAgICAgcHJlZml4OiBkZWYucHJlZml4LFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tFbmRzV2l0aCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tFbmRzV2l0aFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb25zdCBwYXR0ZXJuID0gbmV3IFJlZ0V4cChgLioke3V0aWwuZXNjYXBlUmVnZXgoZGVmLnN1ZmZpeCl9JGApO1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHBhdHRlcm4pO1xuICAgIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7XG4gICAgICAgIGJhZy5wYXR0ZXJucyA/PyAoYmFnLnBhdHRlcm5zID0gbmV3IFNldCgpKTtcbiAgICAgICAgYmFnLnBhdHRlcm5zLmFkZChwYXR0ZXJuKTtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICBpZiAocGF5bG9hZC52YWx1ZS5lbmRzV2l0aChkZWYuc3VmZml4KSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBvcmlnaW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICBjb2RlOiBcImludmFsaWRfZm9ybWF0XCIsXG4gICAgICAgICAgICBmb3JtYXQ6IFwiZW5kc193aXRoXCIsXG4gICAgICAgICAgICBzdWZmaXg6IGRlZi5zdWZmaXgsXG4gICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pO1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vICAgICRab2RDaGVja1Byb3BlcnR5ICAgIC8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gaGFuZGxlQ2hlY2tQcm9wZXJ0eVJlc3VsdChyZXN1bHQsIHBheWxvYWQsIHByb3BlcnR5KSB7XG4gICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goLi4udXRpbC5wcmVmaXhJc3N1ZXMocHJvcGVydHksIHJlc3VsdC5pc3N1ZXMpKTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgJFpvZENoZWNrUHJvcGVydHkgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrUHJvcGVydHlcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZGVmLnNjaGVtYS5fem9kLnJ1bih7XG4gICAgICAgICAgICB2YWx1ZTogcGF5bG9hZC52YWx1ZVtkZWYucHJvcGVydHldLFxuICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgfSwge30pO1xuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IGhhbmRsZUNoZWNrUHJvcGVydHlSZXN1bHQocmVzdWx0LCBwYXlsb2FkLCBkZWYucHJvcGVydHkpKTtcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVDaGVja1Byb3BlcnR5UmVzdWx0KHJlc3VsdCwgcGF5bG9hZCwgZGVmLnByb3BlcnR5KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tNaW1lVHlwZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tNaW1lVHlwZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb25zdCBtaW1lU2V0ID0gbmV3IFNldChkZWYubWltZSk7XG4gICAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QpID0+IHtcbiAgICAgICAgaW5zdC5fem9kLmJhZy5taW1lID0gZGVmLm1pbWU7XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgaWYgKG1pbWVTZXQuaGFzKHBheWxvYWQudmFsdWUudHlwZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3ZhbHVlXCIsXG4gICAgICAgICAgICB2YWx1ZXM6IGRlZi5taW1lLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUudHlwZSxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja092ZXJ3cml0ZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tPdmVyd3JpdGVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgcGF5bG9hZC52YWx1ZSA9IGRlZi50eChwYXlsb2FkLnZhbHVlKTtcbiAgICB9O1xufSk7XG4iLCJleHBvcnQgY2xhc3MgRG9jIHtcbiAgICBjb25zdHJ1Y3RvcihhcmdzID0gW10pIHtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gW107XG4gICAgICAgIHRoaXMuaW5kZW50ID0gMDtcbiAgICAgICAgaWYgKHRoaXMpXG4gICAgICAgICAgICB0aGlzLmFyZ3MgPSBhcmdzO1xuICAgIH1cbiAgICBpbmRlbnRlZChmbikge1xuICAgICAgICB0aGlzLmluZGVudCArPSAxO1xuICAgICAgICBmbih0aGlzKTtcbiAgICAgICAgdGhpcy5pbmRlbnQgLT0gMTtcbiAgICB9XG4gICAgd3JpdGUoYXJnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJnID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGFyZyh0aGlzLCB7IGV4ZWN1dGlvbjogXCJzeW5jXCIgfSk7XG4gICAgICAgICAgICBhcmcodGhpcywgeyBleGVjdXRpb246IFwiYXN5bmNcIiB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250ZW50ID0gYXJnO1xuICAgICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoXCJcXG5cIikuZmlsdGVyKCh4KSA9PiB4KTtcbiAgICAgICAgY29uc3QgbWluSW5kZW50ID0gTWF0aC5taW4oLi4ubGluZXMubWFwKCh4KSA9PiB4Lmxlbmd0aCAtIHgudHJpbVN0YXJ0KCkubGVuZ3RoKSk7XG4gICAgICAgIGNvbnN0IGRlZGVudGVkID0gbGluZXMubWFwKCh4KSA9PiB4LnNsaWNlKG1pbkluZGVudCkpLm1hcCgoeCkgPT4gXCIgXCIucmVwZWF0KHRoaXMuaW5kZW50ICogMikgKyB4KTtcbiAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGRlZGVudGVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQucHVzaChsaW5lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21waWxlKCkge1xuICAgICAgICBjb25zdCBGID0gRnVuY3Rpb247XG4gICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzPy5hcmdzO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gdGhpcz8uY29udGVudCA/PyBbYGBdO1xuICAgICAgICBjb25zdCBsaW5lcyA9IFsuLi5jb250ZW50Lm1hcCgoeCkgPT4gYCAgJHt4fWApXTtcbiAgICAgICAgLy8gY29uc29sZS5sb2cobGluZXMuam9pbihcIlxcblwiKSk7XG4gICAgICAgIHJldHVybiBuZXcgRiguLi5hcmdzLCBsaW5lcy5qb2luKFwiXFxuXCIpKTtcbiAgICB9XG59XG4iLCJleHBvcnQgY29uc3QgdmVyc2lvbiA9IHtcbiAgICBtYWpvcjogNCxcbiAgICBtaW5vcjogMyxcbiAgICBwYXRjaDogNSxcbn07XG4iLCJpbXBvcnQgKiBhcyBjaGVja3MgZnJvbSBcIi4vY2hlY2tzLmpzXCI7XG5pbXBvcnQgKiBhcyBjb3JlIGZyb20gXCIuL2NvcmUuanNcIjtcbmltcG9ydCB7IERvYyB9IGZyb20gXCIuL2RvYy5qc1wiO1xuaW1wb3J0IHsgcGFyc2UsIHBhcnNlQXN5bmMsIHNhZmVQYXJzZSwgc2FmZVBhcnNlQXN5bmMgfSBmcm9tIFwiLi9wYXJzZS5qc1wiO1xuaW1wb3J0ICogYXMgcmVnZXhlcyBmcm9tIFwiLi9yZWdleGVzLmpzXCI7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gXCIuL3V0aWwuanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi92ZXJzaW9ucy5qc1wiO1xuZXhwb3J0IGNvbnN0ICRab2RUeXBlID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RUeXBlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgaW5zdCA/PyAoaW5zdCA9IHt9KTtcbiAgICBpbnN0Ll96b2QuZGVmID0gZGVmOyAvLyBzZXQgX2RlZiBwcm9wZXJ0eVxuICAgIGluc3QuX3pvZC5iYWcgPSBpbnN0Ll96b2QuYmFnIHx8IHt9OyAvLyBpbml0aWFsaXplIF9iYWcgb2JqZWN0XG4gICAgaW5zdC5fem9kLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgIGNvbnN0IGNoZWNrcyA9IFsuLi4oaW5zdC5fem9kLmRlZi5jaGVja3MgPz8gW10pXTtcbiAgICAvLyBpZiBpbnN0IGlzIGl0c2VsZiBhIGNoZWNrcy4kWm9kQ2hlY2ssIHJ1biBpdCBhcyBhIGNoZWNrXG4gICAgaWYgKGluc3QuX3pvZC50cmFpdHMuaGFzKFwiJFpvZENoZWNrXCIpKSB7XG4gICAgICAgIGNoZWNrcy51bnNoaWZ0KGluc3QpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNoIG9mIGNoZWNrcykge1xuICAgICAgICBmb3IgKGNvbnN0IGZuIG9mIGNoLl96b2Qub25hdHRhY2gpIHtcbiAgICAgICAgICAgIGZuKGluc3QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjaGVja3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIGRlZmVycmVkIGluaXRpYWxpemVyXG4gICAgICAgIC8vIGluc3QuX3pvZC5wYXJzZSBpcyBub3QgeWV0IGRlZmluZWRcbiAgICAgICAgKF9hID0gaW5zdC5fem9kKS5kZWZlcnJlZCA/PyAoX2EuZGVmZXJyZWQgPSBbXSk7XG4gICAgICAgIGluc3QuX3pvZC5kZWZlcnJlZD8ucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICBpbnN0Ll96b2QucnVuID0gaW5zdC5fem9kLnBhcnNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHJ1bkNoZWNrcyA9IChwYXlsb2FkLCBjaGVja3MsIGN0eCkgPT4ge1xuICAgICAgICAgICAgbGV0IGlzQWJvcnRlZCA9IHV0aWwuYWJvcnRlZChwYXlsb2FkKTtcbiAgICAgICAgICAgIGxldCBhc3luY1Jlc3VsdDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2ggb2YgY2hlY2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoLl96b2QuZGVmLndoZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkUnVuID0gY2guX3pvZC5kZWYud2hlbihwYXlsb2FkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzaG91bGRSdW4pXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNBYm9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyTGVuID0gcGF5bG9hZC5pc3N1ZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGNvbnN0IF8gPSBjaC5fem9kLmNoZWNrKHBheWxvYWQpO1xuICAgICAgICAgICAgICAgIGlmIChfIGluc3RhbmNlb2YgUHJvbWlzZSAmJiBjdHg/LmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgY29yZS4kWm9kQXN5bmNFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYXN5bmNSZXN1bHQgfHwgXyBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmNSZXN1bHQgPSAoYXN5bmNSZXN1bHQgPz8gUHJvbWlzZS5yZXNvbHZlKCkpLnRoZW4oYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgXztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRMZW4gPSBwYXlsb2FkLmlzc3Vlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dExlbiA9PT0gY3VyckxlbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQWJvcnRlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Fib3J0ZWQgPSB1dGlsLmFib3J0ZWQocGF5bG9hZCwgY3Vyckxlbik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dExlbiA9IHBheWxvYWQuaXNzdWVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRMZW4gPT09IGN1cnJMZW4pXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0Fib3J0ZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0Fib3J0ZWQgPSB1dGlsLmFib3J0ZWQocGF5bG9hZCwgY3Vyckxlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFzeW5jUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFzeW5jUmVzdWx0LnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVDYW5hcnlSZXN1bHQgPSAoY2FuYXJ5LCBwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgICAgIC8vIGFib3J0IGlmIHRoZSBjYW5hcnkgaXMgYWJvcnRlZFxuICAgICAgICAgICAgaWYgKHV0aWwuYWJvcnRlZChjYW5hcnkpKSB7XG4gICAgICAgICAgICAgICAgY2FuYXJ5LmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBjYW5hcnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBydW4gY2hlY2tzIGZpcnN0LCB0aGVuXG4gICAgICAgICAgICBjb25zdCBjaGVja1Jlc3VsdCA9IHJ1bkNoZWNrcyhwYXlsb2FkLCBjaGVja3MsIGN0eCk7XG4gICAgICAgICAgICBpZiAoY2hlY2tSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN0eC5hc3luYyA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBjb3JlLiRab2RBc3luY0Vycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrUmVzdWx0LnRoZW4oKGNoZWNrUmVzdWx0KSA9PiBpbnN0Ll96b2QucGFyc2UoY2hlY2tSZXN1bHQsIGN0eCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluc3QuX3pvZC5wYXJzZShjaGVja1Jlc3VsdCwgY3R4KTtcbiAgICAgICAgfTtcbiAgICAgICAgaW5zdC5fem9kLnJ1biA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGlmIChjdHguc2tpcENoZWNrcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0Ll96b2QucGFyc2UocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdHguZGlyZWN0aW9uID09PSBcImJhY2t3YXJkXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBydW4gY2FuYXJ5XG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbCBwYXNzIChubyBjaGVja3MpXG4gICAgICAgICAgICAgICAgY29uc3QgY2FuYXJ5ID0gaW5zdC5fem9kLnBhcnNlKHsgdmFsdWU6IHBheWxvYWQudmFsdWUsIGlzc3VlczogW10gfSwgeyAuLi5jdHgsIHNraXBDaGVja3M6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbmFyeSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbmFyeS50aGVuKChjYW5hcnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVDYW5hcnlSZXN1bHQoY2FuYXJ5LCBwYXlsb2FkLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNhbmFyeVJlc3VsdChjYW5hcnksIHBheWxvYWQsIGN0eCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBmb3J3YXJkXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBpbnN0Ll96b2QucGFyc2UocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN0eC5hc3luYyA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBjb3JlLiRab2RBc3luY0Vycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHJ1bkNoZWNrcyhyZXN1bHQsIGNoZWNrcywgY3R4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVuQ2hlY2tzKHJlc3VsdCwgY2hlY2tzLCBjdHgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBMYXp5IGluaXRpYWxpemUgfnN0YW5kYXJkIHRvIGF2b2lkIGNyZWF0aW5nIG9iamVjdHMgZm9yIGV2ZXJ5IHNjaGVtYVxuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0LCBcIn5zdGFuZGFyZFwiLCAoKSA9PiAoe1xuICAgICAgICB2YWxpZGF0ZTogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBzYWZlUGFyc2UoaW5zdCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiByLnN1Y2Nlc3MgPyB7IHZhbHVlOiByLmRhdGEgfSA6IHsgaXNzdWVzOiByLmVycm9yPy5pc3N1ZXMgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNhZmVQYXJzZUFzeW5jKGluc3QsIHZhbHVlKS50aGVuKChyKSA9PiAoci5zdWNjZXNzID8geyB2YWx1ZTogci5kYXRhIH0gOiB7IGlzc3Vlczogci5lcnJvcj8uaXNzdWVzIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdmVuZG9yOiBcInpvZFwiLFxuICAgICAgICB2ZXJzaW9uOiAxLFxuICAgIH0pKTtcbn0pO1xuZXhwb3J0IHsgY2xvbmUgfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5leHBvcnQgY29uc3QgJFpvZFN0cmluZyA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kU3RyaW5nXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnBhdHRlcm4gPSBbLi4uKGluc3Q/Ll96b2QuYmFnPy5wYXR0ZXJucyA/PyBbXSldLnBvcCgpID8/IHJlZ2V4ZXMuc3RyaW5nKGluc3QuX3pvZC5iYWcpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfKSA9PiB7XG4gICAgICAgIGlmIChkZWYuY29lcmNlKVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkLnZhbHVlID0gU3RyaW5nKHBheWxvYWQudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxuICAgICAgICBpZiAodHlwZW9mIHBheWxvYWQudmFsdWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBleHBlY3RlZDogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZFN0cmluZ0Zvcm1hdCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kU3RyaW5nRm9ybWF0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBjaGVjayBpbml0aWFsaXphdGlvbiBtdXN0IGNvbWUgZmlyc3RcbiAgICBjaGVja3MuJFpvZENoZWNrU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICAkWm9kU3RyaW5nLmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RHVUlEID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RHVUlEXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLmd1aWQpO1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZFVVSUQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFVVSURcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGlmIChkZWYudmVyc2lvbikge1xuICAgICAgICBjb25zdCB2ZXJzaW9uTWFwID0ge1xuICAgICAgICAgICAgdjE6IDEsXG4gICAgICAgICAgICB2MjogMixcbiAgICAgICAgICAgIHYzOiAzLFxuICAgICAgICAgICAgdjQ6IDQsXG4gICAgICAgICAgICB2NTogNSxcbiAgICAgICAgICAgIHY2OiA2LFxuICAgICAgICAgICAgdjc6IDcsXG4gICAgICAgICAgICB2ODogOCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdiA9IHZlcnNpb25NYXBbZGVmLnZlcnNpb25dO1xuICAgICAgICBpZiAodiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIFVVSUQgdmVyc2lvbjogXCIke2RlZi52ZXJzaW9ufVwiYCk7XG4gICAgICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMudXVpZCh2KSk7XG4gICAgfVxuICAgIGVsc2VcbiAgICAgICAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gcmVnZXhlcy51dWlkKCkpO1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZEVtYWlsID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RFbWFpbFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gcmVnZXhlcy5lbWFpbCk7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kVVJMID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RVUkxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUcmltIHdoaXRlc3BhY2UgZnJvbSBpbnB1dFxuICAgICAgICAgICAgY29uc3QgdHJpbW1lZCA9IHBheWxvYWQudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh0cmltbWVkKTtcbiAgICAgICAgICAgIGlmIChkZWYuaG9zdG5hbWUpIHtcbiAgICAgICAgICAgICAgICBkZWYuaG9zdG5hbWUubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoIWRlZi5ob3N0bmFtZS50ZXN0KHVybC5ob3N0bmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfZm9ybWF0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RlOiBcIkludmFsaWQgaG9zdG5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm46IGRlZi5ob3N0bmFtZS5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlZi5wcm90b2NvbCkge1xuICAgICAgICAgICAgICAgIGRlZi5wcm90b2NvbC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGlmICghZGVmLnByb3RvY29sLnRlc3QodXJsLnByb3RvY29sLmVuZHNXaXRoKFwiOlwiKSA/IHVybC5wcm90b2NvbC5zbGljZSgwLCAtMSkgOiB1cmwucHJvdG9jb2wpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2Zvcm1hdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm90ZTogXCJJbnZhbGlkIHByb3RvY29sXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiBkZWYucHJvdG9jb2wuc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNldCB0aGUgb3V0cHV0IHZhbHVlIGJhc2VkIG9uIG5vcm1hbGl6ZSBmbGFnXG4gICAgICAgICAgICBpZiAoZGVmLm5vcm1hbGl6ZSkge1xuICAgICAgICAgICAgICAgIC8vIFVzZSBub3JtYWxpemVkIFVSTFxuICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSB1cmwuaHJlZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFByZXNlcnZlIHRoZSBvcmlnaW5hbCBpbnB1dCAodHJpbW1lZClcbiAgICAgICAgICAgICAgICBwYXlsb2FkLnZhbHVlID0gdHJpbW1lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoXykge1xuICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2Zvcm1hdFwiLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZEVtb2ppID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RFbW9qaVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gcmVnZXhlcy5lbW9qaSgpKTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2ROYW5vSUQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZE5hbm9JRFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gcmVnZXhlcy5uYW5vaWQpO1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZENVSUQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENVSURcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMuY3VpZCk7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ1VJRDIgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENVSUQyXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLmN1aWQyKTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RVTElEID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RVTElEXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLnVsaWQpO1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZFhJRCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kWElEXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLnhpZCk7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kS1NVSUQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEtTVUlEXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLmtzdWlkKTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RJU09EYXRlVGltZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kSVNPRGF0ZVRpbWVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMuZGF0ZXRpbWUoZGVmKSk7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kSVNPRGF0ZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kSVNPRGF0ZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gcmVnZXhlcy5kYXRlKTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RJU09UaW1lID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RJU09UaW1lXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLnRpbWUoZGVmKSk7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kSVNPRHVyYXRpb24gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZElTT0R1cmF0aW9uXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLmR1cmF0aW9uKTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RJUHY0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RJUHY0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLmlwdjQpO1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5iYWcuZm9ybWF0ID0gYGlwdjRgO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZElQdjYgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZElQdjZcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMuaXB2Nik7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLmJhZy5mb3JtYXQgPSBgaXB2NmA7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIG5ldyBVUkwoYGh0dHA6Ly9bJHtwYXlsb2FkLnZhbHVlfV1gKTtcbiAgICAgICAgICAgIC8vIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfZm9ybWF0XCIsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiBcImlwdjZcIixcbiAgICAgICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZE1BQyA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kTUFDXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLm1hYyhkZWYuZGVsaW1pdGVyKSk7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLmJhZy5mb3JtYXQgPSBgbWFjYDtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDSURSdjQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENJRFJ2NFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gcmVnZXhlcy5jaWRydjQpO1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZENJRFJ2NiA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ0lEUnY2XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLmNpZHJ2Nik7IC8vIG5vdCB1c2VkIGZvciB2YWxpZGF0aW9uXG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBwYXlsb2FkLnZhbHVlLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggIT09IDIpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgICAgICBjb25zdCBbYWRkcmVzcywgcHJlZml4XSA9IHBhcnRzO1xuICAgICAgICAgICAgaWYgKCFwcmVmaXgpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgICAgICBjb25zdCBwcmVmaXhOdW0gPSBOdW1iZXIocHJlZml4KTtcbiAgICAgICAgICAgIGlmIChgJHtwcmVmaXhOdW19YCAhPT0gcHJlZml4KVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICAgICAgaWYgKHByZWZpeE51bSA8IDAgfHwgcHJlZml4TnVtID4gMTI4KVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgbmV3IFVSTChgaHR0cDovL1ske2FkZHJlc3N9XWApO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF9mb3JtYXRcIixcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiY2lkcnY2XCIsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vICAgWm9kQmFzZTY0ICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEJhc2U2NChkYXRhKSB7XG4gICAgaWYgKGRhdGEgPT09IFwiXCIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChkYXRhLmxlbmd0aCAlIDQgIT09IDApXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGF0b2IoZGF0YSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgJFpvZEJhc2U2NCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQmFzZTY0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLmJhc2U2NCk7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLmJhZy5jb250ZW50RW5jb2RpbmcgPSBcImJhc2U2NFwiO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGlmIChpc1ZhbGlkQmFzZTY0KHBheWxvYWQudmFsdWUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF9mb3JtYXRcIixcbiAgICAgICAgICAgIGZvcm1hdDogXCJiYXNlNjRcIixcbiAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gICBab2RCYXNlNjQgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkQmFzZTY0VVJMKGRhdGEpIHtcbiAgICBpZiAoIXJlZ2V4ZXMuYmFzZTY0dXJsLnRlc3QoZGF0YSkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBiYXNlNjQgPSBkYXRhLnJlcGxhY2UoL1stX10vZywgKGMpID0+IChjID09PSBcIi1cIiA/IFwiK1wiIDogXCIvXCIpKTtcbiAgICBjb25zdCBwYWRkZWQgPSBiYXNlNjQucGFkRW5kKE1hdGguY2VpbChiYXNlNjQubGVuZ3RoIC8gNCkgKiA0LCBcIj1cIik7XG4gICAgcmV0dXJuIGlzVmFsaWRCYXNlNjQocGFkZGVkKTtcbn1cbmV4cG9ydCBjb25zdCAkWm9kQmFzZTY0VVJMID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RCYXNlNjRVUkxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMuYmFzZTY0dXJsKTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QuYmFnLmNvbnRlbnRFbmNvZGluZyA9IFwiYmFzZTY0dXJsXCI7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgaWYgKGlzVmFsaWRCYXNlNjRVUkwocGF5bG9hZC52YWx1ZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2Zvcm1hdFwiLFxuICAgICAgICAgICAgZm9ybWF0OiBcImJhc2U2NHVybFwiLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kRTE2NCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kRTE2NFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gcmVnZXhlcy5lMTY0KTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vICAgWm9kSldUICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEpXVCh0b2tlbiwgYWxnb3JpdGhtID0gbnVsbCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2Vuc1BhcnRzID0gdG9rZW4uc3BsaXQoXCIuXCIpO1xuICAgICAgICBpZiAodG9rZW5zUGFydHMubGVuZ3RoICE9PSAzKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBjb25zdCBbaGVhZGVyXSA9IHRva2Vuc1BhcnRzO1xuICAgICAgICBpZiAoIWhlYWRlcilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBwYXJzZWRIZWFkZXIgPSBKU09OLnBhcnNlKGF0b2IoaGVhZGVyKSk7XG4gICAgICAgIGlmIChcInR5cFwiIGluIHBhcnNlZEhlYWRlciAmJiBwYXJzZWRIZWFkZXI/LnR5cCAhPT0gXCJKV1RcIilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFwYXJzZWRIZWFkZXIuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnb3JpdGhtICYmICghKFwiYWxnXCIgaW4gcGFyc2VkSGVhZGVyKSB8fCBwYXJzZWRIZWFkZXIuYWxnICE9PSBhbGdvcml0aG0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0ICRab2RKV1QgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEpXVFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgaWYgKGlzVmFsaWRKV1QocGF5bG9hZC52YWx1ZSwgZGVmLmFsZykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2Zvcm1hdFwiLFxuICAgICAgICAgICAgZm9ybWF0OiBcImp3dFwiLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ3VzdG9tU3RyaW5nRm9ybWF0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDdXN0b21TdHJpbmdGb3JtYXRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGlmIChkZWYuZm4ocGF5bG9hZC52YWx1ZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2Zvcm1hdFwiLFxuICAgICAgICAgICAgZm9ybWF0OiBkZWYuZm9ybWF0LFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kTnVtYmVyID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2ROdW1iZXJcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGF0dGVybiA9IGluc3QuX3pvZC5iYWcucGF0dGVybiA/PyByZWdleGVzLm51bWJlcjtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBpZiAoZGVmLmNvZXJjZSlcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC52YWx1ZSA9IE51bWJlcihwYXlsb2FkLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcIm51bWJlclwiICYmICFOdW1iZXIuaXNOYU4oaW5wdXQpICYmIE51bWJlci5pc0Zpbml0ZShpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlY2VpdmVkID0gdHlwZW9mIGlucHV0ID09PSBcIm51bWJlclwiXG4gICAgICAgICAgICA/IE51bWJlci5pc05hTihpbnB1dClcbiAgICAgICAgICAgICAgICA/IFwiTmFOXCJcbiAgICAgICAgICAgICAgICA6ICFOdW1iZXIuaXNGaW5pdGUoaW5wdXQpXG4gICAgICAgICAgICAgICAgICAgID8gXCJJbmZpbml0eVwiXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBleHBlY3RlZDogXCJudW1iZXJcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICAuLi4ocmVjZWl2ZWQgPyB7IHJlY2VpdmVkIH0gOiB7fSksXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZE51bWJlckZvcm1hdCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kTnVtYmVyRm9ybWF0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjaGVja3MuJFpvZENoZWNrTnVtYmVyRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICAkWm9kTnVtYmVyLmluaXQoaW5zdCwgZGVmKTsgLy8gbm8gZm9ybWF0IGNoZWNrc1xufSk7XG5leHBvcnQgY29uc3QgJFpvZEJvb2xlYW4gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEJvb2xlYW5cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGF0dGVybiA9IHJlZ2V4ZXMuYm9vbGVhbjtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBpZiAoZGVmLmNvZXJjZSlcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC52YWx1ZSA9IEJvb2xlYW4ocGF5bG9hZC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoXykgeyB9XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJib29sZWFuXCIpXG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBleHBlY3RlZDogXCJib29sZWFuXCIsXG4gICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RCaWdJbnQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEJpZ0ludFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXR0ZXJuID0gcmVnZXhlcy5iaWdpbnQ7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIF9jdHgpID0+IHtcbiAgICAgICAgaWYgKGRlZi5jb2VyY2UpXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSBCaWdJbnQocGF5bG9hZC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoXykgeyB9XG4gICAgICAgIGlmICh0eXBlb2YgcGF5bG9hZC52YWx1ZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIGV4cGVjdGVkOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3R5cGVcIixcbiAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQmlnSW50Rm9ybWF0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RCaWdJbnRGb3JtYXRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNoZWNrcy4kWm9kQ2hlY2tCaWdJbnRGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgICRab2RCaWdJbnQuaW5pdChpbnN0LCBkZWYpOyAvLyBubyBmb3JtYXQgY2hlY2tzXG59KTtcbmV4cG9ydCBjb25zdCAkWm9kU3ltYm9sID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RTeW1ib2xcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3ltYm9sXCIpXG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBleHBlY3RlZDogXCJzeW1ib2xcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZFVuZGVmaW5lZCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kVW5kZWZpbmVkXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnBhdHRlcm4gPSByZWdleGVzLnVuZGVmaW5lZDtcbiAgICBpbnN0Ll96b2QudmFsdWVzID0gbmV3IFNldChbdW5kZWZpbmVkXSk7XG4gICAgaW5zdC5fem9kLm9wdGluID0gXCJvcHRpb25hbFwiO1xuICAgIGluc3QuX3pvZC5vcHRvdXQgPSBcIm9wdGlvbmFsXCI7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIF9jdHgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgZXhwZWN0ZWQ6IFwidW5kZWZpbmVkXCIsXG4gICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2ROdWxsID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2ROdWxsXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnBhdHRlcm4gPSByZWdleGVzLm51bGw7XG4gICAgaW5zdC5fem9kLnZhbHVlcyA9IG5ldyBTZXQoW251bGxdKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIGV4cGVjdGVkOiBcIm51bGxcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZEFueSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQW55XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQpID0+IHBheWxvYWQ7XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kVW5rbm93biA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kVW5rbm93blwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkKSA9PiBwYXlsb2FkO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZE5ldmVyID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2ROZXZlclwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgZXhwZWN0ZWQ6IFwibmV2ZXJcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZFZvaWQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFZvaWRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBleHBlY3RlZDogXCJ2b2lkXCIsXG4gICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2REYXRlID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2REYXRlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIF9jdHgpID0+IHtcbiAgICAgICAgaWYgKGRlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC52YWx1ZSA9IG5ldyBEYXRlKHBheWxvYWQudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9lcnIpIHsgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgY29uc3QgaXNEYXRlID0gaW5wdXQgaW5zdGFuY2VvZiBEYXRlO1xuICAgICAgICBjb25zdCBpc1ZhbGlkRGF0ZSA9IGlzRGF0ZSAmJiAhTnVtYmVyLmlzTmFOKGlucHV0LmdldFRpbWUoKSk7XG4gICAgICAgIGlmIChpc1ZhbGlkRGF0ZSlcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIGV4cGVjdGVkOiBcImRhdGVcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIC4uLihpc0RhdGUgPyB7IHJlY2VpdmVkOiBcIkludmFsaWQgRGF0ZVwiIH0gOiB7fSksXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZnVuY3Rpb24gaGFuZGxlQXJyYXlSZXN1bHQocmVzdWx0LCBmaW5hbCwgaW5kZXgpIHtcbiAgICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgZmluYWwuaXNzdWVzLnB1c2goLi4udXRpbC5wcmVmaXhJc3N1ZXMoaW5kZXgsIHJlc3VsdC5pc3N1ZXMpKTtcbiAgICB9XG4gICAgZmluYWwudmFsdWVbaW5kZXhdID0gcmVzdWx0LnZhbHVlO1xufVxuZXhwb3J0IGNvbnN0ICRab2RBcnJheSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQXJyYXlcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFwiYXJyYXlcIixcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIHBheWxvYWQudmFsdWUgPSBBcnJheShpbnB1dC5sZW5ndGgpO1xuICAgICAgICBjb25zdCBwcm9tcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gaW5wdXRbaV07XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBkZWYuZWxlbWVudC5fem9kLnJ1bih7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sIGN0eCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHByb21zLnB1c2gocmVzdWx0LnRoZW4oKHJlc3VsdCkgPT4gaGFuZGxlQXJyYXlSZXN1bHQocmVzdWx0LCBwYXlsb2FkLCBpKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlQXJyYXlSZXN1bHQocmVzdWx0LCBwYXlsb2FkLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbXMpLnRoZW4oKCkgPT4gcGF5bG9hZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7IC8vaGFuZGxlQXJyYXlSZXN1bHRzQXN5bmMocGFyc2VSZXN1bHRzLCBmaW5hbCk7XG4gICAgfTtcbn0pO1xuZnVuY3Rpb24gaGFuZGxlUHJvcGVydHlSZXN1bHQocmVzdWx0LCBmaW5hbCwga2V5LCBpbnB1dCwgaXNPcHRpb25hbE91dCkge1xuICAgIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAvLyBGb3Igb3B0aW9uYWwtb3V0IHNjaGVtYXMsIGlnbm9yZSBlcnJvcnMgb24gYWJzZW50IGtleXNcbiAgICAgICAgaWYgKGlzT3B0aW9uYWxPdXQgJiYgIShrZXkgaW4gaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZmluYWwuaXNzdWVzLnB1c2goLi4udXRpbC5wcmVmaXhJc3N1ZXMoa2V5LCByZXN1bHQuaXNzdWVzKSk7XG4gICAgfVxuICAgIGlmIChyZXN1bHQudmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoa2V5IGluIGlucHV0KSB7XG4gICAgICAgICAgICBmaW5hbC52YWx1ZVtrZXldID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmaW5hbC52YWx1ZVtrZXldID0gcmVzdWx0LnZhbHVlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZURlZihkZWYpIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZGVmLnNoYXBlKTtcbiAgICBmb3IgKGNvbnN0IGsgb2Yga2V5cykge1xuICAgICAgICBpZiAoIWRlZi5zaGFwZT8uW2tdPy5fem9kPy50cmFpdHM/LmhhcyhcIiRab2RUeXBlXCIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZWxlbWVudCBhdCBrZXkgXCIke2t9XCI6IGV4cGVjdGVkIGEgWm9kIHNjaGVtYWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG9rZXlzID0gdXRpbC5vcHRpb25hbEtleXMoZGVmLnNoYXBlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5kZWYsXG4gICAgICAgIGtleXMsXG4gICAgICAgIGtleVNldDogbmV3IFNldChrZXlzKSxcbiAgICAgICAgbnVtS2V5czoga2V5cy5sZW5ndGgsXG4gICAgICAgIG9wdGlvbmFsS2V5czogbmV3IFNldChva2V5cyksXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUNhdGNoYWxsKHByb21zLCBpbnB1dCwgcGF5bG9hZCwgY3R4LCBkZWYsIGluc3QpIHtcbiAgICBjb25zdCB1bnJlY29nbml6ZWQgPSBbXTtcbiAgICAvLyBpdGVyYXRlIG92ZXIgaW5wdXQga2V5c1xuICAgIGNvbnN0IGtleVNldCA9IGRlZi5rZXlTZXQ7XG4gICAgY29uc3QgX2NhdGNoYWxsID0gZGVmLmNhdGNoYWxsLl96b2Q7XG4gICAgY29uc3QgdCA9IF9jYXRjaGFsbC5kZWYudHlwZTtcbiAgICBjb25zdCBpc09wdGlvbmFsT3V0ID0gX2NhdGNoYWxsLm9wdG91dCA9PT0gXCJvcHRpb25hbFwiO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGlucHV0KSB7XG4gICAgICAgIGlmIChrZXlTZXQuaGFzKGtleSkpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgaWYgKHQgPT09IFwibmV2ZXJcIikge1xuICAgICAgICAgICAgdW5yZWNvZ25pemVkLnB1c2goa2V5KTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHIgPSBfY2F0Y2hhbGwucnVuKHsgdmFsdWU6IGlucHV0W2tleV0sIGlzc3VlczogW10gfSwgY3R4KTtcbiAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICBwcm9tcy5wdXNoKHIudGhlbigocikgPT4gaGFuZGxlUHJvcGVydHlSZXN1bHQociwgcGF5bG9hZCwga2V5LCBpbnB1dCwgaXNPcHRpb25hbE91dCkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhhbmRsZVByb3BlcnR5UmVzdWx0KHIsIHBheWxvYWQsIGtleSwgaW5wdXQsIGlzT3B0aW9uYWxPdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh1bnJlY29nbml6ZWQubGVuZ3RoKSB7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJ1bnJlY29nbml6ZWRfa2V5c1wiLFxuICAgICAgICAgICAga2V5czogdW5yZWNvZ25pemVkLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFwcm9tcy5sZW5ndGgpXG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9tcykudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0ICRab2RPYmplY3QgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZE9iamVjdFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gcmVxdWlyZXMgY2FzdCBiZWNhdXNlIHRlY2huaWNhbGx5ICRab2RPYmplY3QgZG9lc24ndCBleHRlbmRcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgLy8gY29uc3Qgc2ggPSBkZWYuc2hhcGU7XG4gICAgY29uc3QgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZGVmLCBcInNoYXBlXCIpO1xuICAgIGlmICghZGVzYz8uZ2V0KSB7XG4gICAgICAgIGNvbnN0IHNoID0gZGVmLnNoYXBlO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVmLCBcInNoYXBlXCIsIHtcbiAgICAgICAgICAgIGdldDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1NoID0geyAuLi5zaCB9O1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZWYsIFwic2hhcGVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbmV3U2gsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1NoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IF9ub3JtYWxpemVkID0gdXRpbC5jYWNoZWQoKCkgPT4gbm9ybWFsaXplRGVmKGRlZikpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwicHJvcFZhbHVlc1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0gZGVmLnNoYXBlO1xuICAgICAgICBjb25zdCBwcm9wVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHNoYXBlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZCA9IHNoYXBlW2tleV0uX3pvZDtcbiAgICAgICAgICAgIGlmIChmaWVsZC52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBwcm9wVmFsdWVzW2tleV0gPz8gKHByb3BWYWx1ZXNba2V5XSA9IG5ldyBTZXQoKSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIGZpZWxkLnZhbHVlcylcbiAgICAgICAgICAgICAgICAgICAgcHJvcFZhbHVlc1trZXldLmFkZCh2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcFZhbHVlcztcbiAgICB9KTtcbiAgICBjb25zdCBpc09iamVjdCA9IHV0aWwuaXNPYmplY3Q7XG4gICAgY29uc3QgY2F0Y2hhbGwgPSBkZWYuY2F0Y2hhbGw7XG4gICAgbGV0IHZhbHVlO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgdmFsdWUgPz8gKHZhbHVlID0gX25vcm1hbGl6ZWQudmFsdWUpO1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmICghaXNPYmplY3QoaW5wdXQpKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIHBheWxvYWQudmFsdWUgPSB7fTtcbiAgICAgICAgY29uc3QgcHJvbXMgPSBbXTtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB2YWx1ZS5zaGFwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdmFsdWUua2V5cykge1xuICAgICAgICAgICAgY29uc3QgZWwgPSBzaGFwZVtrZXldO1xuICAgICAgICAgICAgY29uc3QgaXNPcHRpb25hbE91dCA9IGVsLl96b2Qub3B0b3V0ID09PSBcIm9wdGlvbmFsXCI7XG4gICAgICAgICAgICBjb25zdCByID0gZWwuX3pvZC5ydW4oeyB2YWx1ZTogaW5wdXRba2V5XSwgaXNzdWVzOiBbXSB9LCBjdHgpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcHJvbXMucHVzaChyLnRoZW4oKHIpID0+IGhhbmRsZVByb3BlcnR5UmVzdWx0KHIsIHBheWxvYWQsIGtleSwgaW5wdXQsIGlzT3B0aW9uYWxPdXQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVQcm9wZXJ0eVJlc3VsdChyLCBwYXlsb2FkLCBrZXksIGlucHV0LCBpc09wdGlvbmFsT3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNhdGNoYWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbXMubGVuZ3RoID8gUHJvbWlzZS5hbGwocHJvbXMpLnRoZW4oKCkgPT4gcGF5bG9hZCkgOiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoYW5kbGVDYXRjaGFsbChwcm9tcywgaW5wdXQsIHBheWxvYWQsIGN0eCwgX25vcm1hbGl6ZWQudmFsdWUsIGluc3QpO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kT2JqZWN0SklUID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RPYmplY3RKSVRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIC8vIHJlcXVpcmVzIGNhc3QgYmVjYXVzZSB0ZWNobmljYWxseSAkWm9kT2JqZWN0IGRvZXNuJ3QgZXh0ZW5kXG4gICAgJFpvZE9iamVjdC5pbml0KGluc3QsIGRlZik7XG4gICAgY29uc3Qgc3VwZXJQYXJzZSA9IGluc3QuX3pvZC5wYXJzZTtcbiAgICBjb25zdCBfbm9ybWFsaXplZCA9IHV0aWwuY2FjaGVkKCgpID0+IG5vcm1hbGl6ZURlZihkZWYpKTtcbiAgICBjb25zdCBnZW5lcmF0ZUZhc3RwYXNzID0gKHNoYXBlKSA9PiB7XG4gICAgICAgIGNvbnN0IGRvYyA9IG5ldyBEb2MoW1wic2hhcGVcIiwgXCJwYXlsb2FkXCIsIFwiY3R4XCJdKTtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IF9ub3JtYWxpemVkLnZhbHVlO1xuICAgICAgICBjb25zdCBwYXJzZVN0ciA9IChrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGsgPSB1dGlsLmVzYyhrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIGBzaGFwZVske2t9XS5fem9kLnJ1bih7IHZhbHVlOiBpbnB1dFske2t9XSwgaXNzdWVzOiBbXSB9LCBjdHgpYDtcbiAgICAgICAgfTtcbiAgICAgICAgZG9jLndyaXRlKGBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7YCk7XG4gICAgICAgIGNvbnN0IGlkcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGxldCBjb3VudGVyID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygbm9ybWFsaXplZC5rZXlzKSB7XG4gICAgICAgICAgICBpZHNba2V5XSA9IGBrZXlfJHtjb3VudGVyKyt9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBBOiBwcmVzZXJ2ZSBrZXkgb3JkZXIge1xuICAgICAgICBkb2Mud3JpdGUoYGNvbnN0IG5ld1Jlc3VsdCA9IHt9O2ApO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBub3JtYWxpemVkLmtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gaWRzW2tleV07XG4gICAgICAgICAgICBjb25zdCBrID0gdXRpbC5lc2Moa2V5KTtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCBpc09wdGlvbmFsT3V0ID0gc2NoZW1hPy5fem9kPy5vcHRvdXQgPT09IFwib3B0aW9uYWxcIjtcbiAgICAgICAgICAgIGRvYy53cml0ZShgY29uc3QgJHtpZH0gPSAke3BhcnNlU3RyKGtleSl9O2ApO1xuICAgICAgICAgICAgaWYgKGlzT3B0aW9uYWxPdXQpIHtcbiAgICAgICAgICAgICAgICAvLyBGb3Igb3B0aW9uYWwtb3V0IHNjaGVtYXMsIGlnbm9yZSBlcnJvcnMgb24gYWJzZW50IGtleXNcbiAgICAgICAgICAgICAgICBkb2Mud3JpdGUoYFxuICAgICAgICBpZiAoJHtpZH0uaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAgIGlmICgke2t9IGluIGlucHV0KSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3VlcyA9IHBheWxvYWQuaXNzdWVzLmNvbmNhdCgke2lkfS5pc3N1ZXMubWFwKGlzcyA9PiAoe1xuICAgICAgICAgICAgICAuLi5pc3MsXG4gICAgICAgICAgICAgIHBhdGg6IGlzcy5wYXRoID8gWyR7a30sIC4uLmlzcy5wYXRoXSA6IFske2t9XVxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICgke2lkfS52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKCR7a30gaW4gaW5wdXQpIHtcbiAgICAgICAgICAgIG5ld1Jlc3VsdFske2t9XSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3UmVzdWx0WyR7a31dID0gJHtpZH0udmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvYy53cml0ZShgXG4gICAgICAgIGlmICgke2lkfS5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgcGF5bG9hZC5pc3N1ZXMgPSBwYXlsb2FkLmlzc3Vlcy5jb25jYXQoJHtpZH0uaXNzdWVzLm1hcChpc3MgPT4gKHtcbiAgICAgICAgICAgIC4uLmlzcyxcbiAgICAgICAgICAgIHBhdGg6IGlzcy5wYXRoID8gWyR7a30sIC4uLmlzcy5wYXRoXSA6IFske2t9XVxuICAgICAgICAgIH0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICgke2lkfS52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKCR7a30gaW4gaW5wdXQpIHtcbiAgICAgICAgICAgIG5ld1Jlc3VsdFske2t9XSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3UmVzdWx0WyR7a31dID0gJHtpZH0udmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkb2Mud3JpdGUoYHBheWxvYWQudmFsdWUgPSBuZXdSZXN1bHQ7YCk7XG4gICAgICAgIGRvYy53cml0ZShgcmV0dXJuIHBheWxvYWQ7YCk7XG4gICAgICAgIGNvbnN0IGZuID0gZG9jLmNvbXBpbGUoKTtcbiAgICAgICAgcmV0dXJuIChwYXlsb2FkLCBjdHgpID0+IGZuKHNoYXBlLCBwYXlsb2FkLCBjdHgpO1xuICAgIH07XG4gICAgbGV0IGZhc3RwYXNzO1xuICAgIGNvbnN0IGlzT2JqZWN0ID0gdXRpbC5pc09iamVjdDtcbiAgICBjb25zdCBqaXQgPSAhY29yZS5nbG9iYWxDb25maWcuaml0bGVzcztcbiAgICBjb25zdCBhbGxvd3NFdmFsID0gdXRpbC5hbGxvd3NFdmFsO1xuICAgIGNvbnN0IGZhc3RFbmFibGVkID0gaml0ICYmIGFsbG93c0V2YWwudmFsdWU7IC8vICYmICFkZWYuY2F0Y2hhbGw7XG4gICAgY29uc3QgY2F0Y2hhbGwgPSBkZWYuY2F0Y2hhbGw7XG4gICAgbGV0IHZhbHVlO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgdmFsdWUgPz8gKHZhbHVlID0gX25vcm1hbGl6ZWQudmFsdWUpO1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmICghaXNPYmplY3QoaW5wdXQpKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChqaXQgJiYgZmFzdEVuYWJsZWQgJiYgY3R4Py5hc3luYyA9PT0gZmFsc2UgJiYgY3R4LmppdGxlc3MgIT09IHRydWUpIHtcbiAgICAgICAgICAgIC8vIGFsd2F5cyBzeW5jaHJvbm91c1xuICAgICAgICAgICAgaWYgKCFmYXN0cGFzcylcbiAgICAgICAgICAgICAgICBmYXN0cGFzcyA9IGdlbmVyYXRlRmFzdHBhc3MoZGVmLnNoYXBlKTtcbiAgICAgICAgICAgIHBheWxvYWQgPSBmYXN0cGFzcyhwYXlsb2FkLCBjdHgpO1xuICAgICAgICAgICAgaWYgKCFjYXRjaGFsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVDYXRjaGFsbChbXSwgaW5wdXQsIHBheWxvYWQsIGN0eCwgdmFsdWUsIGluc3QpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlclBhcnNlKHBheWxvYWQsIGN0eCk7XG4gICAgfTtcbn0pO1xuZnVuY3Rpb24gaGFuZGxlVW5pb25SZXN1bHRzKHJlc3VsdHMsIGZpbmFsLCBpbnN0LCBjdHgpIHtcbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZmluYWwudmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gZmluYWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgbm9uYWJvcnRlZCA9IHJlc3VsdHMuZmlsdGVyKChyKSA9PiAhdXRpbC5hYm9ydGVkKHIpKTtcbiAgICBpZiAobm9uYWJvcnRlZC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZmluYWwudmFsdWUgPSBub25hYm9ydGVkWzBdLnZhbHVlO1xuICAgICAgICByZXR1cm4gbm9uYWJvcnRlZFswXTtcbiAgICB9XG4gICAgZmluYWwuaXNzdWVzLnB1c2goe1xuICAgICAgICBjb2RlOiBcImludmFsaWRfdW5pb25cIixcbiAgICAgICAgaW5wdXQ6IGZpbmFsLnZhbHVlLFxuICAgICAgICBpbnN0LFxuICAgICAgICBlcnJvcnM6IHJlc3VsdHMubWFwKChyZXN1bHQpID0+IHJlc3VsdC5pc3N1ZXMubWFwKChpc3MpID0+IHV0aWwuZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29yZS5jb25maWcoKSkpKSxcbiAgICB9KTtcbiAgICByZXR1cm4gZmluYWw7XG59XG5leHBvcnQgY29uc3QgJFpvZFVuaW9uID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RVbmlvblwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwib3B0aW5cIiwgKCkgPT4gZGVmLm9wdGlvbnMuc29tZSgobykgPT4gby5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIpID8gXCJvcHRpb25hbFwiIDogdW5kZWZpbmVkKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcIm9wdG91dFwiLCAoKSA9PiBkZWYub3B0aW9ucy5zb21lKChvKSA9PiBvLl96b2Qub3B0b3V0ID09PSBcIm9wdGlvbmFsXCIpID8gXCJvcHRpb25hbFwiIDogdW5kZWZpbmVkKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInZhbHVlc1wiLCAoKSA9PiB7XG4gICAgICAgIGlmIChkZWYub3B0aW9ucy5ldmVyeSgobykgPT4gby5fem9kLnZhbHVlcykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2V0KGRlZi5vcHRpb25zLmZsYXRNYXAoKG9wdGlvbikgPT4gQXJyYXkuZnJvbShvcHRpb24uX3pvZC52YWx1ZXMpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInBhdHRlcm5cIiwgKCkgPT4ge1xuICAgICAgICBpZiAoZGVmLm9wdGlvbnMuZXZlcnkoKG8pID0+IG8uX3pvZC5wYXR0ZXJuKSkge1xuICAgICAgICAgICAgY29uc3QgcGF0dGVybnMgPSBkZWYub3B0aW9ucy5tYXAoKG8pID0+IG8uX3pvZC5wYXR0ZXJuKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKGBeKCR7cGF0dGVybnMubWFwKChwKSA9PiB1dGlsLmNsZWFuUmVnZXgocC5zb3VyY2UpKS5qb2luKFwifFwiKX0pJGApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSk7XG4gICAgY29uc3Qgc2luZ2xlID0gZGVmLm9wdGlvbnMubGVuZ3RoID09PSAxO1xuICAgIGNvbnN0IGZpcnN0ID0gZGVmLm9wdGlvbnNbMF0uX3pvZC5ydW47XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICBpZiAoc2luZ2xlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3QocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYXN5bmMgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBkZWYub3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb3B0aW9uLl96b2QucnVuKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgfSwgY3R4KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghYXN5bmMpXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlVW5pb25SZXN1bHRzKHJlc3VsdHMsIHBheWxvYWQsIGluc3QsIGN0eCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChyZXN1bHRzKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlVW5pb25SZXN1bHRzKHJlc3VsdHMsIHBheWxvYWQsIGluc3QsIGN0eCk7XG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmZ1bmN0aW9uIGhhbmRsZUV4Y2x1c2l2ZVVuaW9uUmVzdWx0cyhyZXN1bHRzLCBmaW5hbCwgaW5zdCwgY3R4KSB7XG4gICAgY29uc3Qgc3VjY2Vzc2VzID0gcmVzdWx0cy5maWx0ZXIoKHIpID0+IHIuaXNzdWVzLmxlbmd0aCA9PT0gMCk7XG4gICAgaWYgKHN1Y2Nlc3Nlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZmluYWwudmFsdWUgPSBzdWNjZXNzZXNbMF0udmFsdWU7XG4gICAgICAgIHJldHVybiBmaW5hbDtcbiAgICB9XG4gICAgaWYgKHN1Y2Nlc3Nlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gTm8gbWF0Y2hlcyAtIHNhbWUgYXMgcmVndWxhciB1bmlvblxuICAgICAgICBmaW5hbC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdW5pb25cIixcbiAgICAgICAgICAgIGlucHV0OiBmaW5hbC52YWx1ZSxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICBlcnJvcnM6IHJlc3VsdHMubWFwKChyZXN1bHQpID0+IHJlc3VsdC5pc3N1ZXMubWFwKChpc3MpID0+IHV0aWwuZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29yZS5jb25maWcoKSkpKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBNdWx0aXBsZSBtYXRjaGVzIC0gZXhjbHVzaXZlIHVuaW9uIGZhaWx1cmVcbiAgICAgICAgZmluYWwuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3VuaW9uXCIsXG4gICAgICAgICAgICBpbnB1dDogZmluYWwudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgZXJyb3JzOiBbXSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZmluYWw7XG59XG5leHBvcnQgY29uc3QgJFpvZFhvciA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kWG9yXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVW5pb24uaW5pdChpbnN0LCBkZWYpO1xuICAgIGRlZi5pbmNsdXNpdmUgPSBmYWxzZTtcbiAgICBjb25zdCBzaW5nbGUgPSBkZWYub3B0aW9ucy5sZW5ndGggPT09IDE7XG4gICAgY29uc3QgZmlyc3QgPSBkZWYub3B0aW9uc1swXS5fem9kLnJ1bjtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGlmIChzaW5nbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmaXJzdChwYXlsb2FkLCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBhc3luYyA9IGZhbHNlO1xuICAgICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIGRlZi5vcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3pvZC5ydW4oe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICB9LCBjdHgpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBhc3luYyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFzeW5jKVxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUV4Y2x1c2l2ZVVuaW9uUmVzdWx0cyhyZXN1bHRzLCBwYXlsb2FkLCBpbnN0LCBjdHgpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocmVzdWx0cykudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUV4Y2x1c2l2ZVVuaW9uUmVzdWx0cyhyZXN1bHRzLCBwYXlsb2FkLCBpbnN0LCBjdHgpO1xuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZERpc2NyaW1pbmF0ZWRVbmlvbiA9IFxuLypAX19QVVJFX18qL1xuY29yZS4kY29uc3RydWN0b3IoXCIkWm9kRGlzY3JpbWluYXRlZFVuaW9uXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYuaW5jbHVzaXZlID0gZmFsc2U7XG4gICAgJFpvZFVuaW9uLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb25zdCBfc3VwZXIgPSBpbnN0Ll96b2QucGFyc2U7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJwcm9wVmFsdWVzXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgcHJvcFZhbHVlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBkZWYub3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgcHYgPSBvcHRpb24uX3pvZC5wcm9wVmFsdWVzO1xuICAgICAgICAgICAgaWYgKCFwdiB8fCBPYmplY3Qua2V5cyhwdikubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBkaXNjcmltaW5hdGVkIHVuaW9uIG9wdGlvbiBhdCBpbmRleCBcIiR7ZGVmLm9wdGlvbnMuaW5kZXhPZihvcHRpb24pfVwiYCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhwdikpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXByb3BWYWx1ZXNba10pXG4gICAgICAgICAgICAgICAgICAgIHByb3BWYWx1ZXNba10gPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB2YWwgb2Ygdikge1xuICAgICAgICAgICAgICAgICAgICBwcm9wVmFsdWVzW2tdLmFkZCh2YWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcFZhbHVlcztcbiAgICB9KTtcbiAgICBjb25zdCBkaXNjID0gdXRpbC5jYWNoZWQoKCkgPT4ge1xuICAgICAgICBjb25zdCBvcHRzID0gZGVmLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgZm9yIChjb25zdCBvIG9mIG9wdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IG8uX3pvZC5wcm9wVmFsdWVzPy5bZGVmLmRpc2NyaW1pbmF0b3JdO1xuICAgICAgICAgICAgaWYgKCF2YWx1ZXMgfHwgdmFsdWVzLnNpemUgPT09IDApXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGRpc2NyaW1pbmF0ZWQgdW5pb24gb3B0aW9uIGF0IGluZGV4IFwiJHtkZWYub3B0aW9ucy5pbmRleE9mKG8pfVwiYCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hcC5oYXModikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEdXBsaWNhdGUgZGlzY3JpbWluYXRvciB2YWx1ZSBcIiR7U3RyaW5nKHYpfVwiYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1hcC5zZXQodiwgbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hcDtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgaWYgKCF1dGlsLmlzT2JqZWN0KGlucHV0KSkge1xuICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3R5cGVcIixcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcHQgPSBkaXNjLnZhbHVlLmdldChpbnB1dD8uW2RlZi5kaXNjcmltaW5hdG9yXSk7XG4gICAgICAgIGlmIChvcHQpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHQuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLnVuaW9uRmFsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBubyBtYXRjaGluZyBkaXNjcmltaW5hdG9yXG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3VuaW9uXCIsXG4gICAgICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICAgICAgbm90ZTogXCJObyBtYXRjaGluZyBkaXNjcmltaW5hdG9yXCIsXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yOiBkZWYuZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgcGF0aDogW2RlZi5kaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZEludGVyc2VjdGlvbiA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kSW50ZXJzZWN0aW9uXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGNvbnN0IGxlZnQgPSBkZWYubGVmdC5fem9kLnJ1bih7IHZhbHVlOiBpbnB1dCwgaXNzdWVzOiBbXSB9LCBjdHgpO1xuICAgICAgICBjb25zdCByaWdodCA9IGRlZi5yaWdodC5fem9kLnJ1bih7IHZhbHVlOiBpbnB1dCwgaXNzdWVzOiBbXSB9LCBjdHgpO1xuICAgICAgICBjb25zdCBhc3luYyA9IGxlZnQgaW5zdGFuY2VvZiBQcm9taXNlIHx8IHJpZ2h0IGluc3RhbmNlb2YgUHJvbWlzZTtcbiAgICAgICAgaWYgKGFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW2xlZnQsIHJpZ2h0XSkudGhlbigoW2xlZnQsIHJpZ2h0XSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVJbnRlcnNlY3Rpb25SZXN1bHRzKHBheWxvYWQsIGxlZnQsIHJpZ2h0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoYW5kbGVJbnRlcnNlY3Rpb25SZXN1bHRzKHBheWxvYWQsIGxlZnQsIHJpZ2h0KTtcbiAgICB9O1xufSk7XG5mdW5jdGlvbiBtZXJnZVZhbHVlcyhhLCBiKSB7XG4gICAgLy8gY29uc3QgYVR5cGUgPSBwYXJzZS50KGEpO1xuICAgIC8vIGNvbnN0IGJUeXBlID0gcGFyc2UudChiKTtcbiAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBpZiAoYSBpbnN0YW5jZW9mIERhdGUgJiYgYiBpbnN0YW5jZW9mIERhdGUgJiYgK2EgPT09ICtiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGlmICh1dGlsLmlzUGxhaW5PYmplY3QoYSkgJiYgdXRpbC5pc1BsYWluT2JqZWN0KGIpKSB7XG4gICAgICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSBPYmplY3Qua2V5cyhhKS5maWx0ZXIoKGtleSkgPT4gYktleXMuaW5kZXhPZihrZXkpICE9PSAtMSk7XG4gICAgICAgIGNvbnN0IG5ld09iaiA9IHsgLi4uYSwgLi4uYiB9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFyZWRLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBzaGFyZWRWYWx1ZSA9IG1lcmdlVmFsdWVzKGFba2V5XSwgYltrZXldKTtcbiAgICAgICAgICAgIGlmICghc2hhcmVkVmFsdWUudmFsaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lcmdlRXJyb3JQYXRoOiBba2V5LCAuLi5zaGFyZWRWYWx1ZS5tZXJnZUVycm9yUGF0aF0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld09ialtrZXldID0gc2hhcmVkVmFsdWUuZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3T2JqIH07XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGEpICYmIEFycmF5LmlzQXJyYXkoYikpIHtcbiAgICAgICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXJnZUVycm9yUGF0aDogW10gfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VFcnJvclBhdGg6IFtpbmRleCwgLi4uc2hhcmVkVmFsdWUubWVyZ2VFcnJvclBhdGhdLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdBcnJheS5wdXNoKHNoYXJlZFZhbHVlLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBuZXdBcnJheSB9O1xuICAgIH1cbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lcmdlRXJyb3JQYXRoOiBbXSB9O1xufVxuZnVuY3Rpb24gaGFuZGxlSW50ZXJzZWN0aW9uUmVzdWx0cyhyZXN1bHQsIGxlZnQsIHJpZ2h0KSB7XG4gICAgLy8gVHJhY2sgd2hpY2ggc2lkZShzKSByZXBvcnQgZWFjaCBrZXkgYXMgdW5yZWNvZ25pemVkXG4gICAgY29uc3QgdW5yZWNLZXlzID0gbmV3IE1hcCgpO1xuICAgIGxldCB1bnJlY0lzc3VlO1xuICAgIGZvciAoY29uc3QgaXNzIG9mIGxlZnQuaXNzdWVzKSB7XG4gICAgICAgIGlmIChpc3MuY29kZSA9PT0gXCJ1bnJlY29nbml6ZWRfa2V5c1wiKSB7XG4gICAgICAgICAgICB1bnJlY0lzc3VlID8/ICh1bnJlY0lzc3VlID0gaXNzKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgayBvZiBpc3Mua2V5cykge1xuICAgICAgICAgICAgICAgIGlmICghdW5yZWNLZXlzLmhhcyhrKSlcbiAgICAgICAgICAgICAgICAgICAgdW5yZWNLZXlzLnNldChrLCB7fSk7XG4gICAgICAgICAgICAgICAgdW5yZWNLZXlzLmdldChrKS5sID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdC5pc3N1ZXMucHVzaChpc3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgaXNzIG9mIHJpZ2h0Lmlzc3Vlcykge1xuICAgICAgICBpZiAoaXNzLmNvZGUgPT09IFwidW5yZWNvZ25pemVkX2tleXNcIikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrIG9mIGlzcy5rZXlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1bnJlY0tleXMuaGFzKGspKVxuICAgICAgICAgICAgICAgICAgICB1bnJlY0tleXMuc2V0KGssIHt9KTtcbiAgICAgICAgICAgICAgICB1bnJlY0tleXMuZ2V0KGspLnIgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0Lmlzc3Vlcy5wdXNoKGlzcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUmVwb3J0IG9ubHkga2V5cyB1bnJlY29nbml6ZWQgYnkgQk9USCBzaWRlc1xuICAgIGNvbnN0IGJvdGhLZXlzID0gWy4uLnVucmVjS2V5c10uZmlsdGVyKChbLCBmXSkgPT4gZi5sICYmIGYucikubWFwKChba10pID0+IGspO1xuICAgIGlmIChib3RoS2V5cy5sZW5ndGggJiYgdW5yZWNJc3N1ZSkge1xuICAgICAgICByZXN1bHQuaXNzdWVzLnB1c2goeyAuLi51bnJlY0lzc3VlLCBrZXlzOiBib3RoS2V5cyB9KTtcbiAgICB9XG4gICAgaWYgKHV0aWwuYWJvcnRlZChyZXN1bHQpKVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIGNvbnN0IG1lcmdlZCA9IG1lcmdlVmFsdWVzKGxlZnQudmFsdWUsIHJpZ2h0LnZhbHVlKTtcbiAgICBpZiAoIW1lcmdlZC52YWxpZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVubWVyZ2FibGUgaW50ZXJzZWN0aW9uLiBFcnJvciBwYXRoOiBgICsgYCR7SlNPTi5zdHJpbmdpZnkobWVyZ2VkLm1lcmdlRXJyb3JQYXRoKX1gKTtcbiAgICB9XG4gICAgcmVzdWx0LnZhbHVlID0gbWVyZ2VkLmRhdGE7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBjb25zdCAkWm9kVHVwbGUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFR1cGxlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgY29uc3QgaXRlbXMgPSBkZWYuaXRlbXM7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFwidHVwbGVcIixcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgfVxuICAgICAgICBwYXlsb2FkLnZhbHVlID0gW107XG4gICAgICAgIGNvbnN0IHByb21zID0gW107XG4gICAgICAgIGNvbnN0IHJldmVyc2VkSW5kZXggPSBbLi4uaXRlbXNdLnJldmVyc2UoKS5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0uX3pvZC5vcHRpbiAhPT0gXCJvcHRpb25hbFwiKTtcbiAgICAgICAgY29uc3Qgb3B0U3RhcnQgPSByZXZlcnNlZEluZGV4ID09PSAtMSA/IDAgOiBpdGVtcy5sZW5ndGggLSByZXZlcnNlZEluZGV4O1xuICAgICAgICBpZiAoIWRlZi5yZXN0KSB7XG4gICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5sZW5ndGggPiBpdGVtcy5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGlucHV0Lmxlbmd0aCA8IG9wdFN0YXJ0IC0gMTtcbiAgICAgICAgICAgIGlmICh0b29CaWcgfHwgdG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKHRvb0JpZ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyB7IGNvZGU6IFwidG9vX2JpZ1wiLCBtYXhpbXVtOiBpdGVtcy5sZW5ndGgsIGluY2x1c2l2ZTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHsgY29kZTogXCJ0b29fc21hbGxcIiwgbWluaW11bTogaXRlbXMubGVuZ3RoIH0pLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGkgPSAtMTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgICBpZiAoaSA+PSBpbnB1dC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gb3B0U3RhcnQpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gaXRlbS5fem9kLnJ1bih7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGlucHV0W2ldLFxuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICB9LCBjdHgpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBwcm9tcy5wdXNoKHJlc3VsdC50aGVuKChyZXN1bHQpID0+IGhhbmRsZVR1cGxlUmVzdWx0KHJlc3VsdCwgcGF5bG9hZCwgaSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhhbmRsZVR1cGxlUmVzdWx0KHJlc3VsdCwgcGF5bG9hZCwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5yZXN0KSB7XG4gICAgICAgICAgICBjb25zdCByZXN0ID0gaW5wdXQuc2xpY2UoaXRlbXMubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWwgb2YgcmVzdCkge1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBkZWYucmVzdC5fem9kLnJ1bih7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbCxcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICB9LCBjdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21zLnB1c2gocmVzdWx0LnRoZW4oKHJlc3VsdCkgPT4gaGFuZGxlVHVwbGVSZXN1bHQocmVzdWx0LCBwYXlsb2FkLCBpKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlVHVwbGVSZXN1bHQocmVzdWx0LCBwYXlsb2FkLCBpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb21zLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9tcykudGhlbigoKSA9PiBwYXlsb2FkKTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZnVuY3Rpb24gaGFuZGxlVHVwbGVSZXN1bHQocmVzdWx0LCBmaW5hbCwgaW5kZXgpIHtcbiAgICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgZmluYWwuaXNzdWVzLnB1c2goLi4udXRpbC5wcmVmaXhJc3N1ZXMoaW5kZXgsIHJlc3VsdC5pc3N1ZXMpKTtcbiAgICB9XG4gICAgZmluYWwudmFsdWVbaW5kZXhdID0gcmVzdWx0LnZhbHVlO1xufVxuZXhwb3J0IGNvbnN0ICRab2RSZWNvcmQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFJlY29yZFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBpZiAoIXV0aWwuaXNQbGFpbk9iamVjdChpbnB1dCkpIHtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcInJlY29yZFwiLFxuICAgICAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbXMgPSBbXTtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gZGVmLmtleVR5cGUuX3pvZC52YWx1ZXM7XG4gICAgICAgIGlmICh2YWx1ZXMpIHtcbiAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IHJlY29yZEtleXMgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2Yga2V5ID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiBrZXkgPT09IFwic3ltYm9sXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkS2V5cy5hZGQodHlwZW9mIGtleSA9PT0gXCJudW1iZXJcIiA/IGtleS50b1N0cmluZygpIDoga2V5KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZGVmLnZhbHVlVHlwZS5fem9kLnJ1bih7IHZhbHVlOiBpbnB1dFtrZXldLCBpc3N1ZXM6IFtdIH0sIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9tcy5wdXNoKHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCguLi51dGlsLnByZWZpeElzc3VlcyhrZXksIHJlc3VsdC5pc3N1ZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC52YWx1ZVtrZXldID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCguLi51dGlsLnByZWZpeElzc3VlcyhrZXksIHJlc3VsdC5pc3N1ZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWVba2V5XSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB1bnJlY29nbml6ZWQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBpbnB1dCkge1xuICAgICAgICAgICAgICAgIGlmICghcmVjb3JkS2V5cy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB1bnJlY29nbml6ZWQgPSB1bnJlY29nbml6ZWQgPz8gW107XG4gICAgICAgICAgICAgICAgICAgIHVucmVjb2duaXplZC5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVucmVjb2duaXplZCAmJiB1bnJlY29nbml6ZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcInVucmVjb2duaXplZF9rZXlzXCIsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgICAgICBrZXlzOiB1bnJlY29nbml6ZWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXlsb2FkLnZhbHVlID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBSZWZsZWN0Lm93bktleXMoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJfX3Byb3RvX19cIilcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgbGV0IGtleVJlc3VsdCA9IGRlZi5rZXlUeXBlLl96b2QucnVuKHsgdmFsdWU6IGtleSwgaXNzdWVzOiBbXSB9LCBjdHgpO1xuICAgICAgICAgICAgICAgIGlmIChrZXlSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFzeW5jIHNjaGVtYXMgbm90IHN1cHBvcnRlZCBpbiBvYmplY3Qga2V5cyBjdXJyZW50bHlcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIE51bWVyaWMgc3RyaW5nIGZhbGxiYWNrOiBpZiBrZXkgZmFpbGVkIHdpdGggXCJleHBlY3RlZCBudW1iZXJcIiwgcmV0cnkgd2l0aCBOdW1iZXIoa2V5KVxuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrTnVtZXJpY0tleSA9IHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgcmVnZXhlcy5udW1iZXIudGVzdChrZXkpICYmXG4gICAgICAgICAgICAgICAgICAgIGtleVJlc3VsdC5pc3N1ZXMubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgIGtleVJlc3VsdC5pc3N1ZXMuc29tZSgoaXNzKSA9PiBpc3MuY29kZSA9PT0gXCJpbnZhbGlkX3R5cGVcIiAmJiBpc3MuZXhwZWN0ZWQgPT09IFwibnVtYmVyXCIpO1xuICAgICAgICAgICAgICAgIGlmIChjaGVja051bWVyaWNLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0cnlSZXN1bHQgPSBkZWYua2V5VHlwZS5fem9kLnJ1bih7IHZhbHVlOiBOdW1iZXIoa2V5KSwgaXNzdWVzOiBbXSB9LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmV0cnlSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBc3luYyBzY2hlbWFzIG5vdCBzdXBwb3J0ZWQgaW4gb2JqZWN0IGtleXMgY3VycmVudGx5XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXRyeVJlc3VsdC5pc3N1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlSZXN1bHQgPSByZXRyeVJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoa2V5UmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlZi5tb2RlID09PSBcImxvb3NlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBhc3MgdGhyb3VnaCB1bmNoYW5nZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWVba2V5XSA9IGlucHV0W2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IFwic3RyaWN0XCIgYmVoYXZpb3I6IGVycm9yIG9uIGludmFsaWQga2V5XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfa2V5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBcInJlY29yZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3Vlczoga2V5UmVzdWx0Lmlzc3Vlcy5tYXAoKGlzcykgPT4gdXRpbC5maW5hbGl6ZUlzc3VlKGlzcywgY3R4LCBjb3JlLmNvbmZpZygpKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGRlZi52YWx1ZVR5cGUuX3pvZC5ydW4oeyB2YWx1ZTogaW5wdXRba2V5XSwgaXNzdWVzOiBbXSB9LCBjdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21zLnB1c2gocmVzdWx0LnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCguLi51dGlsLnByZWZpeElzc3VlcyhrZXksIHJlc3VsdC5pc3N1ZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWVba2V5UmVzdWx0LnZhbHVlXSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKC4uLnV0aWwucHJlZml4SXNzdWVzKGtleSwgcmVzdWx0Lmlzc3VlcykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWVba2V5UmVzdWx0LnZhbHVlXSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb21zLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21zKS50aGVuKCgpID0+IHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kTWFwID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RNYXBcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgaWYgKCEoaW5wdXQgaW5zdGFuY2VvZiBNYXApKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJtYXBcIixcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21zID0gW107XG4gICAgICAgIHBheWxvYWQudmFsdWUgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGlucHV0KSB7XG4gICAgICAgICAgICBjb25zdCBrZXlSZXN1bHQgPSBkZWYua2V5VHlwZS5fem9kLnJ1bih7IHZhbHVlOiBrZXksIGlzc3VlczogW10gfSwgY3R4KTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlUmVzdWx0ID0gZGVmLnZhbHVlVHlwZS5fem9kLnJ1bih7IHZhbHVlOiB2YWx1ZSwgaXNzdWVzOiBbXSB9LCBjdHgpO1xuICAgICAgICAgICAgaWYgKGtleVJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgfHwgdmFsdWVSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcHJvbXMucHVzaChQcm9taXNlLmFsbChba2V5UmVzdWx0LCB2YWx1ZVJlc3VsdF0pLnRoZW4oKFtrZXlSZXN1bHQsIHZhbHVlUmVzdWx0XSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVNYXBSZXN1bHQoa2V5UmVzdWx0LCB2YWx1ZVJlc3VsdCwgcGF5bG9hZCwga2V5LCBpbnB1dCwgaW5zdCwgY3R4KTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVNYXBSZXN1bHQoa2V5UmVzdWx0LCB2YWx1ZVJlc3VsdCwgcGF5bG9hZCwga2V5LCBpbnB1dCwgaW5zdCwgY3R4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvbXMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21zKS50aGVuKCgpID0+IHBheWxvYWQpO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5mdW5jdGlvbiBoYW5kbGVNYXBSZXN1bHQoa2V5UmVzdWx0LCB2YWx1ZVJlc3VsdCwgZmluYWwsIGtleSwgaW5wdXQsIGluc3QsIGN0eCkge1xuICAgIGlmIChrZXlSZXN1bHQuaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICBpZiAodXRpbC5wcm9wZXJ0eUtleVR5cGVzLmhhcyh0eXBlb2Yga2V5KSkge1xuICAgICAgICAgICAgZmluYWwuaXNzdWVzLnB1c2goLi4udXRpbC5wcmVmaXhJc3N1ZXMoa2V5LCBrZXlSZXN1bHQuaXNzdWVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmaW5hbC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2tleVwiLFxuICAgICAgICAgICAgICAgIG9yaWdpbjogXCJtYXBcIixcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgIGlzc3Vlczoga2V5UmVzdWx0Lmlzc3Vlcy5tYXAoKGlzcykgPT4gdXRpbC5maW5hbGl6ZUlzc3VlKGlzcywgY3R4LCBjb3JlLmNvbmZpZygpKSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodmFsdWVSZXN1bHQuaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICBpZiAodXRpbC5wcm9wZXJ0eUtleVR5cGVzLmhhcyh0eXBlb2Yga2V5KSkge1xuICAgICAgICAgICAgZmluYWwuaXNzdWVzLnB1c2goLi4udXRpbC5wcmVmaXhJc3N1ZXMoa2V5LCB2YWx1ZVJlc3VsdC5pc3N1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZpbmFsLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcmlnaW46IFwibWFwXCIsXG4gICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2VsZW1lbnRcIixcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgICAgIGlzc3VlczogdmFsdWVSZXN1bHQuaXNzdWVzLm1hcCgoaXNzKSA9PiB1dGlsLmZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvcmUuY29uZmlnKCkpKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmFsLnZhbHVlLnNldChrZXlSZXN1bHQudmFsdWUsIHZhbHVlUmVzdWx0LnZhbHVlKTtcbn1cbmV4cG9ydCBjb25zdCAkWm9kU2V0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RTZXRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgaWYgKCEoaW5wdXQgaW5zdGFuY2VvZiBTZXQpKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcInNldFwiLFxuICAgICAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21zID0gW107XG4gICAgICAgIHBheWxvYWQudmFsdWUgPSBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpbnB1dCkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZGVmLnZhbHVlVHlwZS5fem9kLnJ1bih7IHZhbHVlOiBpdGVtLCBpc3N1ZXM6IFtdIH0sIGN0eCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHByb21zLnB1c2gocmVzdWx0LnRoZW4oKHJlc3VsdCkgPT4gaGFuZGxlU2V0UmVzdWx0KHJlc3VsdCwgcGF5bG9hZCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBoYW5kbGVTZXRSZXN1bHQocmVzdWx0LCBwYXlsb2FkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvbXMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21zKS50aGVuKCgpID0+IHBheWxvYWQpO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5mdW5jdGlvbiBoYW5kbGVTZXRSZXN1bHQocmVzdWx0LCBmaW5hbCkge1xuICAgIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICBmaW5hbC5pc3N1ZXMucHVzaCguLi5yZXN1bHQuaXNzdWVzKTtcbiAgICB9XG4gICAgZmluYWwudmFsdWUuYWRkKHJlc3VsdC52YWx1ZSk7XG59XG5leHBvcnQgY29uc3QgJFpvZEVudW0gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEVudW1cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb25zdCB2YWx1ZXMgPSB1dGlsLmdldEVudW1WYWx1ZXMoZGVmLmVudHJpZXMpO1xuICAgIGNvbnN0IHZhbHVlc1NldCA9IG5ldyBTZXQodmFsdWVzKTtcbiAgICBpbnN0Ll96b2QudmFsdWVzID0gdmFsdWVzU2V0O1xuICAgIGluc3QuX3pvZC5wYXR0ZXJuID0gbmV3IFJlZ0V4cChgXigke3ZhbHVlc1xuICAgICAgICAuZmlsdGVyKChrKSA9PiB1dGlsLnByb3BlcnR5S2V5VHlwZXMuaGFzKHR5cGVvZiBrKSlcbiAgICAgICAgLm1hcCgobykgPT4gKHR5cGVvZiBvID09PSBcInN0cmluZ1wiID8gdXRpbC5lc2NhcGVSZWdleChvKSA6IG8udG9TdHJpbmcoKSkpXG4gICAgICAgIC5qb2luKFwifFwiKX0pJGApO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlc1NldC5oYXMoaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgfVxuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF92YWx1ZVwiLFxuICAgICAgICAgICAgdmFsdWVzLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RMaXRlcmFsID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RMaXRlcmFsXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaWYgKGRlZi52YWx1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjcmVhdGUgbGl0ZXJhbCBzY2hlbWEgd2l0aCBubyB2YWxpZCB2YWx1ZXNcIik7XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlcyA9IG5ldyBTZXQoZGVmLnZhbHVlcyk7XG4gICAgaW5zdC5fem9kLnZhbHVlcyA9IHZhbHVlcztcbiAgICBpbnN0Ll96b2QucGF0dGVybiA9IG5ldyBSZWdFeHAoYF4oJHtkZWYudmFsdWVzXG4gICAgICAgIC5tYXAoKG8pID0+ICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIiA/IHV0aWwuZXNjYXBlUmVnZXgobykgOiBvID8gdXRpbC5lc2NhcGVSZWdleChvLnRvU3RyaW5nKCkpIDogU3RyaW5nKG8pKSlcbiAgICAgICAgLmpvaW4oXCJ8XCIpfSkkYCk7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIF9jdHgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBpZiAodmFsdWVzLmhhcyhpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3ZhbHVlXCIsXG4gICAgICAgICAgICB2YWx1ZXM6IGRlZi52YWx1ZXMsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZEZpbGUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEZpbGVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgRmlsZSlcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIGV4cGVjdGVkOiBcImZpbGVcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZFRyYW5zZm9ybSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kVHJhbnNmb3JtXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICBpZiAoY3R4LmRpcmVjdGlvbiA9PT0gXCJiYWNrd2FyZFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgY29yZS4kWm9kRW5jb2RlRXJyb3IoaW5zdC5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfb3V0ID0gZGVmLnRyYW5zZm9ybShwYXlsb2FkLnZhbHVlLCBwYXlsb2FkKTtcbiAgICAgICAgaWYgKGN0eC5hc3luYykge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gX291dCBpbnN0YW5jZW9mIFByb21pc2UgPyBfb3V0IDogUHJvbWlzZS5yZXNvbHZlKF9vdXQpO1xuICAgICAgICAgICAgcmV0dXJuIG91dHB1dC50aGVuKChvdXRwdXQpID0+IHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkLnZhbHVlID0gb3V0cHV0O1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9vdXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgY29yZS4kWm9kQXN5bmNFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHBheWxvYWQudmFsdWUgPSBfb3V0O1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5mdW5jdGlvbiBoYW5kbGVPcHRpb25hbFJlc3VsdChyZXN1bHQsIGlucHV0KSB7XG4gICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoICYmIGlucHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHsgaXNzdWVzOiBbXSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGNvbnN0ICRab2RPcHRpb25hbCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kT3B0aW9uYWxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2Qub3B0aW4gPSBcIm9wdGlvbmFsXCI7XG4gICAgaW5zdC5fem9kLm9wdG91dCA9IFwib3B0aW9uYWxcIjtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInZhbHVlc1wiLCAoKSA9PiB7XG4gICAgICAgIHJldHVybiBkZWYuaW5uZXJUeXBlLl96b2QudmFsdWVzID8gbmV3IFNldChbLi4uZGVmLmlubmVyVHlwZS5fem9kLnZhbHVlcywgdW5kZWZpbmVkXSkgOiB1bmRlZmluZWQ7XG4gICAgfSk7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJwYXR0ZXJuXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgcGF0dGVybiA9IGRlZi5pbm5lclR5cGUuX3pvZC5wYXR0ZXJuO1xuICAgICAgICByZXR1cm4gcGF0dGVybiA/IG5ldyBSZWdFeHAoYF4oJHt1dGlsLmNsZWFuUmVnZXgocGF0dGVybi5zb3VyY2UpfSk/JGApIDogdW5kZWZpbmVkO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgaWYgKGRlZi5pbm5lclR5cGUuX3pvZC5vcHRpbiA9PT0gXCJvcHRpb25hbFwiKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKHIpID0+IGhhbmRsZU9wdGlvbmFsUmVzdWx0KHIsIHBheWxvYWQudmFsdWUpKTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVPcHRpb25hbFJlc3VsdChyZXN1bHQsIHBheWxvYWQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXlsb2FkLnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RFeGFjdE9wdGlvbmFsID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RFeGFjdE9wdGlvbmFsXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBDYWxsIHBhcmVudCBpbml0IC0gaW5oZXJpdHMgb3B0aW4vb3B0b3V0ID0gXCJvcHRpb25hbFwiXG4gICAgJFpvZE9wdGlvbmFsLmluaXQoaW5zdCwgZGVmKTtcbiAgICAvLyBPdmVycmlkZSB2YWx1ZXMvcGF0dGVybiB0byBOT1QgYWRkIHVuZGVmaW5lZFxuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwidmFsdWVzXCIsICgpID0+IGRlZi5pbm5lclR5cGUuX3pvZC52YWx1ZXMpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwicGF0dGVyblwiLCAoKSA9PiBkZWYuaW5uZXJUeXBlLl96b2QucGF0dGVybik7XG4gICAgLy8gT3ZlcnJpZGUgcGFyc2UgdG8ganVzdCBkZWxlZ2F0ZSAobm8gdW5kZWZpbmVkIGhhbmRsaW5nKVxuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgcmV0dXJuIGRlZi5pbm5lclR5cGUuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZE51bGxhYmxlID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2ROdWxsYWJsZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwib3B0aW5cIiwgKCkgPT4gZGVmLmlubmVyVHlwZS5fem9kLm9wdGluKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcIm9wdG91dFwiLCAoKSA9PiBkZWYuaW5uZXJUeXBlLl96b2Qub3B0b3V0KTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInBhdHRlcm5cIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXR0ZXJuID0gZGVmLmlubmVyVHlwZS5fem9kLnBhdHRlcm47XG4gICAgICAgIHJldHVybiBwYXR0ZXJuID8gbmV3IFJlZ0V4cChgXigke3V0aWwuY2xlYW5SZWdleChwYXR0ZXJuLnNvdXJjZSl9fG51bGwpJGApIDogdW5kZWZpbmVkO1xuICAgIH0pO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwidmFsdWVzXCIsICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGRlZi5pbm5lclR5cGUuX3pvZC52YWx1ZXMgPyBuZXcgU2V0KFsuLi5kZWYuaW5uZXJUeXBlLl96b2QudmFsdWVzLCBudWxsXSkgOiB1bmRlZmluZWQ7XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICAvLyBGb3J3YXJkIGRpcmVjdGlvbiAoZGVjb2RlKTogYWxsb3cgbnVsbCB0byBwYXNzIHRocm91Z2hcbiAgICAgICAgaWYgKHBheWxvYWQudmFsdWUgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgcmV0dXJuIGRlZi5pbm5lclR5cGUuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZERlZmF1bHQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZERlZmF1bHRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICAvLyBpbnN0Ll96b2QucWluID0gXCJ0cnVlXCI7XG4gICAgaW5zdC5fem9kLm9wdGluID0gXCJvcHRpb25hbFwiO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwidmFsdWVzXCIsICgpID0+IGRlZi5pbm5lclR5cGUuX3pvZC52YWx1ZXMpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgaWYgKGN0eC5kaXJlY3Rpb24gPT09IFwiYmFja3dhcmRcIikge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi5pbm5lclR5cGUuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBGb3J3YXJkIGRpcmVjdGlvbiAoZGVjb2RlKTogYXBwbHkgZGVmYXVsdHMgZm9yIHVuZGVmaW5lZCBpbnB1dFxuICAgICAgICBpZiAocGF5bG9hZC52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYXlsb2FkLnZhbHVlID0gZGVmLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogJFpvZERlZmF1bHQgcmV0dXJucyB0aGUgZGVmYXVsdCB2YWx1ZSBpbW1lZGlhdGVseSBpbiBmb3J3YXJkIGRpcmVjdGlvbi5cbiAgICAgICAgICAgICAqIEl0IGRvZXNuJ3QgcGFzcyB0aGUgZGVmYXVsdCB2YWx1ZSBpbnRvIHRoZSB2YWxpZGF0b3IgKFwicHJlZmF1bHRcIikuIFRoZXJlJ3Mgbm8gcmVhc29uIHRvIHBhc3MgdGhlIGRlZmF1bHQgdmFsdWUgdGhyb3VnaCB2YWxpZGF0aW9uLiBUaGUgdmFsaWRpdHkgb2YgdGhlIGRlZmF1bHQgaXMgZW5mb3JjZWQgYnkgVHlwZVNjcmlwdCBzdGF0aWNhbGx5LiBPdGhlcndpc2UsIGl0J3MgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSB1c2VyIHRvIGVuc3VyZSB0aGUgZGVmYXVsdCBpcyB2YWxpZC4gSW4gdGhlIGNhc2Ugb2YgcGlwZXMgd2l0aCBkaXZlcmdlbnQgaW4vb3V0IHR5cGVzLCB5b3UgY2FuIHNwZWNpZnkgdGhlIGRlZmF1bHQgb24gdGhlIGBpbmAgc2NoZW1hIG9mIHlvdXIgWm9kUGlwZSB0byBzZXQgYSBcInByZWZhdWx0XCIgZm9yIHRoZSBwaXBlLiAgICovXG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBGb3J3YXJkIGRpcmVjdGlvbjogY29udGludWUgd2l0aCBkZWZhdWx0IGhhbmRsaW5nXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGRlZi5pbm5lclR5cGUuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbigocmVzdWx0KSA9PiBoYW5kbGVEZWZhdWx0UmVzdWx0KHJlc3VsdCwgZGVmKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhhbmRsZURlZmF1bHRSZXN1bHQocmVzdWx0LCBkZWYpO1xuICAgIH07XG59KTtcbmZ1bmN0aW9uIGhhbmRsZURlZmF1bHRSZXN1bHQocGF5bG9hZCwgZGVmKSB7XG4gICAgaWYgKHBheWxvYWQudmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwYXlsb2FkLnZhbHVlID0gZGVmLmRlZmF1bHRWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHBheWxvYWQ7XG59XG5leHBvcnQgY29uc3QgJFpvZFByZWZhdWx0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RQcmVmYXVsdFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5vcHRpbiA9IFwib3B0aW9uYWxcIjtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInZhbHVlc1wiLCAoKSA9PiBkZWYuaW5uZXJUeXBlLl96b2QudmFsdWVzKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGlmIChjdHguZGlyZWN0aW9uID09PSBcImJhY2t3YXJkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRm9yd2FyZCBkaXJlY3Rpb24gKGRlY29kZSk6IGFwcGx5IHByZWZhdWx0IGZvciB1bmRlZmluZWQgaW5wdXRcbiAgICAgICAgaWYgKHBheWxvYWQudmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGF5bG9hZC52YWx1ZSA9IGRlZi5kZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZi5pbm5lclR5cGUuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZE5vbk9wdGlvbmFsID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2ROb25PcHRpb25hbFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwidmFsdWVzXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgdiA9IGRlZi5pbm5lclR5cGUuX3pvZC52YWx1ZXM7XG4gICAgICAgIHJldHVybiB2ID8gbmV3IFNldChbLi4udl0uZmlsdGVyKCh4KSA9PiB4ICE9PSB1bmRlZmluZWQpKSA6IHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGRlZi5pbm5lclR5cGUuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbigocmVzdWx0KSA9PiBoYW5kbGVOb25PcHRpb25hbFJlc3VsdChyZXN1bHQsIGluc3QpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFuZGxlTm9uT3B0aW9uYWxSZXN1bHQocmVzdWx0LCBpbnN0KTtcbiAgICB9O1xufSk7XG5mdW5jdGlvbiBoYW5kbGVOb25PcHRpb25hbFJlc3VsdChwYXlsb2FkLCBpbnN0KSB7XG4gICAgaWYgKCFwYXlsb2FkLmlzc3Vlcy5sZW5ndGggJiYgcGF5bG9hZC52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3R5cGVcIixcbiAgICAgICAgICAgIGV4cGVjdGVkOiBcIm5vbm9wdGlvbmFsXCIsXG4gICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcGF5bG9hZDtcbn1cbmV4cG9ydCBjb25zdCAkWm9kU3VjY2VzcyA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kU3VjY2Vzc1wiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgaWYgKGN0eC5kaXJlY3Rpb24gPT09IFwiYmFja3dhcmRcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGNvcmUuJFpvZEVuY29kZUVycm9yKFwiWm9kU3VjY2Vzc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSByZXN1bHQuaXNzdWVzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHBheWxvYWQudmFsdWUgPSByZXN1bHQuaXNzdWVzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDYXRjaCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2F0Y2hcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcIm9wdGluXCIsICgpID0+IGRlZi5pbm5lclR5cGUuX3pvZC5vcHRpbik7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJvcHRvdXRcIiwgKCkgPT4gZGVmLmlubmVyVHlwZS5fem9kLm9wdG91dCk7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJ2YWx1ZXNcIiwgKCkgPT4gZGVmLmlubmVyVHlwZS5fem9kLnZhbHVlcyk7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICBpZiAoY3R4LmRpcmVjdGlvbiA9PT0gXCJiYWNrd2FyZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmLmlubmVyVHlwZS5fem9kLnJ1bihwYXlsb2FkLCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZvcndhcmQgZGlyZWN0aW9uIChkZWNvZGUpOiBhcHBseSBjYXRjaCBsb2dpY1xuICAgICAgICBjb25zdCByZXN1bHQgPSBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSBkZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IHJlc3VsdC5pc3N1ZXMubWFwKChpc3MpID0+IHV0aWwuZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29yZS5jb25maWcoKSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBwYXlsb2FkLnZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSBkZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgLi4ucGF5bG9hZCxcbiAgICAgICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IHJlc3VsdC5pc3N1ZXMubWFwKChpc3MpID0+IHV0aWwuZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29yZS5jb25maWcoKSkpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2ROYU4gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZE5hTlwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgcGF5bG9hZC52YWx1ZSAhPT0gXCJudW1iZXJcIiB8fCAhTnVtYmVyLmlzTmFOKHBheWxvYWQudmFsdWUpKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcIm5hblwiLFxuICAgICAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kUGlwZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kUGlwZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwidmFsdWVzXCIsICgpID0+IGRlZi5pbi5fem9kLnZhbHVlcyk7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJvcHRpblwiLCAoKSA9PiBkZWYuaW4uX3pvZC5vcHRpbik7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJvcHRvdXRcIiwgKCkgPT4gZGVmLm91dC5fem9kLm9wdG91dCk7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJwcm9wVmFsdWVzXCIsICgpID0+IGRlZi5pbi5fem9kLnByb3BWYWx1ZXMpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgaWYgKGN0eC5kaXJlY3Rpb24gPT09IFwiYmFja3dhcmRcIikge1xuICAgICAgICAgICAgY29uc3QgcmlnaHQgPSBkZWYub3V0Ll96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgICAgICBpZiAocmlnaHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJpZ2h0LnRoZW4oKHJpZ2h0KSA9PiBoYW5kbGVQaXBlUmVzdWx0KHJpZ2h0LCBkZWYuaW4sIGN0eCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVBpcGVSZXN1bHQocmlnaHQsIGRlZi5pbiwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZWZ0ID0gZGVmLmluLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgIGlmIChsZWZ0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGxlZnQudGhlbigobGVmdCkgPT4gaGFuZGxlUGlwZVJlc3VsdChsZWZ0LCBkZWYub3V0LCBjdHgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFuZGxlUGlwZVJlc3VsdChsZWZ0LCBkZWYub3V0LCBjdHgpO1xuICAgIH07XG59KTtcbmZ1bmN0aW9uIGhhbmRsZVBpcGVSZXN1bHQobGVmdCwgbmV4dCwgY3R4KSB7XG4gICAgaWYgKGxlZnQuaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAvLyBwcmV2ZW50IGZ1cnRoZXIgY2hlY2tzXG4gICAgICAgIGxlZnQuYWJvcnRlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBsZWZ0O1xuICAgIH1cbiAgICByZXR1cm4gbmV4dC5fem9kLnJ1bih7IHZhbHVlOiBsZWZ0LnZhbHVlLCBpc3N1ZXM6IGxlZnQuaXNzdWVzIH0sIGN0eCk7XG59XG5leHBvcnQgY29uc3QgJFpvZENvZGVjID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDb2RlY1wiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwidmFsdWVzXCIsICgpID0+IGRlZi5pbi5fem9kLnZhbHVlcyk7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJvcHRpblwiLCAoKSA9PiBkZWYuaW4uX3pvZC5vcHRpbik7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJvcHRvdXRcIiwgKCkgPT4gZGVmLm91dC5fem9kLm9wdG91dCk7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJwcm9wVmFsdWVzXCIsICgpID0+IGRlZi5pbi5fem9kLnByb3BWYWx1ZXMpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gY3R4LmRpcmVjdGlvbiB8fCBcImZvcndhcmRcIjtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJmb3J3YXJkXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBkZWYuaW4uX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgICAgIGlmIChsZWZ0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsZWZ0LnRoZW4oKGxlZnQpID0+IGhhbmRsZUNvZGVjQVJlc3VsdChsZWZ0LCBkZWYsIGN0eCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNvZGVjQVJlc3VsdChsZWZ0LCBkZWYsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCByaWdodCA9IGRlZi5vdXQuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgICAgIGlmIChyaWdodCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmlnaHQudGhlbigocmlnaHQpID0+IGhhbmRsZUNvZGVjQVJlc3VsdChyaWdodCwgZGVmLCBjdHgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVDb2RlY0FSZXN1bHQocmlnaHQsIGRlZiwgY3R4KTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcbmZ1bmN0aW9uIGhhbmRsZUNvZGVjQVJlc3VsdChyZXN1bHQsIGRlZiwgY3R4KSB7XG4gICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgIC8vIHByZXZlbnQgZnVydGhlciBjaGVja3NcbiAgICAgICAgcmVzdWx0LmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBjb25zdCBkaXJlY3Rpb24gPSBjdHguZGlyZWN0aW9uIHx8IFwiZm9yd2FyZFwiO1xuICAgIGlmIChkaXJlY3Rpb24gPT09IFwiZm9yd2FyZFwiKSB7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gZGVmLnRyYW5zZm9ybShyZXN1bHQudmFsdWUsIHJlc3VsdCk7XG4gICAgICAgIGlmICh0cmFuc2Zvcm1lZCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1lZC50aGVuKCh2YWx1ZSkgPT4gaGFuZGxlQ29kZWNUeFJlc3VsdChyZXN1bHQsIHZhbHVlLCBkZWYub3V0LCBjdHgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFuZGxlQ29kZWNUeFJlc3VsdChyZXN1bHQsIHRyYW5zZm9ybWVkLCBkZWYub3V0LCBjdHgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBkZWYucmV2ZXJzZVRyYW5zZm9ybShyZXN1bHQudmFsdWUsIHJlc3VsdCk7XG4gICAgICAgIGlmICh0cmFuc2Zvcm1lZCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1lZC50aGVuKCh2YWx1ZSkgPT4gaGFuZGxlQ29kZWNUeFJlc3VsdChyZXN1bHQsIHZhbHVlLCBkZWYuaW4sIGN0eCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoYW5kbGVDb2RlY1R4UmVzdWx0KHJlc3VsdCwgdHJhbnNmb3JtZWQsIGRlZi5pbiwgY3R4KTtcbiAgICB9XG59XG5mdW5jdGlvbiBoYW5kbGVDb2RlY1R4UmVzdWx0KGxlZnQsIHZhbHVlLCBuZXh0U2NoZW1hLCBjdHgpIHtcbiAgICAvLyBDaGVjayBpZiB0cmFuc2Zvcm0gYWRkZWQgYW55IGlzc3Vlc1xuICAgIGlmIChsZWZ0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgbGVmdC5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGxlZnQ7XG4gICAgfVxuICAgIHJldHVybiBuZXh0U2NoZW1hLl96b2QucnVuKHsgdmFsdWUsIGlzc3VlczogbGVmdC5pc3N1ZXMgfSwgY3R4KTtcbn1cbmV4cG9ydCBjb25zdCAkWm9kUmVhZG9ubHkgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFJlYWRvbmx5XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJwcm9wVmFsdWVzXCIsICgpID0+IGRlZi5pbm5lclR5cGUuX3pvZC5wcm9wVmFsdWVzKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInZhbHVlc1wiLCAoKSA9PiBkZWYuaW5uZXJUeXBlLl96b2QudmFsdWVzKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcIm9wdGluXCIsICgpID0+IGRlZi5pbm5lclR5cGU/Ll96b2Q/Lm9wdGluKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcIm9wdG91dFwiLCAoKSA9PiBkZWYuaW5uZXJUeXBlPy5fem9kPy5vcHRvdXQpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgaWYgKGN0eC5kaXJlY3Rpb24gPT09IFwiYmFja3dhcmRcIikge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi5pbm5lclR5cGUuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oaGFuZGxlUmVhZG9ubHlSZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoYW5kbGVSZWFkb25seVJlc3VsdChyZXN1bHQpO1xuICAgIH07XG59KTtcbmZ1bmN0aW9uIGhhbmRsZVJlYWRvbmx5UmVzdWx0KHBheWxvYWQpIHtcbiAgICBwYXlsb2FkLnZhbHVlID0gT2JqZWN0LmZyZWV6ZShwYXlsb2FkLnZhbHVlKTtcbiAgICByZXR1cm4gcGF5bG9hZDtcbn1cbmV4cG9ydCBjb25zdCAkWm9kVGVtcGxhdGVMaXRlcmFsID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RUZW1wbGF0ZUxpdGVyYWxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb25zdCByZWdleFBhcnRzID0gW107XG4gICAgZm9yIChjb25zdCBwYXJ0IG9mIGRlZi5wYXJ0cykge1xuICAgICAgICBpZiAodHlwZW9mIHBhcnQgPT09IFwib2JqZWN0XCIgJiYgcGFydCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gaXMgWm9kIHNjaGVtYVxuICAgICAgICAgICAgaWYgKCFwYXJ0Ll96b2QucGF0dGVybikge1xuICAgICAgICAgICAgICAgIC8vIGlmICghc291cmNlKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0ZW1wbGF0ZSBsaXRlcmFsIHBhcnQsIG5vIHBhdHRlcm4gZm91bmQ6ICR7Wy4uLnBhcnQuX3pvZC50cmFpdHNdLnNoaWZ0KCl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBwYXJ0Ll96b2QucGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cCA/IHBhcnQuX3pvZC5wYXR0ZXJuLnNvdXJjZSA6IHBhcnQuX3pvZC5wYXR0ZXJuO1xuICAgICAgICAgICAgaWYgKCFzb3VyY2UpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRlbXBsYXRlIGxpdGVyYWwgcGFydDogJHtwYXJ0Ll96b2QudHJhaXRzfWApO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBzb3VyY2Uuc3RhcnRzV2l0aChcIl5cIikgPyAxIDogMDtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHNvdXJjZS5lbmRzV2l0aChcIiRcIikgPyBzb3VyY2UubGVuZ3RoIC0gMSA6IHNvdXJjZS5sZW5ndGg7XG4gICAgICAgICAgICByZWdleFBhcnRzLnB1c2goc291cmNlLnNsaWNlKHN0YXJ0LCBlbmQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJ0ID09PSBudWxsIHx8IHV0aWwucHJpbWl0aXZlVHlwZXMuaGFzKHR5cGVvZiBwYXJ0KSkge1xuICAgICAgICAgICAgcmVnZXhQYXJ0cy5wdXNoKHV0aWwuZXNjYXBlUmVnZXgoYCR7cGFydH1gKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdGVtcGxhdGUgbGl0ZXJhbCBwYXJ0OiAke3BhcnR9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5zdC5fem9kLnBhdHRlcm4gPSBuZXcgUmVnRXhwKGBeJHtyZWdleFBhcnRzLmpvaW4oXCJcIil9JGApO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgcGF5bG9hZC52YWx1ZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgfVxuICAgICAgICBpbnN0Ll96b2QucGF0dGVybi5sYXN0SW5kZXggPSAwO1xuICAgICAgICBpZiAoIWluc3QuX3pvZC5wYXR0ZXJuLnRlc3QocGF5bG9hZC52YWx1ZSkpIHtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2Zvcm1hdFwiLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogZGVmLmZvcm1hdCA/PyBcInRlbXBsYXRlX2xpdGVyYWxcIixcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiBpbnN0Ll96b2QucGF0dGVybi5zb3VyY2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kRnVuY3Rpb24gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEZ1bmN0aW9uXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fZGVmID0gZGVmO1xuICAgIGluc3QuX3pvZC5kZWYgPSBkZWY7XG4gICAgaW5zdC5pbXBsZW1lbnQgPSAoZnVuYykgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGZ1bmMgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW1wbGVtZW50KCkgbXVzdCBiZSBjYWxsZWQgd2l0aCBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkQXJncyA9IGluc3QuX2RlZi5pbnB1dCA/IHBhcnNlKGluc3QuX2RlZi5pbnB1dCwgYXJncykgOiBhcmdzO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5hcHBseShmdW5jLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIGlmIChpbnN0Ll9kZWYub3V0cHV0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlKGluc3QuX2RlZi5vdXRwdXQsIHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgIH07XG4gICAgaW5zdC5pbXBsZW1lbnRBc3luYyA9IChmdW5jKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgZnVuYyAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbXBsZW1lbnRBc3luYygpIG11c3QgYmUgY2FsbGVkIHdpdGggYSBmdW5jdGlvblwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBpbnN0Ll9kZWYuaW5wdXQgPyBhd2FpdCBwYXJzZUFzeW5jKGluc3QuX2RlZi5pbnB1dCwgYXJncykgOiBhcmdzO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUmVmbGVjdC5hcHBseShmdW5jLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIGlmIChpbnN0Ll9kZWYub3V0cHV0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHBhcnNlQXN5bmMoaW5zdC5fZGVmLm91dHB1dCwgcmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHBheWxvYWQudmFsdWUgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3R5cGVcIixcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJmdW5jdGlvblwiLFxuICAgICAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIG91dHB1dCBpcyBhIHByb21pc2UgdHlwZSB0byBkZXRlcm1pbmUgaWYgd2Ugc2hvdWxkIHVzZSBhc3luYyBpbXBsZW1lbnRhdGlvblxuICAgICAgICBjb25zdCBoYXNQcm9taXNlT3V0cHV0ID0gaW5zdC5fZGVmLm91dHB1dCAmJiBpbnN0Ll9kZWYub3V0cHV0Ll96b2QuZGVmLnR5cGUgPT09IFwicHJvbWlzZVwiO1xuICAgICAgICBpZiAoaGFzUHJvbWlzZU91dHB1dCkge1xuICAgICAgICAgICAgcGF5bG9hZC52YWx1ZSA9IGluc3QuaW1wbGVtZW50QXN5bmMocGF5bG9hZC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXlsb2FkLnZhbHVlID0gaW5zdC5pbXBsZW1lbnQocGF5bG9hZC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbiAgICBpbnN0LmlucHV0ID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgY29uc3QgRiA9IGluc3QuY29uc3RydWN0b3I7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3NbMF0pKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEYoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgICBpbnB1dDogbmV3ICRab2RUdXBsZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidHVwbGVcIixcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IGFyZ3NbMF0sXG4gICAgICAgICAgICAgICAgICAgIHJlc3Q6IGFyZ3NbMV0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgb3V0cHV0OiBpbnN0Ll9kZWYub3V0cHV0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBGKHtcbiAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgIGlucHV0OiBhcmdzWzBdLFxuICAgICAgICAgICAgb3V0cHV0OiBpbnN0Ll9kZWYub3V0cHV0LFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGluc3Qub3V0cHV0ID0gKG91dHB1dCkgPT4ge1xuICAgICAgICBjb25zdCBGID0gaW5zdC5jb25zdHJ1Y3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBGKHtcbiAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgIGlucHV0OiBpbnN0Ll9kZWYuaW5wdXQsXG4gICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIGluc3Q7XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kUHJvbWlzZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kUHJvbWlzZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwYXlsb2FkLnZhbHVlKS50aGVuKChpbm5lcikgPT4gZGVmLmlubmVyVHlwZS5fem9kLnJ1bih7IHZhbHVlOiBpbm5lciwgaXNzdWVzOiBbXSB9LCBjdHgpKTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZExhenkgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZExhenlcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICAvLyBsZXQgX2lubmVyVHlwZSE6IGFueTtcbiAgICAvLyB1dGlsLmRlZmluZUxhenkoZGVmLCBcImdldHRlclwiLCAoKSA9PiB7XG4gICAgLy8gICBpZiAoIV9pbm5lclR5cGUpIHtcbiAgICAvLyAgICAgX2lubmVyVHlwZSA9IGRlZi5nZXR0ZXIoKTtcbiAgICAvLyAgIH1cbiAgICAvLyAgIHJldHVybiAoKSA9PiBfaW5uZXJUeXBlO1xuICAgIC8vIH0pO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwiaW5uZXJUeXBlXCIsICgpID0+IGRlZi5nZXR0ZXIoKSk7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJwYXR0ZXJuXCIsICgpID0+IGluc3QuX3pvZC5pbm5lclR5cGU/Ll96b2Q/LnBhdHRlcm4pO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwicHJvcFZhbHVlc1wiLCAoKSA9PiBpbnN0Ll96b2QuaW5uZXJUeXBlPy5fem9kPy5wcm9wVmFsdWVzKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcIm9wdGluXCIsICgpID0+IGluc3QuX3pvZC5pbm5lclR5cGU/Ll96b2Q/Lm9wdGluID8/IHVuZGVmaW5lZCk7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJvcHRvdXRcIiwgKCkgPT4gaW5zdC5fem9kLmlubmVyVHlwZT8uX3pvZD8ub3B0b3V0ID8/IHVuZGVmaW5lZCk7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCBpbm5lciA9IGluc3QuX3pvZC5pbm5lclR5cGU7XG4gICAgICAgIHJldHVybiBpbm5lci5fem9kLnJ1bihwYXlsb2FkLCBjdHgpO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ3VzdG9tID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDdXN0b21cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNoZWNrcy4kWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpO1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgXykgPT4ge1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgY29uc3QgciA9IGRlZi5mbihpbnB1dCk7XG4gICAgICAgIGlmIChyIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4gaGFuZGxlUmVmaW5lUmVzdWx0KHIsIHBheWxvYWQsIGlucHV0LCBpbnN0KSk7XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlUmVmaW5lUmVzdWx0KHIsIHBheWxvYWQsIGlucHV0LCBpbnN0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG59KTtcbmZ1bmN0aW9uIGhhbmRsZVJlZmluZVJlc3VsdChyZXN1bHQsIHBheWxvYWQsIGlucHV0LCBpbnN0KSB7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgY29uc3QgX2lzcyA9IHtcbiAgICAgICAgICAgIGNvZGU6IFwiY3VzdG9tXCIsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsIC8vIGluY29ycG9yYXRlcyBwYXJhbXMuZXJyb3IgaW50byBpc3N1ZSByZXBvcnRpbmdcbiAgICAgICAgICAgIHBhdGg6IFsuLi4oaW5zdC5fem9kLmRlZi5wYXRoID8/IFtdKV0sIC8vIGluY29ycG9yYXRlcyBwYXJhbXMuZXJyb3IgaW50byBpc3N1ZSByZXBvcnRpbmdcbiAgICAgICAgICAgIGNvbnRpbnVlOiAhaW5zdC5fem9kLmRlZi5hYm9ydCxcbiAgICAgICAgICAgIC8vIHBhcmFtczogaW5zdC5fem9kLmRlZi5wYXJhbXMsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChpbnN0Ll96b2QuZGVmLnBhcmFtcylcbiAgICAgICAgICAgIF9pc3MucGFyYW1zID0gaW5zdC5fem9kLmRlZi5wYXJhbXM7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2godXRpbC5pc3N1ZShfaXNzKSk7XG4gICAgfVxufVxuIiwidmFyIF9hO1xuZXhwb3J0IGNvbnN0ICRvdXRwdXQgPSBTeW1ib2woXCJab2RPdXRwdXRcIik7XG5leHBvcnQgY29uc3QgJGlucHV0ID0gU3ltYm9sKFwiWm9kSW5wdXRcIik7XG5leHBvcnQgY2xhc3MgJFpvZFJlZ2lzdHJ5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGhpcy5faWRtYXAgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGFkZChzY2hlbWEsIC4uLl9tZXRhKSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSBfbWV0YVswXTtcbiAgICAgICAgdGhpcy5fbWFwLnNldChzY2hlbWEsIG1ldGEpO1xuICAgICAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PT0gXCJvYmplY3RcIiAmJiBcImlkXCIgaW4gbWV0YSkge1xuICAgICAgICAgICAgdGhpcy5faWRtYXAuc2V0KG1ldGEuaWQsIHNjaGVtYSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9tYXAgPSBuZXcgV2Vha01hcCgpO1xuICAgICAgICB0aGlzLl9pZG1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlbW92ZShzY2hlbWEpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuX21hcC5nZXQoc2NoZW1hKTtcbiAgICAgICAgaWYgKG1ldGEgJiYgdHlwZW9mIG1ldGEgPT09IFwib2JqZWN0XCIgJiYgXCJpZFwiIGluIG1ldGEpIHtcbiAgICAgICAgICAgIHRoaXMuX2lkbWFwLmRlbGV0ZShtZXRhLmlkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tYXAuZGVsZXRlKHNjaGVtYSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXQoc2NoZW1hKSB7XG4gICAgICAgIC8vIHJldHVybiB0aGlzLl9tYXAuZ2V0KHNjaGVtYSkgYXMgYW55O1xuICAgICAgICAvLyBpbmhlcml0IG1ldGFkYXRhXG4gICAgICAgIGNvbnN0IHAgPSBzY2hlbWEuX3pvZC5wYXJlbnQ7XG4gICAgICAgIGlmIChwKSB7XG4gICAgICAgICAgICBjb25zdCBwbSA9IHsgLi4uKHRoaXMuZ2V0KHApID8/IHt9KSB9O1xuICAgICAgICAgICAgZGVsZXRlIHBtLmlkOyAvLyBkbyBub3QgaW5oZXJpdCBpZFxuICAgICAgICAgICAgY29uc3QgZiA9IHsgLi4ucG0sIC4uLnRoaXMuX21hcC5nZXQoc2NoZW1hKSB9O1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGYpLmxlbmd0aCA/IGYgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5nZXQoc2NoZW1hKTtcbiAgICB9XG4gICAgaGFzKHNjaGVtYSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLmhhcyhzY2hlbWEpO1xuICAgIH1cbn1cbi8vIHJlZ2lzdHJpZXNcbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RyeSgpIHtcbiAgICByZXR1cm4gbmV3ICRab2RSZWdpc3RyeSgpO1xufVxuKF9hID0gZ2xvYmFsVGhpcykuX196b2RfZ2xvYmFsUmVnaXN0cnkgPz8gKF9hLl9fem9kX2dsb2JhbFJlZ2lzdHJ5ID0gcmVnaXN0cnkoKSk7XG5leHBvcnQgY29uc3QgZ2xvYmFsUmVnaXN0cnkgPSBnbG9iYWxUaGlzLl9fem9kX2dsb2JhbFJlZ2lzdHJ5O1xuIiwiaW1wb3J0ICogYXMgY2hlY2tzIGZyb20gXCIuL2NoZWNrcy5qc1wiO1xuaW1wb3J0ICogYXMgcmVnaXN0cmllcyBmcm9tIFwiLi9yZWdpc3RyaWVzLmpzXCI7XG5pbXBvcnQgKiBhcyBzY2hlbWFzIGZyb20gXCIuL3NjaGVtYXMuanNcIjtcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSBcIi4vdXRpbC5qc1wiO1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfc3RyaW5nKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX2NvZXJjZWRTdHJpbmcoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBjb2VyY2U6IHRydWUsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9lbWFpbChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJlbWFpbFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX2d1aWQoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwiZ3VpZFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3V1aWQoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwidXVpZFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3V1aWR2NChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJ1dWlkXCIsXG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICB2ZXJzaW9uOiBcInY0XCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF91dWlkdjYoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwidXVpZFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgdmVyc2lvbjogXCJ2NlwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfdXVpZHY3KENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgZm9ybWF0OiBcInV1aWRcIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIHZlcnNpb246IFwidjdcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3VybChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJ1cmxcIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9lbW9qaShDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJlbW9qaVwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX25hbm9pZChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJuYW5vaWRcIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9jdWlkKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgZm9ybWF0OiBcImN1aWRcIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9jdWlkMihDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJjdWlkMlwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3VsaWQoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwidWxpZFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3hpZChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJ4aWRcIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9rc3VpZChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJrc3VpZFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX2lwdjQoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwiaXB2NFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX2lwdjYoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwiaXB2NlwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX21hYyhDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJtYWNcIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9jaWRydjQoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwiY2lkcnY0XCIsXG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfY2lkcnY2KENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgZm9ybWF0OiBcImNpZHJ2NlwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX2Jhc2U2NChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJiYXNlNjRcIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9iYXNlNjR1cmwoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfZTE2NChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJlMTY0XCIsXG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfand0KENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgZm9ybWF0OiBcImp3dFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBUaW1lUHJlY2lzaW9uID0ge1xuICAgIEFueTogbnVsbCxcbiAgICBNaW51dGU6IC0xLFxuICAgIFNlY29uZDogMCxcbiAgICBNaWxsaXNlY29uZDogMyxcbiAgICBNaWNyb3NlY29uZDogNixcbn07XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9pc29EYXRlVGltZShDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJkYXRldGltZVwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgIGxvY2FsOiBmYWxzZSxcbiAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfaXNvRGF0ZShDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJkYXRlXCIsXG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX2lzb1RpbWUoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwidGltZVwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX2lzb0R1cmF0aW9uKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgZm9ybWF0OiBcImR1cmF0aW9uXCIsXG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX251bWJlcihDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9jb2VyY2VkTnVtYmVyKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfaW50KENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgY2hlY2s6IFwibnVtYmVyX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIGZvcm1hdDogXCJzYWZlaW50XCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9mbG9hdDMyKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgY2hlY2s6IFwibnVtYmVyX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIGZvcm1hdDogXCJmbG9hdDMyXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9mbG9hdDY0KENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgY2hlY2s6IFwibnVtYmVyX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIGZvcm1hdDogXCJmbG9hdDY0XCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9pbnQzMihDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgIGNoZWNrOiBcIm51bWJlcl9mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICBmb3JtYXQ6IFwiaW50MzJcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3VpbnQzMihDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgIGNoZWNrOiBcIm51bWJlcl9mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICBmb3JtYXQ6IFwidWludDMyXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9ib29sZWFuKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJib29sZWFuXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9jb2VyY2VkQm9vbGVhbihDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiYm9vbGVhblwiLFxuICAgICAgICBjb2VyY2U6IHRydWUsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9iaWdpbnQoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfY29lcmNlZEJpZ2ludChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgIGNvZXJjZTogdHJ1ZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX2ludDY0KENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJiaWdpbnRcIixcbiAgICAgICAgY2hlY2s6IFwiYmlnaW50X2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIGZvcm1hdDogXCJpbnQ2NFwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfdWludDY0KENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJiaWdpbnRcIixcbiAgICAgICAgY2hlY2s6IFwiYmlnaW50X2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIGZvcm1hdDogXCJ1aW50NjRcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3N5bWJvbChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3ltYm9sXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF91bmRlZmluZWQoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInVuZGVmaW5lZFwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfbnVsbChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwibnVsbFwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfYW55KENsYXNzKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiYW55XCIsXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF91bmtub3duKENsYXNzKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwidW5rbm93blwiLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfbmV2ZXIoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcIm5ldmVyXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF92b2lkKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJ2b2lkXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9kYXRlKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9jb2VyY2VkRGF0ZShDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgICBjb2VyY2U6IHRydWUsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9uYW4oQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcIm5hblwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfbHQodmFsdWUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgY2hlY2tzLiRab2RDaGVja0xlc3NUaGFuKHtcbiAgICAgICAgY2hlY2s6IFwibGVzc190aGFuXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfbHRlKHZhbHVlLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IGNoZWNrcy4kWm9kQ2hlY2tMZXNzVGhhbih7XG4gICAgICAgIGNoZWNrOiBcImxlc3NfdGhhblwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgIH0pO1xufVxuZXhwb3J0IHsgXG4vKiogQGRlcHJlY2F0ZWQgVXNlIGB6Lmx0ZSgpYCBpbnN0ZWFkLiAqL1xuX2x0ZSBhcyBfbWF4LCB9O1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfZ3QodmFsdWUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgY2hlY2tzLiRab2RDaGVja0dyZWF0ZXJUaGFuKHtcbiAgICAgICAgY2hlY2s6IFwiZ3JlYXRlcl90aGFuXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfZ3RlKHZhbHVlLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IGNoZWNrcy4kWm9kQ2hlY2tHcmVhdGVyVGhhbih7XG4gICAgICAgIGNoZWNrOiBcImdyZWF0ZXJfdGhhblwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgIH0pO1xufVxuZXhwb3J0IHsgXG4vKiogQGRlcHJlY2F0ZWQgVXNlIGB6Lmd0ZSgpYCBpbnN0ZWFkLiAqL1xuX2d0ZSBhcyBfbWluLCB9O1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfcG9zaXRpdmUocGFyYW1zKSB7XG4gICAgcmV0dXJuIF9ndCgwLCBwYXJhbXMpO1xufVxuLy8gbmVnYXRpdmVcbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX25lZ2F0aXZlKHBhcmFtcykge1xuICAgIHJldHVybiBfbHQoMCwgcGFyYW1zKTtcbn1cbi8vIG5vbnBvc2l0aXZlXG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9ub25wb3NpdGl2ZShwYXJhbXMpIHtcbiAgICByZXR1cm4gX2x0ZSgwLCBwYXJhbXMpO1xufVxuLy8gbm9ubmVnYXRpdmVcbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX25vbm5lZ2F0aXZlKHBhcmFtcykge1xuICAgIHJldHVybiBfZ3RlKDAsIHBhcmFtcyk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9tdWx0aXBsZU9mKHZhbHVlLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IGNoZWNrcy4kWm9kQ2hlY2tNdWx0aXBsZU9mKHtcbiAgICAgICAgY2hlY2s6IFwibXVsdGlwbGVfb2ZcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICAgICAgdmFsdWUsXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9tYXhTaXplKG1heGltdW0sIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgY2hlY2tzLiRab2RDaGVja01heFNpemUoe1xuICAgICAgICBjaGVjazogXCJtYXhfc2l6ZVwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICBtYXhpbXVtLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfbWluU2l6ZShtaW5pbXVtLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IGNoZWNrcy4kWm9kQ2hlY2tNaW5TaXplKHtcbiAgICAgICAgY2hlY2s6IFwibWluX3NpemVcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICAgICAgbWluaW11bSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3NpemUoc2l6ZSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrU2l6ZUVxdWFscyh7XG4gICAgICAgIGNoZWNrOiBcInNpemVfZXF1YWxzXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIHNpemUsXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9tYXhMZW5ndGgobWF4aW11bSwgcGFyYW1zKSB7XG4gICAgY29uc3QgY2ggPSBuZXcgY2hlY2tzLiRab2RDaGVja01heExlbmd0aCh7XG4gICAgICAgIGNoZWNrOiBcIm1heF9sZW5ndGhcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICAgICAgbWF4aW11bSxcbiAgICB9KTtcbiAgICByZXR1cm4gY2g7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9taW5MZW5ndGgobWluaW11bSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrTWluTGVuZ3RoKHtcbiAgICAgICAgY2hlY2s6IFwibWluX2xlbmd0aFwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICBtaW5pbXVtLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfbGVuZ3RoKGxlbmd0aCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrTGVuZ3RoRXF1YWxzKHtcbiAgICAgICAgY2hlY2s6IFwibGVuZ3RoX2VxdWFsc1wiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICBsZW5ndGgsXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9yZWdleChwYXR0ZXJuLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IGNoZWNrcy4kWm9kQ2hlY2tSZWdleCh7XG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgZm9ybWF0OiBcInJlZ2V4XCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIHBhdHRlcm4sXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9sb3dlcmNhc2UocGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrTG93ZXJDYXNlKHtcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBmb3JtYXQ6IFwibG93ZXJjYXNlXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF91cHBlcmNhc2UocGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrVXBwZXJDYXNlKHtcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBmb3JtYXQ6IFwidXBwZXJjYXNlXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9pbmNsdWRlcyhpbmNsdWRlcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrSW5jbHVkZXMoe1xuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGZvcm1hdDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICBpbmNsdWRlcyxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3N0YXJ0c1dpdGgocHJlZml4LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IGNoZWNrcy4kWm9kQ2hlY2tTdGFydHNXaXRoKHtcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBmb3JtYXQ6IFwic3RhcnRzX3dpdGhcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICAgICAgcHJlZml4LFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfZW5kc1dpdGgoc3VmZml4LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IGNoZWNrcy4kWm9kQ2hlY2tFbmRzV2l0aCh7XG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgZm9ybWF0OiBcImVuZHNfd2l0aFwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICBzdWZmaXgsXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9wcm9wZXJ0eShwcm9wZXJ0eSwgc2NoZW1hLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IGNoZWNrcy4kWm9kQ2hlY2tQcm9wZXJ0eSh7XG4gICAgICAgIGNoZWNrOiBcInByb3BlcnR5XCIsXG4gICAgICAgIHByb3BlcnR5LFxuICAgICAgICBzY2hlbWEsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9taW1lKHR5cGVzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IGNoZWNrcy4kWm9kQ2hlY2tNaW1lVHlwZSh7XG4gICAgICAgIGNoZWNrOiBcIm1pbWVfdHlwZVwiLFxuICAgICAgICBtaW1lOiB0eXBlcyxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX292ZXJ3cml0ZSh0eCkge1xuICAgIHJldHVybiBuZXcgY2hlY2tzLiRab2RDaGVja092ZXJ3cml0ZSh7XG4gICAgICAgIGNoZWNrOiBcIm92ZXJ3cml0ZVwiLFxuICAgICAgICB0eCxcbiAgICB9KTtcbn1cbi8vIG5vcm1hbGl6ZVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfbm9ybWFsaXplKGZvcm0pIHtcbiAgICByZXR1cm4gX292ZXJ3cml0ZSgoaW5wdXQpID0+IGlucHV0Lm5vcm1hbGl6ZShmb3JtKSk7XG59XG4vLyB0cmltXG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF90cmltKCkge1xuICAgIHJldHVybiBfb3ZlcndyaXRlKChpbnB1dCkgPT4gaW5wdXQudHJpbSgpKTtcbn1cbi8vIHRvTG93ZXJDYXNlXG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF90b0xvd2VyQ2FzZSgpIHtcbiAgICByZXR1cm4gX292ZXJ3cml0ZSgoaW5wdXQpID0+IGlucHV0LnRvTG93ZXJDYXNlKCkpO1xufVxuLy8gdG9VcHBlckNhc2Vcbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3RvVXBwZXJDYXNlKCkge1xuICAgIHJldHVybiBfb3ZlcndyaXRlKChpbnB1dCkgPT4gaW5wdXQudG9VcHBlckNhc2UoKSk7XG59XG4vLyBzbHVnaWZ5XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9zbHVnaWZ5KCkge1xuICAgIHJldHVybiBfb3ZlcndyaXRlKChpbnB1dCkgPT4gdXRpbC5zbHVnaWZ5KGlucHV0KSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9hcnJheShDbGFzcywgZWxlbWVudCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgLy8gZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIC8vICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIC8vIH0sXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF91bmlvbihDbGFzcywgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwidW5pb25cIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfeG9yKENsYXNzLCBvcHRpb25zLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJ1bmlvblwiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfZGlzY3JpbWluYXRlZFVuaW9uKENsYXNzLCBkaXNjcmltaW5hdG9yLCBvcHRpb25zLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJ1bmlvblwiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfaW50ZXJzZWN0aW9uKENsYXNzLCBsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcImludGVyc2VjdGlvblwiLFxuICAgICAgICBsZWZ0LFxuICAgICAgICByaWdodCxcbiAgICB9KTtcbn1cbi8vIGV4cG9ydCBmdW5jdGlvbiBfdHVwbGUoXG4vLyAgIENsYXNzOiB1dGlsLlNjaGVtYUNsYXNzPHNjaGVtYXMuJFpvZFR1cGxlPixcbi8vICAgaXRlbXM6IFtdLFxuLy8gICBwYXJhbXM/OiBzdHJpbmcgfCAkWm9kVHVwbGVQYXJhbXNcbi8vICk6IHNjaGVtYXMuJFpvZFR1cGxlPFtdLCBudWxsPjtcbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3R1cGxlKENsYXNzLCBpdGVtcywgX3BhcmFtc09yUmVzdCwgX3BhcmFtcykge1xuICAgIGNvbnN0IGhhc1Jlc3QgPSBfcGFyYW1zT3JSZXN0IGluc3RhbmNlb2Ygc2NoZW1hcy4kWm9kVHlwZTtcbiAgICBjb25zdCBwYXJhbXMgPSBoYXNSZXN0ID8gX3BhcmFtcyA6IF9wYXJhbXNPclJlc3Q7XG4gICAgY29uc3QgcmVzdCA9IGhhc1Jlc3QgPyBfcGFyYW1zT3JSZXN0IDogbnVsbDtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJ0dXBsZVwiLFxuICAgICAgICBpdGVtcyxcbiAgICAgICAgcmVzdCxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3JlY29yZChDbGFzcywga2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJyZWNvcmRcIixcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdmFsdWVUeXBlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfbWFwKENsYXNzLCBrZXlUeXBlLCB2YWx1ZVR5cGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcIm1hcFwiLFxuICAgICAgICBrZXlUeXBlLFxuICAgICAgICB2YWx1ZVR5cGUsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9zZXQoQ2xhc3MsIHZhbHVlVHlwZSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX2VudW0oQ2xhc3MsIHZhbHVlcywgcGFyYW1zKSB7XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkodmFsdWVzKSA/IE9iamVjdC5mcm9tRW50cmllcyh2YWx1ZXMubWFwKCh2KSA9PiBbdiwgdl0pKSA6IHZhbHVlcztcbiAgICAvLyBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpKSB7XG4gICAgLy8gICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgIC8vICAgICBlbnRyaWVzW3ZhbHVlXSA9IHZhbHVlO1xuICAgIC8vICAgfVxuICAgIC8vIH0gZWxzZSB7XG4gICAgLy8gICBPYmplY3QuYXNzaWduKGVudHJpZXMsIHZhbHVlcyk7XG4gICAgLy8gfVxuICAgIC8vIGNvbnN0IGVudHJpZXM6IHV0aWwuRW51bUxpa2UgPSB7fTtcbiAgICAvLyBmb3IgKGNvbnN0IHZhbCBvZiB2YWx1ZXMpIHtcbiAgICAvLyAgIGVudHJpZXNbdmFsXSA9IHZhbDtcbiAgICAvLyB9XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiZW51bVwiLFxuICAgICAgICBlbnRyaWVzLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbi8qKiBAZGVwcmVjYXRlZCBUaGlzIEFQSSBoYXMgYmVlbiBtZXJnZWQgaW50byBgei5lbnVtKClgLiBVc2UgYHouZW51bSgpYCBpbnN0ZWFkLlxuICpcbiAqIGBgYHRzXG4gKiBlbnVtIENvbG9ycyB7IHJlZCwgZ3JlZW4sIGJsdWUgfVxuICogei5lbnVtKENvbG9ycyk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9uYXRpdmVFbnVtKENsYXNzLCBlbnRyaWVzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJlbnVtXCIsXG4gICAgICAgIGVudHJpZXMsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9saXRlcmFsKENsYXNzLCB2YWx1ZSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwibGl0ZXJhbFwiLFxuICAgICAgICB2YWx1ZXM6IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfZmlsZShDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiZmlsZVwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfdHJhbnNmb3JtKENsYXNzLCBmbikge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInRyYW5zZm9ybVwiLFxuICAgICAgICB0cmFuc2Zvcm06IGZuLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfb3B0aW9uYWwoQ2xhc3MsIGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcIm9wdGlvbmFsXCIsXG4gICAgICAgIGlubmVyVHlwZSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX251bGxhYmxlKENsYXNzLCBpbm5lclR5cGUpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJudWxsYWJsZVwiLFxuICAgICAgICBpbm5lclR5cGUsXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9kZWZhdWx0KENsYXNzLCBpbm5lclR5cGUsIGRlZmF1bHRWYWx1ZSkge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcImRlZmF1bHRcIixcbiAgICAgICAgaW5uZXJUeXBlLFxuICAgICAgICBnZXQgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09IFwiZnVuY3Rpb25cIiA/IGRlZmF1bHRWYWx1ZSgpIDogdXRpbC5zaGFsbG93Q2xvbmUoZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX25vbm9wdGlvbmFsKENsYXNzLCBpbm5lclR5cGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcIm5vbm9wdGlvbmFsXCIsXG4gICAgICAgIGlubmVyVHlwZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3N1Y2Nlc3MoQ2xhc3MsIGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgaW5uZXJUeXBlLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfY2F0Y2goQ2xhc3MsIGlubmVyVHlwZSwgY2F0Y2hWYWx1ZSkge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcImNhdGNoXCIsXG4gICAgICAgIGlubmVyVHlwZSxcbiAgICAgICAgY2F0Y2hWYWx1ZTogKHR5cGVvZiBjYXRjaFZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyBjYXRjaFZhbHVlIDogKCkgPT4gY2F0Y2hWYWx1ZSksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9waXBlKENsYXNzLCBpbl8sIG91dCkge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInBpcGVcIixcbiAgICAgICAgaW46IGluXyxcbiAgICAgICAgb3V0LFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfcmVhZG9ubHkoQ2xhc3MsIGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInJlYWRvbmx5XCIsXG4gICAgICAgIGlubmVyVHlwZSxcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3RlbXBsYXRlTGl0ZXJhbChDbGFzcywgcGFydHMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInRlbXBsYXRlX2xpdGVyYWxcIixcbiAgICAgICAgcGFydHMsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9sYXp5KENsYXNzLCBnZXR0ZXIpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJsYXp5XCIsXG4gICAgICAgIGdldHRlcixcbiAgICB9KTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3Byb21pc2UoQ2xhc3MsIGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInByb21pc2VcIixcbiAgICAgICAgaW5uZXJUeXBlLFxuICAgIH0pO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmV4cG9ydCBmdW5jdGlvbiBfY3VzdG9tKENsYXNzLCBmbiwgX3BhcmFtcykge1xuICAgIGNvbnN0IG5vcm0gPSB1dGlsLm5vcm1hbGl6ZVBhcmFtcyhfcGFyYW1zKTtcbiAgICBub3JtLmFib3J0ID8/IChub3JtLmFib3J0ID0gdHJ1ZSk7IC8vIGRlZmF1bHQgdG8gYWJvcnQ6ZmFsc2VcbiAgICBjb25zdCBzY2hlbWEgPSBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcImN1c3RvbVwiLFxuICAgICAgICBjaGVjazogXCJjdXN0b21cIixcbiAgICAgICAgZm46IGZuLFxuICAgICAgICAuLi5ub3JtLFxuICAgIH0pO1xuICAgIHJldHVybiBzY2hlbWE7XG59XG4vLyBzYW1lIGFzIF9jdXN0b20gYnV0IGRlZmF1bHRzIHRvIGFib3J0OmZhbHNlXG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9yZWZpbmUoQ2xhc3MsIGZuLCBfcGFyYW1zKSB7XG4gICAgY29uc3Qgc2NoZW1hID0gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJjdXN0b21cIixcbiAgICAgICAgY2hlY2s6IFwiY3VzdG9tXCIsXG4gICAgICAgIGZuOiBmbixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMoX3BhcmFtcyksXG4gICAgfSk7XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3N1cGVyUmVmaW5lKGZuKSB7XG4gICAgY29uc3QgY2ggPSBfY2hlY2soKHBheWxvYWQpID0+IHtcbiAgICAgICAgcGF5bG9hZC5hZGRJc3N1ZSA9IChpc3N1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpc3N1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2godXRpbC5pc3N1ZShpc3N1ZSwgcGF5bG9hZC52YWx1ZSwgY2guX3pvZC5kZWYpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGZvciBab2QgMyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuICAgICAgICAgICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlO1xuICAgICAgICAgICAgICAgIGlmIChfaXNzdWUuZmF0YWwpXG4gICAgICAgICAgICAgICAgICAgIF9pc3N1ZS5jb250aW51ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIF9pc3N1ZS5jb2RlID8/IChfaXNzdWUuY29kZSA9IFwiY3VzdG9tXCIpO1xuICAgICAgICAgICAgICAgIF9pc3N1ZS5pbnB1dCA/PyAoX2lzc3VlLmlucHV0ID0gcGF5bG9hZC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgX2lzc3VlLmluc3QgPz8gKF9pc3N1ZS5pbnN0ID0gY2gpO1xuICAgICAgICAgICAgICAgIF9pc3N1ZS5jb250aW51ZSA/PyAoX2lzc3VlLmNvbnRpbnVlID0gIWNoLl96b2QuZGVmLmFib3J0KTsgLy8gYWJvcnQgaXMgYWx3YXlzIHVuZGVmaW5lZCwgc28gdGhpcyBpcyBhbHdheXMgdHJ1ZS4uLlxuICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2godXRpbC5pc3N1ZShfaXNzdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZuKHBheWxvYWQudmFsdWUsIHBheWxvYWQpO1xuICAgIH0pO1xuICAgIHJldHVybiBjaDtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX2NoZWNrKGZuLCBwYXJhbXMpIHtcbiAgICBjb25zdCBjaCA9IG5ldyBjaGVja3MuJFpvZENoZWNrKHtcbiAgICAgICAgY2hlY2s6IFwiY3VzdG9tXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG4gICAgY2guX3pvZC5jaGVjayA9IGZuO1xuICAgIHJldHVybiBjaDtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gZGVzY3JpYmUoZGVzY3JpcHRpb24pIHtcbiAgICBjb25zdCBjaCA9IG5ldyBjaGVja3MuJFpvZENoZWNrKHsgY2hlY2s6IFwiZGVzY3JpYmVcIiB9KTtcbiAgICBjaC5fem9kLm9uYXR0YWNoID0gW1xuICAgICAgICAoaW5zdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSByZWdpc3RyaWVzLmdsb2JhbFJlZ2lzdHJ5LmdldChpbnN0KSA/PyB7fTtcbiAgICAgICAgICAgIHJlZ2lzdHJpZXMuZ2xvYmFsUmVnaXN0cnkuYWRkKGluc3QsIHsgLi4uZXhpc3RpbmcsIGRlc2NyaXB0aW9uIH0pO1xuICAgICAgICB9LFxuICAgIF07XG4gICAgY2guX3pvZC5jaGVjayA9ICgpID0+IHsgfTsgLy8gbm8tb3AgY2hlY2tcbiAgICByZXR1cm4gY2g7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIG1ldGEobWV0YWRhdGEpIHtcbiAgICBjb25zdCBjaCA9IG5ldyBjaGVja3MuJFpvZENoZWNrKHsgY2hlY2s6IFwibWV0YVwiIH0pO1xuICAgIGNoLl96b2Qub25hdHRhY2ggPSBbXG4gICAgICAgIChpbnN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHJlZ2lzdHJpZXMuZ2xvYmFsUmVnaXN0cnkuZ2V0KGluc3QpID8/IHt9O1xuICAgICAgICAgICAgcmVnaXN0cmllcy5nbG9iYWxSZWdpc3RyeS5hZGQoaW5zdCwgeyAuLi5leGlzdGluZywgLi4ubWV0YWRhdGEgfSk7XG4gICAgICAgIH0sXG4gICAgXTtcbiAgICBjaC5fem9kLmNoZWNrID0gKCkgPT4geyB9OyAvLyBuby1vcCBjaGVja1xuICAgIHJldHVybiBjaDtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5leHBvcnQgZnVuY3Rpb24gX3N0cmluZ2Jvb2woQ2xhc3NlcywgX3BhcmFtcykge1xuICAgIGNvbnN0IHBhcmFtcyA9IHV0aWwubm9ybWFsaXplUGFyYW1zKF9wYXJhbXMpO1xuICAgIGxldCB0cnV0aHlBcnJheSA9IHBhcmFtcy50cnV0aHkgPz8gW1widHJ1ZVwiLCBcIjFcIiwgXCJ5ZXNcIiwgXCJvblwiLCBcInlcIiwgXCJlbmFibGVkXCJdO1xuICAgIGxldCBmYWxzeUFycmF5ID0gcGFyYW1zLmZhbHN5ID8/IFtcImZhbHNlXCIsIFwiMFwiLCBcIm5vXCIsIFwib2ZmXCIsIFwiblwiLCBcImRpc2FibGVkXCJdO1xuICAgIGlmIChwYXJhbXMuY2FzZSAhPT0gXCJzZW5zaXRpdmVcIikge1xuICAgICAgICB0cnV0aHlBcnJheSA9IHRydXRoeUFycmF5Lm1hcCgodikgPT4gKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiID8gdi50b0xvd2VyQ2FzZSgpIDogdikpO1xuICAgICAgICBmYWxzeUFycmF5ID0gZmFsc3lBcnJheS5tYXAoKHYpID0+ICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIiA/IHYudG9Mb3dlckNhc2UoKSA6IHYpKTtcbiAgICB9XG4gICAgY29uc3QgdHJ1dGh5U2V0ID0gbmV3IFNldCh0cnV0aHlBcnJheSk7XG4gICAgY29uc3QgZmFsc3lTZXQgPSBuZXcgU2V0KGZhbHN5QXJyYXkpO1xuICAgIGNvbnN0IF9Db2RlYyA9IENsYXNzZXMuQ29kZWMgPz8gc2NoZW1hcy4kWm9kQ29kZWM7XG4gICAgY29uc3QgX0Jvb2xlYW4gPSBDbGFzc2VzLkJvb2xlYW4gPz8gc2NoZW1hcy4kWm9kQm9vbGVhbjtcbiAgICBjb25zdCBfU3RyaW5nID0gQ2xhc3Nlcy5TdHJpbmcgPz8gc2NoZW1hcy4kWm9kU3RyaW5nO1xuICAgIGNvbnN0IHN0cmluZ1NjaGVtYSA9IG5ldyBfU3RyaW5nKHsgdHlwZTogXCJzdHJpbmdcIiwgZXJyb3I6IHBhcmFtcy5lcnJvciB9KTtcbiAgICBjb25zdCBib29sZWFuU2NoZW1hID0gbmV3IF9Cb29sZWFuKHsgdHlwZTogXCJib29sZWFuXCIsIGVycm9yOiBwYXJhbXMuZXJyb3IgfSk7XG4gICAgY29uc3QgY29kZWMgPSBuZXcgX0NvZGVjKHtcbiAgICAgICAgdHlwZTogXCJwaXBlXCIsXG4gICAgICAgIGluOiBzdHJpbmdTY2hlbWEsXG4gICAgICAgIG91dDogYm9vbGVhblNjaGVtYSxcbiAgICAgICAgdHJhbnNmb3JtOiAoKGlucHV0LCBwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IGlucHV0O1xuICAgICAgICAgICAgaWYgKHBhcmFtcy5jYXNlICE9PSBcInNlbnNpdGl2ZVwiKVxuICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBpZiAodHJ1dGh5U2V0LmhhcyhkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZmFsc3lTZXQuaGFzKGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF92YWx1ZVwiLFxuICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJzdHJpbmdib29sXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogWy4uLnRydXRoeVNldCwgLi4uZmFsc3lTZXRdLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5zdDogY29kZWMsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICByZXZlcnNlVHJhbnNmb3JtOiAoKGlucHV0LCBfcGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlucHV0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydXRoeUFycmF5WzBdIHx8IFwidHJ1ZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHN5QXJyYXlbMF0gfHwgXCJmYWxzZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgZXJyb3I6IHBhcmFtcy5lcnJvcixcbiAgICB9KTtcbiAgICByZXR1cm4gY29kZWM7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZXhwb3J0IGZ1bmN0aW9uIF9zdHJpbmdGb3JtYXQoQ2xhc3MsIGZvcm1hdCwgZm5PclJlZ2V4LCBfcGFyYW1zID0ge30pIHtcbiAgICBjb25zdCBwYXJhbXMgPSB1dGlsLm5vcm1hbGl6ZVBhcmFtcyhfcGFyYW1zKTtcbiAgICBjb25zdCBkZWYgPSB7XG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKF9wYXJhbXMpLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdCxcbiAgICAgICAgZm46IHR5cGVvZiBmbk9yUmVnZXggPT09IFwiZnVuY3Rpb25cIiA/IGZuT3JSZWdleCA6ICh2YWwpID0+IGZuT3JSZWdleC50ZXN0KHZhbCksXG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICB9O1xuICAgIGlmIChmbk9yUmVnZXggaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgICAgZGVmLnBhdHRlcm4gPSBmbk9yUmVnZXg7XG4gICAgfVxuICAgIGNvbnN0IGluc3QgPSBuZXcgQ2xhc3MoZGVmKTtcbiAgICByZXR1cm4gaW5zdDtcbn1cbiIsImltcG9ydCB7IGdsb2JhbFJlZ2lzdHJ5IH0gZnJvbSBcIi4vcmVnaXN0cmllcy5qc1wiO1xuLy8gZnVuY3Rpb24gaW5pdGlhbGl6ZUNvbnRleHQ8VCBleHRlbmRzIHNjaGVtYXMuJFpvZFR5cGU+KGlucHV0czogSlNPTlNjaGVtYUdlbmVyYXRvclBhcmFtczxUPik6IFRvSlNPTlNjaGVtYUNvbnRleHQ8VD4ge1xuLy8gICByZXR1cm4ge1xuLy8gICAgIHByb2Nlc3NvcjogaW5wdXRzLnByb2Nlc3Nvcixcbi8vICAgICBtZXRhZGF0YVJlZ2lzdHJ5OiBpbnB1dHMubWV0YWRhdGEgPz8gZ2xvYmFsUmVnaXN0cnksXG4vLyAgICAgdGFyZ2V0OiBpbnB1dHMudGFyZ2V0ID8/IFwiZHJhZnQtMjAyMC0xMlwiLFxuLy8gICAgIHVucmVwcmVzZW50YWJsZTogaW5wdXRzLnVucmVwcmVzZW50YWJsZSA/PyBcInRocm93XCIsXG4vLyAgIH07XG4vLyB9XG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUNvbnRleHQocGFyYW1zKSB7XG4gICAgLy8gTm9ybWFsaXplIHRhcmdldDogY29udmVydCBvbGQgbm9uLWh5cGhlbmF0ZWQgdmVyc2lvbnMgdG8gaHlwaGVuYXRlZCB2ZXJzaW9uc1xuICAgIGxldCB0YXJnZXQgPSBwYXJhbXM/LnRhcmdldCA/PyBcImRyYWZ0LTIwMjAtMTJcIjtcbiAgICBpZiAodGFyZ2V0ID09PSBcImRyYWZ0LTRcIilcbiAgICAgICAgdGFyZ2V0ID0gXCJkcmFmdC0wNFwiO1xuICAgIGlmICh0YXJnZXQgPT09IFwiZHJhZnQtN1wiKVxuICAgICAgICB0YXJnZXQgPSBcImRyYWZ0LTA3XCI7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvY2Vzc29yczogcGFyYW1zLnByb2Nlc3NvcnMgPz8ge30sXG4gICAgICAgIG1ldGFkYXRhUmVnaXN0cnk6IHBhcmFtcz8ubWV0YWRhdGEgPz8gZ2xvYmFsUmVnaXN0cnksXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgdW5yZXByZXNlbnRhYmxlOiBwYXJhbXM/LnVucmVwcmVzZW50YWJsZSA/PyBcInRocm93XCIsXG4gICAgICAgIG92ZXJyaWRlOiBwYXJhbXM/Lm92ZXJyaWRlID8/ICgoKSA9PiB7IH0pLFxuICAgICAgICBpbzogcGFyYW1zPy5pbyA/PyBcIm91dHB1dFwiLFxuICAgICAgICBjb3VudGVyOiAwLFxuICAgICAgICBzZWVuOiBuZXcgTWFwKCksXG4gICAgICAgIGN5Y2xlczogcGFyYW1zPy5jeWNsZXMgPz8gXCJyZWZcIixcbiAgICAgICAgcmV1c2VkOiBwYXJhbXM/LnJldXNlZCA/PyBcImlubGluZVwiLFxuICAgICAgICBleHRlcm5hbDogcGFyYW1zPy5leHRlcm5hbCA/PyB1bmRlZmluZWQsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzKHNjaGVtYSwgY3R4LCBfcGFyYW1zID0geyBwYXRoOiBbXSwgc2NoZW1hUGF0aDogW10gfSkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgLy8gY2hlY2sgZm9yIHNjaGVtYSBpbiBzZWVuc1xuICAgIGNvbnN0IHNlZW4gPSBjdHguc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICBpZiAoc2Vlbikge1xuICAgICAgICBzZWVuLmNvdW50Kys7XG4gICAgICAgIC8vIGNoZWNrIGlmIGN5Y2xlXG4gICAgICAgIGNvbnN0IGlzQ3ljbGUgPSBfcGFyYW1zLnNjaGVtYVBhdGguaW5jbHVkZXMoc2NoZW1hKTtcbiAgICAgICAgaWYgKGlzQ3ljbGUpIHtcbiAgICAgICAgICAgIHNlZW4uY3ljbGUgPSBfcGFyYW1zLnBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlZW4uc2NoZW1hO1xuICAgIH1cbiAgICAvLyBpbml0aWFsaXplXG4gICAgY29uc3QgcmVzdWx0ID0geyBzY2hlbWE6IHt9LCBjb3VudDogMSwgY3ljbGU6IHVuZGVmaW5lZCwgcGF0aDogX3BhcmFtcy5wYXRoIH07XG4gICAgY3R4LnNlZW4uc2V0KHNjaGVtYSwgcmVzdWx0KTtcbiAgICAvLyBjdXN0b20gbWV0aG9kIG92ZXJyaWRlcyBkZWZhdWx0IGJlaGF2aW9yXG4gICAgY29uc3Qgb3ZlcnJpZGVTY2hlbWEgPSBzY2hlbWEuX3pvZC50b0pTT05TY2hlbWE/LigpO1xuICAgIGlmIChvdmVycmlkZVNjaGVtYSkge1xuICAgICAgICByZXN1bHQuc2NoZW1hID0gb3ZlcnJpZGVTY2hlbWE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICAuLi5fcGFyYW1zLFxuICAgICAgICAgICAgc2NoZW1hUGF0aDogWy4uLl9wYXJhbXMuc2NoZW1hUGF0aCwgc2NoZW1hXSxcbiAgICAgICAgICAgIHBhdGg6IF9wYXJhbXMucGF0aCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHNjaGVtYS5fem9kLnByb2Nlc3NKU09OU2NoZW1hKSB7XG4gICAgICAgICAgICBzY2hlbWEuX3pvZC5wcm9jZXNzSlNPTlNjaGVtYShjdHgsIHJlc3VsdC5zY2hlbWEsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBfanNvbiA9IHJlc3VsdC5zY2hlbWE7XG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzb3IgPSBjdHgucHJvY2Vzc29yc1tkZWYudHlwZV07XG4gICAgICAgICAgICBpZiAoIXByb2Nlc3Nvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgW3RvSlNPTlNjaGVtYV06IE5vbi1yZXByZXNlbnRhYmxlIHR5cGUgZW5jb3VudGVyZWQ6ICR7ZGVmLnR5cGV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9jZXNzb3Ioc2NoZW1hLCBjdHgsIF9qc29uLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHNjaGVtYS5fem9kLnBhcmVudDtcbiAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgLy8gQWxzbyBzZXQgcmVmIGlmIHByb2Nlc3NvciBkaWRuJ3QgKGZvciBpbmhlcml0YW5jZSlcbiAgICAgICAgICAgIGlmICghcmVzdWx0LnJlZilcbiAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gcGFyZW50O1xuICAgICAgICAgICAgcHJvY2VzcyhwYXJlbnQsIGN0eCwgcGFyYW1zKTtcbiAgICAgICAgICAgIGN0eC5zZWVuLmdldChwYXJlbnQpLmlzUGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBtZXRhZGF0YVxuICAgIGNvbnN0IG1ldGEgPSBjdHgubWV0YWRhdGFSZWdpc3RyeS5nZXQoc2NoZW1hKTtcbiAgICBpZiAobWV0YSlcbiAgICAgICAgT2JqZWN0LmFzc2lnbihyZXN1bHQuc2NoZW1hLCBtZXRhKTtcbiAgICBpZiAoY3R4LmlvID09PSBcImlucHV0XCIgJiYgaXNUcmFuc2Zvcm1pbmcoc2NoZW1hKSkge1xuICAgICAgICAvLyBleGFtcGxlcy9kZWZhdWx0cyBvbmx5IGFwcGx5IHRvIG91dHB1dCB0eXBlIG9mIHBpcGVcbiAgICAgICAgZGVsZXRlIHJlc3VsdC5zY2hlbWEuZXhhbXBsZXM7XG4gICAgICAgIGRlbGV0ZSByZXN1bHQuc2NoZW1hLmRlZmF1bHQ7XG4gICAgfVxuICAgIC8vIHNldCBwcmVmYXVsdCBhcyBkZWZhdWx0XG4gICAgaWYgKGN0eC5pbyA9PT0gXCJpbnB1dFwiICYmIHJlc3VsdC5zY2hlbWEuX3ByZWZhdWx0KVxuICAgICAgICAoX2EgPSByZXN1bHQuc2NoZW1hKS5kZWZhdWx0ID8/IChfYS5kZWZhdWx0ID0gcmVzdWx0LnNjaGVtYS5fcHJlZmF1bHQpO1xuICAgIGRlbGV0ZSByZXN1bHQuc2NoZW1hLl9wcmVmYXVsdDtcbiAgICAvLyBwdWxsaW5nIGZyZXNoIGZyb20gY3R4LnNlZW4gaW4gY2FzZSBpdCB3YXMgb3ZlcndyaXR0ZW5cbiAgICBjb25zdCBfcmVzdWx0ID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgcmV0dXJuIF9yZXN1bHQuc2NoZW1hO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3REZWZzKGN0eCwgc2NoZW1hXG4vLyBwYXJhbXM6IEVtaXRQYXJhbXNcbikge1xuICAgIC8vIGl0ZXJhdGUgb3ZlciBzZWVuIG1hcDtcbiAgICBjb25zdCByb290ID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgaWYgKCFyb290KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnByb2Nlc3NlZCBzY2hlbWEuIFRoaXMgaXMgYSBidWcgaW4gWm9kLlwiKTtcbiAgICAvLyBUcmFjayBpZHMgdG8gZGV0ZWN0IGR1cGxpY2F0ZXMgYWNyb3NzIGRpZmZlcmVudCBzY2hlbWFzXG4gICAgY29uc3QgaWRUb1NjaGVtYSA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGN0eC5zZWVuLmVudHJpZXMoKSkge1xuICAgICAgICBjb25zdCBpZCA9IGN0eC5tZXRhZGF0YVJlZ2lzdHJ5LmdldChlbnRyeVswXSk/LmlkO1xuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gaWRUb1NjaGVtYS5nZXQoaWQpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nICYmIGV4aXN0aW5nICE9PSBlbnRyeVswXSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIHNjaGVtYSBpZCBcIiR7aWR9XCIgZGV0ZWN0ZWQgZHVyaW5nIEpTT04gU2NoZW1hIGNvbnZlcnNpb24uIFR3byBkaWZmZXJlbnQgc2NoZW1hcyBjYW5ub3Qgc2hhcmUgdGhlIHNhbWUgaWQgd2hlbiBjb252ZXJ0ZWQgdG9nZXRoZXIuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZFRvU2NoZW1hLnNldChpZCwgZW50cnlbMF0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHJldHVybnMgYSByZWYgdG8gdGhlIHNjaGVtYVxuICAgIC8vIGRlZklkIHdpbGwgYmUgZW1wdHkgaWYgdGhlIHJlZiBwb2ludHMgdG8gYW4gZXh0ZXJuYWwgc2NoZW1hIChvciAjKVxuICAgIGNvbnN0IG1ha2VVUkkgPSAoZW50cnkpID0+IHtcbiAgICAgICAgLy8gY29tcGFyaW5nIHRoZSBzZWVuIG9iamVjdHMgYmVjYXVzZSBzb21ldGltZXNcbiAgICAgICAgLy8gbXVsdGlwbGUgc2NoZW1hcyBtYXAgdG8gdGhlIHNhbWUgc2VlbiBvYmplY3QuXG4gICAgICAgIC8vIGUuZy4gbGF6eVxuICAgICAgICAvLyBleHRlcm5hbCBpcyBjb25maWd1cmVkXG4gICAgICAgIGNvbnN0IGRlZnNTZWdtZW50ID0gY3R4LnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIgPyBcIiRkZWZzXCIgOiBcImRlZmluaXRpb25zXCI7XG4gICAgICAgIGlmIChjdHguZXh0ZXJuYWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4dGVybmFsSWQgPSBjdHguZXh0ZXJuYWwucmVnaXN0cnkuZ2V0KGVudHJ5WzBdKT8uaWQ7IC8vID8/IFwiX19zaGFyZWRcIjsvLyBgX19zY2hlbWEke2N0eC5jb3VudGVyKyt9YDtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHNjaGVtYSBpcyBpbiB0aGUgZXh0ZXJuYWwgcmVnaXN0cnlcbiAgICAgICAgICAgIGNvbnN0IHVyaUdlbmVyYXRvciA9IGN0eC5leHRlcm5hbC51cmkgPz8gKChpZCkgPT4gaWQpO1xuICAgICAgICAgICAgaWYgKGV4dGVybmFsSWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyByZWY6IHVyaUdlbmVyYXRvcihleHRlcm5hbElkKSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCBhZGQgdG8gX19zaGFyZWRcbiAgICAgICAgICAgIGNvbnN0IGlkID0gZW50cnlbMV0uZGVmSWQgPz8gZW50cnlbMV0uc2NoZW1hLmlkID8/IGBzY2hlbWEke2N0eC5jb3VudGVyKyt9YDtcbiAgICAgICAgICAgIGVudHJ5WzFdLmRlZklkID0gaWQ7IC8vIHNldCBkZWZJZCBzbyBpdCB3aWxsIGJlIHJldXNlZCBpZiBuZWVkZWRcbiAgICAgICAgICAgIHJldHVybiB7IGRlZklkOiBpZCwgcmVmOiBgJHt1cmlHZW5lcmF0b3IoXCJfX3NoYXJlZFwiKX0jLyR7ZGVmc1NlZ21lbnR9LyR7aWR9YCB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbnRyeVsxXSA9PT0gcm9vdCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgcmVmOiBcIiNcIiB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIHNlbGYtY29udGFpbmVkIHNjaGVtYVxuICAgICAgICBjb25zdCB1cmlQcmVmaXggPSBgI2A7XG4gICAgICAgIGNvbnN0IGRlZlVyaVByZWZpeCA9IGAke3VyaVByZWZpeH0vJHtkZWZzU2VnbWVudH0vYDtcbiAgICAgICAgY29uc3QgZGVmSWQgPSBlbnRyeVsxXS5zY2hlbWEuaWQgPz8gYF9fc2NoZW1hJHtjdHguY291bnRlcisrfWA7XG4gICAgICAgIHJldHVybiB7IGRlZklkLCByZWY6IGRlZlVyaVByZWZpeCArIGRlZklkIH07XG4gICAgfTtcbiAgICAvLyBzdG9yZWQgY2FjaGVkIHZlcnNpb24gaW4gYGRlZmAgcHJvcGVydHlcbiAgICAvLyByZW1vdmUgYWxsIHByb3BlcnRpZXMsIHNldCAkcmVmXG4gICAgY29uc3QgZXh0cmFjdFRvRGVmID0gKGVudHJ5KSA9PiB7XG4gICAgICAgIC8vIGlmIHRoZSBzY2hlbWEgaXMgYWxyZWFkeSBhIHJlZmVyZW5jZSwgZG8gbm90IGV4dHJhY3QgaXRcbiAgICAgICAgaWYgKGVudHJ5WzFdLnNjaGVtYS4kcmVmKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICBjb25zdCB7IHJlZiwgZGVmSWQgfSA9IG1ha2VVUkkoZW50cnkpO1xuICAgICAgICBzZWVuLmRlZiA9IHsgLi4uc2Vlbi5zY2hlbWEgfTtcbiAgICAgICAgLy8gZGVmSWQgd29uJ3QgYmUgc2V0IGlmIHRoZSBzY2hlbWEgaXMgYSByZWZlcmVuY2UgdG8gYW4gZXh0ZXJuYWwgc2NoZW1hXG4gICAgICAgIC8vIG9yIGlmIHRoZSBzY2hlbWEgaXMgdGhlIHJvb3Qgc2NoZW1hXG4gICAgICAgIGlmIChkZWZJZClcbiAgICAgICAgICAgIHNlZW4uZGVmSWQgPSBkZWZJZDtcbiAgICAgICAgLy8gd2lwZSBhd2F5IGFsbCBwcm9wZXJ0aWVzIGV4Y2VwdCAkcmVmXG4gICAgICAgIGNvbnN0IHNjaGVtYSA9IHNlZW4uc2NoZW1hO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWFba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBzY2hlbWEuJHJlZiA9IHJlZjtcbiAgICB9O1xuICAgIC8vIHRocm93IG9uIGN5Y2xlc1xuICAgIC8vIGJyZWFrIGN5Y2xlc1xuICAgIGlmIChjdHguY3ljbGVzID09PSBcInRocm93XCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBjdHguc2Vlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlZW4gPSBlbnRyeVsxXTtcbiAgICAgICAgICAgIGlmIChzZWVuLmN5Y2xlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ3ljbGUgZGV0ZWN0ZWQ6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgYCMvJHtzZWVuLmN5Y2xlPy5qb2luKFwiL1wiKX0vPHJvb3Q+YCArXG4gICAgICAgICAgICAgICAgICAgICdcXG5cXG5TZXQgdGhlIGBjeWNsZXNgIHBhcmFtZXRlciB0byBgXCJyZWZcImAgdG8gcmVzb2x2ZSBjeWNsaWNhbCBzY2hlbWFzIHdpdGggZGVmcy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBleHRyYWN0IHNjaGVtYXMgaW50byAkZGVmc1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgY3R4LnNlZW4uZW50cmllcygpKSB7XG4gICAgICAgIGNvbnN0IHNlZW4gPSBlbnRyeVsxXTtcbiAgICAgICAgLy8gY29udmVydCByb290IHNjaGVtYSB0byAjICRyZWZcbiAgICAgICAgaWYgKHNjaGVtYSA9PT0gZW50cnlbMF0pIHtcbiAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7IC8vIHRoaXMgaGFzIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHRoZSByb290IHNjaGVtYVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXh0cmFjdCBzY2hlbWFzIHRoYXQgYXJlIGluIHRoZSBleHRlcm5hbCByZWdpc3RyeVxuICAgICAgICBpZiAoY3R4LmV4dGVybmFsKSB7XG4gICAgICAgICAgICBjb25zdCBleHQgPSBjdHguZXh0ZXJuYWwucmVnaXN0cnkuZ2V0KGVudHJ5WzBdKT8uaWQ7XG4gICAgICAgICAgICBpZiAoc2NoZW1hICE9PSBlbnRyeVswXSAmJiBleHQpIHtcbiAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGV4dHJhY3Qgc2NoZW1hcyB3aXRoIGBpZGAgbWV0YVxuICAgICAgICBjb25zdCBpZCA9IGN0eC5tZXRhZGF0YVJlZ2lzdHJ5LmdldChlbnRyeVswXSk/LmlkO1xuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBicmVhayBjeWNsZXNcbiAgICAgICAgaWYgKHNlZW4uY3ljbGUpIHtcbiAgICAgICAgICAgIC8vIGFueVxuICAgICAgICAgICAgZXh0cmFjdFRvRGVmKGVudHJ5KTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGV4dHJhY3QgcmV1c2VkIHNjaGVtYXNcbiAgICAgICAgaWYgKHNlZW4uY291bnQgPiAxKSB7XG4gICAgICAgICAgICBpZiAoY3R4LnJldXNlZCA9PT0gXCJyZWZcIikge1xuICAgICAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7XG4gICAgICAgICAgICAgICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZmluYWxpemUoY3R4LCBzY2hlbWEpIHtcbiAgICBjb25zdCByb290ID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgaWYgKCFyb290KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnByb2Nlc3NlZCBzY2hlbWEuIFRoaXMgaXMgYSBidWcgaW4gWm9kLlwiKTtcbiAgICAvLyBmbGF0dGVuIHJlZnMgLSBpbmhlcml0IHByb3BlcnRpZXMgZnJvbSBwYXJlbnQgc2NoZW1hc1xuICAgIGNvbnN0IGZsYXR0ZW5SZWYgPSAoem9kU2NoZW1hKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlZW4gPSBjdHguc2Vlbi5nZXQoem9kU2NoZW1hKTtcbiAgICAgICAgLy8gYWxyZWFkeSBwcm9jZXNzZWRcbiAgICAgICAgaWYgKHNlZW4ucmVmID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBzY2hlbWEgPSBzZWVuLmRlZiA/PyBzZWVuLnNjaGVtYTtcbiAgICAgICAgY29uc3QgX2NhY2hlZCA9IHsgLi4uc2NoZW1hIH07XG4gICAgICAgIGNvbnN0IHJlZiA9IHNlZW4ucmVmO1xuICAgICAgICBzZWVuLnJlZiA9IG51bGw7IC8vIHByZXZlbnQgaW5maW5pdGUgcmVjdXJzaW9uXG4gICAgICAgIGlmIChyZWYpIHtcbiAgICAgICAgICAgIGZsYXR0ZW5SZWYocmVmKTtcbiAgICAgICAgICAgIGNvbnN0IHJlZlNlZW4gPSBjdHguc2Vlbi5nZXQocmVmKTtcbiAgICAgICAgICAgIGNvbnN0IHJlZlNjaGVtYSA9IHJlZlNlZW4uc2NoZW1hO1xuICAgICAgICAgICAgLy8gbWVyZ2UgcmVmZXJlbmNlZCBzY2hlbWEgaW50byBjdXJyZW50XG4gICAgICAgICAgICBpZiAocmVmU2NoZW1hLiRyZWYgJiYgKGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMDdcIiB8fCBjdHgudGFyZ2V0ID09PSBcImRyYWZ0LTA0XCIgfHwgY3R4LnRhcmdldCA9PT0gXCJvcGVuYXBpLTMuMFwiKSkge1xuICAgICAgICAgICAgICAgIC8vIG9sZGVyIGRyYWZ0cyBjYW4ndCBjb21iaW5lICRyZWYgd2l0aCBvdGhlciBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgc2NoZW1hLmFsbE9mID0gc2NoZW1hLmFsbE9mID8/IFtdO1xuICAgICAgICAgICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHJlZlNjaGVtYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHNjaGVtYSwgcmVmU2NoZW1hKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJlc3RvcmUgY2hpbGQncyBvd24gcHJvcGVydGllcyAoY2hpbGQgd2lucylcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2NoZW1hLCBfY2FjaGVkKTtcbiAgICAgICAgICAgIGNvbnN0IGlzUGFyZW50UmVmID0gem9kU2NoZW1hLl96b2QucGFyZW50ID09PSByZWY7XG4gICAgICAgICAgICAvLyBGb3IgcGFyZW50IGNoYWluLCBjaGlsZCBpcyBhIHJlZmluZW1lbnQgLSByZW1vdmUgcGFyZW50LW9ubHkgcHJvcGVydGllc1xuICAgICAgICAgICAgaWYgKGlzUGFyZW50UmVmKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiJHJlZlwiIHx8IGtleSA9PT0gXCJhbGxPZlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBfY2FjaGVkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2hlbiByZWYgd2FzIGV4dHJhY3RlZCB0byAkZGVmcywgcmVtb3ZlIHByb3BlcnRpZXMgdGhhdCBtYXRjaCB0aGUgZGVmaW5pdGlvblxuICAgICAgICAgICAgaWYgKHJlZlNjaGVtYS4kcmVmKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiJHJlZlwiIHx8IGtleSA9PT0gXCJhbGxPZlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gcmVmU2Vlbi5kZWYgJiYgSlNPTi5zdHJpbmdpZnkoc2NoZW1hW2tleV0pID09PSBKU09OLnN0cmluZ2lmeShyZWZTZWVuLmRlZltrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHBhcmVudCB3YXMgZXh0cmFjdGVkIChoYXMgJHJlZiksIHByb3BhZ2F0ZSAkcmVmIHRvIHRoaXMgc2NoZW1hXG4gICAgICAgIC8vIFRoaXMgaGFuZGxlcyBjYXNlcyBsaWtlOiByZWFkb25seSgpLm1ldGEoe2lkfSkuZGVzY3JpYmUoKVxuICAgICAgICAvLyB3aGVyZSBwcm9jZXNzb3Igc2V0cyByZWYgdG8gaW5uZXJUeXBlIGJ1dCBwYXJlbnQgc2hvdWxkIGJlIHJlZmVyZW5jZWRcbiAgICAgICAgY29uc3QgcGFyZW50ID0gem9kU2NoZW1hLl96b2QucGFyZW50O1xuICAgICAgICBpZiAocGFyZW50ICYmIHBhcmVudCAhPT0gcmVmKSB7XG4gICAgICAgICAgICAvLyBFbnN1cmUgcGFyZW50IGlzIHByb2Nlc3NlZCBmaXJzdCBzbyBpdHMgZGVmIGhhcyBpbmhlcml0ZWQgcHJvcGVydGllc1xuICAgICAgICAgICAgZmxhdHRlblJlZihwYXJlbnQpO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50U2VlbiA9IGN0eC5zZWVuLmdldChwYXJlbnQpO1xuICAgICAgICAgICAgaWYgKHBhcmVudFNlZW4/LnNjaGVtYS4kcmVmKSB7XG4gICAgICAgICAgICAgICAgc2NoZW1hLiRyZWYgPSBwYXJlbnRTZWVuLnNjaGVtYS4kcmVmO1xuICAgICAgICAgICAgICAgIC8vIERlLWR1cGxpY2F0ZSB3aXRoIHBhcmVudCdzIGRlZmluaXRpb25cbiAgICAgICAgICAgICAgICBpZiAocGFyZW50U2Vlbi5kZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBcIiRyZWZcIiB8fCBrZXkgPT09IFwiYWxsT2ZcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gcGFyZW50U2Vlbi5kZWYgJiYgSlNPTi5zdHJpbmdpZnkoc2NoZW1hW2tleV0pID09PSBKU09OLnN0cmluZ2lmeShwYXJlbnRTZWVuLmRlZltrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBleGVjdXRlIG92ZXJyaWRlc1xuICAgICAgICBjdHgub3ZlcnJpZGUoe1xuICAgICAgICAgICAgem9kU2NoZW1hOiB6b2RTY2hlbWEsXG4gICAgICAgICAgICBqc29uU2NoZW1hOiBzY2hlbWEsXG4gICAgICAgICAgICBwYXRoOiBzZWVuLnBhdGggPz8gW10sXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBbLi4uY3R4LnNlZW4uZW50cmllcygpXS5yZXZlcnNlKCkpIHtcbiAgICAgICAgZmxhdHRlblJlZihlbnRyeVswXSk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGlmIChjdHgudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIikge1xuICAgICAgICByZXN1bHQuJHNjaGVtYSA9IFwiaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQvMjAyMC0xMi9zY2hlbWFcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoY3R4LnRhcmdldCA9PT0gXCJkcmFmdC0wN1wiKSB7XG4gICAgICAgIHJlc3VsdC4kc2NoZW1hID0gXCJodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSNcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoY3R4LnRhcmdldCA9PT0gXCJkcmFmdC0wNFwiKSB7XG4gICAgICAgIHJlc3VsdC4kc2NoZW1hID0gXCJodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA0L3NjaGVtYSNcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoY3R4LnRhcmdldCA9PT0gXCJvcGVuYXBpLTMuMFwiKSB7XG4gICAgICAgIC8vIE9wZW5BUEkgMy4wIHNjaGVtYSBvYmplY3RzIHNob3VsZCBub3QgaW5jbHVkZSBhICRzY2hlbWEgcHJvcGVydHlcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIEFyYml0cmFyeSBzdHJpbmcgdmFsdWVzIGFyZSBhbGxvd2VkIGJ1dCB3b24ndCBoYXZlIGEgJHNjaGVtYSBwcm9wZXJ0eSBzZXRcbiAgICB9XG4gICAgaWYgKGN0eC5leHRlcm5hbD8udXJpKSB7XG4gICAgICAgIGNvbnN0IGlkID0gY3R4LmV4dGVybmFsLnJlZ2lzdHJ5LmdldChzY2hlbWEpPy5pZDtcbiAgICAgICAgaWYgKCFpZClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNjaGVtYSBpcyBtaXNzaW5nIGFuIGBpZGAgcHJvcGVydHlcIik7XG4gICAgICAgIHJlc3VsdC4kaWQgPSBjdHguZXh0ZXJuYWwudXJpKGlkKTtcbiAgICB9XG4gICAgT2JqZWN0LmFzc2lnbihyZXN1bHQsIHJvb3QuZGVmID8/IHJvb3Quc2NoZW1hKTtcbiAgICAvLyBidWlsZCBkZWZzIG9iamVjdFxuICAgIGNvbnN0IGRlZnMgPSBjdHguZXh0ZXJuYWw/LmRlZnMgPz8ge307XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBjdHguc2Vlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICBpZiAoc2Vlbi5kZWYgJiYgc2Vlbi5kZWZJZCkge1xuICAgICAgICAgICAgZGVmc1tzZWVuLmRlZklkXSA9IHNlZW4uZGVmO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHNldCBkZWZpbml0aW9ucyBpbiByZXN1bHRcbiAgICBpZiAoY3R4LmV4dGVybmFsKSB7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGVmcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LiRkZWZzID0gZGVmcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5kZWZpbml0aW9ucyA9IGRlZnM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gdGhpcyBcImZpbmFsaXplc1wiIHRoaXMgc2NoZW1hIGFuZCBlbnN1cmVzIGFsbCBjeWNsZXMgYXJlIHJlbW92ZWRcbiAgICAgICAgLy8gZWFjaCBjYWxsIHRvIGZpbmFsaXplKCkgaXMgZnVuY3Rpb25hbGx5IGluZGVwZW5kZW50XG4gICAgICAgIC8vIHRob3VnaCB0aGUgc2VlbiBtYXAgaXMgc2hhcmVkXG4gICAgICAgIGNvbnN0IGZpbmFsaXplZCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmaW5hbGl6ZWQsIFwifnN0YW5kYXJkXCIsIHtcbiAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgLi4uc2NoZW1hW1wifnN0YW5kYXJkXCJdLFxuICAgICAgICAgICAgICAgIGpzb25TY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGNyZWF0ZVN0YW5kYXJkSlNPTlNjaGVtYU1ldGhvZChzY2hlbWEsIFwiaW5wdXRcIiwgY3R4LnByb2Nlc3NvcnMpLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IGNyZWF0ZVN0YW5kYXJkSlNPTlNjaGVtYU1ldGhvZChzY2hlbWEsIFwib3V0cHV0XCIsIGN0eC5wcm9jZXNzb3JzKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZpbmFsaXplZDtcbiAgICB9XG4gICAgY2F0Y2ggKF9lcnIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgY29udmVydGluZyBzY2hlbWEgdG8gSlNPTi5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNUcmFuc2Zvcm1pbmcoX3NjaGVtYSwgX2N0eCkge1xuICAgIGNvbnN0IGN0eCA9IF9jdHggPz8geyBzZWVuOiBuZXcgU2V0KCkgfTtcbiAgICBpZiAoY3R4LnNlZW4uaGFzKF9zY2hlbWEpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgY3R4LnNlZW4uYWRkKF9zY2hlbWEpO1xuICAgIGNvbnN0IGRlZiA9IF9zY2hlbWEuX3pvZC5kZWY7XG4gICAgaWYgKGRlZi50eXBlID09PSBcInRyYW5zZm9ybVwiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoZGVmLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5lbGVtZW50LCBjdHgpO1xuICAgIGlmIChkZWYudHlwZSA9PT0gXCJzZXRcIilcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi52YWx1ZVR5cGUsIGN0eCk7XG4gICAgaWYgKGRlZi50eXBlID09PSBcImxhenlcIilcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5nZXR0ZXIoKSwgY3R4KTtcbiAgICBpZiAoZGVmLnR5cGUgPT09IFwicHJvbWlzZVwiIHx8XG4gICAgICAgIGRlZi50eXBlID09PSBcIm9wdGlvbmFsXCIgfHxcbiAgICAgICAgZGVmLnR5cGUgPT09IFwibm9ub3B0aW9uYWxcIiB8fFxuICAgICAgICBkZWYudHlwZSA9PT0gXCJudWxsYWJsZVwiIHx8XG4gICAgICAgIGRlZi50eXBlID09PSBcInJlYWRvbmx5XCIgfHxcbiAgICAgICAgZGVmLnR5cGUgPT09IFwiZGVmYXVsdFwiIHx8XG4gICAgICAgIGRlZi50eXBlID09PSBcInByZWZhdWx0XCIpIHtcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbm5lclR5cGUsIGN0eCk7XG4gICAgfVxuICAgIGlmIChkZWYudHlwZSA9PT0gXCJpbnRlcnNlY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmxlZnQsIGN0eCkgfHwgaXNUcmFuc2Zvcm1pbmcoZGVmLnJpZ2h0LCBjdHgpO1xuICAgIH1cbiAgICBpZiAoZGVmLnR5cGUgPT09IFwicmVjb3JkXCIgfHwgZGVmLnR5cGUgPT09IFwibWFwXCIpIHtcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5rZXlUeXBlLCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi52YWx1ZVR5cGUsIGN0eCk7XG4gICAgfVxuICAgIGlmIChkZWYudHlwZSA9PT0gXCJwaXBlXCIpIHtcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbiwgY3R4KSB8fCBpc1RyYW5zZm9ybWluZyhkZWYub3V0LCBjdHgpO1xuICAgIH1cbiAgICBpZiAoZGVmLnR5cGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGVmLnNoYXBlKSB7XG4gICAgICAgICAgICBpZiAoaXNUcmFuc2Zvcm1pbmcoZGVmLnNoYXBlW2tleV0sIGN0eCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZGVmLnR5cGUgPT09IFwidW5pb25cIikge1xuICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBkZWYub3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKGlzVHJhbnNmb3JtaW5nKG9wdGlvbiwgY3R4KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChkZWYudHlwZSA9PT0gXCJ0dXBsZVwiKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBkZWYuaXRlbXMpIHtcbiAgICAgICAgICAgIGlmIChpc1RyYW5zZm9ybWluZyhpdGVtLCBjdHgpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYucmVzdCAmJiBpc1RyYW5zZm9ybWluZyhkZWYucmVzdCwgY3R4KSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHRvSlNPTlNjaGVtYSBtZXRob2QgZm9yIGEgc2NoZW1hIGluc3RhbmNlLlxuICogVGhpcyBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG9mIGluaXRpYWxpemluZyBjb250ZXh0LCBwcm9jZXNzaW5nLCBleHRyYWN0aW5nIGRlZnMsIGFuZCBmaW5hbGl6aW5nLlxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlVG9KU09OU2NoZW1hTWV0aG9kID0gKHNjaGVtYSwgcHJvY2Vzc29ycyA9IHt9KSA9PiAocGFyYW1zKSA9PiB7XG4gICAgY29uc3QgY3R4ID0gaW5pdGlhbGl6ZUNvbnRleHQoeyAuLi5wYXJhbXMsIHByb2Nlc3NvcnMgfSk7XG4gICAgcHJvY2VzcyhzY2hlbWEsIGN0eCk7XG4gICAgZXh0cmFjdERlZnMoY3R4LCBzY2hlbWEpO1xuICAgIHJldHVybiBmaW5hbGl6ZShjdHgsIHNjaGVtYSk7XG59O1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVN0YW5kYXJkSlNPTlNjaGVtYU1ldGhvZCA9IChzY2hlbWEsIGlvLCBwcm9jZXNzb3JzID0ge30pID0+IChwYXJhbXMpID0+IHtcbiAgICBjb25zdCB7IGxpYnJhcnlPcHRpb25zLCB0YXJnZXQgfSA9IHBhcmFtcyA/PyB7fTtcbiAgICBjb25zdCBjdHggPSBpbml0aWFsaXplQ29udGV4dCh7IC4uLihsaWJyYXJ5T3B0aW9ucyA/PyB7fSksIHRhcmdldCwgaW8sIHByb2Nlc3NvcnMgfSk7XG4gICAgcHJvY2VzcyhzY2hlbWEsIGN0eCk7XG4gICAgZXh0cmFjdERlZnMoY3R4LCBzY2hlbWEpO1xuICAgIHJldHVybiBmaW5hbGl6ZShjdHgsIHNjaGVtYSk7XG59O1xuIiwiaW1wb3J0IHsgZXh0cmFjdERlZnMsIGZpbmFsaXplLCBpbml0aWFsaXplQ29udGV4dCwgcHJvY2VzcywgfSBmcm9tIFwiLi90by1qc29uLXNjaGVtYS5qc1wiO1xuaW1wb3J0IHsgZ2V0RW51bVZhbHVlcyB9IGZyb20gXCIuL3V0aWwuanNcIjtcbmNvbnN0IGZvcm1hdE1hcCA9IHtcbiAgICBndWlkOiBcInV1aWRcIixcbiAgICB1cmw6IFwidXJpXCIsXG4gICAgZGF0ZXRpbWU6IFwiZGF0ZS10aW1lXCIsXG4gICAganNvbl9zdHJpbmc6IFwianNvbi1zdHJpbmdcIixcbiAgICByZWdleDogXCJcIiwgLy8gZG8gbm90IHNldFxufTtcbi8vID09PT09PT09PT09PT09PT09PT09IFNJTVBMRSBUWVBFIFBST0NFU1NPUlMgPT09PT09PT09PT09PT09PT09PT1cbmV4cG9ydCBjb25zdCBzdHJpbmdQcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIF9qc29uLCBfcGFyYW1zKSA9PiB7XG4gICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgIGpzb24udHlwZSA9IFwic3RyaW5nXCI7XG4gICAgY29uc3QgeyBtaW5pbXVtLCBtYXhpbXVtLCBmb3JtYXQsIHBhdHRlcm5zLCBjb250ZW50RW5jb2RpbmcgfSA9IHNjaGVtYS5fem9kXG4gICAgICAgIC5iYWc7XG4gICAgaWYgKHR5cGVvZiBtaW5pbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICBqc29uLm1pbkxlbmd0aCA9IG1pbmltdW07XG4gICAgaWYgKHR5cGVvZiBtYXhpbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICBqc29uLm1heExlbmd0aCA9IG1heGltdW07XG4gICAgLy8gY3VzdG9tIHBhdHRlcm4gb3ZlcnJpZGVzIGZvcm1hdFxuICAgIGlmIChmb3JtYXQpIHtcbiAgICAgICAganNvbi5mb3JtYXQgPSBmb3JtYXRNYXBbZm9ybWF0XSA/PyBmb3JtYXQ7XG4gICAgICAgIGlmIChqc29uLmZvcm1hdCA9PT0gXCJcIilcbiAgICAgICAgICAgIGRlbGV0ZSBqc29uLmZvcm1hdDsgLy8gZW1wdHkgZm9ybWF0IGlzIG5vdCB2YWxpZFxuICAgICAgICAvLyBKU09OIFNjaGVtYSBmb3JtYXQ6IFwidGltZVwiIHJlcXVpcmVzIGEgZnVsbCB0aW1lIHdpdGggb2Zmc2V0IG9yIFpcbiAgICAgICAgLy8gei5pc28udGltZSgpIGRvZXMgbm90IGluY2x1ZGUgdGltZXpvbmUgaW5mb3JtYXRpb24sIHNvIGZvcm1hdDogXCJ0aW1lXCIgc2hvdWxkIG5ldmVyIGJlIHVzZWRcbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gXCJ0aW1lXCIpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBqc29uLmZvcm1hdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoY29udGVudEVuY29kaW5nKVxuICAgICAgICBqc29uLmNvbnRlbnRFbmNvZGluZyA9IGNvbnRlbnRFbmNvZGluZztcbiAgICBpZiAocGF0dGVybnMgJiYgcGF0dGVybnMuc2l6ZSA+IDApIHtcbiAgICAgICAgY29uc3QgcmVnZXhlcyA9IFsuLi5wYXR0ZXJuc107XG4gICAgICAgIGlmIChyZWdleGVzLmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICAgIGpzb24ucGF0dGVybiA9IHJlZ2V4ZXNbMF0uc291cmNlO1xuICAgICAgICBlbHNlIGlmIChyZWdleGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGpzb24uYWxsT2YgPSBbXG4gICAgICAgICAgICAgICAgLi4ucmVnZXhlcy5tYXAoKHJlZ2V4KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAuLi4oY3R4LnRhcmdldCA9PT0gXCJkcmFmdC0wN1wiIHx8IGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMDRcIiB8fCBjdHgudGFyZ2V0ID09PSBcIm9wZW5hcGktMy4wXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8geyB0eXBlOiBcInN0cmluZ1wiIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiByZWdleC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5leHBvcnQgY29uc3QgbnVtYmVyUHJvY2Vzc29yID0gKHNjaGVtYSwgY3R4LCBfanNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0sIGZvcm1hdCwgbXVsdGlwbGVPZiwgZXhjbHVzaXZlTWF4aW11bSwgZXhjbHVzaXZlTWluaW11bSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgIGlmICh0eXBlb2YgZm9ybWF0ID09PSBcInN0cmluZ1wiICYmIGZvcm1hdC5pbmNsdWRlcyhcImludFwiKSlcbiAgICAgICAganNvbi50eXBlID0gXCJpbnRlZ2VyXCI7XG4gICAgZWxzZVxuICAgICAgICBqc29uLnR5cGUgPSBcIm51bWJlclwiO1xuICAgIGlmICh0eXBlb2YgZXhjbHVzaXZlTWluaW11bSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBpZiAoY3R4LnRhcmdldCA9PT0gXCJkcmFmdC0wNFwiIHx8IGN0eC50YXJnZXQgPT09IFwib3BlbmFwaS0zLjBcIikge1xuICAgICAgICAgICAganNvbi5taW5pbXVtID0gZXhjbHVzaXZlTWluaW11bTtcbiAgICAgICAgICAgIGpzb24uZXhjbHVzaXZlTWluaW11bSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBqc29uLmV4Y2x1c2l2ZU1pbmltdW0gPSBleGNsdXNpdmVNaW5pbXVtO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBqc29uLm1pbmltdW0gPSBtaW5pbXVtO1xuICAgICAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1pbmltdW0gPT09IFwibnVtYmVyXCIgJiYgY3R4LnRhcmdldCAhPT0gXCJkcmFmdC0wNFwiKSB7XG4gICAgICAgICAgICBpZiAoZXhjbHVzaXZlTWluaW11bSA+PSBtaW5pbXVtKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLm1pbmltdW07XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZGVsZXRlIGpzb24uZXhjbHVzaXZlTWluaW11bTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1heGltdW0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgaWYgKGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMDRcIiB8fCBjdHgudGFyZ2V0ID09PSBcIm9wZW5hcGktMy4wXCIpIHtcbiAgICAgICAgICAgIGpzb24ubWF4aW11bSA9IGV4Y2x1c2l2ZU1heGltdW07XG4gICAgICAgICAgICBqc29uLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAganNvbi5leGNsdXNpdmVNYXhpbXVtID0gZXhjbHVzaXZlTWF4aW11bTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIG1heGltdW0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAganNvbi5tYXhpbXVtID0gbWF4aW11bTtcbiAgICAgICAgaWYgKHR5cGVvZiBleGNsdXNpdmVNYXhpbXVtID09PSBcIm51bWJlclwiICYmIGN0eC50YXJnZXQgIT09IFwiZHJhZnQtMDRcIikge1xuICAgICAgICAgICAgaWYgKGV4Y2x1c2l2ZU1heGltdW0gPD0gbWF4aW11bSlcbiAgICAgICAgICAgICAgICBkZWxldGUganNvbi5tYXhpbXVtO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLmV4Y2x1c2l2ZU1heGltdW07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBtdWx0aXBsZU9mID09PSBcIm51bWJlclwiKVxuICAgICAgICBqc29uLm11bHRpcGxlT2YgPSBtdWx0aXBsZU9mO1xufTtcbmV4cG9ydCBjb25zdCBib29sZWFuUHJvY2Vzc29yID0gKF9zY2hlbWEsIF9jdHgsIGpzb24sIF9wYXJhbXMpID0+IHtcbiAgICBqc29uLnR5cGUgPSBcImJvb2xlYW5cIjtcbn07XG5leHBvcnQgY29uc3QgYmlnaW50UHJvY2Vzc29yID0gKF9zY2hlbWEsIGN0eCwgX2pzb24sIF9wYXJhbXMpID0+IHtcbiAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJpZ0ludCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBzeW1ib2xQcm9jZXNzb3IgPSAoX3NjaGVtYSwgY3R4LCBfanNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGlmIChjdHgudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3ltYm9scyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBudWxsUHJvY2Vzc29yID0gKF9zY2hlbWEsIGN0eCwganNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGlmIChjdHgudGFyZ2V0ID09PSBcIm9wZW5hcGktMy4wXCIpIHtcbiAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICAgICAganNvbi5udWxsYWJsZSA9IHRydWU7XG4gICAgICAgIGpzb24uZW51bSA9IFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGpzb24udHlwZSA9IFwibnVsbFwiO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgdW5kZWZpbmVkUHJvY2Vzc29yID0gKF9zY2hlbWEsIGN0eCwgX2pzb24sIF9wYXJhbXMpID0+IHtcbiAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZGVmaW5lZCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCB2b2lkUHJvY2Vzc29yID0gKF9zY2hlbWEsIGN0eCwgX2pzb24sIF9wYXJhbXMpID0+IHtcbiAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZvaWQgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgbmV2ZXJQcm9jZXNzb3IgPSAoX3NjaGVtYSwgX2N0eCwganNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGpzb24ubm90ID0ge307XG59O1xuZXhwb3J0IGNvbnN0IGFueVByb2Nlc3NvciA9IChfc2NoZW1hLCBfY3R4LCBfanNvbiwgX3BhcmFtcykgPT4ge1xuICAgIC8vIGVtcHR5IHNjaGVtYSBhY2NlcHRzIGFueXRoaW5nXG59O1xuZXhwb3J0IGNvbnN0IHVua25vd25Qcm9jZXNzb3IgPSAoX3NjaGVtYSwgX2N0eCwgX2pzb24sIF9wYXJhbXMpID0+IHtcbiAgICAvLyBlbXB0eSBzY2hlbWEgYWNjZXB0cyBhbnl0aGluZ1xufTtcbmV4cG9ydCBjb25zdCBkYXRlUHJvY2Vzc29yID0gKF9zY2hlbWEsIGN0eCwgX2pzb24sIF9wYXJhbXMpID0+IHtcbiAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGUgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgZW51bVByb2Nlc3NvciA9IChzY2hlbWEsIF9jdHgsIGpzb24sIF9wYXJhbXMpID0+IHtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgY29uc3QgdmFsdWVzID0gZ2V0RW51bVZhbHVlcyhkZWYuZW50cmllcyk7XG4gICAgLy8gTnVtYmVyIGVudW1zIGNhbiBoYXZlIGJvdGggc3RyaW5nIGFuZCBudW1iZXIgdmFsdWVzXG4gICAgaWYgKHZhbHVlcy5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09IFwibnVtYmVyXCIpKVxuICAgICAgICBqc29uLnR5cGUgPSBcIm51bWJlclwiO1xuICAgIGlmICh2YWx1ZXMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSlcbiAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICBqc29uLmVudW0gPSB2YWx1ZXM7XG59O1xuZXhwb3J0IGNvbnN0IGxpdGVyYWxQcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIGpzb24sIF9wYXJhbXMpID0+IHtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgY29uc3QgdmFscyA9IFtdO1xuICAgIGZvciAoY29uc3QgdmFsIG9mIGRlZi52YWx1ZXMpIHtcbiAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTGl0ZXJhbCBgdW5kZWZpbmVkYCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBkbyBub3QgYWRkIHRvIHZhbHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmlnSW50IGxpdGVyYWxzIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHMucHVzaChOdW1iZXIodmFsKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YWxzLnB1c2godmFsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodmFscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gZG8gbm90aGluZyAoYW4gdW5kZWZpbmVkIGxpdGVyYWwgd2FzIHN0cmlwcGVkKVxuICAgIH1cbiAgICBlbHNlIGlmICh2YWxzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB2YWwgPSB2YWxzWzBdO1xuICAgICAgICBqc29uLnR5cGUgPSB2YWwgPT09IG51bGwgPyBcIm51bGxcIiA6IHR5cGVvZiB2YWw7XG4gICAgICAgIGlmIChjdHgudGFyZ2V0ID09PSBcImRyYWZ0LTA0XCIgfHwgY3R4LnRhcmdldCA9PT0gXCJvcGVuYXBpLTMuMFwiKSB7XG4gICAgICAgICAgICBqc29uLmVudW0gPSBbdmFsXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGpzb24uY29uc3QgPSB2YWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIikpXG4gICAgICAgICAgICBqc29uLnR5cGUgPSBcIm51bWJlclwiO1xuICAgICAgICBpZiAodmFscy5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIpKVxuICAgICAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICAgICAgaWYgKHZhbHMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcImJvb2xlYW5cIikpXG4gICAgICAgICAgICBqc29uLnR5cGUgPSBcImJvb2xlYW5cIjtcbiAgICAgICAgaWYgKHZhbHMuZXZlcnkoKHYpID0+IHYgPT09IG51bGwpKVxuICAgICAgICAgICAganNvbi50eXBlID0gXCJudWxsXCI7XG4gICAgICAgIGpzb24uZW51bSA9IHZhbHM7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBuYW5Qcm9jZXNzb3IgPSAoX3NjaGVtYSwgY3R4LCBfanNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGlmIChjdHgudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmFOIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHRlbXBsYXRlTGl0ZXJhbFByb2Nlc3NvciA9IChzY2hlbWEsIF9jdHgsIGpzb24sIF9wYXJhbXMpID0+IHtcbiAgICBjb25zdCBfanNvbiA9IGpzb247XG4gICAgY29uc3QgcGF0dGVybiA9IHNjaGVtYS5fem9kLnBhdHRlcm47XG4gICAgaWYgKCFwYXR0ZXJuKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXR0ZXJuIG5vdCBmb3VuZCBpbiB0ZW1wbGF0ZSBsaXRlcmFsXCIpO1xuICAgIF9qc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgIF9qc29uLnBhdHRlcm4gPSBwYXR0ZXJuLnNvdXJjZTtcbn07XG5leHBvcnQgY29uc3QgZmlsZVByb2Nlc3NvciA9IChzY2hlbWEsIF9jdHgsIGpzb24sIF9wYXJhbXMpID0+IHtcbiAgICBjb25zdCBfanNvbiA9IGpzb247XG4gICAgY29uc3QgZmlsZSA9IHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgZm9ybWF0OiBcImJpbmFyeVwiLFxuICAgICAgICBjb250ZW50RW5jb2Rpbmc6IFwiYmluYXJ5XCIsXG4gICAgfTtcbiAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0sIG1pbWUgfSA9IHNjaGVtYS5fem9kLmJhZztcbiAgICBpZiAobWluaW11bSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICBmaWxlLm1pbkxlbmd0aCA9IG1pbmltdW07XG4gICAgaWYgKG1heGltdW0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgZmlsZS5tYXhMZW5ndGggPSBtYXhpbXVtO1xuICAgIGlmIChtaW1lKSB7XG4gICAgICAgIGlmIChtaW1lLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgZmlsZS5jb250ZW50TWVkaWFUeXBlID0gbWltZVswXTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oX2pzb24sIGZpbGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihfanNvbiwgZmlsZSk7IC8vIHNoYXJlZCBwcm9wcyBhdCByb290XG4gICAgICAgICAgICBfanNvbi5hbnlPZiA9IG1pbWUubWFwKChtKSA9PiAoeyBjb250ZW50TWVkaWFUeXBlOiBtIH0pKTsgLy8gb25seSBjb250ZW50TWVkaWFUeXBlIGRpZmZlcnNcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihfanNvbiwgZmlsZSk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBzdWNjZXNzUHJvY2Vzc29yID0gKF9zY2hlbWEsIF9jdHgsIGpzb24sIF9wYXJhbXMpID0+IHtcbiAgICBqc29uLnR5cGUgPSBcImJvb2xlYW5cIjtcbn07XG5leHBvcnQgY29uc3QgY3VzdG9tUHJvY2Vzc29yID0gKF9zY2hlbWEsIGN0eCwgX2pzb24sIF9wYXJhbXMpID0+IHtcbiAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkN1c3RvbSB0eXBlcyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBmdW5jdGlvblByb2Nlc3NvciA9IChfc2NoZW1hLCBjdHgsIF9qc29uLCBfcGFyYW1zKSA9PiB7XG4gICAgaWYgKGN0eC51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGdW5jdGlvbiB0eXBlcyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm1Qcm9jZXNzb3IgPSAoX3NjaGVtYSwgY3R4LCBfanNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGlmIChjdHgudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHJhbnNmb3JtcyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBtYXBQcm9jZXNzb3IgPSAoX3NjaGVtYSwgY3R4LCBfanNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGlmIChjdHgudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWFwIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHNldFByb2Nlc3NvciA9IChfc2NoZW1hLCBjdHgsIF9qc29uLCBfcGFyYW1zKSA9PiB7XG4gICAgaWYgKGN0eC51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTZXQgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgIH1cbn07XG4vLyA9PT09PT09PT09PT09PT09PT09PSBDT01QT1NJVEUgVFlQRSBQUk9DRVNTT1JTID09PT09PT09PT09PT09PT09PT09XG5leHBvcnQgY29uc3QgYXJyYXlQcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIF9qc29uLCBwYXJhbXMpID0+IHtcbiAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIGNvbnN0IHsgbWluaW11bSwgbWF4aW11bSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAganNvbi5taW5JdGVtcyA9IG1pbmltdW07XG4gICAgaWYgKHR5cGVvZiBtYXhpbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICBqc29uLm1heEl0ZW1zID0gbWF4aW11bTtcbiAgICBqc29uLnR5cGUgPSBcImFycmF5XCI7XG4gICAganNvbi5pdGVtcyA9IHByb2Nlc3MoZGVmLmVsZW1lbnQsIGN0eCwgeyAuLi5wYXJhbXMsIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJpdGVtc1wiXSB9KTtcbn07XG5leHBvcnQgY29uc3Qgb2JqZWN0UHJvY2Vzc29yID0gKHNjaGVtYSwgY3R4LCBfanNvbiwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBqc29uLnR5cGUgPSBcIm9iamVjdFwiO1xuICAgIGpzb24ucHJvcGVydGllcyA9IHt9O1xuICAgIGNvbnN0IHNoYXBlID0gZGVmLnNoYXBlO1xuICAgIGZvciAoY29uc3Qga2V5IGluIHNoYXBlKSB7XG4gICAgICAgIGpzb24ucHJvcGVydGllc1trZXldID0gcHJvY2VzcyhzaGFwZVtrZXldLCBjdHgsIHtcbiAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJwcm9wZXJ0aWVzXCIsIGtleV0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyByZXF1aXJlZCBrZXlzXG4gICAgY29uc3QgYWxsS2V5cyA9IG5ldyBTZXQoT2JqZWN0LmtleXMoc2hhcGUpKTtcbiAgICBjb25zdCByZXF1aXJlZEtleXMgPSBuZXcgU2V0KFsuLi5hbGxLZXlzXS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICBjb25zdCB2ID0gZGVmLnNoYXBlW2tleV0uX3pvZDtcbiAgICAgICAgaWYgKGN0eC5pbyA9PT0gXCJpbnB1dFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdi5vcHRpbiA9PT0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHYub3B0b3V0ID09PSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KSk7XG4gICAgaWYgKHJlcXVpcmVkS2V5cy5zaXplID4gMCkge1xuICAgICAgICBqc29uLnJlcXVpcmVkID0gQXJyYXkuZnJvbShyZXF1aXJlZEtleXMpO1xuICAgIH1cbiAgICAvLyBjYXRjaGFsbFxuICAgIGlmIChkZWYuY2F0Y2hhbGw/Ll96b2QuZGVmLnR5cGUgPT09IFwibmV2ZXJcIikge1xuICAgICAgICAvLyBzdHJpY3RcbiAgICAgICAganNvbi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IGZhbHNlO1xuICAgIH1cbiAgICBlbHNlIGlmICghZGVmLmNhdGNoYWxsKSB7XG4gICAgICAgIC8vIHJlZ3VsYXJcbiAgICAgICAgaWYgKGN0eC5pbyA9PT0gXCJvdXRwdXRcIilcbiAgICAgICAgICAgIGpzb24uYWRkaXRpb25hbFByb3BlcnRpZXMgPSBmYWxzZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGVmLmNhdGNoYWxsKSB7XG4gICAgICAgIGpzb24uYWRkaXRpb25hbFByb3BlcnRpZXMgPSBwcm9jZXNzKGRlZi5jYXRjaGFsbCwgY3R4LCB7XG4gICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIl0sXG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgdW5pb25Qcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIGpzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICAvLyBFeGNsdXNpdmUgdW5pb25zIChpbmNsdXNpdmUgPT09IGZhbHNlKSB1c2Ugb25lT2YgKGV4YWN0bHkgb25lIG1hdGNoKSBpbnN0ZWFkIG9mIGFueU9mIChvbmUgb3IgbW9yZSBtYXRjaGVzKVxuICAgIC8vIFRoaXMgaW5jbHVkZXMgYm90aCB6LnhvcigpIGFuZCBkaXNjcmltaW5hdGVkIHVuaW9uc1xuICAgIGNvbnN0IGlzRXhjbHVzaXZlID0gZGVmLmluY2x1c2l2ZSA9PT0gZmFsc2U7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGRlZi5vcHRpb25zLm1hcCgoeCwgaSkgPT4gcHJvY2Vzcyh4LCBjdHgsIHtcbiAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIGlzRXhjbHVzaXZlID8gXCJvbmVPZlwiIDogXCJhbnlPZlwiLCBpXSxcbiAgICB9KSk7XG4gICAgaWYgKGlzRXhjbHVzaXZlKSB7XG4gICAgICAgIGpzb24ub25lT2YgPSBvcHRpb25zO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAganNvbi5hbnlPZiA9IG9wdGlvbnM7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBpbnRlcnNlY3Rpb25Qcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIGpzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBjb25zdCBhID0gcHJvY2VzcyhkZWYubGVmdCwgY3R4LCB7XG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcImFsbE9mXCIsIDBdLFxuICAgIH0pO1xuICAgIGNvbnN0IGIgPSBwcm9jZXNzKGRlZi5yaWdodCwgY3R4LCB7XG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcImFsbE9mXCIsIDFdLFxuICAgIH0pO1xuICAgIGNvbnN0IGlzU2ltcGxlSW50ZXJzZWN0aW9uID0gKHZhbCkgPT4gXCJhbGxPZlwiIGluIHZhbCAmJiBPYmplY3Qua2V5cyh2YWwpLmxlbmd0aCA9PT0gMTtcbiAgICBjb25zdCBhbGxPZiA9IFtcbiAgICAgICAgLi4uKGlzU2ltcGxlSW50ZXJzZWN0aW9uKGEpID8gYS5hbGxPZiA6IFthXSksXG4gICAgICAgIC4uLihpc1NpbXBsZUludGVyc2VjdGlvbihiKSA/IGIuYWxsT2YgOiBbYl0pLFxuICAgIF07XG4gICAganNvbi5hbGxPZiA9IGFsbE9mO1xufTtcbmV4cG9ydCBjb25zdCB0dXBsZVByb2Nlc3NvciA9IChzY2hlbWEsIGN0eCwgX2pzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAganNvbi50eXBlID0gXCJhcnJheVwiO1xuICAgIGNvbnN0IHByZWZpeFBhdGggPSBjdHgudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIiA/IFwicHJlZml4SXRlbXNcIiA6IFwiaXRlbXNcIjtcbiAgICBjb25zdCByZXN0UGF0aCA9IGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiID8gXCJpdGVtc1wiIDogY3R4LnRhcmdldCA9PT0gXCJvcGVuYXBpLTMuMFwiID8gXCJpdGVtc1wiIDogXCJhZGRpdGlvbmFsSXRlbXNcIjtcbiAgICBjb25zdCBwcmVmaXhJdGVtcyA9IGRlZi5pdGVtcy5tYXAoKHgsIGkpID0+IHByb2Nlc3MoeCwgY3R4LCB7XG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBwcmVmaXhQYXRoLCBpXSxcbiAgICB9KSk7XG4gICAgY29uc3QgcmVzdCA9IGRlZi5yZXN0XG4gICAgICAgID8gcHJvY2VzcyhkZWYucmVzdCwgY3R4LCB7XG4gICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIHJlc3RQYXRoLCAuLi4oY3R4LnRhcmdldCA9PT0gXCJvcGVuYXBpLTMuMFwiID8gW2RlZi5pdGVtcy5sZW5ndGhdIDogW10pXSxcbiAgICAgICAgfSlcbiAgICAgICAgOiBudWxsO1xuICAgIGlmIChjdHgudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIikge1xuICAgICAgICBqc29uLnByZWZpeEl0ZW1zID0gcHJlZml4SXRlbXM7XG4gICAgICAgIGlmIChyZXN0KSB7XG4gICAgICAgICAgICBqc29uLml0ZW1zID0gcmVzdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChjdHgudGFyZ2V0ID09PSBcIm9wZW5hcGktMy4wXCIpIHtcbiAgICAgICAganNvbi5pdGVtcyA9IHtcbiAgICAgICAgICAgIGFueU9mOiBwcmVmaXhJdGVtcyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHJlc3QpIHtcbiAgICAgICAgICAgIGpzb24uaXRlbXMuYW55T2YucHVzaChyZXN0KTtcbiAgICAgICAgfVxuICAgICAgICBqc29uLm1pbkl0ZW1zID0gcHJlZml4SXRlbXMubGVuZ3RoO1xuICAgICAgICBpZiAoIXJlc3QpIHtcbiAgICAgICAgICAgIGpzb24ubWF4SXRlbXMgPSBwcmVmaXhJdGVtcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGpzb24uaXRlbXMgPSBwcmVmaXhJdGVtcztcbiAgICAgICAgaWYgKHJlc3QpIHtcbiAgICAgICAgICAgIGpzb24uYWRkaXRpb25hbEl0ZW1zID0gcmVzdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBsZW5ndGhcbiAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0gfSA9IHNjaGVtYS5fem9kLmJhZztcbiAgICBpZiAodHlwZW9mIG1pbmltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgIGpzb24ubWluSXRlbXMgPSBtaW5pbXVtO1xuICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAganNvbi5tYXhJdGVtcyA9IG1heGltdW07XG59O1xuZXhwb3J0IGNvbnN0IHJlY29yZFByb2Nlc3NvciA9IChzY2hlbWEsIGN0eCwgX2pzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAganNvbi50eXBlID0gXCJvYmplY3RcIjtcbiAgICAvLyBGb3IgbG9vc2VSZWNvcmQgd2l0aCByZWdleCBwYXR0ZXJucywgdXNlIHBhdHRlcm5Qcm9wZXJ0aWVzXG4gICAgLy8gVGhpcyBjb3JyZWN0bHkgcmVwcmVzZW50cyBcIm9ubHkgdmFsaWRhdGUga2V5cyBtYXRjaGluZyB0aGUgcGF0dGVyblwiIHNlbWFudGljc1xuICAgIC8vIGFuZCBjb21wb3NlcyB3ZWxsIHdpdGggYWxsT2YgKGludGVyc2VjdGlvbnMpXG4gICAgY29uc3Qga2V5VHlwZSA9IGRlZi5rZXlUeXBlO1xuICAgIGNvbnN0IGtleUJhZyA9IGtleVR5cGUuX3pvZC5iYWc7XG4gICAgY29uc3QgcGF0dGVybnMgPSBrZXlCYWc/LnBhdHRlcm5zO1xuICAgIGlmIChkZWYubW9kZSA9PT0gXCJsb29zZVwiICYmIHBhdHRlcm5zICYmIHBhdHRlcm5zLnNpemUgPiAwKSB7XG4gICAgICAgIC8vIFVzZSBwYXR0ZXJuUHJvcGVydGllcyBmb3IgbG9vc2VSZWNvcmQgd2l0aCByZWdleCBwYXR0ZXJuc1xuICAgICAgICBjb25zdCB2YWx1ZVNjaGVtYSA9IHByb2Nlc3MoZGVmLnZhbHVlVHlwZSwgY3R4LCB7XG4gICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwicGF0dGVyblByb3BlcnRpZXNcIiwgXCIqXCJdLFxuICAgICAgICB9KTtcbiAgICAgICAganNvbi5wYXR0ZXJuUHJvcGVydGllcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMpIHtcbiAgICAgICAgICAgIGpzb24ucGF0dGVyblByb3BlcnRpZXNbcGF0dGVybi5zb3VyY2VdID0gdmFsdWVTY2hlbWE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIERlZmF1bHQgYmVoYXZpb3I6IHVzZSBwcm9wZXJ0eU5hbWVzICsgYWRkaXRpb25hbFByb3BlcnRpZXNcbiAgICAgICAgaWYgKGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMDdcIiB8fCBjdHgudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIikge1xuICAgICAgICAgICAganNvbi5wcm9wZXJ0eU5hbWVzID0gcHJvY2VzcyhkZWYua2V5VHlwZSwgY3R4LCB7XG4gICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJwcm9wZXJ0eU5hbWVzXCJdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAganNvbi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IHByb2Nlc3MoZGVmLnZhbHVlVHlwZSwgY3R4LCB7XG4gICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIl0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBBZGQgcmVxdWlyZWQgZm9yIGtleXMgd2l0aCBkaXNjcmV0ZSB2YWx1ZXMgKGVudW0sIGxpdGVyYWwsIGV0Yy4pXG4gICAgY29uc3Qga2V5VmFsdWVzID0ga2V5VHlwZS5fem9kLnZhbHVlcztcbiAgICBpZiAoa2V5VmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkS2V5VmFsdWVzID0gWy4uLmtleVZhbHVlc10uZmlsdGVyKCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIik7XG4gICAgICAgIGlmICh2YWxpZEtleVZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBqc29uLnJlcXVpcmVkID0gdmFsaWRLZXlWYWx1ZXM7XG4gICAgICAgIH1cbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IG51bGxhYmxlUHJvY2Vzc29yID0gKHNjaGVtYSwgY3R4LCBqc29uLCBwYXJhbXMpID0+IHtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgY29uc3QgaW5uZXIgPSBwcm9jZXNzKGRlZi5pbm5lclR5cGUsIGN0eCwgcGFyYW1zKTtcbiAgICBjb25zdCBzZWVuID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgaWYgKGN0eC50YXJnZXQgPT09IFwib3BlbmFwaS0zLjBcIikge1xuICAgICAgICBzZWVuLnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgICAgIGpzb24ubnVsbGFibGUgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAganNvbi5hbnlPZiA9IFtpbm5lciwgeyB0eXBlOiBcIm51bGxcIiB9XTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IG5vbm9wdGlvbmFsUHJvY2Vzc29yID0gKHNjaGVtYSwgY3R4LCBfanNvbiwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIHByb2Nlc3MoZGVmLmlubmVyVHlwZSwgY3R4LCBwYXJhbXMpO1xuICAgIGNvbnN0IHNlZW4gPSBjdHguc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICBzZWVuLnJlZiA9IGRlZi5pbm5lclR5cGU7XG59O1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRQcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIGpzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBwcm9jZXNzKGRlZi5pbm5lclR5cGUsIGN0eCwgcGFyYW1zKTtcbiAgICBjb25zdCBzZWVuID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgc2Vlbi5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgIGpzb24uZGVmYXVsdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGVmLmRlZmF1bHRWYWx1ZSkpO1xufTtcbmV4cG9ydCBjb25zdCBwcmVmYXVsdFByb2Nlc3NvciA9IChzY2hlbWEsIGN0eCwganNvbiwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIHByb2Nlc3MoZGVmLmlubmVyVHlwZSwgY3R4LCBwYXJhbXMpO1xuICAgIGNvbnN0IHNlZW4gPSBjdHguc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICBzZWVuLnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgaWYgKGN0eC5pbyA9PT0gXCJpbnB1dFwiKVxuICAgICAgICBqc29uLl9wcmVmYXVsdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGVmLmRlZmF1bHRWYWx1ZSkpO1xufTtcbmV4cG9ydCBjb25zdCBjYXRjaFByb2Nlc3NvciA9IChzY2hlbWEsIGN0eCwganNvbiwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIHByb2Nlc3MoZGVmLmlubmVyVHlwZSwgY3R4LCBwYXJhbXMpO1xuICAgIGNvbnN0IHNlZW4gPSBjdHguc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICBzZWVuLnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgbGV0IGNhdGNoVmFsdWU7XG4gICAgdHJ5IHtcbiAgICAgICAgY2F0Y2hWYWx1ZSA9IGRlZi5jYXRjaFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRHluYW1pYyBjYXRjaCB2YWx1ZXMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxuICAgIGpzb24uZGVmYXVsdCA9IGNhdGNoVmFsdWU7XG59O1xuZXhwb3J0IGNvbnN0IHBpcGVQcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIF9qc29uLCBwYXJhbXMpID0+IHtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgY29uc3QgaW5uZXJUeXBlID0gY3R4LmlvID09PSBcImlucHV0XCIgPyAoZGVmLmluLl96b2QuZGVmLnR5cGUgPT09IFwidHJhbnNmb3JtXCIgPyBkZWYub3V0IDogZGVmLmluKSA6IGRlZi5vdXQ7XG4gICAgcHJvY2Vzcyhpbm5lclR5cGUsIGN0eCwgcGFyYW1zKTtcbiAgICBjb25zdCBzZWVuID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgc2Vlbi5yZWYgPSBpbm5lclR5cGU7XG59O1xuZXhwb3J0IGNvbnN0IHJlYWRvbmx5UHJvY2Vzc29yID0gKHNjaGVtYSwgY3R4LCBqc29uLCBwYXJhbXMpID0+IHtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgcHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBjdHgsIHBhcmFtcyk7XG4gICAgY29uc3Qgc2VlbiA9IGN0eC5zZWVuLmdldChzY2hlbWEpO1xuICAgIHNlZW4ucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICBqc29uLnJlYWRPbmx5ID0gdHJ1ZTtcbn07XG5leHBvcnQgY29uc3QgcHJvbWlzZVByb2Nlc3NvciA9IChzY2hlbWEsIGN0eCwgX2pzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBwcm9jZXNzKGRlZi5pbm5lclR5cGUsIGN0eCwgcGFyYW1zKTtcbiAgICBjb25zdCBzZWVuID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgc2Vlbi5yZWYgPSBkZWYuaW5uZXJUeXBlO1xufTtcbmV4cG9ydCBjb25zdCBvcHRpb25hbFByb2Nlc3NvciA9IChzY2hlbWEsIGN0eCwgX2pzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBwcm9jZXNzKGRlZi5pbm5lclR5cGUsIGN0eCwgcGFyYW1zKTtcbiAgICBjb25zdCBzZWVuID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgc2Vlbi5yZWYgPSBkZWYuaW5uZXJUeXBlO1xufTtcbmV4cG9ydCBjb25zdCBsYXp5UHJvY2Vzc29yID0gKHNjaGVtYSwgY3R4LCBfanNvbiwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3QgaW5uZXJUeXBlID0gc2NoZW1hLl96b2QuaW5uZXJUeXBlO1xuICAgIHByb2Nlc3MoaW5uZXJUeXBlLCBjdHgsIHBhcmFtcyk7XG4gICAgY29uc3Qgc2VlbiA9IGN0eC5zZWVuLmdldChzY2hlbWEpO1xuICAgIHNlZW4ucmVmID0gaW5uZXJUeXBlO1xufTtcbi8vID09PT09PT09PT09PT09PT09PT09IEFMTCBQUk9DRVNTT1JTID09PT09PT09PT09PT09PT09PT09XG5leHBvcnQgY29uc3QgYWxsUHJvY2Vzc29ycyA9IHtcbiAgICBzdHJpbmc6IHN0cmluZ1Byb2Nlc3NvcixcbiAgICBudW1iZXI6IG51bWJlclByb2Nlc3NvcixcbiAgICBib29sZWFuOiBib29sZWFuUHJvY2Vzc29yLFxuICAgIGJpZ2ludDogYmlnaW50UHJvY2Vzc29yLFxuICAgIHN5bWJvbDogc3ltYm9sUHJvY2Vzc29yLFxuICAgIG51bGw6IG51bGxQcm9jZXNzb3IsXG4gICAgdW5kZWZpbmVkOiB1bmRlZmluZWRQcm9jZXNzb3IsXG4gICAgdm9pZDogdm9pZFByb2Nlc3NvcixcbiAgICBuZXZlcjogbmV2ZXJQcm9jZXNzb3IsXG4gICAgYW55OiBhbnlQcm9jZXNzb3IsXG4gICAgdW5rbm93bjogdW5rbm93blByb2Nlc3NvcixcbiAgICBkYXRlOiBkYXRlUHJvY2Vzc29yLFxuICAgIGVudW06IGVudW1Qcm9jZXNzb3IsXG4gICAgbGl0ZXJhbDogbGl0ZXJhbFByb2Nlc3NvcixcbiAgICBuYW46IG5hblByb2Nlc3NvcixcbiAgICB0ZW1wbGF0ZV9saXRlcmFsOiB0ZW1wbGF0ZUxpdGVyYWxQcm9jZXNzb3IsXG4gICAgZmlsZTogZmlsZVByb2Nlc3NvcixcbiAgICBzdWNjZXNzOiBzdWNjZXNzUHJvY2Vzc29yLFxuICAgIGN1c3RvbTogY3VzdG9tUHJvY2Vzc29yLFxuICAgIGZ1bmN0aW9uOiBmdW5jdGlvblByb2Nlc3NvcixcbiAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybVByb2Nlc3NvcixcbiAgICBtYXA6IG1hcFByb2Nlc3NvcixcbiAgICBzZXQ6IHNldFByb2Nlc3NvcixcbiAgICBhcnJheTogYXJyYXlQcm9jZXNzb3IsXG4gICAgb2JqZWN0OiBvYmplY3RQcm9jZXNzb3IsXG4gICAgdW5pb246IHVuaW9uUHJvY2Vzc29yLFxuICAgIGludGVyc2VjdGlvbjogaW50ZXJzZWN0aW9uUHJvY2Vzc29yLFxuICAgIHR1cGxlOiB0dXBsZVByb2Nlc3NvcixcbiAgICByZWNvcmQ6IHJlY29yZFByb2Nlc3NvcixcbiAgICBudWxsYWJsZTogbnVsbGFibGVQcm9jZXNzb3IsXG4gICAgbm9ub3B0aW9uYWw6IG5vbm9wdGlvbmFsUHJvY2Vzc29yLFxuICAgIGRlZmF1bHQ6IGRlZmF1bHRQcm9jZXNzb3IsXG4gICAgcHJlZmF1bHQ6IHByZWZhdWx0UHJvY2Vzc29yLFxuICAgIGNhdGNoOiBjYXRjaFByb2Nlc3NvcixcbiAgICBwaXBlOiBwaXBlUHJvY2Vzc29yLFxuICAgIHJlYWRvbmx5OiByZWFkb25seVByb2Nlc3NvcixcbiAgICBwcm9taXNlOiBwcm9taXNlUHJvY2Vzc29yLFxuICAgIG9wdGlvbmFsOiBvcHRpb25hbFByb2Nlc3NvcixcbiAgICBsYXp5OiBsYXp5UHJvY2Vzc29yLFxufTtcbmV4cG9ydCBmdW5jdGlvbiB0b0pTT05TY2hlbWEoaW5wdXQsIHBhcmFtcykge1xuICAgIGlmIChcIl9pZG1hcFwiIGluIGlucHV0KSB7XG4gICAgICAgIC8vIFJlZ2lzdHJ5IGNhc2VcbiAgICAgICAgY29uc3QgcmVnaXN0cnkgPSBpbnB1dDtcbiAgICAgICAgY29uc3QgY3R4ID0gaW5pdGlhbGl6ZUNvbnRleHQoeyAuLi5wYXJhbXMsIHByb2Nlc3NvcnM6IGFsbFByb2Nlc3NvcnMgfSk7XG4gICAgICAgIGNvbnN0IGRlZnMgPSB7fTtcbiAgICAgICAgLy8gRmlyc3QgcGFzczogcHJvY2VzcyBhbGwgc2NoZW1hcyB0byBidWlsZCB0aGUgc2VlbiBtYXBcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiByZWdpc3RyeS5faWRtYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBbXywgc2NoZW1hXSA9IGVudHJ5O1xuICAgICAgICAgICAgcHJvY2VzcyhzY2hlbWEsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2NoZW1hcyA9IHt9O1xuICAgICAgICBjb25zdCBleHRlcm5hbCA9IHtcbiAgICAgICAgICAgIHJlZ2lzdHJ5LFxuICAgICAgICAgICAgdXJpOiBwYXJhbXM/LnVyaSxcbiAgICAgICAgICAgIGRlZnMsXG4gICAgICAgIH07XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgY29udGV4dCB3aXRoIGV4dGVybmFsIGNvbmZpZ3VyYXRpb25cbiAgICAgICAgY3R4LmV4dGVybmFsID0gZXh0ZXJuYWw7XG4gICAgICAgIC8vIFNlY29uZCBwYXNzOiBlbWl0IGVhY2ggc2NoZW1hXG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgcmVnaXN0cnkuX2lkbWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgW2tleSwgc2NoZW1hXSA9IGVudHJ5O1xuICAgICAgICAgICAgZXh0cmFjdERlZnMoY3R4LCBzY2hlbWEpO1xuICAgICAgICAgICAgc2NoZW1hc1trZXldID0gZmluYWxpemUoY3R4LCBzY2hlbWEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhkZWZzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZzU2VnbWVudCA9IGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiID8gXCIkZGVmc1wiIDogXCJkZWZpbml0aW9uc1wiO1xuICAgICAgICAgICAgc2NoZW1hcy5fX3NoYXJlZCA9IHtcbiAgICAgICAgICAgICAgICBbZGVmc1NlZ21lbnRdOiBkZWZzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzY2hlbWFzIH07XG4gICAgfVxuICAgIC8vIFNpbmdsZSBzY2hlbWEgY2FzZVxuICAgIGNvbnN0IGN0eCA9IGluaXRpYWxpemVDb250ZXh0KHsgLi4ucGFyYW1zLCBwcm9jZXNzb3JzOiBhbGxQcm9jZXNzb3JzIH0pO1xuICAgIHByb2Nlc3MoaW5wdXQsIGN0eCk7XG4gICAgZXh0cmFjdERlZnMoY3R4LCBpbnB1dCk7XG4gICAgcmV0dXJuIGZpbmFsaXplKGN0eCwgaW5wdXQpO1xufVxuIiwiaW1wb3J0ICogYXMgY29yZSBmcm9tIFwiLi4vY29yZS9pbmRleC5qc1wiO1xuaW1wb3J0ICogYXMgc2NoZW1hcyBmcm9tIFwiLi9zY2hlbWFzLmpzXCI7XG5leHBvcnQgY29uc3QgWm9kSVNPRGF0ZVRpbWUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kSVNPRGF0ZVRpbWVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZElTT0RhdGVUaW1lLmluaXQoaW5zdCwgZGVmKTtcbiAgICBzY2hlbWFzLlpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBkYXRldGltZShwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5faXNvRGF0ZVRpbWUoWm9kSVNPRGF0ZVRpbWUsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kSVNPRGF0ZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RJU09EYXRlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RJU09EYXRlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBzY2hlbWFzLlpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBkYXRlKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9pc29EYXRlKFpvZElTT0RhdGUsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kSVNPVGltZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RJU09UaW1lXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RJU09UaW1lLmluaXQoaW5zdCwgZGVmKTtcbiAgICBzY2hlbWFzLlpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiB0aW1lKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9pc29UaW1lKFpvZElTT1RpbWUsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kSVNPRHVyYXRpb24gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kSVNPRHVyYXRpb25cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZElTT0R1cmF0aW9uLmluaXQoaW5zdCwgZGVmKTtcbiAgICBzY2hlbWFzLlpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBkdXJhdGlvbihwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5faXNvRHVyYXRpb24oWm9kSVNPRHVyYXRpb24sIHBhcmFtcyk7XG59XG4iLCJpbXBvcnQgKiBhcyBjb3JlIGZyb20gXCIuLi9jb3JlL2luZGV4LmpzXCI7XG5pbXBvcnQgeyAkWm9kRXJyb3IgfSBmcm9tIFwiLi4vY29yZS9pbmRleC5qc1wiO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tIFwiLi4vY29yZS91dGlsLmpzXCI7XG5jb25zdCBpbml0aWFsaXplciA9IChpbnN0LCBpc3N1ZXMpID0+IHtcbiAgICAkWm9kRXJyb3IuaW5pdChpbnN0LCBpc3N1ZXMpO1xuICAgIGluc3QubmFtZSA9IFwiWm9kRXJyb3JcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhpbnN0LCB7XG4gICAgICAgIGZvcm1hdDoge1xuICAgICAgICAgICAgdmFsdWU6IChtYXBwZXIpID0+IGNvcmUuZm9ybWF0RXJyb3IoaW5zdCwgbWFwcGVyKSxcbiAgICAgICAgICAgIC8vIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICBmbGF0dGVuOiB7XG4gICAgICAgICAgICB2YWx1ZTogKG1hcHBlcikgPT4gY29yZS5mbGF0dGVuRXJyb3IoaW5zdCwgbWFwcGVyKSxcbiAgICAgICAgICAgIC8vIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICBhZGRJc3N1ZToge1xuICAgICAgICAgICAgdmFsdWU6IChpc3N1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGluc3QuaXNzdWVzLnB1c2goaXNzdWUpO1xuICAgICAgICAgICAgICAgIGluc3QubWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KGluc3QuaXNzdWVzLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciwgMik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgIGFkZElzc3Vlczoge1xuICAgICAgICAgICAgdmFsdWU6IChpc3N1ZXMpID0+IHtcbiAgICAgICAgICAgICAgICBpbnN0Lmlzc3Vlcy5wdXNoKC4uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgaW5zdC5tZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkoaW5zdC5pc3N1ZXMsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgaXNFbXB0eToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0Lmlzc3Vlcy5sZW5ndGggPT09IDA7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgLy8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGluc3QsIFwiaXNFbXB0eVwiLCB7XG4gICAgLy8gICBnZXQoKSB7XG4gICAgLy8gICAgIHJldHVybiBpbnN0Lmlzc3Vlcy5sZW5ndGggPT09IDA7XG4gICAgLy8gICB9LFxuICAgIC8vIH0pO1xufTtcbmV4cG9ydCBjb25zdCBab2RFcnJvciA9IGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kRXJyb3JcIiwgaW5pdGlhbGl6ZXIpO1xuZXhwb3J0IGNvbnN0IFpvZFJlYWxFcnJvciA9IGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kRXJyb3JcIiwgaW5pdGlhbGl6ZXIsIHtcbiAgICBQYXJlbnQ6IEVycm9yLFxufSk7XG4vLyAvKiogQGRlcHJlY2F0ZWQgVXNlIGB6LmNvcmUuJFpvZEVycm9yTWFwQ3R4YCBpbnN0ZWFkLiAqL1xuLy8gZXhwb3J0IHR5cGUgRXJyb3JNYXBDdHggPSBjb3JlLiRab2RFcnJvck1hcEN0eDtcbiIsImltcG9ydCAqIGFzIGNvcmUgZnJvbSBcIi4uL2NvcmUvaW5kZXguanNcIjtcbmltcG9ydCB7IFpvZFJlYWxFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlID0gLyogQF9fUFVSRV9fICovIGNvcmUuX3BhcnNlKFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgcGFyc2VBc3luYyA9IC8qIEBfX1BVUkVfXyAqLyBjb3JlLl9wYXJzZUFzeW5jKFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3Qgc2FmZVBhcnNlID0gLyogQF9fUFVSRV9fICovIGNvcmUuX3NhZmVQYXJzZShab2RSZWFsRXJyb3IpO1xuZXhwb3J0IGNvbnN0IHNhZmVQYXJzZUFzeW5jID0gLyogQF9fUFVSRV9fICovIGNvcmUuX3NhZmVQYXJzZUFzeW5jKFpvZFJlYWxFcnJvcik7XG4vLyBDb2RlYyBmdW5jdGlvbnNcbmV4cG9ydCBjb25zdCBlbmNvZGUgPSAvKiBAX19QVVJFX18gKi8gY29yZS5fZW5jb2RlKFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgZGVjb2RlID0gLyogQF9fUFVSRV9fICovIGNvcmUuX2RlY29kZShab2RSZWFsRXJyb3IpO1xuZXhwb3J0IGNvbnN0IGVuY29kZUFzeW5jID0gLyogQF9fUFVSRV9fICovIGNvcmUuX2VuY29kZUFzeW5jKFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgZGVjb2RlQXN5bmMgPSAvKiBAX19QVVJFX18gKi8gY29yZS5fZGVjb2RlQXN5bmMoWm9kUmVhbEVycm9yKTtcbmV4cG9ydCBjb25zdCBzYWZlRW5jb2RlID0gLyogQF9fUFVSRV9fICovIGNvcmUuX3NhZmVFbmNvZGUoWm9kUmVhbEVycm9yKTtcbmV4cG9ydCBjb25zdCBzYWZlRGVjb2RlID0gLyogQF9fUFVSRV9fICovIGNvcmUuX3NhZmVEZWNvZGUoWm9kUmVhbEVycm9yKTtcbmV4cG9ydCBjb25zdCBzYWZlRW5jb2RlQXN5bmMgPSAvKiBAX19QVVJFX18gKi8gY29yZS5fc2FmZUVuY29kZUFzeW5jKFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3Qgc2FmZURlY29kZUFzeW5jID0gLyogQF9fUFVSRV9fICovIGNvcmUuX3NhZmVEZWNvZGVBc3luYyhab2RSZWFsRXJyb3IpO1xuIiwiaW1wb3J0ICogYXMgY29yZSBmcm9tIFwiLi4vY29yZS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgdXRpbCB9IGZyb20gXCIuLi9jb3JlL2luZGV4LmpzXCI7XG5pbXBvcnQgKiBhcyBwcm9jZXNzb3JzIGZyb20gXCIuLi9jb3JlL2pzb24tc2NoZW1hLXByb2Nlc3NvcnMuanNcIjtcbmltcG9ydCB7IGNyZWF0ZVN0YW5kYXJkSlNPTlNjaGVtYU1ldGhvZCwgY3JlYXRlVG9KU09OU2NoZW1hTWV0aG9kIH0gZnJvbSBcIi4uL2NvcmUvdG8tanNvbi1zY2hlbWEuanNcIjtcbmltcG9ydCAqIGFzIGNoZWNrcyBmcm9tIFwiLi9jaGVja3MuanNcIjtcbmltcG9ydCAqIGFzIGlzbyBmcm9tIFwiLi9pc28uanNcIjtcbmltcG9ydCAqIGFzIHBhcnNlIGZyb20gXCIuL3BhcnNlLmpzXCI7XG5leHBvcnQgY29uc3QgWm9kVHlwZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RUeXBlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBPYmplY3QuYXNzaWduKGluc3RbXCJ+c3RhbmRhcmRcIl0sIHtcbiAgICAgICAganNvblNjaGVtYToge1xuICAgICAgICAgICAgaW5wdXQ6IGNyZWF0ZVN0YW5kYXJkSlNPTlNjaGVtYU1ldGhvZChpbnN0LCBcImlucHV0XCIpLFxuICAgICAgICAgICAgb3V0cHV0OiBjcmVhdGVTdGFuZGFyZEpTT05TY2hlbWFNZXRob2QoaW5zdCwgXCJvdXRwdXRcIiksXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgaW5zdC50b0pTT05TY2hlbWEgPSBjcmVhdGVUb0pTT05TY2hlbWFNZXRob2QoaW5zdCwge30pO1xuICAgIGluc3QuZGVmID0gZGVmO1xuICAgIGluc3QudHlwZSA9IGRlZi50eXBlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnN0LCBcIl9kZWZcIiwgeyB2YWx1ZTogZGVmIH0pO1xuICAgIC8vIGJhc2UgbWV0aG9kc1xuICAgIGluc3QuY2hlY2sgPSAoLi4uY2hlY2tzKSA9PiB7XG4gICAgICAgIHJldHVybiBpbnN0LmNsb25lKHV0aWwubWVyZ2VEZWZzKGRlZiwge1xuICAgICAgICAgICAgY2hlY2tzOiBbXG4gICAgICAgICAgICAgICAgLi4uKGRlZi5jaGVja3MgPz8gW10pLFxuICAgICAgICAgICAgICAgIC4uLmNoZWNrcy5tYXAoKGNoKSA9PiB0eXBlb2YgY2ggPT09IFwiZnVuY3Rpb25cIiA/IHsgX3pvZDogeyBjaGVjazogY2gsIGRlZjogeyBjaGVjazogXCJjdXN0b21cIiB9LCBvbmF0dGFjaDogW10gfSB9IDogY2gpLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSksIHtcbiAgICAgICAgICAgIHBhcmVudDogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBpbnN0LndpdGggPSBpbnN0LmNoZWNrO1xuICAgIGluc3QuY2xvbmUgPSAoZGVmLCBwYXJhbXMpID0+IGNvcmUuY2xvbmUoaW5zdCwgZGVmLCBwYXJhbXMpO1xuICAgIGluc3QuYnJhbmQgPSAoKSA9PiBpbnN0O1xuICAgIGluc3QucmVnaXN0ZXIgPSAoKHJlZywgbWV0YSkgPT4ge1xuICAgICAgICByZWcuYWRkKGluc3QsIG1ldGEpO1xuICAgICAgICByZXR1cm4gaW5zdDtcbiAgICB9KTtcbiAgICAvLyBwYXJzaW5nXG4gICAgaW5zdC5wYXJzZSA9IChkYXRhLCBwYXJhbXMpID0+IHBhcnNlLnBhcnNlKGluc3QsIGRhdGEsIHBhcmFtcywgeyBjYWxsZWU6IGluc3QucGFyc2UgfSk7XG4gICAgaW5zdC5zYWZlUGFyc2UgPSAoZGF0YSwgcGFyYW1zKSA9PiBwYXJzZS5zYWZlUGFyc2UoaW5zdCwgZGF0YSwgcGFyYW1zKTtcbiAgICBpbnN0LnBhcnNlQXN5bmMgPSBhc3luYyAoZGF0YSwgcGFyYW1zKSA9PiBwYXJzZS5wYXJzZUFzeW5jKGluc3QsIGRhdGEsIHBhcmFtcywgeyBjYWxsZWU6IGluc3QucGFyc2VBc3luYyB9KTtcbiAgICBpbnN0LnNhZmVQYXJzZUFzeW5jID0gYXN5bmMgKGRhdGEsIHBhcmFtcykgPT4gcGFyc2Uuc2FmZVBhcnNlQXN5bmMoaW5zdCwgZGF0YSwgcGFyYW1zKTtcbiAgICBpbnN0LnNwYSA9IGluc3Quc2FmZVBhcnNlQXN5bmM7XG4gICAgLy8gZW5jb2RpbmcvZGVjb2RpbmdcbiAgICBpbnN0LmVuY29kZSA9IChkYXRhLCBwYXJhbXMpID0+IHBhcnNlLmVuY29kZShpbnN0LCBkYXRhLCBwYXJhbXMpO1xuICAgIGluc3QuZGVjb2RlID0gKGRhdGEsIHBhcmFtcykgPT4gcGFyc2UuZGVjb2RlKGluc3QsIGRhdGEsIHBhcmFtcyk7XG4gICAgaW5zdC5lbmNvZGVBc3luYyA9IGFzeW5jIChkYXRhLCBwYXJhbXMpID0+IHBhcnNlLmVuY29kZUFzeW5jKGluc3QsIGRhdGEsIHBhcmFtcyk7XG4gICAgaW5zdC5kZWNvZGVBc3luYyA9IGFzeW5jIChkYXRhLCBwYXJhbXMpID0+IHBhcnNlLmRlY29kZUFzeW5jKGluc3QsIGRhdGEsIHBhcmFtcyk7XG4gICAgaW5zdC5zYWZlRW5jb2RlID0gKGRhdGEsIHBhcmFtcykgPT4gcGFyc2Uuc2FmZUVuY29kZShpbnN0LCBkYXRhLCBwYXJhbXMpO1xuICAgIGluc3Quc2FmZURlY29kZSA9IChkYXRhLCBwYXJhbXMpID0+IHBhcnNlLnNhZmVEZWNvZGUoaW5zdCwgZGF0YSwgcGFyYW1zKTtcbiAgICBpbnN0LnNhZmVFbmNvZGVBc3luYyA9IGFzeW5jIChkYXRhLCBwYXJhbXMpID0+IHBhcnNlLnNhZmVFbmNvZGVBc3luYyhpbnN0LCBkYXRhLCBwYXJhbXMpO1xuICAgIGluc3Quc2FmZURlY29kZUFzeW5jID0gYXN5bmMgKGRhdGEsIHBhcmFtcykgPT4gcGFyc2Uuc2FmZURlY29kZUFzeW5jKGluc3QsIGRhdGEsIHBhcmFtcyk7XG4gICAgLy8gcmVmaW5lbWVudHNcbiAgICBpbnN0LnJlZmluZSA9IChjaGVjaywgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKHJlZmluZShjaGVjaywgcGFyYW1zKSk7XG4gICAgaW5zdC5zdXBlclJlZmluZSA9IChyZWZpbmVtZW50KSA9PiBpbnN0LmNoZWNrKHN1cGVyUmVmaW5lKHJlZmluZW1lbnQpKTtcbiAgICBpbnN0Lm92ZXJ3cml0ZSA9IChmbikgPT4gaW5zdC5jaGVjayhjaGVja3Mub3ZlcndyaXRlKGZuKSk7XG4gICAgLy8gd3JhcHBlcnNcbiAgICBpbnN0Lm9wdGlvbmFsID0gKCkgPT4gb3B0aW9uYWwoaW5zdCk7XG4gICAgaW5zdC5leGFjdE9wdGlvbmFsID0gKCkgPT4gZXhhY3RPcHRpb25hbChpbnN0KTtcbiAgICBpbnN0Lm51bGxhYmxlID0gKCkgPT4gbnVsbGFibGUoaW5zdCk7XG4gICAgaW5zdC5udWxsaXNoID0gKCkgPT4gb3B0aW9uYWwobnVsbGFibGUoaW5zdCkpO1xuICAgIGluc3Qubm9ub3B0aW9uYWwgPSAocGFyYW1zKSA9PiBub25vcHRpb25hbChpbnN0LCBwYXJhbXMpO1xuICAgIGluc3QuYXJyYXkgPSAoKSA9PiBhcnJheShpbnN0KTtcbiAgICBpbnN0Lm9yID0gKGFyZykgPT4gdW5pb24oW2luc3QsIGFyZ10pO1xuICAgIGluc3QuYW5kID0gKGFyZykgPT4gaW50ZXJzZWN0aW9uKGluc3QsIGFyZyk7XG4gICAgaW5zdC50cmFuc2Zvcm0gPSAodHgpID0+IHBpcGUoaW5zdCwgdHJhbnNmb3JtKHR4KSk7XG4gICAgaW5zdC5kZWZhdWx0ID0gKGRlZikgPT4gX2RlZmF1bHQoaW5zdCwgZGVmKTtcbiAgICBpbnN0LnByZWZhdWx0ID0gKGRlZikgPT4gcHJlZmF1bHQoaW5zdCwgZGVmKTtcbiAgICAvLyBpbnN0LmNvYWxlc2NlID0gKGRlZiwgcGFyYW1zKSA9PiBjb2FsZXNjZShpbnN0LCBkZWYsIHBhcmFtcyk7XG4gICAgaW5zdC5jYXRjaCA9IChwYXJhbXMpID0+IF9jYXRjaChpbnN0LCBwYXJhbXMpO1xuICAgIGluc3QucGlwZSA9ICh0YXJnZXQpID0+IHBpcGUoaW5zdCwgdGFyZ2V0KTtcbiAgICBpbnN0LnJlYWRvbmx5ID0gKCkgPT4gcmVhZG9ubHkoaW5zdCk7XG4gICAgLy8gbWV0YVxuICAgIGluc3QuZGVzY3JpYmUgPSAoZGVzY3JpcHRpb24pID0+IHtcbiAgICAgICAgY29uc3QgY2wgPSBpbnN0LmNsb25lKCk7XG4gICAgICAgIGNvcmUuZ2xvYmFsUmVnaXN0cnkuYWRkKGNsLCB7IGRlc2NyaXB0aW9uIH0pO1xuICAgICAgICByZXR1cm4gY2w7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zdCwgXCJkZXNjcmlwdGlvblwiLCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBjb3JlLmdsb2JhbFJlZ2lzdHJ5LmdldChpbnN0KT8uZGVzY3JpcHRpb247XG4gICAgICAgIH0sXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICB9KTtcbiAgICBpbnN0Lm1ldGEgPSAoLi4uYXJncykgPT4ge1xuICAgICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBjb3JlLmdsb2JhbFJlZ2lzdHJ5LmdldChpbnN0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbCA9IGluc3QuY2xvbmUoKTtcbiAgICAgICAgY29yZS5nbG9iYWxSZWdpc3RyeS5hZGQoY2wsIGFyZ3NbMF0pO1xuICAgICAgICByZXR1cm4gY2w7XG4gICAgfTtcbiAgICAvLyBoZWxwZXJzXG4gICAgaW5zdC5pc09wdGlvbmFsID0gKCkgPT4gaW5zdC5zYWZlUGFyc2UodW5kZWZpbmVkKS5zdWNjZXNzO1xuICAgIGluc3QuaXNOdWxsYWJsZSA9ICgpID0+IGluc3Quc2FmZVBhcnNlKG51bGwpLnN1Y2Nlc3M7XG4gICAgaW5zdC5hcHBseSA9IChmbikgPT4gZm4oaW5zdCk7XG4gICAgcmV0dXJuIGluc3Q7XG59KTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjb25zdCBfWm9kU3RyaW5nID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIl9ab2RTdHJpbmdcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZFN0cmluZy5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLnN0cmluZ1Byb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG4gICAgY29uc3QgYmFnID0gaW5zdC5fem9kLmJhZztcbiAgICBpbnN0LmZvcm1hdCA9IGJhZy5mb3JtYXQgPz8gbnVsbDtcbiAgICBpbnN0Lm1pbkxlbmd0aCA9IGJhZy5taW5pbXVtID8/IG51bGw7XG4gICAgaW5zdC5tYXhMZW5ndGggPSBiYWcubWF4aW11bSA/PyBudWxsO1xuICAgIC8vIHZhbGlkYXRpb25zXG4gICAgaW5zdC5yZWdleCA9ICguLi5hcmdzKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5yZWdleCguLi5hcmdzKSk7XG4gICAgaW5zdC5pbmNsdWRlcyA9ICguLi5hcmdzKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5pbmNsdWRlcyguLi5hcmdzKSk7XG4gICAgaW5zdC5zdGFydHNXaXRoID0gKC4uLmFyZ3MpID0+IGluc3QuY2hlY2soY2hlY2tzLnN0YXJ0c1dpdGgoLi4uYXJncykpO1xuICAgIGluc3QuZW5kc1dpdGggPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhjaGVja3MuZW5kc1dpdGgoLi4uYXJncykpO1xuICAgIGluc3QubWluID0gKC4uLmFyZ3MpID0+IGluc3QuY2hlY2soY2hlY2tzLm1pbkxlbmd0aCguLi5hcmdzKSk7XG4gICAgaW5zdC5tYXggPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhjaGVja3MubWF4TGVuZ3RoKC4uLmFyZ3MpKTtcbiAgICBpbnN0Lmxlbmd0aCA9ICguLi5hcmdzKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5sZW5ndGgoLi4uYXJncykpO1xuICAgIGluc3Qubm9uZW1wdHkgPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhjaGVja3MubWluTGVuZ3RoKDEsIC4uLmFyZ3MpKTtcbiAgICBpbnN0Lmxvd2VyY2FzZSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmxvd2VyY2FzZShwYXJhbXMpKTtcbiAgICBpbnN0LnVwcGVyY2FzZSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLnVwcGVyY2FzZShwYXJhbXMpKTtcbiAgICAvLyB0cmFuc2Zvcm1zXG4gICAgaW5zdC50cmltID0gKCkgPT4gaW5zdC5jaGVjayhjaGVja3MudHJpbSgpKTtcbiAgICBpbnN0Lm5vcm1hbGl6ZSA9ICguLi5hcmdzKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5ub3JtYWxpemUoLi4uYXJncykpO1xuICAgIGluc3QudG9Mb3dlckNhc2UgPSAoKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy50b0xvd2VyQ2FzZSgpKTtcbiAgICBpbnN0LnRvVXBwZXJDYXNlID0gKCkgPT4gaW5zdC5jaGVjayhjaGVja3MudG9VcHBlckNhc2UoKSk7XG4gICAgaW5zdC5zbHVnaWZ5ID0gKCkgPT4gaW5zdC5jaGVjayhjaGVja3Muc2x1Z2lmeSgpKTtcbn0pO1xuZXhwb3J0IGNvbnN0IFpvZFN0cmluZyA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RTdHJpbmdcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZFN0cmluZy5pbml0KGluc3QsIGRlZik7XG4gICAgX1pvZFN0cmluZy5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5lbWFpbCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fZW1haWwoWm9kRW1haWwsIHBhcmFtcykpO1xuICAgIGluc3QudXJsID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl91cmwoWm9kVVJMLCBwYXJhbXMpKTtcbiAgICBpbnN0Lmp3dCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fand0KFpvZEpXVCwgcGFyYW1zKSk7XG4gICAgaW5zdC5lbW9qaSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fZW1vamkoWm9kRW1vamksIHBhcmFtcykpO1xuICAgIGluc3QuZ3VpZCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fZ3VpZChab2RHVUlELCBwYXJhbXMpKTtcbiAgICBpbnN0LnV1aWQgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX3V1aWQoWm9kVVVJRCwgcGFyYW1zKSk7XG4gICAgaW5zdC51dWlkdjQgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX3V1aWR2NChab2RVVUlELCBwYXJhbXMpKTtcbiAgICBpbnN0LnV1aWR2NiA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fdXVpZHY2KFpvZFVVSUQsIHBhcmFtcykpO1xuICAgIGluc3QudXVpZHY3ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl91dWlkdjcoWm9kVVVJRCwgcGFyYW1zKSk7XG4gICAgaW5zdC5uYW5vaWQgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX25hbm9pZChab2ROYW5vSUQsIHBhcmFtcykpO1xuICAgIGluc3QuZ3VpZCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fZ3VpZChab2RHVUlELCBwYXJhbXMpKTtcbiAgICBpbnN0LmN1aWQgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX2N1aWQoWm9kQ1VJRCwgcGFyYW1zKSk7XG4gICAgaW5zdC5jdWlkMiA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fY3VpZDIoWm9kQ1VJRDIsIHBhcmFtcykpO1xuICAgIGluc3QudWxpZCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fdWxpZChab2RVTElELCBwYXJhbXMpKTtcbiAgICBpbnN0LmJhc2U2NCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fYmFzZTY0KFpvZEJhc2U2NCwgcGFyYW1zKSk7XG4gICAgaW5zdC5iYXNlNjR1cmwgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX2Jhc2U2NHVybChab2RCYXNlNjRVUkwsIHBhcmFtcykpO1xuICAgIGluc3QueGlkID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl94aWQoWm9kWElELCBwYXJhbXMpKTtcbiAgICBpbnN0LmtzdWlkID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl9rc3VpZChab2RLU1VJRCwgcGFyYW1zKSk7XG4gICAgaW5zdC5pcHY0ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl9pcHY0KFpvZElQdjQsIHBhcmFtcykpO1xuICAgIGluc3QuaXB2NiA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5faXB2Nihab2RJUHY2LCBwYXJhbXMpKTtcbiAgICBpbnN0LmNpZHJ2NCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fY2lkcnY0KFpvZENJRFJ2NCwgcGFyYW1zKSk7XG4gICAgaW5zdC5jaWRydjYgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX2NpZHJ2Nihab2RDSURSdjYsIHBhcmFtcykpO1xuICAgIGluc3QuZTE2NCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fZTE2NChab2RFMTY0LCBwYXJhbXMpKTtcbiAgICAvLyBpc29cbiAgICBpbnN0LmRhdGV0aW1lID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhpc28uZGF0ZXRpbWUocGFyYW1zKSk7XG4gICAgaW5zdC5kYXRlID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhpc28uZGF0ZShwYXJhbXMpKTtcbiAgICBpbnN0LnRpbWUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGlzby50aW1lKHBhcmFtcykpO1xuICAgIGluc3QuZHVyYXRpb24gPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGlzby5kdXJhdGlvbihwYXJhbXMpKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZyhwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fc3RyaW5nKFpvZFN0cmluZywgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RTdHJpbmdGb3JtYXQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kU3RyaW5nRm9ybWF0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIF9ab2RTdHJpbmcuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgY29uc3QgWm9kRW1haWwgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kRW1haWxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIC8vIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgY29yZS4kWm9kRW1haWwuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBlbWFpbChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fZW1haWwoWm9kRW1haWwsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kR1VJRCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RHVUlEXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZEdVSUQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBndWlkKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9ndWlkKFpvZEdVSUQsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kVVVJRCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RVVUlEXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZFVVSUQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiB1dWlkKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl91dWlkKFpvZFVVSUQsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gdXVpZHY0KHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl91dWlkdjQoWm9kVVVJRCwgcGFyYW1zKTtcbn1cbi8vIFpvZFVVSUR2NlxuZXhwb3J0IGZ1bmN0aW9uIHV1aWR2NihwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fdXVpZHY2KFpvZFVVSUQsIHBhcmFtcyk7XG59XG4vLyBab2RVVUlEdjdcbmV4cG9ydCBmdW5jdGlvbiB1dWlkdjcocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX3V1aWR2Nyhab2RVVUlELCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZFVSTCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RVUkxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIC8vIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgY29yZS4kWm9kVVJMLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gdXJsKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl91cmwoWm9kVVJMLCBwYXJhbXMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGh0dHBVcmwocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX3VybChab2RVUkwsIHtcbiAgICAgICAgcHJvdG9jb2w6IC9eaHR0cHM/JC8sXG4gICAgICAgIGhvc3RuYW1lOiBjb3JlLnJlZ2V4ZXMuZG9tYWluLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZEVtb2ppID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZEVtb2ppXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZEVtb2ppLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gZW1vamkocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2Vtb2ppKFpvZEVtb2ppLCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZE5hbm9JRCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2ROYW5vSURcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIC8vIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgY29yZS4kWm9kTmFub0lELmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gbmFub2lkKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9uYW5vaWQoWm9kTmFub0lELCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZENVSUQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kQ1VJRFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2RDVUlELmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gY3VpZChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fY3VpZChab2RDVUlELCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZENVSUQyID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZENVSUQyXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZENVSUQyLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gY3VpZDIocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2N1aWQyKFpvZENVSUQyLCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZFVMSUQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kVUxJRFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2RVTElELmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gdWxpZChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fdWxpZChab2RVTElELCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZFhJRCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RYSURcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIC8vIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgY29yZS4kWm9kWElELmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24geGlkKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl94aWQoWm9kWElELCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZEtTVUlEID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZEtTVUlEXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZEtTVUlELmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24ga3N1aWQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2tzdWlkKFpvZEtTVUlELCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZElQdjQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kSVB2NFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2RJUHY0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gaXB2NChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5faXB2NChab2RJUHY0LCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZE1BQyA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RNQUNcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIC8vIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgY29yZS4kWm9kTUFDLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gbWFjKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9tYWMoWm9kTUFDLCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZElQdjYgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kSVB2NlwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2RJUHY2LmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gaXB2NihwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5faXB2Nihab2RJUHY2LCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZENJRFJ2NCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RDSURSdjRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZENJRFJ2NC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGNpZHJ2NChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fY2lkcnY0KFpvZENJRFJ2NCwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RDSURSdjYgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kQ0lEUnY2XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RDSURSdjYuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBjaWRydjYocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2NpZHJ2Nihab2RDSURSdjYsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kQmFzZTY0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZEJhc2U2NFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2RCYXNlNjQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2Jhc2U2NChab2RCYXNlNjQsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kQmFzZTY0VVJMID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZEJhc2U2NFVSTFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2RCYXNlNjRVUkwuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjR1cmwocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2Jhc2U2NHVybChab2RCYXNlNjRVUkwsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kRTE2NCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RFMTY0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZEUxNjQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBlMTY0KHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9lMTY0KFpvZEUxNjQsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kSldUID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZEpXVFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2RKV1QuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBqd3QocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2p3dChab2RKV1QsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kQ3VzdG9tU3RyaW5nRm9ybWF0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZEN1c3RvbVN0cmluZ0Zvcm1hdFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2RDdXN0b21TdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdGb3JtYXQoZm9ybWF0LCBmbk9yUmVnZXgsIF9wYXJhbXMgPSB7fSkge1xuICAgIHJldHVybiBjb3JlLl9zdHJpbmdGb3JtYXQoWm9kQ3VzdG9tU3RyaW5nRm9ybWF0LCBmb3JtYXQsIGZuT3JSZWdleCwgX3BhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gaG9zdG5hbWUoX3BhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9zdHJpbmdGb3JtYXQoWm9kQ3VzdG9tU3RyaW5nRm9ybWF0LCBcImhvc3RuYW1lXCIsIGNvcmUucmVnZXhlcy5ob3N0bmFtZSwgX3BhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGV4KF9wYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fc3RyaW5nRm9ybWF0KFpvZEN1c3RvbVN0cmluZ0Zvcm1hdCwgXCJoZXhcIiwgY29yZS5yZWdleGVzLmhleCwgX3BhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzaChhbGcsIHBhcmFtcykge1xuICAgIGNvbnN0IGVuYyA9IHBhcmFtcz8uZW5jID8/IFwiaGV4XCI7XG4gICAgY29uc3QgZm9ybWF0ID0gYCR7YWxnfV8ke2VuY31gO1xuICAgIGNvbnN0IHJlZ2V4ID0gY29yZS5yZWdleGVzW2Zvcm1hdF07XG4gICAgaWYgKCFyZWdleClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgaGFzaCBmb3JtYXQ6ICR7Zm9ybWF0fWApO1xuICAgIHJldHVybiBjb3JlLl9zdHJpbmdGb3JtYXQoWm9kQ3VzdG9tU3RyaW5nRm9ybWF0LCBmb3JtYXQsIHJlZ2V4LCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZE51bWJlciA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2ROdW1iZXJcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZE51bWJlci5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLm51bWJlclByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG4gICAgaW5zdC5ndCA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5ndCh2YWx1ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5ndGUgPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MuZ3RlKHZhbHVlLCBwYXJhbXMpKTtcbiAgICBpbnN0Lm1pbiA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5ndGUodmFsdWUsIHBhcmFtcykpO1xuICAgIGluc3QubHQgPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MubHQodmFsdWUsIHBhcmFtcykpO1xuICAgIGluc3QubHRlID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmx0ZSh2YWx1ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5tYXggPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MubHRlKHZhbHVlLCBwYXJhbXMpKTtcbiAgICBpbnN0LmludCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soaW50KHBhcmFtcykpO1xuICAgIGluc3Quc2FmZSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soaW50KHBhcmFtcykpO1xuICAgIGluc3QucG9zaXRpdmUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5ndCgwLCBwYXJhbXMpKTtcbiAgICBpbnN0Lm5vbm5lZ2F0aXZlID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MuZ3RlKDAsIHBhcmFtcykpO1xuICAgIGluc3QubmVnYXRpdmUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5sdCgwLCBwYXJhbXMpKTtcbiAgICBpbnN0Lm5vbnBvc2l0aXZlID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MubHRlKDAsIHBhcmFtcykpO1xuICAgIGluc3QubXVsdGlwbGVPZiA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5tdWx0aXBsZU9mKHZhbHVlLCBwYXJhbXMpKTtcbiAgICBpbnN0LnN0ZXAgPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MubXVsdGlwbGVPZih2YWx1ZSwgcGFyYW1zKSk7XG4gICAgLy8gaW5zdC5maW5pdGUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuZmluaXRlKHBhcmFtcykpO1xuICAgIGluc3QuZmluaXRlID0gKCkgPT4gaW5zdDtcbiAgICBjb25zdCBiYWcgPSBpbnN0Ll96b2QuYmFnO1xuICAgIGluc3QubWluVmFsdWUgPVxuICAgICAgICBNYXRoLm1heChiYWcubWluaW11bSA/PyBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIGJhZy5leGNsdXNpdmVNaW5pbXVtID8/IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSkgPz8gbnVsbDtcbiAgICBpbnN0Lm1heFZhbHVlID1cbiAgICAgICAgTWF0aC5taW4oYmFnLm1heGltdW0gPz8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCBiYWcuZXhjbHVzaXZlTWF4aW11bSA/PyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpID8/IG51bGw7XG4gICAgaW5zdC5pc0ludCA9IChiYWcuZm9ybWF0ID8/IFwiXCIpLmluY2x1ZGVzKFwiaW50XCIpIHx8IE51bWJlci5pc1NhZmVJbnRlZ2VyKGJhZy5tdWx0aXBsZU9mID8/IDAuNSk7XG4gICAgaW5zdC5pc0Zpbml0ZSA9IHRydWU7XG4gICAgaW5zdC5mb3JtYXQgPSBiYWcuZm9ybWF0ID8/IG51bGw7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBudW1iZXIocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX251bWJlcihab2ROdW1iZXIsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kTnVtYmVyRm9ybWF0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZE51bWJlckZvcm1hdFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kTnVtYmVyRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2ROdW1iZXIuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gaW50KHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9pbnQoWm9kTnVtYmVyRm9ybWF0LCBwYXJhbXMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb2F0MzIocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2Zsb2F0MzIoWm9kTnVtYmVyRm9ybWF0LCBwYXJhbXMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb2F0NjQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2Zsb2F0NjQoWm9kTnVtYmVyRm9ybWF0LCBwYXJhbXMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGludDMyKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9pbnQzMihab2ROdW1iZXJGb3JtYXQsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gdWludDMyKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl91aW50MzIoWm9kTnVtYmVyRm9ybWF0LCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZEJvb2xlYW4gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kQm9vbGVhblwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kQm9vbGVhbi5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLmJvb2xlYW5Qcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gYm9vbGVhbihwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fYm9vbGVhbihab2RCb29sZWFuLCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZEJpZ0ludCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RCaWdJbnRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZEJpZ0ludC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLmJpZ2ludFByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG4gICAgaW5zdC5ndGUgPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MuZ3RlKHZhbHVlLCBwYXJhbXMpKTtcbiAgICBpbnN0Lm1pbiA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5ndGUodmFsdWUsIHBhcmFtcykpO1xuICAgIGluc3QuZ3QgPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MuZ3QodmFsdWUsIHBhcmFtcykpO1xuICAgIGluc3QuZ3RlID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmd0ZSh2YWx1ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5taW4gPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MuZ3RlKHZhbHVlLCBwYXJhbXMpKTtcbiAgICBpbnN0Lmx0ID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmx0KHZhbHVlLCBwYXJhbXMpKTtcbiAgICBpbnN0Lmx0ZSA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5sdGUodmFsdWUsIHBhcmFtcykpO1xuICAgIGluc3QubWF4ID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmx0ZSh2YWx1ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5wb3NpdGl2ZSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmd0KEJpZ0ludCgwKSwgcGFyYW1zKSk7XG4gICAgaW5zdC5uZWdhdGl2ZSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmx0KEJpZ0ludCgwKSwgcGFyYW1zKSk7XG4gICAgaW5zdC5ub25wb3NpdGl2ZSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmx0ZShCaWdJbnQoMCksIHBhcmFtcykpO1xuICAgIGluc3Qubm9ubmVnYXRpdmUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5ndGUoQmlnSW50KDApLCBwYXJhbXMpKTtcbiAgICBpbnN0Lm11bHRpcGxlT2YgPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MubXVsdGlwbGVPZih2YWx1ZSwgcGFyYW1zKSk7XG4gICAgY29uc3QgYmFnID0gaW5zdC5fem9kLmJhZztcbiAgICBpbnN0Lm1pblZhbHVlID0gYmFnLm1pbmltdW0gPz8gbnVsbDtcbiAgICBpbnN0Lm1heFZhbHVlID0gYmFnLm1heGltdW0gPz8gbnVsbDtcbiAgICBpbnN0LmZvcm1hdCA9IGJhZy5mb3JtYXQgPz8gbnVsbDtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGJpZ2ludChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fYmlnaW50KFpvZEJpZ0ludCwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RCaWdJbnRGb3JtYXQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kQmlnSW50Rm9ybWF0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RCaWdJbnRGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZEJpZ0ludC5pbml0KGluc3QsIGRlZik7XG59KTtcbi8vIGludDY0XG5leHBvcnQgZnVuY3Rpb24gaW50NjQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2ludDY0KFpvZEJpZ0ludEZvcm1hdCwgcGFyYW1zKTtcbn1cbi8vIHVpbnQ2NFxuZXhwb3J0IGZ1bmN0aW9uIHVpbnQ2NChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fdWludDY0KFpvZEJpZ0ludEZvcm1hdCwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RTeW1ib2wgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kU3ltYm9sXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RTeW1ib2wuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wcm9jZXNzSlNPTlNjaGVtYSA9IChjdHgsIGpzb24sIHBhcmFtcykgPT4gcHJvY2Vzc29ycy5zeW1ib2xQcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gc3ltYm9sKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9zeW1ib2woWm9kU3ltYm9sLCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZFVuZGVmaW5lZCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RVbmRlZmluZWRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZFVuZGVmaW5lZC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLnVuZGVmaW5lZFByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG59KTtcbmZ1bmN0aW9uIF91bmRlZmluZWQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX3VuZGVmaW5lZChab2RVbmRlZmluZWQsIHBhcmFtcyk7XG59XG5leHBvcnQgeyBfdW5kZWZpbmVkIGFzIHVuZGVmaW5lZCB9O1xuZXhwb3J0IGNvbnN0IFpvZE51bGwgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kTnVsbFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kTnVsbC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLm51bGxQcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xufSk7XG5mdW5jdGlvbiBfbnVsbChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fbnVsbChab2ROdWxsLCBwYXJhbXMpO1xufVxuZXhwb3J0IHsgX251bGwgYXMgbnVsbCB9O1xuZXhwb3J0IGNvbnN0IFpvZEFueSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RBbnlcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZEFueS5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLmFueVByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBhbnkoKSB7XG4gICAgcmV0dXJuIGNvcmUuX2FueShab2RBbnkpO1xufVxuZXhwb3J0IGNvbnN0IFpvZFVua25vd24gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kVW5rbm93blwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kVW5rbm93bi5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLnVua25vd25Qcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gdW5rbm93bigpIHtcbiAgICByZXR1cm4gY29yZS5fdW5rbm93bihab2RVbmtub3duKTtcbn1cbmV4cG9ydCBjb25zdCBab2ROZXZlciA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2ROZXZlclwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kTmV2ZXIuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wcm9jZXNzSlNPTlNjaGVtYSA9IChjdHgsIGpzb24sIHBhcmFtcykgPT4gcHJvY2Vzc29ycy5uZXZlclByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBuZXZlcihwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fbmV2ZXIoWm9kTmV2ZXIsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kVm9pZCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RWb2lkXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RWb2lkLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucHJvY2Vzc0pTT05TY2hlbWEgPSAoY3R4LCBqc29uLCBwYXJhbXMpID0+IHByb2Nlc3NvcnMudm9pZFByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG59KTtcbmZ1bmN0aW9uIF92b2lkKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl92b2lkKFpvZFZvaWQsIHBhcmFtcyk7XG59XG5leHBvcnQgeyBfdm9pZCBhcyB2b2lkIH07XG5leHBvcnQgY29uc3QgWm9kRGF0ZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2REYXRlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2REYXRlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucHJvY2Vzc0pTT05TY2hlbWEgPSAoY3R4LCBqc29uLCBwYXJhbXMpID0+IHByb2Nlc3NvcnMuZGF0ZVByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG4gICAgaW5zdC5taW4gPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MuZ3RlKHZhbHVlLCBwYXJhbXMpKTtcbiAgICBpbnN0Lm1heCA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5sdGUodmFsdWUsIHBhcmFtcykpO1xuICAgIGNvbnN0IGMgPSBpbnN0Ll96b2QuYmFnO1xuICAgIGluc3QubWluRGF0ZSA9IGMubWluaW11bSA/IG5ldyBEYXRlKGMubWluaW11bSkgOiBudWxsO1xuICAgIGluc3QubWF4RGF0ZSA9IGMubWF4aW11bSA/IG5ldyBEYXRlKGMubWF4aW11bSkgOiBudWxsO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gZGF0ZShwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fZGF0ZShab2REYXRlLCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZEFycmF5ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZEFycmF5XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RBcnJheS5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLmFycmF5UHJvY2Vzc29yKGluc3QsIGN0eCwganNvbiwgcGFyYW1zKTtcbiAgICBpbnN0LmVsZW1lbnQgPSBkZWYuZWxlbWVudDtcbiAgICBpbnN0Lm1pbiA9IChtaW5MZW5ndGgsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MubWluTGVuZ3RoKG1pbkxlbmd0aCwgcGFyYW1zKSk7XG4gICAgaW5zdC5ub25lbXB0eSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLm1pbkxlbmd0aCgxLCBwYXJhbXMpKTtcbiAgICBpbnN0Lm1heCA9IChtYXhMZW5ndGgsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MubWF4TGVuZ3RoKG1heExlbmd0aCwgcGFyYW1zKSk7XG4gICAgaW5zdC5sZW5ndGggPSAobGVuLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmxlbmd0aChsZW4sIHBhcmFtcykpO1xuICAgIGluc3QudW53cmFwID0gKCkgPT4gaW5zdC5lbGVtZW50O1xufSk7XG5leHBvcnQgZnVuY3Rpb24gYXJyYXkoZWxlbWVudCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2FycmF5KFpvZEFycmF5LCBlbGVtZW50LCBwYXJhbXMpO1xufVxuLy8gLmtleW9mXG5leHBvcnQgZnVuY3Rpb24ga2V5b2Yoc2NoZW1hKSB7XG4gICAgY29uc3Qgc2hhcGUgPSBzY2hlbWEuX3pvZC5kZWYuc2hhcGU7XG4gICAgcmV0dXJuIF9lbnVtKE9iamVjdC5rZXlzKHNoYXBlKSk7XG59XG5leHBvcnQgY29uc3QgWm9kT2JqZWN0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZE9iamVjdFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kT2JqZWN0SklULmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucHJvY2Vzc0pTT05TY2hlbWEgPSAoY3R4LCBqc29uLCBwYXJhbXMpID0+IHByb2Nlc3NvcnMub2JqZWN0UHJvY2Vzc29yKGluc3QsIGN0eCwganNvbiwgcGFyYW1zKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdCwgXCJzaGFwZVwiLCAoKSA9PiB7XG4gICAgICAgIHJldHVybiBkZWYuc2hhcGU7XG4gICAgfSk7XG4gICAgaW5zdC5rZXlvZiA9ICgpID0+IF9lbnVtKE9iamVjdC5rZXlzKGluc3QuX3pvZC5kZWYuc2hhcGUpKTtcbiAgICBpbnN0LmNhdGNoYWxsID0gKGNhdGNoYWxsKSA9PiBpbnN0LmNsb25lKHsgLi4uaW5zdC5fem9kLmRlZiwgY2F0Y2hhbGw6IGNhdGNoYWxsIH0pO1xuICAgIGluc3QucGFzc3Rocm91Z2ggPSAoKSA9PiBpbnN0LmNsb25lKHsgLi4uaW5zdC5fem9kLmRlZiwgY2F0Y2hhbGw6IHVua25vd24oKSB9KTtcbiAgICBpbnN0Lmxvb3NlID0gKCkgPT4gaW5zdC5jbG9uZSh7IC4uLmluc3QuX3pvZC5kZWYsIGNhdGNoYWxsOiB1bmtub3duKCkgfSk7XG4gICAgaW5zdC5zdHJpY3QgPSAoKSA9PiBpbnN0LmNsb25lKHsgLi4uaW5zdC5fem9kLmRlZiwgY2F0Y2hhbGw6IG5ldmVyKCkgfSk7XG4gICAgaW5zdC5zdHJpcCA9ICgpID0+IGluc3QuY2xvbmUoeyAuLi5pbnN0Ll96b2QuZGVmLCBjYXRjaGFsbDogdW5kZWZpbmVkIH0pO1xuICAgIGluc3QuZXh0ZW5kID0gKGluY29taW5nKSA9PiB7XG4gICAgICAgIHJldHVybiB1dGlsLmV4dGVuZChpbnN0LCBpbmNvbWluZyk7XG4gICAgfTtcbiAgICBpbnN0LnNhZmVFeHRlbmQgPSAoaW5jb21pbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIHV0aWwuc2FmZUV4dGVuZChpbnN0LCBpbmNvbWluZyk7XG4gICAgfTtcbiAgICBpbnN0Lm1lcmdlID0gKG90aGVyKSA9PiB1dGlsLm1lcmdlKGluc3QsIG90aGVyKTtcbiAgICBpbnN0LnBpY2sgPSAobWFzaykgPT4gdXRpbC5waWNrKGluc3QsIG1hc2spO1xuICAgIGluc3Qub21pdCA9IChtYXNrKSA9PiB1dGlsLm9taXQoaW5zdCwgbWFzayk7XG4gICAgaW5zdC5wYXJ0aWFsID0gKC4uLmFyZ3MpID0+IHV0aWwucGFydGlhbChab2RPcHRpb25hbCwgaW5zdCwgYXJnc1swXSk7XG4gICAgaW5zdC5yZXF1aXJlZCA9ICguLi5hcmdzKSA9PiB1dGlsLnJlcXVpcmVkKFpvZE5vbk9wdGlvbmFsLCBpbnN0LCBhcmdzWzBdKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIG9iamVjdChzaGFwZSwgcGFyYW1zKSB7XG4gICAgY29uc3QgZGVmID0ge1xuICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICBzaGFwZTogc2hhcGUgPz8ge30sXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfTtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdChkZWYpO1xufVxuLy8gc3RyaWN0T2JqZWN0XG5leHBvcnQgZnVuY3Rpb24gc3RyaWN0T2JqZWN0KHNoYXBlLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgIHNoYXBlLFxuICAgICAgICBjYXRjaGFsbDogbmV2ZXIoKSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIGxvb3NlT2JqZWN0XG5leHBvcnQgZnVuY3Rpb24gbG9vc2VPYmplY3Qoc2hhcGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIGNhdGNoYWxsOiB1bmtub3duKCksXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kVW5pb24gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kVW5pb25cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZFVuaW9uLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucHJvY2Vzc0pTT05TY2hlbWEgPSAoY3R4LCBqc29uLCBwYXJhbXMpID0+IHByb2Nlc3NvcnMudW5pb25Qcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xuICAgIGluc3Qub3B0aW9ucyA9IGRlZi5vcHRpb25zO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gdW5pb24ob3B0aW9ucywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmlvbih7XG4gICAgICAgIHR5cGU6IFwidW5pb25cIixcbiAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBab2RYb3IgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kWG9yXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBab2RVbmlvbi5pbml0KGluc3QsIGRlZik7XG4gICAgY29yZS4kWm9kWG9yLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucHJvY2Vzc0pTT05TY2hlbWEgPSAoY3R4LCBqc29uLCBwYXJhbXMpID0+IHByb2Nlc3NvcnMudW5pb25Qcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xuICAgIGluc3Qub3B0aW9ucyA9IGRlZi5vcHRpb25zO1xufSk7XG4vKiogQ3JlYXRlcyBhbiBleGNsdXNpdmUgdW5pb24gKFhPUikgd2hlcmUgZXhhY3RseSBvbmUgb3B0aW9uIG11c3QgbWF0Y2guXG4gKiBVbmxpa2UgcmVndWxhciB1bmlvbnMgdGhhdCBzdWNjZWVkIHdoZW4gYW55IG9wdGlvbiBtYXRjaGVzLCB4b3IgZmFpbHMgaWZcbiAqIHplcm8gb3IgbW9yZSB0aGFuIG9uZSBvcHRpb24gbWF0Y2hlcyB0aGUgaW5wdXQuICovXG5leHBvcnQgZnVuY3Rpb24geG9yKG9wdGlvbnMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kWG9yKHtcbiAgICAgICAgdHlwZTogXCJ1bmlvblwiLFxuICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZERpc2NyaW1pbmF0ZWRVbmlvbiA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2REaXNjcmltaW5hdGVkVW5pb25cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIFpvZFVuaW9uLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2REaXNjcmltaW5hdGVkVW5pb24uaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gZGlzY3JpbWluYXRlZFVuaW9uKGRpc2NyaW1pbmF0b3IsIG9wdGlvbnMsIHBhcmFtcykge1xuICAgIC8vIGNvbnN0IFtvcHRpb25zLCBwYXJhbXNdID0gYXJncztcbiAgICByZXR1cm4gbmV3IFpvZERpc2NyaW1pbmF0ZWRVbmlvbih7XG4gICAgICAgIHR5cGU6IFwidW5pb25cIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgZGlzY3JpbWluYXRvcixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBab2RJbnRlcnNlY3Rpb24gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kSW50ZXJzZWN0aW9uXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RJbnRlcnNlY3Rpb24uaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wcm9jZXNzSlNPTlNjaGVtYSA9IChjdHgsIGpzb24sIHBhcmFtcykgPT4gcHJvY2Vzc29ycy5pbnRlcnNlY3Rpb25Qcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0aW9uKGxlZnQsIHJpZ2h0KSB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICB0eXBlOiBcImludGVyc2VjdGlvblwiLFxuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kVHVwbGUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kVHVwbGVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZFR1cGxlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucHJvY2Vzc0pTT05TY2hlbWEgPSAoY3R4LCBqc29uLCBwYXJhbXMpID0+IHByb2Nlc3NvcnMudHVwbGVQcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xuICAgIGluc3QucmVzdCA9IChyZXN0KSA9PiBpbnN0LmNsb25lKHtcbiAgICAgICAgLi4uaW5zdC5fem9kLmRlZixcbiAgICAgICAgcmVzdDogcmVzdCxcbiAgICB9KTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHR1cGxlKGl0ZW1zLCBfcGFyYW1zT3JSZXN0LCBfcGFyYW1zKSB7XG4gICAgY29uc3QgaGFzUmVzdCA9IF9wYXJhbXNPclJlc3QgaW5zdGFuY2VvZiBjb3JlLiRab2RUeXBlO1xuICAgIGNvbnN0IHBhcmFtcyA9IGhhc1Jlc3QgPyBfcGFyYW1zIDogX3BhcmFtc09yUmVzdDtcbiAgICBjb25zdCByZXN0ID0gaGFzUmVzdCA/IF9wYXJhbXNPclJlc3QgOiBudWxsO1xuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICB0eXBlOiBcInR1cGxlXCIsXG4gICAgICAgIGl0ZW1zOiBpdGVtcyxcbiAgICAgICAgcmVzdCxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBab2RSZWNvcmQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kUmVjb3JkXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RSZWNvcmQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wcm9jZXNzSlNPTlNjaGVtYSA9IChjdHgsIGpzb24sIHBhcmFtcykgPT4gcHJvY2Vzc29ycy5yZWNvcmRQcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xuICAgIGluc3Qua2V5VHlwZSA9IGRlZi5rZXlUeXBlO1xuICAgIGluc3QudmFsdWVUeXBlID0gZGVmLnZhbHVlVHlwZTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHJlY29yZChrZXlUeXBlLCB2YWx1ZVR5cGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgdHlwZTogXCJyZWNvcmRcIixcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdmFsdWVUeXBlOiB2YWx1ZVR5cGUsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyB0eXBlIGFsa3NqZiA9IGNvcmUub3V0cHV0PGNvcmUuJFpvZFJlY29yZEtleT47XG5leHBvcnQgZnVuY3Rpb24gcGFydGlhbFJlY29yZChrZXlUeXBlLCB2YWx1ZVR5cGUsIHBhcmFtcykge1xuICAgIGNvbnN0IGsgPSBjb3JlLmNsb25lKGtleVR5cGUpO1xuICAgIGsuX3pvZC52YWx1ZXMgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICB0eXBlOiBcInJlY29yZFwiLFxuICAgICAgICBrZXlUeXBlOiBrLFxuICAgICAgICB2YWx1ZVR5cGU6IHZhbHVlVHlwZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb29zZVJlY29yZChrZXlUeXBlLCB2YWx1ZVR5cGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgdHlwZTogXCJyZWNvcmRcIixcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdmFsdWVUeXBlOiB2YWx1ZVR5cGUsXG4gICAgICAgIG1vZGU6IFwibG9vc2VcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBab2RNYXAgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kTWFwXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RNYXAuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wcm9jZXNzSlNPTlNjaGVtYSA9IChjdHgsIGpzb24sIHBhcmFtcykgPT4gcHJvY2Vzc29ycy5tYXBQcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xuICAgIGluc3Qua2V5VHlwZSA9IGRlZi5rZXlUeXBlO1xuICAgIGluc3QudmFsdWVUeXBlID0gZGVmLnZhbHVlVHlwZTtcbiAgICBpbnN0Lm1pbiA9ICguLi5hcmdzKSA9PiBpbnN0LmNoZWNrKGNvcmUuX21pblNpemUoLi4uYXJncykpO1xuICAgIGluc3Qubm9uZW1wdHkgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX21pblNpemUoMSwgcGFyYW1zKSk7XG4gICAgaW5zdC5tYXggPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhjb3JlLl9tYXhTaXplKC4uLmFyZ3MpKTtcbiAgICBpbnN0LnNpemUgPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhjb3JlLl9zaXplKC4uLmFyZ3MpKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIG1hcChrZXlUeXBlLCB2YWx1ZVR5cGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kTWFwKHtcbiAgICAgICAgdHlwZTogXCJtYXBcIixcbiAgICAgICAga2V5VHlwZToga2V5VHlwZSxcbiAgICAgICAgdmFsdWVUeXBlOiB2YWx1ZVR5cGUsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kU2V0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZFNldFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kU2V0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucHJvY2Vzc0pTT05TY2hlbWEgPSAoY3R4LCBqc29uLCBwYXJhbXMpID0+IHByb2Nlc3NvcnMuc2V0UHJvY2Vzc29yKGluc3QsIGN0eCwganNvbiwgcGFyYW1zKTtcbiAgICBpbnN0Lm1pbiA9ICguLi5hcmdzKSA9PiBpbnN0LmNoZWNrKGNvcmUuX21pblNpemUoLi4uYXJncykpO1xuICAgIGluc3Qubm9uZW1wdHkgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX21pblNpemUoMSwgcGFyYW1zKSk7XG4gICAgaW5zdC5tYXggPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhjb3JlLl9tYXhTaXplKC4uLmFyZ3MpKTtcbiAgICBpbnN0LnNpemUgPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhjb3JlLl9zaXplKC4uLmFyZ3MpKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHNldCh2YWx1ZVR5cGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgdHlwZTogXCJzZXRcIixcbiAgICAgICAgdmFsdWVUeXBlOiB2YWx1ZVR5cGUsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kRW51bSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RFbnVtXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RFbnVtLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucHJvY2Vzc0pTT05TY2hlbWEgPSAoY3R4LCBqc29uLCBwYXJhbXMpID0+IHByb2Nlc3NvcnMuZW51bVByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG4gICAgaW5zdC5lbnVtID0gZGVmLmVudHJpZXM7XG4gICAgaW5zdC5vcHRpb25zID0gT2JqZWN0LnZhbHVlcyhkZWYuZW50cmllcyk7XG4gICAgY29uc3Qga2V5cyA9IG5ldyBTZXQoT2JqZWN0LmtleXMoZGVmLmVudHJpZXMpKTtcbiAgICBpbnN0LmV4dHJhY3QgPSAodmFsdWVzLCBwYXJhbXMpID0+IHtcbiAgICAgICAgY29uc3QgbmV3RW50cmllcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgICAgICAgaWYgKGtleXMuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG5ld0VudHJpZXNbdmFsdWVdID0gZGVmLmVudHJpZXNbdmFsdWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgS2V5ICR7dmFsdWV9IG5vdCBmb3VuZCBpbiBlbnVtYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RFbnVtKHtcbiAgICAgICAgICAgIC4uLmRlZixcbiAgICAgICAgICAgIGNoZWNrczogW10sXG4gICAgICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICAgICAgZW50cmllczogbmV3RW50cmllcyxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBpbnN0LmV4Y2x1ZGUgPSAodmFsdWVzLCBwYXJhbXMpID0+IHtcbiAgICAgICAgY29uc3QgbmV3RW50cmllcyA9IHsgLi4uZGVmLmVudHJpZXMgfTtcbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgICAgICAgIGlmIChrZXlzLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgbmV3RW50cmllc1t2YWx1ZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBLZXkgJHt2YWx1ZX0gbm90IGZvdW5kIGluIGVudW1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZEVudW0oe1xuICAgICAgICAgICAgLi4uZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgICAgICAgICBlbnRyaWVzOiBuZXdFbnRyaWVzLFxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5mdW5jdGlvbiBfZW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KHZhbHVlcykgPyBPYmplY3QuZnJvbUVudHJpZXModmFsdWVzLm1hcCgodikgPT4gW3YsIHZdKSkgOiB2YWx1ZXM7XG4gICAgcmV0dXJuIG5ldyBab2RFbnVtKHtcbiAgICAgICAgdHlwZTogXCJlbnVtXCIsXG4gICAgICAgIGVudHJpZXMsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgeyBfZW51bSBhcyBlbnVtIH07XG4vKiogQGRlcHJlY2F0ZWQgVGhpcyBBUEkgaGFzIGJlZW4gbWVyZ2VkIGludG8gYHouZW51bSgpYC4gVXNlIGB6LmVudW0oKWAgaW5zdGVhZC5cbiAqXG4gKiBgYGB0c1xuICogZW51bSBDb2xvcnMgeyByZWQsIGdyZWVuLCBibHVlIH1cbiAqIHouZW51bShDb2xvcnMpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBuYXRpdmVFbnVtKGVudHJpZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHR5cGU6IFwiZW51bVwiLFxuICAgICAgICBlbnRyaWVzLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZExpdGVyYWwgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kTGl0ZXJhbFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kTGl0ZXJhbC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLmxpdGVyYWxQcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xuICAgIGluc3QudmFsdWVzID0gbmV3IFNldChkZWYudmFsdWVzKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zdCwgXCJ2YWx1ZVwiLCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGlmIChkZWYudmFsdWVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHNjaGVtYSBjb250YWlucyBtdWx0aXBsZSB2YWxpZCBsaXRlcmFsIHZhbHVlcy4gVXNlIGAudmFsdWVzYCBpbnN0ZWFkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkZWYudmFsdWVzWzBdO1xuICAgICAgICB9LFxuICAgIH0pO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gbGl0ZXJhbCh2YWx1ZSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBab2RMaXRlcmFsKHtcbiAgICAgICAgdHlwZTogXCJsaXRlcmFsXCIsXG4gICAgICAgIHZhbHVlczogQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV0sXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kRmlsZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RGaWxlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RGaWxlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucHJvY2Vzc0pTT05TY2hlbWEgPSAoY3R4LCBqc29uLCBwYXJhbXMpID0+IHByb2Nlc3NvcnMuZmlsZVByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG4gICAgaW5zdC5taW4gPSAoc2l6ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX21pblNpemUoc2l6ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5tYXggPSAoc2l6ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX21heFNpemUoc2l6ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5taW1lID0gKHR5cGVzLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fbWltZShBcnJheS5pc0FycmF5KHR5cGVzKSA/IHR5cGVzIDogW3R5cGVzXSwgcGFyYW1zKSk7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBmaWxlKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9maWxlKFpvZEZpbGUsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kVHJhbnNmb3JtID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZFRyYW5zZm9ybVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kVHJhbnNmb3JtLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucHJvY2Vzc0pTT05TY2hlbWEgPSAoY3R4LCBqc29uLCBwYXJhbXMpID0+IHByb2Nlc3NvcnMudHJhbnNmb3JtUHJvY2Vzc29yKGluc3QsIGN0eCwganNvbiwgcGFyYW1zKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBpZiAoX2N0eC5kaXJlY3Rpb24gPT09IFwiYmFja3dhcmRcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGNvcmUuJFpvZEVuY29kZUVycm9yKGluc3QuY29uc3RydWN0b3IubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgcGF5bG9hZC5hZGRJc3N1ZSA9IChpc3N1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpc3N1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2godXRpbC5pc3N1ZShpc3N1ZSwgcGF5bG9hZC52YWx1ZSwgZGVmKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBmb3IgWm9kIDMgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTtcbiAgICAgICAgICAgICAgICBpZiAoX2lzc3VlLmZhdGFsKVxuICAgICAgICAgICAgICAgICAgICBfaXNzdWUuY29udGludWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfaXNzdWUuY29kZSA/PyAoX2lzc3VlLmNvZGUgPSBcImN1c3RvbVwiKTtcbiAgICAgICAgICAgICAgICBfaXNzdWUuaW5wdXQgPz8gKF9pc3N1ZS5pbnB1dCA9IHBheWxvYWQudmFsdWUpO1xuICAgICAgICAgICAgICAgIF9pc3N1ZS5pbnN0ID8/IChfaXNzdWUuaW5zdCA9IGluc3QpO1xuICAgICAgICAgICAgICAgIC8vIF9pc3N1ZS5jb250aW51ZSA/Pz0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHV0aWwuaXNzdWUoX2lzc3VlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGRlZi50cmFuc2Zvcm0ocGF5bG9hZC52YWx1ZSwgcGF5bG9hZCk7XG4gICAgICAgIGlmIChvdXRwdXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0LnRoZW4oKG91dHB1dCkgPT4ge1xuICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSBvdXRwdXQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBwYXlsb2FkLnZhbHVlID0gb3V0cHV0O1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtKGZuKSB7XG4gICAgcmV0dXJuIG5ldyBab2RUcmFuc2Zvcm0oe1xuICAgICAgICB0eXBlOiBcInRyYW5zZm9ybVwiLFxuICAgICAgICB0cmFuc2Zvcm06IGZuLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZE9wdGlvbmFsID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZE9wdGlvbmFsXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RPcHRpb25hbC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLm9wdGlvbmFsUHJvY2Vzc29yKGluc3QsIGN0eCwganNvbiwgcGFyYW1zKTtcbiAgICBpbnN0LnVud3JhcCA9ICgpID0+IGluc3QuX3pvZC5kZWYuaW5uZXJUeXBlO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gb3B0aW9uYWwoaW5uZXJUeXBlKSB7XG4gICAgcmV0dXJuIG5ldyBab2RPcHRpb25hbCh7XG4gICAgICAgIHR5cGU6IFwib3B0aW9uYWxcIixcbiAgICAgICAgaW5uZXJUeXBlOiBpbm5lclR5cGUsXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kRXhhY3RPcHRpb25hbCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RFeGFjdE9wdGlvbmFsXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RFeGFjdE9wdGlvbmFsLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucHJvY2Vzc0pTT05TY2hlbWEgPSAoY3R4LCBqc29uLCBwYXJhbXMpID0+IHByb2Nlc3NvcnMub3B0aW9uYWxQcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xuICAgIGluc3QudW53cmFwID0gKCkgPT4gaW5zdC5fem9kLmRlZi5pbm5lclR5cGU7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBleGFjdE9wdGlvbmFsKGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgWm9kRXhhY3RPcHRpb25hbCh7XG4gICAgICAgIHR5cGU6IFwib3B0aW9uYWxcIixcbiAgICAgICAgaW5uZXJUeXBlOiBpbm5lclR5cGUsXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kTnVsbGFibGUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kTnVsbGFibGVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZE51bGxhYmxlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucHJvY2Vzc0pTT05TY2hlbWEgPSAoY3R4LCBqc29uLCBwYXJhbXMpID0+IHByb2Nlc3NvcnMubnVsbGFibGVQcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xuICAgIGluc3QudW53cmFwID0gKCkgPT4gaW5zdC5fem9kLmRlZi5pbm5lclR5cGU7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBudWxsYWJsZShpbm5lclR5cGUpIHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGxhYmxlKHtcbiAgICAgICAgdHlwZTogXCJudWxsYWJsZVwiLFxuICAgICAgICBpbm5lclR5cGU6IGlubmVyVHlwZSxcbiAgICB9KTtcbn1cbi8vIG51bGxpc2hcbmV4cG9ydCBmdW5jdGlvbiBudWxsaXNoKGlubmVyVHlwZSkge1xuICAgIHJldHVybiBvcHRpb25hbChudWxsYWJsZShpbm5lclR5cGUpKTtcbn1cbmV4cG9ydCBjb25zdCBab2REZWZhdWx0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZERlZmF1bHRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZERlZmF1bHQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wcm9jZXNzSlNPTlNjaGVtYSA9IChjdHgsIGpzb24sIHBhcmFtcykgPT4gcHJvY2Vzc29ycy5kZWZhdWx0UHJvY2Vzc29yKGluc3QsIGN0eCwganNvbiwgcGFyYW1zKTtcbiAgICBpbnN0LnVud3JhcCA9ICgpID0+IGluc3QuX3pvZC5kZWYuaW5uZXJUeXBlO1xuICAgIGluc3QucmVtb3ZlRGVmYXVsdCA9IGluc3QudW53cmFwO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gX2RlZmF1bHQoaW5uZXJUeXBlLCBkZWZhdWx0VmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICB0eXBlOiBcImRlZmF1bHRcIixcbiAgICAgICAgaW5uZXJUeXBlOiBpbm5lclR5cGUsXG4gICAgICAgIGdldCBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGRlZmF1bHRWYWx1ZSA9PT0gXCJmdW5jdGlvblwiID8gZGVmYXVsdFZhbHVlKCkgOiB1dGlsLnNoYWxsb3dDbG9uZShkZWZhdWx0VmFsdWUpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZFByZWZhdWx0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZFByZWZhdWx0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RQcmVmYXVsdC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLnByZWZhdWx0UHJvY2Vzc29yKGluc3QsIGN0eCwganNvbiwgcGFyYW1zKTtcbiAgICBpbnN0LnVud3JhcCA9ICgpID0+IGluc3QuX3pvZC5kZWYuaW5uZXJUeXBlO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gcHJlZmF1bHQoaW5uZXJUeXBlLCBkZWZhdWx0VmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IFpvZFByZWZhdWx0KHtcbiAgICAgICAgdHlwZTogXCJwcmVmYXVsdFwiLFxuICAgICAgICBpbm5lclR5cGU6IGlubmVyVHlwZSxcbiAgICAgICAgZ2V0IGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZGVmYXVsdFZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyBkZWZhdWx0VmFsdWUoKSA6IHV0aWwuc2hhbGxvd0Nsb25lKGRlZmF1bHRWYWx1ZSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kTm9uT3B0aW9uYWwgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kTm9uT3B0aW9uYWxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZE5vbk9wdGlvbmFsLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucHJvY2Vzc0pTT05TY2hlbWEgPSAoY3R4LCBqc29uLCBwYXJhbXMpID0+IHByb2Nlc3NvcnMubm9ub3B0aW9uYWxQcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xuICAgIGluc3QudW53cmFwID0gKCkgPT4gaW5zdC5fem9kLmRlZi5pbm5lclR5cGU7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBub25vcHRpb25hbChpbm5lclR5cGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kTm9uT3B0aW9uYWwoe1xuICAgICAgICB0eXBlOiBcIm5vbm9wdGlvbmFsXCIsXG4gICAgICAgIGlubmVyVHlwZTogaW5uZXJUeXBlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZFN1Y2Nlc3MgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kU3VjY2Vzc1wiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kU3VjY2Vzcy5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLnN1Y2Nlc3NQcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xuICAgIGluc3QudW53cmFwID0gKCkgPT4gaW5zdC5fem9kLmRlZi5pbm5lclR5cGU7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBzdWNjZXNzKGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgWm9kU3VjY2Vzcyh7XG4gICAgICAgIHR5cGU6IFwic3VjY2Vzc1wiLFxuICAgICAgICBpbm5lclR5cGU6IGlubmVyVHlwZSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBab2RDYXRjaCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RDYXRjaFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kQ2F0Y2guaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wcm9jZXNzSlNPTlNjaGVtYSA9IChjdHgsIGpzb24sIHBhcmFtcykgPT4gcHJvY2Vzc29ycy5jYXRjaFByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG4gICAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0Ll96b2QuZGVmLmlubmVyVHlwZTtcbiAgICBpbnN0LnJlbW92ZUNhdGNoID0gaW5zdC51bndyYXA7XG59KTtcbmZ1bmN0aW9uIF9jYXRjaChpbm5lclR5cGUsIGNhdGNoVmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgdHlwZTogXCJjYXRjaFwiLFxuICAgICAgICBpbm5lclR5cGU6IGlubmVyVHlwZSxcbiAgICAgICAgY2F0Y2hWYWx1ZTogKHR5cGVvZiBjYXRjaFZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyBjYXRjaFZhbHVlIDogKCkgPT4gY2F0Y2hWYWx1ZSksXG4gICAgfSk7XG59XG5leHBvcnQgeyBfY2F0Y2ggYXMgY2F0Y2ggfTtcbmV4cG9ydCBjb25zdCBab2ROYU4gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kTmFOXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2ROYU4uaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wcm9jZXNzSlNPTlNjaGVtYSA9IChjdHgsIGpzb24sIHBhcmFtcykgPT4gcHJvY2Vzc29ycy5uYW5Qcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gbmFuKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9uYW4oWm9kTmFOLCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZFBpcGUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kUGlwZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kUGlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLnBpcGVQcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xuICAgIGluc3QuaW4gPSBkZWYuaW47XG4gICAgaW5zdC5vdXQgPSBkZWYub3V0O1xufSk7XG5leHBvcnQgZnVuY3Rpb24gcGlwZShpbl8sIG91dCkge1xuICAgIHJldHVybiBuZXcgWm9kUGlwZSh7XG4gICAgICAgIHR5cGU6IFwicGlwZVwiLFxuICAgICAgICBpbjogaW5fLFxuICAgICAgICBvdXQ6IG91dCxcbiAgICAgICAgLy8gLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBab2RDb2RlYyA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RDb2RlY1wiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgWm9kUGlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgY29yZS4kWm9kQ29kZWMuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gY29kZWMoaW5fLCBvdXQsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kQ29kZWMoe1xuICAgICAgICB0eXBlOiBcInBpcGVcIixcbiAgICAgICAgaW46IGluXyxcbiAgICAgICAgb3V0OiBvdXQsXG4gICAgICAgIHRyYW5zZm9ybTogcGFyYW1zLmRlY29kZSxcbiAgICAgICAgcmV2ZXJzZVRyYW5zZm9ybTogcGFyYW1zLmVuY29kZSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBab2RSZWFkb25seSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RSZWFkb25seVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kUmVhZG9ubHkuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wcm9jZXNzSlNPTlNjaGVtYSA9IChjdHgsIGpzb24sIHBhcmFtcykgPT4gcHJvY2Vzc29ycy5yZWFkb25seVByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG4gICAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0Ll96b2QuZGVmLmlubmVyVHlwZTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHJlYWRvbmx5KGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgWm9kUmVhZG9ubHkoe1xuICAgICAgICB0eXBlOiBcInJlYWRvbmx5XCIsXG4gICAgICAgIGlubmVyVHlwZTogaW5uZXJUeXBlLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZFRlbXBsYXRlTGl0ZXJhbCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RUZW1wbGF0ZUxpdGVyYWxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZFRlbXBsYXRlTGl0ZXJhbC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLnRlbXBsYXRlTGl0ZXJhbFByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZUxpdGVyYWwocGFydHMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kVGVtcGxhdGVMaXRlcmFsKHtcbiAgICAgICAgdHlwZTogXCJ0ZW1wbGF0ZV9saXRlcmFsXCIsXG4gICAgICAgIHBhcnRzLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZExhenkgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kTGF6eVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kTGF6eS5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLmxhenlQcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xuICAgIGluc3QudW53cmFwID0gKCkgPT4gaW5zdC5fem9kLmRlZi5nZXR0ZXIoKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGxhenkoZ2V0dGVyKSB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgdHlwZTogXCJsYXp5XCIsXG4gICAgICAgIGdldHRlcjogZ2V0dGVyLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZFByb21pc2UgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kUHJvbWlzZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kUHJvbWlzZS5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLnByb21pc2VQcm9jZXNzb3IoaW5zdCwgY3R4LCBqc29uLCBwYXJhbXMpO1xuICAgIGluc3QudW53cmFwID0gKCkgPT4gaW5zdC5fem9kLmRlZi5pbm5lclR5cGU7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBwcm9taXNlKGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IFwicHJvbWlzZVwiLFxuICAgICAgICBpbm5lclR5cGU6IGlubmVyVHlwZSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBab2RGdW5jdGlvbiA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RGdW5jdGlvblwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kRnVuY3Rpb24uaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wcm9jZXNzSlNPTlNjaGVtYSA9IChjdHgsIGpzb24sIHBhcmFtcykgPT4gcHJvY2Vzc29ycy5mdW5jdGlvblByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBfZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgaW5wdXQ6IEFycmF5LmlzQXJyYXkocGFyYW1zPy5pbnB1dCkgPyB0dXBsZShwYXJhbXM/LmlucHV0KSA6IChwYXJhbXM/LmlucHV0ID8/IGFycmF5KHVua25vd24oKSkpLFxuICAgICAgICBvdXRwdXQ6IHBhcmFtcz8ub3V0cHV0ID8/IHVua25vd24oKSxcbiAgICB9KTtcbn1cbmV4cG9ydCB7IF9mdW5jdGlvbiBhcyBmdW5jdGlvbiB9O1xuZXhwb3J0IGNvbnN0IFpvZEN1c3RvbSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RDdXN0b21cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZEN1c3RvbS5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnByb2Nlc3NKU09OU2NoZW1hID0gKGN0eCwganNvbiwgcGFyYW1zKSA9PiBwcm9jZXNzb3JzLmN1c3RvbVByb2Nlc3NvcihpbnN0LCBjdHgsIGpzb24sIHBhcmFtcyk7XG59KTtcbi8vIGN1c3RvbSBjaGVja3NcbmV4cG9ydCBmdW5jdGlvbiBjaGVjayhmbikge1xuICAgIGNvbnN0IGNoID0gbmV3IGNvcmUuJFpvZENoZWNrKHtcbiAgICAgICAgY2hlY2s6IFwiY3VzdG9tXCIsXG4gICAgICAgIC8vIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG4gICAgY2guX3pvZC5jaGVjayA9IGZuO1xuICAgIHJldHVybiBjaDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjdXN0b20oZm4sIF9wYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fY3VzdG9tKFpvZEN1c3RvbSwgZm4gPz8gKCgpID0+IHRydWUpLCBfcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWZpbmUoZm4sIF9wYXJhbXMgPSB7fSkge1xuICAgIHJldHVybiBjb3JlLl9yZWZpbmUoWm9kQ3VzdG9tLCBmbiwgX3BhcmFtcyk7XG59XG4vLyBzdXBlclJlZmluZVxuZXhwb3J0IGZ1bmN0aW9uIHN1cGVyUmVmaW5lKGZuKSB7XG4gICAgcmV0dXJuIGNvcmUuX3N1cGVyUmVmaW5lKGZuKTtcbn1cbi8vIFJlLWV4cG9ydCBkZXNjcmliZSBhbmQgbWV0YSBmcm9tIGNvcmVcbmV4cG9ydCBjb25zdCBkZXNjcmliZSA9IGNvcmUuZGVzY3JpYmU7XG5leHBvcnQgY29uc3QgbWV0YSA9IGNvcmUubWV0YTtcbmZ1bmN0aW9uIF9pbnN0YW5jZW9mKGNscywgcGFyYW1zID0ge30pIHtcbiAgICBjb25zdCBpbnN0ID0gbmV3IFpvZEN1c3RvbSh7XG4gICAgICAgIHR5cGU6IFwiY3VzdG9tXCIsXG4gICAgICAgIGNoZWNrOiBcImN1c3RvbVwiLFxuICAgICAgICBmbjogKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsXG4gICAgICAgIGFib3J0OiB0cnVlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xuICAgIGluc3QuX3pvZC5iYWcuQ2xhc3MgPSBjbHM7XG4gICAgLy8gT3ZlcnJpZGUgY2hlY2sgdG8gZW1pdCBpbnZhbGlkX3R5cGUgaW5zdGVhZCBvZiBjdXN0b21cbiAgICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICBpZiAoIShwYXlsb2FkLnZhbHVlIGluc3RhbmNlb2YgY2xzKSkge1xuICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3R5cGVcIixcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogY2xzLm5hbWUsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICBwYXRoOiBbLi4uKGluc3QuX3pvZC5kZWYucGF0aCA/PyBbXSldLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBpbnN0O1xufVxuZXhwb3J0IHsgX2luc3RhbmNlb2YgYXMgaW5zdGFuY2VvZiB9O1xuLy8gc3RyaW5nYm9vbFxuZXhwb3J0IGNvbnN0IHN0cmluZ2Jvb2wgPSAoLi4uYXJncykgPT4gY29yZS5fc3RyaW5nYm9vbCh7XG4gICAgQ29kZWM6IFpvZENvZGVjLFxuICAgIEJvb2xlYW46IFpvZEJvb2xlYW4sXG4gICAgU3RyaW5nOiBab2RTdHJpbmcsXG59LCAuLi5hcmdzKTtcbmV4cG9ydCBmdW5jdGlvbiBqc29uKHBhcmFtcykge1xuICAgIGNvbnN0IGpzb25TY2hlbWEgPSBsYXp5KCgpID0+IHtcbiAgICAgICAgcmV0dXJuIHVuaW9uKFtzdHJpbmcocGFyYW1zKSwgbnVtYmVyKCksIGJvb2xlYW4oKSwgX251bGwoKSwgYXJyYXkoanNvblNjaGVtYSksIHJlY29yZChzdHJpbmcoKSwganNvblNjaGVtYSldKTtcbiAgICB9KTtcbiAgICByZXR1cm4ganNvblNjaGVtYTtcbn1cbi8vIHByZXByb2Nlc3Ncbi8vIC8qKiBAZGVwcmVjYXRlZCBVc2UgYHoucGlwZSgpYCBhbmQgYHoudHJhbnNmb3JtKClgIGluc3RlYWQuICovXG5leHBvcnQgZnVuY3Rpb24gcHJlcHJvY2Vzcyhmbiwgc2NoZW1hKSB7XG4gICAgcmV0dXJuIHBpcGUodHJhbnNmb3JtKGZuKSwgc2NoZW1hKTtcbn1cbiIsImltcG9ydCB7IHRvb2wgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgTUNQU2VydmVyU3RkaW8gYXMgVW5kZXJseWluZ01DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCBhcyBVbmRlcmx5aW5nTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAsIE1DUFNlcnZlclNTRSBhcyBVbmRlcmx5aW5nTUNQU2VydmVyU1NFLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCBnZXRDdXJyZW50VHJhY2UsIHdpdGhNQ1BMaXN0VG9vbHNTcGFuLCB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBsb2dnZXIgYXMgZ2xvYmFsTG9nZ2VyLCBnZXRMb2dnZXIgfSBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9TVERJT19NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FID0gJ29wZW5haS1hZ2VudHM6c3RkaW8tbWNwLWNsaWVudCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9TVFJFQU1BQkxFX0hUVFBfTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSA9ICdvcGVuYWktYWdlbnRzOnN0cmVhbWFibGUtaHR0cC1tY3AtY2xpZW50JztcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NTRV9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FID0gJ29wZW5haS1hZ2VudHM6c3NlLW1jcC1jbGllbnQnO1xuZXhwb3J0IGNsYXNzIEJhc2VNQ1BTZXJ2ZXJTdGRpbyB7XG4gICAgY2FjaGVUb29sc0xpc3Q7XG4gICAgX2NhY2hlZFRvb2xzID0gdW5kZWZpbmVkO1xuICAgIHRvb2xGaWx0ZXI7XG4gICAgbG9nZ2VyO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIgPVxuICAgICAgICAgICAgb3B0aW9ucy5sb2dnZXIgPz8gZ2V0TG9nZ2VyKERFRkFVTFRfU1RESU9fTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSk7XG4gICAgICAgIHRoaXMuY2FjaGVUb29sc0xpc3QgPSBvcHRpb25zLmNhY2hlVG9vbHNMaXN0ID8/IGZhbHNlO1xuICAgICAgICB0aGlzLnRvb2xGaWx0ZXIgPSBvcHRpb25zLnRvb2xGaWx0ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvZ3MgYSBkZWJ1ZyBtZXNzYWdlIHdoZW4gZGVidWcgbG9nZ2luZyBpcyBlbmFibGVkLlxuICAgICAqIEBwYXJhbSBidWlsZE1lc3NhZ2UgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqL1xuICAgIGRlYnVnTG9nKGJ1aWxkTWVzc2FnZSkge1xuICAgICAgICBpZiAoZGVidWcuZW5hYmxlZCh0aGlzLmxvZ2dlci5uYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAvLyBvbmx5IHdoZW4gdGhpcyBpcyB0cnVlLCB0aGUgZnVuY3Rpb24gdG8gYnVpbGQgdGhlIHN0cmluZyBpcyBjYWxsZWRcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGJ1aWxkTWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCYXNlTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAge1xuICAgIGNhY2hlVG9vbHNMaXN0O1xuICAgIF9jYWNoZWRUb29scyA9IHVuZGVmaW5lZDtcbiAgICB0b29sRmlsdGVyO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/XG4gICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKERFRkFVTFRfU1RSRUFNQUJMRV9IVFRQX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy50b29sRmlsdGVyID0gb3B0aW9ucy50b29sRmlsdGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZSB3aGVuIGRlYnVnIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiBAcGFyYW0gYnVpbGRNZXNzYWdlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKi9cbiAgICBkZWJ1Z0xvZyhidWlsZE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGRlYnVnLmVuYWJsZWQodGhpcy5sb2dnZXIubmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoaXMgaXMgdHJ1ZSwgdGhlIGZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBzdHJpbmcgaXMgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhidWlsZE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmFzZU1DUFNlcnZlclNTRSB7XG4gICAgY2FjaGVUb29sc0xpc3Q7XG4gICAgX2NhY2hlZFRvb2xzID0gdW5kZWZpbmVkO1xuICAgIHRvb2xGaWx0ZXI7XG4gICAgbG9nZ2VyO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIgPVxuICAgICAgICAgICAgb3B0aW9ucy5sb2dnZXIgPz8gZ2V0TG9nZ2VyKERFRkFVTFRfU1NFX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy50b29sRmlsdGVyID0gb3B0aW9ucy50b29sRmlsdGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZSB3aGVuIGRlYnVnIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiBAcGFyYW0gYnVpbGRNZXNzYWdlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKi9cbiAgICBkZWJ1Z0xvZyhidWlsZE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGRlYnVnLmVuYWJsZWQodGhpcy5sb2dnZXIubmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoaXMgaXMgdHJ1ZSwgdGhlIGZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBzdHJpbmcgaXMgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhidWlsZE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIE1pbmltdW0gTUNQIHRvb2wgZGF0YSBkZWZpbml0aW9uLlxuICogVGhpcyB0eXBlIGRlZmluaXRpb24gZG9lcyBub3QgaW50ZW5kIHRvIGNvdmVyIGFsbCBwb3NzaWJsZSBwcm9wZXJ0aWVzLlxuICogSXQgc3VwcG9ydHMgdGhlIHByb3BlcnRpZXMgdGhhdCBhcmUgdXNlZCBpbiB0aGlzIFNESy5cbiAqL1xuZXhwb3J0IGNvbnN0IE1DUFRvb2wgPSB6Lm9iamVjdCh7XG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGlucHV0U2NoZW1hOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb2JqZWN0JyksXG4gICAgICAgIHByb3BlcnRpZXM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgICAgICByZXF1aXJlZDogei5hcnJheSh6LnN0cmluZygpKSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHouYm9vbGVhbigpLFxuICAgIH0pLFxufSk7XG4vKipcbiAqIFB1YmxpYyBpbnRlcmZhY2Ugb2YgYW4gTUNQIHNlcnZlciB0aGF0IHByb3ZpZGVzIHRvb2xzLlxuICogWW91IGNhbiB1c2UgdGhpcyBjbGFzcyB0byBwYXNzIE1DUCBzZXJ2ZXIgc2V0dGluZ3MgdG8geW91ciBhZ2VudC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1DUFNlcnZlclN0ZGlvIGV4dGVuZHMgQmFzZU1DUFNlcnZlclN0ZGlvIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU3RkaW8ob3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLm5hbWU7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY29ubmVjdCgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0ICYmIHRoaXMuX2NhY2hlZFRvb2xzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCB0aGlzLnVuZGVybHlpbmcubGlzdFRvb2xzKCk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb29scyA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jYWxsVG9vbCh0b29sTmFtZSwgYXJncyk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb29sc0NhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmludmFsaWRhdGVUb29sc0NhY2hlKCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1DUFNlcnZlclN0cmVhbWFibGVIdHRwIGV4dGVuZHMgQmFzZU1DUFNlcnZlclN0cmVhbWFibGVIdHRwIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAob3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLm5hbWU7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY29ubmVjdCgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0ICYmIHRoaXMuX2NhY2hlZFRvb2xzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCB0aGlzLnVuZGVybHlpbmcubGlzdFRvb2xzKCk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb29scyA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jYWxsVG9vbCh0b29sTmFtZSwgYXJncyk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb29sc0NhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmludmFsaWRhdGVUb29sc0NhY2hlKCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1DUFNlcnZlclNTRSBleHRlbmRzIEJhc2VNQ1BTZXJ2ZXJTU0Uge1xuICAgIHVuZGVybHlpbmc7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy51bmRlcmx5aW5nID0gbmV3IFVuZGVybHlpbmdNQ1BTZXJ2ZXJTU0Uob3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLm5hbWU7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY29ubmVjdCgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0ICYmIHRoaXMuX2NhY2hlZFRvb2xzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCB0aGlzLnVuZGVybHlpbmcubGlzdFRvb2xzKCk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb29scyA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jYWxsVG9vbCh0b29sTmFtZSwgYXJncyk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb29sc0NhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmludmFsaWRhdGVUb29sc0NhY2hlKCk7XG4gICAgfVxufVxuLyoqXG4gKiBGZXRjaGVzIGFuZCBmbGF0dGVucyBhbGwgdG9vbHMgZnJvbSBtdWx0aXBsZSBNQ1Agc2VydmVycy5cbiAqIExvZ3MgYW5kIHNraXBzIGFueSBzZXJ2ZXJzIHRoYXQgZmFpbCB0byByZXNwb25kLlxuICovXG5jb25zdCBfY2FjaGVkVG9vbHMgPSB7fTtcbmNvbnN0IF9jYWNoZWRUb29sS2V5c0J5U2VydmVyID0ge307XG4vKipcbiAqIFJlbW92ZSBjYWNoZWQgdG9vbHMgZm9yIHRoZSBnaXZlbiBzZXJ2ZXIgc28gdGhlIG5leHQgbG9va3VwIGZldGNoZXMgZnJlc2ggZGF0YS5cbiAqXG4gKiBAcGFyYW0gc2VydmVyTmFtZSAtIE5hbWUgb2YgdGhlIE1DUCBzZXJ2ZXIgd2hvc2UgY2FjaGUgc2hvdWxkIGJlIGNsZWFyZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnZhbGlkYXRlU2VydmVyVG9vbHNDYWNoZShzZXJ2ZXJOYW1lKSB7XG4gICAgY29uc3QgY2FjaGVkS2V5cyA9IF9jYWNoZWRUb29sS2V5c0J5U2VydmVyW3NlcnZlck5hbWVdO1xuICAgIGlmIChjYWNoZWRLZXlzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2FjaGVLZXkgb2YgY2FjaGVkS2V5cykge1xuICAgICAgICAgICAgZGVsZXRlIF9jYWNoZWRUb29sc1tjYWNoZUtleV07XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIF9jYWNoZWRUb29sS2V5c0J5U2VydmVyW3NlcnZlck5hbWVdO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRlbGV0ZSBfY2FjaGVkVG9vbHNbc2VydmVyTmFtZV07XG4gICAgZm9yIChjb25zdCBjYWNoZUtleSBvZiBPYmplY3Qua2V5cyhfY2FjaGVkVG9vbHMpKSB7XG4gICAgICAgIGlmIChjYWNoZUtleS5zdGFydHNXaXRoKGAke3NlcnZlck5hbWV9OmApKSB7XG4gICAgICAgICAgICBkZWxldGUgX2NhY2hlZFRvb2xzW2NhY2hlS2V5XTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogRGVmYXVsdCBjYWNoZSBrZXkgZ2VuZXJhdG9yIGZvciBNQ1AgdG9vbHMuXG4gKiBVc2VzIHNlcnZlciBuYW1lLCBvciBzZXJ2ZXIrYWdlbnQgaWYgdXNpbmcgY2FsbGFibGUgZmlsdGVyLlxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdE1DUFRvb2xDYWNoZUtleSA9ICh7IHNlcnZlciwgYWdlbnQsIH0pID0+IHtcbiAgICBpZiAoc2VydmVyLnRvb2xGaWx0ZXIgJiYgdHlwZW9mIHNlcnZlci50b29sRmlsdGVyID09PSAnZnVuY3Rpb24nICYmIGFnZW50KSB7XG4gICAgICAgIHJldHVybiBgJHtzZXJ2ZXIubmFtZX06JHthZ2VudC5uYW1lfWA7XG4gICAgfVxuICAgIHJldHVybiBzZXJ2ZXIubmFtZTtcbn07XG4vKipcbiAqIEZldGNoZXMgYWxsIGZ1bmN0aW9uIHRvb2xzIGZyb20gYSBzaW5nbGUgTUNQIHNlcnZlci5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0RnVuY3Rpb25Ub29sc0Zyb21TZXJ2ZXIoeyBzZXJ2ZXIsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QsIHJ1bkNvbnRleHQsIGFnZW50LCBnZW5lcmF0ZU1DUFRvb2xDYWNoZUtleSwgfSkge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gKGdlbmVyYXRlTUNQVG9vbENhY2hlS2V5IHx8IGRlZmF1bHRNQ1BUb29sQ2FjaGVLZXkpKHtcbiAgICAgICAgc2VydmVyLFxuICAgICAgICBhZ2VudCxcbiAgICAgICAgcnVuQ29udGV4dCxcbiAgICB9KTtcbiAgICAvLyBVc2UgY2FjaGUga2V5IGdlbmVyYXRvciBpbmplY3RlZCBmcm9tIHRoZSBvdXRzaWRlLCBvciB0aGUgZGVmYXVsdCBpZiBhYnNlbnQuXG4gICAgaWYgKHNlcnZlci5jYWNoZVRvb2xzTGlzdCAmJiBfY2FjaGVkVG9vbHNbY2FjaGVLZXldKSB7XG4gICAgICAgIHJldHVybiBfY2FjaGVkVG9vbHNbY2FjaGVLZXldLm1hcCgodCkgPT4gbWNwVG9GdW5jdGlvblRvb2wodCwgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KSk7XG4gICAgfVxuICAgIGNvbnN0IGxpc3RUb29sc0ZvclNlcnZlciA9IGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgIGNvbnN0IGZldGNoZWRNY3BUb29scyA9IGF3YWl0IHNlcnZlci5saXN0VG9vbHMoKTtcbiAgICAgICAgbGV0IG1jcFRvb2xzID0gZmV0Y2hlZE1jcFRvb2xzO1xuICAgICAgICBpZiAocnVuQ29udGV4dCAmJiBhZ2VudCkge1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHsgcnVuQ29udGV4dCwgYWdlbnQsIHNlcnZlck5hbWU6IHNlcnZlci5uYW1lIH07XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFRvb2xzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRvb2wgb2YgZmV0Y2hlZE1jcFRvb2xzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyID0gc2VydmVyLnRvb2xGaWx0ZXI7XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBhd2FpdCBmaWx0ZXIoY29udGV4dCwgdG9vbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsTG9nZ2VyLmRlYnVnKGBNQ1AgVG9vbCAoc2VydmVyOiAke3NlcnZlci5uYW1lfSwgdG9vbDogJHt0b29sLm5hbWV9KSBpcyBibG9ja2VkIGJ5IHRoZSBjYWxsYWJsZSBmaWx0ZXIuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxvd2VkVG9vbE5hbWVzID0gZmlsdGVyLmFsbG93ZWRUb29sTmFtZXMgPz8gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9ja2VkVG9vbE5hbWVzID0gZmlsdGVyLmJsb2NrZWRUb29sTmFtZXMgPz8gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWxsb3dlZFRvb2xOYW1lcy5sZW5ndGggPiAwIHx8IGJsb2NrZWRUb29sTmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbG93ZWQgPSBhbGxvd2VkVG9vbE5hbWVzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhbGxvd2VkVG9vbE5hbWVzLmluY2x1ZGVzKHRvb2wubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrZWQgPSBibG9ja2VkVG9vbE5hbWVzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBibG9ja2VkVG9vbE5hbWVzLmluY2x1ZGVzKHRvb2wubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFsbG93ZWQgfHwgYmxvY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsTG9nZ2VyLmRlYnVnKGBNQ1AgVG9vbCAoc2VydmVyOiAke3NlcnZlci5uYW1lfSwgdG9vbDogJHt0b29sLm5hbWV9KSBpcyBibG9ja2VkIGJ5IHRoZSBzdGF0aWMgZmlsdGVyLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFhbGxvd2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxMb2dnZXIuZGVidWcoYE1DUCBUb29sIChzZXJ2ZXI6ICR7c2VydmVyLm5hbWV9LCB0b29sOiAke3Rvb2wubmFtZX0pIGlzIG5vdCBhbGxvd2VkIGJ5IHRoZSBzdGF0aWMgZmlsdGVyLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaWx0ZXJlZFRvb2xzLnB1c2godG9vbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtY3BUb29scyA9IGZpbHRlcmVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNwYW4pIHtcbiAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEucmVzdWx0ID0gbWNwVG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gbWNwVG9vbHMubWFwKCh0KSA9PiBtY3BUb0Z1bmN0aW9uVG9vbCh0LCBzZXJ2ZXIsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpKTtcbiAgICAgICAgLy8gQ2FjaGUgc3RvcmVcbiAgICAgICAgaWYgKHNlcnZlci5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgX2NhY2hlZFRvb2xzW2NhY2hlS2V5XSA9IG1jcFRvb2xzO1xuICAgICAgICAgICAgaWYgKCFfY2FjaGVkVG9vbEtleXNCeVNlcnZlcltzZXJ2ZXIubmFtZV0pIHtcbiAgICAgICAgICAgICAgICBfY2FjaGVkVG9vbEtleXNCeVNlcnZlcltzZXJ2ZXIubmFtZV0gPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfY2FjaGVkVG9vbEtleXNCeVNlcnZlcltzZXJ2ZXIubmFtZV0uYWRkKGNhY2hlS2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfTtcbiAgICBpZiAoIWdldEN1cnJlbnRUcmFjZSgpKSB7XG4gICAgICAgIHJldHVybiBsaXN0VG9vbHNGb3JTZXJ2ZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIHdpdGhNQ1BMaXN0VG9vbHNTcGFuKGxpc3RUb29sc0ZvclNlcnZlciwge1xuICAgICAgICBkYXRhOiB7IHNlcnZlcjogc2VydmVyLm5hbWUgfSxcbiAgICB9KTtcbn1cbi8qKlxuICogUmV0dXJucyBhbGwgTUNQIHRvb2xzIGZyb20gdGhlIHByb3ZpZGVkIHNlcnZlcnMsIHVzaW5nIHRoZSBmdW5jdGlvbiB0b29sIGNvbnZlcnNpb24uXG4gKiBJZiBydW5Db250ZXh0IGFuZCBhZ2VudCBhcmUgcHJvdmlkZWQsIGNhbGxhYmxlIHRvb2wgZmlsdGVycyB3aWxsIGJlIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxNY3BUb29scyhtY3BTZXJ2ZXJzT3JPcHRzLCBydW5Db250ZXh0LCBhZ2VudCwgY29udmVydFNjaGVtYXNUb1N0cmljdCA9IGZhbHNlKSB7XG4gICAgY29uc3Qgb3B0cyA9IEFycmF5LmlzQXJyYXkobWNwU2VydmVyc09yT3B0cylcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBtY3BTZXJ2ZXJzOiBtY3BTZXJ2ZXJzT3JPcHRzLFxuICAgICAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgICAgIGFnZW50LFxuICAgICAgICAgICAgY29udmVydFNjaGVtYXNUb1N0cmljdCxcbiAgICAgICAgfVxuICAgICAgICA6IG1jcFNlcnZlcnNPck9wdHM7XG4gICAgY29uc3QgeyBtY3BTZXJ2ZXJzLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0OiBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0RnJvbU9wdHMgPSBmYWxzZSwgcnVuQ29udGV4dDogcnVuQ29udGV4dEZyb21PcHRzLCBhZ2VudDogYWdlbnRGcm9tT3B0cywgZ2VuZXJhdGVNQ1BUb29sQ2FjaGVLZXksIH0gPSBvcHRzO1xuICAgIGNvbnN0IGFsbFRvb2xzID0gW107XG4gICAgY29uc3QgdG9vbE5hbWVzID0gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3Qgc2VydmVyIG9mIG1jcFNlcnZlcnMpIHtcbiAgICAgICAgY29uc3Qgc2VydmVyVG9vbHMgPSBhd2FpdCBnZXRGdW5jdGlvblRvb2xzRnJvbVNlcnZlcih7XG4gICAgICAgICAgICBzZXJ2ZXIsXG4gICAgICAgICAgICBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0OiBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0RnJvbU9wdHMsXG4gICAgICAgICAgICBydW5Db250ZXh0OiBydW5Db250ZXh0RnJvbU9wdHMsXG4gICAgICAgICAgICBhZ2VudDogYWdlbnRGcm9tT3B0cyxcbiAgICAgICAgICAgIGdlbmVyYXRlTUNQVG9vbENhY2hlS2V5LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc2VydmVyVG9vbE5hbWVzID0gbmV3IFNldChzZXJ2ZXJUb29scy5tYXAoKHQpID0+IHQubmFtZSkpO1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb24gPSBbLi4uc2VydmVyVG9vbE5hbWVzXS5maWx0ZXIoKG4pID0+IHRvb2xOYW1lcy5oYXMobikpO1xuICAgICAgICBpZiAoaW50ZXJzZWN0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYER1cGxpY2F0ZSB0b29sIG5hbWVzIGZvdW5kIGFjcm9zcyBNQ1Agc2VydmVyczogJHtpbnRlcnNlY3Rpb24uam9pbignLCAnKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygc2VydmVyVG9vbHMpIHtcbiAgICAgICAgICAgIHRvb2xOYW1lcy5hZGQodC5uYW1lKTtcbiAgICAgICAgICAgIGFsbFRvb2xzLnB1c2godCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFsbFRvb2xzO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhbiBNQ1AgdG9vbCBkZWZpbml0aW9uIHRvIGEgZnVuY3Rpb24gdG9vbCBmb3IgdGhlIEFnZW50cyBTREsuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtY3BUb0Z1bmN0aW9uVG9vbChtY3BUb29sLCBzZXJ2ZXIsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpIHtcbiAgICBhc3luYyBmdW5jdGlvbiBpbnZva2UoaW5wdXQsIF9jb250ZXh0KSB7XG4gICAgICAgIGxldCBhcmdzID0ge307XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnICYmIGlucHV0KSB7XG4gICAgICAgICAgICBhcmdzID0gSlNPTi5wYXJzZShpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyAmJiBpbnB1dCAhPSBudWxsKSB7XG4gICAgICAgICAgICBhcmdzID0gaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgICAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgICAgIGN1cnJlbnRTcGFuLnNwYW5EYXRhWydtY3BfZGF0YSddID0geyBzZXJ2ZXI6IHNlcnZlci5uYW1lIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHNlcnZlci5jYWxsVG9vbChtY3BUb29sLm5hbWUsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gY29udGVudC5sZW5ndGggPT09IDEgPyBjb250ZW50WzBdIDogY29udGVudDtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hID0ge1xuICAgICAgICAuLi5tY3BUb29sLmlucHV0U2NoZW1hLFxuICAgICAgICB0eXBlOiBtY3BUb29sLmlucHV0U2NoZW1hPy50eXBlID8/ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiBtY3BUb29sLmlucHV0U2NoZW1hPy5wcm9wZXJ0aWVzID8/IHt9LFxuICAgICAgICByZXF1aXJlZDogbWNwVG9vbC5pbnB1dFNjaGVtYT8ucmVxdWlyZWQgPz8gW10sXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBtY3BUb29sLmlucHV0U2NoZW1hPy5hZGRpdGlvbmFsUHJvcGVydGllcyA/PyBmYWxzZSxcbiAgICB9O1xuICAgIGlmIChjb252ZXJ0U2NoZW1hc1RvU3RyaWN0IHx8IHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gdHJ1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RyaWN0U2NoZW1hID0gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShzY2hlbWEpO1xuICAgICAgICAgICAgcmV0dXJuIHRvb2woe1xuICAgICAgICAgICAgICAgIG5hbWU6IG1jcFRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbWNwVG9vbC5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiBzdHJpY3RTY2hlbWEsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGU6IGludm9rZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBnbG9iYWxMb2dnZXIud2FybihgRXJyb3IgY29udmVydGluZyBNQ1Agc2NoZW1hIHRvIHN0cmljdCBtb2RlOiAke2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgbm9uU3RyaWN0U2NoZW1hID0ge1xuICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlLFxuICAgIH07XG4gICAgcmV0dXJuIHRvb2woe1xuICAgICAgICBuYW1lOiBtY3BUb29sLm5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBtY3BUb29sLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBwYXJhbWV0ZXJzOiBub25TdHJpY3RTY2hlbWEsXG4gICAgICAgIHN0cmljdDogZmFsc2UsXG4gICAgICAgIGV4ZWN1dGU6IGludm9rZSxcbiAgICB9KTtcbn1cbi8qKlxuICogRW5zdXJlcyB0aGUgZ2l2ZW4gSlNPTiBzY2hlbWEgaXMgc3RyaWN0IChubyBhZGRpdGlvbmFsIHByb3BlcnRpZXMsIHJlcXVpcmVkIGZpZWxkcyBzZXQpLlxuICovXG5mdW5jdGlvbiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHNjaGVtYSkge1xuICAgIGNvbnN0IG91dCA9IHtcbiAgICAgICAgLi4uc2NoZW1hLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG4gICAgfTtcbiAgICBpZiAoIW91dC5yZXF1aXJlZClcbiAgICAgICAgb3V0LnJlcXVpcmVkID0gW107XG4gICAgcmV0dXJuIG91dDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1jcC5tanMubWFwIiwiLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbi8vIFVzZSBmdW5jdGlvbiBpbnN0ZWFkIG9mIGV4cG9ydGluZyB0aGUgdmFsdWUgdG8gcHJldmVudFxuLy8gY2lyY3VsYXIgZGVwZW5kZW5jeSByZXNvbHV0aW9uIGlzc3VlcyBjYXVzZWQgYnkgb3RoZXIgZXhwb3J0cyBpbiAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnXG5leHBvcnQgZnVuY3Rpb24gbG9hZEVudigpIHtcbiAgICByZXR1cm4ge307XG59XG5leHBvcnQgY2xhc3MgQnJvd3NlckV2ZW50RW1pdHRlciB7XG4gICAgI3RhcmdldCA9IG5ldyBFdmVudFRhcmdldCgpO1xuICAgICNsaXN0ZW5lcldyYXBwZXJzID0gbmV3IE1hcCgpO1xuICAgIG9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50VHlwZSA9IHR5cGU7XG4gICAgICAgIGxldCBsaXN0ZW5lcnNGb3JUeXBlID0gdGhpcy4jbGlzdGVuZXJXcmFwcGVycy5nZXQoZXZlbnRUeXBlKTtcbiAgICAgICAgaWYgKCFsaXN0ZW5lcnNGb3JUeXBlKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNGb3JUeXBlID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy4jbGlzdGVuZXJXcmFwcGVycy5zZXQoZXZlbnRUeXBlLCBsaXN0ZW5lcnNGb3JUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgd3JhcHBlcnMgPSBsaXN0ZW5lcnNGb3JUeXBlLmdldChsaXN0ZW5lcik7XG4gICAgICAgIGlmICghd3JhcHBlcnMpIHtcbiAgICAgICAgICAgIHdyYXBwZXJzID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgbGlzdGVuZXJzRm9yVHlwZS5zZXQobGlzdGVuZXIsIHdyYXBwZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cmFwcGVyID0gKChldmVudCkgPT4gbGlzdGVuZXIoLi4uKGV2ZW50LmRldGFpbCA/PyBbXSkpKTtcbiAgICAgICAgd3JhcHBlcnMuYWRkKHdyYXBwZXIpO1xuICAgICAgICB0aGlzLiN0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIHdyYXBwZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgb2ZmKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50VHlwZSA9IHR5cGU7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVyc0ZvclR5cGUgPSB0aGlzLiNsaXN0ZW5lcldyYXBwZXJzLmdldChldmVudFR5cGUpO1xuICAgICAgICBjb25zdCB3cmFwcGVycyA9IGxpc3RlbmVyc0ZvclR5cGU/LmdldChsaXN0ZW5lcik7XG4gICAgICAgIGlmICh3cmFwcGVycz8uc2l6ZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB3cmFwcGVyIG9mIHdyYXBwZXJzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCB3cmFwcGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpc3RlbmVyc0ZvclR5cGU/LmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgICAgICAgICBpZiAobGlzdGVuZXJzRm9yVHlwZT8uc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2xpc3RlbmVyV3JhcHBlcnMuZGVsZXRlKGV2ZW50VHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGVtaXQodHlwZSwgLi4uYXJncykge1xuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCh0eXBlLCB7IGRldGFpbDogYXJncyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RhcmdldC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIHRoaXMub2ZmKHR5cGUsIGhhbmRsZXIpO1xuICAgICAgICAgICAgbGlzdGVuZXIoLi4uYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub24odHlwZSwgaGFuZGxlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbmV4cG9ydCB7IEJyb3dzZXJFdmVudEVtaXR0ZXIgYXMgUnVudGltZUV2ZW50RW1pdHRlciB9O1xuZXhwb3J0IGNvbnN0IHJhbmRvbVVVSUQgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5yYW5kb21VVUlEKSB7XG4gICAgICAgIHJldHVybiBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgIH1cbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xuICAgICAgICBjb25zdCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwO1xuICAgICAgICBjb25zdCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcbiAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBSZWFkYWJsZSA9IGNsYXNzIFJlYWRhYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHBpcGVUbyhfZGVzdGluYXRpb24sIF9vcHRpb25zKSB7IH1cbiAgICBwaXBlVGhyb3VnaChfdHJhbnNmb3JtLCBfb3B0aW9ucykgeyB9XG59O1xuZXhwb3J0IGNvbnN0IFJlYWRhYmxlU3RyZWFtID0gZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbTtcbmV4cG9ydCBjb25zdCBSZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIgPSBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI7XG5leHBvcnQgY29uc3QgVHJhbnNmb3JtU3RyZWFtID0gZ2xvYmFsVGhpcy5UcmFuc2Zvcm1TdHJlYW07XG5leHBvcnQgY2xhc3MgQXN5bmNMb2NhbFN0b3JhZ2Uge1xuICAgIGNvbnRleHQgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgcnVuKGNvbnRleHQsIGZuKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgIH1cbiAgICBnZXRTdG9yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dDtcbiAgICB9XG4gICAgZW50ZXJXaXRoKGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyRW52aXJvbm1lbnQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IHsgTUNQU2VydmVyU3RkaW8sIE1DUFNlcnZlclN0cmVhbWFibGVIdHRwLCBNQ1BTZXJ2ZXJTU0UsIH0gZnJvbSBcIi4vbWNwLXNlcnZlci9icm93c2VyLm1qc1wiO1xuY2xhc3MgQnJvd3NlclRpbWVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIG1zKSB7XG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCBtcyk7XG4gICAgICAgIHRpbWVvdXQucmVmID1cbiAgICAgICAgICAgIHR5cGVvZiB0aW1lb3V0LnJlZiA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQucmVmIDogKCkgPT4gdGltZW91dDtcbiAgICAgICAgdGltZW91dC51bnJlZiA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC51bnJlZiA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQudW5yZWYgOiAoKSA9PiB0aW1lb3V0O1xuICAgICAgICB0aW1lb3V0Lmhhc1JlZiA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC5oYXNSZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0Lmhhc1JlZiA6ICgpID0+IHRydWU7XG4gICAgICAgIHRpbWVvdXQucmVmcmVzaCA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC5yZWZyZXNoID09PSAnZnVuY3Rpb24nID8gdGltZW91dC5yZWZyZXNoIDogKCkgPT4gdGltZW91dDtcbiAgICAgICAgcmV0dXJuIHRpbWVvdXQ7XG4gICAgfVxuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpIHtcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIH1cbn1cbmNvbnN0IHRpbWVyID0gbmV3IEJyb3dzZXJUaW1lcigpO1xuZXhwb3J0IHsgdGltZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoaW1zLWJyb3dzZXIubWpzLm1hcCIsIi8qKlxuICogRW5jb2RlIGEgVWludDhBcnJheSBpbnRvIGEgYmFzZTY0IHN0cmluZyBpbiBib3RoIE5vZGUgYW5kIGJyb3dzZXIgZW52aXJvbm1lbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KGRhdGEpIHtcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBjb25zdCBnbG9iYWxCdWZmZXIgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsVGhpcy5CdWZmZXJcbiAgICAgICAgPyBnbG9iYWxUaGlzLkJ1ZmZlclxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAoZ2xvYmFsQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxCdWZmZXIuZnJvbShkYXRhKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gICAgfVxuICAgIGxldCBiaW5hcnkgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgYmluYXJ5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZGF0YVtpXSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZ2xvYmFsVGhpcy5idG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxUaGlzLmJ0b2EoYmluYXJ5KTtcbiAgICB9XG4gICAgY29uc3QgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0nO1xuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBiaW5hcnkubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGMxID0gYmluYXJ5LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgY29uc3QgYzIgPSBiaW5hcnkuY2hhckNvZGVBdChpKyspO1xuICAgICAgICBjb25zdCBjMyA9IGJpbmFyeS5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICAgIGNvbnN0IGVuYzEgPSBjMSA+PiAyO1xuICAgICAgICBjb25zdCBlbmMyID0gKChjMSAmIDB4MykgPDwgNCkgfCAoYzIgPj4gNCk7XG4gICAgICAgIGNvbnN0IGVuYzMgPSBpc05hTihjMikgPyA2NCA6ICgoYzIgJiAweGYpIDw8IDIpIHwgKGMzID4+IDYpO1xuICAgICAgICBjb25zdCBlbmM0ID0gaXNOYU4oYzMpID8gNjQgOiBjMyAmIDB4M2Y7XG4gICAgICAgIHJlc3VsdCArPVxuICAgICAgICAgICAgY2hhcnMuY2hhckF0KGVuYzEpICtcbiAgICAgICAgICAgICAgICBjaGFycy5jaGFyQXQoZW5jMikgK1xuICAgICAgICAgICAgICAgIGNoYXJzLmNoYXJBdChlbmMzKSArXG4gICAgICAgICAgICAgICAgY2hhcnMuY2hhckF0KGVuYzQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZTY0Lm1qcy5tYXAiLCJpbXBvcnQgeyBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQgfSBmcm9tIFwiLi9iYXNlNjQubWpzXCI7XG5pbXBvcnQgeyBpc0FycmF5QnVmZmVyVmlldywgaXNOb2RlQnVmZmVyLCBpc1NlcmlhbGl6ZWRCdWZmZXJTbmFwc2hvdCwgfSBmcm9tIFwiLi9zbWFydFN0cmluZy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVCaW5hcnkodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgX190eXBlOiAnQXJyYXlCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZhbHVlKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpc0FycmF5QnVmZmVyVmlldyh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgX190eXBlOiB2aWV3LmNvbnN0cnVjdG9yLm5hbWUsXG4gICAgICAgICAgICBkYXRhOiBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQobmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpc05vZGVCdWZmZXIodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogJ0J1ZmZlcicsXG4gICAgICAgICAgICBkYXRhOiBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQobmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpc1NlcmlhbGl6ZWRCdWZmZXJTbmFwc2hvdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogJ0J1ZmZlcicsXG4gICAgICAgICAgICBkYXRhOiBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQoVWludDhBcnJheS5mcm9tKHZhbHVlLmRhdGEpKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0b1VpbnQ4QXJyYXlGcm9tQmluYXJ5KHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJWaWV3KHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh2aWV3LmJ1ZmZlciwgdmlldy5ieXRlT2Zmc2V0LCB2aWV3LmJ5dGVMZW5ndGgpO1xuICAgIH1cbiAgICBpZiAoaXNOb2RlQnVmZmVyKHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh2aWV3LmJ1ZmZlciwgdmlldy5ieXRlT2Zmc2V0LCB2aWV3LmJ5dGVMZW5ndGgpO1xuICAgIH1cbiAgICBpZiAoaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LmZyb20odmFsdWUuZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5hcnkubWpzLm1hcCIsImltcG9ydCB7IHNlcmlhbGl6ZUJpbmFyeSB9IGZyb20gXCIuLi91dGlscy9iaW5hcnkubWpzXCI7XG4vLyBOb3JtYWxpemVzIHVzZXItcHJvdmlkZWQgaW5wdXQgaW50byB0aGUgc3RydWN0dXJlIHRoZSBtb2RlbCBleHBlY3RzLiBTdHJpbmdzIGJlY29tZSB1c2VyIG1lc3NhZ2VzLFxuLy8gYXJyYXlzIGFyZSBrZXB0IGFzLWlzIHNvIGRvd25zdHJlYW0gbG9vcHMgY2FuIHRyZWF0IGJvdGggc2NlbmFyaW9zIHVuaWZvcm1seS5cbmV4cG9ydCBmdW5jdGlvbiB0b0FnZW50SW5wdXRMaXN0KG9yaWdpbmFsSW5wdXQpIHtcbiAgICBpZiAodHlwZW9mIG9yaWdpbmFsSW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBbeyB0eXBlOiAnbWVzc2FnZScsIHJvbGU6ICd1c2VyJywgY29udGVudDogb3JpZ2luYWxJbnB1dCB9XTtcbiAgICB9XG4gICAgcmV0dXJuIFsuLi5vcmlnaW5hbElucHV0XTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRBZ2VudElucHV0SXRlbUtleShpdGVtKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGl0ZW0sIGFnZW50SW5wdXRTZXJpYWxpemF0aW9uUmVwbGFjZXIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQWdlbnRJbnB1dFBvb2woaXRlbXMpIHtcbiAgICBjb25zdCBwb29sID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRBZ2VudElucHV0SXRlbUtleShpdGVtKTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBwb29sLmdldChrZXkpO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nLnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwb29sLnNldChrZXksIFtpdGVtXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvb2w7XG59XG5leHBvcnQgZnVuY3Rpb24gdGFrZUFnZW50SW5wdXRGcm9tUG9vbChwb29sLCBrZXkpIHtcbiAgICBjb25zdCBjYW5kaWRhdGVzID0gcG9vbC5nZXQoa2V5KTtcbiAgICBpZiAoIWNhbmRpZGF0ZXMgfHwgY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgW2ZpcnN0XSA9IGNhbmRpZGF0ZXM7XG4gICAgY2FuZGlkYXRlcy5zaGlmdCgpO1xuICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwb29sLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gZmlyc3Q7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQWdlbnRJbnB1dEZyb21Qb29sKHBvb2wsIGl0ZW0pIHtcbiAgICBjb25zdCBrZXkgPSBnZXRBZ2VudElucHV0SXRlbUtleShpdGVtKTtcbiAgICBjb25zdCBjYW5kaWRhdGVzID0gcG9vbC5nZXQoa2V5KTtcbiAgICBpZiAoIWNhbmRpZGF0ZXMgfHwgY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IGNhbmRpZGF0ZXMuZmluZEluZGV4KChjYW5kaWRhdGUpID0+IGNhbmRpZGF0ZSA9PT0gaXRlbSk7XG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNhbmRpZGF0ZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcG9vbC5kZWxldGUoa2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gYWdlbnRJbnB1dFNlcmlhbGl6YXRpb25SZXBsYWNlcihfa2V5LCB2YWx1ZSkge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBzZXJpYWxpemVCaW5hcnkodmFsdWUpO1xuICAgIGlmIChzZXJpYWxpemVkKSB7XG4gICAgICAgIHJldHVybiBzZXJpYWxpemVkO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG4vLyBFeHRyYWN0cyBtb2RlbC1yZWFkeSBvdXRwdXQgaXRlbXMgZnJvbSBydW4gaXRlbXMsIGV4Y2x1ZGluZyBhcHByb3ZhbCBwbGFjZWhvbGRlcnMuXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdE91dHB1dEl0ZW1zRnJvbVJ1bkl0ZW1zKGl0ZW1zKSB7XG4gICAgcmV0dXJuIGl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSAhPT0gJ3Rvb2xfYXBwcm92YWxfaXRlbScpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0ucmF3SXRlbSk7XG59XG4vKipcbiAqIENvbnN0cnVjdHMgdGhlIG1vZGVsIGlucHV0IGFycmF5IGZvciB0aGUgY3VycmVudCB0dXJuIGJ5IGNvbWJpbmluZyB0aGUgb3JpZ2luYWwgdHVybiBpbnB1dCB3aXRoXG4gKiBhbnkgbmV3IHJ1biBpdGVtcyAoZXhjbHVkaW5nIHRvb2wgYXBwcm92YWwgcGxhY2Vob2xkZXJzKS4gVGhpcyBoZWxwcyBlbnN1cmUgdGhhdCByZXBlYXRlZCBjYWxsc1xuICogdG8gdGhlIFJlc3BvbnNlcyBBUEkgb25seSBzZW5kIG5ld2x5IGdlbmVyYXRlZCBjb250ZW50LlxuICpcbiAqIFNlZTogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL2NvbnZlcnNhdGlvbi1zdGF0ZT9hcGktbW9kZT1yZXNwb25zZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUdXJuSW5wdXQob3JpZ2luYWxJbnB1dCwgZ2VuZXJhdGVkSXRlbXMpIHtcbiAgICBjb25zdCBvdXRwdXRJdGVtcyA9IGV4dHJhY3RPdXRwdXRJdGVtc0Zyb21SdW5JdGVtcyhnZW5lcmF0ZWRJdGVtcyk7XG4gICAgcmV0dXJuIFsuLi50b0FnZW50SW5wdXRMaXN0KG9yaWdpbmFsSW5wdXQpLCAuLi5vdXRwdXRJdGVtc107XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVtcy5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTaGFyZWQgYmFzZSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFdmVyeSBpdGVtIGluIHRoZSBwcm90b2NvbCBwcm92aWRlcyBhIGBwcm92aWRlckRhdGFgIGZpZWxkIHRvIGFjY29tbW9kYXRlIGN1c3RvbSBmdW5jdGlvbmFsaXR5XG4gKiBvciBuZXcgZmllbGRzXG4gKi9cbmV4cG9ydCBjb25zdCBTaGFyZWRCYXNlID0gei5vYmplY3Qoe1xuICAgIC8qKlxuICAgICAqIEFkZGl0aW9uYWwgb3B0aW9uYWwgcHJvdmlkZXIgc3BlY2lmaWMgZGF0YS4gVXNlZCBmb3IgY3VzdG9tIGZ1bmN0aW9uYWxpdHkgb3IgbW9kZWwgcHJvdmlkZXJcbiAgICAgKiBzcGVjaWZpYyBmaWVsZHMuXG4gICAgICovXG4gICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxufSk7XG4vKipcbiAqIEV2ZXJ5IGl0ZW0gaGFzIGEgc2hhcmVkIG9mIHNoYXJlZCBpdGVtIGRhdGEgaW5jbHVkaW5nIGFuIG9wdGlvbmFsIElELlxuICovXG5leHBvcnQgY29uc3QgSXRlbUJhc2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgLyoqXG4gICAgICogQW4gSUQgdG8gaWRlbnRpZnkgdGhlIGl0ZW0uIFRoaXMgaXMgb3B0aW9uYWwgYnkgZGVmYXVsdC4gSWYgYSBtb2RlbCBwcm92aWRlciBhYnNvbHV0ZWx5XG4gICAgICogcmVxdWlyZXMgdGhpcyBmaWVsZCwgaXQgd2lsbCBiZSB2YWxpZGF0ZWQgb24gdGhlIG1vZGVsIGxldmVsLlxuICAgICAqL1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIENvbnRlbnQgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZWZ1c2FsID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVmdXNhbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSByZWZ1c2FsIGV4cGxhbmF0aW9uIGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHJlZnVzYWw6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBPdXRwdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IElucHV0VGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBBIHRleHQgaW5wdXQgZm9yIGV4YW1wbGUgYSBtZXNzYWdlIGZyb20gYSB1c2VyXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFJlYXNvbmluZ1RleHQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmdfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIEEgdGV4dCBpbnB1dCBmb3IgZXhhbXBsZSBhIG1lc3NhZ2UgZnJvbSBhIHVzZXJcbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRJbWFnZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2ltYWdlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGltYWdlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgcHJvdmlkZWQgaW5saW5lIChgaW1hZ2VgKSwgYXMgYSBVUkwsIG9yIGJ5IHJlZmVyZW5jZSB0byBhXG4gICAgICogcHJldmlvdXNseSB1cGxvYWRlZCBPcGVuQUkgZmlsZS5cbiAgICAgKi9cbiAgICBpbWFnZTogelxuICAgICAgICAvLyAxLiBpbWFnZSBkYXRhXG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAvLyAyLmZpbGUgSUQgZm9yIHRoZSBpbWFnZVxuICAgICAgICAub3Ioei5vYmplY3QoeyBpZDogei5zdHJpbmcoKS5kZXNjcmliZSgnT3BlbkFJIGZpbGUgSUQnKSB9KSlcbiAgICAgICAgLmRlc2NyaWJlKCdFaXRoZXIgYmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSwgYSBkYXRhIFVSTCwgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELicpXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIENvbnRyb2xzIHRoZSBsZXZlbCBvZiBkZXRhaWwgcmVxdWVzdGVkIGZvciBpbWFnZSB1bmRlcnN0YW5kaW5nIHRhc2tzLlxuICAgICAqIEZ1dHVyZSBtb2RlbHMgbWF5IGFkZCBuZXcgdmFsdWVzLCB0aGVyZWZvcmUgdGhpcyBhY2NlcHRzIGFueSBzdHJpbmcuXG4gICAgICovXG4gICAgZGV0YWlsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBJbnB1dEZpbGUgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9maWxlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGZpbGUgaW5wdXQgdG8gdGhlIG1vZGVsLiBDb3VsZCBiZSByYXcgZGF0YSwgYSBVUkwsIG9yIGFuIE9wZW5BSSBmaWxlIElELlxuICAgICAqIFdoZW4gcGFzc2luZyBhIHN0cmluZywgaXQgaXMgaW50ZXJwcmV0ZWQgYXMgaW5saW5lIGRhdGEgb3IgYSBVUkw7IHVzZSBgeyBpZCB9YCBmb3IgZmlsZSBJRHMuXG4gICAgICovXG4gICAgZmlsZTogelxuICAgICAgICAvLyAxLiBmaWxlIGRhdGFcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnRWl0aGVyIGJhc2U2NCBlbmNvZGVkIGZpbGUgZGF0YSBvciBhIHB1YmxpY2x5IGFjY2Vzc2libGUgZmlsZSBVUkwnKVxuICAgICAgICAvLyAyLiBmaWxlIElEXG4gICAgICAgIC5vcih6Lm9iamVjdCh7IGlkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCcpIH0pKVxuICAgICAgICAvLyAzLiBwdWJsaWNseSBhY2Nlc3NpYmxlIGZpbGUgVVJMXG4gICAgICAgIC5vcih6Lm9iamVjdCh7IHVybDogei5zdHJpbmcoKS5kZXNjcmliZSgnUHVibGljbHkgYWNjZXNzaWJsZSBmaWxlIFVSTCcpIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0NvbnRlbnRzIG9mIHRoZSBmaWxlIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC4nKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBPcHRpb25hbCBmaWxlbmFtZSBtZXRhZGF0YSB3aGVuIHVwbG9hZGluZyBmaWxlIGRhdGEgaW5saW5lLlxuICAgICAqL1xuICAgIGZpbGVuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBBdWRpb0NvbnRlbnQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdhdWRpbycpLFxuICAgIC8qKlxuICAgICAqIFRoZSBhdWRpbyBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIGJhc2U2NCBlbmNvZGVkIGF1ZGlvIGRhdGEgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGF1ZGlvOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAub3Ioei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICB9KSlcbiAgICAgICAgLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBhdWRpbyBkYXRhIG9yIGZpbGUgaWQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgZm9ybWF0IG9mIHRoZSBhdWRpby5cbiAgICAgKi9cbiAgICBmb3JtYXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc2NyaXB0IG9mIHRoZSBhdWRpby5cbiAgICAgKi9cbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEltYWdlQ29udGVudCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2ltYWdlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGltYWdlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgYmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuXG4gICAgICovXG4gICAgaW1hZ2U6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEnKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFRvb2xPdXRwdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndGV4dCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0ZXh0IG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5jb25zdCBJbWFnZURhdGFPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZGF0YTogelxuICAgICAgICAudW5pb24oW3ouc3RyaW5nKCksIHouaW5zdGFuY2VvZihVaW50OEFycmF5KV0pXG4gICAgICAgIC5kZXNjcmliZSgnQmFzZTY0IGltYWdlIGRhdGEsIG9yIHJhdyBieXRlcyB0aGF0IHdpbGwgYmUgYmFzZTY0IGVuY29kZWQgYXV0b21hdGljYWxseS4nKSxcbiAgICBtZWRpYVR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgSW1hZ2VVcmxPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdXJsOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAuZGVzY3JpYmUoJ1B1YmxpY2x5IGFjY2Vzc2libGUgVVJMIHBvaW50aW5nIHRvIHRoZSBpbWFnZSBjb250ZW50JyksXG59KTtcbmNvbnN0IEltYWdlRmlsZUlkT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGZpbGVJZDogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCByZWZlcmVuY2luZyB1cGxvYWRlZCBpbWFnZSBjb250ZW50JyksXG59KTtcbmNvbnN0IEltYWdlT2JqZWN0U2NoZW1hID0gelxuICAgIC51bmlvbihbSW1hZ2VEYXRhT2JqZWN0U2NoZW1hLCBJbWFnZVVybE9iamVjdFNjaGVtYSwgSW1hZ2VGaWxlSWRPYmplY3RTY2hlbWFdKVxuICAgIC5kZXNjcmliZSgnSW5saW5lIGltYWdlIGRhdGEgb3IgcmVmZXJlbmNlcyB0byB1cGxvYWRlZCBjb250ZW50LicpO1xuY29uc3QgRmlsZURhdGFPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZGF0YTogelxuICAgICAgICAudW5pb24oW3ouc3RyaW5nKCksIHouaW5zdGFuY2VvZihVaW50OEFycmF5KV0pXG4gICAgICAgIC5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgZmlsZSBkYXRhLCBvciByYXcgYnl0ZXMgdGhhdCB3aWxsIGJlIGVuY29kZWQgYXV0b21hdGljYWxseS4nKSxcbiAgICBtZWRpYVR5cGU6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnSUFOQSBtZWRpYSB0eXBlIGRlc2NyaWJpbmcgdGhlIGZpbGUgY29udGVudHMnKSxcbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnRmlsZW5hbWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBpbmxpbmUgZGF0YScpLFxufSk7XG5jb25zdCBGaWxlVXJsT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHVybDogei5zdHJpbmcoKS5kZXNjcmliZSgnUHVibGljbHkgYWNjZXNzaWJsZSBVUkwgZm9yIHRoZSBmaWxlIGNvbnRlbnQnKSxcbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBGaWxlSWRPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ09wZW5BSSBmaWxlIElEIHJlZmVyZW5jaW5nIHVwbG9hZGVkIGNvbnRlbnQnKSxcbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBGaWxlUmVmZXJlbmNlU2NoZW1hID0gelxuICAgIC51bmlvbihbXG4gICAgei5zdHJpbmcoKS5kZXNjcmliZSgnRXhpc3RpbmcgZGF0YSBVUkwgb3IgYmFzZTY0IHN0cmluZycpLFxuICAgIEZpbGVEYXRhT2JqZWN0U2NoZW1hLFxuICAgIEZpbGVVcmxPYmplY3RTY2hlbWEsXG4gICAgRmlsZUlkT2JqZWN0U2NoZW1hLFxuXSlcbiAgICAuZGVzY3JpYmUoJ0lubGluZSBkYXRhICh3aXRoIG1ldGFkYXRhKSBvciByZWZlcmVuY2VzIHBvaW50aW5nIHRvIGZpbGUgY29udGVudHMuJyk7XG5jb25zdCB6U3RyaW5nV2l0aEhpbnRzID0gKC4uLl9oaW50cykgPT4gei5zdHJpbmcoKTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0SW1hZ2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbWFnZScpLFxuICAgIC8qKlxuICAgICAqIElubGluZSBpbWFnZSBjb250ZW50IG9yIGEgcmVmZXJlbmNlIHRvIGFuIHVwbG9hZGVkIGZpbGUuIEFjY2VwdHMgYSBVUkwvZGF0YSBVUkwgc3RyaW5nIG9yIGFuXG4gICAgICogb2JqZWN0IGRlc2NyaWJpbmcgdGhlIGRhdGEvdXJsL2ZpbGVJZCBzb3VyY2UuXG4gICAgICovXG4gICAgaW1hZ2U6IHouc3RyaW5nKCkub3IoSW1hZ2VPYmplY3RTY2hlbWEpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogQ29udHJvbHMgdGhlIHJlcXVlc3RlZCBsZXZlbCBvZiBkZXRhaWwgZm9yIHZpc2lvbiBtb2RlbHMuXG4gICAgICogVXNlIGEgc3RyaW5nIHRvIGF2b2lkIGNvbnN0cmFpbmluZyBmdXR1cmUgbW9kZWwgY2FwYWJpbGl0aWVzLlxuICAgICAqL1xuICAgIGRldGFpbDogelN0cmluZ1dpdGhIaW50cygnbG93JywgJ2hpZ2gnLCAnYXV0bycpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0RmlsZUNvbnRlbnQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdmaWxlJyksXG4gICAgLyoqXG4gICAgICogRmlsZSBvdXRwdXQgcmVmZXJlbmNlLiBQcm92aWRlIGVpdGhlciBhIHN0cmluZyAoZGF0YSBVUkwgLyBiYXNlNjQpLCBhIGRhdGEgb2JqZWN0IChyZXF1aXJlc1xuICAgICAqIG1lZGlhVHlwZSArIGZpbGVuYW1lKSwgb3IgYW4gb2JqZWN0IHBvaW50aW5nIHRvIGFuIHVwbG9hZGVkIGZpbGUvVVJMLlxuICAgICAqL1xuICAgIGZpbGU6IEZpbGVSZWZlcmVuY2VTY2hlbWEsXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlclRvb2xPdXRwdXQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb21wdXRlcl9zY3JlZW5zaG90JyksXG4gICAgLyoqXG4gICAgICogQSBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIGEgVVJMIHJlcHJlc2VudGluZyB0aGUgc2NyZWVuc2hvdC5cbiAgICAgKi9cbiAgICBkYXRhOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIFVSTCcpLFxufSk7XG5leHBvcnQgY29uc3QgY29tcHV0ZXJBY3Rpb25zID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3NjcmVlbnNob3QnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnY2xpY2snKSxcbiAgICAgICAgeDogei5udW1iZXIoKSxcbiAgICAgICAgeTogei5udW1iZXIoKSxcbiAgICAgICAgYnV0dG9uOiB6LmVudW0oWydsZWZ0JywgJ3JpZ2h0JywgJ3doZWVsJywgJ2JhY2snLCAnZm9yd2FyZCddKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnZG91YmxlX2NsaWNrJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Njcm9sbCcpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgICAgICBzY3JvbGxfeDogei5udW1iZXIoKSxcbiAgICAgICAgc2Nyb2xsX3k6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3R5cGUnKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnd2FpdCcpIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtb3ZlJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2tleXByZXNzJyksXG4gICAgICAgIGtleXM6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2RyYWcnKSxcbiAgICAgICAgcGF0aDogei5hcnJheSh6Lm9iamVjdCh7IHg6IHoubnVtYmVyKCksIHk6IHoubnVtYmVyKCkgfSkpLFxuICAgIH0pLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNZXNzYWdlIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgQXNzaXN0YW50Q29udGVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIE91dHB1dFRleHQsXG4gICAgUmVmdXNhbCxcbiAgICBBdWRpb0NvbnRlbnQsXG4gICAgSW1hZ2VDb250ZW50LFxuXSk7XG5jb25zdCBNZXNzYWdlQmFzZSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgLyoqXG4gICAgICogQW55IGl0ZW0gd2l0aG91dCBhIHR5cGUgaXMgdHJlYXRlZCBhcyBhIG1lc3NhZ2VcbiAgICAgKi9cbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgQXNzaXN0YW50TWVzc2FnZUl0ZW0gPSBNZXNzYWdlQmFzZS5leHRlbmQoe1xuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudGluZyBhIG1lc3NhZ2UgZnJvbSB0aGUgYXNzaXN0YW50IChpLmUuIHRoZSBtb2RlbClcbiAgICAgKi9cbiAgICByb2xlOiB6LmxpdGVyYWwoJ2Fzc2lzdGFudCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LmFycmF5KEFzc2lzdGFudENvbnRlbnQpLFxufSk7XG5leHBvcnQgY29uc3QgVXNlckNvbnRlbnQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBJbnB1dFRleHQsXG4gICAgSW5wdXRJbWFnZSxcbiAgICBJbnB1dEZpbGUsXG4gICAgQXVkaW9Db250ZW50LFxuXSk7XG5leHBvcnQgY29uc3QgVXNlck1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvLyB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBtZXNzYWdlIGZyb20gdGhlIHVzZXJcbiAgICAgKi9cbiAgICByb2xlOiB6LmxpdGVyYWwoJ3VzZXInKSxcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LmFycmF5KFVzZXJDb250ZW50KS5vcih6LnN0cmluZygpKSxcbn0pO1xuY29uc3QgU3lzdGVtTWVzc2FnZUl0ZW0gPSBNZXNzYWdlQmFzZS5leHRlbmQoe1xuICAgIC8vIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudGluZyBhIHN5c3RlbSBtZXNzYWdlIHRvIHRoZSB1c2VyXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCdzeXN0ZW0nKSxcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgTWVzc2FnZUl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigncm9sZScsIFtcbiAgICBTeXN0ZW1NZXNzYWdlSXRlbSxcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBVc2VyTWVzc2FnZUl0ZW0sXG5dKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRvb2wgY2FsbCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IEhvc3RlZFRvb2xDYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbF9jYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGhvc3RlZCB0b29sLiBGb3IgZXhhbXBsZSBgd2ViX3NlYXJjaF9jYWxsYCBvciBgZmlsZV9zZWFyY2hfY2FsbGBcbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgaG9zdGVkIHRvb2wnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYXJndW1lbnRzIG9mIHRoZSBob3N0ZWQgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIGFyZ3VtZW50czogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLmRlc2NyaWJlKCdUaGUgYXJndW1lbnRzIG9mIHRoZSBob3N0ZWQgdG9vbCBjYWxsJylcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBwcmltYXJ5IG91dHB1dCBvZiB0aGUgdG9vbCBjYWxsLiBBZGRpdGlvbmFsIG91dHB1dCBtaWdodCBiZSBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gICAgICovXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBGdW5jdGlvbkNhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Z1bmN0aW9uX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbC4gUmVxdWlyZWQgdG8gbWF0Y2ggdXAgdGhlIHJlc3BlY3RpdmUgdG9vbCBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgdG9vbCBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIG5hbWU6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbicpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBhcmd1bWVudHMgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICovXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgVG9vbENhbGxPdXRwdXRDb250ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgVG9vbE91dHB1dFRleHQsXG4gICAgVG9vbE91dHB1dEltYWdlLFxuICAgIFRvb2xPdXRwdXRGaWxlQ29udGVudCxcbl0pO1xuZXhwb3J0IGNvbnN0IFRvb2xDYWxsU3RydWN0dXJlZE91dHB1dCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIElucHV0VGV4dCxcbiAgICBJbnB1dEltYWdlLFxuICAgIElucHV0RmlsZSxcbl0pO1xuZXhwb3J0IGNvbnN0IEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbF9yZXN1bHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHdhcyBjYWxsZWRcbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgdG9vbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBvZiB0aGUgdG9vbCBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSB0b29sIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSB0b29sIGNhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgb3V0cHV0IG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgb3V0cHV0OiB6XG4gICAgICAgIC51bmlvbihbXG4gICAgICAgIHouc3RyaW5nKCksXG4gICAgICAgIFRvb2xDYWxsT3V0cHV0Q29udGVudCxcbiAgICAgICAgei5hcnJheShUb29sQ2FsbFN0cnVjdHVyZWRPdXRwdXQpLFxuICAgIF0pXG4gICAgICAgIC5kZXNjcmliZSgnT3V0cHV0IHJldHVybmVkIGJ5IHRoZSB0b29sIGNhbGwuIFN1cHBvcnRzIHBsYWluIHN0cmluZ3MsIGxlZ2FjeSBUb29sT3V0cHV0IGl0ZW1zLCBvciBzdHJ1Y3R1cmVkIGlucHV0XyogaXRlbXMuJyksXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlclVzZUNhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbXB1dGVyX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIGNvbXB1dGVyIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgY29tcHV0ZXIgY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIC8qKlxuICAgICAqIFRoZSBhY3Rpb24gdG8gYmUgcGVyZm9ybWVkIGJ5IHRoZSBjb21wdXRlci5cbiAgICAgKi9cbiAgICBhY3Rpb246IGNvbXB1dGVyQWN0aW9ucyxcbn0pO1xuZXhwb3J0IGNvbnN0IENvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcHV0ZXJfY2FsbF9yZXN1bHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIGNvbXB1dGVyIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG91dHB1dCBvZiB0aGUgY29tcHV0ZXIgY2FsbC5cbiAgICAgKi9cbiAgICBvdXRwdXQ6IENvbXB1dGVyVG9vbE91dHB1dCxcbn0pO1xuZXhwb3J0IGNvbnN0IFNoZWxsQWN0aW9uID0gei5vYmplY3Qoe1xuICAgIGNvbW1hbmRzOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgIHRpbWVvdXRNczogei5udW1iZXIoKS5pbnQoKS5taW4oMCkub3B0aW9uYWwoKSxcbiAgICBtYXhPdXRwdXRMZW5ndGg6IHoubnVtYmVyKCkuaW50KCkubWluKDApLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBTaGVsbENhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3NoZWxsX2NhbGwnKSxcbiAgICBjYWxsSWQ6IHouc3RyaW5nKCksXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKS5vcHRpb25hbCgpLFxuICAgIGFjdGlvbjogU2hlbGxBY3Rpb24sXG59KTtcbmV4cG9ydCBjb25zdCBTaGVsbENhbGxPdXRjb21lID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3RpbWVvdXQnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnZXhpdCcpLFxuICAgICAgICBleGl0Q29kZTogei5udW1iZXIoKS5pbnQoKS5udWxsYWJsZSgpLFxuICAgIH0pLFxuXSk7XG5leHBvcnQgY29uc3QgU2hlbGxDYWxsT3V0cHV0Q29udGVudCA9IHpcbiAgICAub2JqZWN0KHtcbiAgICBzdGRvdXQ6IHouc3RyaW5nKCksXG4gICAgc3RkZXJyOiB6LnN0cmluZygpLFxuICAgIG91dGNvbWU6IFNoZWxsQ2FsbE91dGNvbWUsXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IFNoZWxsQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2hlbGxfY2FsbF9vdXRwdXQnKSxcbiAgICBjYWxsSWQ6IHouc3RyaW5nKCksXG4gICAgbWF4T3V0cHV0TGVuZ3RoOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0OiB6LmFycmF5KFNoZWxsQ2FsbE91dHB1dENvbnRlbnQpLFxufSk7XG5leHBvcnQgY29uc3QgQXBwbHlQYXRjaE9wZXJhdGlvbkNyZWF0ZUZpbGUgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjcmVhdGVfZmlsZScpLFxuICAgIHBhdGg6IHouc3RyaW5nKCksXG4gICAgZGlmZjogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hPcGVyYXRpb25VcGRhdGVGaWxlID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndXBkYXRlX2ZpbGUnKSxcbiAgICBwYXRoOiB6LnN0cmluZygpLFxuICAgIGRpZmY6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBBcHBseVBhdGNoT3BlcmF0aW9uRGVsZXRlRmlsZSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2RlbGV0ZV9maWxlJyksXG4gICAgcGF0aDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hPcGVyYXRpb24gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBBcHBseVBhdGNoT3BlcmF0aW9uQ3JlYXRlRmlsZSxcbiAgICBBcHBseVBhdGNoT3BlcmF0aW9uVXBkYXRlRmlsZSxcbiAgICBBcHBseVBhdGNoT3BlcmF0aW9uRGVsZXRlRmlsZSxcbl0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hDYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdhcHBseV9wYXRjaF9jYWxsJyksXG4gICAgY2FsbElkOiB6LnN0cmluZygpLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgIG9wZXJhdGlvbjogQXBwbHlQYXRjaE9wZXJhdGlvbixcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hDYWxsUmVzdWx0SXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdhcHBseV9wYXRjaF9jYWxsX291dHB1dCcpLFxuICAgIGNhbGxJZDogei5zdHJpbmcoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2NvbXBsZXRlZCcsICdmYWlsZWQnXSksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sQ2FsbEl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIFNoZWxsQ2FsbEl0ZW0sXG4gICAgQXBwbHlQYXRjaENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTcGVjaWFsIGl0ZW0gdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZWFzb25pbmdJdGVtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmcnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdXNlciBmYWNpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJlYXNvbmluZy4gQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBtaWdodCBiZSBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShJbnB1dFRleHQpLFxuICAgIC8qKlxuICAgICAqIFRoZSByYXcgcmVhc29uaW5nIHRleHQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmF3Q29udGVudDogei5hcnJheShSZWFzb25pbmdUZXh0KS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgQ29tcGFjdGlvbkl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcGFjdGlvbicpLFxuICAgIC8qKlxuICAgICAqIEVuY3J5cHRlZCBwYXlsb2FkIHJldHVybmVkIGJ5IHRoZSBjb21wYWN0aW9uIGVuZHBvaW50LlxuICAgICAqL1xuICAgIGVuY3J5cHRlZF9jb250ZW50OiB6LnN0cmluZygpLFxuICAgIC8qKlxuICAgICAqIElkZW50aWZpZXIgZm9yIHRoZSBjb21wYWN0aW9uIGl0ZW0uXG4gICAgICovXG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBJZGVudGlmaWVyIGZvciB0aGUgZ2VuZXJhdG9yIG9mIHRoaXMgY29tcGFjdGlvbiBpdGVtLlxuICAgICAqL1xuICAgIGNyZWF0ZWRfYnk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuLyoqXG4gKiBUaGlzIGlzIGEgY2F0Y2ggYWxsIGZvciBpdGVtcyB0aGF0IGFyZSBub3QgcGFydCBvZiB0aGUgcHJvdG9jb2wuXG4gKlxuICogRm9yIGV4YW1wbGUsIGEgbW9kZWwgbWlnaHQgcmV0dXJuIGFuIGl0ZW0gdGhhdCBpcyBub3QgcGFydCBvZiB0aGUgcHJvdG9jb2wgdXNpbmcgdGhpcyB0eXBlLlxuICpcbiAqIEluIHRoYXQgY2FzZSBldmVyeXRoaW5nIHJldHVybmVkIGZyb20gdGhlIG1vZGVsIHNob3VsZCBiZSBwYXNzZWQgaW4gdGhlIGBwcm92aWRlckRhdGFgIGZpZWxkLlxuICpcbiAqIFRoaXMgZW5hYmxlcyBuZXcgZmVhdHVyZXMgdG8gYmUgYWRkZWQgdG8gYmUgYWRkZWQgYnkgYSBtb2RlbCBwcm92aWRlciB3aXRob3V0IGJyZWFraW5nIHRoZSBwcm90b2NvbC5cbiAqL1xuZXhwb3J0IGNvbnN0IFVua25vd25JdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Vua25vd24nKSxcbn0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSm9pbmVkIGl0ZW0gdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBPdXRwdXRNb2RlbEl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBIb3N0ZWRUb29sQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsSXRlbSxcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIFNoZWxsQ2FsbEl0ZW0sXG4gICAgQXBwbHlQYXRjaENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgU2hlbGxDYWxsUmVzdWx0SXRlbSxcbiAgICBBcHBseVBhdGNoQ2FsbFJlc3VsdEl0ZW0sXG4gICAgUmVhc29uaW5nSXRlbSxcbiAgICBDb21wYWN0aW9uSXRlbSxcbiAgICBVbmtub3duSXRlbSxcbl0pO1xuZXhwb3J0IGNvbnN0IE1vZGVsSXRlbSA9IHoudW5pb24oW1xuICAgIFVzZXJNZXNzYWdlSXRlbSxcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBTeXN0ZW1NZXNzYWdlSXRlbSxcbiAgICBIb3N0ZWRUb29sQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsSXRlbSxcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIFNoZWxsQ2FsbEl0ZW0sXG4gICAgQXBwbHlQYXRjaENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSxcbiAgICBTaGVsbENhbGxSZXN1bHRJdGVtLFxuICAgIEFwcGx5UGF0Y2hDYWxsUmVzdWx0SXRlbSxcbiAgICBSZWFzb25pbmdJdGVtLFxuICAgIENvbXBhY3Rpb25JdGVtLFxuICAgIFVua25vd25JdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNZXRhIGRhdGEgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZXF1ZXN0VXNhZ2VEYXRhID0gei5vYmplY3Qoe1xuICAgIGlucHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIG91dHB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICB0b3RhbFRva2Vuczogei5udW1iZXIoKSxcbiAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkub3B0aW9uYWwoKSxcbiAgICBlbmRwb2ludDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgVXNhZ2VEYXRhID0gei5vYmplY3Qoe1xuICAgIHJlcXVlc3RzOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zRGV0YWlsczogelxuICAgICAgICAudW5pb24oW1xuICAgICAgICB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSxcbiAgICAgICAgei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSksXG4gICAgXSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogelxuICAgICAgICAudW5pb24oW1xuICAgICAgICB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSxcbiAgICAgICAgei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSksXG4gICAgXSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgcmVxdWVzdFVzYWdlRW50cmllczogei5hcnJheShSZXF1ZXN0VXNhZ2VEYXRhKS5vcHRpb25hbCgpLFxufSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdHJlYW0gZXZlbnQgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgYnkgdGhlIG1vZGVsIHdoZW4gbmV3IG91dHB1dCB0ZXh0IGlzIGF2YWlsYWJsZSB0byBzdHJlYW0gdG8gdGhlIHVzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudFRleHRTdHJlYW0gPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dF9kZWx0YScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBkZWx0YSB0ZXh0IHRoYXQgd2FzIHN0cmVhbWVkIGJ5IHRoZSBtb2RlbHRvIHRoZSB1c2VyLlxuICAgICAqL1xuICAgIGRlbHRhOiB6LnN0cmluZygpLFxufSk7XG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGJ5IHRoZSBtb2RlbCB3aGVuIGEgbmV3IHJlc3BvbnNlIGlzIHN0YXJ0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudFJlc3BvbnNlU3RhcnRlZCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlX3N0YXJ0ZWQnKSxcbn0pO1xuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBieSB0aGUgbW9kZWwgd2hlbiBhIHJlc3BvbnNlIGlzIGNvbXBsZXRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZV9kb25lJyksXG4gICAgLyoqXG4gICAgICogVGhlIHJlc3BvbnNlIGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHJlc3BvbnNlOiBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgSUQgb2YgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgKi9cbiAgICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdXNhZ2UgZGF0YSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdXNhZ2U6IFVzYWdlRGF0YSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICAgICAqL1xuICAgICAgICBvdXRwdXQ6IHouYXJyYXkoT3V0cHV0TW9kZWxJdGVtKSxcbiAgICB9KSxcbn0pO1xuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBmb3IgZXZlcnkgaXRlbSB0aGF0IGdldHMgc3RyZWFtZWQgdG8gdGhlIG1vZGVsLiBVc2VkIHRvIGV4cG9zZSB0aGUgcmF3IGV2ZW50c1xuICogZnJvbSB0aGUgbW9kZWwuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudEdlbmVyaWNJdGVtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbW9kZWwnKSxcbiAgICBldmVudDogei5hbnkoKS5kZXNjcmliZSgnVGhlIGV2ZW50IGZyb20gdGhlIG1vZGVsJyksXG59KTtcbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIFN0cmVhbUV2ZW50VGV4dFN0cmVhbSxcbiAgICBTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkLFxuICAgIFN0cmVhbUV2ZW50UmVzcG9uc2VTdGFydGVkLFxuICAgIFN0cmVhbUV2ZW50R2VuZXJpY0l0ZW0sXG5dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb3RvY29sLm1qcy5tYXAiLCJpbXBvcnQgeyBSZWFkYWJsZVN0cmVhbSBhcyBfUmVhZGFibGVTdHJlYW0sIFRyYW5zZm9ybVN0cmVhbSwgUmVhZGFibGUsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgZ2V0VHVybklucHV0IH0gZnJvbSBcIi4vcnVubmVyL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBTdHJlYW1FdmVudFRleHRTdHJlYW0gfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmZ1bmN0aW9uIGNyZWF0ZUFib3J0SGFuZGxlclJlZigpIHtcbiAgICBjb25zdCByZWYgPSB7fTtcbiAgICBjb25zdCBoYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICByZWYuY3VycmVudD8uKCk7XG4gICAgfTtcbiAgICByZXR1cm4geyByZWYsIGhhbmRsZXIgfTtcbn1cbmZ1bmN0aW9uIGNvbWJpbmVBYm9ydFNpZ25hbHMoLi4uc2lnbmFscykge1xuICAgIGNvbnN0IGFjdGl2ZSA9IHNpZ25hbHMuZmlsdGVyKEJvb2xlYW4pO1xuICAgIGlmIChhY3RpdmUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGFueUZuID0gQWJvcnRTaWduYWwuYW55O1xuICAgIGlmICh0eXBlb2YgYW55Rm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhbnlGbihhY3RpdmUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBBYm9ydFNpZ25hbC5hbnkgZmFpbGVkLCBmYWxsaW5nIGJhY2s6ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICBjb25zdCBhYm9ydENvbWJpbmVkID0gKHJlYXNvbikgPT4ge1xuICAgICAgICBpZiAoIWNvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWJvcnQocmVhc29uKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZm9yIChjb25zdCBzaWduYWwgb2YgYWN0aXZlKSB7XG4gICAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgYWJvcnRDb21iaW5lZChzaWduYWwucmVhc29uKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IGFib3J0Q29tYmluZWQoc2lnbmFsLnJlYXNvbiksIHtcbiAgICAgICAgICAgIG9uY2U6IHRydWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY29udHJvbGxlci5zaWduYWw7XG59XG5jbGFzcyBSdW5SZXN1bHRCYXNlIHtcbiAgICBzdGF0ZTtcbiAgICBjb25zdHJ1Y3RvcihzdGF0ZSkge1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBoaXN0b3J5IG9mIHRoZSBhZ2VudCBydW4uIFRoaXMgaW5jbHVkZXMgdGhlIGlucHV0IGl0ZW1zIGFuZCB0aGUgbmV3IGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmdcbiAgICAgKiB0aGUgYWdlbnQgcnVuLlxuICAgICAqXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZCBhcyBpbnB1dHMgZm9yIHRoZSBuZXh0IGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICBnZXQgaGlzdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIGdldFR1cm5JbnB1dCh0aGlzLmlucHV0LCB0aGlzLm5ld0l0ZW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG5ldyBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhZ2VudCBydW4uIFRoZXNlIGluY2x1ZGUgdGhpbmdzIGxpa2UgbmV3IG1lc3NhZ2VzLCB0b29sXG4gICAgICogY2FsbHMgYW5kIHRoZWlyIG91dHB1dHMsIGV0Yy5cbiAgICAgKlxuICAgICAqIEl0IGRvZXMgbm90IGluY2x1ZGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGFnZW50cyBhbmQgaW5zdGVhZCByZXByZXNlbnRzIHRoZSBtb2RlbCBkYXRhLlxuICAgICAqXG4gICAgICogRm9yIHRoZSBvdXRwdXQgaW5jbHVkaW5nIHRoZSBhZ2VudHMsIHVzZSB0aGUgYG5ld0l0ZW1zYCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBnZXQgb3V0cHV0KCkge1xuICAgICAgICByZXR1cm4gZ2V0VHVybklucHV0KFtdLCB0aGlzLm5ld0l0ZW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBjb3B5IG9mIHRoZSBvcmlnaW5hbCBpbnB1dCBpdGVtcy5cbiAgICAgKi9cbiAgICBnZXQgaW5wdXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9vcmlnaW5hbElucHV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcnVuIGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFnZW50IHJ1bi4gVGhpcyBhc3NvY2lhdGVzIHRoZSBtb2RlbCBkYXRhIHdpdGggdGhlIGFnZW50cy5cbiAgICAgKlxuICAgICAqIEZvciB0aGUgbW9kZWwgZGF0YSB0aGF0IGNhbiBiZSB1c2VkIGFzIGlucHV0cyBmb3IgdGhlIG5leHQgYWdlbnQgcnVuLCB1c2UgdGhlIGBvdXRwdXRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGdldCBuZXdJdGVtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcmF3IExMTSByZXNwb25zZXMgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBkdXJpbmcgdGhlIGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICBnZXQgcmF3UmVzcG9uc2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fbW9kZWxSZXNwb25zZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXN0IHJlc3BvbnNlIElEIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgZHVyaW5nIHRoZSBhZ2VudCBydW4uXG4gICAgICovXG4gICAgZ2V0IGxhc3RSZXNwb25zZUlkKCkge1xuICAgICAgICBjb25zdCByZXNwb25zZXMgPSB0aGlzLnJhd1Jlc3BvbnNlcztcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlcyAmJiByZXNwb25zZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyByZXNwb25zZXNbcmVzcG9uc2VzLmxlbmd0aCAtIDFdLnJlc3BvbnNlSWRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbGFzdCBhZ2VudCB0aGF0IHdhcyBydW5cbiAgICAgKi9cbiAgICBnZXQgbGFzdEFnZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fY3VycmVudEFnZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgYWdlbnQgdGhhdCBzaG91bGQgaGFuZGxlIHRoZSBuZXh0IHR1cm4uXG4gICAgICogVGhpcyBpcyBhbiBhbGlhcyBmb3IgdGhlIGxhc3QgYWdlbnQgdGhhdCBjb21wbGV0ZWQgYSB0dXJuLlxuICAgICAqL1xuICAgIGdldCBhY3RpdmVBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdEFnZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHdWFyZHJhaWwgcmVzdWx0cyBmb3IgdGhlIGlucHV0IG1lc3NhZ2VzLlxuICAgICAqL1xuICAgIGdldCBpbnB1dEd1YXJkcmFpbFJlc3VsdHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEd1YXJkcmFpbCByZXN1bHRzIGZvciB0aGUgZmluYWwgb3V0cHV0IG9mIHRoZSBhZ2VudC5cbiAgICAgKi9cbiAgICBnZXQgb3V0cHV0R3VhcmRyYWlsUmVzdWx0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX291dHB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEd1YXJkcmFpbCByZXN1bHRzIGZvciB0b29sIGlucHV0cy5cbiAgICAgKi9cbiAgICBnZXQgdG9vbElucHV0R3VhcmRyYWlsUmVzdWx0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX3Rvb2xJbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEd1YXJkcmFpbCByZXN1bHRzIGZvciB0b29sIG91dHB1dHMuXG4gICAgICovXG4gICAgZ2V0IHRvb2xPdXRwdXRHdWFyZHJhaWxSZXN1bHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fdG9vbE91dHB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFueSBpbnRlcnJ1cHRpb25zIHRoYXQgb2NjdXJyZWQgZHVyaW5nIHRoZSBhZ2VudCBydW4gZm9yIGV4YW1wbGUgZm9yIHRvb2wgYXBwcm92YWxzLlxuICAgICAqL1xuICAgIGdldCBpbnRlcnJ1cHRpb25zKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwLmRhdGEuaW50ZXJydXB0aW9ucztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaW5hbCBvdXRwdXQgb2YgdGhlIGFnZW50LiBJZiB0aGUgb3V0cHV0IHR5cGUgd2FzIHNldCB0byBhbnl0aGluZyBvdGhlciB0aGFuIGB0ZXh0YCxcbiAgICAgKiB0aGlzIHdpbGwgYmUgcGFyc2VkIGVpdGhlciBhcyBKU09OIG9yIHVzaW5nIHRoZSBab2Qgc2NoZW1hIHlvdSBwcm92aWRlZC5cbiAgICAgKi9cbiAgICBnZXQgZmluYWxPdXRwdXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSA9PT0gJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fY3VycmVudEFnZW50LnByb2Nlc3NGaW5hbE91dHB1dCh0aGlzLnN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci53YXJuKCdBY2Nlc3NlZCBmaW5hbE91dHB1dCBiZWZvcmUgYWdlbnQgcnVuIGlzIGNvbXBsZXRlZC4nKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG4vKipcbiAqIFRoZSByZXN1bHQgb2YgYW4gYWdlbnQgcnVuLlxuICovXG5leHBvcnQgY2xhc3MgUnVuUmVzdWx0IGV4dGVuZHMgUnVuUmVzdWx0QmFzZSB7XG4gICAgY29uc3RydWN0b3Ioc3RhdGUpIHtcbiAgICAgICAgc3VwZXIoc3RhdGUpO1xuICAgIH1cbn1cbi8qKlxuICogVGhlIHJlc3VsdCBvZiBhbiBhZ2VudCBydW4gaW4gc3RyZWFtaW5nIG1vZGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJlYW1lZFJ1blJlc3VsdCBleHRlbmRzIFJ1blJlc3VsdEJhc2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGFnZW50IHRoYXQgaXMgcnVubmluZ1xuICAgICAqL1xuICAgIGdldCBjdXJyZW50QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhc3RBZ2VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgdHVybiBudW1iZXJcbiAgICAgKi9cbiAgICBjdXJyZW50VHVybiA9IDA7XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHR1cm5zIHRoYXQgY2FuIGJlIHJ1blxuICAgICAqL1xuICAgIG1heFR1cm5zO1xuICAgICNlcnJvciA9IG51bGw7XG4gICAgI2NvbWJpbmVkU2lnbmFsO1xuICAgICNhYm9ydFNpZ25hbFNuYXBzaG90O1xuICAgICNhYm9ydENvbnRyb2xsZXI7XG4gICAgI3JlYWRhYmxlQ29udHJvbGxlcjtcbiAgICAjcmVhZGFibGVTdHJlYW07XG4gICAgI2NvbXBsZXRlZFByb21pc2U7XG4gICAgI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlO1xuICAgICNjb21wbGV0ZWRQcm9taXNlUmVqZWN0O1xuICAgICNjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAjc3RyZWFtTG9vcFByb21pc2U7XG4gICAgI2Fib3J0SGFuZGxlcjtcbiAgICAjYWJvcnRIYW5kbGVyUmVmO1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdCA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgIHRoaXMuI2Fib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgdGhpcy4jY29tYmluZWRTaWduYWwgPSBjb21iaW5lQWJvcnRTaWduYWxzKHJlc3VsdC5zaWduYWwsIHRoaXMuI2Fib3J0Q29udHJvbGxlci5zaWduYWwpO1xuICAgICAgICB0aGlzLiNhYm9ydFNpZ25hbFNuYXBzaG90ID0gdGhpcy4jY29tYmluZWRTaWduYWw7XG4gICAgICAgIHRoaXMuI3JlYWRhYmxlU3RyZWFtID0gbmV3IF9SZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgICAgICBzdGFydDogKGNvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy4jYWJvcnRDb250cm9sbGVyLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2Fib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLiNjb21iaW5lZFNpZ25hbCkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBoYW5kbGVyIG91dHNpZGUgdGhpcyBzY29wZSBzbyBpdCBjYW5ub3QgY2FwdHVyZSB0aGUgcnVuIHZpYSBsZXhpY2FsIHRoaXMuXG4gICAgICAgICAgICBjb25zdCB7IHJlZjogYWJvcnRSZWYsIGhhbmRsZXI6IGhhbmRsZUFib3J0IH0gPSBjcmVhdGVBYm9ydEhhbmRsZXJSZWYoKTtcbiAgICAgICAgICAgIGFib3J0UmVmLmN1cnJlbnQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4jaGFuZGxlQWJvcnQoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLiNhYm9ydEhhbmRsZXIgPSBoYW5kbGVBYm9ydDtcbiAgICAgICAgICAgIHRoaXMuI2Fib3J0SGFuZGxlclJlZiA9IGFib3J0UmVmO1xuICAgICAgICAgICAgaWYgKHRoaXMuI2NvbWJpbmVkU2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVBYm9ydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jY29tYmluZWRTaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBoYW5kbGVBYm9ydCwge1xuICAgICAgICAgICAgICAgICAgICBvbmNlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEFkZHMgYW4gaXRlbSB0byB0aGUgc3RyZWFtIG9mIG91dHB1dCBpdGVtc1xuICAgICAqL1xuICAgIF9hZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyPy5lbnF1ZXVlKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkXG4gICAgICovXG4gICAgX2RvbmUoKSB7XG4gICAgICAgIGlmICghdGhpcy5jYW5jZWxsZWQgJiYgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlPy4oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNkZXRhY2hBYm9ydEhhbmRsZXIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogSGFuZGxlcyBhbiBlcnJvciBpbiB0aGUgc3RyZWFtIGxvb3AuXG4gICAgICovXG4gICAgX3JhaXNlRXJyb3IoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5jYW5jZWxsZWQgJiYgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNlcnJvciA9IGVycjtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlamVjdD8uKGVycik7XG4gICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2UuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUmVzdWx0ZWQgaW4gYW4gZXJyb3I6ICR7ZX1gKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2RldGFjaEFib3J0SGFuZGxlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmVhbSBoYXMgYmVlbiBjYW5jZWxsZWQuXG4gICAgICovXG4gICAgZ2V0IGNhbmNlbGxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NhbmNlbGxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyByZWFkYWJsZSBzdHJlYW0uXG4gICAgICogQHJldHVybnMgQSByZWFkYWJsZSBzdHJlYW0gb2YgdGhlIGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICB0b1N0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3JlYWRhYmxlU3RyZWFtO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBd2FpdCB0aGlzIHByb21pc2UgdG8gZW5zdXJlIHRoYXQgdGhlIHN0cmVhbSBoYXMgYmVlbiBjb21wbGV0ZWQgaWYgeW91IGFyZSBub3QgY29uc3VtaW5nIHRoZVxuICAgICAqIHN0cmVhbSBkaXJlY3RseS5cbiAgICAgKi9cbiAgICBnZXQgY29tcGxldGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY29tcGxldGVkUHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXJyb3IgdGhyb3duIGR1cmluZyB0aGUgcnVuLCBpZiBhbnkuXG4gICAgICovXG4gICAgZ2V0IGVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZXJyb3I7XG4gICAgfVxuICAgIHRvVGV4dFN0cmVhbShvcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy4jcmVhZGFibGVTdHJlYW0ucGlwZVRocm91Z2gobmV3IFRyYW5zZm9ybVN0cmVhbSh7XG4gICAgICAgICAgICB0cmFuc2Zvcm0oZXZlbnQsIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Jhd19tb2RlbF9zdHJlYW1fZXZlbnQnICYmXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEudHlwZSA9PT0gJ291dHB1dF90ZXh0X2RlbHRhJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gU3RyZWFtRXZlbnRUZXh0U3RyZWFtLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoaXRlbS5kZWx0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAob3B0aW9ucy5jb21wYXRpYmxlV2l0aE5vZGVTdHJlYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhZGFibGUuZnJvbVdlYihzdHJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgfVxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNyZWFkYWJsZVN0cmVhbVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogU2V0cyB0aGUgc3RyZWFtIGxvb3AgcHJvbWlzZSB0aGF0IGNvbXBsZXRlcyB3aGVuIHRoZSBpbnRlcm5hbCBzdHJlYW0gbG9vcCBmaW5pc2hlcy5cbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZGVmZXIgdHJhY2UgZW5kIHVudGlsIGFsbCBhZ2VudCB3b3JrIGlzIGNvbXBsZXRlLlxuICAgICAqL1xuICAgIF9zZXRTdHJlYW1Mb29wUHJvbWlzZShwcm9taXNlKSB7XG4gICAgICAgIHRoaXMuI3N0cmVhbUxvb3BQcm9taXNlID0gcHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBzdHJlYW0gbG9vcCBjb21wbGV0ZXMuXG4gICAgICogVGhpcyBpcyB1c2VkIGJ5IHRoZSB0cmFjaW5nIHN5c3RlbSB0byB3YWl0IGZvciBhbGwgYWdlbnQgd29yayBiZWZvcmUgZW5kaW5nIHRoZSB0cmFjZS5cbiAgICAgKi9cbiAgICBfZ2V0U3RyZWFtTG9vcFByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdHJlYW1Mb29wUHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogUmV0dXJucyB0aGUgYWJvcnQgc2lnbmFsIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gY2FuY2VsIHRoZSBzdHJlYW1pbmcgcnVuLlxuICAgICAqL1xuICAgIF9nZXRBYm9ydFNpZ25hbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Fib3J0U2lnbmFsU25hcHNob3QgPz8gdGhpcy4jY29tYmluZWRTaWduYWw7XG4gICAgfVxuICAgICNoYW5kbGVBYm9ydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI2NhbmNlbGxlZCkge1xuICAgICAgICAgICAgdGhpcy4jZGV0YWNoQWJvcnRIYW5kbGVyKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlcjtcbiAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoY29udHJvbGxlcikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBGYWlsZWQgdG8gY2xvc2UgcmVhZGFibGUgc3RyZWFtIG9uIGFib3J0OiAke2Vycn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVzb2x2ZT8uKCk7XG4gICAgICAgIHRoaXMuI2RldGFjaEFib3J0SGFuZGxlcigpO1xuICAgIH1cbiAgICAjZGV0YWNoQWJvcnRIYW5kbGVyKCkge1xuICAgICAgICAvLyBDbGVhciB0aGUgaW5kaXJlY3Rpb24gZmlyc3Qgc28gYSByZXRhaW5lZCBzaWduYWwgY2Fubm90IGtlZXAgdGhpcyBydW4gYWxpdmUuXG4gICAgICAgIGlmICh0aGlzLiNhYm9ydEhhbmRsZXJSZWYpIHtcbiAgICAgICAgICAgIHRoaXMuI2Fib3J0SGFuZGxlclJlZi5jdXJyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNjb21iaW5lZFNpZ25hbCAmJiB0aGlzLiNhYm9ydEhhbmRsZXIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jY29tYmluZWRTaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCB0aGlzLiNhYm9ydEhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgRmFpbGVkIHRvIHJlbW92ZSBhYm9ydCBsaXN0ZW5lcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jYWJvcnRIYW5kbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLiNhYm9ydEhhbmRsZXJSZWYgPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzdWx0Lm1qcy5tYXAiLCJpbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmltcG9ydCB7IFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4uL3Jlc3VsdC5tanNcIjtcbmNvbnN0IEFMU19TWU1CT0wgPSBTeW1ib2wuZm9yKCdvcGVuYWkuYWdlbnRzLmNvcmUuYXN5bmNMb2NhbFN0b3JhZ2UnKTtcbmxldCBsb2NhbEZhbGxiYWNrQWxzO1xuLy8gR2xvYmFsIHN5bWJvbHMgZW5zdXJlIHRoYXQgaWYgbXVsdGlwbGUgY29waWVzIG9mIGFnZW50cy1jb3JlIGFyZSBsb2FkZWRcbi8vIChlLmcuLCB2aWEgZGlmZmVyZW50IG5wbSByZXNvbHV0aW9uIHBhdGhzIG9yIGJ1bmRsZXJzKSwgdGhleSBhbGwgc2hhcmUgdGhlXG4vLyBzYW1lIEFzeW5jTG9jYWxTdG9yYWdlIGluc3RhbmNlLiBUaGlzIHByZXZlbnRzIGxvc2luZyB0cmFjZS9zcGFuIHN0YXRlIHdoZW4gYVxuLy8gZG93bnN0cmVhbSBwYWNrYWdlIHB1bGxzIGluIGEgZHVwbGljYXRlIGNvcHkuXG5mdW5jdGlvbiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZ2xvYmFsU2NvcGUgPSBnbG9iYWxUaGlzO1xuICAgICAgICBjb25zdCBnbG9iYWxBTFMgPSBnbG9iYWxTY29wZVtBTFNfU1lNQk9MXTtcbiAgICAgICAgaWYgKGdsb2JhbEFMUykge1xuICAgICAgICAgICAgcmV0dXJuIGdsb2JhbEFMUztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBTFMgPSBuZXcgQXN5bmNMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgZ2xvYmFsU2NvcGVbQUxTX1NZTUJPTF0gPSBuZXdBTFM7XG4gICAgICAgIHJldHVybiBuZXdBTFM7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgLy8gQXMgYSBkZWZlbnNpdmUgZmFsbGJhY2sgKGUuZy4sIGlmIGdsb2JhbFRoaXMgaXMgbG9ja2VkIGRvd24gb3IgQUxTXG4gICAgICAgIC8vIGNvbnN0cnVjdGlvbiB0aHJvd3MgaW4gYSBjb25zdHJhaW5lZCBydW50aW1lKSwga2VlcCBhIG1vZHVsZS1sb2NhbCBBTFMgc29cbiAgICAgICAgLy8gdHJhY2luZyBzdGlsbCBmdW5jdGlvbnMgaW5zdGVhZCBvZiBjcmFzaGluZyBjYWxsZXJzLlxuICAgICAgICBpZiAoIWxvY2FsRmFsbGJhY2tBbHMpIHtcbiAgICAgICAgICAgIGxvY2FsRmFsbGJhY2tBbHMgPSBuZXcgQXN5bmNMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbG9jYWxGYWxsYmFja0FscztcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRBY3RpdmVDb250ZXh0KCkge1xuICAgIGNvbnN0IHN0b3JlID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoc3RvcmU/LmFjdGl2ZSA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gc3RvcmU7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBnZXQgdGhlIGN1cnJlbnQgdHJhY2UgZnJvbSB0aGUgZXhlY3V0aW9uIGNvbnRleHQuXG4gKlxuICogQHJldHVybnMgVGhlIGN1cnJlbnQgdHJhY2Ugb3IgbnVsbCBpZiB0aGVyZSBpcyBubyB0cmFjZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRUcmFjZSgpIHtcbiAgICBjb25zdCBjdXJyZW50VHJhY2UgPSBnZXRBY3RpdmVDb250ZXh0KCk7XG4gICAgaWYgKGN1cnJlbnRUcmFjZT8udHJhY2UpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRUcmFjZS50cmFjZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBnZXQgdGhlIGN1cnJlbnQgc3BhbiBmcm9tIHRoZSBleGVjdXRpb24gY29udGV4dC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgY3VycmVudCBzcGFuIG9yIG51bGwgaWYgdGhlcmUgaXMgbm8gc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRTcGFuKCkge1xuICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0QWN0aXZlQ29udGV4dCgpO1xuICAgIGlmIChjdXJyZW50U3Bhbj8uc3Bhbikge1xuICAgICAgICByZXR1cm4gY3VycmVudFNwYW4uc3BhbjtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRoaXMgaXMgYW4gQXN5bmNMb2NhbFN0b3JhZ2UgaW5zdGFuY2UgdGhhdCBzdG9yZXMgdGhlIGN1cnJlbnQgdHJhY2UuXG4gKiBJdCB3aWxsIGF1dG9tYXRpY2FsbHkgaGFuZGxlIHRoZSBleGVjdXRpb24gY29udGV4dCBvZiBkaWZmZXJlbnQgZXZlbnQgbG9vcCBleGVjdXRpb25zLlxuICpcbiAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgc2hvdWxkIGJlIHRoZSBvbmx5IHdheSB0aGF0IHRoaXMgY29udGV4dCBnZXRzIGludGVyZmFjZWQgd2l0aC5cbiAqL1xuZnVuY3Rpb24gX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbiwgY3VycmVudENvbnRleHQsIHByZXZpb3VzQWxzU3RvcmUpIHtcbiAgICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB0cmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgICAgICBpZiAoIXRyYWNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHRyYWNlIGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNsZWFudXBEZWZlcnJlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBjbGVhbnVwQ29udGV4dCA9ICgpID0+IHtcbiAgICAgICAgICAgIGN1cnJlbnRDb250ZXh0LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgY3VycmVudENvbnRleHQudHJhY2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjdXJyZW50Q29udGV4dC5zcGFuID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY3VycmVudENvbnRleHQucHJldmlvdXNTcGFuID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZW50ZXJXaXRoKHByZXZpb3VzQWxzU3RvcmUpO1xuICAgICAgICB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2Uuc3RhcnQoKTtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4odHJhY2UpO1xuICAgICAgICAgICAgLy8gSWYgcmVzdWx0IGlzIGEgU3RyZWFtZWRSdW5SZXN1bHQsIGRlZmVyIHRyYWNlIGVuZCB1bnRpbCBzdHJlYW0gbG9vcCBjb21wbGV0ZXNcbiAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBTdHJlYW1lZFJ1blJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbUxvb3BQcm9taXNlID0gcmVzdWx0Ll9nZXRTdHJlYW1Mb29wUHJvbWlzZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzdHJlYW1Mb29wUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwRGVmZXJyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW1Mb29wUHJvbWlzZS5maW5hbGx5KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdHJhY2UuZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW51cENvbnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRm9yIG5vbi1zdHJlYW1pbmcgcmVzdWx0cywgZW5kIHRyYWNlIHN5bmNocm9ub3VzbHlcbiAgICAgICAgICAgIGlmIChzdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdHJhY2UuZW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgLy8gSWYgY2xlYW51cCB3YXMgZGVmZXJyZWQgdG8gdGhlIHN0cmVhbWluZyBsb29wLCBrZWVwIHRoZSBjb250ZXh0IG1hcmtlZFxuICAgICAgICAgICAgLy8gYWN0aXZlIHNvIGNvbmN1cnJlbnQgdHJhY2VzIGRvIG5vdCBjbGVhciBpdCBwcmVtYXR1cmVseS4gT3RoZXJ3aXNlLFxuICAgICAgICAgICAgLy8gbWFyayBpbmFjdGl2ZSBhbmQgcmVzdG9yZSBub3cuXG4gICAgICAgICAgICBpZiAoIWNsZWFudXBEZWZlcnJlZCkge1xuICAgICAgICAgICAgICAgIGNsZWFudXBDb250ZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY3JlYXRlIGEgbmV3IHRyYWNlIGFuZCBhc3NpZ24gaXQgdG8gdGhlIGV4ZWN1dGlvbiBjb250ZXh0IG9mIHRoZSBmdW5jdGlvblxuICogcGFzc2VkIHRvIGl0LlxuICpcbiAqIEBwYXJhbSBmbiAtIFRoZSBmdW5jdGlvbiB0byBydW4gYW5kIGFzc2lnbiB0aGUgdHJhY2UgY29udGV4dCB0by5cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGNyZWF0aW9uIG9mIHRoZSB0cmFjZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2l0aFRyYWNlKHRyYWNlLCBmbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbmV3VHJhY2UgPSB0eXBlb2YgdHJhY2UgPT09ICdzdHJpbmcnXG4gICAgICAgID8gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVRyYWNlKHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBuYW1lOiB0cmFjZSxcbiAgICAgICAgfSlcbiAgICAgICAgOiB0cmFjZTtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICB0cmFjZTogbmV3VHJhY2UsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICB9O1xuICAgIGNvbnN0IHByZXZpb3VzQWxzU3RvcmUgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIHJldHVybiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5ydW4oY29udGV4dCwgX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbiwgY29udGV4dCwgcHJldmlvdXNBbHNTdG9yZSkpO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2hlY2sgaWYgdGhlcmUgaXMgYW4gZXhpc3RpbmcgYWN0aXZlIHRyYWNlIGluIHRoZSBleGVjdXRpb24gY29udGV4dC4gSWYgdGhlcmVcbiAqIGlzLCBpdCB3aWxsIHJ1biB0aGUgZ2l2ZW4gZnVuY3Rpb24gd2l0aCB0aGUgZXhpc3RpbmcgdHJhY2UuIElmIHRoZXJlIGlzIG5vIHRyYWNlLCBpdCB3aWxsIGNyZWF0ZVxuICogYSBuZXcgb25lIGFuZCBhc3NpZ24gaXQgdG8gdGhlIGV4ZWN1dGlvbiBjb250ZXh0IG9mIHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnp1bmN0aW9uIHRvIHJ1biBhbmQgYXNzaWduIHRoZSB0cmFjZSBjb250ZXh0IHRvLlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgY3JlYXRpb24gb2YgdGhlIHRyYWNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZVRyYWNlKGZuLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjdXJyZW50VHJhY2UgPSBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICBpZiAoY3VycmVudFRyYWNlKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xuICAgIH1cbiAgICBjb25zdCBuZXdUcmFjZSA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVUcmFjZShvcHRpb25zKTtcbiAgICBjb25zdCBuZXdDb250ZXh0ID0ge1xuICAgICAgICB0cmFjZTogbmV3VHJhY2UsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICB9O1xuICAgIGNvbnN0IHByZXZpb3VzQWxzU3RvcmUgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIHJldHVybiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5ydW4obmV3Q29udGV4dCwgX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbiwgbmV3Q29udGV4dCwgcHJldmlvdXNBbHNTdG9yZSkpO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgc2V0IHRoZSBjdXJyZW50IHNwYW4gaW4gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEBwYXJhbSBzcGFuIC0gVGhlIHNwYW4gdG8gc2V0IGFzIHRoZSBjdXJyZW50IHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50U3BhbihzcGFuKSB7XG4gICAgY29uc3QgY29udGV4dCA9IGdldEFjdGl2ZUNvbnRleHQoKTtcbiAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBleGlzdGluZyB0cmFjZSBmb3VuZCcpO1xuICAgIH1cbiAgICBpZiAoY29udGV4dC5zcGFuKSB7XG4gICAgICAgIGNvbnRleHQuc3Bhbi5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnByZXZpb3VzU3BhbjtcbiAgICAgICAgY29udGV4dC5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnNwYW47XG4gICAgfVxuICAgIHNwYW4ucHJldmlvdXNTcGFuID0gY29udGV4dC5zcGFuID8/IGNvbnRleHQucHJldmlvdXNTcGFuO1xuICAgIGNvbnRleHQuc3BhbiA9IHNwYW47XG4gICAgZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZW50ZXJXaXRoKGNvbnRleHQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q3VycmVudFNwYW4oKSB7XG4gICAgY29uc3QgY29udGV4dCA9IGdldEFjdGl2ZUNvbnRleHQoKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgICBjb250ZXh0LnNwYW4gPSBjb250ZXh0LnByZXZpb3VzU3BhbjtcbiAgICAgICAgY29udGV4dC5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnByZXZpb3VzU3Bhbj8ucHJldmlvdXNTcGFuO1xuICAgICAgICBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5lbnRlcldpdGgoY29udGV4dCk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYWRkIGFuIGVycm9yIHRvIHRoZSBjdXJyZW50IHNwYW4uXG4gKlxuICogQHBhcmFtIHNwYW5FcnJvciAtIFRoZSBlcnJvciB0byBhZGQgdG8gdGhlIGN1cnJlbnQgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVycm9yVG9DdXJyZW50U3BhbihzcGFuRXJyb3IpIHtcbiAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgaWYgKGN1cnJlbnRTcGFuKSB7XG4gICAgICAgIGN1cnJlbnRTcGFuLnNldEVycm9yKHNwYW5FcnJvcik7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2xvbmUgdGhlIGN1cnJlbnQgY29udGV4dCBieSBjcmVhdGluZyBuZXcgaW5zdGFuY2VzIG9mIHRoZSB0cmFjZSwgc3BhbiwgYW5kXG4gKiBwcmV2aW91cyBzcGFuLlxuICpcbiAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGNvbnRleHQgdG8gY2xvbmUuXG4gKiBAcmV0dXJucyBBIGNsb25lIG9mIHRoZSBjb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVDdXJyZW50Q29udGV4dChjb250ZXh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHJhY2U6IGNvbnRleHQudHJhY2U/LmNsb25lKCksXG4gICAgICAgIHNwYW46IGNvbnRleHQuc3Bhbj8uY2xvbmUoKSxcbiAgICAgICAgcHJldmlvdXNTcGFuOiBjb250ZXh0LnByZXZpb3VzU3Bhbj8uY2xvbmUoKSxcbiAgICAgICAgYWN0aXZlOiBjb250ZXh0LmFjdGl2ZSxcbiAgICB9O1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgcnVuIHRoZSBnaXZlbiBmdW5jdGlvbiB3aXRoIGEgbmV3IHNwYW4gY29udGV4dC5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gcnVuIHdpdGggdGhlIG5ldyBzcGFuIGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoTmV3U3BhbkNvbnRleHQoZm4pIHtcbiAgICBjb25zdCBjdXJyZW50Q29udGV4dCA9IGdldEFjdGl2ZUNvbnRleHQoKTtcbiAgICBpZiAoIWN1cnJlbnRDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgIH1cbiAgICBjb25zdCBjb3B5T2ZDb250ZXh0ID0gY2xvbmVDdXJyZW50Q29udGV4dChjdXJyZW50Q29udGV4dCk7XG4gICAgcmV0dXJuIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLnJ1bihjb3B5T2ZDb250ZXh0LCBmbik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250ZXh0Lm1qcy5tYXAiLCJpbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyB0aW1lciBhcyBfdGltZXIsIGlzVHJhY2luZ0xvb3BSdW5uaW5nQnlEZWZhdWx0LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IHRyYWNpbmcgfSBmcm9tIFwiLi4vY29uZmlnLm1qc1wiO1xuLyoqXG4gKiBQcmludHMgdGhlIHRyYWNlcyBhbmQgc3BhbnMgdG8gdGhlIGNvbnNvbGVcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnNvbGVTcGFuRXhwb3J0ZXIge1xuICAgIGFzeW5jIGV4cG9ydChpdGVtcykge1xuICAgICAgICBpZiAodHJhY2luZy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdUcmFjaW5nIGlzIGRpc2FibGVkLiBTa2lwcGluZyBleHBvcnQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd0cmFjZScpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0V4cG9ydGVyXSBFeHBvcnQgdHJhY2UgdHJhY2VJZD0ke2l0ZW0udHJhY2VJZH0gbmFtZT0ke2l0ZW0ubmFtZX0ke2l0ZW0uZ3JvdXBJZCA/IGAgZ3JvdXBJZD0ke2l0ZW0uZ3JvdXBJZH1gIDogJyd9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0V4cG9ydGVyXSBFeHBvcnQgc3BhbjogJHtKU09OLnN0cmluZ2lmeShpdGVtKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCYXRjaFRyYWNlUHJvY2Vzc29yIHtcbiAgICAjbWF4UXVldWVTaXplO1xuICAgICNtYXhCYXRjaFNpemU7XG4gICAgI3NjaGVkdWxlRGVsYXk7XG4gICAgI2V4cG9ydFRyaWdnZXJTaXplO1xuICAgICNleHBvcnRlcjtcbiAgICAjYnVmZmVyID0gW107XG4gICAgI3RpbWVyO1xuICAgICN0aW1lb3V0ID0gbnVsbDtcbiAgICAjZXhwb3J0SW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICN0aW1lb3V0QWJvcnRDb250cm9sbGVyID0gbnVsbDtcbiAgICBjb25zdHJ1Y3RvcihleHBvcnRlciwgeyBtYXhRdWV1ZVNpemUgPSAxMDAwLCBtYXhCYXRjaFNpemUgPSAxMDAsIHNjaGVkdWxlRGVsYXkgPSA1MDAwLCAvLyA1IHNlY29uZHNcbiAgICBleHBvcnRUcmlnZ2VyUmF0aW8gPSAwLjgsIH0gPSB7fSkge1xuICAgICAgICB0aGlzLiNtYXhRdWV1ZVNpemUgPSBtYXhRdWV1ZVNpemU7XG4gICAgICAgIHRoaXMuI21heEJhdGNoU2l6ZSA9IG1heEJhdGNoU2l6ZTtcbiAgICAgICAgdGhpcy4jc2NoZWR1bGVEZWxheSA9IHNjaGVkdWxlRGVsYXk7XG4gICAgICAgIHRoaXMuI2V4cG9ydFRyaWdnZXJTaXplID0gbWF4UXVldWVTaXplICogZXhwb3J0VHJpZ2dlclJhdGlvO1xuICAgICAgICB0aGlzLiNleHBvcnRlciA9IGV4cG9ydGVyO1xuICAgICAgICB0aGlzLiN0aW1lciA9IF90aW1lcjtcbiAgICAgICAgaWYgKGlzVHJhY2luZ0xvb3BSdW5uaW5nQnlEZWZhdWx0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQXV0b21hdGljIHRyYWNlIGV4cG9ydCBsb29wIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudC4gWW91IG5lZWQgdG8gbWFudWFsbHkgY2FsbCBgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmZvcmNlRmx1c2goKWAgdG8gZXhwb3J0IHRyYWNlcy4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy4jdGltZW91dEFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgdGhpcy4jcnVuRXhwb3J0TG9vcCgpO1xuICAgIH1cbiAgICBhc3luYyAjc2FmZUFkZEl0ZW0oaXRlbSkge1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmxlbmd0aCArIDEgPiB0aGlzLiNtYXhRdWV1ZVNpemUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRHJvcHBpbmcgdHJhY2UgYmVjYXVzZSBidWZmZXIgaXMgZnVsbCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCB0aGUgaXRlbSB0byB0aGUgYnVmZmVyXG4gICAgICAgIHRoaXMuI2J1ZmZlci5wdXNoKGl0ZW0pO1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmxlbmd0aCA+IHRoaXMuI2V4cG9ydFRyaWdnZXJTaXplKSB7XG4gICAgICAgICAgICAvLyBzdGFydCBleHBvcnRpbmcgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjcnVuRXhwb3J0TG9vcCgpIHtcbiAgICAgICAgdGhpcy4jdGltZW91dCA9IHRoaXMuI3RpbWVyLnNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gc2NoZWR1bGVkIGV4cG9ydFxuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcygpO1xuICAgICAgICAgICAgdGhpcy4jcnVuRXhwb3J0TG9vcCgpO1xuICAgICAgICB9LCB0aGlzLiNzY2hlZHVsZURlbGF5KTtcbiAgICAgICAgLy8gV2Ugc2V0IHRoaXMgc28gdGhhdCBOb2RlIG5vIGxvbmdlciBjb25zaWRlcnMgdGhpcyBwYXJ0IG9mIHRoZSBldmVudCBsb29wIGFuZCBrZWVwcyB0aGVcbiAgICAgICAgLy8gcHJvY2VzcyBhbGl2ZSB1bnRpbCB0aGUgdGltZXIgaXMgZG9uZS5cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLiN0aW1lb3V0LnVucmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLiN0aW1lb3V0LnVucmVmKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgI2V4cG9ydEJhdGNoZXMoZm9yY2UgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgRXhwb3J0aW5nIGJhdGNoZXMuIEZvcmNlOiAke2ZvcmNlfS4gQnVmZmVyIHNpemU6ICR7dGhpcy4jYnVmZmVyLmxlbmd0aH1gKTtcbiAgICAgICAgaWYgKGZvcmNlIHx8IHRoaXMuI2J1ZmZlci5sZW5ndGggPCB0aGlzLiNtYXhCYXRjaFNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvRXhwb3J0ID0gWy4uLnRoaXMuI2J1ZmZlcl07XG4gICAgICAgICAgICB0aGlzLiNidWZmZXIgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0ZXIuZXhwb3J0KHRvRXhwb3J0KTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgYmF0Y2ggPSB0aGlzLiNidWZmZXIuc3BsaWNlKDAsIHRoaXMuI21heEJhdGNoU2l6ZSk7XG4gICAgICAgICAgICB0aGlzLiNleHBvcnRJblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydGVyLmV4cG9ydChiYXRjaCk7XG4gICAgICAgICAgICB0aGlzLiNleHBvcnRJblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25UcmFjZVN0YXJ0KHRyYWNlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NhZmVBZGRJdGVtKHRyYWNlKTtcbiAgICB9XG4gICAgYXN5bmMgb25UcmFjZUVuZChfdHJhY2UpIHtcbiAgICAgICAgLy8gV2UgZG9uJ3Qgc2VuZCB0cmFjZXMgb24gZW5kIGJlY2F1c2Ugd2UgYWxyZWFkeSBzZW5kIHRoZW0gb24gc3RhcnRcbiAgICB9XG4gICAgYXN5bmMgb25TcGFuU3RhcnQoX3NwYW4pIHtcbiAgICAgICAgLy8gV2UgZG9uJ3Qgc2VuZCBzcGFucyBvbiBzdGFydCBiZWNhdXNlIHdlIHNlbmQgdGhlbSBhdCB0aGUgZW5kXG4gICAgfVxuICAgIGFzeW5jIG9uU3BhbkVuZChzcGFuKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NhZmVBZGRJdGVtKHNwYW4pO1xuICAgIH1cbiAgICBhc3luYyBzaHV0ZG93bih0aW1lb3V0KSB7XG4gICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLiN0aW1lci5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBmb3JjZSBzaHV0ZG93biB0aGUgSFRUUCByZXF1ZXN0XG4gICAgICAgICAgICAgICAgdGhpcy4jdGltZW91dEFib3J0Q29udHJvbGxlcj8uYWJvcnQoKTtcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnU2h1dHRpbmcgZG93biBncmFjZWZ1bGx5Jyk7XG4gICAgICAgIHdoaWxlICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBXYWl0aW5nIGZvciBidWZmZXIgdG8gZW1wdHkuIEl0ZW1zIGxlZnQ6ICR7dGhpcy4jYnVmZmVyLmxlbmd0aH1gKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcykge1xuICAgICAgICAgICAgICAgIC8vIG5vIGN1cnJlbnQgZXhwb3J0IGluIHByb2dyZXNzLiBGb3JjaW5nIGFsbCBpdGVtcyB0byBiZSBleHBvcnRlZFxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy4jdGltZW91dEFib3J0Q29udHJvbGxlcj8uc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RpbWVvdXQgcmVhY2hlZCwgZm9yY2UgZmx1c2hpbmcnKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdXNpbmcgc2V0VGltZW91dCB0byBhZGQgdG8gdGhlIGV2ZW50IGxvb3AgYW5kIGtlZXAgdGhpcyBhbGl2ZSB1bnRpbCBkb25lXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gdGhpcy4jdGltZXIuc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoJ0J1ZmZlciBlbXB0eS4gRXhpdGluZycpO1xuICAgICAgICBpZiAodGhpcy4jdGltZXIgJiYgdGhpcy4jdGltZW91dCkge1xuICAgICAgICAgICAgLy8gbWFraW5nIHN1cmUgdGhlcmUgYXJlIG5vIG1vcmUgcmVxdWVzdHNcbiAgICAgICAgICAgIHRoaXMuI3RpbWVyLmNsZWFyVGltZW91dCh0aGlzLiN0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmb3JjZUZsdXNoKCkge1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTXVsdGlUcmFjaW5nUHJvY2Vzc29yIHtcbiAgICAjcHJvY2Vzc29ycyA9IFtdO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzc29yLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc29yLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkVHJhY2VQcm9jZXNzb3IocHJvY2Vzc29yKSB7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvcnMucHVzaChwcm9jZXNzb3IpO1xuICAgIH1cbiAgICBzZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIG9sZCBwcm9jZXNzb3JzJyk7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIHByb2Nlc3Nvci5zaHV0ZG93bigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvcnMgPSBwcm9jZXNzb3JzO1xuICAgIH1cbiAgICBhc3luYyBvblRyYWNlU3RhcnQodHJhY2UpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLm9uVHJhY2VTdGFydCh0cmFjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25UcmFjZUVuZCh0cmFjZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25UcmFjZUVuZCh0cmFjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25TcGFuU3RhcnQoc3Bhbikge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25TcGFuU3RhcnQoc3Bhbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25TcGFuRW5kKHNwYW4pIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLm9uU3BhbkVuZChzcGFuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzaHV0ZG93bih0aW1lb3V0KSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5zaHV0ZG93bih0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmb3JjZUZsdXNoKCkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3IuZm9yY2VGbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IF9kZWZhdWx0RXhwb3J0ZXIgPSBudWxsO1xubGV0IF9kZWZhdWx0UHJvY2Vzc29yID0gbnVsbDtcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0RXhwb3J0ZXIoKSB7XG4gICAgaWYgKCFfZGVmYXVsdEV4cG9ydGVyKSB7XG4gICAgICAgIF9kZWZhdWx0RXhwb3J0ZXIgPSBuZXcgQ29uc29sZVNwYW5FeHBvcnRlcigpO1xuICAgIH1cbiAgICByZXR1cm4gX2RlZmF1bHRFeHBvcnRlcjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0UHJvY2Vzc29yKCkge1xuICAgIGlmICghX2RlZmF1bHRQcm9jZXNzb3IpIHtcbiAgICAgICAgX2RlZmF1bHRQcm9jZXNzb3IgPSBuZXcgQmF0Y2hUcmFjZVByb2Nlc3NvcihkZWZhdWx0RXhwb3J0ZXIoKSk7XG4gICAgfVxuICAgIHJldHVybiBfZGVmYXVsdFByb2Nlc3Nvcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb2Nlc3Nvci5tanMubWFwIiwiaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbi8qKlxuICogR2VuZXJhdGUgYW4gSVNPIDg2MDEgdGltZXN0YW1wIG9mIHRoZSBjdXJyZW50IHRpbWUuXG4gKiBAcmV0dXJucyBBbiBJU08gODYwMSB0aW1lc3RhbXAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0aW1lSXNvKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG59XG4vKipcbiAqIEdlbmVyYXRlIGEgdHJhY2UgSUQgYnkgY3JlYXRpbmcgYSByYW5kb20gVVVJRCB2NCBhbmQgcmVtb3ZpbmcgdGhlIGRhc2hlcy4gVGhpcyBpcyB0aGUgZXF1aXZhbGVudFxuICogb2YgYHV1aWQ0KCkuaGV4YCBpbiBQeXRob24gYW5kIHByZWZpeGluZyBpdCB3aXRoIGB0cmFjZV9gLlxuICogQHJldHVybnMgQSB0cmFjZSBJRC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVHJhY2VJZCgpIHtcbiAgICByZXR1cm4gYHRyYWNlXyR7cmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpfWA7XG59XG4vKipcbiAqIEdlbmVyYXRlIGEgc3BhbiBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYHNwYW5fYC5cbiAqIEByZXR1cm5zIEEgc3BhbiBJRC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlU3BhbklkKCkge1xuICAgIHJldHVybiBgc3Bhbl8ke3JhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKS5zbGljZSgwLCAyNCl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSBncm91cCBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYGdyb3VwX2AuXG4gKiBAcmV0dXJucyBBIGdyb3VwIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVHcm91cElkKCkge1xuICAgIHJldHVybiBgZ3JvdXBfJHtyYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLCAnJykuc2xpY2UoMCwgMjQpfWA7XG59XG4vKipcbiAqIFJlbW92ZSBmaWVsZHMgdGhhdCBzdGFydCB3aXRoIGFuIHVuZGVyc2NvcmUgZnJvbSBhbiBvYmplY3QuXG4gKiBAcGFyYW0gb2JqIC0gVGhlIG9iamVjdCB0byByZW1vdmUgcHJpdmF0ZSBmaWVsZHMgZnJvbS5cbiAqIEByZXR1cm5zIEEgbmV3IG9iamVjdCB3aXRoIHByaXZhdGUgZmllbGRzIHJlbW92ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVQcml2YXRlRmllbGRzKG9iaikge1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqKS5maWx0ZXIoKFtrZXldKSA9PiAha2V5LnN0YXJ0c1dpdGgoJ18nKSkpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4uL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlU3BhbklkLCByZW1vdmVQcml2YXRlRmllbGRzLCB0aW1lSXNvIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgY2xhc3MgU3BhbiB7XG4gICAgdHlwZSA9ICd0cmFjZS5zcGFuJztcbiAgICAjZGF0YTtcbiAgICAjdHJhY2VJZDtcbiAgICAjc3BhbklkO1xuICAgICNwYXJlbnRJZDtcbiAgICAjcHJvY2Vzc29yO1xuICAgICNzdGFydGVkQXQ7XG4gICAgI2VuZGVkQXQ7XG4gICAgI2Vycm9yO1xuICAgICN0cmFjaW5nQXBpS2V5O1xuICAgICNwcmV2aW91c1NwYW47XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgcHJvY2Vzc29yKSB7XG4gICAgICAgIHRoaXMuI3RyYWNlSWQgPSBvcHRpb25zLnRyYWNlSWQ7XG4gICAgICAgIHRoaXMuI3NwYW5JZCA9IG9wdGlvbnMuc3BhbklkID8/IGdlbmVyYXRlU3BhbklkKCk7XG4gICAgICAgIHRoaXMuI2RhdGEgPSBvcHRpb25zLmRhdGE7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvciA9IHByb2Nlc3NvcjtcbiAgICAgICAgdGhpcy4jcGFyZW50SWQgPSBvcHRpb25zLnBhcmVudElkID8/IG51bGw7XG4gICAgICAgIHRoaXMuI2Vycm9yID0gb3B0aW9ucy5lcnJvciA/PyBudWxsO1xuICAgICAgICB0aGlzLiNzdGFydGVkQXQgPSBvcHRpb25zLnN0YXJ0ZWRBdCA/PyBudWxsO1xuICAgICAgICB0aGlzLiNlbmRlZEF0ID0gb3B0aW9ucy5lbmRlZEF0ID8/IG51bGw7XG4gICAgICAgIHRoaXMuI3RyYWNpbmdBcGlLZXkgPSBvcHRpb25zLnRyYWNpbmdBcGlLZXk7XG4gICAgfVxuICAgIGdldCB0cmFjZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdHJhY2VJZDtcbiAgICB9XG4gICAgZ2V0IHNwYW5EYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZGF0YTtcbiAgICB9XG4gICAgZ2V0IHNwYW5JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3NwYW5JZDtcbiAgICB9XG4gICAgZ2V0IHBhcmVudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcGFyZW50SWQ7XG4gICAgfVxuICAgIGdldCBwcmV2aW91c1NwYW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwcmV2aW91c1NwYW47XG4gICAgfVxuICAgIHNldCBwcmV2aW91c1NwYW4oc3Bhbikge1xuICAgICAgICB0aGlzLiNwcmV2aW91c1NwYW4gPSBzcGFuO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXJ0ZWRBdCkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1NwYW4gYWxyZWFkeSBzdGFydGVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhcnRlZEF0ID0gdGltZUlzbygpO1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3Iub25TcGFuU3RhcnQodGhpcyk7XG4gICAgfVxuICAgIGVuZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI2VuZGVkQXQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnU3BhbiBhbHJlYWR5IGZpbmlzaGVkJywgdGhpcy5zcGFuRGF0YSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jZW5kZWRBdCA9IHRpbWVJc28oKTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yLm9uU3BhbkVuZCh0aGlzKTtcbiAgICB9XG4gICAgc2V0RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy4jZXJyb3IgPSBlcnJvcjtcbiAgICB9XG4gICAgZ2V0IGVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZXJyb3I7XG4gICAgfVxuICAgIGdldCBzdGFydGVkQXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGFydGVkQXQ7XG4gICAgfVxuICAgIGdldCBlbmRlZEF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZW5kZWRBdDtcbiAgICB9XG4gICAgZ2V0IHRyYWNpbmdBcGlLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFjaW5nQXBpS2V5O1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IG5ldyBTcGFuKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIHNwYW5JZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICBwYXJlbnRJZDogdGhpcy5wYXJlbnRJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBkYXRhOiB0aGlzLnNwYW5EYXRhLFxuICAgICAgICAgICAgc3RhcnRlZEF0OiB0aGlzLiNzdGFydGVkQXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgZW5kZWRBdDogdGhpcy4jZW5kZWRBdCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBlcnJvcjogdGhpcy4jZXJyb3IgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgdHJhY2luZ0FwaUtleTogdGhpcy4jdHJhY2luZ0FwaUtleSxcbiAgICAgICAgfSwgdGhpcy4jcHJvY2Vzc29yKTtcbiAgICAgICAgc3Bhbi5wcmV2aW91c1NwYW4gPSB0aGlzLnByZXZpb3VzU3Bhbj8uY2xvbmUoKTtcbiAgICAgICAgcmV0dXJuIHNwYW47XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9iamVjdDogdGhpcy50eXBlLFxuICAgICAgICAgICAgaWQ6IHRoaXMuc3BhbklkLFxuICAgICAgICAgICAgdHJhY2VfaWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIHBhcmVudF9pZDogdGhpcy5wYXJlbnRJZCxcbiAgICAgICAgICAgIHN0YXJ0ZWRfYXQ6IHRoaXMuc3RhcnRlZEF0LFxuICAgICAgICAgICAgZW5kZWRfYXQ6IHRoaXMuZW5kZWRBdCxcbiAgICAgICAgICAgIHNwYW5fZGF0YTogcmVtb3ZlUHJpdmF0ZUZpZWxkcyh0aGlzLnNwYW5EYXRhKSxcbiAgICAgICAgICAgIGVycm9yOiB0aGlzLmVycm9yLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBOb29wU3BhbiBleHRlbmRzIFNwYW4ge1xuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHByb2Nlc3Nvcikge1xuICAgICAgICBzdXBlcih7IHRyYWNlSWQ6ICduby1vcCcsIHNwYW5JZDogJ25vLW9wJywgZGF0YSB9LCBwcm9jZXNzb3IpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbmQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0RXJyb3IoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zcGFucy5tanMubWFwIiwiaW1wb3J0IHsgZGVmYXVsdFByb2Nlc3NvciB9IGZyb20gXCIuL3Byb2Nlc3Nvci5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFRyYWNlIHtcbiAgICB0eXBlID0gJ3RyYWNlJztcbiAgICB0cmFjZUlkO1xuICAgIG5hbWU7XG4gICAgZ3JvdXBJZCA9IG51bGw7XG4gICAgbWV0YWRhdGE7XG4gICAgdHJhY2luZ0FwaUtleTtcbiAgICAjcHJvY2Vzc29yO1xuICAgICNzdGFydGVkO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLnRyYWNlSWQgPSBvcHRpb25zLnRyYWNlSWQgPz8gZ2VuZXJhdGVUcmFjZUlkKCk7XG4gICAgICAgIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZSA/PyAnQWdlbnQgd29ya2Zsb3cnO1xuICAgICAgICB0aGlzLmdyb3VwSWQgPSBvcHRpb25zLmdyb3VwSWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnMubWV0YWRhdGEgPz8ge307XG4gICAgICAgIHRoaXMudHJhY2luZ0FwaUtleSA9IG9wdGlvbnMudHJhY2luZ0FwaUtleTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yID0gcHJvY2Vzc29yID8/IGRlZmF1bHRQcm9jZXNzb3IoKTtcbiAgICAgICAgdGhpcy4jc3RhcnRlZCA9IG9wdGlvbnMuc3RhcnRlZCA/PyBmYWxzZTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGFydGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIGF3YWl0IHRoaXMuI3Byb2Nlc3Nvci5vblRyYWNlU3RhcnQodGhpcyk7XG4gICAgfVxuICAgIGFzeW5jIGVuZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNzdGFydGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICBhd2FpdCB0aGlzLiNwcm9jZXNzb3Iub25UcmFjZUVuZCh0aGlzKTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJhY2Uoe1xuICAgICAgICAgICAgdHJhY2VJZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgZ3JvdXBJZDogdGhpcy5ncm91cElkID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB0aGlzLm1ldGFkYXRhLFxuICAgICAgICAgICAgc3RhcnRlZDogdGhpcy4jc3RhcnRlZCxcbiAgICAgICAgICAgIHRyYWNpbmdBcGlLZXk6IHRoaXMudHJhY2luZ0FwaUtleSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZXMgdGhlIHRyYWNlIGZvciBleHBvcnQgb3IgcGVyc2lzdGVuY2UuXG4gICAgICogU2V0IGBpbmNsdWRlVHJhY2luZ0FwaUtleWAgdG8gdHJ1ZSBvbmx5IHdoZW4geW91IGludGVudGlvbmFsbHkgbmVlZCB0byBwZXJzaXN0IHRoZVxuICAgICAqIGV4cG9ydGVyIGNyZWRlbnRpYWxzIChmb3IgZXhhbXBsZSwgd2hlbiBoYW5kaW5nIG9mZiBhIHJ1biB0byBhbm90aGVyIHByb2Nlc3MgdGhhdFxuICAgICAqIGNhbm5vdCBhY2Nlc3MgdGhlIG9yaWdpbmFsIGVudmlyb25tZW50KS4gRGVmYXVsdHMgdG8gZmFsc2UgdG8gYXZvaWQgbGVha2luZyBzZWNyZXRzLlxuICAgICAqL1xuICAgIHRvSlNPTihvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGJhc2UgPSB7XG4gICAgICAgICAgICBvYmplY3Q6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIGlkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBncm91cF9pZDogdGhpcy5ncm91cElkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMubWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvcHRpb25zPy5pbmNsdWRlVHJhY2luZ0FwaUtleSAmJiB0aGlzLnRyYWNpbmdBcGlLZXkpIHtcbiAgICAgICAgICAgIGJhc2UudHJhY2luZ19hcGlfa2V5ID0gdGhpcy50cmFjaW5nQXBpS2V5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYXNlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBOb29wVHJhY2UgZXh0ZW5kcyBUcmFjZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKHt9KTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXN5bmMgZW5kKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhY2VzLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRDdXJyZW50U3BhbiwgZ2V0Q3VycmVudFRyYWNlIH0gZnJvbSBcIi4vY29udGV4dC5tanNcIjtcbmltcG9ydCB7IHRyYWNpbmcgfSBmcm9tIFwiLi4vY29uZmlnLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgTXVsdGlUcmFjaW5nUHJvY2Vzc29yIH0gZnJvbSBcIi4vcHJvY2Vzc29yLm1qc1wiO1xuaW1wb3J0IHsgTm9vcFNwYW4sIFNwYW4gfSBmcm9tIFwiLi9zcGFucy5tanNcIjtcbmltcG9ydCB7IE5vb3BUcmFjZSwgVHJhY2UgfSBmcm9tIFwiLi90cmFjZXMubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVRyYWNlSWQgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCBjbGFzcyBUcmFjZVByb3ZpZGVyIHtcbiAgICAjbXVsdGlQcm9jZXNzb3I7XG4gICAgI2Rpc2FibGVkO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3NvciA9IG5ldyBNdWx0aVRyYWNpbmdQcm9jZXNzb3IoKTtcbiAgICAgICAgdGhpcy4jZGlzYWJsZWQgPSB0cmFjaW5nLmRpc2FibGVkO1xuICAgICAgICB0aGlzLiNhZGRDbGVhbnVwTGlzdGVuZXJzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIHByb2Nlc3NvciB0byB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBFYWNoIHByb2Nlc3NvciB3aWxsIHJlY2VpdmUgYWxsIHRyYWNlcy9zcGFucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcm9jZXNzb3IgLSBUaGUgcHJvY2Vzc29yIHRvIGFkZC5cbiAgICAgKi9cbiAgICByZWdpc3RlclByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jbXVsdGlQcm9jZXNzb3IuYWRkVHJhY2VQcm9jZXNzb3IocHJvY2Vzc29yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIFRoaXMgd2lsbCByZXBsYWNlIGFueSBleGlzdGluZyBwcm9jZXNzb3JzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByb2Nlc3NvcnMgLSBUaGUgbGlzdCBvZiBwcm9jZXNzb3JzIHRvIHNldC5cbiAgICAgKi9cbiAgICBzZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpIHtcbiAgICAgICAgdGhpcy4jbXVsdGlQcm9jZXNzb3Iuc2V0UHJvY2Vzc29ycyhwcm9jZXNzb3JzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50IHRyYWNlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGN1cnJlbnQgdHJhY2UuXG4gICAgICovXG4gICAgZ2V0Q3VycmVudFRyYWNlKCkge1xuICAgICAgICByZXR1cm4gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgfVxuICAgIGdldEN1cnJlbnRTcGFuKCkge1xuICAgICAgICByZXR1cm4gZ2V0Q3VycmVudFNwYW4oKTtcbiAgICB9XG4gICAgc2V0RGlzYWJsZWQoZGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy4jZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgICB9XG4gICAgc3RhcnRFeHBvcnRMb29wKCkge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zdGFydCgpO1xuICAgIH1cbiAgICBjcmVhdGVUcmFjZSh0cmFjZU9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuI2Rpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQsIE5vdCBjcmVhdGluZyB0cmFjZSAlbycsIHRyYWNlT3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BUcmFjZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRyYWNlSWQgPSB0cmFjZU9wdGlvbnMudHJhY2VJZCA/PyBnZW5lcmF0ZVRyYWNlSWQoKTtcbiAgICAgICAgY29uc3QgbmFtZSA9IHRyYWNlT3B0aW9ucy5uYW1lID8/ICdBZ2VudCB3b3JrZmxvdyc7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQ3JlYXRpbmcgdHJhY2UgJXMgd2l0aCBuYW1lICVzJywgdHJhY2VJZCwgbmFtZSk7XG4gICAgICAgIHJldHVybiBuZXcgVHJhY2UoeyAuLi50cmFjZU9wdGlvbnMsIG5hbWUsIHRyYWNlSWQgfSwgdGhpcy4jbXVsdGlQcm9jZXNzb3IpO1xuICAgIH1cbiAgICBjcmVhdGVTcGFuKHNwYW5PcHRpb25zLCBwYXJlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuI2Rpc2FibGVkIHx8IHNwYW5PcHRpb25zLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQsIE5vdCBjcmVhdGluZyBzcGFuICVvJywgc3Bhbk9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcmVudElkO1xuICAgICAgICBsZXQgdHJhY2VJZDtcbiAgICAgICAgbGV0IHRyYWNpbmdBcGlLZXk7XG4gICAgICAgIGlmICghcGFyZW50KSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VHJhY2UgPSBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgIGlmICghY3VycmVudFRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdObyBhY3RpdmUgdHJhY2UuIE1ha2Ugc3VyZSB0byBzdGFydCBhIHRyYWNlIHdpdGggYHdpdGhUcmFjZSgpYCBmaXJzdC4gUmV0dXJuaW5nIE5vb3BTcGFuLicpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcFNwYW4oc3Bhbk9wdGlvbnMuZGF0YSwgdGhpcy4jbXVsdGlQcm9jZXNzb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1cnJlbnRTcGFuIGluc3RhbmNlb2YgTm9vcFNwYW4gfHxcbiAgICAgICAgICAgICAgICBjdXJyZW50VHJhY2UgaW5zdGFuY2VvZiBOb29wVHJhY2UpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYFBhcmVudCAke2N1cnJlbnRTcGFufSBvciAke2N1cnJlbnRUcmFjZX0gaXMgbm8tb3AsIHJldHVybmluZyBOb29wU3BhbmApO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcFNwYW4oc3Bhbk9wdGlvbnMuZGF0YSwgdGhpcy4jbXVsdGlQcm9jZXNzb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2VJZCA9IGN1cnJlbnRUcmFjZS50cmFjZUlkO1xuICAgICAgICAgICAgdHJhY2luZ0FwaUtleSA9IGN1cnJlbnRUcmFjZS50cmFjaW5nQXBpS2V5O1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdVc2luZyBwYXJlbnQgc3BhbiAlcycsIGN1cnJlbnRTcGFuLnNwYW5JZCk7XG4gICAgICAgICAgICAgICAgcGFyZW50SWQgPSBjdXJyZW50U3Bhbi5zcGFuSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ05vIHBhcmVudCBzcGFuLCB1c2luZyBjdXJyZW50IHRyYWNlICVzJywgY3VycmVudFRyYWNlLnRyYWNlSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhcmVudCBpbnN0YW5jZW9mIFRyYWNlKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgTm9vcFRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdQYXJlbnQgdHJhY2UgaXMgbm8tb3AsIHJldHVybmluZyBOb29wU3BhbicpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcFNwYW4oc3Bhbk9wdGlvbnMuZGF0YSwgdGhpcy4jbXVsdGlQcm9jZXNzb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2VJZCA9IHBhcmVudC50cmFjZUlkO1xuICAgICAgICAgICAgdHJhY2luZ0FwaUtleSA9IHBhcmVudC50cmFjaW5nQXBpS2V5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhcmVudCBpbnN0YW5jZW9mIFNwYW4pIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBOb29wU3Bhbikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUGFyZW50IHNwYW4gaXMgbm8tb3AsIHJldHVybmluZyBOb29wU3BhbicpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcFNwYW4oc3Bhbk9wdGlvbnMuZGF0YSwgdGhpcy4jbXVsdGlQcm9jZXNzb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50SWQgPSBwYXJlbnQuc3BhbklkO1xuICAgICAgICAgICAgdHJhY2VJZCA9IHBhcmVudC50cmFjZUlkO1xuICAgICAgICAgICAgdHJhY2luZ0FwaUtleSA9IHBhcmVudC50cmFjaW5nQXBpS2V5O1xuICAgICAgICB9XG4gICAgICAgIGlmICghdHJhY2VJZCkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdObyB0cmFjZUlkIGZvdW5kLiBNYWtlIHN1cmUgdG8gc3RhcnQgYSB0cmFjZSB3aXRoIGB3aXRoVHJhY2UoKWAgZmlyc3QuIFJldHVybmluZyBOb29wU3Bhbi4nKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcFNwYW4oc3Bhbk9wdGlvbnMuZGF0YSwgdGhpcy4jbXVsdGlQcm9jZXNzb3IpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ3JlYXRpbmcgc3BhbiAke0pTT04uc3RyaW5naWZ5KHNwYW5PcHRpb25zLmRhdGEpfSB3aXRoIGlkICR7c3Bhbk9wdGlvbnMuc3BhbklkID8/IHRyYWNlSWR9YCk7XG4gICAgICAgIHJldHVybiBuZXcgU3Bhbih7XG4gICAgICAgICAgICAuLi5zcGFuT3B0aW9ucyxcbiAgICAgICAgICAgIHRyYWNlSWQsXG4gICAgICAgICAgICBwYXJlbnRJZCxcbiAgICAgICAgICAgIHRyYWNpbmdBcGlLZXk6IHRyYWNpbmdBcGlLZXkgPz8gc3Bhbk9wdGlvbnMudHJhY2luZ0FwaUtleSxcbiAgICAgICAgfSwgdGhpcy4jbXVsdGlQcm9jZXNzb3IpO1xuICAgIH1cbiAgICBhc3luYyBzaHV0ZG93bih0aW1lb3V0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1NodXR0aW5nIGRvd24gdHJhY2luZyBwcm92aWRlcicpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jbXVsdGlQcm9jZXNzb3Iuc2h1dGRvd24odGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHNodXR0aW5nIGRvd24gdHJhY2luZyBwcm92aWRlciAlbycsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQWRkcyBsaXN0ZW5lcnMgdG8gYHByb2Nlc3NgIHRvIGVuc3VyZSBgc2h1dGRvd25gIG9jY3VycyBiZWZvcmUgZXhpdC4gKi9cbiAgICAjYWRkQ2xlYW51cExpc3RlbmVycygpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2Vzcy5vbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgLy8gaGFuZGxpbmcgTm9kZS5qcyBwcm9jZXNzIHRlcm1pbmF0aW9uXG4gICAgICAgICAgICBjb25zdCBjbGVhbnVwID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdDbGVhbnVwIHRpbWVvdXQsIGZvcmNpbmcgZXhpdCcpO1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgICAgICAgfSwgNTAwMCk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zaHV0ZG93bigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBIYW5kbGUgbm9ybWFsIHRlcm1pbmF0aW9uXG4gICAgICAgICAgICBwcm9jZXNzLm9uKCdiZWZvcmVFeGl0JywgY2xlYW51cCk7XG4gICAgICAgICAgICAvLyBIYW5kbGUgQ1RSTCtDIChTSUdJTlQpXG4gICAgICAgICAgICBwcm9jZXNzLm9uKCdTSUdJTlQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzT3RoZXJMaXN0ZW5lcnNGb3JTaWduYWxzKCdTSUdJTlQnKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHdoZW4gdGhlcmUgYXJlIG5vIG90aGVyIGxpc3RlbmVycywgZXhpdCB0aGUgcHJvY2VzcyBvbiB0aGlzIFNESyBzaWRlXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxMzApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gSGFuZGxlIHRlcm1pbmF0aW9uIChTSUdURVJNKVxuICAgICAgICAgICAgcHJvY2Vzcy5vbignU0lHVEVSTScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNPdGhlckxpc3RlbmVyc0ZvclNpZ25hbHMoJ1NJR1RFUk0nKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHdoZW4gdGhlcmUgYXJlIG5vIG90aGVyIGxpc3RlbmVycywgZXhpdCB0aGUgcHJvY2VzcyBvbiB0aGlzIFNESyBzaWRlXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIGFzeW5jIChyZWFzb24sIHByb21pc2UpID0+IHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1VuaGFuZGxlZCByZWplY3Rpb24nLCByZWFzb24sIHByb21pc2UpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc090aGVyTGlzdGVuZXJzRm9yRXZlbnRzKCd1bmhhbmRsZWRSZWplY3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHdoZW4gdGhlcmUgYXJlIG5vIG90aGVyIGxpc3RlbmVycywgZXhpdCB0aGUgcHJvY2VzcyBvbiB0aGlzIFNESyBzaWRlXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmb3JjZUZsdXNoKCkge1xuICAgICAgICBhd2FpdCB0aGlzLiNtdWx0aVByb2Nlc3Nvci5mb3JjZUZsdXNoKCk7XG4gICAgfVxufVxubGV0IG1vZHVsZVRyYWNlUHJvdmlkZXI7XG5mdW5jdGlvbiBoYXNPdGhlckxpc3RlbmVyc0ZvclNpZ25hbHMoZXZlbnQpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aCA+IDE7XG59XG5mdW5jdGlvbiBoYXNPdGhlckxpc3RlbmVyc0ZvckV2ZW50cyhldmVudCkge1xuICAgIHJldHVybiBwcm9jZXNzLmxpc3RlbmVycyhldmVudCkubGVuZ3RoID4gMTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkge1xuICAgIGNvbnN0IHN5bWJvbCA9IFN5bWJvbC5mb3IoJ29wZW5haS5hZ2VudHMuY29yZS50cmFjZVByb3ZpZGVyJyk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZ2xvYmFsSG9sZGVyID0gZ2xvYmFsVGhpcztcbiAgICAgICAgLy8gQXZvaWQgY29uc3RydWN0aW5nIGV4dHJhIHByb3ZpZGVycyB3aGVuIGdsb2JhbFRoaXMgaXMgZnJvemVuL3NlYWxlZC4gV2VcbiAgICAgICAgLy8gZmlyc3Qgc2hvcnQtY2lyY3VpdCBvbiBleGlzdGluZyBpbnN0YW5jZXMsIHRoZW4gY2hlY2sgd3JpdGFiaWxpdHkgYmVmb3JlXG4gICAgICAgIC8vIGluc3RhbnRpYXRpb24gc28gaGFyZGVuZWQgcnVudGltZXMgZG8gbm90IGxlYWsgY29uc3RydWN0b3JzIG9yIGxpc3RlbmVycy5cbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBnbG9iYWxIb2xkZXJbc3ltYm9sXTtcbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhpc3Rpbmc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZ2xvYmFsSG9sZGVyLCBzeW1ib2wpO1xuICAgICAgICBpZiAoZGVzY3JpcHRvciAmJlxuICAgICAgICAgICAgZGVzY3JpcHRvci53cml0YWJsZSA9PT0gZmFsc2UgJiZcbiAgICAgICAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID09PSBmYWxzZSAmJlxuICAgICAgICAgICAgIWRlc2NyaXB0b3Iuc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0TW9kdWxlVHJhY2VQcm92aWRlcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsSG9sZGVyLCBzeW1ib2wsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0TW9kdWxlVHJhY2VQcm92aWRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBUcmFjZVByb3ZpZGVyKCk7XG4gICAgICAgICAgICBnbG9iYWxIb2xkZXJbc3ltYm9sXSA9IHByb3ZpZGVyO1xuICAgICAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRNb2R1bGVUcmFjZVByb3ZpZGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICAvLyBIYXJkZW5lZCBydW50aW1lcyBjYW4gZnJlZXplIG9yIHNlYWwgZ2xvYmFsVGhpczsgZmFsbCBiYWNrIHRvIGFcbiAgICAgICAgLy8gbW9kdWxlLWxvY2FsIHNpbmdsZXRvbiBpbnN0ZWFkIG9mIHRocm93aW5nIHNvIHRyYWNpbmcgc3RpbGwgd29ya3MuXG4gICAgICAgIHJldHVybiBnZXRNb2R1bGVUcmFjZVByb3ZpZGVyKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0TW9kdWxlVHJhY2VQcm92aWRlcigpIHtcbiAgICBpZiAoIW1vZHVsZVRyYWNlUHJvdmlkZXIpIHtcbiAgICAgICAgbW9kdWxlVHJhY2VQcm92aWRlciA9IG5ldyBUcmFjZVByb3ZpZGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBtb2R1bGVUcmFjZVByb3ZpZGVyO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdmlkZXIubWpzLm1hcCIsImltcG9ydCB7IHJlc2V0Q3VycmVudFNwYW4sIHNldEN1cnJlbnRTcGFuLCB3aXRoTmV3U3BhbkNvbnRleHQsIH0gZnJvbSBcIi4vY29udGV4dC5tanNcIjtcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmZ1bmN0aW9uIF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3Bhbikge1xuICAgIHJldHVybiBhc3luYyAoZm4sIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgLy8gQ3JlYXRpbmcgYSBuZXcgc3BhbiBjb250ZXh0IHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBwcmV2aW91cyBzcGFuIGlzIGNvcnJlY3RseSByZXNldFxuICAgICAgICByZXR1cm4gd2l0aE5ld1NwYW5Db250ZXh0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNwYW4gPSBjcmVhdGVTcGFuKC4uLmFyZ3MpO1xuICAgICAgICAgICAgc2V0Q3VycmVudFNwYW4oc3Bhbik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNwYW4uc3RhcnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgZm4oc3Bhbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZXJyb3IuZGF0YSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgcmVzcG9uc2Ugc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoUmVzcG9uc2VTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBUaGlzIHNwYW4gY2FwdHVyZXMgdGhlIGRldGFpbHMgb2YgYSBtb2RlbCByZXNwb25zZSwgcHJpbWFyaWx5IHRoZSByZXNwb25zZSBpZGVudGlmaWVyLlxuICogSWYgeW91IG5lZWQgdG8gY2FwdHVyZSBkZXRhaWxlZCBnZW5lcmF0aW9uIGluZm9ybWF0aW9uIHN1Y2ggYXMgaW5wdXQvb3V0cHV0IG1lc3NhZ2VzLFxuICogbW9kZWwgY29uZmlndXJhdGlvbiwgb3IgdXNhZ2UgZGF0YSwgdXNlIGBjcmVhdGVHZW5lcmF0aW9uU3BhbigpYCBpbnN0ZWFkLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgcmVzcG9uc2Ugc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICBvcHRpb25zID0ge307XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgcmVzcG9uc2Ugc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICpcbiAqIFRoaXMgc3BhbiBjYXB0dXJlcyB0aGUgZGV0YWlscyBvZiBhIG1vZGVsIHJlc3BvbnNlLCBwcmltYXJpbHkgdGhlIHJlc3BvbnNlIGlkZW50aWZpZXIuXG4gKiBJZiB5b3UgbmVlZCB0byBjYXB0dXJlIGRldGFpbGVkIGdlbmVyYXRpb24gaW5mb3JtYXRpb24gc3VjaCBhcyBpbnB1dC9vdXRwdXQgbWVzc2FnZXMsXG4gKiBtb2RlbCBjb25maWd1cmF0aW9uLCBvciB1c2FnZSBkYXRhLCB1c2UgYGdlbmVyYXRpb25TcGFuKClgIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoUmVzcG9uc2VTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVSZXNwb25zZVNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgYWdlbnQgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoQWdlbnRTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIGFnZW50IHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZ2VudFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2FnZW50JyxcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnM/LmRhdGE/Lm5hbWUgPz8gJ0FnZW50JyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGFnZW50IHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhBZ2VudFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUFnZW50U3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBmdW5jdGlvbiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhGdW5jdGlvblNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgZnVuY3Rpb24gc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgaW5wdXQ6IG9wdGlvbnM/LmRhdGE/LmlucHV0ID8/ICcnLFxuICAgICAgICAgICAgb3V0cHV0OiBvcHRpb25zPy5kYXRhPy5vdXRwdXQgPz8gJycsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBmdW5jdGlvbiBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoRnVuY3Rpb25TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVGdW5jdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaGFuZG9mZiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhIYW5kb2ZmU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBoYW5kb2ZmIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIYW5kb2ZmU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7IHR5cGU6ICdoYW5kb2ZmJywgLi4ub3B0aW9ucz8uZGF0YSB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBoYW5kb2ZmIHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhIYW5kb2ZmU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlSGFuZG9mZlNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZ2VuZXJhdGlvbiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhHZW5lcmF0aW9uU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogVGhpcyBzcGFuIGNhcHR1cmVzIHRoZSBkZXRhaWxzIG9mIGEgbW9kZWwgZ2VuZXJhdGlvbiwgaW5jbHVkaW5nIGlucHV0L291dHB1dCBtZXNzYWdlXG4gKiBzZXF1ZW5jZXMsIG1vZGVsIGluZm9ybWF0aW9uLCBhbmQgdXNhZ2UgZGF0YS4gSWYgeW91IG9ubHkgbmVlZCB0byBjYXB0dXJlIGEgbW9kZWwgcmVzcG9uc2VcbiAqIGlkZW50aWZpZXIsIGNvbnNpZGVyIHVzaW5nIGBjcmVhdGVSZXNwb25zZVNwYW4oKWAgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdlbmVyYXRpb25TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdnZW5lcmF0aW9uJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKiBBdXRvbWF0aWNhbGx5IGNyZWF0ZSBhIGdlbmVyYXRpb24gc3BhbiwgcnVuIGZuIGFuZCBjbG9zZSB0aGUgc3BhbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhHZW5lcmF0aW9uU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlR2VuZXJhdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgY3VzdG9tIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXIgdXNlXG4gKiBgd2l0aEN1c3RvbVNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ3VzdG9tU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnY3VzdG9tJyxcbiAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhDdXN0b21TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVDdXN0b21TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGd1YXJkcmFpbCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyIHVzZVxuICogYHdpdGhHdWFyZHJhaWxTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUd1YXJkcmFpbFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2d1YXJkcmFpbCcsXG4gICAgICAgICAgICB0cmlnZ2VyZWQ6IGZhbHNlLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhHdWFyZHJhaWxTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVHdWFyZHJhaWxTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IHRyYW5zY3JpcHRpb24gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhbnNjcmlwdGlvblNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3RyYW5zY3JpcHRpb24nLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aFRyYW5zY3JpcHRpb25TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVUcmFuc2NyaXB0aW9uU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBzcGVlY2ggc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3BlZWNoU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3BlZWNoJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhTcGVlY2hTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVTcGVlY2hTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IHNwZWVjaCBncm91cCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTcGVlY2hHcm91cFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3NwZWVjaF9ncm91cCcsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aFNwZWVjaEdyb3VwU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3BlZWNoR3JvdXBTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IE1DUCBsaXN0IHRvb2xzIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1DUExpc3RUb29sc1NwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ21jcF90b29scycsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aE1DUExpc3RUb29sc1NwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZU1DUExpc3RUb29sc1NwYW4pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlU3BhbnMubWpzLm1hcCIsImltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmV4cG9ydCB7IGdldEN1cnJlbnRTcGFuLCBnZXRDdXJyZW50VHJhY2UsIGdldE9yQ3JlYXRlVHJhY2UsIHJlc2V0Q3VycmVudFNwYW4sIHNldEN1cnJlbnRTcGFuLCB3aXRoVHJhY2UsIH0gZnJvbSBcIi4vY29udGV4dC5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NyZWF0ZVNwYW5zLm1qc1wiO1xuZXhwb3J0IHsgQmF0Y2hUcmFjZVByb2Nlc3NvciwgQ29uc29sZVNwYW5FeHBvcnRlciwgfSBmcm9tIFwiLi9wcm9jZXNzb3IubWpzXCI7XG5leHBvcnQgeyBOb29wU3BhbiwgU3BhbiB9IGZyb20gXCIuL3NwYW5zLm1qc1wiO1xuZXhwb3J0IHsgTm9vcFRyYWNlLCBUcmFjZSB9IGZyb20gXCIuL3RyYWNlcy5tanNcIjtcbmV4cG9ydCB7IGdlbmVyYXRlR3JvdXBJZCwgZ2VuZXJhdGVTcGFuSWQsIGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuLyoqXG4gKiBBZGQgYSBwcm9jZXNzb3IgdG8gdGhlIGxpc3Qgb2YgcHJvY2Vzc29ycy4gRWFjaCBwcm9jZXNzb3Igd2lsbCByZWNlaXZlIGFsbCB0cmFjZXMvc3BhbnMuXG4gKlxuICogQHBhcmFtIHByb2Nlc3NvciAtIFRoZSBwcm9jZXNzb3IgdG8gYWRkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkVHJhY2VQcm9jZXNzb3IocHJvY2Vzc29yKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnJlZ2lzdGVyUHJvY2Vzc29yKHByb2Nlc3Nvcik7XG59XG4vKipcbiAqIFNldCB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBUaGlzIHdpbGwgcmVwbGFjZSBhbnkgZXhpc3RpbmcgcHJvY2Vzc29ycy5cbiAqXG4gKiBAcGFyYW0gcHJvY2Vzc29ycyAtIFRoZSBsaXN0IG9mIHByb2Nlc3NvcnMgdG8gc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VHJhY2VQcm9jZXNzb3JzKHByb2Nlc3NvcnMpIHtcbiAgICBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuc2V0UHJvY2Vzc29ycyhwcm9jZXNzb3JzKTtcbn1cbi8qKlxuICogU2V0IHRoZSBkaXNhYmxlZCBzdGF0ZSBvZiB0aGUgdHJhY2luZyBwcm92aWRlci5cbiAqXG4gKiBAcGFyYW0gZGlzYWJsZWQgLSBXaGV0aGVyIHRvIGRpc2FibGUgdHJhY2luZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFRyYWNpbmdEaXNhYmxlZChkaXNhYmxlZCkge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zZXREaXNhYmxlZChkaXNhYmxlZCk7XG59XG4vKipcbiAqIFN0YXJ0IHRoZSB0cmFjZSBleHBvcnQgbG9vcC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0VHJhY2VFeHBvcnRMb29wKCkge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zdGFydEV4cG9ydExvb3AoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIub24odHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vZmYodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIGVtaXQodHlwZSwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCh0eXBlLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbmNlKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRFbWl0dGVyO1xuICAgIH1cbn1cbi8qKlxuICogRXZlbnQgZW1pdHRlciB0aGF0IGV2ZXJ5IEFnZW50IGluc3RhbmNlIGluaGVyaXRzIGZyb20gYW5kIHRoYXQgZW1pdHMgZXZlbnRzIGZvciB0aGUgbGlmZWN5Y2xlXG4gKiBvZiB0aGUgYWdlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudEhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vKipcbiAqIEV2ZW50IGVtaXR0ZXIgdGhhdCBldmVyeSBSdW5uZXIgaW5zdGFuY2UgaW5oZXJpdHMgZnJvbSBhbmQgdGhhdCBlbWl0cyBldmVudHMgZm9yIHRoZSBsaWZlY3ljbGVcbiAqIG9mIHRoZSBvdmVyYWxsIHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saWZlY3ljbGUubWpzLm1hcCIsImltcG9ydCB7IGxvYWRFbnYgfSBmcm9tIFwiLi9jb25maWcubWpzXCI7XG5leHBvcnQgY29uc3QgT1BFTkFJX0RFRkFVTFRfTU9ERUxfRU5WX1ZBUklBQkxFX05BTUUgPSAnT1BFTkFJX0RFRkFVTFRfTU9ERUwnO1xuLyoqXG4gKiBSZXR1cm5zIFRydWUgaWYgdGhlIG1vZGVsIG5hbWUgaXMgYSBHUFQtNSBtb2RlbCBhbmQgcmVhc29uaW5nIHNldHRpbmdzIGFyZSByZXF1aXJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkKG1vZGVsTmFtZSkge1xuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aCgnZ3B0LTUtY2hhdCcpKSB7XG4gICAgICAgIC8vIGdwdC01LWNoYXQtbGF0ZXN0IGRvZXMgbm90IHJlcXVpcmUgcmVhc29uaW5nIHNldHRpbmdzXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gbWF0Y2hlcyBhbnkgb2YgZ3B0LTUgbW9kZWxzXG4gICAgcmV0dXJuIG1vZGVsTmFtZS5zdGFydHNXaXRoKCdncHQtNScpO1xufVxuY29uc3QgTk9ORV9FRkZPUlRfU1VQUE9SVEVEX01PREVMUyA9IG5ldyBTZXQoWydncHQtNS4yJywgJ2dwdC01LjEnXSk7XG5mdW5jdGlvbiBpc05vbmVFZmZvcnRTdXBwb3J0ZWRNb2RlbChtb2RlbE5hbWUpIHtcbiAgICByZXR1cm4gTk9ORV9FRkZPUlRfU1VQUE9SVEVEX01PREVMUy5oYXMobW9kZWxOYW1lKTtcbn1cbi8qKlxuICogUmV0dXJucyBUcnVlIGlmIHRoZSBkZWZhdWx0IG1vZGVsIGlzIGEgR1BULTUgbW9kZWwuXG4gKiBUaGlzIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHRoZSBkZWZhdWx0IG1vZGVsIHNldHRpbmdzIGFyZSBjb21wYXRpYmxlIHdpdGggR1BULTUgbW9kZWxzLlxuICogSWYgdGhlIGRlZmF1bHQgbW9kZWwgaXMgbm90IGEgR1BULTUgbW9kZWwsIHRoZSBtb2RlbCBzZXR0aW5ncyBhcmUgY29tcGF0aWJsZSB3aXRoIG90aGVyIG1vZGVscy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzR3B0NURlZmF1bHQoKSB7XG4gICAgcmV0dXJuIGdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkKGdldERlZmF1bHRNb2RlbCgpKTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgZGVmYXVsdCBtb2RlbCBuYW1lLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE1vZGVsKCkge1xuICAgIGNvbnN0IGVudiA9IGxvYWRFbnYoKTtcbiAgICByZXR1cm4gKGVudltPUEVOQUlfREVGQVVMVF9NT0RFTF9FTlZfVkFSSUFCTEVfTkFNRV0/LnRvTG93ZXJDYXNlKCkgPz8gJ2dwdC00LjEnKTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgZGVmYXVsdCBtb2RlbCBzZXR0aW5ncy5cbiAqIElmIHRoZSBkZWZhdWx0IG1vZGVsIGlzIGEgR1BULTUgbW9kZWwsIHJldHVybnMgdGhlIEdQVC01IGRlZmF1bHQgbW9kZWwgc2V0dGluZ3MuXG4gKiBPdGhlcndpc2UsIHJldHVybnMgdGhlIGxlZ2FjeSBkZWZhdWx0IG1vZGVsIHNldHRpbmdzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE1vZGVsU2V0dGluZ3MobW9kZWwpIHtcbiAgICBjb25zdCBfbW9kZWwgPSBtb2RlbCA/PyBnZXREZWZhdWx0TW9kZWwoKTtcbiAgICBpZiAoZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQoX21vZGVsKSkge1xuICAgICAgICBpZiAoaXNOb25lRWZmb3J0U3VwcG9ydGVkTW9kZWwoX21vZGVsKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZWFzb25pbmc6IHsgZWZmb3J0OiAnbm9uZScgfSxcbiAgICAgICAgICAgICAgICB0ZXh0OiB7IHZlcmJvc2l0eTogJ2xvdycgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC8vIFdlIGNob29zZSBcImxvd1wiIGluc3RlYWQgb2YgXCJtaW5pbWFsXCIgYmVjYXVzZSBzb21lIGJ1aWx0LWluIHRvb2xzIGRvIG5vdCBzdXBwb3J0IFwibWluaW1hbFwiLlxuICAgICAgICAgICAgLy8gSWYgeW91IHdhbnQgdG8gdXNlIFwibWluaW1hbFwiIHJlYXNvbmluZyBlZmZvcnQsIHBhc3MgeW91ciBvd24gbW9kZWwgc2V0dGluZ3MuXG4gICAgICAgICAgICByZWFzb25pbmc6IHsgZWZmb3J0OiAnbG93JyB9LFxuICAgICAgICAgICAgdGV4dDogeyB2ZXJib3NpdHk6ICdsb3cnIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRNb2RlbC5tanMubWFwIiwiaW1wb3J0IHsgUmVxdWVzdFVzYWdlRGF0YSwgVXNhZ2VEYXRhIH0gZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG4vKipcbiAqIFVzYWdlIGRldGFpbHMgZm9yIGEgc2luZ2xlIEFQSSByZXF1ZXN0LlxuICovXG5leHBvcnQgY2xhc3MgUmVxdWVzdFVzYWdlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyB1c2VkIGZvciB0aGlzIHJlcXVlc3QuXG4gICAgICovXG4gICAgaW5wdXRUb2tlbnM7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBvdXRwdXQgdG9rZW5zIHVzZWQgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBvdXRwdXRUb2tlbnM7XG4gICAgLyoqXG4gICAgICogVGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgc2VudCBhbmQgcmVjZWl2ZWQgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICAgKi9cbiAgICB0b3RhbFRva2VucztcbiAgICAvKipcbiAgICAgKiBEZXRhaWxzIGFib3V0IHRoZSBpbnB1dCB0b2tlbnMgdXNlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIGlucHV0VG9rZW5zRGV0YWlscztcbiAgICAvKipcbiAgICAgKiBEZXRhaWxzIGFib3V0IHRoZSBvdXRwdXQgdG9rZW5zIHVzZWQgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBvdXRwdXRUb2tlbnNEZXRhaWxzO1xuICAgIC8qKlxuICAgICAqIFRoZSBlbmRwb2ludCB0aGF0IHByb2R1Y2VkIHRoaXMgdXNhZ2UgZW50cnkgKGUuZy4sIHJlc3BvbnNlcy5jcmVhdGUsIHJlc3BvbnNlcy5jb21wYWN0KS5cbiAgICAgKi9cbiAgICBlbmRwb2ludDtcbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICB0aGlzLmlucHV0VG9rZW5zID0gaW5wdXQ/LmlucHV0VG9rZW5zID8/IGlucHV0Py5pbnB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgPSBpbnB1dD8ub3V0cHV0VG9rZW5zID8/IGlucHV0Py5vdXRwdXRfdG9rZW5zID8/IDA7XG4gICAgICAgIHRoaXMudG90YWxUb2tlbnMgPVxuICAgICAgICAgICAgaW5wdXQ/LnRvdGFsVG9rZW5zID8/XG4gICAgICAgICAgICAgICAgaW5wdXQ/LnRvdGFsX3Rva2VucyA/P1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgKyB0aGlzLm91dHB1dFRva2VucztcbiAgICAgICAgY29uc3QgaW5wdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/LmlucHV0VG9rZW5zRGV0YWlscyA/PyBpbnB1dD8uaW5wdXRfdG9rZW5zX2RldGFpbHM7XG4gICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzID0gaW5wdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICA/IGlucHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgOiB7fTtcbiAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5zRGV0YWlscyA9IGlucHV0Py5vdXRwdXRUb2tlbnNEZXRhaWxzID8/IGlucHV0Py5vdXRwdXRfdG9rZW5zX2RldGFpbHM7XG4gICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IG91dHB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgID8gb3V0cHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgOiB7fTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dD8uZW5kcG9pbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmVuZHBvaW50ID0gaW5wdXQuZW5kcG9pbnQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFRyYWNrcyB0b2tlbiB1c2FnZSBhbmQgcmVxdWVzdCBjb3VudHMgZm9yIGFuIGFnZW50IHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFVzYWdlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHJlcXVlc3RzIG1hZGUgdG8gdGhlIExMTSBBUEkuXG4gICAgICovXG4gICAgcmVxdWVzdHM7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIGlucHV0VG9rZW5zO1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2Ygb3V0cHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgb3V0cHV0VG9rZW5zO1xuICAgIC8qKlxuICAgICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIHNlbnQgYW5kIHJlY2VpdmVkLCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIHRvdGFsVG9rZW5zO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIGlucHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgLyoqXG4gICAgICogRGV0YWlscyBhYm91dCB0aGUgb3V0cHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgcGVyLXJlcXVlc3QgdXNhZ2UgZW50cmllcyBmb3IgZGV0YWlsZWQgY29zdCBjYWxjdWxhdGlvbnMuXG4gICAgICovXG4gICAgcmVxdWVzdFVzYWdlRW50cmllcztcbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0cyA9IDA7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zID0gMDtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zID0gMDtcbiAgICAgICAgICAgIHRoaXMudG90YWxUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXNhZ2VFbnRyaWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0cyA9IGlucHV0Py5yZXF1ZXN0cyA/PyAxO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2VucyA9IGlucHV0Py5pbnB1dFRva2VucyA/PyBpbnB1dD8uaW5wdXRfdG9rZW5zID8/IDA7XG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2VucyA9IGlucHV0Py5vdXRwdXRUb2tlbnMgPz8gaW5wdXQ/Lm91dHB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIHRoaXMudG90YWxUb2tlbnMgPVxuICAgICAgICAgICAgICAgIGlucHV0Py50b3RhbFRva2VucyA/P1xuICAgICAgICAgICAgICAgICAgICBpbnB1dD8udG90YWxfdG9rZW5zID8/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgKyB0aGlzLm91dHB1dFRva2VucztcbiAgICAgICAgICAgIGNvbnN0IGlucHV0VG9rZW5zRGV0YWlscyA9IGlucHV0Py5pbnB1dFRva2Vuc0RldGFpbHMgPz8gaW5wdXQ/LmlucHV0X3Rva2Vuc19kZXRhaWxzO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXRUb2tlbnNEZXRhaWxzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzID0gaW5wdXRUb2tlbnNEZXRhaWxzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgICAgICAgICAgPyBbaW5wdXRUb2tlbnNEZXRhaWxzXVxuICAgICAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5zRGV0YWlscyA9IGlucHV0Py5vdXRwdXRUb2tlbnNEZXRhaWxzID8/IGlucHV0Py5vdXRwdXRfdG9rZW5zX2RldGFpbHM7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvdXRwdXRUb2tlbnNEZXRhaWxzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IG91dHB1dFRva2Vuc0RldGFpbHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm91dHB1dFRva2Vuc0RldGFpbHMgPSBvdXRwdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICAgICAgICAgID8gW291dHB1dFRva2Vuc0RldGFpbHNdXG4gICAgICAgICAgICAgICAgICAgIDogW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0VXNhZ2VFbnRyaWVzID0gaW5wdXQ/LnJlcXVlc3RVc2FnZUVudHJpZXMgPz8gaW5wdXQ/LnJlcXVlc3RfdXNhZ2VfZW50cmllcztcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRSZXF1ZXN0VXNhZ2VFbnRyaWVzID0gQXJyYXkuaXNBcnJheShyZXF1ZXN0VXNhZ2VFbnRyaWVzKVxuICAgICAgICAgICAgICAgID8gcmVxdWVzdFVzYWdlRW50cmllcy5tYXAoKGVudHJ5KSA9PiBlbnRyeSBpbnN0YW5jZW9mIFJlcXVlc3RVc2FnZSA/IGVudHJ5IDogbmV3IFJlcXVlc3RVc2FnZShlbnRyeSkpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVc2FnZUVudHJpZXMgPVxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRSZXF1ZXN0VXNhZ2VFbnRyaWVzICYmXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRSZXF1ZXN0VXNhZ2VFbnRyaWVzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgPyBub3JtYWxpemVkUmVxdWVzdFVzYWdlRW50cmllc1xuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGQobmV3VXNhZ2UpIHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0cyArPSBuZXdVc2FnZS5yZXF1ZXN0cyA/PyAwO1xuICAgICAgICB0aGlzLmlucHV0VG9rZW5zICs9IG5ld1VzYWdlLmlucHV0VG9rZW5zID8/IDA7XG4gICAgICAgIHRoaXMub3V0cHV0VG9rZW5zICs9IG5ld1VzYWdlLm91dHB1dFRva2VucyA/PyAwO1xuICAgICAgICB0aGlzLnRvdGFsVG9rZW5zICs9IG5ld1VzYWdlLnRvdGFsVG9rZW5zID8/IDA7XG4gICAgICAgIGlmIChuZXdVc2FnZS5pbnB1dFRva2Vuc0RldGFpbHMpIHtcbiAgICAgICAgICAgIC8vIFRoZSB0eXBlIGRvZXMgbm90IGFsbG93IHVuZGVmaW5lZCwgYnV0IGl0IGNvdWxkIGhhcHBlbiBydW50aW1lXG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscy5wdXNoKC4uLm5ld1VzYWdlLmlucHV0VG9rZW5zRGV0YWlscyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld1VzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMpIHtcbiAgICAgICAgICAgIC8vIFRoZSB0eXBlIGRvZXMgbm90IGFsbG93IHVuZGVmaW5lZCwgYnV0IGl0IGNvdWxkIGhhcHBlbiBydW50aW1lXG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2Vuc0RldGFpbHMucHVzaCguLi5uZXdVc2FnZS5vdXRwdXRUb2tlbnNEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShuZXdVc2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzKSAmJlxuICAgICAgICAgICAgbmV3VXNhZ2UucmVxdWVzdFVzYWdlRW50cmllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVc2FnZUVudHJpZXMgPz89IFtdO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXNhZ2VFbnRyaWVzLnB1c2goLi4ubmV3VXNhZ2UucmVxdWVzdFVzYWdlRW50cmllcy5tYXAoKGVudHJ5KSA9PiBlbnRyeSBpbnN0YW5jZW9mIFJlcXVlc3RVc2FnZSA/IGVudHJ5IDogbmV3IFJlcXVlc3RVc2FnZShlbnRyeSkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChuZXdVc2FnZS5yZXF1ZXN0cyA9PT0gMSAmJiBuZXdVc2FnZS50b3RhbFRva2VucyA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVzYWdlRW50cmllcyA/Pz0gW107XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVc2FnZUVudHJpZXMucHVzaChuZXcgUmVxdWVzdFVzYWdlKHtcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VuczogbmV3VXNhZ2UuaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zOiBuZXdVc2FnZS5vdXRwdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgdG90YWxUb2tlbnM6IG5ld1VzYWdlLnRvdGFsVG9rZW5zLFxuICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogbmV3VXNhZ2UuaW5wdXRUb2tlbnNEZXRhaWxzPy5bMF0sXG4gICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogbmV3VXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscz8uWzBdLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IHsgUmVxdWVzdFVzYWdlRGF0YSwgVXNhZ2VEYXRhIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2FnZS5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuLyoqXG4gKiBBIGNvbnRleHQgb2JqZWN0IHRoYXQgaXMgcGFzc2VkIHRvIHRoZSBgUnVubmVyLnJ1bigpYCBtZXRob2QuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5Db250ZXh0IHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGV4dCBvYmplY3QgeW91IHBhc3NlZCB0byB0aGUgYFJ1bm5lci5ydW4oKWAgbWV0aG9kLlxuICAgICAqL1xuICAgIGNvbnRleHQ7XG4gICAgLyoqXG4gICAgICogVGhlIHVzYWdlIG9mIHRoZSBhZ2VudCBydW4gc28gZmFyLiBGb3Igc3RyZWFtZWQgcmVzcG9uc2VzLCB0aGUgdXNhZ2Ugd2lsbCBiZSB1cGRhdGVkIGluIHJlYWwtdGltZVxuICAgICAqL1xuICAgIHVzYWdlO1xuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIHRvb2wgbmFtZXMgdG8gd2hldGhlciB0aGV5IGhhdmUgYmVlbiBhcHByb3ZlZC5cbiAgICAgKi9cbiAgICAjYXBwcm92YWxzO1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQgPSB7fSkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLnVzYWdlID0gbmV3IFVzYWdlKCk7XG4gICAgICAgIHRoaXMuI2FwcHJvdmFscyA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVidWlsZCB0aGUgYXBwcm92YWxzIG1hcCBmcm9tIGEgc2VyaWFsaXplZCBzdGF0ZS5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbHMgLSBUaGUgYXBwcm92YWxzIG1hcCB0byByZWJ1aWxkLlxuICAgICAqL1xuICAgIF9yZWJ1aWxkQXBwcm92YWxzKGFwcHJvdmFscykge1xuICAgICAgICB0aGlzLiNhcHByb3ZhbHMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGFwcHJvdmFscykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXJnZSBhcHByb3ZhbHMgZnJvbSBhIHNlcmlhbGl6ZWQgc3RhdGUgd2l0aG91dCBkaXNjYXJkaW5nIGV4aXN0aW5nIGVudHJpZXMuXG4gICAgICogQGludGVybmFsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxzIC0gVGhlIGFwcHJvdmFscyBtYXAgdG8gbWVyZ2UuXG4gICAgICovXG4gICAgX21lcmdlQXBwcm92YWxzKGFwcHJvdmFscykge1xuICAgICAgICBjb25zdCBtZXJnZUFwcHJvdmFsID0gKGN1cnJlbnQsIGluY29taW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gdHJ1ZSB8fCBpbmNvbWluZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY3VycmVudExpc3QgPSBBcnJheS5pc0FycmF5KGN1cnJlbnQpID8gY3VycmVudCA6IFtdO1xuICAgICAgICAgICAgY29uc3QgaW5jb21pbmdMaXN0ID0gQXJyYXkuaXNBcnJheShpbmNvbWluZykgPyBpbmNvbWluZyA6IFtdO1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldChbLi4uY3VycmVudExpc3QsIC4uLmluY29taW5nTGlzdF0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBbdG9vbE5hbWUsIGluY29taW5nXSBvZiBPYmplY3QuZW50cmllcyhhcHByb3ZhbHMpKSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpO1xuICAgICAgICAgICAgaWYgKCFleGlzdGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuI2FwcHJvdmFscy5zZXQodG9vbE5hbWUsIGluY29taW5nKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuI2FwcHJvdmFscy5zZXQodG9vbE5hbWUsIHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlZDogbWVyZ2VBcHByb3ZhbChleGlzdGluZy5hcHByb3ZlZCwgaW5jb21pbmcuYXBwcm92ZWQpLFxuICAgICAgICAgICAgICAgIHJlamVjdGVkOiBtZXJnZUFwcHJvdmFsKGV4aXN0aW5nLnJlamVjdGVkLCBpbmNvbWluZy5yZWplY3RlZCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIHRvb2wgY2FsbCBoYXMgYmVlbiBhcHByb3ZlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbCAtIERldGFpbHMgYWJvdXQgdGhlIHRvb2wgY2FsbCBiZWluZyBldmFsdWF0ZWQuXG4gICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSB0b29sIGNhbGwgaGFzIGJlZW4gYXBwcm92ZWQsIGBmYWxzZWAgaWYgYmxvY2tlZCBhbmQgYHVuZGVmaW5lZGAgaWYgbm90IHlldCBhcHByb3ZlZCBvciByZWplY3RlZC5cbiAgICAgKi9cbiAgICBpc1Rvb2xBcHByb3ZlZChhcHByb3ZhbCkge1xuICAgICAgICBjb25zdCB7IHRvb2xOYW1lLCBjYWxsSWQgfSA9IGFwcHJvdmFsO1xuICAgICAgICBjb25zdCBhcHByb3ZhbEVudHJ5ID0gdGhpcy4jYXBwcm92YWxzLmdldCh0b29sTmFtZSk7XG4gICAgICAgIGlmIChhcHByb3ZhbEVudHJ5Py5hcHByb3ZlZCA9PT0gdHJ1ZSAmJiBhcHByb3ZhbEVudHJ5LnJlamVjdGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignVG9vbCBpcyBwZXJtYW5lbnRseSBhcHByb3ZlZCBhbmQgcmVqZWN0ZWQgYXQgdGhlIHNhbWUgdGltZS4gQXBwcm92YWwgdGFrZXMgcHJlY2VkZW5jZScpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwcm92YWxFbnRyeT8ucmVqZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsID0gQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5Py5hcHByb3ZlZClcbiAgICAgICAgICAgID8gYXBwcm92YWxFbnRyeS5hcHByb3ZlZC5pbmNsdWRlcyhjYWxsSWQpXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICBjb25zdCBpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbiA9IEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeT8ucmVqZWN0ZWQpXG4gICAgICAgICAgICA/IGFwcHJvdmFsRW50cnkucmVqZWN0ZWQuaW5jbHVkZXMoY2FsbElkKVxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgaWYgKGluZGl2aWR1YWxDYWxsQXBwcm92YWwgJiYgaW5kaXZpZHVhbENhbGxSZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUb29sIGNhbGwgJHtjYWxsSWR9IGlzIGJvdGggYXBwcm92ZWQgYW5kIHJlamVjdGVkIGF0IHRoZSBzYW1lIHRpbWUuIEFwcHJvdmFsIHRha2VzIHByZWNlZGVuY2VgKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kaXZpZHVhbENhbGxSZWplY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHByb3ZlIGEgdG9vbCBjYWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSB0b29sIGFwcHJvdmFsIGl0ZW0gdG8gYXBwcm92ZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgYXBwcm92YWwgYmVoYXZpb3Igb3B0aW9ucy5cbiAgICAgKi9cbiAgICBhcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIHsgYWx3YXlzQXBwcm92ZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS50b29sTmFtZSA/PyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBpZiAoYWx3YXlzQXBwcm92ZSkge1xuICAgICAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwge1xuICAgICAgICAgICAgICAgIGFwcHJvdmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRW50cnkgPSB0aGlzLiNhcHByb3ZhbHMuZ2V0KHRvb2xOYW1lKSA/PyB7XG4gICAgICAgICAgICBhcHByb3ZlZDogW10sXG4gICAgICAgICAgICByZWplY3RlZDogW10sXG4gICAgICAgIH07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnkuYXBwcm92ZWQpKSB7XG4gICAgICAgICAgICAvLyBmdW5jdGlvbiB0b29sIGhhcyBjYWxsX2lkLCBob3N0ZWQgdG9vbCBjYWxsIGhhcyBpZFxuICAgICAgICAgICAgY29uc3QgY2FsbElkID0gJ2NhbGxJZCcgaW4gYXBwcm92YWxJdGVtLnJhd0l0ZW1cbiAgICAgICAgICAgICAgICA/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLmNhbGxJZCAvLyBmdW5jdGlvbiB0b29sc1xuICAgICAgICAgICAgICAgIDogYXBwcm92YWxJdGVtLnJhd0l0ZW0uaWQ7IC8vIGhvc3RlZCB0b29sc1xuICAgICAgICAgICAgYXBwcm92YWxFbnRyeS5hcHByb3ZlZC5wdXNoKGNhbGxJZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwgYXBwcm92YWxFbnRyeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlamVjdCBhIHRvb2wgY2FsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKi9cbiAgICByZWplY3RUb29sKGFwcHJvdmFsSXRlbSwgeyBhbHdheXNSZWplY3QgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBhcHByb3ZhbEl0ZW0udG9vbE5hbWUgPz8gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZTtcbiAgICAgICAgaWYgKGFsd2F5c1JlamVjdCkge1xuICAgICAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwge1xuICAgICAgICAgICAgICAgIGFwcHJvdmVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZWplY3RlZDogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRW50cnkgPSB0aGlzLiNhcHByb3ZhbHMuZ2V0KHRvb2xOYW1lKSA/PyB7XG4gICAgICAgICAgICBhcHByb3ZlZDogW10sXG4gICAgICAgICAgICByZWplY3RlZDogW10sXG4gICAgICAgIH07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnkucmVqZWN0ZWQpKSB7XG4gICAgICAgICAgICAvLyBmdW5jdGlvbiB0b29sIGhhcyBjYWxsX2lkLCBob3N0ZWQgdG9vbCBjYWxsIGhhcyBpZFxuICAgICAgICAgICAgY29uc3QgY2FsbElkID0gJ2NhbGxJZCcgaW4gYXBwcm92YWxJdGVtLnJhd0l0ZW1cbiAgICAgICAgICAgICAgICA/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLmNhbGxJZCAvLyBmdW5jdGlvbiB0b29sc1xuICAgICAgICAgICAgICAgIDogYXBwcm92YWxJdGVtLnJhd0l0ZW0uaWQ7IC8vIGhvc3RlZCB0b29sc1xuICAgICAgICAgICAgYXBwcm92YWxFbnRyeS5yZWplY3RlZC5wdXNoKGNhbGxJZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwgYXBwcm92YWxFbnRyeSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dCxcbiAgICAgICAgICAgIHVzYWdlOiB0aGlzLnVzYWdlLFxuICAgICAgICAgICAgYXBwcm92YWxzOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy4jYXBwcm92YWxzLmVudHJpZXMoKSksXG4gICAgICAgIH07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuQ29udGV4dC5tanMubWFwIiwiaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uVG9vbE5hbWUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGFkZEVycm9yVG9DdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvY29udGV4dC5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIGdpdmVuIGFzIHRvb2wgb3V0cHV0IHRvIHRoZSBtb2RlbCB0aGF0IHJlcXVlc3RlZCB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgbWVzc2FnZSB0aGF0IHdpbGwgYmUgZ2l2ZW4gYXMgdG9vbCBvdXRwdXQgdG8gdGhlIG1vZGVsIHRoYXQgcmVxdWVzdGVkIHRoZSBoYW5kb2ZmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zlck1lc3NhZ2UoYWdlbnQpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoeyBhc3Npc3RhbnQ6IGFnZW50Lm5hbWUgfSk7XG59XG4vKipcbiAqIFRoZSBkZWZhdWx0IG5hbWUgb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmLlxuICpcbiAqIEBwYXJhbSBhZ2VudCBUaGUgYWdlbnQgdG8gdHJhbnNmZXIgdG9cbiAqIEByZXR1cm5zIFRoZSBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZlxuICovXG5mdW5jdGlvbiBkZWZhdWx0SGFuZG9mZlRvb2xOYW1lKGFnZW50KSB7XG4gICAgcmV0dXJuIGB0cmFuc2Zlcl90b18ke3RvRnVuY3Rpb25Ub29sTmFtZShhZ2VudC5uYW1lKX1gO1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRIYW5kb2ZmVG9vbERlc2NyaXB0aW9uKGFnZW50KSB7XG4gICAgcmV0dXJuIGBIYW5kb2ZmIHRvIHRoZSAke2FnZW50Lm5hbWV9IGFnZW50IHRvIGhhbmRsZSB0aGUgcmVxdWVzdC4gJHthZ2VudC5oYW5kb2ZmRGVzY3JpcHRpb24gPz8gJyd9YDtcbn1cbmV4cG9ydCBjbGFzcyBIYW5kb2ZmIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gICAgICovXG4gICAgdG9vbE5hbWU7XG4gICAgLyoqXG4gICAgICogVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAgICAgKi9cbiAgICB0b29sRGVzY3JpcHRpb247XG4gICAgLyoqXG4gICAgICogVGhlIEpTT04gc2NoZW1hIGZvciB0aGUgaGFuZG9mZiBpbnB1dC4gQ2FuIGJlIGVtcHR5IGlmIHRoZSBoYW5kb2ZmIGRvZXMgbm90IHRha2UgYW4gaW5wdXRcbiAgICAgKi9cbiAgICBpbnB1dEpzb25TY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7fSxcbiAgICAgICAgcmVxdWlyZWQ6IFtdLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBpbnB1dCBKU09OIHNjaGVtYSBpcyBpbiBzdHJpY3QgbW9kZS4gV2UgKipzdHJvbmdseSoqIHJlY29tbWVuZCBzZXR0aW5nIHRoaXMgdG9cbiAgICAgKiB0cnVlLCBhcyBpdCBpbmNyZWFzZXMgdGhlIGxpa2VsaWhvb2Qgb2YgY29ycmVjdCBKU09OIGlucHV0LlxuICAgICAqL1xuICAgIHN0cmljdEpzb25TY2hlbWEgPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIFRoZSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIGhhbmRvZmYuIFRoZSBwYXJhbWV0ZXJzIHBhc3NlZCBhcmU6XG4gICAgICogMS4gVGhlIGhhbmRvZmYgcnVuIGNvbnRleHRcbiAgICAgKiAyLiBUaGUgYXJndW1lbnRzIGZyb20gdGhlIExMTSwgYXMgYSBKU09OIHN0cmluZy4gRW1wdHkgc3RyaW5nIGlmIGlucHV0SnNvblNjaGVtYSBpcyBlbXB0eS5cbiAgICAgKlxuICAgICAqIE11c3QgcmV0dXJuIGFuIGFnZW50XG4gICAgICovXG4gICAgb25JbnZva2VIYW5kb2ZmO1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBhZ2VudCB0aGF0IGlzIGJlaW5nIGhhbmRlZCBvZmYgdG8uXG4gICAgICovXG4gICAgYWdlbnROYW1lO1xuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBmaWx0ZXJzIHRoZSBpbnB1dHMgdGhhdCBhcmUgcGFzc2VkIHRvIHRoZSBuZXh0IGFnZW50LiBCeSBkZWZhdWx0LCB0aGUgbmV3IGFnZW50XG4gICAgICogc2VlcyB0aGUgZW50aXJlIGNvbnZlcnNhdGlvbiBoaXN0b3J5LiBJbiBzb21lIGNhc2VzLCB5b3UgbWF5IHdhbnQgdG8gZmlsdGVyIGlucHV0cyBlLmcuIHRvXG4gICAgICogcmVtb3ZlIG9sZGVyIGlucHV0cywgb3IgcmVtb3ZlIHRvb2xzIGZyb20gZXhpc3RpbmcgaW5wdXRzLlxuICAgICAqXG4gICAgICogVGhlIGZ1bmN0aW9uIHdpbGwgcmVjZWl2ZSB0aGUgZW50aXJlIGNvbnZlcnNhdGlvbiBoaXNzdG9yeSBzbyBmYXIsIGluY2x1ZGluZyB0aGUgaW5wdXQgaXRlbVxuICAgICAqIHRoYXQgdHJpZ2dlcmVkIHRoZSBoYW5kb2ZmIGFuZCBhIHRvb2wgY2FsbCBvdXRwdXQgaXRlbSByZXByZXNlbnRpbmcgdGhlIGhhbmRvZmYgdG9vbCdzIG91dHB1dC5cbiAgICAgKlxuICAgICAqIFlvdSBhcmUgZnJlZSB0byBtb2RpZnkgdGhlIGlucHV0IGhpc3Rvcnkgb3IgbmV3IGl0ZW1zIGFzIHlvdSBzZWUgZml0LiBUaGUgbmV4dCBhZ2VudCB0aGF0IHJ1bnNcbiAgICAgKiB3aWxsIHJlY2VpdmUgYGhhbmRvZmZJbnB1dERhdGEuYWxsSXRlbXNcbiAgICAgKi9cbiAgICBpbnB1dEZpbHRlcjtcbiAgICAvKipcbiAgICAgKiBUaGUgYWdlbnQgdGhhdCBpcyBiZWluZyBoYW5kZWQgb2ZmIHRvLlxuICAgICAqL1xuICAgIGFnZW50O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmdW5jdGlvbiB0b29sIGRlZmluaXRpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBpbnZva2UgdGhlIGhhbmRvZmYuXG4gICAgICovXG4gICAgZ2V0SGFuZG9mZkFzRnVuY3Rpb25Ub29sKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMudG9vbE5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy50b29sRGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB0aGlzLmlucHV0SnNvblNjaGVtYSxcbiAgICAgICAgICAgIHN0cmljdDogdGhpcy5zdHJpY3RKc29uU2NoZW1hLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpc0VuYWJsZWQgPSBhc3luYyAoKSA9PiB0cnVlO1xuICAgIGNvbnN0cnVjdG9yKGFnZW50LCBvbkludm9rZUhhbmRvZmYpIHtcbiAgICAgICAgdGhpcy5hZ2VudE5hbWUgPSBhZ2VudC5uYW1lO1xuICAgICAgICB0aGlzLm9uSW52b2tlSGFuZG9mZiA9IG9uSW52b2tlSGFuZG9mZjtcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IGRlZmF1bHRIYW5kb2ZmVG9vbE5hbWUoYWdlbnQpO1xuICAgICAgICB0aGlzLnRvb2xEZXNjcmlwdGlvbiA9IGRlZmF1bHRIYW5kb2ZmVG9vbERlc2NyaXB0aW9uKGFnZW50KTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIGhhbmRvZmYgZnJvbSBhbiBhZ2VudC4gSGFuZG9mZnMgYXJlIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCB3aGVuIHlvdSBwYXNzIGFuIGFnZW50XG4gKiBpbnRvIHRoZSBgaGFuZG9mZnNgIG9wdGlvbiBvZiB0aGUgYEFnZW50YCBjb25zdHJ1Y3Rvci4gQWx0ZXJuYXRpdmVseSwgeW91IGNhbiB1c2UgdGhpcyBmdW5jdGlvblxuICogdG8gY3JlYXRlIGEgaGFuZG9mZiBtYW51YWxseSwgZ2l2aW5nIHlvdSBtb3JlIGNvbnRyb2wgb3ZlciBjb25maWd1cmF0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRPdXRwdXQgVGhlIG91dHB1dCB0eXBlIG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVElucHV0VHlwZSBUaGUgaW5wdXQgdHlwZSBvZiB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFuZG9mZihhZ2VudCwgY29uZmlnID0ge30pIHtcbiAgICBsZXQgcGFyc2VyID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IGhhc09uSGFuZG9mZiA9ICEhY29uZmlnLm9uSGFuZG9mZjtcbiAgICBjb25zdCBoYXNJbnB1dFR5cGUgPSAhIWNvbmZpZy5pbnB1dFR5cGU7XG4gICAgY29uc3QgaGFzQm90aE9yTmVpdGhlckhhbmRvZmZBbmRJbnB1dFR5cGUgPSBoYXNPbkhhbmRvZmYgPT09IGhhc0lucHV0VHlwZTtcbiAgICBpZiAoIWhhc0JvdGhPck5laXRoZXJIYW5kb2ZmQW5kSW5wdXRUeXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1lvdSBtdXN0IHByb3ZpZGUgZWl0aGVyIGJvdGggYG9uSGFuZG9mZmAgYW5kIGBpbnB1dFR5cGVgIG9yIG5laXRoZXIuJyk7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIG9uSW52b2tlSGFuZG9mZihjb250ZXh0LCBpbnB1dEpzb25TdHJpbmcpIHtcbiAgICAgICAgaWYgKHBhcnNlcikge1xuICAgICAgICAgICAgaWYgKCFpbnB1dEpzb25TdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgSGFuZG9mZiBmdW5jdGlvbiBleHBlY3RlZCBub24gZW1wdHkgaW5wdXQgYnV0IGdvdDogJHtpbnB1dEpzb25TdHJpbmd9YCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogYGlucHV0IGlzIGVtcHR5YCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdIYW5kb2ZmIGZ1bmN0aW9uIGV4cGVjdGVkIG5vbiBlbXB0eSBpbnB1dCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyB2ZXJpZnkgdGhhdCBpdCdzIHZhbGlkIGlucHV0IGJ1dCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSByZXN1bHRcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBhd2FpdCBwYXJzZXIoaW5wdXRKc29uU3RyaW5nKTtcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLm9uSGFuZG9mZikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb25maWcub25IYW5kb2ZmKGNvbnRleHQsIHBhcnNlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEludmFsaWQgSlNPTiBwcm92aWRlZGAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghbG9nZ2VyLmRvbnRMb2dUb29sRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEludmFsaWQgSlNPTiB3aGVuIHBhcnNpbmc6ICR7aW5wdXRKc29uU3RyaW5nfS4gRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0ludmFsaWQgSlNPTiBwcm92aWRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgY29uZmlnLm9uSGFuZG9mZj8uKGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhZ2VudDtcbiAgICB9XG4gICAgY29uc3QgaGFuZG9mZiA9IG5ldyBIYW5kb2ZmKGFnZW50LCBvbkludm9rZUhhbmRvZmYpO1xuICAgIGlmICh0eXBlb2YgY29uZmlnLmlzRW5hYmxlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCBwcmVkaWNhdGUgPSBjb25maWcuaXNFbmFibGVkO1xuICAgICAgICBoYW5kb2ZmLmlzRW5hYmxlZCA9IGFzeW5jICh7IHJ1bkNvbnRleHQsIGFnZW50IH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByZWRpY2F0ZSh7IHJ1bkNvbnRleHQsIGFnZW50IH0pO1xuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5pc0VuYWJsZWQgPT09ICdib29sZWFuJykge1xuICAgICAgICBoYW5kb2ZmLmlzRW5hYmxlZCA9IGFzeW5jICgpID0+IGNvbmZpZy5pc0VuYWJsZWQ7XG4gICAgfVxuICAgIGlmIChjb25maWcuaW5wdXRUeXBlKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUoY29uZmlnLmlucHV0VHlwZSwgaGFuZG9mZi50b29sTmFtZSk7XG4gICAgICAgIGhhbmRvZmYuaW5wdXRKc29uU2NoZW1hID0gcmVzdWx0LnNjaGVtYTtcbiAgICAgICAgaGFuZG9mZi5zdHJpY3RKc29uU2NoZW1hID0gdHJ1ZTtcbiAgICAgICAgcGFyc2VyID0gcmVzdWx0LnBhcnNlcjtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50b29sTmFtZU92ZXJyaWRlKSB7XG4gICAgICAgIGhhbmRvZmYudG9vbE5hbWUgPSBjb25maWcudG9vbE5hbWVPdmVycmlkZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50b29sRGVzY3JpcHRpb25PdmVycmlkZSkge1xuICAgICAgICBoYW5kb2ZmLnRvb2xEZXNjcmlwdGlvbiA9IGNvbmZpZy50b29sRGVzY3JpcHRpb25PdmVycmlkZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5pbnB1dEZpbHRlcikge1xuICAgICAgICBoYW5kb2ZmLmlucHV0RmlsdGVyID0gY29uZmlnLmlucHV0RmlsdGVyO1xuICAgIH1cbiAgICByZXR1cm4gaGFuZG9mZjtcbn1cbi8qKlxuICogUmV0dXJucyBhIGhhbmRvZmYgZm9yIHRoZSBnaXZlbiBhZ2VudC4gSWYgdGhlIGFnZW50IGlzIGFscmVhZHkgd3JhcHBlZCBpbnRvIGEgaGFuZG9mZixcbiAqIGl0IHdpbGwgYmUgcmV0dXJuZWQgYXMgaXMuIE90aGVyd2lzZSwgYSBuZXcgaGFuZG9mZiBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWQuXG4gKlxuICogQHRlbXBsYXRlIFRDb250ZXh0IFRoZSBjb250ZXh0IG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVE91dHB1dCBUaGUgb3V0cHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhhbmRvZmYoYWdlbnQpIHtcbiAgICBpZiAoYWdlbnQgaW5zdGFuY2VvZiBIYW5kb2ZmKSB7XG4gICAgICAgIHJldHVybiBhZ2VudDtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRvZmYoYWdlbnQpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFuZG9mZi5tanMubWFwIiwiLyoqXG4gKiBTdHJlYW1pbmcgZXZlbnQgZnJvbSB0aGUgTExNLiBUaGVzZSBhcmUgYHJhd2AgZXZlbnRzLCBpLmUuIHRoZXkgYXJlIGRpcmVjdGx5IHBhc3NlZCB0aHJvdWdoIGZyb21cbiAqIHRoZSBMTE0uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IHtcbiAgICBkYXRhO1xuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHRoZSBldmVudC5cbiAgICAgKi9cbiAgICB0eXBlID0gJ3Jhd19tb2RlbF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSByYXcgcmVzcG9uc2VzIHN0cmVhbSBldmVudHMgZnJvbSB0aGUgTExNLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB9XG59XG4vKipcbiAqIFN0cmVhbWluZyBldmVudHMgdGhhdCB3cmFwIGEgYFJ1bkl0ZW1gLiBBcyB0aGUgYWdlbnQgcHJvY2Vzc2VzIHRoZSBMTE0gcmVzcG9uc2UsIGl0IHdpbGwgZ2VuZXJhdGVcbiAqIHRoZXNlIGV2ZW50cyBmcm9tIG5ldyBtZXNzYWdlcywgdG9vbCBjYWxscywgdG9vbCBvdXRwdXRzLCBoYW5kb2ZmcywgZXRjLlxuICovXG5leHBvcnQgY2xhc3MgUnVuSXRlbVN0cmVhbUV2ZW50IHtcbiAgICBuYW1lO1xuICAgIGl0ZW07XG4gICAgdHlwZSA9ICdydW5faXRlbV9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgKiBAcGFyYW0gaXRlbSBUaGUgaXRlbSB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGl0ZW0pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5pdGVtID0gaXRlbTtcbiAgICB9XG59XG4vKipcbiAqIEV2ZW50IHRoYXQgbm90aWZpZXMgdGhhdCB0aGVyZSBpcyBhIG5ldyBhZ2VudCBydW5uaW5nLlxuICovXG5leHBvcnQgY2xhc3MgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQge1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnYWdlbnRfdXBkYXRlZF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhZ2VudCBUaGUgbmV3IGFnZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50cy5tanMubWFwIiwiLyoqXG4gKiBEZWZpbmVzIGFuIGlucHV0IGd1YXJkcmFpbCBkZWZpbml0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lSW5wdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCBydW5JblBhcmFsbGVsID0gdHJ1ZSwgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdpbnB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHJ1bkluUGFyYWxsZWwsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ2lucHV0JywgbmFtZSB9LFxuICAgICAgICAgICAgICAgIG91dHB1dDogYXdhaXQgZXhlY3V0ZShhcmdzKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhbiBvdXRwdXQgZ3VhcmRyYWlsIGRlZmluaXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVPdXRwdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ291dHB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ291dHB1dCcsIG5hbWUgfSxcbiAgICAgICAgICAgICAgICBhZ2VudDogYXJncy5hZ2VudCxcbiAgICAgICAgICAgICAgICBhZ2VudE91dHB1dDogYXJncy5hZ2VudE91dHB1dCxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IGF3YWl0IGV4ZWN1dGUoYXJncyksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWFyZHJhaWwubWpzLm1hcCIsImxldCBERUZBVUxUX1BST1ZJREVSO1xuLyoqXG4gKiBTZXQgdGhlIG1vZGVsIHByb3ZpZGVyIHVzZWQgd2hlbiBubyBleHBsaWNpdCBwcm92aWRlciBpcyBzdXBwbGllZC5cbiAqXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gdXNlIGJ5IGRlZmF1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0TW9kZWxQcm92aWRlcihwcm92aWRlcikge1xuICAgIERFRkFVTFRfUFJPVklERVIgPSBwcm92aWRlcjtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgZGVmYXVsdCBtb2RlbCBwcm92aWRlci5cbiAqXG4gKiBAcmV0dXJucyBUaGUgZGVmYXVsdCBtb2RlbCBwcm92aWRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRNb2RlbFByb3ZpZGVyKCkge1xuICAgIGlmICh0eXBlb2YgREVGQVVMVF9QUk9WSURFUiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyIHNldC4gTWFrZSBzdXJlIHRvIHNldCBhIHByb3ZpZGVyIHVzaW5nIHNldERlZmF1bHRNb2RlbFByb3ZpZGVyIGJlZm9yZSBjYWxsaW5nIGdldERlZmF1bHRNb2RlbFByb3ZpZGVyIG9yIHBhc3MgYW4gZXhwbGljaXQgcHJvdmlkZXIuJyk7XG4gICAgfVxuICAgIHJldHVybiBERUZBVUxUX1BST1ZJREVSO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdmlkZXJzLm1qcy5tYXAiLCJpbXBvcnQgeyB0b1NtYXJ0U3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG5leHBvcnQgY2xhc3MgUnVuSXRlbUJhc2Uge1xuICAgIHR5cGUgPSAnYmFzZV9pdGVtJztcbiAgICByYXdJdGVtO1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIHJhd0l0ZW06IHRoaXMucmF3SXRlbSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuTWVzc2FnZU91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IGNvbnRlbnQoKSB7XG4gICAgICAgIGxldCBjb250ZW50ID0gJyc7XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiB0aGlzLnJhd0l0ZW0uY29udGVudCkge1xuICAgICAgICAgICAgaWYgKHBhcnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gcGFydC50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQ2FsbEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ3Rvb2xfY2FsbF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIG91dHB1dDtcbiAgICB0eXBlID0gJ3Rvb2xfY2FsbF9vdXRwdXRfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQsIG91dHB1dCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgICAgIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgb3V0cHV0OiB0b1NtYXJ0U3RyaW5nKHRoaXMub3V0cHV0KSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuUmVhc29uaW5nSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAncmVhc29uaW5nX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuSGFuZG9mZkNhbGxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdoYW5kb2ZmX2NhbGxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5IYW5kb2ZmT3V0cHV0SXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIHNvdXJjZUFnZW50O1xuICAgIHRhcmdldEFnZW50O1xuICAgIHR5cGUgPSAnaGFuZG9mZl9vdXRwdXRfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgc291cmNlQWdlbnQsIHRhcmdldEFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuc291cmNlQWdlbnQgPSBzb3VyY2VBZ2VudDtcbiAgICAgICAgdGhpcy50YXJnZXRBZ2VudCA9IHRhcmdldEFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIHNvdXJjZUFnZW50OiB0aGlzLnNvdXJjZUFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgdGFyZ2V0QWdlbnQ6IHRoaXMudGFyZ2V0QWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blRvb2xBcHByb3ZhbEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0b29sTmFtZTtcbiAgICB0eXBlID0gJ3Rvb2xfYXBwcm92YWxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQsIFxuICAgIC8qKlxuICAgICAqIEV4cGxpY2l0IHRvb2wgbmFtZSB0byB1c2UgZm9yIGFwcHJvdmFsIHRyYWNraW5nIHdoZW4gbm90IHByZXNlbnQgb24gdGhlIHJhdyBpdGVtLlxuICAgICAqL1xuICAgIHRvb2xOYW1lKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IHRvb2xOYW1lO1xuICAgICAgICB0aGlzLnRvb2xOYW1lID0gdG9vbE5hbWUgPz8gcmF3SXRlbS5uYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB0b29sIG5hbWUgaWYgYXZhaWxhYmxlIG9uIHRoZSByYXcgaXRlbSBvciBwcm92aWRlZCBleHBsaWNpdGx5LlxuICAgICAqIEtlcHQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggY29kZSB0aGF0IHByZXZpb3VzbHkgcmVsaWVkIG9uIGByYXdJdGVtLm5hbWVgLlxuICAgICAqL1xuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b29sTmFtZSA/PyB0aGlzLnJhd0l0ZW0ubmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYXJndW1lbnRzIGlmIHRoZSByYXcgaXRlbSBoYXMgYW4gYXJndW1lbnRzIHByb3BlcnR5IG90aGVyd2lzZSB0aGlzIHdpbGwgYmUgdW5kZWZpbmVkLlxuICAgICAqL1xuICAgIGdldCBhcmd1bWVudHMoKSB7XG4gICAgICAgIHJldHVybiAnYXJndW1lbnRzJyBpbiB0aGlzLnJhd0l0ZW0gPyB0aGlzLnJhd0l0ZW0uYXJndW1lbnRzIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgdG9vbE5hbWU6IHRoaXMudG9vbE5hbWUsXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBFeHRyYWN0IGFsbCB0ZXh0IG91dHB1dCBmcm9tIGEgbGlzdCBvZiBydW4gaXRlbXMgYnkgY29uY2F0ZW5hdGluZyB0aGUgY29udGVudCBvZiBhbGxcbiAqIG1lc3NhZ2Ugb3V0cHV0IGl0ZW1zLlxuICpcbiAqIEBwYXJhbSBpdGVtcyAtIFRoZSBsaXN0IG9mIHJ1biBpdGVtcyB0byBleHRyYWN0IHRleHQgZnJvbS5cbiAqIEByZXR1cm5zIEEgc3RyaW5nIG9mIGFsbCB0aGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgcnVuIGl0ZW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdEFsbFRleHRPdXRwdXQoaXRlbXMpIHtcbiAgICByZXR1cm4gaXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlID09PSAnbWVzc2FnZV9vdXRwdXRfaXRlbScpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0uY29udGVudClcbiAgICAgICAgLmpvaW4oJycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlbXMubWpzLm1hcCIsImV4cG9ydCBjbGFzcyBBZ2VudFRvb2xVc2VUcmFja2VyIHtcbiAgICAjYWdlbnRUb1Rvb2xzID0gbmV3IE1hcCgpO1xuICAgIGFkZFRvb2xVc2UoYWdlbnQsIHRvb2xOYW1lcywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGFsbG93RW1wdHkgPSBvcHRpb25zLmFsbG93RW1wdHkgPz8gZmFsc2U7XG4gICAgICAgIGlmICh0b29sTmFtZXMubGVuZ3RoID09PSAwICYmICFhbGxvd0VtcHR5KSB7XG4gICAgICAgICAgICAvLyBTa2lwIGluaXRpYWwgZW1wdHkgd3JpdGVzIGFuZCBhdm9pZCBvdmVyd3JpdGluZyBub24tZW1wdHkgaGlzdG9yeS5cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy4jYWdlbnRUb1Rvb2xzLmdldChhZ2VudCk7XG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nIHx8IGV4aXN0aW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJlc2VydmUgcHJpb3Igbm9uLWVtcHR5IGhpc3Rvcnkgd2hlbiBub3QgZXhwbGljaXRseSBhbGxvd2VkIHRvIGRvd25ncmFkZS5cbiAgICAgICAgaWYgKCFhbGxvd0VtcHR5KSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuI2FnZW50VG9Ub29scy5nZXQoYWdlbnQpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nICYmIGV4aXN0aW5nLmxlbmd0aCA+IDAgJiYgdG9vbE5hbWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhZ2VudFRvVG9vbHMuc2V0KGFnZW50LCB0b29sTmFtZXMpO1xuICAgIH1cbiAgICBoYXNVc2VkVG9vbHMoYWdlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2FnZW50VG9Ub29scy5oYXMoYWdlbnQpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoQXJyYXkuZnJvbSh0aGlzLiNhZ2VudFRvVG9vbHMuZW50cmllcygpKS5tYXAoKFthZ2VudCwgdG9vbE5hbWVzXSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFthZ2VudC5uYW1lLCB0b29sTmFtZXNdO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9vbFVzZVRyYWNrZXIubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuZXhwb3J0IGNvbnN0IG5leHRTdGVwU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9oYW5kb2ZmJyksXG4gICAgICAgIG5ld0FnZW50OiB6LmFueSgpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyksXG4gICAgICAgIG91dHB1dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbmV4dF9zdGVwX3J1bl9hZ2FpbicpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJyksXG4gICAgICAgIGRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIH0pLFxuXSk7XG5leHBvcnQgY2xhc3MgU2luZ2xlU3RlcFJlc3VsdCB7XG4gICAgb3JpZ2luYWxJbnB1dDtcbiAgICBtb2RlbFJlc3BvbnNlO1xuICAgIHByZVN0ZXBJdGVtcztcbiAgICBuZXdTdGVwSXRlbXM7XG4gICAgbmV4dFN0ZXA7XG4gICAgY29uc3RydWN0b3Iob3JpZ2luYWxJbnB1dCwgbW9kZWxSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdTdGVwSXRlbXMsIG5leHRTdGVwKSB7XG4gICAgICAgIHRoaXMub3JpZ2luYWxJbnB1dCA9IG9yaWdpbmFsSW5wdXQ7XG4gICAgICAgIHRoaXMubW9kZWxSZXNwb25zZSA9IG1vZGVsUmVzcG9uc2U7XG4gICAgICAgIHRoaXMucHJlU3RlcEl0ZW1zID0gcHJlU3RlcEl0ZW1zO1xuICAgICAgICB0aGlzLm5ld1N0ZXBJdGVtcyA9IG5ld1N0ZXBJdGVtcztcbiAgICAgICAgdGhpcy5uZXh0U3RlcCA9IG5leHRTdGVwO1xuICAgIH1cbiAgICBnZXQgZ2VuZXJhdGVkSXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZVN0ZXBJdGVtcy5jb25jYXQodGhpcy5uZXdTdGVwSXRlbXMpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0ZXBzLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IEFnZW50IH0gZnJvbSBcIi4vYWdlbnQubWpzXCI7XG5pbXBvcnQgeyBSdW5NZXNzYWdlT3V0cHV0SXRlbSwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgUnVuVG9vbENhbGxJdGVtLCBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1bkhhbmRvZmZDYWxsSXRlbSwgUnVuSGFuZG9mZk91dHB1dEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5pbXBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmltcG9ydCB7IGdldFR1cm5JbnB1dCB9IGZyb20gXCIuL3J1bm5lci9pdGVtcy5tanNcIjtcbmltcG9ydCB7IEFnZW50VG9vbFVzZVRyYWNrZXIgfSBmcm9tIFwiLi9ydW5uZXIvdG9vbFVzZVRyYWNrZXIubWpzXCI7XG5pbXBvcnQgeyBuZXh0U3RlcFNjaGVtYSB9IGZyb20gXCIuL3J1bm5lci9zdGVwcy5tanNcIjtcbmltcG9ydCB7IFN5c3RlbUVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vdHJhY2luZy9wcm92aWRlci5tanNcIjtcbmltcG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBoYW5kb2ZmIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCAqIGFzIHByb3RvY29sIGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuaW1wb3J0IHsgc2FmZUV4ZWN1dGUgfSBmcm9tIFwiLi91dGlscy9zYWZlRXhlY3V0ZS5tanNcIjtcbi8qKlxuICogVGhlIHNjaGVtYSB2ZXJzaW9uIG9mIHRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJpYWxpemVkXG4gKiBydW4gc3RhdGUgaXMgY29tcGF0aWJsZSB3aXRoIHRoZSBjdXJyZW50IHZlcnNpb24gb2YgdGhlIFNESy5cbiAqIElmIGFueXRoaW5nIGluIHRoaXMgc2NoZW1hIGNoYW5nZXMsIHRoZSB2ZXJzaW9uIHdpbGwgaGF2ZSB0byBiZSBpbmNyZW1lbnRlZC5cbiAqXG4gKiBWZXJzaW9uIGhpc3RvcnkuXG4gKiAtIDEuMDogSW5pdGlhbCBzZXJpYWxpemVkIFJ1blN0YXRlIHNjaGVtYS5cbiAqIC0gMS4xOiBBZGRzIG9wdGlvbmFsIGN1cnJlbnRUdXJuSW5Qcm9ncmVzcywgY29udmVyc2F0aW9uSWQsIGFuZCBwcmV2aW91c1Jlc3BvbnNlSWQgZmllbGRzLFxuICogICBwbHVzIGJyb2FkZXIgdG9vbF9jYWxsX291dHB1dF9pdGVtIHJhd0l0ZW0gdmFyaWFudHMgZm9yIG5vbi1mdW5jdGlvbiB0b29scy4gT2xkZXIgMS4wXG4gKiAgIHBheWxvYWRzIHJlbWFpbiByZWFkYWJsZSBidXQgcmVzdW1lcyBtYXkgbGFjayBtaWQtdHVybiBvciBzZXJ2ZXItbWFuYWdlZCBjb250ZXh0IHByZWNpc2lvbi5cbiAqIC0gMS4yOiBBZGRzIHBlbmRpbmdBZ2VudFRvb2xSdW5zIGZvciBuZXN0ZWQgYWdlbnQgdG9vbCByZXN1bXB0aW9uLlxuICovXG5leHBvcnQgY29uc3QgQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTiA9ICcxLjInO1xuY29uc3QgU1VQUE9SVEVEX1NDSEVNQV9WRVJTSU9OUyA9IFtcbiAgICAnMS4wJyxcbiAgICAnMS4xJyxcbiAgICBDVVJSRU5UX1NDSEVNQV9WRVJTSU9OLFxuXTtcbmNvbnN0ICRzY2hlbWFWZXJzaW9uID0gei5lbnVtKFNVUFBPUlRFRF9TQ0hFTUFfVkVSU0lPTlMpO1xuY29uc3Qgc2VyaWFsaXplZEFnZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG5hbWU6IHouc3RyaW5nKCksXG59KTtcbmNvbnN0IHNlcmlhbGl6ZWRTcGFuQmFzZSA9IHoub2JqZWN0KHtcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgndHJhY2Uuc3BhbicpLFxuICAgIGlkOiB6LnN0cmluZygpLFxuICAgIHRyYWNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcmVudF9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIHN0YXJ0ZWRfYXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBlbmRlZF9hdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIGVycm9yOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICBtZXNzYWdlOiB6LnN0cmluZygpLFxuICAgICAgICBkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxuICAgIH0pXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHNwYW5fZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG59KTtcbmNvbnN0IFNlcmlhbGl6ZWRTcGFuID0gc2VyaWFsaXplZFNwYW5CYXNlLmV4dGVuZCh7XG4gICAgcHJldmlvdXNfc3Bhbjogei5sYXp5KCgpID0+IFNlcmlhbGl6ZWRTcGFuKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCByZXF1ZXN0VXNhZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zRGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkub3B0aW9uYWwoKSxcbiAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAgIGVuZHBvaW50OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IHVzYWdlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHJlcXVlc3RzOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIG91dHB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICB0b3RhbFRva2Vuczogei5udW1iZXIoKSxcbiAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHouYXJyYXkoei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSkub3B0aW9uYWwoKSxcbiAgICByZXF1ZXN0VXNhZ2VFbnRyaWVzOiB6LmFycmF5KHJlcXVlc3RVc2FnZVNjaGVtYSkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgbW9kZWxSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB1c2FnZTogdXNhZ2VTY2hlbWEsXG4gICAgb3V0cHV0OiB6LmFycmF5KHByb3RvY29sLk91dHB1dE1vZGVsSXRlbSksXG4gICAgcmVzcG9uc2VJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgaXRlbVNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlX291dHB1dF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2NhbGxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5Ub29sQ2FsbEl0ZW0ub3IocHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtKSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndG9vbF9jYWxsX291dHB1dF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0ub3IocHJvdG9jb2wuQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSlcbiAgICAgICAgICAgIC5vcihwcm90b2NvbC5TaGVsbENhbGxSZXN1bHRJdGVtKVxuICAgICAgICAgICAgLm9yKHByb3RvY29sLkFwcGx5UGF0Y2hDYWxsUmVzdWx0SXRlbSksXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgICAgIG91dHB1dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgncmVhc29uaW5nX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuUmVhc29uaW5nSXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaGFuZG9mZl9jYWxsX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaGFuZG9mZl9vdXRwdXRfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxSZXN1bHRJdGVtLFxuICAgICAgICBzb3VyY2VBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgICAgICB0YXJnZXRBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2FwcHJvdmFsX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbS5vcihwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0pXG4gICAgICAgICAgICAub3IocHJvdG9jb2wuU2hlbGxDYWxsSXRlbSlcbiAgICAgICAgICAgIC5vcihwcm90b2NvbC5BcHBseVBhdGNoQ2FsbEl0ZW0pLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgICAgICB0b29sTmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIH0pLFxuXSk7XG5jb25zdCBzZXJpYWxpemVkVHJhY2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3RyYWNlJyksXG4gICAgaWQ6IHouc3RyaW5nKCksXG4gICAgd29ya2Zsb3dfbmFtZTogei5zdHJpbmcoKSxcbiAgICBncm91cF9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIG1ldGFkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICAvLyBQb3B1bGF0ZWQgb25seSBpZiB0aGUgdHJhY2Ugd2FzIGNyZWF0ZWQgd2l0aCBhIHBlci1ydW4gdHJhY2luZ0FwaUtleSAoZS5nLiwgUnVubmVyLnJ1bih7IHRyYWNpbmc6IHsgYXBpS2V5IH0gfSkpXG4gICAgLy8gYW5kIHNlcmlhbGl6YXRpb24gb3B0cyBpbiB0byBpbmNsdWRlIGl0LiBCeSBkZWZhdWx0IHRoaXMgaXMgb21pdHRlZCB0byBhdm9pZCBwZXJzaXN0aW5nIHNlY3JldHMuXG4gICAgdHJhY2luZ19hcGlfa2V5OiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pO1xuY29uc3Qgc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG5ld0l0ZW1zOiB6LmFycmF5KGl0ZW1TY2hlbWEpLFxuICAgIHRvb2xzVXNlZDogei5hcnJheSh6LnN0cmluZygpKSxcbiAgICBoYW5kb2Zmczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICBoYW5kb2ZmOiB6LmFueSgpLFxuICAgIH0pKSxcbiAgICBmdW5jdGlvbnM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgdG9vbDogei5hbnkoKSxcbiAgICB9KSksXG4gICAgY29tcHV0ZXJBY3Rpb25zOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIGNvbXB1dGVyOiB6LmFueSgpLFxuICAgIH0pKSxcbiAgICBzaGVsbEFjdGlvbnM6IHpcbiAgICAgICAgLmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIHNoZWxsOiB6LmFueSgpLFxuICAgIH0pKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICBhcHBseVBhdGNoQWN0aW9uczogelxuICAgICAgICAuYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgYXBwbHlQYXRjaDogei5hbnkoKSxcbiAgICB9KSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgbWNwQXBwcm92YWxSZXF1ZXN0czogelxuICAgICAgICAuYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICByZXF1ZXN0SXRlbTogei5vYmplY3Qoe1xuICAgICAgICAgICAgLy8gcHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtXG4gICAgICAgICAgICByYXdJdGVtOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbF9jYWxsJyksXG4gICAgICAgICAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGFsd2F5cyBleGlzdHMgYnV0IG1hcmtlZCBhcyBvcHRpb25hbCBmb3IgZWFybHkgdmVyc2lvbiBjb21wYXRpYmlsaXR5OyB3aGVuIHJlbGVhc2luZyAxLjAsIHdlIGNhbiByZW1vdmUgdGhlIG51bGxhYmxlIGFuZCBvcHRpb25hbFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgICAvLyBIb3N0ZWRNQ1BUb29sXG4gICAgICAgIG1jcFRvb2w6IHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaG9zdGVkX3Rvb2wnKSxcbiAgICAgICAgICAgIG5hbWU6IHoubGl0ZXJhbCgnaG9zdGVkX21jcCcpLFxuICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICAgICAgfSksXG4gICAgfSkpXG4gICAgICAgIC5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0cmlwd2lyZVRyaWdnZXJlZDogei5ib29sZWFuKCksXG4gICAgb3V0cHV0SW5mbzogei5hbnkoKSxcbn0pO1xuY29uc3QgdG9vbEd1YXJkcmFpbEJlaGF2aW9yU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ2FsbG93JykgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3JlamVjdENvbnRlbnQnKSxcbiAgICAgICAgbWVzc2FnZTogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgndGhyb3dFeGNlcHRpb24nKSB9KSxcbl0pO1xuY29uc3QgdG9vbEd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG91dHB1dEluZm86IHouYW55KCkub3B0aW9uYWwoKSxcbiAgICBiZWhhdmlvcjogdG9vbEd1YXJkcmFpbEJlaGF2aW9yU2NoZW1hLFxufSk7XG5jb25zdCB0b29sR3VhcmRyYWlsTWV0YWRhdGFTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei51bmlvbihbei5saXRlcmFsKCd0b29sX2lucHV0JyksIHoubGl0ZXJhbCgndG9vbF9vdXRwdXQnKV0pLFxuICAgIG5hbWU6IHouc3RyaW5nKCksXG59KTtcbmNvbnN0IGlucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGd1YXJkcmFpbDogei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0JyksXG4gICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgb3V0cHV0OiBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSxcbn0pO1xuY29uc3Qgb3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGd1YXJkcmFpbDogei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dCcpLFxuICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIGFnZW50T3V0cHV0OiB6LmFueSgpLFxuICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgb3V0cHV0OiBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSxcbn0pO1xuY29uc3QgdG9vbElucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGd1YXJkcmFpbDogdG9vbEd1YXJkcmFpbE1ldGFkYXRhU2NoZW1hLmV4dGVuZCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndG9vbF9pbnB1dCcpLFxuICAgIH0pLFxuICAgIG91dHB1dDogdG9vbEd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5jb25zdCB0b29sT3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGd1YXJkcmFpbDogdG9vbEd1YXJkcmFpbE1ldGFkYXRhU2NoZW1hLmV4dGVuZCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndG9vbF9vdXRwdXQnKSxcbiAgICB9KSxcbiAgICBvdXRwdXQ6IHRvb2xHdWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSxcbn0pO1xuZXhwb3J0IGNvbnN0IFNlcmlhbGl6ZWRSdW5TdGF0ZSA9IHoub2JqZWN0KHtcbiAgICAkc2NoZW1hVmVyc2lvbixcbiAgICBjdXJyZW50VHVybjogei5udW1iZXIoKSxcbiAgICBjdXJyZW50QWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICBvcmlnaW5hbElucHV0OiB6LnN0cmluZygpLm9yKHouYXJyYXkocHJvdG9jb2wuTW9kZWxJdGVtKSksXG4gICAgbW9kZWxSZXNwb25zZXM6IHouYXJyYXkobW9kZWxSZXNwb25zZVNjaGVtYSksXG4gICAgY29udGV4dDogei5vYmplY3Qoe1xuICAgICAgICB1c2FnZTogdXNhZ2VTY2hlbWEsXG4gICAgICAgIGFwcHJvdmFsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5vYmplY3Qoe1xuICAgICAgICAgICAgYXBwcm92ZWQ6IHouYXJyYXkoei5zdHJpbmcoKSkub3Ioei5ib29sZWFuKCkpLFxuICAgICAgICAgICAgcmVqZWN0ZWQ6IHouYXJyYXkoei5zdHJpbmcoKSkub3Ioei5ib29sZWFuKCkpLFxuICAgICAgICB9KSksXG4gICAgICAgIGNvbnRleHQ6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIH0pLFxuICAgIHRvb2xVc2VUcmFja2VyOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFycmF5KHouc3RyaW5nKCkpKSxcbiAgICBtYXhUdXJuczogei5udW1iZXIoKSxcbiAgICBjdXJyZW50QWdlbnRTcGFuOiBTZXJpYWxpemVkU3Bhbi5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgbm9BY3RpdmVBZ2VudFJ1bjogei5ib29sZWFuKCksXG4gICAgaW5wdXRHdWFyZHJhaWxSZXN1bHRzOiB6LmFycmF5KGlucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hKSxcbiAgICBvdXRwdXRHdWFyZHJhaWxSZXN1bHRzOiB6LmFycmF5KG91dHB1dEd1YXJkcmFpbFJlc3VsdFNjaGVtYSksXG4gICAgdG9vbElucHV0R3VhcmRyYWlsUmVzdWx0czogelxuICAgICAgICAuYXJyYXkodG9vbElucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hKVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAuZGVmYXVsdChbXSksXG4gICAgdG9vbE91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHpcbiAgICAgICAgLmFycmF5KHRvb2xPdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEpXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5kZWZhdWx0KFtdKSxcbiAgICBjdXJyZW50VHVybkluUHJvZ3Jlc3M6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgY3VycmVudFN0ZXA6IG5leHRTdGVwU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgbGFzdE1vZGVsUmVzcG9uc2U6IG1vZGVsUmVzcG9uc2VTY2hlbWEub3B0aW9uYWwoKSxcbiAgICBnZW5lcmF0ZWRJdGVtczogei5hcnJheShpdGVtU2NoZW1hKSxcbiAgICBwZW5kaW5nQWdlbnRUb29sUnVuczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5zdHJpbmcoKSkub3B0aW9uYWwoKS5kZWZhdWx0KHt9KSxcbiAgICBsYXN0UHJvY2Vzc2VkUmVzcG9uc2U6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIGN1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50OiB6Lm51bWJlcigpLmludCgpLm1pbigwKS5vcHRpb25hbCgpLFxuICAgIGNvbnZlcnNhdGlvbklkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcHJldmlvdXNSZXNwb25zZUlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdHJhY2U6IHNlcmlhbGl6ZWRUcmFjZVNjaGVtYS5udWxsYWJsZSgpLFxufSk7XG4vKipcbiAqIFNlcmlhbGl6YWJsZSBzbmFwc2hvdCBvZiBhbiBhZ2VudCdzIHJ1biwgaW5jbHVkaW5nIGNvbnRleHQsIHVzYWdlIGFuZCB0cmFjZS5cbiAqIFdoaWxlIHRoaXMgY2xhc3MgaGFzIHB1YmxpY2x5IHdyaXRhYmxlIHByb3BlcnRpZXMgKHByZWZpeGVkIHdpdGggYF9gKSwgdGhleSBhcmUgbm90IG1lYW50IHRvIGJlXG4gKiB1c2VkIGRpcmVjdGx5LiBUbyByZWFkIHRoZXNlIHByb3BlcnRpZXMsIHVzZSB0aGUgYFJ1blJlc3VsdGAgaW5zdGVhZC5cbiAqXG4gKiBNYW5pcHVsYXRpb24gb2YgdGhlIHN0YXRlIGRpcmVjdGx5IGNhbiBsZWFkIHRvIHVuZXhwZWN0ZWQgYmVoYXZpb3IgYW5kIHNob3VsZCBiZSBhdm9pZGVkLlxuICogSW5zdGVhZCwgdXNlIHRoZSBgYXBwcm92ZWAgYW5kIGByZWplY3RgIG1ldGhvZHMgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgc3RhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5TdGF0ZSB7XG4gICAgLyoqXG4gICAgICogQ3VycmVudCB0dXJuIG51bWJlciBpbiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIF9jdXJyZW50VHVybiA9IDA7XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgY3VycmVudCB0dXJuIGhhcyBhbHJlYWR5IGJlZW4gY291bnRlZCAodXNlZnVsIHdoZW4gcmVzdW1pbmcgbWlkLXR1cm4pLlxuICAgICAqL1xuICAgIF9jdXJyZW50VHVybkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBUaGUgYWdlbnQgY3VycmVudGx5IGhhbmRsaW5nIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgX2N1cnJlbnRBZ2VudDtcbiAgICAvKipcbiAgICAgKiBPcmlnaW5hbCB1c2VyIGlucHV0IHByaW9yIHRvIGFueSBwcm9jZXNzaW5nLlxuICAgICAqL1xuICAgIF9vcmlnaW5hbElucHV0O1xuICAgIC8qKlxuICAgICAqIFJlc3BvbnNlcyBmcm9tIHRoZSBtb2RlbCBzbyBmYXIuXG4gICAgICovXG4gICAgX21vZGVsUmVzcG9uc2VzO1xuICAgIC8qKlxuICAgICAqIENvbnZlcnNhdGlvbiBpZGVudGlmaWVyIHdoZW4gdGhlIHNlcnZlciBtYW5hZ2VzIGNvbnZlcnNhdGlvbiBoaXN0b3J5LlxuICAgICAqL1xuICAgIF9jb252ZXJzYXRpb25JZDtcbiAgICAvKipcbiAgICAgKiBMYXRlc3QgcmVzcG9uc2UgaWRlbnRpZmllciByZXR1cm5lZCBieSB0aGUgc2VydmVyIGZvciBzZXJ2ZXItbWFuYWdlZCBjb252ZXJzYXRpb25zLlxuICAgICAqL1xuICAgIF9wcmV2aW91c1Jlc3BvbnNlSWQ7XG4gICAgLyoqXG4gICAgICogRWZmZWN0aXZlIG1vZGVsIHNldHRpbmdzIHVzZWQgZm9yIHRoZSBtb3N0IHJlY2VudCBtb2RlbCBjYWxsLlxuICAgICAqL1xuICAgIF9sYXN0TW9kZWxTZXR0aW5ncztcbiAgICAvKipcbiAgICAgKiBBY3RpdmUgdHJhY2luZyBzcGFuIGZvciB0aGUgY3VycmVudCBhZ2VudCBpZiB0cmFjaW5nIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgX2N1cnJlbnRBZ2VudFNwYW47XG4gICAgLyoqXG4gICAgICogUnVuIGNvbnRleHQgdHJhY2tpbmcgYXBwcm92YWxzLCB1c2FnZSwgYW5kIG90aGVyIG1ldGFkYXRhLlxuICAgICAqL1xuICAgIF9jb250ZXh0O1xuICAgIC8qKlxuICAgICAqIFRoZSB1c2FnZSBhZ2dyZWdhdGVkIGZvciB0aGlzIHJ1bi4gVGhpcyBpbmNsdWRlcyBwZXItcmVxdWVzdCBicmVha2Rvd25zIHdoZW4gYXZhaWxhYmxlLlxuICAgICAqL1xuICAgIGdldCB1c2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRleHQudXNhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYWNrcyB3aGF0IHRvb2xzIGVhY2ggYWdlbnQgaGFzIHVzZWQuXG4gICAgICovXG4gICAgX3Rvb2xVc2VUcmFja2VyO1xuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZWQgcGVuZGluZyBuZXN0ZWQgYWdlbnQgcnVucyBrZXllZCBieSB0b29sIG5hbWUgYW5kIGNhbGwgaWQuXG4gICAgICovXG4gICAgX3BlbmRpbmdBZ2VudFRvb2xSdW5zO1xuICAgIC8qKlxuICAgICAqIEl0ZW1zIGdlbmVyYXRlZCBieSB0aGUgYWdlbnQgZHVyaW5nIHRoZSBydW4uXG4gICAgICovXG4gICAgX2dlbmVyYXRlZEl0ZW1zO1xuICAgIC8qKlxuICAgICAqIE51bWJlciBvZiBgX2dlbmVyYXRlZEl0ZW1zYCBhbHJlYWR5IGZsdXNoZWQgdG8gc2Vzc2lvbiBzdG9yYWdlIGZvciB0aGUgY3VycmVudCB0dXJuLlxuICAgICAqXG4gICAgICogUGVyc2lzdGluZyB0aGUgZW50aXJlIHR1cm4gb24gZXZlcnkgc2F2ZSB3b3VsZCBkdXBsaWNhdGUgcmVzcG9uc2VzIGFuZCB0b29sIG91dHB1dHMuXG4gICAgICogSW5zdGVhZCwgYHNhdmVUb1Nlc3Npb25gIGFwcGVuZHMgb25seSB0aGUgZGVsdGEgc2luY2UgdGhlIHByZXZpb3VzIHdyaXRlLiBUaGlzIGNvdW50ZXJcbiAgICAgKiB0cmFja3MgaG93IG1hbnkgZ2VuZXJhdGVkIHJ1biBpdGVtcyBmcm9tICp0aGlzIHR1cm4qIHdlcmUgYWxyZWFkeSB3cml0dGVuIHNvIHRoZSBuZXh0XG4gICAgICogc2F2ZSBjYW4gc2xpY2Ugb2ZmIG9ubHkgdGhlIG5ldyBlbnRyaWVzLiBXaGVuIGEgdHVybiBpcyBpbnRlcnJ1cHRlZCAoZS5nLiwgYXdhaXRpbmcgdG9vbFxuICAgICAqIGFwcHJvdmFsKSBhbmQgbGF0ZXIgcmVzdW1lZCwgd2UgcmV3aW5kIHRoZSBjb3VudGVyIGJlZm9yZSBjb250aW51aW5nIHNvIHRoZSBwZW5kaW5nIHRvb2xcbiAgICAgKiBvdXRwdXQgc3RpbGwgZ2V0cyBzdG9yZWQuXG4gICAgICovXG4gICAgX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50O1xuICAgIC8qKlxuICAgICAqIE1heGltdW0gYWxsb3dlZCB0dXJucyBiZWZvcmUgZm9yY2luZyB0ZXJtaW5hdGlvbi5cbiAgICAgKi9cbiAgICBfbWF4VHVybnM7XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcnVuIGhhcyBhbiBhY3RpdmUgYWdlbnQgc3RlcCBpbiBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBfbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgLyoqXG4gICAgICogTGFzdCBtb2RlbCByZXNwb25zZSBmb3IgdGhlIHByZXZpb3VzIHR1cm4uXG4gICAgICovXG4gICAgX2xhc3RUdXJuUmVzcG9uc2U7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIGlucHV0IGd1YXJkcmFpbHMgYXBwbGllZCB0byB0aGUgcnVuLlxuICAgICAqL1xuICAgIF9pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIG91dHB1dCBndWFyZHJhaWxzIGFwcGxpZWQgdG8gdGhlIHJ1bi5cbiAgICAgKi9cbiAgICBfb3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAvKipcbiAgICAgKiBSZXN1bHRzIGZyb20gdG9vbCBpbnB1dCBndWFyZHJhaWxzIGFwcGxpZWQgZHVyaW5nIHRvb2wgZXhlY3V0aW9uLlxuICAgICAqL1xuICAgIF90b29sSW5wdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIC8qKlxuICAgICAqIFJlc3VsdHMgZnJvbSB0b29sIG91dHB1dCBndWFyZHJhaWxzIGFwcGxpZWQgZHVyaW5nIHRvb2wgZXhlY3V0aW9uLlxuICAgICAqL1xuICAgIF90b29sT3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAvKipcbiAgICAgKiBOZXh0IHN0ZXAgY29tcHV0ZWQgZm9yIHRoZSBhZ2VudCB0byB0YWtlLlxuICAgICAqL1xuICAgIF9jdXJyZW50U3RlcCA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgaG93IHRoZSBmaW5hbCBvdXRwdXQgd2FzIHByb2R1Y2VkIGZvciB0aGUgY3VycmVudCBydW4uXG4gICAgICogVGhpcyB2YWx1ZSBpcyBub3Qgc2VyaWFsaXplZC5cbiAgICAgKi9cbiAgICBfZmluYWxPdXRwdXRTb3VyY2U7XG4gICAgLyoqXG4gICAgICogUGFyc2VkIG1vZGVsIHJlc3BvbnNlIGFmdGVyIGFwcGx5aW5nIGd1YXJkcmFpbHMgYW5kIHRvb2xzLlxuICAgICAqL1xuICAgIF9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgLyoqXG4gICAgICogVHJhY2UgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcnVuIGlmIHRyYWNpbmcgaXMgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBfdHJhY2UgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQsIG9yaWdpbmFsSW5wdXQsIHN0YXJ0aW5nQWdlbnQsIG1heFR1cm5zKSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLl9vcmlnaW5hbElucHV0ID0gc3RydWN0dXJlZENsb25lKG9yaWdpbmFsSW5wdXQpO1xuICAgICAgICB0aGlzLl9tb2RlbFJlc3BvbnNlcyA9IFtdO1xuICAgICAgICB0aGlzLl9jdXJyZW50QWdlbnRTcGFuID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9jdXJyZW50QWdlbnQgPSBzdGFydGluZ0FnZW50O1xuICAgICAgICB0aGlzLl90b29sVXNlVHJhY2tlciA9IG5ldyBBZ2VudFRvb2xVc2VUcmFja2VyKCk7XG4gICAgICAgIHRoaXMuX3BlbmRpbmdBZ2VudFRvb2xSdW5zID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9nZW5lcmF0ZWRJdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9IDA7XG4gICAgICAgIHRoaXMuX21heFR1cm5zID0gbWF4VHVybnM7XG4gICAgICAgIHRoaXMuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyA9IFtdO1xuICAgICAgICB0aGlzLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzID0gW107XG4gICAgICAgIHRoaXMuX3Rvb2xJbnB1dEd1YXJkcmFpbFJlc3VsdHMgPSBbXTtcbiAgICAgICAgdGhpcy5fdG9vbE91dHB1dEd1YXJkcmFpbFJlc3VsdHMgPSBbXTtcbiAgICAgICAgdGhpcy5fdHJhY2UgPSBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBzZXJ2ZXItbWFuYWdlZCBjb252ZXJzYXRpb24gaWRlbnRpZmllcnMgYXMgYSBzaW5nbGUgb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIHNldENvbnZlcnNhdGlvbkNvbnRleHQoY29udmVyc2F0aW9uSWQsIHByZXZpb3VzUmVzcG9uc2VJZCkge1xuICAgICAgICB0aGlzLl9jb252ZXJzYXRpb25JZCA9IGNvbnZlcnNhdGlvbklkO1xuICAgICAgICB0aGlzLl9wcmV2aW91c1Jlc3BvbnNlSWQgPSBwcmV2aW91c1Jlc3BvbnNlSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGFnZW50IHNwYW4gYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXJyZW50IHJ1bi5cbiAgICAgKi9cbiAgICBzZXRDdXJyZW50QWdlbnRTcGFuKHNwYW4pIHtcbiAgICAgICAgdGhpcy5fY3VycmVudEFnZW50U3BhbiA9IHNwYW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN3aXRjaGVzIHRoZSBhY3RpdmUgYWdlbnQgaGFuZGxpbmcgdGhlIHJ1bi5cbiAgICAgKi9cbiAgICBzZXRDdXJyZW50QWdlbnQoYWdlbnQpIHtcbiAgICAgICAgdGhpcy5fY3VycmVudEFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGFnZW50IGN1cnJlbnRseSBoYW5kbGluZyB0aGUgcnVuLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgY291bnRlciB0aGF0IHRyYWNrcyBob3cgbWFueSBpdGVtcyB3ZXJlIHBlcnNpc3RlZCBmb3IgdGhlIGN1cnJlbnQgdHVybi5cbiAgICAgKi9cbiAgICByZXNldFR1cm5QZXJzaXN0ZW5jZSgpIHtcbiAgICAgICAgdGhpcy5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXdpbmRzIHRoZSBwZXJzaXN0ZWQgaXRlbSBjb3VudGVyIHdoZW4gcGVuZGluZyBhcHByb3ZhbHMgcmVxdWlyZSByZS13cml0aW5nIG91dHB1dHMuXG4gICAgICovXG4gICAgcmV3aW5kVHVyblBlcnNpc3RlbmNlKGNvdW50KSB7XG4gICAgICAgIGlmIChjb3VudCA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSBNYXRoLm1heCgwLCB0aGlzLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCAtIGNvdW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGhpc3Rvcnkgb2YgdGhlIGFnZW50IHJ1bi4gVGhpcyBpbmNsdWRlcyB0aGUgaW5wdXQgaXRlbXMgYW5kIHRoZSBuZXcgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgcnVuLlxuICAgICAqXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZCBhcyBpbnB1dHMgZm9yIHRoZSBuZXh0IGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICBnZXQgaGlzdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIGdldFR1cm5JbnB1dCh0aGlzLl9vcmlnaW5hbElucHV0LCB0aGlzLl9nZW5lcmF0ZWRJdGVtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYWxsIGludGVycnVwdGlvbnMgaWYgdGhlIGN1cnJlbnQgc3RlcCBpcyBhbiBpbnRlcnJ1cHRpb24gb3RoZXJ3aXNlIHJldHVybnMgYW4gZW1wdHkgYXJyYXkuXG4gICAgICovXG4gICAgZ2V0SW50ZXJydXB0aW9ucygpIHtcbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRTdGVwPy50eXBlICE9PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFN0ZXAuZGF0YS5pbnRlcnJ1cHRpb25zO1xuICAgIH1cbiAgICBnZXRQZW5kaW5nQWdlbnRUb29sUnVuS2V5KHRvb2xOYW1lLCBjYWxsSWQpIHtcbiAgICAgICAgcmV0dXJuIGAke3Rvb2xOYW1lfToke2NhbGxJZH1gO1xuICAgIH1cbiAgICBnZXRQZW5kaW5nQWdlbnRUb29sUnVuKHRvb2xOYW1lLCBjYWxsSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BlbmRpbmdBZ2VudFRvb2xSdW5zLmdldCh0aGlzLmdldFBlbmRpbmdBZ2VudFRvb2xSdW5LZXkodG9vbE5hbWUsIGNhbGxJZCkpO1xuICAgIH1cbiAgICBoYXNQZW5kaW5nQWdlbnRUb29sUnVuKHRvb2xOYW1lLCBjYWxsSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BlbmRpbmdBZ2VudFRvb2xSdW5zLmhhcyh0aGlzLmdldFBlbmRpbmdBZ2VudFRvb2xSdW5LZXkodG9vbE5hbWUsIGNhbGxJZCkpO1xuICAgIH1cbiAgICBzZXRQZW5kaW5nQWdlbnRUb29sUnVuKHRvb2xOYW1lLCBjYWxsSWQsIHNlcmlhbGl6ZWRTdGF0ZSkge1xuICAgICAgICB0aGlzLl9wZW5kaW5nQWdlbnRUb29sUnVucy5zZXQodGhpcy5nZXRQZW5kaW5nQWdlbnRUb29sUnVuS2V5KHRvb2xOYW1lLCBjYWxsSWQpLCBzZXJpYWxpemVkU3RhdGUpO1xuICAgIH1cbiAgICBjbGVhclBlbmRpbmdBZ2VudFRvb2xSdW4odG9vbE5hbWUsIGNhbGxJZCkge1xuICAgICAgICB0aGlzLl9wZW5kaW5nQWdlbnRUb29sUnVucy5kZWxldGUodGhpcy5nZXRQZW5kaW5nQWdlbnRUb29sUnVuS2V5KHRvb2xOYW1lLCBjYWxsSWQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwcm92ZXMgYSB0b29sIGNhbGwgcmVxdWVzdGVkIGJ5IHRoZSBhZ2VudCB0aHJvdWdoIGFuIGludGVycnVwdGlvbiBhbmQgYXBwcm92YWwgaXRlbSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogVG8gYXBwcm92ZSB0aGUgcmVxdWVzdCB1c2UgdGhpcyBtZXRob2QgYW5kIHRoZW4gcnVuIHRoZSBhZ2VudCBhZ2FpbiB3aXRoIHRoZSBzYW1lIHN0YXRlIG9iamVjdFxuICAgICAqIHRvIGNvbnRpbnVlIHRoZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0IGl0IHdpbGwgb25seSBhcHByb3ZlIHRoZSBjdXJyZW50IHRvb2wgY2FsbC4gVG8gYWxsb3cgdGhlIHRvb2wgdG8gYmUgdXNlZCBtdWx0aXBsZVxuICAgICAqIHRpbWVzIHRocm91Z2hvdXQgdGhlIHJ1biwgc2V0IHRoZSBgYWx3YXlzQXBwcm92ZWAgb3B0aW9uIHRvIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBjYWxsIGFwcHJvdmFsIGl0ZW0gdG8gYXBwcm92ZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBhcHByb3ZhbC5cbiAgICAgKi9cbiAgICBhcHByb3ZlKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzQXBwcm92ZTogZmFsc2UgfSkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LmFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlamVjdHMgYSB0b29sIGNhbGwgcmVxdWVzdGVkIGJ5IHRoZSBhZ2VudCB0aHJvdWdoIGFuIGludGVycnVwdGlvbiBhbmQgYXBwcm92YWwgaXRlbSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogVG8gcmVqZWN0IHRoZSByZXF1ZXN0IHVzZSB0aGlzIG1ldGhvZCBhbmQgdGhlbiBydW4gdGhlIGFnZW50IGFnYWluIHdpdGggdGhlIHNhbWUgc3RhdGUgb2JqZWN0XG4gICAgICogdG8gY29udGludWUgdGhlIGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQgaXQgd2lsbCBvbmx5IHJlamVjdCB0aGUgY3VycmVudCB0b29sIGNhbGwuIFRvIGFsbG93IHRoZSB0b29sIHRvIGJlIHVzZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aHJvdWdob3V0IHRoZSBydW4sIHNldCB0aGUgYGFsd2F5c1JlamVjdGAgb3B0aW9uIHRvIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBjYWxsIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIHJlamVjdGlvbi5cbiAgICAgKi9cbiAgICByZWplY3QoYXBwcm92YWxJdGVtLCBvcHRpb25zID0geyBhbHdheXNSZWplY3Q6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5yZWplY3RUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZXMgdGhlIHJ1biBzdGF0ZSB0byBhIEpTT04gb2JqZWN0LlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZXJpYWxpemUgdGhlIHJ1biBzdGF0ZSB0byBhIEpTT04gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXN1bWUgdGhlIHJ1biBsYXRlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIHRoZSBydW4gc3RhdGUuIEJ5IGRlZmF1bHQsIHRyYWNpbmcgQVBJIGtleXMgYXJlIG9taXR0ZWQgdG8gcHJldmVudFxuICAgICAqIGFjY2lkZW50YWwgcGVyc2lzdGVuY2Ugb2Ygc2VjcmV0cy4gUGFzcyBgaW5jbHVkZVRyYWNpbmdBcGlLZXk6IHRydWVgIG9ubHkgd2hlbiB5b3VcbiAgICAgKiBpbnRlbnRpb25hbGx5IG5lZWQgdG8gbWlncmF0ZSBhIHJ1biBhbG9uZyB3aXRoIGl0cyB0cmFjaW5nIGNyZWRlbnRpYWxzIChlLmcuLCB0b1xuICAgICAqIHJlaHlkcmF0ZSBpbiBhIHNlcGFyYXRlIHByb2Nlc3MgdGhhdCBsYWNrcyB0aGUgb3JpZ2luYWwgZW52aXJvbm1lbnQgdmFyaWFibGVzKS5cbiAgICAgKi9cbiAgICB0b0pTT04ob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGluY2x1ZGVUcmFjaW5nQXBpS2V5ID0gb3B0aW9ucy5pbmNsdWRlVHJhY2luZ0FwaUtleSA9PT0gdHJ1ZTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0ge1xuICAgICAgICAgICAgJHNjaGVtYVZlcnNpb246IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04sXG4gICAgICAgICAgICBjdXJyZW50VHVybjogdGhpcy5fY3VycmVudFR1cm4sXG4gICAgICAgICAgICBjdXJyZW50QWdlbnQ6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLl9jdXJyZW50QWdlbnQubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcmlnaW5hbElucHV0OiB0aGlzLl9vcmlnaW5hbElucHV0LFxuICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHRoaXMuX21vZGVsUmVzcG9uc2VzLm1hcCgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1c2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdHM6IHJlc3BvbnNlLnVzYWdlLnJlcXVlc3RzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLmlucHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zOiByZXNwb25zZS51c2FnZS5vdXRwdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogcmVzcG9uc2UudXNhZ2UudG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLnVzYWdlLmlucHV0VG9rZW5zRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLnVzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4ocmVzcG9uc2UudXNhZ2UucmVxdWVzdFVzYWdlRW50cmllcyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnVzYWdlLnJlcXVlc3RVc2FnZUVudHJpZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VXNhZ2VFbnRyaWVzOiByZXNwb25zZS51c2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzLm1hcCgoZW50cnkpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuczogZW50cnkuaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnM6IGVudHJ5Lm91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zOiBlbnRyeS50b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogZW50cnkuaW5wdXRUb2tlbnNEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogZW50cnkub3V0cHV0VG9rZW5zRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihlbnRyeS5lbmRwb2ludCA/IHsgZW5kcG9pbnQ6IGVudHJ5LmVuZHBvaW50IH0gOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiByZXNwb25zZS5yZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHJlc3BvbnNlLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLl9jb250ZXh0LnRvSlNPTigpLFxuICAgICAgICAgICAgdG9vbFVzZVRyYWNrZXI6IHRoaXMuX3Rvb2xVc2VUcmFja2VyLnRvSlNPTigpLFxuICAgICAgICAgICAgbWF4VHVybnM6IHRoaXMuX21heFR1cm5zLFxuICAgICAgICAgICAgY3VycmVudEFnZW50U3BhbjogdGhpcy5fY3VycmVudEFnZW50U3Bhbj8udG9KU09OKCksXG4gICAgICAgICAgICBub0FjdGl2ZUFnZW50UnVuOiB0aGlzLl9ub0FjdGl2ZUFnZW50UnVuLFxuICAgICAgICAgICAgY3VycmVudFR1cm5JblByb2dyZXNzOiB0aGlzLl9jdXJyZW50VHVybkluUHJvZ3Jlc3MsXG4gICAgICAgICAgICBpbnB1dEd1YXJkcmFpbFJlc3VsdHM6IHRoaXMuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyxcbiAgICAgICAgICAgIG91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHRoaXMuX291dHB1dEd1YXJkcmFpbFJlc3VsdHMubWFwKChyKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnIsXG4gICAgICAgICAgICAgICAgYWdlbnQ6IHIuYWdlbnQudG9KU09OKCksXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICB0b29sSW5wdXRHdWFyZHJhaWxSZXN1bHRzOiB0aGlzLl90b29sSW5wdXRHdWFyZHJhaWxSZXN1bHRzLFxuICAgICAgICAgICAgdG9vbE91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHRoaXMuX3Rvb2xPdXRwdXRHdWFyZHJhaWxSZXN1bHRzLFxuICAgICAgICAgICAgY3VycmVudFN0ZXA6IHRoaXMuX2N1cnJlbnRTdGVwLFxuICAgICAgICAgICAgbGFzdE1vZGVsUmVzcG9uc2U6IHRoaXMuX2xhc3RUdXJuUmVzcG9uc2UsXG4gICAgICAgICAgICBnZW5lcmF0ZWRJdGVtczogdGhpcy5fZ2VuZXJhdGVkSXRlbXMubWFwKChpdGVtKSA9PiBpdGVtLnRvSlNPTigpKSxcbiAgICAgICAgICAgIHBlbmRpbmdBZ2VudFRvb2xSdW5zOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy5fcGVuZGluZ0FnZW50VG9vbFJ1bnMuZW50cmllcygpKSxcbiAgICAgICAgICAgIGN1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50OiB0aGlzLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCxcbiAgICAgICAgICAgIGxhc3RQcm9jZXNzZWRSZXNwb25zZTogdGhpcy5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLFxuICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IHRoaXMuX2NvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiB0aGlzLl9wcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICB0cmFjZTogdGhpcy5fdHJhY2VcbiAgICAgICAgICAgICAgICA/IHRoaXMuX3RyYWNlLnRvSlNPTih7IGluY2x1ZGVUcmFjaW5nQXBpS2V5IH0pXG4gICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICB9O1xuICAgICAgICAvLyBwYXJzaW5nIHRoZSBzY2hlbWEgdG8gZW5zdXJlIHRoZSBvdXRwdXQgaXMgdmFsaWQgZm9yIHJlcGFyc2luZ1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBTZXJpYWxpemVkUnVuU3RhdGUuc2FmZVBhcnNlKG91dHB1dCk7XG4gICAgICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTeXN0ZW1FcnJvcihgRmFpbGVkIHRvIHNlcmlhbGl6ZSBydW4gc3RhdGUuICR7cGFyc2VkLmVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlZC5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIHRoZSBydW4gc3RhdGUgdG8gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNlcmlhbGl6ZSB0aGUgcnVuIHN0YXRlIHRvIGEgc3RyaW5nIHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXN1bWUgdGhlIHJ1biBsYXRlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS5cbiAgICAgKi9cbiAgICB0b1N0cmluZyhvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMudG9KU09OKG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzZXJpYWxpemVzIGEgcnVuIHN0YXRlIGZyb20gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGRlc2VyaWFsaXplIGEgcnVuIHN0YXRlIGZyb20gYSBzdHJpbmcgdGhhdCB3YXMgc2VyaWFsaXplZCB1c2luZyB0aGVcbiAgICAgKiBgdG9TdHJpbmdgIG1ldGhvZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZnJvbVN0cmluZyhpbml0aWFsQWdlbnQsIHN0cikge1xuICAgICAgICByZXR1cm4gYnVpbGRSdW5TdGF0ZUZyb21TdHJpbmcoaW5pdGlhbEFnZW50LCBzdHIpO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgZnJvbVN0cmluZ1dpdGhDb250ZXh0KGluaXRpYWxBZ2VudCwgc3RyLCBjb250ZXh0LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIGJ1aWxkUnVuU3RhdGVGcm9tU3RyaW5nKGluaXRpYWxBZ2VudCwgc3RyLCB7XG4gICAgICAgICAgICBjb250ZXh0T3ZlcnJpZGU6IGNvbnRleHQsXG4gICAgICAgICAgICBjb250ZXh0U3RyYXRlZ3k6IG9wdGlvbnMuY29udGV4dFN0cmF0ZWd5LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBidWlsZFJ1blN0YXRlRnJvbVN0cmluZyhpbml0aWFsQWdlbnQsIHN0ciwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgW3BhcnNpbmdFcnJvciwganNvblJlc3VsdF0gPSBhd2FpdCBzYWZlRXhlY3V0ZSgoKSA9PiBKU09OLnBhcnNlKHN0cikpO1xuICAgIGlmIChwYXJzaW5nRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgRmFpbGVkIHRvIHBhcnNlIHJ1biBzdGF0ZS4gJHtwYXJzaW5nRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHBhcnNpbmdFcnJvci5tZXNzYWdlIDogU3RyaW5nKHBhcnNpbmdFcnJvcil9YCk7XG4gICAgfVxuICAgIGNvbnN0IGN1cnJlbnRTY2hlbWFWZXJzaW9uID0ganNvblJlc3VsdC4kc2NoZW1hVmVyc2lvbjtcbiAgICBpZiAoIWN1cnJlbnRTY2hlbWFWZXJzaW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1J1biBzdGF0ZSBpcyBtaXNzaW5nIHNjaGVtYSB2ZXJzaW9uJyk7XG4gICAgfVxuICAgIGlmICghU1VQUE9SVEVEX1NDSEVNQV9WRVJTSU9OUy5pbmNsdWRlcyhjdXJyZW50U2NoZW1hVmVyc2lvbikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgUnVuIHN0YXRlIHNjaGVtYSB2ZXJzaW9uICR7Y3VycmVudFNjaGVtYVZlcnNpb259IGlzIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSB1c2UgdmVyc2lvbiAke0NVUlJFTlRfU0NIRU1BX1ZFUlNJT059LmApO1xuICAgIH1cbiAgICBjb25zdCBzdGF0ZUpzb24gPSBTZXJpYWxpemVkUnVuU3RhdGUucGFyc2UoSlNPTi5wYXJzZShzdHIpKTtcbiAgICByZXR1cm4gYnVpbGRSdW5TdGF0ZUZyb21Kc29uKGluaXRpYWxBZ2VudCwgc3RhdGVKc29uLCBvcHRpb25zKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkUnVuU3RhdGVGcm9tSnNvbihpbml0aWFsQWdlbnQsIHN0YXRlSnNvbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgYWdlbnRNYXAgPSBidWlsZEFnZW50TWFwKGluaXRpYWxBZ2VudCk7XG4gICAgY29uc3QgY29udGV4dE92ZXJyaWRlID0gb3B0aW9ucy5jb250ZXh0T3ZlcnJpZGU7XG4gICAgY29uc3QgY29udGV4dFN0cmF0ZWd5ID0gb3B0aW9ucy5jb250ZXh0U3RyYXRlZ3kgPz8gJ21lcmdlJztcbiAgICAvL1xuICAgIC8vIFJlYnVpbGQgdGhlIGNvbnRleHRcbiAgICAvL1xuICAgIGNvbnN0IGNvbnRleHQgPSBjb250ZXh0T3ZlcnJpZGUgPz9cbiAgICAgICAgbmV3IFJ1bkNvbnRleHQoc3RhdGVKc29uLmNvbnRleHQuY29udGV4dCk7XG4gICAgaWYgKGNvbnRleHRPdmVycmlkZSkge1xuICAgICAgICBpZiAoY29udGV4dFN0cmF0ZWd5ID09PSAnbWVyZ2UnKSB7XG4gICAgICAgICAgICBjb250ZXh0Ll9tZXJnZUFwcHJvdmFscyhzdGF0ZUpzb24uY29udGV4dC5hcHByb3ZhbHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb250ZXh0Ll9yZWJ1aWxkQXBwcm92YWxzKHN0YXRlSnNvbi5jb250ZXh0LmFwcHJvdmFscyk7XG4gICAgfVxuICAgIC8vXG4gICAgLy8gRmluZCB0aGUgY3VycmVudCBhZ2VudCBmcm9tIHRoZSBpbml0aWFsIGFnZW50XG4gICAgLy9cbiAgICBjb25zdCBjdXJyZW50QWdlbnQgPSBhZ2VudE1hcC5nZXQoc3RhdGVKc29uLmN1cnJlbnRBZ2VudC5uYW1lKTtcbiAgICBpZiAoIWN1cnJlbnRBZ2VudCkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBBZ2VudCAke3N0YXRlSnNvbi5jdXJyZW50QWdlbnQubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgfVxuICAgIGNvbnN0IHN0YXRlID0gbmV3IFJ1blN0YXRlKGNvbnRleHQsICcnLCBjdXJyZW50QWdlbnQsIHN0YXRlSnNvbi5tYXhUdXJucyk7XG4gICAgc3RhdGUuX2N1cnJlbnRUdXJuID0gc3RhdGVKc29uLmN1cnJlbnRUdXJuO1xuICAgIHN0YXRlLl9jdXJyZW50VHVybkluUHJvZ3Jlc3MgPSBzdGF0ZUpzb24uY3VycmVudFR1cm5JblByb2dyZXNzID8/IGZhbHNlO1xuICAgIHN0YXRlLl9jb252ZXJzYXRpb25JZCA9IHN0YXRlSnNvbi5jb252ZXJzYXRpb25JZCA/PyB1bmRlZmluZWQ7XG4gICAgc3RhdGUuX3ByZXZpb3VzUmVzcG9uc2VJZCA9IHN0YXRlSnNvbi5wcmV2aW91c1Jlc3BvbnNlSWQgPz8gdW5kZWZpbmVkO1xuICAgIC8vIHJlYnVpbGQgdG9vbCB1c2UgdHJhY2tlclxuICAgIHN0YXRlLl90b29sVXNlVHJhY2tlciA9IG5ldyBBZ2VudFRvb2xVc2VUcmFja2VyKCk7XG4gICAgZm9yIChjb25zdCBbYWdlbnROYW1lLCB0b29sTmFtZXNdIG9mIE9iamVjdC5lbnRyaWVzKHN0YXRlSnNvbi50b29sVXNlVHJhY2tlcikpIHtcbiAgICAgICAgc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2UoYWdlbnRNYXAuZ2V0KGFnZW50TmFtZSksIHRvb2xOYW1lcywgeyBhbGxvd0VtcHR5OiB0cnVlIH0pO1xuICAgIH1cbiAgICBzdGF0ZS5fcGVuZGluZ0FnZW50VG9vbFJ1bnMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHN0YXRlSnNvbi5wZW5kaW5nQWdlbnRUb29sUnVucyA/PyB7fSkpO1xuICAgIC8vIHJlYnVpbGQgY3VycmVudCBhZ2VudCBzcGFuXG4gICAgaWYgKHN0YXRlSnNvbi5jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgIGlmICghc3RhdGVKc29uLnRyYWNlKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignVHJhY2UgaXMgbm90IHNldCwgc2tpcHBpbmcgdHJhY2luZyBzZXR1cCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRyYWNlID0gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVRyYWNlKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHN0YXRlSnNvbi50cmFjZT8uaWQsXG4gICAgICAgICAgICBuYW1lOiBzdGF0ZUpzb24udHJhY2U/LndvcmtmbG93X25hbWUsXG4gICAgICAgICAgICBncm91cElkOiBzdGF0ZUpzb24udHJhY2U/Lmdyb3VwX2lkID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBzdGF0ZUpzb24udHJhY2U/Lm1ldGFkYXRhLFxuICAgICAgICAgICAgdHJhY2luZ0FwaUtleTogc3RhdGVKc29uLnRyYWNlPy50cmFjaW5nX2FwaV9rZXkgPz8gdW5kZWZpbmVkLFxuICAgICAgICB9KTtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSBkZXNlcmlhbGl6ZVNwYW4odHJhY2UsIHN0YXRlSnNvbi5jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgc3RhdGUuX3RyYWNlID0gdHJhY2U7XG4gICAgfVxuICAgIHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gc3RhdGVKc29uLm5vQWN0aXZlQWdlbnRSdW47XG4gICAgc3RhdGUuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyA9XG4gICAgICAgIHN0YXRlSnNvbi5pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgc3RhdGUuX291dHB1dEd1YXJkcmFpbFJlc3VsdHMgPSBzdGF0ZUpzb24ub3V0cHV0R3VhcmRyYWlsUmVzdWx0cy5tYXAoKHIpID0+ICh7XG4gICAgICAgIC4uLnIsXG4gICAgICAgIGFnZW50OiBhZ2VudE1hcC5nZXQoci5hZ2VudC5uYW1lKSxcbiAgICB9KSk7XG4gICAgc3RhdGUuX3Rvb2xJbnB1dEd1YXJkcmFpbFJlc3VsdHMgPVxuICAgICAgICBzdGF0ZUpzb24udG9vbElucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICBzdGF0ZS5fdG9vbE91dHB1dEd1YXJkcmFpbFJlc3VsdHMgPVxuICAgICAgICBzdGF0ZUpzb24udG9vbE91dHB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gc3RhdGVKc29uLmN1cnJlbnRTdGVwO1xuICAgIHN0YXRlLl9vcmlnaW5hbElucHV0ID0gc3RhdGVKc29uLm9yaWdpbmFsSW5wdXQ7XG4gICAgc3RhdGUuX21vZGVsUmVzcG9uc2VzID0gc3RhdGVKc29uLm1vZGVsUmVzcG9uc2VzLm1hcChkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2UpO1xuICAgIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlID0gc3RhdGVKc29uLmxhc3RNb2RlbFJlc3BvbnNlXG4gICAgICAgID8gZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlKHN0YXRlSnNvbi5sYXN0TW9kZWxSZXNwb25zZSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gc3RhdGVKc29uLmdlbmVyYXRlZEl0ZW1zLm1hcCgoaXRlbSkgPT4gZGVzZXJpYWxpemVJdGVtKGl0ZW0sIGFnZW50TWFwKSk7XG4gICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID1cbiAgICAgICAgc3RhdGVKc29uLmN1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID8/IDA7XG4gICAgc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHN0YXRlSnNvbi5sYXN0UHJvY2Vzc2VkUmVzcG9uc2VcbiAgICAgICAgPyBhd2FpdCBkZXNlcmlhbGl6ZVByb2Nlc3NlZFJlc3BvbnNlKGFnZW50TWFwLCBzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fY29udGV4dCwgc3RhdGVKc29uLmxhc3RQcm9jZXNzZWRSZXNwb25zZSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKHN0YXRlSnNvbi5jdXJyZW50U3RlcD8udHlwZSA9PT0gJ25leHRfc3RlcF9oYW5kb2ZmJykge1xuICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB7XG4gICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2hhbmRvZmYnLFxuICAgICAgICAgICAgbmV3QWdlbnQ6IGFnZW50TWFwLmdldChzdGF0ZUpzb24uY3VycmVudFN0ZXAubmV3QWdlbnQubmFtZSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzdGF0ZTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEFnZW50TWFwKGluaXRpYWxBZ2VudCkge1xuICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBxdWV1ZSA9IFtpbml0aWFsQWdlbnRdO1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRBZ2VudCA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGlmIChtYXAuaGFzKGN1cnJlbnRBZ2VudC5uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgbWFwLnNldChjdXJyZW50QWdlbnQubmFtZSwgY3VycmVudEFnZW50KTtcbiAgICAgICAgZm9yIChjb25zdCBoYW5kb2ZmIG9mIGN1cnJlbnRBZ2VudC5oYW5kb2Zmcykge1xuICAgICAgICAgICAgaWYgKGhhbmRvZmYgaW5zdGFuY2VvZiBBZ2VudCkge1xuICAgICAgICAgICAgICAgIGlmICghbWFwLmhhcyhoYW5kb2ZmLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goaGFuZG9mZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGFuZG9mZi5hZ2VudCkge1xuICAgICAgICAgICAgICAgIGlmICghbWFwLmhhcyhoYW5kb2ZmLmFnZW50Lm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goaGFuZG9mZi5hZ2VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXA7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVTcGFuKHRyYWNlLCBzZXJpYWxpemVkU3Bhbikge1xuICAgIGNvbnN0IHNwYW5EYXRhID0gc2VyaWFsaXplZFNwYW4uc3Bhbl9kYXRhO1xuICAgIGNvbnN0IHByZXZpb3VzU3BhbiA9IHNlcmlhbGl6ZWRTcGFuLnByZXZpb3VzX3NwYW5cbiAgICAgICAgPyBkZXNlcmlhbGl6ZVNwYW4odHJhY2UsIHNlcmlhbGl6ZWRTcGFuLnByZXZpb3VzX3NwYW4pXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IHNwYW4gPSBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIHNwYW5JZDogc2VyaWFsaXplZFNwYW4uaWQsXG4gICAgICAgIHRyYWNlSWQ6IHNlcmlhbGl6ZWRTcGFuLnRyYWNlX2lkLFxuICAgICAgICBwYXJlbnRJZDogc2VyaWFsaXplZFNwYW4ucGFyZW50X2lkID8/IHVuZGVmaW5lZCxcbiAgICAgICAgc3RhcnRlZEF0OiBzZXJpYWxpemVkU3Bhbi5zdGFydGVkX2F0ID8/IHVuZGVmaW5lZCxcbiAgICAgICAgZW5kZWRBdDogc2VyaWFsaXplZFNwYW4uZW5kZWRfYXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBkYXRhOiBzcGFuRGF0YSxcbiAgICB9LCB0cmFjZSk7XG4gICAgc3Bhbi5wcmV2aW91c1NwYW4gPSBwcmV2aW91c1NwYW47XG4gICAgcmV0dXJuIHNwYW47XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlKHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlKSB7XG4gICAgY29uc3QgdXNhZ2UgPSBuZXcgVXNhZ2Uoc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UudXNhZ2UpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHVzYWdlLFxuICAgICAgICBvdXRwdXQ6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLm91dHB1dC5tYXAoKGl0ZW0pID0+IHByb3RvY29sLk91dHB1dE1vZGVsSXRlbS5wYXJzZShpdGVtKSksXG4gICAgICAgIHJlc3BvbnNlSWQ6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnJlc3BvbnNlSWQsXG4gICAgICAgIHByb3ZpZGVyRGF0YTogc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UucHJvdmlkZXJEYXRhLFxuICAgIH07XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVJdGVtKHNlcmlhbGl6ZWRJdGVtLCBhZ2VudE1hcCkge1xuICAgIHN3aXRjaCAoc2VyaWFsaXplZEl0ZW0udHlwZSkge1xuICAgICAgICBjYXNlICdtZXNzYWdlX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuTWVzc2FnZU91dHB1dEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5Ub29sQ2FsbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSwgc2VyaWFsaXplZEl0ZW0ub3V0cHV0KTtcbiAgICAgICAgY2FzZSAncmVhc29uaW5nX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZWFzb25pbmdJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfY2FsbF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuSGFuZG9mZkNhbGxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5IYW5kb2ZmT3V0cHV0SXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uc291cmNlQWdlbnQubmFtZSksIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS50YXJnZXRBZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfYXBwcm92YWxfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpLCBzZXJpYWxpemVkSXRlbS50b29sTmFtZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZGVzZXJpYWxpemVQcm9jZXNzZWRSZXNwb25zZShhZ2VudE1hcCwgY3VycmVudEFnZW50LCBjb250ZXh0LCBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICBjb25zdCBhbGxUb29scyA9IGF3YWl0IGN1cnJlbnRBZ2VudC5nZXRBbGxUb29scyhjb250ZXh0KTtcbiAgICBjb25zdCB0b29scyA9IG5ldyBNYXAoYWxsVG9vbHNcbiAgICAgICAgLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgIGNvbnN0IGNvbXB1dGVyVG9vbHMgPSBuZXcgTWFwKGFsbFRvb2xzXG4gICAgICAgIC5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2NvbXB1dGVyJylcbiAgICAgICAgLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICBjb25zdCBzaGVsbFRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdzaGVsbCcpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3QgYXBwbHlQYXRjaFRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdhcHBseV9wYXRjaCcpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3QgaGFuZG9mZnMgPSBuZXcgTWFwKGN1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgIGlmIChlbnRyeSBpbnN0YW5jZW9mIEFnZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gW2VudHJ5Lm5hbWUsIGhhbmRvZmYoZW50cnkpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW2VudHJ5LnRvb2xOYW1lLCBlbnRyeV07XG4gICAgfSkpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgbmV3SXRlbXM6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcy5tYXAoKGl0ZW0pID0+IGRlc2VyaWFsaXplSXRlbShpdGVtLCBhZ2VudE1hcCkpLFxuICAgICAgICB0b29sc1VzZWQ6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQsXG4gICAgICAgIGhhbmRvZmZzOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRvZmZzLmhhcyhoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgSGFuZG9mZiAke2hhbmRvZmYuaGFuZG9mZi50b29sTmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBoYW5kb2ZmLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIGhhbmRvZmY6IGhhbmRvZmZzLmdldChoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIGZ1bmN0aW9uczogYXdhaXQgUHJvbWlzZS5hbGwoc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucy5tYXAoYXN5bmMgKGZ1bmN0aW9uQ2FsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0b29scy5oYXMoZnVuY3Rpb25DYWxsLnRvb2wubmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBUb29sICR7ZnVuY3Rpb25DYWxsLnRvb2wubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBmdW5jdGlvbkNhbGwudG9vbENhbGwsXG4gICAgICAgICAgICAgICAgdG9vbDogdG9vbHMuZ2V0KGZ1bmN0aW9uQ2FsbC50b29sLm5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLFxuICAgICAgICBjb21wdXRlckFjdGlvbnM6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnMubWFwKChjb21wdXRlckFjdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBjb21wdXRlckFjdGlvbi5jb21wdXRlci5uYW1lO1xuICAgICAgICAgICAgaWYgKCFjb21wdXRlclRvb2xzLmhhcyh0b29sTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBDb21wdXRlciB0b29sICR7dG9vbE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogY29tcHV0ZXJBY3Rpb24udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgY29tcHV0ZXI6IGNvbXB1dGVyVG9vbHMuZ2V0KHRvb2xOYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBzaGVsbEFjdGlvbnM6IChzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2Uuc2hlbGxBY3Rpb25zID8/IFtdKS5tYXAoKHNoZWxsQWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0b29sTmFtZSA9IHNoZWxsQWN0aW9uLnNoZWxsLm5hbWU7XG4gICAgICAgICAgICBpZiAoIXNoZWxsVG9vbHMuaGFzKHRvb2xOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYFNoZWxsIHRvb2wgJHt0b29sTmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBzaGVsbEFjdGlvbi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICBzaGVsbDogc2hlbGxUb29scy5nZXQodG9vbE5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIGFwcGx5UGF0Y2hBY3Rpb25zOiAoc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmFwcGx5UGF0Y2hBY3Rpb25zID8/IFtdKS5tYXAoKGFwcGx5UGF0Y2hBY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xOYW1lID0gYXBwbHlQYXRjaEFjdGlvbi5hcHBseVBhdGNoLm5hbWU7XG4gICAgICAgICAgICBpZiAoIWFwcGx5UGF0Y2hUb29scy5oYXModG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgQXBwbHkgcGF0Y2ggdG9vbCAke3Rvb2xOYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IGFwcGx5UGF0Y2hBY3Rpb24udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgYXBwbHlQYXRjaDogYXBwbHlQYXRjaFRvb2xzLmdldCh0b29sTmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgbWNwQXBwcm92YWxSZXF1ZXN0czogKHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzID8/IFtdKS5tYXAoKGFwcHJvdmFsUmVxdWVzdCkgPT4gKHtcbiAgICAgICAgICAgIHJlcXVlc3RJdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbShhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW1cbiAgICAgICAgICAgICAgICAucmF3SXRlbSwgY3VycmVudEFnZW50KSxcbiAgICAgICAgICAgIG1jcFRvb2w6IGFwcHJvdmFsUmVxdWVzdC5tY3BUb29sLFxuICAgICAgICB9KSksXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgIGhhc1Rvb2xzT3JBcHByb3ZhbHNUb1J1bigpIHtcbiAgICAgICAgICAgIHJldHVybiAocmVzdWx0LmhhbmRvZmZzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQuZnVuY3Rpb25zLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQubWNwQXBwcm92YWxSZXF1ZXN0cy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LmNvbXB1dGVyQWN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LnNoZWxsQWN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LmFwcGx5UGF0Y2hBY3Rpb25zLmxlbmd0aCA+IDApO1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5TdGF0ZS5tanMubWFwIiwiLy8gU2hhcmVkIHJ1bm5lci1sZXZlbCBjb25zdGFudHMuIEtlZXAgYmVoYXZpb3ItYWx0ZXJpbmcgZGVmYXVsdHMgaW4gb25lIHBsYWNlLlxuZXhwb3J0IGNvbnN0IERFRkFVTFRfTUFYX1RVUk5TID0gMTA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25zdGFudHMubWpzLm1hcCIsImltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBhZGRFcnJvclRvQ3VycmVudFNwYW4gfSBmcm9tIFwiLi4vdHJhY2luZy9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgYnVpbGRBZ2VudElucHV0UG9vbCwgZ2V0QWdlbnRJbnB1dEl0ZW1LZXksIHJlbW92ZUFnZW50SW5wdXRGcm9tUG9vbCwgdGFrZUFnZW50SW5wdXRGcm9tUG9vbCwgdG9BZ2VudElucHV0TGlzdCwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmV4cG9ydCB7IGdldFR1cm5JbnB1dCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuLyoqXG4gKiBBcHBsaWVzIHRoZSBvcHRpb25hbCBjYWxsTW9kZWxJbnB1dEZpbHRlciBhbmQgcmV0dXJucyB0aGUgZmlsdGVyZWQgaW5wdXQgYWxvbmdzaWRlIHRoZSBvcmlnaW5hbFxuICogaXRlbXMgc28gZG93bnN0cmVhbSB0cmFja2luZyBhbmQgc2Vzc2lvbiBwZXJzaXN0ZW5jZSBzdGF5IGluIHN5bmMgd2l0aCB3aGF0IHRoZSBtb2RlbCBzYXcuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhcHBseUNhbGxNb2RlbElucHV0RmlsdGVyKGFnZW50LCBjYWxsTW9kZWxJbnB1dEZpbHRlciwgY29udGV4dCwgaW5wdXRJdGVtcywgc3lzdGVtSW5zdHJ1Y3Rpb25zKSB7XG4gICAgY29uc3QgY2xvbmVJbnB1dEl0ZW1zID0gKGl0ZW1zLCBtYXApID0+IGl0ZW1zLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBjbG9uZWQgPSBzdHJ1Y3R1cmVkQ2xvbmUoaXRlbSk7XG4gICAgICAgIGlmIChtYXAgJiYgY2xvbmVkICYmIHR5cGVvZiBjbG9uZWQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBtYXAuc2V0KGNsb25lZCwgaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICB9KTtcbiAgICAvLyBSZWNvcmQgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZSBjbG9uZWQgYXJyYXkgcGFzc2VkIHRvIGZpbHRlcnMgYW5kIHRoZSBvcmlnaW5hbCBpbnB1dHMuXG4gICAgY29uc3QgY2xvbmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuICAgIGNvbnN0IG9yaWdpbmFsUG9vbCA9IGJ1aWxkQWdlbnRJbnB1dFBvb2woaW5wdXRJdGVtcyk7XG4gICAgY29uc3QgZmFsbGJhY2tPcmlnaW5hbHMgPSBbXTtcbiAgICAvLyBUcmFjayBhbnkgb3JpZ2luYWwgb2JqZWN0IGlucHV0cyBzbyBmaWx0ZXJlZCByZXBsYWNlbWVudHMgY2FuIHN0aWxsIG1hcmsgdGhlbSBhcyBkZWxpdmVyZWQuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGlucHV0SXRlbXMpIHtcbiAgICAgICAgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBmYWxsYmFja09yaWdpbmFscy5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlbW92ZUZyb21GYWxsYmFjayA9IChjYW5kaWRhdGUpID0+IHtcbiAgICAgICAgaWYgKCFjYW5kaWRhdGUgfHwgdHlwZW9mIGNhbmRpZGF0ZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleCA9IGZhbGxiYWNrT3JpZ2luYWxzLmZpbmRJbmRleCgob3JpZ2luYWwpID0+IG9yaWdpbmFsID09PSBjYW5kaWRhdGUpO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBmYWxsYmFja09yaWdpbmFscy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB0YWtlRmFsbGJhY2tPcmlnaW5hbCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dCA9IGZhbGxiYWNrT3JpZ2luYWxzLnNoaWZ0KCk7XG4gICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgICByZW1vdmVBZ2VudElucHV0RnJvbVBvb2wob3JpZ2luYWxQb29sLCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICAgIC8vIEFsd2F5cyBjcmVhdGUgYSBkZWVwIGNvcHkgc28gZG93bnN0cmVhbSBtdXRhdGlvbnMgaW5zaWRlIGZpbHRlcnMgY2Fubm90IGFmZmVjdFxuICAgIC8vIHRoZSBjYWNoZWQgdHVybiBzdGF0ZS5cbiAgICBjb25zdCBjbG9uZWRCYXNlSW5wdXQgPSBjbG9uZUlucHV0SXRlbXMoaW5wdXRJdGVtcywgY2xvbmVNYXApO1xuICAgIGNvbnN0IGJhc2UgPSB7XG4gICAgICAgIGlucHV0OiBjbG9uZWRCYXNlSW5wdXQsXG4gICAgICAgIGluc3RydWN0aW9uczogc3lzdGVtSW5zdHJ1Y3Rpb25zLFxuICAgIH07XG4gICAgaWYgKCFjYWxsTW9kZWxJbnB1dEZpbHRlcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbW9kZWxJbnB1dDogYmFzZSxcbiAgICAgICAgICAgIHNvdXJjZUl0ZW1zOiBbLi4uaW5wdXRJdGVtc10sXG4gICAgICAgICAgICBwZXJzaXN0ZWRJdGVtczogW10sXG4gICAgICAgICAgICBmaWx0ZXJBcHBsaWVkOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2FsbE1vZGVsSW5wdXRGaWx0ZXIoe1xuICAgICAgICAgICAgbW9kZWxEYXRhOiBiYXNlLFxuICAgICAgICAgICAgYWdlbnQsXG4gICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LmNvbnRleHQsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3VsdCB8fCAhQXJyYXkuaXNBcnJheShyZXN1bHQuaW5wdXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdjYWxsTW9kZWxJbnB1dEZpbHRlciBtdXN0IHJldHVybiBhIE1vZGVsSW5wdXREYXRhIG9iamVjdCB3aXRoIGFuIGlucHV0IGFycmF5LicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFByZXNlcnZlIGEgcG9pbnRlciB0byB0aGUgb3JpZ2luYWwgb2JqZWN0IGJhY2tpbmcgZWFjaCBmaWx0ZXJlZCBjbG9uZSBzbyBkb3duc3RyZWFtXG4gICAgICAgIC8vIHRyYWNrZXJzIGNhbiBrZWVwIHRoZWlyIGJvb2trZWVwaW5nIGNvbnNpc3RlbnQgZXZlbiBhZnRlciByZWRhY3Rpb24uXG4gICAgICAgIGNvbnN0IHNvdXJjZUl0ZW1zID0gcmVzdWx0LmlucHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpdGVtIHx8IHR5cGVvZiBpdGVtICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9IGNsb25lTWFwLmdldChpdGVtKTtcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbCkge1xuICAgICAgICAgICAgICAgIHJlbW92ZUZyb21GYWxsYmFjayhvcmlnaW5hbCk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQWdlbnRJbnB1dEZyb21Qb29sKG9yaWdpbmFsUG9vbCwgb3JpZ2luYWwpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlZEJ5Q29udGVudCA9IHRha2VBZ2VudElucHV0RnJvbVBvb2wob3JpZ2luYWxQb29sLCBrZXkpO1xuICAgICAgICAgICAgaWYgKG1hdGNoZWRCeUNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVGcm9tRmFsbGJhY2sobWF0Y2hlZEJ5Q29udGVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZWRCeUNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmYWxsYmFjayA9IHRha2VGYWxsYmFja09yaWdpbmFsKCk7XG4gICAgICAgICAgICBpZiAoZmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY2xvbmVkRmlsdGVyZWRJbnB1dCA9IGNsb25lSW5wdXRJdGVtcyhyZXN1bHQuaW5wdXQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbW9kZWxJbnB1dDoge1xuICAgICAgICAgICAgICAgIGlucHV0OiBjbG9uZWRGaWx0ZXJlZElucHV0LFxuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uczogdHlwZW9mIHJlc3VsdC5pbnN0cnVjdGlvbnMgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgICAgID8gc3lzdGVtSW5zdHJ1Y3Rpb25zXG4gICAgICAgICAgICAgICAgICAgIDogcmVzdWx0Lmluc3RydWN0aW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzb3VyY2VJdGVtcyxcbiAgICAgICAgICAgIHBlcnNpc3RlZEl0ZW1zOiBjbG9uZWRGaWx0ZXJlZElucHV0Lm1hcCgoaXRlbSkgPT4gc3RydWN0dXJlZENsb25lKGl0ZW0pKSxcbiAgICAgICAgICAgIGZpbHRlckFwcGxpZWQ6IHRydWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGluIGNhbGxNb2RlbElucHV0RmlsdGVyJyxcbiAgICAgICAgICAgIGRhdGE6IHsgZXJyb3I6IFN0cmluZyhlcnJvcikgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cbi8qKlxuICogVHJhY2tzIHdoaWNoIGl0ZW1zIGhhdmUgYWxyZWFkeSBiZWVuIHNlbnQgdG8gb3IgcmVjZWl2ZWQgZnJvbSB0aGUgUmVzcG9uc2VzIEFQSSB3aGVuIHRoZSBjYWxsZXJcbiAqIHN1cHBsaWVzIGBjb252ZXJzYXRpb25JZGAvYHByZXZpb3VzUmVzcG9uc2VJZGAuIFRoaXMgZW5zdXJlcyB3ZSBvbmx5IHNlbmQgdGhlIGRlbHRhIGVhY2ggdHVybi5cbiAqL1xuZXhwb3J0IGNsYXNzIFNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIge1xuICAgIGNvbnZlcnNhdGlvbklkO1xuICAgIHByZXZpb3VzUmVzcG9uc2VJZDtcbiAgICAvLyBVc2luZyB0aGlzIGZsYWcgYmVjYXVzZSBXZWFrU2V0IGRvZXMgbm90IHByb3ZpZGUgYSB3YXkgdG8gY2hlY2sgaXRzIHNpemUuXG4gICAgc2VudEluaXRpYWxJbnB1dCA9IGZhbHNlO1xuICAgIC8vIFRoZSBpdGVtcyBhbHJlYWR5IHNlbnQgdG8gdGhlIG1vZGVsOyB1c2luZyBXZWFrU2V0IGZvciBtZW1vcnkgZWZmaWNpZW5jeS5cbiAgICBzZW50SXRlbXMgPSBuZXcgV2Vha1NldCgpO1xuICAgIC8vIFRoZSBpdGVtcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXI7IHVzaW5nIFdlYWtTZXQgZm9yIG1lbW9yeSBlZmZpY2llbmN5LlxuICAgIHNlcnZlckl0ZW1zID0gbmV3IFdlYWtTZXQoKTtcbiAgICAvLyBUcmFjayBpbml0aWFsIGlucHV0IGl0ZW1zIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gc2VudCBzbyB0aGV5IGNhbiBiZSByZXRyaWVkIG9uIGxhdGVyIHR1cm5zLlxuICAgIHJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IG51bGw7XG4gICAgY29uc3RydWN0b3IoeyBjb252ZXJzYXRpb25JZCwgcHJldmlvdXNSZXNwb25zZUlkLCB9KSB7XG4gICAgICAgIHRoaXMuY29udmVyc2F0aW9uSWQgPSBjb252ZXJzYXRpb25JZCA/PyB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucHJldmlvdXNSZXNwb25zZUlkID0gcHJldmlvdXNSZXNwb25zZUlkID8/IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlLXBvcHVsYXRlcyB0cmFja2VyIGNhY2hlcyBmcm9tIGFuIGV4aXN0aW5nIFJ1blN0YXRlIHdoZW4gcmVzdW1pbmcgc2VydmVyLW1hbmFnZWQgcnVucy5cbiAgICAgKi9cbiAgICBwcmltZUZyb21TdGF0ZSh7IG9yaWdpbmFsSW5wdXQsIGdlbmVyYXRlZEl0ZW1zLCBtb2RlbFJlc3BvbnNlcywgfSkge1xuICAgICAgICBpZiAodGhpcy5zZW50SW5pdGlhbElucHV0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxJdGVtcyA9IHRvQWdlbnRJbnB1dExpc3Qob3JpZ2luYWxJbnB1dCk7XG4gICAgICAgIGNvbnN0IGhhc1Jlc3BvbnNlcyA9IG1vZGVsUmVzcG9uc2VzLmxlbmd0aCA+IDA7XG4gICAgICAgIGNvbnN0IHNlcnZlckl0ZW1LZXlzID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IgKGNvbnN0IHJlc3BvbnNlIG9mIG1vZGVsUmVzcG9uc2VzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcmVzcG9uc2Uub3V0cHV0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VydmVySXRlbXMuYWRkKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJJdGVtS2V5cy5hZGQoZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzUmVzcG9uc2VzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygb3JpZ2luYWxJdGVtcykge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbnRJdGVtcy5hZGQoaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZW50SW5pdGlhbElucHV0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsYXRlc3RSZXNwb25zZSA9IG1vZGVsUmVzcG9uc2VzW21vZGVsUmVzcG9uc2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoIXRoaXMuY29udmVyc2F0aW9uSWQgJiYgbGF0ZXN0UmVzcG9uc2U/LnJlc3BvbnNlSWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNSZXNwb25zZUlkID0gbGF0ZXN0UmVzcG9uc2UucmVzcG9uc2VJZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzUmVzcG9uc2VzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZ2VuZXJhdGVkSXRlbXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByYXdJdGVtID0gaXRlbS5yYXdJdGVtO1xuICAgICAgICAgICAgICAgIGlmICghcmF3SXRlbSB8fCB0eXBlb2YgcmF3SXRlbSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJhd0l0ZW1LZXkgPSBnZXRBZ2VudElucHV0SXRlbUtleShyYXdJdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXJ2ZXJJdGVtcy5oYXMocmF3SXRlbSkgfHwgc2VydmVySXRlbUtleXMuaGFzKHJhd0l0ZW1LZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VudEl0ZW1zLmFkZChyYXdJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjb3JkcyB0aGUgcmF3IGl0ZW1zIHJldHVybmVkIGJ5IHRoZSBzZXJ2ZXIgc28gZnV0dXJlIGRlbHRhIGNhbGN1bGF0aW9ucyBza2lwIHRoZW0uXG4gICAgICogQWxzbyBjYXB0dXJlcyB0aGUgbGF0ZXN0IHJlc3BvbnNlIGlkZW50aWZpZXIgdG8gY2hhaW4gZm9sbG93LXVwIGNhbGxzIHdoZW4gcG9zc2libGUuXG4gICAgICovXG4gICAgdHJhY2tTZXJ2ZXJJdGVtcyhtb2RlbFJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghbW9kZWxSZXNwb25zZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBtb2RlbFJlc3BvbnNlLm91dHB1dCkge1xuICAgICAgICAgICAgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXJ2ZXJJdGVtcy5hZGQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmNvbnZlcnNhdGlvbklkICYmIG1vZGVsUmVzcG9uc2UucmVzcG9uc2VJZCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1Jlc3BvbnNlSWQgPSBtb2RlbFJlc3BvbnNlLnJlc3BvbnNlSWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWluaW11bSBzZXQgb2YgaXRlbXMgdGhhdCBzdGlsbCBuZWVkIHRvIGJlIGRlbGl2ZXJlZCB0byB0aGUgc2VydmVyIGZvciB0aGVcbiAgICAgKiBjdXJyZW50IHR1cm4uIFRoaXMgaW5jbHVkZXMgdGhlIG9yaWdpbmFsIHR1cm4gaW5wdXRzICh1bnRpbCBhY2tub3dsZWRnZWQpIHBsdXMgYW55XG4gICAgICogbmV3bHkgZ2VuZXJhdGVkIGl0ZW1zIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gZWNob2VkIGJhY2sgYnkgdGhlIEFQSS5cbiAgICAgKi9cbiAgICBwcmVwYXJlSW5wdXQob3JpZ2luYWxJbnB1dCwgZ2VuZXJhdGVkSXRlbXMpIHtcbiAgICAgICAgY29uc3QgaW5wdXRJdGVtcyA9IFtdO1xuICAgICAgICBpZiAoIXRoaXMuc2VudEluaXRpYWxJbnB1dCkge1xuICAgICAgICAgICAgY29uc3QgaW5pdGlhbEl0ZW1zID0gdG9BZ2VudElucHV0TGlzdChvcmlnaW5hbElucHV0KTtcbiAgICAgICAgICAgIC8vIFByZXNlcnZlIHRoZSBmdWxsIGluaXRpYWwgcGF5bG9hZCBzbyBhIGZpbHRlciBjYW4gZHJvcCBpdGVtcyB3aXRob3V0IGxvc2luZyB0aGVpciBvcmlnaW5hbHMuXG4gICAgICAgICAgICBpbnB1dEl0ZW1zLnB1c2goLi4uaW5pdGlhbEl0ZW1zKTtcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0ID0gaW5pdGlhbEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4gQm9vbGVhbihpdGVtKSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcpO1xuICAgICAgICAgICAgdGhpcy5zZW50SW5pdGlhbElucHV0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCAmJlxuICAgICAgICAgICAgdGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gUmUtcXVldWUgcHJpb3IgaW5pdGlhbCBpdGVtcyB1bnRpbCB0aGUgdHJhY2tlciBjb25maXJtcyB0aGV5IHdlcmUgZGVsaXZlcmVkIHRvIHRoZSBBUEkuXG4gICAgICAgICAgICBpbnB1dEl0ZW1zLnB1c2goLi4udGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBnZW5lcmF0ZWRJdGVtcykge1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3Rvb2xfYXBwcm92YWxfaXRlbScpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJhd0l0ZW0gPSBpdGVtLnJhd0l0ZW07XG4gICAgICAgICAgICBpZiAoIXJhd0l0ZW0gfHwgdHlwZW9mIHJhd0l0ZW0gIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zZW50SXRlbXMuaGFzKHJhd0l0ZW0pIHx8IHRoaXMuc2VydmVySXRlbXMuaGFzKHJhd0l0ZW0pKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dEl0ZW1zLnB1c2gocmF3SXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlucHV0SXRlbXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIHRoZSBwcm92aWRlZCBvcmlnaW5hbHMgYXMgZGVsaXZlcmVkIHNvIGZ1dHVyZSB0dXJucyBkbyBub3QgcmVzZW5kIHRoZW0gYW5kIGFueVxuICAgICAqIHBlbmRpbmcgaW5pdGlhbCBpbnB1dHMgY2FuIGJlIGRyb3BwZWQgb25jZSB0aGUgc2VydmVyIGFja25vd2xlZGdlcyByZWNlaXB0LlxuICAgICAqL1xuICAgIG1hcmtJbnB1dEFzU2VudChpdGVtcywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBkZWxpdmVyZWQgPSBuZXcgU2V0KCk7XG4gICAgICAgIGNvbnN0IGRyb3BSZW1haW5pbmdJbml0aWFsSW5wdXQgPSBvcHRpb25zPy5maWx0ZXJBcHBsaWVkID8/IGZhbHNlO1xuICAgICAgICBjb25zdCBtYXJrRmlsdGVyZWRJdGVtc0FzU2VudCA9IG9wdGlvbnM/LmZpbHRlckFwcGxpZWQgJiYgQm9vbGVhbihvcHRpb25zLmFsbFR1cm5JdGVtcyk7XG4gICAgICAgIHRoaXMuYWRkRGVsaXZlcmVkSXRlbXMoZGVsaXZlcmVkLCBpdGVtcyk7XG4gICAgICAgIGNvbnN0IGFsbFR1cm5JdGVtcyA9IG9wdGlvbnM/LmFsbFR1cm5JdGVtcztcbiAgICAgICAgaWYgKG1hcmtGaWx0ZXJlZEl0ZW1zQXNTZW50ICYmIGFsbFR1cm5JdGVtcykge1xuICAgICAgICAgICAgdGhpcy5hZGREZWxpdmVyZWRJdGVtcyhkZWxpdmVyZWQsIGFsbFR1cm5JdGVtcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVSZW1haW5pbmdJbml0aWFsSW5wdXQoZGVsaXZlcmVkLCBCb29sZWFuKGRyb3BSZW1haW5pbmdJbml0aWFsSW5wdXQpKTtcbiAgICB9XG4gICAgYWRkRGVsaXZlcmVkSXRlbXMoZGVsaXZlcmVkLCBpdGVtcykge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGlmICghaXRlbSB8fCB0eXBlb2YgaXRlbSAhPT0gJ29iamVjdCcgfHwgZGVsaXZlcmVkLmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU29tZSBpbnB1dHMgbWF5IGJlIHJlcGVhdGVkIGluIHRoZSBmaWx0ZXJlZCBsaXN0OyBvbmx5IG1hcmsgdW5pcXVlIG9yaWdpbmFscyBvbmNlLlxuICAgICAgICAgICAgZGVsaXZlcmVkLmFkZChpdGVtKTtcbiAgICAgICAgICAgIHRoaXMuc2VudEl0ZW1zLmFkZChpdGVtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVSZW1haW5pbmdJbml0aWFsSW5wdXQoZGVsaXZlcmVkLCBkcm9wUmVtYWluaW5nSW5pdGlhbElucHV0KSB7XG4gICAgICAgIGlmICghdGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQgfHxcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0Lmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgZGVsaXZlcmVkLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIGlmIChkcm9wUmVtYWluaW5nSW5pdGlhbElucHV0ICYmIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0ID0gdGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQuZmlsdGVyKChpdGVtKSA9PiAhZGVsaXZlcmVkLmhhcyhpdGVtKSk7XG4gICAgICAgIGlmICh0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkcm9wUmVtYWluaW5nSW5pdGlhbElucHV0KSB7XG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb252ZXJzYXRpb24ubWpzLm1hcCIsImltcG9ydCB7IEd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yLCBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgZGVmaW5lSW5wdXRHdWFyZHJhaWwsIGRlZmluZU91dHB1dEd1YXJkcmFpbCwgfSBmcm9tIFwiLi4vZ3VhcmRyYWlsLm1qc1wiO1xuaW1wb3J0IHsgZ2V0VHVybklucHV0IH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5pbXBvcnQgeyB3aXRoR3VhcmRyYWlsU3BhbiB9IGZyb20gXCIuLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUd1YXJkcmFpbFRyYWNrZXIgPSAoKSA9PiB7XG4gICAgbGV0IHBlbmRpbmcgPSBmYWxzZTtcbiAgICBsZXQgZmFpbGVkID0gZmFsc2U7XG4gICAgbGV0IGVycm9yID0gdW5kZWZpbmVkO1xuICAgIGxldCBwcm9taXNlO1xuICAgIGNvbnN0IHNldEVycm9yID0gKGVycikgPT4ge1xuICAgICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgICBlcnJvciA9IGVycjtcbiAgICAgICAgcGVuZGluZyA9IGZhbHNlO1xuICAgIH07XG4gICAgY29uc3Qgc2V0UHJvbWlzZSA9IChpbmNvbWluZykgPT4ge1xuICAgICAgICBpZiAoIWluY29taW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcGVuZGluZyA9IHRydWU7XG4gICAgICAgIHByb21pc2UgPSBpbmNvbWluZ1xuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdHMpID0+IHJlc3VsdHMpXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgc2V0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgIC8vIFN3YWxsb3cgdG8ga2VlcCBkb3duc3RyZWFtIGZsb3cgY29uc2lzdGVudDsgZmFpbHVyZSBpcyBzaWduYWxlZCB2aWEgYGZhaWxlZGAuXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICBwZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgdGhyb3dJZkVycm9yID0gKCkgPT4ge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBhd2FpdENvbXBsZXRpb24gPSBhc3luYyAob3B0aW9ucykgPT4ge1xuICAgICAgICBpZiAocHJvbWlzZSkge1xuICAgICAgICAgICAgYXdhaXQgcHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IgJiYgIW9wdGlvbnM/LnN1cHByZXNzRXJyb3JzKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0IHBlbmRpbmcoKSB7XG4gICAgICAgICAgICByZXR1cm4gcGVuZGluZztcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IGZhaWxlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWlsZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfSxcbiAgICAgICAgbWFya1BlbmRpbmc6ICgpID0+IHtcbiAgICAgICAgICAgIHBlbmRpbmcgPSB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXRQcm9taXNlLFxuICAgICAgICBzZXRFcnJvcixcbiAgICAgICAgdGhyb3dJZkVycm9yLFxuICAgICAgICBhd2FpdENvbXBsZXRpb24sXG4gICAgfTtcbn07XG5hc3luYyBmdW5jdGlvbiBydW5HdWFyZHJhaWxzV2l0aFRyaXB3aXJlKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHN0YXRlLCBndWFyZHJhaWxzLCBndWFyZHJhaWxBcmdzLCByZXN1bHRzVGFyZ2V0LCBvblRyaXB3aXJlLCBpc1RyaXB3aXJlRXJyb3IsIG9uRXJyb3IsIH0gPSBvcHRpb25zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChndWFyZHJhaWxzLm1hcChhc3luYyAoZ3VhcmRyYWlsKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gd2l0aEd1YXJkcmFpbFNwYW4oYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpO1xuICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEudHJpZ2dlcmVkID0gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSwgeyBkYXRhOiB7IG5hbWU6IGd1YXJkcmFpbC5uYW1lIH0gfSwgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJlc3VsdHNUYXJnZXQucHVzaCguLi5yZXN1bHRzKTtcbiAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0d1YXJkcmFpbCB0cmlwd2lyZSB0cmlnZ2VyZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBndWFyZHJhaWw6IHJlc3VsdC5ndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb25Ucmlwd2lyZShyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGlzVHJpcHdpcmVFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkSW5wdXRHdWFyZHJhaWxEZWZpbml0aW9ucyhzdGF0ZSwgcnVubmVyR3VhcmRyYWlscykge1xuICAgIHJldHVybiBydW5uZXJHdWFyZHJhaWxzLmNvbmNhdChzdGF0ZS5fY3VycmVudEFnZW50LmlucHV0R3VhcmRyYWlscy5tYXAoZGVmaW5lSW5wdXRHdWFyZHJhaWwpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdElucHV0R3VhcmRyYWlscyhndWFyZHJhaWxzKSB7XG4gICAgY29uc3QgYmxvY2tpbmcgPSBbXTtcbiAgICBjb25zdCBwYXJhbGxlbCA9IFtdO1xuICAgIGZvciAoY29uc3QgZ3VhcmRyYWlsIG9mIGd1YXJkcmFpbHMpIHtcbiAgICAgICAgaWYgKGd1YXJkcmFpbC5ydW5JblBhcmFsbGVsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgYmxvY2tpbmcucHVzaChndWFyZHJhaWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFyYWxsZWwucHVzaChndWFyZHJhaWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGJsb2NraW5nLCBwYXJhbGxlbCB9O1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bklucHV0R3VhcmRyYWlscyhzdGF0ZSwgZ3VhcmRyYWlscykge1xuICAgIGlmIChndWFyZHJhaWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgIGFnZW50OiBzdGF0ZS5fY3VycmVudEFnZW50LFxuICAgICAgICBpbnB1dDogc3RhdGUuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgIGNvbnRleHQ6IHN0YXRlLl9jb250ZXh0LFxuICAgIH07XG4gICAgcmV0dXJuIGF3YWl0IHJ1bkd1YXJkcmFpbHNXaXRoVHJpcHdpcmUoe1xuICAgICAgICBzdGF0ZSxcbiAgICAgICAgZ3VhcmRyYWlscyxcbiAgICAgICAgZ3VhcmRyYWlsQXJncyxcbiAgICAgICAgcmVzdWx0c1RhcmdldDogc3RhdGUuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyxcbiAgICAgICAgb25Ucmlwd2lyZTogKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYElucHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNUcmlwd2lyZUVycm9yOiAoZXJyb3IpID0+IGVycm9yIGluc3RhbmNlb2YgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCxcbiAgICAgICAgb25FcnJvcjogKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAvLyByb2xsIGJhY2sgdGhlIGN1cnJlbnQgdHVybiB0byBlbmFibGUgcmVydW5zXG4gICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4tLTtcbiAgICAgICAgICAgIHRocm93IG5ldyBHdWFyZHJhaWxFeGVjdXRpb25FcnJvcihgSW5wdXQgZ3VhcmRyYWlsIGZhaWxlZCB0byBjb21wbGV0ZTogJHtlcnJvcn1gLCBlcnJvciwgc3RhdGUpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bk91dHB1dEd1YXJkcmFpbHMoc3RhdGUsIHJ1bm5lck91dHB1dEd1YXJkcmFpbHMsIG91dHB1dCkge1xuICAgIGNvbnN0IGd1YXJkcmFpbHMgPSBydW5uZXJPdXRwdXRHdWFyZHJhaWxzLmNvbmNhdChzdGF0ZS5fY3VycmVudEFnZW50Lm91dHB1dEd1YXJkcmFpbHMubWFwKGRlZmluZU91dHB1dEd1YXJkcmFpbCkpO1xuICAgIGlmIChndWFyZHJhaWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGFnZW50T3V0cHV0ID0gc3RhdGUuX2N1cnJlbnRBZ2VudC5wcm9jZXNzRmluYWxPdXRwdXQob3V0cHV0KTtcbiAgICBjb25zdCBydW5PdXRwdXQgPSBnZXRUdXJuSW5wdXQoW10sIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyk7XG4gICAgY29uc3QgZ3VhcmRyYWlsQXJncyA9IHtcbiAgICAgICAgYWdlbnQ6IHN0YXRlLl9jdXJyZW50QWdlbnQsXG4gICAgICAgIGFnZW50T3V0cHV0LFxuICAgICAgICBjb250ZXh0OiBzdGF0ZS5fY29udGV4dCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgbW9kZWxSZXNwb25zZTogc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsXG4gICAgICAgICAgICBvdXRwdXQ6IHJ1bk91dHB1dCxcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIGF3YWl0IHJ1bkd1YXJkcmFpbHNXaXRoVHJpcHdpcmUoe1xuICAgICAgICBzdGF0ZSxcbiAgICAgICAgZ3VhcmRyYWlscyxcbiAgICAgICAgZ3VhcmRyYWlsQXJncyxcbiAgICAgICAgcmVzdWx0c1RhcmdldDogc3RhdGUuX291dHB1dEd1YXJkcmFpbFJlc3VsdHMsXG4gICAgICAgIG9uVHJpcHdpcmU6IChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNUcmlwd2lyZUVycm9yOiAoZXJyb3IpID0+IGVycm9yIGluc3RhbmNlb2YgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsXG4gICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yKGBPdXRwdXQgZ3VhcmRyYWlsIGZhaWxlZCB0byBjb21wbGV0ZTogJHtlcnJvcn1gLCBlcnJvciwgc3RhdGUpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRyYWlscy5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiLi4vYWdlbnQubWpzXCI7XG5pbXBvcnQgeyBncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZCwgaXNHcHQ1RGVmYXVsdCB9IGZyb20gXCIuLi9kZWZhdWx0TW9kZWwubWpzXCI7XG5jb25zdCBoYXNHcHQ1T25seVNldHRpbmdzID0gKHNldHRpbmdzKSA9PiB7XG4gICAgY29uc3QgcHJvdmlkZXJEYXRhID0gc2V0dGluZ3M/LnByb3ZpZGVyRGF0YTtcbiAgICByZXR1cm4gQm9vbGVhbihwcm92aWRlckRhdGE/LnJlYXNvbmluZyB8fFxuICAgICAgICBwcm92aWRlckRhdGE/LnRleHQ/LnZlcmJvc2l0eSB8fFxuICAgICAgICBwcm92aWRlckRhdGFcbiAgICAgICAgICAgID8ucmVhc29uaW5nX2VmZm9ydCk7XG59O1xuLyoqXG4gKiBSZXNvbHZlcyB0aGUgZWZmZWN0aXZlIG1vZGVsIGZvciB0aGUgbmV4dCB0dXJuIGJ5IGdpdmluZyBwcmVjZWRlbmNlIHRvIHRoZSBhZ2VudC1zcGVjaWZpY1xuICogY29uZmlndXJhdGlvbiB3aGVuIHByZXNlbnQsIG90aGVyd2lzZSBmYWxsaW5nIGJhY2sgdG8gdGhlIHJ1bm5lci1sZXZlbCBkZWZhdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0TW9kZWwoYWdlbnRNb2RlbCwgcnVuQ29uZmlnTW9kZWwpIHtcbiAgICBpZiAoKHR5cGVvZiBhZ2VudE1vZGVsID09PSAnc3RyaW5nJyAmJlxuICAgICAgICBhZ2VudE1vZGVsICE9PSBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSKSB8fFxuICAgICAgICBhZ2VudE1vZGVsKSB7XG4gICAgICAgIHJldHVybiBhZ2VudE1vZGVsO1xuICAgIH1cbiAgICByZXR1cm4gcnVuQ29uZmlnTW9kZWwgPz8gYWdlbnRNb2RlbCA/PyBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSO1xufVxuLyoqXG4gKiBSZXNldHMgdGhlIHRvb2wgY2hvaWNlIHdoZW4gdGhlIGFnZW50IGlzIGNvbmZpZ3VyZWQgdG8gcHJlZmVyIGEgZnJlc2ggdG9vbCBzZWxlY3Rpb24gYWZ0ZXJcbiAqIGFueSB0b29sIHVzYWdlLiBUaGlzIHByZXZlbnRzIHRoZSBwcm92aWRlciBmcm9tIHJldXNpbmcgc3RhbGUgdG9vbCBoaW50cyBhY3Jvc3MgdHVybnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXliZVJlc2V0VG9vbENob2ljZShhZ2VudCwgdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpIHtcbiAgICBpZiAoYWdlbnQucmVzZXRUb29sQ2hvaWNlICYmIHRvb2xVc2VUcmFja2VyLmhhc1VzZWRUb29scyhhZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIHsgLi4ubW9kZWxTZXR0aW5ncywgdG9vbENob2ljZTogdW5kZWZpbmVkIH07XG4gICAgfVxuICAgIHJldHVybiBtb2RlbFNldHRpbmdzO1xufVxuLyoqXG4gKiBXaGVuIHRoZSBkZWZhdWx0IG1vZGVsIGlzIGEgR1BULTUgdmFyaWFudCwgYWdlbnRzIG1heSBjYXJyeSBHUFQtNS1zcGVjaWZpYyBwcm92aWRlckRhdGFcbiAqIChlLmcuLCByZWFzb25pbmcgZWZmb3J0LCB0ZXh0IHZlcmJvc2l0eSkuIElmIGEgcnVuIHJlc29sdmVzIHRvIGEgbm9uLUdQVC01IG1vZGVsIGFuZCB0aGVcbiAqIGFnZW50IHJlbGllZCBvbiB0aGUgZGVmYXVsdCBtb2RlbCAoaS5lLiwgbm8gZXhwbGljaXQgbW9kZWwgc2V0KSwgdGhlc2UgR1BULTUtb25seSBzZXR0aW5nc1xuICogYXJlIGluY29tcGF0aWJsZSBhbmQgc2hvdWxkIGJlIHN0cmlwcGVkIHRvIGF2b2lkIHJ1bnRpbWUgZXJyb3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRqdXN0TW9kZWxTZXR0aW5nc0Zvck5vbkdQVDVSdW5uZXJNb2RlbChleHBsaWN0bHlNb2RlbFNldCwgYWdlbnRNb2RlbFNldHRpbmdzLCBydW5uZXJNb2RlbCwgbW9kZWxTZXR0aW5ncywgcmVzb2x2ZWRNb2RlbE5hbWUpIHtcbiAgICBjb25zdCBtb2RlbE5hbWUgPSByZXNvbHZlZE1vZGVsTmFtZSA/P1xuICAgICAgICAodHlwZW9mIHJ1bm5lck1vZGVsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBydW5uZXJNb2RlbFxuICAgICAgICAgICAgOiAocnVubmVyTW9kZWxcbiAgICAgICAgICAgICAgICA/Lm1vZGVsID8/IHJ1bm5lck1vZGVsPy5uYW1lKSk7XG4gICAgY29uc3QgaXNOb25HcHQ1UnVubmVyTW9kZWwgPSB0eXBlb2YgbW9kZWxOYW1lID09PSAnc3RyaW5nJ1xuICAgICAgICA/ICFncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZChtb2RlbE5hbWUpXG4gICAgICAgIDogdHJ1ZTtcbiAgICBjb25zdCBoYXNHcHQ1RGVmYXVsdHMgPSBoYXNHcHQ1T25seVNldHRpbmdzKGFnZW50TW9kZWxTZXR0aW5ncykgfHxcbiAgICAgICAgaGFzR3B0NU9ubHlTZXR0aW5ncyhtb2RlbFNldHRpbmdzKTtcbiAgICBpZiAoaXNHcHQ1RGVmYXVsdCgpICYmXG4gICAgICAgIGV4cGxpY3RseU1vZGVsU2V0ICYmXG4gICAgICAgIGlzTm9uR3B0NVJ1bm5lck1vZGVsICYmXG4gICAgICAgIGhhc0dwdDVEZWZhdWx0cykge1xuICAgICAgICByZXR1cm4gc3RyaXBHcHQ1T25seVNldHRpbmdzKG1vZGVsU2V0dGluZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gbW9kZWxTZXR0aW5ncztcbn1cbmZ1bmN0aW9uIHN0cmlwR3B0NU9ubHlTZXR0aW5ncyhtb2RlbFNldHRpbmdzKSB7XG4gICAgY29uc3QgY29waWVkUHJvdmlkZXJEYXRhID0gbW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGFcbiAgICAgICAgPyB7IC4uLm1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhIH1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGNvcGllZFByb3ZpZGVyRGF0YSkge1xuICAgICAgICBpZiAoY29waWVkUHJvdmlkZXJEYXRhLnRleHQgJiZcbiAgICAgICAgICAgIHR5cGVvZiBjb3BpZWRQcm92aWRlckRhdGEudGV4dCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvcGllZFByb3ZpZGVyRGF0YS50ZXh0ID0geyAuLi5jb3BpZWRQcm92aWRlckRhdGEudGV4dCB9O1xuICAgICAgICAgICAgZGVsZXRlIGNvcGllZFByb3ZpZGVyRGF0YS50ZXh0LnZlcmJvc2l0eTtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgY29waWVkUHJvdmlkZXJEYXRhLnJlYXNvbmluZztcbiAgICAgICAgZGVsZXRlIGNvcGllZFByb3ZpZGVyRGF0YS5yZWFzb25pbmdfZWZmb3J0O1xuICAgIH1cbiAgICBjb25zdCBjb3BpZWRNb2RlbFNldHRpbmdzID0ge1xuICAgICAgICAuLi5tb2RlbFNldHRpbmdzLFxuICAgICAgICBwcm92aWRlckRhdGE6IGNvcGllZFByb3ZpZGVyRGF0YSxcbiAgICB9O1xuICAgIGlmIChtb2RlbFNldHRpbmdzLnJlYXNvbmluZykge1xuICAgICAgICBjb3BpZWRNb2RlbFNldHRpbmdzLnJlYXNvbmluZyA9IHsgLi4ubW9kZWxTZXR0aW5ncy5yZWFzb25pbmcgfTtcbiAgICB9XG4gICAgaWYgKG1vZGVsU2V0dGluZ3MudGV4dCkge1xuICAgICAgICBjb3BpZWRNb2RlbFNldHRpbmdzLnRleHQgPSB7IC4uLm1vZGVsU2V0dGluZ3MudGV4dCB9O1xuICAgIH1cbiAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGE/LnJlYXNvbmluZztcbiAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGE/LnRleHQ/LnZlcmJvc2l0eTtcbiAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGE/LnJlYXNvbmluZ19lZmZvcnQ7XG4gICAgaWYgKGNvcGllZE1vZGVsU2V0dGluZ3MucmVhc29uaW5nKSB7XG4gICAgICAgIGRlbGV0ZSBjb3BpZWRNb2RlbFNldHRpbmdzLnJlYXNvbmluZy5lZmZvcnQ7XG4gICAgICAgIGRlbGV0ZSBjb3BpZWRNb2RlbFNldHRpbmdzLnJlYXNvbmluZy5zdW1tYXJ5O1xuICAgIH1cbiAgICBpZiAoY29waWVkTW9kZWxTZXR0aW5ncy50ZXh0KSB7XG4gICAgICAgIGRlbGV0ZSBjb3BpZWRNb2RlbFNldHRpbmdzLnRleHQudmVyYm9zaXR5O1xuICAgIH1cbiAgICByZXR1cm4gY29waWVkTW9kZWxTZXR0aW5ncztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vZGVsU2V0dGluZ3MubWpzLm1hcCIsImltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBSdW5IYW5kb2ZmQ2FsbEl0ZW0sIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5SZWFzb25pbmdJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbEl0ZW0sIH0gZnJvbSBcIi4uL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IHsgYWRkRXJyb3JUb0N1cnJlbnRTcGFuIH0gZnJvbSBcIi4uL3RyYWNpbmcvY29udGV4dC5tanNcIjtcbmZ1bmN0aW9uIGVuc3VyZVRvb2xBdmFpbGFibGUodG9vbCwgbWVzc2FnZSwgZGF0YSkge1xuICAgIGlmICghdG9vbCkge1xuICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgIH0pO1xuICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gdG9vbDtcbn1cbmZ1bmN0aW9uIGhhbmRsZVRvb2xDYWxsQWN0aW9uKHsgb3V0cHV0LCB0b29sLCBhZ2VudCwgZXJyb3JNZXNzYWdlLCBlcnJvckRhdGEsIGl0ZW1zLCB0b29sc1VzZWQsIGFjdGlvbnMsIGJ1aWxkQWN0aW9uLCB9KSB7XG4gICAgY29uc3QgcmVzb2x2ZWRUb29sID0gZW5zdXJlVG9vbEF2YWlsYWJsZSh0b29sLCBlcnJvck1lc3NhZ2UsIGVycm9yRGF0YSk7XG4gICAgaXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICB0b29sc1VzZWQucHVzaChyZXNvbHZlZFRvb2wubmFtZSk7XG4gICAgYWN0aW9ucy5wdXNoKGJ1aWxkQWN0aW9uKHJlc29sdmVkVG9vbCkpO1xufVxuZnVuY3Rpb24gcmVzb2x2ZUZ1bmN0aW9uT3JIYW5kb2ZmKHRvb2xDYWxsLCBoYW5kb2ZmTWFwLCBmdW5jdGlvbk1hcCwgYWdlbnQpIHtcbiAgICBjb25zdCBoYW5kb2ZmID0gaGFuZG9mZk1hcC5nZXQodG9vbENhbGwubmFtZSk7XG4gICAgaWYgKGhhbmRvZmYpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2hhbmRvZmYnLCBoYW5kb2ZmIH07XG4gICAgfVxuICAgIGNvbnN0IGZ1bmN0aW9uVG9vbCA9IGZ1bmN0aW9uTWFwLmdldCh0b29sQ2FsbC5uYW1lKTtcbiAgICBpZiAoIWZ1bmN0aW9uVG9vbCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYFRvb2wgJHt0b29sQ2FsbC5uYW1lfSBub3QgZm91bmQgaW4gYWdlbnQgJHthZ2VudC5uYW1lfS5gO1xuICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICB0b29sX25hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiAnZnVuY3Rpb24nLCB0b29sOiBmdW5jdGlvblRvb2wgfTtcbn1cbi8qKlxuICogV2Fsa3MgYSByYXcgbW9kZWwgcmVzcG9uc2UgYW5kIGNsYXNzaWZpZXMgZWFjaCBpdGVtIHNvIHRoZSBydW5uZXIgY2FuIHNjaGVkdWxlIGZvbGxvdy11cCB3b3JrLlxuICogUmV0dXJucyBib3RoIHRoZSBzZXJpYWxpemFibGUgUnVuSXRlbXMgKGZvciBoaXN0b3J5L3N0cmVhbWluZykgYW5kIHRoZSBhY3Rpb25hYmxlIHRvb2wgbWV0YWRhdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzTW9kZWxSZXNwb25zZShtb2RlbFJlc3BvbnNlLCBhZ2VudCwgdG9vbHMsIGhhbmRvZmZzKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXTtcbiAgICBjb25zdCBydW5IYW5kb2ZmcyA9IFtdO1xuICAgIGNvbnN0IHJ1bkZ1bmN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bkNvbXB1dGVyQWN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1blNoZWxsQWN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bkFwcGx5UGF0Y2hBY3Rpb25zID0gW107XG4gICAgY29uc3QgcnVuTUNQQXBwcm92YWxSZXF1ZXN0cyA9IFtdO1xuICAgIGNvbnN0IHRvb2xzVXNlZCA9IFtdO1xuICAgIGNvbnN0IGhhbmRvZmZNYXAgPSBuZXcgTWFwKGhhbmRvZmZzLm1hcCgoaCkgPT4gW2gudG9vbE5hbWUsIGhdKSk7XG4gICAgLy8gUmVzb2x2ZSB0b29scyB1cGZyb250IHNvIHdlIGNhbiBsb29rIHVwIHRoZSBjb25jcmV0ZSBoYW5kbGVyIGluIE8oMSkgd2hpbGUgaXRlcmF0aW5nIG91dHB1dHMuXG4gICAgY29uc3QgZnVuY3Rpb25NYXAgPSBuZXcgTWFwKHRvb2xzXG4gICAgICAgIC5maWx0ZXIoKHQpID0+IHQudHlwZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgLm1hcCgodCkgPT4gW3QubmFtZSwgdF0pKTtcbiAgICBjb25zdCBjb21wdXRlclRvb2wgPSB0b29scy5maW5kKCh0KSA9PiB0LnR5cGUgPT09ICdjb21wdXRlcicpO1xuICAgIGNvbnN0IHNoZWxsVG9vbCA9IHRvb2xzLmZpbmQoKHQpID0+IHQudHlwZSA9PT0gJ3NoZWxsJyk7XG4gICAgY29uc3QgYXBwbHlQYXRjaFRvb2wgPSB0b29scy5maW5kKCh0KSA9PiB0LnR5cGUgPT09ICdhcHBseV9wYXRjaCcpO1xuICAgIGNvbnN0IG1jcFRvb2xNYXAgPSBuZXcgTWFwKHRvb2xzXG4gICAgICAgIC5maWx0ZXIoKHQpID0+IHQudHlwZSA9PT0gJ2hvc3RlZF90b29sJyAmJiB0LnByb3ZpZGVyRGF0YT8udHlwZSA9PT0gJ21jcCcpXG4gICAgICAgIC5tYXAoKHQpID0+IHQpXG4gICAgICAgIC5tYXAoKHQpID0+IFt0LnByb3ZpZGVyRGF0YS5zZXJ2ZXJfbGFiZWwsIHRdKSk7XG4gICAgZm9yIChjb25zdCBvdXRwdXQgb2YgbW9kZWxSZXNwb25zZS5vdXRwdXQpIHtcbiAgICAgICAgaWYgKG91dHB1dC50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGlmIChvdXRwdXQucm9sZSA9PT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5NZXNzYWdlT3V0cHV0SXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJykge1xuICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xOYW1lID0gb3V0cHV0Lm5hbWU7XG4gICAgICAgICAgICB0b29sc1VzZWQucHVzaCh0b29sTmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0LnByb3ZpZGVyRGF0YT8udHlwZSA9PT0gJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyB8fFxuICAgICAgICAgICAgICAgIG91dHB1dC5uYW1lID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnKSB7XG4gICAgICAgICAgICAgICAgLy8gSG9zdGVkIHJlbW90ZSBNQ1Agc2VydmVyJ3MgYXBwcm92YWwgcHJvY2Vzc1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IG91dHB1dC5wcm92aWRlckRhdGE7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwU2VydmVyTGFiZWwgPSBwcm92aWRlckRhdGEuc2VydmVyX2xhYmVsO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1jcFNlcnZlclRvb2wgPSBtY3BUb29sTWFwLmdldChtY3BTZXJ2ZXJMYWJlbCk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtY3BTZXJ2ZXJUb29sID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYE1DUCBzZXJ2ZXIgKCR7bWNwU2VydmVyTGFiZWx9KSBub3QgZm91bmQgaW4gQWdlbnQgKCR7YWdlbnQubmFtZX0pYDtcbiAgICAgICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IG1jcF9zZXJ2ZXJfbGFiZWw6IG1jcFNlcnZlckxhYmVsIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBEbyB0aGlzIGFwcHJvdmFsIGxhdGVyOlxuICAgICAgICAgICAgICAgIC8vIFdlIHN1cHBvcnQgYm90aCBvbkFwcHJvdmFsIGNhbGxiYWNrIChsaWtlIHRoZSBQeXRob24gU0RLIGRvZXMpIGFuZCBISVRMIHBhdHRlcm5zLlxuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsSXRlbSA9IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBtdXN0IHVzZSB0aGlzIG5hbWUgdG8gYWxpZ24gd2l0aCB0aGUgbmFtZSBzZW50IGZyb20gdGhlIHNlcnZlcnNcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogcHJvdmlkZXJEYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBwcm92aWRlckRhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhLFxuICAgICAgICAgICAgICAgIH0sIGFnZW50KTtcbiAgICAgICAgICAgICAgICBydW5NQ1BBcHByb3ZhbFJlcXVlc3RzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SXRlbTogYXBwcm92YWxJdGVtLFxuICAgICAgICAgICAgICAgICAgICBtY3BUb29sOiBtY3BTZXJ2ZXJUb29sLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghbWNwU2VydmVyVG9vbC5wcm92aWRlckRhdGEub25fYXBwcm92YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiBvbkFwcHJvdmFsIGZ1bmN0aW9uIGV4aXN0cywgaXQgY29uZmlybXMgdGhlIGFwcHJvdmFsIHJpZ2h0IGFmdGVyIHRoaXMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRodXMsIHRoaXMgYXBwcm92YWwgaXRlbSBtdXN0IGJlIGFwcGVuZGVkIG9ubHkgZm9yIHRoZSBuZXh0IHR1cm4gaW50ZXJydXB0aW9uIHBhdHRlcm5zLlxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAncmVhc29uaW5nJykge1xuICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuUmVhc29uaW5nSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdjb21wdXRlcl9jYWxsJykge1xuICAgICAgICAgICAgaGFuZGxlVG9vbENhbGxBY3Rpb24oe1xuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgICAgICB0b29sOiBjb21wdXRlclRvb2wsXG4gICAgICAgICAgICAgICAgYWdlbnQsXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiAnTW9kZWwgcHJvZHVjZWQgY29tcHV0ZXIgYWN0aW9uIHdpdGhvdXQgYSBjb21wdXRlciB0b29sLicsXG4gICAgICAgICAgICAgICAgZXJyb3JEYXRhOiB7IGFnZW50X25hbWU6IGFnZW50Lm5hbWUgfSxcbiAgICAgICAgICAgICAgICBpdGVtcyxcbiAgICAgICAgICAgICAgICB0b29sc1VzZWQsXG4gICAgICAgICAgICAgICAgYWN0aW9uczogcnVuQ29tcHV0ZXJBY3Rpb25zLFxuICAgICAgICAgICAgICAgIGJ1aWxkQWN0aW9uOiAocmVzb2x2ZWRUb29sKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICBjb21wdXRlcjogcmVzb2x2ZWRUb29sLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdzaGVsbF9jYWxsJykge1xuICAgICAgICAgICAgaGFuZGxlVG9vbENhbGxBY3Rpb24oe1xuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgICAgICB0b29sOiBzaGVsbFRvb2wsXG4gICAgICAgICAgICAgICAgYWdlbnQsXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiAnTW9kZWwgcHJvZHVjZWQgc2hlbGwgYWN0aW9uIHdpdGhvdXQgYSBzaGVsbCB0b29sLicsXG4gICAgICAgICAgICAgICAgZXJyb3JEYXRhOiB7IGFnZW50X25hbWU6IGFnZW50Lm5hbWUgfSxcbiAgICAgICAgICAgICAgICBpdGVtcyxcbiAgICAgICAgICAgICAgICB0b29sc1VzZWQsXG4gICAgICAgICAgICAgICAgYWN0aW9uczogcnVuU2hlbGxBY3Rpb25zLFxuICAgICAgICAgICAgICAgIGJ1aWxkQWN0aW9uOiAocmVzb2x2ZWRUb29sKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICBzaGVsbDogcmVzb2x2ZWRUb29sLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdhcHBseV9wYXRjaF9jYWxsJykge1xuICAgICAgICAgICAgaGFuZGxlVG9vbENhbGxBY3Rpb24oe1xuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgICAgICB0b29sOiBhcHBseVBhdGNoVG9vbCxcbiAgICAgICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6ICdNb2RlbCBwcm9kdWNlZCBhcHBseV9wYXRjaCBhY3Rpb24gd2l0aG91dCBhbiBhcHBseV9wYXRjaCB0b29sLicsXG4gICAgICAgICAgICAgICAgZXJyb3JEYXRhOiB7IGFnZW50X25hbWU6IGFnZW50Lm5hbWUgfSxcbiAgICAgICAgICAgICAgICBpdGVtcyxcbiAgICAgICAgICAgICAgICB0b29sc1VzZWQsXG4gICAgICAgICAgICAgICAgYWN0aW9uczogcnVuQXBwbHlQYXRjaEFjdGlvbnMsXG4gICAgICAgICAgICAgICAgYnVpbGRBY3Rpb246IChyZXNvbHZlZFRvb2wpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5UGF0Y2g6IHJlc29sdmVkVG9vbCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8qXG4gICAgICAgICAqIEludGVudGlvbmFsbHkgc2tpcCByZXR1cm5pbmcgaGVyZSBzbyBmdW5jdGlvbl9jYWxsIHByb2Nlc3NpbmcgY2FuIHN0aWxsXG4gICAgICAgICAqIHJ1biB3aGVuIG91dHB1dC50eXBlIG1hdGNoZXMgb3RoZXIgdG9vbCBjYWxsIHR5cGVzLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRvb2xzVXNlZC5wdXNoKG91dHB1dC5uYW1lKTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWQgPSByZXNvbHZlRnVuY3Rpb25PckhhbmRvZmYob3V0cHV0LCBoYW5kb2ZmTWFwLCBmdW5jdGlvbk1hcCwgYWdlbnQpO1xuICAgICAgICBpZiAocmVzb2x2ZWQudHlwZSA9PT0gJ2hhbmRvZmYnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5IYW5kb2ZmQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgcnVuSGFuZG9mZnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBoYW5kb2ZmOiByZXNvbHZlZC5oYW5kb2ZmLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgcnVuRnVuY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgdG9vbDogcmVzb2x2ZWQudG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5ld0l0ZW1zOiBpdGVtcyxcbiAgICAgICAgaGFuZG9mZnM6IHJ1bkhhbmRvZmZzLFxuICAgICAgICBmdW5jdGlvbnM6IHJ1bkZ1bmN0aW9ucyxcbiAgICAgICAgY29tcHV0ZXJBY3Rpb25zOiBydW5Db21wdXRlckFjdGlvbnMsXG4gICAgICAgIHNoZWxsQWN0aW9uczogcnVuU2hlbGxBY3Rpb25zLFxuICAgICAgICBhcHBseVBhdGNoQWN0aW9uczogcnVuQXBwbHlQYXRjaEFjdGlvbnMsXG4gICAgICAgIG1jcEFwcHJvdmFsUmVxdWVzdHM6IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMsXG4gICAgICAgIHRvb2xzVXNlZDogdG9vbHNVc2VkLFxuICAgICAgICBoYXNUb29sc09yQXBwcm92YWxzVG9SdW4oKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJ1bkhhbmRvZmZzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5GdW5jdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bkNvbXB1dGVyQWN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcnVuU2hlbGxBY3Rpb25zLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5BcHBseVBhdGNoQWN0aW9ucy5sZW5ndGggPiAwKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9kZWxPdXRwdXRzLm1qcy5tYXAiLCJpbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBSdW5JdGVtU3RyZWFtRXZlbnQgfSBmcm9tIFwiLi4vZXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCB9IGZyb20gXCIuLi9pdGVtcy5tanNcIjtcbmV4cG9ydCBjb25zdCBpc0Fib3J0RXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBEb21FeGNlcHRpb25DdG9yID0gdHlwZW9mIERPTUV4Y2VwdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBET01FeGNlcHRpb24gOiB1bmRlZmluZWQ7XG4gICAgaWYgKERvbUV4Y2VwdGlvbkN0b3IgJiZcbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBEb21FeGNlcHRpb25DdG9yICYmXG4gICAgICAgIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbmZ1bmN0aW9uIGdldFJ1bkl0ZW1TdHJlYW1FdmVudE5hbWUoaXRlbSkge1xuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuTWVzc2FnZU91dHB1dEl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICdtZXNzYWdlX291dHB1dF9jcmVhdGVkJztcbiAgICB9XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5IYW5kb2ZmQ2FsbEl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICdoYW5kb2ZmX3JlcXVlc3RlZCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuSGFuZG9mZk91dHB1dEl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICdoYW5kb2ZmX29jY3VycmVkJztcbiAgICB9XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQ2FsbEl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICd0b29sX2NhbGxlZCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbENhbGxPdXRwdXRJdGVtKSB7XG4gICAgICAgIHJldHVybiAndG9vbF9vdXRwdXQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blJlYXNvbmluZ0l0ZW0pIHtcbiAgICAgICAgcmV0dXJuICdyZWFzb25pbmdfaXRlbV9jcmVhdGVkJztcbiAgICB9XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKSB7XG4gICAgICAgIHJldHVybiAndG9vbF9hcHByb3ZhbF9yZXF1ZXN0ZWQnO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gZW5xdWV1ZVJ1bkl0ZW1TdHJlYW1FdmVudChyZXN1bHQsIGl0ZW0pIHtcbiAgICBjb25zdCBpdGVtTmFtZSA9IGdldFJ1bkl0ZW1TdHJlYW1FdmVudE5hbWUoaXRlbSk7XG4gICAgaWYgKCFpdGVtTmFtZSkge1xuICAgICAgICBsb2dnZXIud2FybignVW5rbm93biBpdGVtIHR5cGU6ICcsIGl0ZW0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlc3VsdC5fYWRkSXRlbShuZXcgUnVuSXRlbVN0cmVhbUV2ZW50KGl0ZW1OYW1lLCBpdGVtKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc3RyZWFtU3RlcEl0ZW1zVG9SdW5SZXN1bHQocmVzdWx0LCBpdGVtcykge1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBlbnF1ZXVlUnVuSXRlbVN0cmVhbUV2ZW50KHJlc3VsdCwgaXRlbSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZFN0ZXBUb1J1blJlc3VsdChyZXN1bHQsIHN0ZXAsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBza2lwcGVkSXRlbXMgPSBvcHRpb25zPy5za2lwSXRlbXM7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHN0ZXAubmV3U3RlcEl0ZW1zKSB7XG4gICAgICAgIGlmIChza2lwcGVkSXRlbXM/LmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZW5xdWV1ZVJ1bkl0ZW1TdHJlYW1FdmVudChyZXN1bHQsIGl0ZW0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmVhbWluZy5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGlzT3BlbkFJUmVzcG9uc2VzQ29tcGFjdGlvbkF3YXJlU2Vzc2lvbihzZXNzaW9uKSB7XG4gICAgcmV0dXJuICghIXNlc3Npb24gJiZcbiAgICAgICAgdHlwZW9mIHNlc3Npb24ucnVuQ29tcGFjdGlvbiA9PT1cbiAgICAgICAgICAgICdmdW5jdGlvbicpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2Vzc2lvbi5tanMubWFwIiwiaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IGlzT3BlbkFJUmVzcG9uc2VzQ29tcGFjdGlvbkF3YXJlU2Vzc2lvbiwgfSBmcm9tIFwiLi4vbWVtb3J5L3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuLi91c2FnZS5tanNcIjtcbmltcG9ydCB7IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NCB9IGZyb20gXCIuLi91dGlscy9iYXNlNjQubWpzXCI7XG5pbXBvcnQgeyB0b1VpbnQ4QXJyYXlGcm9tQmluYXJ5IH0gZnJvbSBcIi4uL3V0aWxzL2JpbmFyeS5tanNcIjtcbmltcG9ydCB7IGJ1aWxkQWdlbnRJbnB1dFBvb2wsIGV4dHJhY3RPdXRwdXRJdGVtc0Zyb21SdW5JdGVtcywgdG9BZ2VudElucHV0TGlzdCwgZ2V0QWdlbnRJbnB1dEl0ZW1LZXksIHJlbW92ZUFnZW50SW5wdXRGcm9tUG9vbCwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4uL2xvZ2dlci5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXNzaW9uUGVyc2lzdGVuY2VUcmFja2VyKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHNlc3Npb24gfSA9IG9wdGlvbnM7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNsYXNzIFNlc3Npb25QZXJzaXN0ZW5jZVRyYWNrZXJJbXBsIHtcbiAgICAgICAgc2Vzc2lvbjtcbiAgICAgICAgaGFzQ2FsbE1vZGVsSW5wdXRGaWx0ZXI7XG4gICAgICAgIHBlcnNpc3RJbnB1dDtcbiAgICAgICAgb3JpZ2luYWxTbmFwc2hvdDtcbiAgICAgICAgZmlsdGVyZWRTbmFwc2hvdDtcbiAgICAgICAgcGVuZGluZ1dyaXRlQ291bnRzO1xuICAgICAgICBwZXJzaXN0ZWRJbnB1dCA9IGZhbHNlO1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbiA9IG9wdGlvbnMuc2Vzc2lvbjtcbiAgICAgICAgICAgIHRoaXMuaGFzQ2FsbE1vZGVsSW5wdXRGaWx0ZXIgPSBvcHRpb25zLmhhc0NhbGxNb2RlbElucHV0RmlsdGVyO1xuICAgICAgICAgICAgdGhpcy5wZXJzaXN0SW5wdXQgPSBvcHRpb25zLnBlcnNpc3RJbnB1dDtcbiAgICAgICAgICAgIHRoaXMub3JpZ2luYWxTbmFwc2hvdCA9IG9wdGlvbnMucmVzdW1pbmdGcm9tU3RhdGUgPyBbXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyZWRTbmFwc2hvdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1dyaXRlQ291bnRzID0gb3B0aW9ucy5yZXN1bWluZ0Zyb21TdGF0ZVxuICAgICAgICAgICAgICAgID8gbmV3IE1hcCgpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgc2V0UHJlcGFyZWRJdGVtcyA9IChpdGVtcykgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbkl0ZW1zID0gaXRlbXMgPz8gW107XG4gICAgICAgICAgICB0aGlzLm9yaWdpbmFsU25hcHNob3QgPSBzZXNzaW9uSXRlbXMubWFwKChpdGVtKSA9PiBzdHJ1Y3R1cmVkQ2xvbmUoaXRlbSkpO1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVDb3VudHMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc2Vzc2lvbkl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVDb3VudHMuc2V0KGtleSwgKHRoaXMucGVuZGluZ1dyaXRlQ291bnRzLmdldChrZXkpID8/IDApICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJlY29yZFR1cm5JdGVtcyA9IChzb3VyY2VJdGVtcywgZmlsdGVyZWRJdGVtcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGVuZGluZ0NvdW50cyA9IHRoaXMucGVuZGluZ1dyaXRlQ291bnRzO1xuICAgICAgICAgICAgaWYgKGZpbHRlcmVkSXRlbXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICghcGVuZGluZ0NvdW50cykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcmVkU25hcHNob3QgPSBjbG9uZUl0ZW1zKGZpbHRlcmVkSXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRTbmFwc2hvdCA9IGNvbGxlY3RQZXJzaXN0YWJsZUZpbHRlcmVkSXRlbXMoe1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nQ291bnRzLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VJdGVtcyxcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRJdGVtcyxcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdTbmFwc2hvdDogdGhpcy5maWx0ZXJlZFNuYXBzaG90LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0U25hcHNob3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcmVkU25hcHNob3QgPSBuZXh0U25hcHNob3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyZWRTbmFwc2hvdCA9IGJ1aWxkU25hcHNob3RGb3JVbmZpbHRlcmVkSXRlbXMoe1xuICAgICAgICAgICAgICAgIHBlbmRpbmdDb3VudHMsXG4gICAgICAgICAgICAgICAgc291cmNlSXRlbXMsXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdTbmFwc2hvdDogdGhpcy5maWx0ZXJlZFNuYXBzaG90LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGdldEl0ZW1zRm9yUGVyc2lzdGVuY2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJlZFNuYXBzaG90ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJlZFNuYXBzaG90O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaGFzQ2FsbE1vZGVsSW5wdXRGaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luYWxTbmFwc2hvdDtcbiAgICAgICAgfTtcbiAgICAgICAgYnVpbGRQZXJzaXN0SW5wdXRPbmNlID0gKHNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24pID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zZXNzaW9uIHx8IHNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGVyc2lzdElucHV0ID0gdGhpcy5wZXJzaXN0SW5wdXQgPz8gc2F2ZVN0cmVhbUlucHV0VG9TZXNzaW9uO1xuICAgICAgICAgICAgcmV0dXJuIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZWRJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zVG9QZXJzaXN0ID0gdGhpcy5nZXRJdGVtc0ZvclBlcnNpc3RlbmNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpdGVtc1RvUGVyc2lzdCB8fCBpdGVtc1RvUGVyc2lzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBlcnNpc3RlZElucHV0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0SW5wdXQodGhpcy5zZXNzaW9uLCBpdGVtc1RvUGVyc2lzdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFNlc3Npb25QZXJzaXN0ZW5jZVRyYWNrZXJJbXBsKCk7XG59XG5mdW5jdGlvbiBjbG9uZUl0ZW1zKGl0ZW1zKSB7XG4gICAgcmV0dXJuIGl0ZW1zLm1hcCgoaXRlbSkgPT4gc3RydWN0dXJlZENsb25lKGl0ZW0pKTtcbn1cbmZ1bmN0aW9uIGJ1aWxkU291cmNlT2NjdXJyZW5jZUNvdW50cyhzb3VyY2VJdGVtcykge1xuICAgIGNvbnN0IHNvdXJjZU9jY3VycmVuY2VDb3VudHMgPSBuZXcgV2Vha01hcCgpO1xuICAgIGZvciAoY29uc3Qgc291cmNlIG9mIHNvdXJjZUl0ZW1zKSB7XG4gICAgICAgIGlmICghc291cmNlIHx8IHR5cGVvZiBzb3VyY2UgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0Q291bnQgPSAoc291cmNlT2NjdXJyZW5jZUNvdW50cy5nZXQoc291cmNlKSA/PyAwKSArIDE7XG4gICAgICAgIHNvdXJjZU9jY3VycmVuY2VDb3VudHMuc2V0KHNvdXJjZSwgbmV4dENvdW50KTtcbiAgICB9XG4gICAgcmV0dXJuIHNvdXJjZU9jY3VycmVuY2VDb3VudHM7XG59XG5mdW5jdGlvbiBjb2xsZWN0UGVyc2lzdGFibGVGaWx0ZXJlZEl0ZW1zKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHBlbmRpbmdDb3VudHMsIHNvdXJjZUl0ZW1zLCBmaWx0ZXJlZEl0ZW1zLCBleGlzdGluZ1NuYXBzaG90IH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IHBlcnNpc3RhYmxlSXRlbXMgPSBbXTtcbiAgICBjb25zdCBzb3VyY2VPY2N1cnJlbmNlQ291bnRzID0gYnVpbGRTb3VyY2VPY2N1cnJlbmNlQ291bnRzKHNvdXJjZUl0ZW1zKTtcbiAgICBjb25zdCBjb25zdW1lQW55UGVuZGluZ1dyaXRlU2xvdCA9ICgpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCByZW1haW5pbmddIG9mIHBlbmRpbmdDb3VudHMpIHtcbiAgICAgICAgICAgIGlmIChyZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICAgICAgcGVuZGluZ0NvdW50cy5zZXQoa2V5LCByZW1haW5pbmcgLSAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbHRlcmVkSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRJdGVtID0gZmlsdGVyZWRJdGVtc1tpXTtcbiAgICAgICAgaWYgKCFmaWx0ZXJlZEl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBhbGxvY2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3Qgc291cmNlID0gc291cmNlSXRlbXNbaV07XG4gICAgICAgIGlmIChzb3VyY2UgJiYgdHlwZW9mIHNvdXJjZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHBlbmRpbmdPY2N1cnJlbmNlcyA9IChzb3VyY2VPY2N1cnJlbmNlQ291bnRzLmdldChzb3VyY2UpID8/IDApIC0gMTtcbiAgICAgICAgICAgIHNvdXJjZU9jY3VycmVuY2VDb3VudHMuc2V0KHNvdXJjZSwgcGVuZGluZ09jY3VycmVuY2VzKTtcbiAgICAgICAgICAgIGlmIChwZW5kaW5nT2NjdXJyZW5jZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzb3VyY2VLZXkgPSBnZXRBZ2VudElucHV0SXRlbUtleShzb3VyY2UpO1xuICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nID0gcGVuZGluZ0NvdW50cy5nZXQoc291cmNlS2V5KSA/PyAwO1xuICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgICAgICBwZW5kaW5nQ291bnRzLnNldChzb3VyY2VLZXksIHJlbWFpbmluZyAtIDEpO1xuICAgICAgICAgICAgICAgIHBlcnNpc3RhYmxlSXRlbXMucHVzaChzdHJ1Y3R1cmVkQ2xvbmUoZmlsdGVyZWRJdGVtKSk7XG4gICAgICAgICAgICAgICAgYWxsb2NhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWx0ZXJlZEtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGZpbHRlcmVkSXRlbSk7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkUmVtYWluaW5nID0gcGVuZGluZ0NvdW50cy5nZXQoZmlsdGVyZWRLZXkpID8/IDA7XG4gICAgICAgIGlmIChmaWx0ZXJlZFJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgIHBlbmRpbmdDb3VudHMuc2V0KGZpbHRlcmVkS2V5LCBmaWx0ZXJlZFJlbWFpbmluZyAtIDEpO1xuICAgICAgICAgICAgcGVyc2lzdGFibGVJdGVtcy5wdXNoKHN0cnVjdHVyZWRDbG9uZShmaWx0ZXJlZEl0ZW0pKTtcbiAgICAgICAgICAgIGFsbG9jYXRlZCA9IHRydWU7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNvdXJjZSAmJiBjb25zdW1lQW55UGVuZGluZ1dyaXRlU2xvdCgpKSB7XG4gICAgICAgICAgICBwZXJzaXN0YWJsZUl0ZW1zLnB1c2goc3RydWN0dXJlZENsb25lKGZpbHRlcmVkSXRlbSkpO1xuICAgICAgICAgICAgYWxsb2NhdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFsbG9jYXRlZCAmJiAhc291cmNlICYmIGV4aXN0aW5nU25hcHNob3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGVyc2lzdGFibGVJdGVtcy5wdXNoKHN0cnVjdHVyZWRDbG9uZShmaWx0ZXJlZEl0ZW0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocGVyc2lzdGFibGVJdGVtcy5sZW5ndGggPiAwIHx8IGV4aXN0aW5nU25hcHNob3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gcGVyc2lzdGFibGVJdGVtcztcbiAgICB9XG4gICAgcmV0dXJuIGV4aXN0aW5nU25hcHNob3Q7XG59XG5mdW5jdGlvbiBidWlsZFNuYXBzaG90Rm9yVW5maWx0ZXJlZEl0ZW1zKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHBlbmRpbmdDb3VudHMsIHNvdXJjZUl0ZW1zLCBleGlzdGluZ1NuYXBzaG90IH0gPSBvcHRpb25zO1xuICAgIGlmICghcGVuZGluZ0NvdW50cykge1xuICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHNvdXJjZUl0ZW1zXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBCb29sZWFuKGl0ZW0pKVxuICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT4gc3RydWN0dXJlZENsb25lKGl0ZW0pKTtcbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gZmlsdGVyZWRcbiAgICAgICAgICAgIDogZXhpc3RpbmdTbmFwc2hvdCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBbXVxuICAgICAgICAgICAgICAgIDogZXhpc3RpbmdTbmFwc2hvdDtcbiAgICB9XG4gICAgY29uc3QgZmlsdGVyZWQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc291cmNlSXRlbXMpIHtcbiAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXkgPSBnZXRBZ2VudElucHV0SXRlbUtleShpdGVtKTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nID0gcGVuZGluZ0NvdW50cy5nZXQoa2V5KSA/PyAwO1xuICAgICAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHBlbmRpbmdDb3VudHMuc2V0KGtleSwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgIGZpbHRlcmVkLnB1c2goc3RydWN0dXJlZENsb25lKGl0ZW0pKTtcbiAgICB9XG4gICAgaWYgKGZpbHRlcmVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkO1xuICAgIH1cbiAgICByZXR1cm4gZXhpc3RpbmdTbmFwc2hvdCA9PT0gdW5kZWZpbmVkID8gW10gOiBleGlzdGluZ1NuYXBzaG90O1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVUb1Nlc3Npb24oc2Vzc2lvbiwgc2Vzc2lvbklucHV0SXRlbXMsIHJlc3VsdCkge1xuICAgIGNvbnN0IHN0YXRlID0gcmVzdWx0LnN0YXRlO1xuICAgIGNvbnN0IGFscmVhZHlQZXJzaXN0ZWQgPSBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPz8gMDtcbiAgICBjb25zdCBuZXdSdW5JdGVtcyA9IHJlc3VsdC5uZXdJdGVtcy5zbGljZShhbHJlYWR5UGVyc2lzdGVkKTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuT1BFTkFJX0FHRU5UU19fREVCVUdfU0FWRV9TRVNTSU9OKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3NhdmVUb1Nlc3Npb246bmV3UnVuSXRlbXMnLCBuZXdSdW5JdGVtcy5tYXAoKGl0ZW0pID0+IGl0ZW0udHlwZSkpO1xuICAgIH1cbiAgICBhd2FpdCBwZXJzaXN0UnVuSXRlbXNUb1Nlc3Npb24oe1xuICAgICAgICBzZXNzaW9uLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgbmV3UnVuSXRlbXMsXG4gICAgICAgIGV4dHJhSW5wdXRJdGVtczogc2Vzc2lvbklucHV0SXRlbXMsXG4gICAgICAgIGxhc3RSZXNwb25zZUlkOiByZXN1bHQubGFzdFJlc3BvbnNlSWQsXG4gICAgICAgIGFscmVhZHlQZXJzaXN0ZWRDb3VudDogYWxyZWFkeVBlcnNpc3RlZCxcbiAgICB9KTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlU3RyZWFtSW5wdXRUb1Nlc3Npb24oc2Vzc2lvbiwgc2Vzc2lvbklucHV0SXRlbXMpIHtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXNlc3Npb25JbnB1dEl0ZW1zIHx8IHNlc3Npb25JbnB1dEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNhbml0aXplZElucHV0ID0gbm9ybWFsaXplSXRlbXNGb3JTZXNzaW9uUGVyc2lzdGVuY2Uoc2Vzc2lvbklucHV0SXRlbXMpO1xuICAgIGF3YWl0IHNlc3Npb24uYWRkSXRlbXMoc2FuaXRpemVkSW5wdXQpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTdHJlYW1SZXN1bHRUb1Nlc3Npb24oc2Vzc2lvbiwgcmVzdWx0KSB7XG4gICAgY29uc3Qgc3RhdGUgPSByZXN1bHQuc3RhdGU7XG4gICAgY29uc3QgYWxyZWFkeVBlcnNpc3RlZCA9IHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA/PyAwO1xuICAgIGNvbnN0IG5ld1J1bkl0ZW1zID0gcmVzdWx0Lm5ld0l0ZW1zLnNsaWNlKGFscmVhZHlQZXJzaXN0ZWQpO1xuICAgIGF3YWl0IHBlcnNpc3RSdW5JdGVtc1RvU2Vzc2lvbih7XG4gICAgICAgIHNlc3Npb24sXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBuZXdSdW5JdGVtcyxcbiAgICAgICAgbGFzdFJlc3BvbnNlSWQ6IHJlc3VsdC5sYXN0UmVzcG9uc2VJZCxcbiAgICAgICAgYWxyZWFkeVBlcnNpc3RlZENvdW50OiBhbHJlYWR5UGVyc2lzdGVkLFxuICAgIH0pO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByZXBhcmVJbnB1dEl0ZW1zV2l0aFNlc3Npb24oaW5wdXQsIHNlc3Npb24sIHNlc3Npb25JbnB1dENhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwcmVwYXJlZElucHV0OiBpbnB1dCxcbiAgICAgICAgICAgIHNlc3Npb25JdGVtczogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBpbmNsdWRlSGlzdG9yeUluUHJlcGFyZWRJbnB1dCA9IG9wdGlvbnM/LmluY2x1ZGVIaXN0b3J5SW5QcmVwYXJlZElucHV0ID8/IHRydWU7XG4gICAgY29uc3QgcHJlc2VydmVEcm9wcGVkTmV3SXRlbXMgPSBvcHRpb25zPy5wcmVzZXJ2ZURyb3BwZWROZXdJdGVtcyA/PyBmYWxzZTtcbiAgICBjb25zdCBoaXN0b3J5ID0gYXdhaXQgc2Vzc2lvbi5nZXRJdGVtcygpO1xuICAgIGNvbnN0IG5ld0lucHV0SXRlbXMgPSB0b0FnZW50SW5wdXRMaXN0KGlucHV0KTtcbiAgICBpZiAoIXNlc3Npb25JbnB1dENhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwcmVwYXJlZElucHV0OiBpbmNsdWRlSGlzdG9yeUluUHJlcGFyZWRJbnB1dFxuICAgICAgICAgICAgICAgID8gWy4uLmhpc3RvcnksIC4uLm5ld0lucHV0SXRlbXNdXG4gICAgICAgICAgICAgICAgOiBuZXdJbnB1dEl0ZW1zLFxuICAgICAgICAgICAgc2Vzc2lvbkl0ZW1zOiBuZXdJbnB1dEl0ZW1zLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBoaXN0b3J5U25hcHNob3QgPSBoaXN0b3J5LnNsaWNlKCk7XG4gICAgY29uc3QgbmV3SW5wdXRTbmFwc2hvdCA9IG5ld0lucHV0SXRlbXMuc2xpY2UoKTtcbiAgICBjb25zdCBjb21iaW5lZCA9IGF3YWl0IHNlc3Npb25JbnB1dENhbGxiYWNrKGhpc3RvcnksIG5ld0lucHV0SXRlbXMpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShjb21iaW5lZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignU2Vzc2lvbiBpbnB1dCBjYWxsYmFjayBtdXN0IHJldHVybiBhbiBhcnJheSBvZiBBZ2VudElucHV0SXRlbSBvYmplY3RzLicpO1xuICAgIH1cbiAgICBjb25zdCBoaXN0b3J5Q291bnRzID0gYnVpbGRJdGVtRnJlcXVlbmN5TWFwKGhpc3RvcnlTbmFwc2hvdCk7XG4gICAgY29uc3QgbmV3SW5wdXRDb3VudHMgPSBidWlsZEl0ZW1GcmVxdWVuY3lNYXAobmV3SW5wdXRTbmFwc2hvdCk7XG4gICAgY29uc3QgaGlzdG9yeVJlZnMgPSBidWlsZEFnZW50SW5wdXRQb29sKGhpc3RvcnlTbmFwc2hvdCk7XG4gICAgY29uc3QgbmV3SW5wdXRSZWZzID0gYnVpbGRBZ2VudElucHV0UG9vbChuZXdJbnB1dFNuYXBzaG90KTtcbiAgICBjb25zdCBhcHBlbmRlZCA9IFtdO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb21iaW5lZCkge1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRBZ2VudElucHV0SXRlbUtleShpdGVtKTtcbiAgICAgICAgaWYgKHJlbW92ZUFnZW50SW5wdXRGcm9tUG9vbChuZXdJbnB1dFJlZnMsIGl0ZW0pKSB7XG4gICAgICAgICAgICBkZWNyZW1lbnRDb3VudChuZXdJbnB1dENvdW50cywga2V5KTtcbiAgICAgICAgICAgIGFwcGVuZGVkLnB1c2goaXRlbSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtb3ZlQWdlbnRJbnB1dEZyb21Qb29sKGhpc3RvcnlSZWZzLCBpdGVtKSkge1xuICAgICAgICAgICAgZGVjcmVtZW50Q291bnQoaGlzdG9yeUNvdW50cywga2V5KTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhpc3RvcnlSZW1haW5pbmcgPSBoaXN0b3J5Q291bnRzLmdldChrZXkpID8/IDA7XG4gICAgICAgIGlmIChoaXN0b3J5UmVtYWluaW5nID4gMCkge1xuICAgICAgICAgICAgaGlzdG9yeUNvdW50cy5zZXQoa2V5LCBoaXN0b3J5UmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdSZW1haW5pbmcgPSBuZXdJbnB1dENvdW50cy5nZXQoa2V5KSA/PyAwO1xuICAgICAgICBpZiAobmV3UmVtYWluaW5nID4gMCkge1xuICAgICAgICAgICAgbmV3SW5wdXRDb3VudHMuc2V0KGtleSwgbmV3UmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICBhcHBlbmRlZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYXBwZW5kZWQucHVzaChpdGVtKTtcbiAgICB9XG4gICAgY29uc3QgcHJlcGFyZWRJdGVtcyA9IGluY2x1ZGVIaXN0b3J5SW5QcmVwYXJlZElucHV0XG4gICAgICAgID8gY29tYmluZWRcbiAgICAgICAgOiBhcHBlbmRlZC5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IGFwcGVuZGVkXG4gICAgICAgICAgICA6IHByZXNlcnZlRHJvcHBlZE5ld0l0ZW1zXG4gICAgICAgICAgICAgICAgPyBuZXdJbnB1dFNuYXBzaG90XG4gICAgICAgICAgICAgICAgOiBbXTtcbiAgICBpZiAocHJlc2VydmVEcm9wcGVkTmV3SXRlbXMgJiZcbiAgICAgICAgYXBwZW5kZWQubGVuZ3RoID09PSAwICYmXG4gICAgICAgIG5ld0lucHV0U25hcHNob3QubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBJbiBzZXJ2ZXItbWFuYWdlZCBjb252ZXJzYXRpb25zIHdlIGNhbm5vdCBkcm9wIHRoZSB0dXJuIGRlbHRhOyByZXN0b3JlIGl0IGFuZCB3YXJuIGNhbGxlcnMuXG4gICAgICAgIGxvZ2dlci53YXJuKCdzZXNzaW9uSW5wdXRDYWxsYmFjayBkcm9wcGVkIGFsbCBuZXcgaW5wdXRzIGluIGEgc2VydmVyLW1hbmFnZWQgY29udmVyc2F0aW9uOyBvcmlnaW5hbCB0dXJuIGlucHV0cyB3ZXJlIHJlc3RvcmVkIHRvIGF2b2lkIGxvc2luZyB0aGUgQVBJIGRlbHRhLiBLZWVwIGF0IGxlYXN0IG9uZSBuZXcgaXRlbSBvciBvbWl0IGNvbnZlcnNhdGlvbklkIGlmIHlvdSBpbnRlbmRlZCB0byBkcm9wIHRoZW0uJyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHByZXBhcmVkSW5wdXQ6IHByZXBhcmVkSXRlbXMsXG4gICAgICAgIHNlc3Npb25JdGVtczogYXBwZW5kZWQsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUl0ZW1zRm9yU2Vzc2lvblBlcnNpc3RlbmNlKGl0ZW1zKSB7XG4gICAgcmV0dXJuIGl0ZW1zLm1hcCgoaXRlbSkgPT4gc2FuaXRpemVWYWx1ZUZvclNlc3Npb24oc3RyaXBUcmFuc2llbnRDYWxsSWRzKGl0ZW0pKSk7XG59XG5mdW5jdGlvbiBzYW5pdGl6ZVZhbHVlRm9yU2Vzc2lvbih2YWx1ZSwgY29udGV4dCA9IHt9KSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjb25zdCBiaW5hcnkgPSB0b1VpbnQ4QXJyYXlGcm9tQmluYXJ5KHZhbHVlKTtcbiAgICBpZiAoYmluYXJ5KSB7XG4gICAgICAgIHJldHVybiB0b0RhdGFVcmxGcm9tQnl0ZXMoYmluYXJ5LCBjb250ZXh0Lm1lZGlhVHlwZSk7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUubWFwKChlbnRyeSkgPT4gc2FuaXRpemVWYWx1ZUZvclNlc3Npb24oZW50cnksIGNvbnRleHQpKTtcbiAgICB9XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0IHJlY29yZCA9IHZhbHVlO1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGNvbnN0IG1lZGlhVHlwZSA9IHR5cGVvZiByZWNvcmQubWVkaWFUeXBlID09PSAnc3RyaW5nJyAmJiByZWNvcmQubWVkaWFUeXBlLmxlbmd0aCA+IDBcbiAgICAgICAgPyByZWNvcmQubWVkaWFUeXBlXG4gICAgICAgIDogY29udGV4dC5tZWRpYVR5cGU7XG4gICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgT2JqZWN0LmVudHJpZXMocmVjb3JkKSkge1xuICAgICAgICBjb25zdCBuZXh0Q29udGV4dCA9IGtleSA9PT0gJ2RhdGEnIHx8IGtleSA9PT0gJ2ZpbGVEYXRhJyA/IHsgbWVkaWFUeXBlIH0gOiBjb250ZXh0O1xuICAgICAgICByZXN1bHRba2V5XSA9IHNhbml0aXplVmFsdWVGb3JTZXNzaW9uKGVudHJ5LCBuZXh0Q29udGV4dCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiB0b0RhdGFVcmxGcm9tQnl0ZXMoYnl0ZXMsIG1lZGlhVHlwZSkge1xuICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChieXRlcyk7XG4gICAgY29uc3QgdHlwZSA9IG1lZGlhVHlwZSAmJiAhbWVkaWFUeXBlLnN0YXJ0c1dpdGgoJ2RhdGE6JykgPyBtZWRpYVR5cGUgOiAndGV4dC9wbGFpbic7XG4gICAgcmV0dXJuIGBkYXRhOiR7dHlwZX07YmFzZTY0LCR7YmFzZTY0fWA7XG59XG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSk7XG4gICAgcmV0dXJuIHByb3RvID09PSBPYmplY3QucHJvdG90eXBlIHx8IHByb3RvID09PSBudWxsO1xufVxuZnVuY3Rpb24gc3RyaXBUcmFuc2llbnRDYWxsSWRzKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLm1hcCgoZW50cnkpID0+IHN0cmlwVHJhbnNpZW50Q2FsbElkcyhlbnRyeSkpO1xuICAgIH1cbiAgICBpZiAoIWlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3QgcmVjb3JkID0gdmFsdWU7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgY29uc3QgaXNQcm90b2NvbEl0ZW0gPSB0eXBlb2YgcmVjb3JkLnR5cGUgPT09ICdzdHJpbmcnICYmIHJlY29yZC50eXBlLmxlbmd0aCA+IDA7XG4gICAgY29uc3Qgc2hvdWxkU3RyaXBJZCA9IGlzUHJvdG9jb2xJdGVtICYmIHNob3VsZFN0cmlwSWRGb3JUeXBlKHJlY29yZC50eXBlKTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIGVudHJ5XSBvZiBPYmplY3QuZW50cmllcyhyZWNvcmQpKSB7XG4gICAgICAgIGlmIChzaG91bGRTdHJpcElkICYmIGtleSA9PT0gJ2lkJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0W2tleV0gPSBzdHJpcFRyYW5zaWVudENhbGxJZHMoZW50cnkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gc2hvdWxkU3RyaXBJZEZvclR5cGUodHlwZSkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdmdW5jdGlvbl9jYWxsJzpcbiAgICAgICAgY2FzZSAnZnVuY3Rpb25fY2FsbF9yZXN1bHQnOlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gcGVyc2lzdFJ1bkl0ZW1zVG9TZXNzaW9uKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHNlc3Npb24sIHN0YXRlLCBuZXdSdW5JdGVtcywgZXh0cmFJbnB1dEl0ZW1zID0gW10sIGxhc3RSZXNwb25zZUlkLCBhbHJlYWR5UGVyc2lzdGVkQ291bnQsIH0gPSBvcHRpb25zO1xuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGl0ZW1zVG9TYXZlID0gW1xuICAgICAgICAuLi5leHRyYUlucHV0SXRlbXMsXG4gICAgICAgIC4uLmV4dHJhY3RPdXRwdXRJdGVtc0Zyb21SdW5JdGVtcyhuZXdSdW5JdGVtcyksXG4gICAgXTtcbiAgICBpZiAoaXRlbXNUb1NhdmUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9XG4gICAgICAgICAgICBhbHJlYWR5UGVyc2lzdGVkQ291bnQgKyBuZXdSdW5JdGVtcy5sZW5ndGg7XG4gICAgICAgIGF3YWl0IHJ1bkNvbXBhY3Rpb25PblNlc3Npb24oc2Vzc2lvbiwgbGFzdFJlc3BvbnNlSWQsIHN0YXRlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzYW5pdGl6ZWRJdGVtcyA9IG5vcm1hbGl6ZUl0ZW1zRm9yU2Vzc2lvblBlcnNpc3RlbmNlKGl0ZW1zVG9TYXZlKTtcbiAgICBhd2FpdCBzZXNzaW9uLmFkZEl0ZW1zKHNhbml0aXplZEl0ZW1zKTtcbiAgICBhd2FpdCBydW5Db21wYWN0aW9uT25TZXNzaW9uKHNlc3Npb24sIGxhc3RSZXNwb25zZUlkLCBzdGF0ZSk7XG4gICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID1cbiAgICAgICAgYWxyZWFkeVBlcnNpc3RlZENvdW50ICsgbmV3UnVuSXRlbXMubGVuZ3RoO1xufVxuYXN5bmMgZnVuY3Rpb24gcnVuQ29tcGFjdGlvbk9uU2Vzc2lvbihzZXNzaW9uLCByZXNwb25zZUlkLCBzdGF0ZSkge1xuICAgIGlmICghaXNPcGVuQUlSZXNwb25zZXNDb21wYWN0aW9uQXdhcmVTZXNzaW9uKHNlc3Npb24pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc3RvcmUgPSBzdGF0ZS5fbGFzdE1vZGVsU2V0dGluZ3M/LnN0b3JlID8/IHN0YXRlLl9jdXJyZW50QWdlbnQubW9kZWxTZXR0aW5ncz8uc3RvcmU7XG4gICAgY29uc3QgY29tcGFjdGlvbkFyZ3MgPSB0eXBlb2YgcmVzcG9uc2VJZCA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHN0b3JlID09PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICA6IHtcbiAgICAgICAgICAgIC4uLih0eXBlb2YgcmVzcG9uc2VJZCA9PT0gJ3VuZGVmaW5lZCcgPyB7fSA6IHsgcmVzcG9uc2VJZCB9KSxcbiAgICAgICAgICAgIC4uLih0eXBlb2Ygc3RvcmUgPT09ICd1bmRlZmluZWQnID8ge30gOiB7IHN0b3JlIH0pLFxuICAgICAgICB9O1xuICAgIGNvbnN0IGNvbXBhY3Rpb25SZXN1bHQgPSBhd2FpdCBzZXNzaW9uLnJ1bkNvbXBhY3Rpb24oY29tcGFjdGlvbkFyZ3MpO1xuICAgIGlmICghY29tcGFjdGlvblJlc3VsdCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHVzYWdlID0gY29tcGFjdGlvblJlc3VsdC51c2FnZTtcbiAgICBzdGF0ZS5fY29udGV4dC51c2FnZS5hZGQobmV3IFVzYWdlKHtcbiAgICAgICAgcmVxdWVzdHM6IDEsXG4gICAgICAgIGlucHV0VG9rZW5zOiB1c2FnZS5pbnB1dFRva2VucyxcbiAgICAgICAgb3V0cHV0VG9rZW5zOiB1c2FnZS5vdXRwdXRUb2tlbnMsXG4gICAgICAgIHRvdGFsVG9rZW5zOiB1c2FnZS50b3RhbFRva2VucyxcbiAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiB1c2FnZS5pbnB1dFRva2Vuc0RldGFpbHMsXG4gICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHVzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMsXG4gICAgICAgIHJlcXVlc3RVc2FnZUVudHJpZXM6IFt1c2FnZV0sXG4gICAgfSkpO1xufVxuZnVuY3Rpb24gYnVpbGRJdGVtRnJlcXVlbmN5TWFwKGl0ZW1zKSB7XG4gICAgY29uc3QgY291bnRzID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRBZ2VudElucHV0SXRlbUtleShpdGVtKTtcbiAgICAgICAgY291bnRzLnNldChrZXksIChjb3VudHMuZ2V0KGtleSkgPz8gMCkgKyAxKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvdW50cztcbn1cbmZ1bmN0aW9uIGRlY3JlbWVudENvdW50KG1hcCwga2V5KSB7XG4gICAgY29uc3QgcmVtYWluaW5nID0gKG1hcC5nZXQoa2V5KSA/PyAwKSAtIDE7XG4gICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgIG1hcC5kZWxldGUoa2V5KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1hcC5zZXQoa2V5LCByZW1haW5pbmcpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlc3Npb25QZXJzaXN0ZW5jZS5tanMubWFwIiwiLyoqXG4gKiBHZXQgdGhlIGxhc3QgdGV4dCBmcm9tIHRoZSBvdXRwdXQgbWVzc2FnZS5cbiAqIEBwYXJhbSBvdXRwdXRNZXNzYWdlXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZShvdXRwdXRNZXNzYWdlKSB7XG4gICAgaWYgKG91dHB1dE1lc3NhZ2UudHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChvdXRwdXRNZXNzYWdlLnJvbGUgIT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxhc3RJdGVtID0gb3V0cHV0TWVzc2FnZS5jb250ZW50W291dHB1dE1lc3NhZ2UuY29udGVudC5sZW5ndGggLSAxXTtcbiAgICBpZiAobGFzdEl0ZW0udHlwZSAhPT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbGFzdEl0ZW0udGV4dDtcbn1cbi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSB0aGUgb3V0cHV0IG1lc3NhZ2UuXG4gKiBAcGFyYW0gb3V0cHV0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3V0cHV0VGV4dChvdXRwdXQpIHtcbiAgICBpZiAob3V0cHV0Lm91dHB1dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gKGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2Uob3V0cHV0Lm91dHB1dFtvdXRwdXQub3V0cHV0Lmxlbmd0aCAtIDFdKSB8fCAnJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXNzYWdlcy5tanMubWFwIiwiaW1wb3J0IHsgVG9vbElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIFRvb2xPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuZnVuY3Rpb24gbm9ybWFsaXplQmVoYXZpb3Iob3V0cHV0KSB7XG4gICAgcmV0dXJuIG91dHB1dC5iZWhhdmlvciA/PyB7IHR5cGU6ICdhbGxvdycgfTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5Ub29sSW5wdXRHdWFyZHJhaWxzKHsgZ3VhcmRyYWlscywgY29udGV4dCwgYWdlbnQsIHRvb2xDYWxsLCBvblJlc3VsdCwgfSkge1xuICAgIGNvbnN0IGxpc3QgPSBndWFyZHJhaWxzID8/IFtdO1xuICAgIGZvciAoY29uc3QgZ3VhcmRyYWlsIG9mIGxpc3QpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgZ3VhcmRyYWlsLnJ1bih7XG4gICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgYWdlbnQsXG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJlaGF2aW9yID0gbm9ybWFsaXplQmVoYXZpb3Iob3V0cHV0KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IHR5cGU6ICd0b29sX2lucHV0JywgbmFtZTogZ3VhcmRyYWlsLm5hbWUgfSxcbiAgICAgICAgICAgIG91dHB1dDogeyAuLi5vdXRwdXQsIGJlaGF2aW9yIH0sXG4gICAgICAgIH07XG4gICAgICAgIG9uUmVzdWx0Py4ocmVzdWx0KTtcbiAgICAgICAgaWYgKGJlaGF2aW9yLnR5cGUgPT09ICdyZWplY3RDb250ZW50Jykge1xuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ3JlamVjdCcsIG1lc3NhZ2U6IGJlaGF2aW9yLm1lc3NhZ2UgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmVoYXZpb3IudHlwZSA9PT0gJ3Rocm93RXhjZXB0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFRvb2xJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKGBUb29sIGlucHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7Z3VhcmRyYWlsLm5hbWV9YCwgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiAnYWxsb3cnIH07XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuVG9vbE91dHB1dEd1YXJkcmFpbHMoeyBndWFyZHJhaWxzLCBjb250ZXh0LCBhZ2VudCwgdG9vbENhbGwsIHRvb2xPdXRwdXQsIG9uUmVzdWx0LCB9KSB7XG4gICAgY29uc3QgbGlzdCA9IGd1YXJkcmFpbHMgPz8gW107XG4gICAgbGV0IGZpbmFsT3V0cHV0ID0gdG9vbE91dHB1dDtcbiAgICBmb3IgKGNvbnN0IGd1YXJkcmFpbCBvZiBsaXN0KSB7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IGd1YXJkcmFpbC5ydW4oe1xuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIGFnZW50LFxuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICBvdXRwdXQ6IHRvb2xPdXRwdXQsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBiZWhhdmlvciA9IG5vcm1hbGl6ZUJlaGF2aW9yKG91dHB1dCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIGd1YXJkcmFpbDogeyB0eXBlOiAndG9vbF9vdXRwdXQnLCBuYW1lOiBndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgb3V0cHV0OiB7IC4uLm91dHB1dCwgYmVoYXZpb3IgfSxcbiAgICAgICAgfTtcbiAgICAgICAgb25SZXN1bHQ/LihyZXN1bHQpO1xuICAgICAgICBpZiAoYmVoYXZpb3IudHlwZSA9PT0gJ3JlamVjdENvbnRlbnQnKSB7XG4gICAgICAgICAgICBmaW5hbE91dHB1dCA9IGJlaGF2aW9yLm1lc3NhZ2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmVoYXZpb3IudHlwZSA9PT0gJ3Rocm93RXhjZXB0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFRvb2xPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgVG9vbCBvdXRwdXQgZ3VhcmRyYWlsIHRyaWdnZXJlZDogJHtndWFyZHJhaWwubmFtZX1gLCByZXN1bHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmaW5hbE91dHB1dDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2xHdWFyZHJhaWxzLm1qcy5tYXAiLCJpbXBvcnQgeyBjb25zdW1lQWdlbnRUb29sUnVuUmVzdWx0LCB9IGZyb20gXCIuLi9hZ2VudC5tanNcIjtcbmltcG9ydCB7IFRvb2xDYWxsRXJyb3IsIFVzZXJFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBnZXRUcmFuc2Zlck1lc3NhZ2UgfSBmcm9tIFwiLi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCB7IFJ1bkhhbmRvZmZPdXRwdXRJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0sIH0gZnJvbSBcIi4uL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgcmVzb2x2ZUNvbXB1dGVyIH0gZnJvbSBcIi4uL3Rvb2wubWpzXCI7XG5pbXBvcnQgeyBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQgfSBmcm9tIFwiLi4vdXRpbHMvYmFzZTY0Lm1qc1wiO1xuaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuLi91dGlscy9zbWFydFN0cmluZy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgd2l0aEZ1bmN0aW9uU3Bhbiwgd2l0aEhhbmRvZmZTcGFuIH0gZnJvbSBcIi4uL3RyYWNpbmcvY3JlYXRlU3BhbnMubWpzXCI7XG5pbXBvcnQgeyBydW5Ub29sSW5wdXRHdWFyZHJhaWxzLCBydW5Ub29sT3V0cHV0R3VhcmRyYWlscywgfSBmcm9tIFwiLi4vdXRpbHMvdG9vbEd1YXJkcmFpbHMubWpzXCI7XG5pbXBvcnQgeyBTaW5nbGVTdGVwUmVzdWx0IH0gZnJvbSBcIi4vc3RlcHMubWpzXCI7XG5jb25zdCBUT09MX0FQUFJPVkFMX1JFSkVDVElPTl9NRVNTQUdFID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbi8qKlxuICogQGludGVybmFsXG4gKiBOb3JtYWxpemVzIHRvb2wgb3V0cHV0cyBvbmNlIHNvIGRvd25zdHJlYW0gY29kZSB3b3JrcyB3aXRoIGZ1bGx5IHN0cnVjdHVyZWQgcHJvdG9jb2wgaXRlbXMuXG4gKiBEb2luZyB0aGlzIGhlcmUga2VlcHMgQVBJIHN1cmZhY2Ugc3RhYmxlIGV2ZW4gd2hlbiBwcm92aWRlcnMgYWRkIG5ldyBzaGFwZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb29sQ2FsbE91dHB1dEl0ZW0odG9vbENhbGwsIG91dHB1dCkge1xuICAgIGNvbnN0IG1heWJlU3RydWN0dXJlZE91dHB1dHMgPSBub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dHMob3V0cHV0KTtcbiAgICBpZiAobWF5YmVTdHJ1Y3R1cmVkT3V0cHV0cykge1xuICAgICAgICBjb25zdCBzdHJ1Y3R1cmVkSXRlbXMgPSBtYXliZVN0cnVjdHVyZWRPdXRwdXRzLm1hcChjb252ZXJ0U3RydWN0dXJlZFRvb2xPdXRwdXRUb0lucHV0SXRlbSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbF9yZXN1bHQnLFxuICAgICAgICAgICAgbmFtZTogdG9vbENhbGwubmFtZSxcbiAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgIG91dHB1dDogc3RydWN0dXJlZEl0ZW1zLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbF9yZXN1bHQnLFxuICAgICAgICBuYW1lOiB0b29sQ2FsbC5uYW1lLFxuICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB0ZXh0OiB0b1NtYXJ0U3RyaW5nKG91dHB1dCksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBSdW5zIGV2ZXJ5IGZ1bmN0aW9uIHRvb2wgY2FsbCByZXF1ZXN0ZWQgYnkgdGhlIG1vZGVsIGFuZCByZXR1cm5zIHRoZWlyIG91dHB1dHMgYWxvbmdzaWRlXG4gKiB0aGUgYFJ1bkl0ZW1gIGluc3RhbmNlcyB0aGF0IHNob3VsZCBiZSBhcHBlbmRlZCB0byBoaXN0b3J5LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUZ1bmN0aW9uVG9vbENhbGxzKGFnZW50LCB0b29sUnVucywgcnVubmVyLCBzdGF0ZSkge1xuICAgIGNvbnN0IGRlcHMgPSB7IGFnZW50LCBydW5uZXIsIHN0YXRlIH07XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHRvb2xSdW5zLm1hcChhc3luYyAodG9vbFJ1bikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VSZXN1bHQgPSBwYXJzZVRvb2xBcmd1bWVudHModG9vbFJ1bik7XG4gICAgICAgICAgICAvLyBIYW5kbGUgcGFyc2UgZXJyb3JzIGdyYWNlZnVsbHkgaW5zdGVhZCBvZiBjcmFzaGluZ1xuICAgICAgICAgICAgaWYgKCFwYXJzZVJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkUGFyc2VFcnJvclJlc3VsdChkZXBzLCB0b29sUnVuLCBwYXJzZVJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbE91dGNvbWUgPSBhd2FpdCBoYW5kbGVGdW5jdGlvbkFwcHJvdmFsKGRlcHMsIHRvb2xSdW4sIHBhcnNlUmVzdWx0LmFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFwcHJvdmFsT3V0Y29tZSAhPT0gJ2FwcHJvdmVkJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcHByb3ZhbE91dGNvbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVuQXBwcm92ZWRGdW5jdGlvblRvb2woZGVwcywgdG9vbFJ1bik7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBUb29sQ2FsbEVycm9yKGBGYWlsZWQgdG8gcnVuIGZ1bmN0aW9uIHRvb2xzOiAke2V9YCwgZSwgc3RhdGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHBhcnNlVG9vbEFyZ3VtZW50cyh0b29sUnVuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB0b29sUnVuLnRvb2xDYWxsLmFyZ3VtZW50cztcbiAgICAgICAgaWYgKHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodG9vbFJ1bi50b29sLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IEpTT04ucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgYXJnczogcGFyc2VkQXJncyB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBGYWlsZWQgdG8gcGFyc2UgdG9vbCBhcmd1bWVudHMgZm9yICR7dG9vbFJ1bi50b29sLm5hbWV9OiAke2Vycm9yfWApO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yIH07XG4gICAgfVxufVxuZnVuY3Rpb24gYnVpbGRBcHByb3ZhbFJlcXVlc3RSZXN1bHQoZGVwcywgdG9vbFJ1bikge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbl9hcHByb3ZhbCcsXG4gICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0odG9vbFJ1bi50b29sQ2FsbCwgZGVwcy5hZ2VudCksXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGJ1aWxkUGFyc2VFcnJvclJlc3VsdChkZXBzLCB0b29sUnVuLCBlcnJvcikge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBwYXJzaW5nIHRvb2wgYXJndW1lbnRzLiBQbGVhc2UgdHJ5IGFnYWluIHdpdGggdmFsaWQgSlNPTi4gRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbl9vdXRwdXQnLFxuICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgIG91dHB1dDogZXJyb3JNZXNzYWdlLFxuICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbSh0b29sUnVuLnRvb2xDYWxsLCBlcnJvck1lc3NhZ2UpLCBkZXBzLmFnZW50LCBlcnJvck1lc3NhZ2UpLFxuICAgIH07XG59XG5hc3luYyBmdW5jdGlvbiBidWlsZEFwcHJvdmFsUmVqZWN0aW9uUmVzdWx0KGRlcHMsIHRvb2xSdW4pIHtcbiAgICBjb25zdCB7IGFnZW50IH0gPSBkZXBzO1xuICAgIHJldHVybiB3aXRoRnVuY3Rpb25TcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbiAgICAgICAgc3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICB0b29sX25hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGVycm9yOiBgVG9vbCBleGVjdXRpb24gZm9yICR7dG9vbFJ1bi50b29sQ2FsbC5jYWxsSWR9IHdhcyBtYW51YWxseSByZWplY3RlZCBieSB1c2VyLmAsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgc3Bhbi5zcGFuRGF0YS5vdXRwdXQgPSByZXNwb25zZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9vdXRwdXQnLFxuICAgICAgICAgICAgdG9vbDogdG9vbFJ1bi50b29sLFxuICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZSxcbiAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xSdW4udG9vbENhbGwsIHJlc3BvbnNlKSwgYWdlbnQsIHJlc3BvbnNlKSxcbiAgICAgICAgfTtcbiAgICB9LCB7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIG5hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICB9LFxuICAgIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlRnVuY3Rpb25BcHByb3ZhbChkZXBzLCB0b29sUnVuLCBwYXJzZWRBcmdzKSB7XG4gICAgY29uc3QgeyBzdGF0ZSB9ID0gZGVwcztcbiAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gYXdhaXQgdG9vbFJ1bi50b29sLm5lZWRzQXBwcm92YWwoc3RhdGUuX2NvbnRleHQsIHBhcnNlZEFyZ3MsIHRvb2xSdW4udG9vbENhbGwuY2FsbElkKTtcbiAgICBpZiAoIW5lZWRzQXBwcm92YWwpIHtcbiAgICAgICAgcmV0dXJuICdhcHByb3ZlZCc7XG4gICAgfVxuICAgIGNvbnN0IGFwcHJvdmFsID0gc3RhdGUuX2NvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICB0b29sTmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgIGNhbGxJZDogdG9vbFJ1bi50b29sQ2FsbC5jYWxsSWQsXG4gICAgfSk7XG4gICAgaWYgKGFwcHJvdmFsID09PSBmYWxzZSkge1xuICAgICAgICBzdGF0ZS5jbGVhclBlbmRpbmdBZ2VudFRvb2xSdW4odG9vbFJ1bi50b29sLm5hbWUsIHRvb2xSdW4udG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGJ1aWxkQXBwcm92YWxSZWplY3Rpb25SZXN1bHQoZGVwcywgdG9vbFJ1bik7XG4gICAgfVxuICAgIGlmIChhcHByb3ZhbCAhPT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gYnVpbGRBcHByb3ZhbFJlcXVlc3RSZXN1bHQoZGVwcywgdG9vbFJ1bik7XG4gICAgfVxuICAgIHJldHVybiAnYXBwcm92ZWQnO1xufVxuYXN5bmMgZnVuY3Rpb24gcnVuQXBwcm92ZWRGdW5jdGlvblRvb2woZGVwcywgdG9vbFJ1bikge1xuICAgIGNvbnN0IHsgYWdlbnQsIHJ1bm5lciwgc3RhdGUgfSA9IGRlcHM7XG4gICAgcmV0dXJuIHdpdGhGdW5jdGlvblNwYW4oYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgaWYgKHJ1bm5lci5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS5pbnB1dCA9IHRvb2xSdW4udG9vbENhbGwuYXJndW1lbnRzO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dEd1YXJkcmFpbFJlc3VsdCA9IGF3YWl0IHJ1blRvb2xJbnB1dEd1YXJkcmFpbHMoe1xuICAgICAgICAgICAgICAgIGd1YXJkcmFpbHM6IHRvb2xSdW4udG9vbC5pbnB1dEd1YXJkcmFpbHMsXG4gICAgICAgICAgICAgICAgY29udGV4dDogc3RhdGUuX2NvbnRleHQsXG4gICAgICAgICAgICAgICAgYWdlbnQsXG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgb25SZXN1bHQ6IChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuX3Rvb2xJbnB1dEd1YXJkcmFpbFJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVtaXRUb29sU3RhcnQocnVubmVyLCBzdGF0ZS5fY29udGV4dCwgYWdlbnQsIHRvb2xSdW4udG9vbCwgdG9vbFJ1bi50b29sQ2FsbCk7XG4gICAgICAgICAgICBsZXQgdG9vbE91dHB1dDtcbiAgICAgICAgICAgIGlmIChpbnB1dEd1YXJkcmFpbFJlc3VsdC50eXBlID09PSAncmVqZWN0Jykge1xuICAgICAgICAgICAgICAgIHRvb2xPdXRwdXQgPSBpbnB1dEd1YXJkcmFpbFJlc3VsdC5tZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdW1lU3RhdGUgPSBzdGF0ZS5nZXRQZW5kaW5nQWdlbnRUb29sUnVuKHRvb2xSdW4udG9vbC5uYW1lLCB0b29sUnVuLnRvb2xDYWxsLmNhbGxJZCk7XG4gICAgICAgICAgICAgICAgdG9vbE91dHB1dCA9IGF3YWl0IHRvb2xSdW4udG9vbC5pbnZva2Uoc3RhdGUuX2NvbnRleHQsIHRvb2xSdW4udG9vbENhbGwuYXJndW1lbnRzLCB7IHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsLCByZXN1bWVTdGF0ZSB9KTtcbiAgICAgICAgICAgICAgICB0b29sT3V0cHV0ID0gYXdhaXQgcnVuVG9vbE91dHB1dEd1YXJkcmFpbHMoe1xuICAgICAgICAgICAgICAgICAgICBndWFyZHJhaWxzOiB0b29sUnVuLnRvb2wub3V0cHV0R3VhcmRyYWlscyxcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dDogc3RhdGUuX2NvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIGFnZW50LFxuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbDogdG9vbFJ1bi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICAgICAgdG9vbE91dHB1dCxcbiAgICAgICAgICAgICAgICAgICAgb25SZXN1bHQ6IChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl90b29sT3V0cHV0R3VhcmRyYWlsUmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHRvb2xPdXRwdXQpO1xuICAgICAgICAgICAgZW1pdFRvb2xFbmQocnVubmVyLCBzdGF0ZS5fY29udGV4dCwgYWdlbnQsIHRvb2xSdW4udG9vbCwgc3RyaW5nUmVzdWx0LCB0b29sUnVuLnRvb2xDYWxsKTtcbiAgICAgICAgICAgIGlmIChydW5uZXIuY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLm91dHB1dCA9IHN0cmluZ1Jlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uUmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9vdXRwdXQnLFxuICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHRvb2xPdXRwdXQsXG4gICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShnZXRUb29sQ2FsbE91dHB1dEl0ZW0odG9vbFJ1bi50b29sQ2FsbCwgdG9vbE91dHB1dCksIGFnZW50LCB0b29sT3V0cHV0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBuZXN0ZWRSdW5SZXN1bHQgPSBjb25zdW1lQWdlbnRUb29sUnVuUmVzdWx0KHRvb2xSdW4udG9vbENhbGwpO1xuICAgICAgICAgICAgaWYgKG5lc3RlZFJ1blJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uUmVzdWx0LmFnZW50UnVuUmVzdWx0ID0gbmVzdGVkUnVuUmVzdWx0O1xuICAgICAgICAgICAgICAgIGNvbnN0IG5lc3RlZEludGVycnVwdGlvbnMgPSBuZXN0ZWRSdW5SZXN1bHQuaW50ZXJydXB0aW9ucztcbiAgICAgICAgICAgICAgICBpZiAobmVzdGVkSW50ZXJydXB0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uUmVzdWx0LmludGVycnVwdGlvbnMgPSBuZXN0ZWRJbnRlcnJ1cHRpb25zO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zZXRQZW5kaW5nQWdlbnRUb29sUnVuKHRvb2xSdW4udG9vbC5uYW1lLCB0b29sUnVuLnRvb2xDYWxsLmNhbGxJZCwgbmVzdGVkUnVuUmVzdWx0LnN0YXRlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY2xlYXJQZW5kaW5nQWdlbnRUb29sUnVuKHRvb2xSdW4udG9vbC5uYW1lLCB0b29sUnVuLnRvb2xDYWxsLmNhbGxJZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uUmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgc3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHJ1bm5pbmcgdG9vbCcsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBlcnJvclJlc3VsdCA9IFN0cmluZyhlcnJvcik7XG4gICAgICAgICAgICBlbWl0VG9vbEVuZChydW5uZXIsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgdG9vbFJ1bi50b29sLCBlcnJvclJlc3VsdCwgdG9vbFJ1bi50b29sQ2FsbCk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG4vLyBJbnRlcm5hbCBoZWxwZXI6IGRpc3BhdGNoIGEgY29tcHV0ZXIgYWN0aW9uIGFuZCByZXR1cm4gYSBzY3JlZW5zaG90IChzeW5jL2FzeW5jKVxuYXN5bmMgZnVuY3Rpb24gX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdChjb21wdXRlciwgdG9vbENhbGwpIHtcbiAgICBjb25zdCBhY3Rpb24gPSB0b29sQ2FsbC5hY3Rpb247XG4gICAgbGV0IHNjcmVlbnNob3Q7XG4gICAgLy8gRGlzcGF0Y2ggYmFzZWQgb24gYWN0aW9uIHR5cGUgc3RyaW5nIChhc3N1bWUgYWN0aW9uLnR5cGUgZXhpc3RzKVxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnY2xpY2snOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuY2xpY2soYWN0aW9uLngsIGFjdGlvbi55LCBhY3Rpb24uYnV0dG9uKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkb3VibGVfY2xpY2snOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuZG91YmxlQ2xpY2soYWN0aW9uLngsIGFjdGlvbi55KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkcmFnJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmRyYWcoYWN0aW9uLnBhdGgubWFwKChwKSA9PiBbcC54LCBwLnldKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAna2V5cHJlc3MnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIua2V5cHJlc3MoYWN0aW9uLmtleXMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21vdmUnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIubW92ZShhY3Rpb24ueCwgYWN0aW9uLnkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3NjcmVlbnNob3QnOlxuICAgICAgICAgICAgc2NyZWVuc2hvdCA9IGF3YWl0IGNvbXB1dGVyLnNjcmVlbnNob3QoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzY3JvbGwnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuc2Nyb2xsKGFjdGlvbi54LCBhY3Rpb24ueSwgYWN0aW9uLnNjcm9sbF94LCBhY3Rpb24uc2Nyb2xsX3kpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3R5cGUnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIudHlwZShhY3Rpb24udGV4dCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnd2FpdCc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci53YWl0KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGFjdGlvbjsgLy8gZW5zdXJlcyB0aGF0IHdlIGhhbmRsZSBldmVyeSBhY3Rpb24gd2Uga25vdyBvZlxuICAgICAgICAgICAgLy8gVW5rbm93biBhY3Rpb24sIGp1c3QgdGFrZSBzY3JlZW5zaG90XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzY3JlZW5zaG90ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gc2NyZWVuc2hvdDtcbiAgICB9XG4gICAgLy8gQWx3YXlzIHJldHVybiBzY3JlZW5zaG90IGFzIGJhc2U2NCBzdHJpbmdcbiAgICBpZiAodHlwZW9mIGNvbXB1dGVyLnNjcmVlbnNob3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgc2NyZWVuc2hvdCA9IGF3YWl0IGNvbXB1dGVyLnNjcmVlbnNob3QoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBzY3JlZW5zaG90ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHNjcmVlbnNob3Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDb21wdXRlciBkb2VzIG5vdCBpbXBsZW1lbnQgc2NyZWVuc2hvdCgpJyk7XG59XG5mdW5jdGlvbiB0b0Vycm9yTWVzc2FnZShlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHJldHVybiBlcnJvci5tZXNzYWdlIHx8IGVycm9yLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlcnJvcik7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyhlcnJvcik7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZVRvb2xBcHByb3ZhbChvcHRpb25zKSB7XG4gICAgY29uc3QgeyBydW5Db250ZXh0LCB0b29sTmFtZSwgY2FsbElkLCBhcHByb3ZhbEl0ZW0sIG5lZWRzQXBwcm92YWwsIG9uQXBwcm92YWwsIH0gPSBvcHRpb25zO1xuICAgIGlmICghbmVlZHNBcHByb3ZhbCkge1xuICAgICAgICByZXR1cm4gJ2FwcHJvdmVkJztcbiAgICB9XG4gICAgaWYgKG9uQXBwcm92YWwpIHtcbiAgICAgICAgY29uc3QgZGVjaXNpb24gPSBhd2FpdCBvbkFwcHJvdmFsKHJ1bkNvbnRleHQsIGFwcHJvdmFsSXRlbSk7XG4gICAgICAgIGlmIChkZWNpc2lvbi5hcHByb3ZlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBydW5Db250ZXh0LmFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVjaXNpb24uYXBwcm92ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJ1bkNvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFwcHJvdmFsID0gcnVuQ29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgIHRvb2xOYW1lLFxuICAgICAgICBjYWxsSWQsXG4gICAgfSk7XG4gICAgaWYgKGFwcHJvdmFsID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiAnYXBwcm92ZWQnO1xuICAgIH1cbiAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiAncmVqZWN0ZWQnO1xuICAgIH1cbiAgICByZXR1cm4gJ3BlbmRpbmcnO1xufVxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlVG9vbEFwcHJvdmFsRGVjaXNpb24ob3B0aW9ucykge1xuICAgIGNvbnN0IHsgcnVuQ29udGV4dCwgdG9vbE5hbWUsIGNhbGxJZCwgYXBwcm92YWxJdGVtLCBuZWVkc0FwcHJvdmFsLCBvbkFwcHJvdmFsLCBidWlsZFJlamVjdGlvbkl0ZW0sIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGFwcHJvdmFsU3RhdGUgPSBhd2FpdCByZXNvbHZlVG9vbEFwcHJvdmFsKHtcbiAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgdG9vbE5hbWUsXG4gICAgICAgIGNhbGxJZCxcbiAgICAgICAgYXBwcm92YWxJdGVtLFxuICAgICAgICBuZWVkc0FwcHJvdmFsLFxuICAgICAgICBvbkFwcHJvdmFsLFxuICAgIH0pO1xuICAgIGlmIChhcHByb3ZhbFN0YXRlID09PSAncmVqZWN0ZWQnKSB7XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogJ3JlamVjdGVkJywgaXRlbTogYnVpbGRSZWplY3Rpb25JdGVtKCkgfTtcbiAgICB9XG4gICAgaWYgKGFwcHJvdmFsU3RhdGUgPT09ICdwZW5kaW5nJykge1xuICAgICAgICByZXR1cm4geyBzdGF0dXM6ICdwZW5kaW5nJywgaXRlbTogYXBwcm92YWxJdGVtIH07XG4gICAgfVxuICAgIHJldHVybiB7IHN0YXR1czogJ2FwcHJvdmVkJyB9O1xufVxuZnVuY3Rpb24gZW1pdFRvb2xTdGFydChydW5uZXIsIHJ1bkNvbnRleHQsIGFnZW50LCB0b29sLCB0b29sQ2FsbCkge1xuICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgcnVuQ29udGV4dCwgYWdlbnQsIHRvb2wsIHsgdG9vbENhbGwgfSk7XG4gICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCB0b29sLCB7IHRvb2xDYWxsIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVtaXRUb29sRW5kKHJ1bm5lciwgcnVuQ29udGV4dCwgYWdlbnQsIHRvb2wsIG91dHB1dCwgdG9vbENhbGwpIHtcbiAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBydW5Db250ZXh0LCBhZ2VudCwgdG9vbCwgb3V0cHV0LCB7IHRvb2xDYWxsIH0pO1xuICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIHRvb2wsIG91dHB1dCwgeyB0b29sQ2FsbCB9KTtcbiAgICB9XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVNoZWxsQWN0aW9ucyhhZ2VudCwgYWN0aW9ucywgcnVubmVyLCBydW5Db250ZXh0LCBjdXN0b21Mb2dnZXIgPSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBfbG9nZ2VyID0gY3VzdG9tTG9nZ2VyID8/IGxvZ2dlcjtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgICBjb25zdCBzaGVsbFRvb2wgPSBhY3Rpb24uc2hlbGw7XG4gICAgICAgIGNvbnN0IHRvb2xDYWxsID0gYWN0aW9uLnRvb2xDYWxsO1xuICAgICAgICBjb25zdCBhcHByb3ZhbEl0ZW0gPSBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh0b29sQ2FsbCwgYWdlbnQsIHNoZWxsVG9vbC5uYW1lKTtcbiAgICAgICAgY29uc3QgYXBwcm92YWxEZWNpc2lvbiA9IGF3YWl0IGhhbmRsZVRvb2xBcHByb3ZhbERlY2lzaW9uKHtcbiAgICAgICAgICAgIHJ1bkNvbnRleHQsXG4gICAgICAgICAgICB0b29sTmFtZTogc2hlbGxUb29sLm5hbWUsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIGFwcHJvdmFsSXRlbSxcbiAgICAgICAgICAgIG5lZWRzQXBwcm92YWw6IGF3YWl0IHNoZWxsVG9vbC5uZWVkc0FwcHJvdmFsKHJ1bkNvbnRleHQsIHRvb2xDYWxsLmFjdGlvbiwgdG9vbENhbGwuY2FsbElkKSxcbiAgICAgICAgICAgIG9uQXBwcm92YWw6IHNoZWxsVG9vbC5vbkFwcHJvdmFsLFxuICAgICAgICAgICAgYnVpbGRSZWplY3Rpb25JdGVtOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBUT09MX0FQUFJPVkFMX1JFSkVDVElPTl9NRVNTQUdFO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlamVjdGlvbk91dHB1dCA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgc3RkZXJyOiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0Y29tZTogeyB0eXBlOiAnZXhpdCcsIGV4aXRDb2RlOiBudWxsIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzaGVsbF9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IFtyZWplY3Rpb25PdXRwdXRdLFxuICAgICAgICAgICAgICAgIH0sIGFnZW50LCByZXNwb25zZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFwcHJvdmFsRGVjaXNpb24uc3RhdHVzICE9PSAnYXBwcm92ZWQnKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYXBwcm92YWxEZWNpc2lvbi5pdGVtKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVtaXRUb29sU3RhcnQocnVubmVyLCBydW5Db250ZXh0LCBhZ2VudCwgc2hlbGxUb29sLCB0b29sQ2FsbCk7XG4gICAgICAgIGxldCBzaGVsbE91dHB1dHM7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyTWV0YSA9IHt9O1xuICAgICAgICBsZXQgbWF4T3V0cHV0TGVuZ3RoO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2hlbGxSZXN1bHQgPSBhd2FpdCBzaGVsbFRvb2wuc2hlbGwucnVuKHRvb2xDYWxsLmFjdGlvbik7XG4gICAgICAgICAgICBzaGVsbE91dHB1dHMgPSBzaGVsbFJlc3VsdC5vdXRwdXQgPz8gW107XG4gICAgICAgICAgICBpZiAoc2hlbGxSZXN1bHQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwcm92aWRlck1ldGEsIHNoZWxsUmVzdWx0LnByb3ZpZGVyRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHNoZWxsUmVzdWx0Lm1heE91dHB1dExlbmd0aCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBtYXhPdXRwdXRMZW5ndGggPSBzaGVsbFJlc3VsdC5tYXhPdXRwdXRMZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gdG9FcnJvck1lc3NhZ2UoZXJyKTtcbiAgICAgICAgICAgIHNoZWxsT3V0cHV0cyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0ZG91dDogJycsXG4gICAgICAgICAgICAgICAgICAgIHN0ZGVycjogZXJyb3JUZXh0LFxuICAgICAgICAgICAgICAgICAgICBvdXRjb21lOiB7IHR5cGU6ICdleGl0JywgZXhpdENvZGU6IG51bGwgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBleGVjdXRlIHNoZWxsIGFjdGlvbjonLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHNoZWxsT3V0cHV0cyA9IHNoZWxsT3V0cHV0cyA/PyBbXTtcbiAgICAgICAgZW1pdFRvb2xFbmQocnVubmVyLCBydW5Db250ZXh0LCBhZ2VudCwgc2hlbGxUb29sLCBKU09OLnN0cmluZ2lmeShzaGVsbE91dHB1dHMpLCB0b29sQ2FsbCk7XG4gICAgICAgIGNvbnN0IHJhd0l0ZW0gPSB7XG4gICAgICAgICAgICB0eXBlOiAnc2hlbGxfY2FsbF9vdXRwdXQnLFxuICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICBvdXRwdXQ6IHNoZWxsT3V0cHV0cyA/PyBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiBtYXhPdXRwdXRMZW5ndGggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByYXdJdGVtLm1heE91dHB1dExlbmd0aCA9IG1heE91dHB1dExlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoT2JqZWN0LmtleXMocHJvdmlkZXJNZXRhKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByYXdJdGVtLnByb3ZpZGVyRGF0YSA9IHByb3ZpZGVyTWV0YTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRzLnB1c2gobmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShyYXdJdGVtLCBhZ2VudCwgcmF3SXRlbS5vdXRwdXQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUFwcGx5UGF0Y2hPcGVyYXRpb25zKGFnZW50LCBhY3Rpb25zLCBydW5uZXIsIHJ1bkNvbnRleHQsIGN1c3RvbUxvZ2dlciA9IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IF9sb2dnZXIgPSBjdXN0b21Mb2dnZXIgPz8gbG9nZ2VyO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBhY3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IGFwcGx5UGF0Y2hUb29sID0gYWN0aW9uLmFwcGx5UGF0Y2g7XG4gICAgICAgIGNvbnN0IHRvb2xDYWxsID0gYWN0aW9uLnRvb2xDYWxsO1xuICAgICAgICBjb25zdCBhcHByb3ZhbEl0ZW0gPSBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh0b29sQ2FsbCwgYWdlbnQsIGFwcGx5UGF0Y2hUb29sLm5hbWUpO1xuICAgICAgICBjb25zdCBhcHByb3ZhbERlY2lzaW9uID0gYXdhaXQgaGFuZGxlVG9vbEFwcHJvdmFsRGVjaXNpb24oe1xuICAgICAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiBhcHBseVBhdGNoVG9vbC5uYW1lLFxuICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICBhcHByb3ZhbEl0ZW0sXG4gICAgICAgICAgICBuZWVkc0FwcHJvdmFsOiBhd2FpdCBhcHBseVBhdGNoVG9vbC5uZWVkc0FwcHJvdmFsKHJ1bkNvbnRleHQsIHRvb2xDYWxsLm9wZXJhdGlvbiwgdG9vbENhbGwuY2FsbElkKSxcbiAgICAgICAgICAgIG9uQXBwcm92YWw6IGFwcGx5UGF0Y2hUb29sLm9uQXBwcm92YWwsXG4gICAgICAgICAgICBidWlsZFJlamVjdGlvbkl0ZW06ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IFRPT0xfQVBQUk9WQUxfUkVKRUNUSU9OX01FU1NBR0U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYXBwbHlfcGF0Y2hfY2FsbF9vdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICB9LCBhZ2VudCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChhcHByb3ZhbERlY2lzaW9uLnN0YXR1cyAhPT0gJ2FwcHJvdmVkJykge1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGFwcHJvdmFsRGVjaXNpb24uaXRlbSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbWl0VG9vbFN0YXJ0KHJ1bm5lciwgcnVuQ29udGV4dCwgYWdlbnQsIGFwcGx5UGF0Y2hUb29sLCB0b29sQ2FsbCk7XG4gICAgICAgIGxldCBzdGF0dXMgPSAnY29tcGxldGVkJztcbiAgICAgICAgbGV0IG91dHB1dCA9ICcnO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgIHN3aXRjaCAodG9vbENhbGwub3BlcmF0aW9uLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdjcmVhdGVfZmlsZSc6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGFwcGx5UGF0Y2hUb29sLmVkaXRvci5jcmVhdGVGaWxlKHRvb2xDYWxsLm9wZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VwZGF0ZV9maWxlJzpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgYXBwbHlQYXRjaFRvb2wuZWRpdG9yLnVwZGF0ZUZpbGUodG9vbENhbGwub3BlcmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlX2ZpbGUnOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBhcHBseVBhdGNoVG9vbC5lZGl0b3IuZGVsZXRlRmlsZSh0b29sQ2FsbC5vcGVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGFwcGx5X3BhdGNoIG9wZXJhdGlvbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0LnN0YXR1cyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMgPSByZXN1bHQuc3RhdHVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0Lm91dHB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSByZXN1bHQub3V0cHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHN0YXR1cyA9ICdmYWlsZWQnO1xuICAgICAgICAgICAgb3V0cHV0ID0gdG9FcnJvck1lc3NhZ2UoZXJyKTtcbiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBleGVjdXRlIGFwcGx5X3BhdGNoIG9wZXJhdGlvbjonLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGVtaXRUb29sRW5kKHJ1bm5lciwgcnVuQ29udGV4dCwgYWdlbnQsIGFwcGx5UGF0Y2hUb29sLCBvdXRwdXQsIHRvb2xDYWxsKTtcbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdhcHBseV9wYXRjaF9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG91dHB1dCkge1xuICAgICAgICAgICAgcmF3SXRlbS5vdXRwdXQgPSBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0ocmF3SXRlbSwgYWdlbnQsIG91dHB1dCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBFeGVjdXRlcyBhbnkgY29tcHV0ZXItdXNlIGFjdGlvbnMgZW1pdHRlZCBieSB0aGUgbW9kZWwgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBpdGVtcyBzb1xuICogdGhlIHJ1biBoaXN0b3J5IHJlZmxlY3RzIHRoZSBjb21wdXRlciBzZXNzaW9uLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyhhZ2VudCwgYWN0aW9ucywgcnVubmVyLCBydW5Db250ZXh0LCBjdXN0b21Mb2dnZXIgPSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBfbG9nZ2VyID0gY3VzdG9tTG9nZ2VyID8/IGxvZ2dlcjtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgICBjb25zdCB0b29sQ2FsbCA9IGFjdGlvbi50b29sQ2FsbDtcbiAgICAgICAgLy8gSG9va3M6IG9uX3Rvb2xfc3RhcnQgKGdsb2JhbCArIGFnZW50KVxuICAgICAgICBlbWl0VG9vbFN0YXJ0KHJ1bm5lciwgcnVuQ29udGV4dCwgYWdlbnQsIGFjdGlvbi5jb21wdXRlciwgdG9vbENhbGwpO1xuICAgICAgICAvLyBSdW4gdGhlIGFjdGlvbiBhbmQgZ2V0IHNjcmVlbnNob3RcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyID0gYXdhaXQgcmVzb2x2ZUNvbXB1dGVyKHtcbiAgICAgICAgICAgICAgICB0b29sOiBhY3Rpb24uY29tcHV0ZXIsXG4gICAgICAgICAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgb3V0cHV0ID0gYXdhaXQgX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdChjb21wdXRlciwgdG9vbENhbGwpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBleGVjdXRlIGNvbXB1dGVyIGFjdGlvbjonLCBlcnIpO1xuICAgICAgICAgICAgb3V0cHV0ID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSG9va3M6IG9uX3Rvb2xfZW5kIChnbG9iYWwgKyBhZ2VudClcbiAgICAgICAgZW1pdFRvb2xFbmQocnVubmVyLCBydW5Db250ZXh0LCBhZ2VudCwgYWN0aW9uLmNvbXB1dGVyLCBvdXRwdXQsIHRvb2xDYWxsKTtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSBzY3JlZW5zaG90IGFzIGEgZGF0YSBVUkwgd2hlbiBhdmFpbGFibGU7IGZhbGwgYmFjayB0byBhbiBlbXB0eSBzdHJpbmcgb24gZmFpbHVyZXMuXG4gICAgICAgIGNvbnN0IGltYWdlVXJsID0gb3V0cHV0ID8gYGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwke291dHB1dH1gIDogJyc7XG4gICAgICAgIGNvbnN0IHJhd0l0ZW0gPSB7XG4gICAgICAgICAgICB0eXBlOiAnY29tcHV0ZXJfY2FsbF9yZXN1bHQnLFxuICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICBvdXRwdXQ6IHsgdHlwZTogJ2NvbXB1dGVyX3NjcmVlbnNob3QnLCBkYXRhOiBpbWFnZVVybCB9LFxuICAgICAgICB9O1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShyYXdJdGVtLCBhZ2VudCwgaW1hZ2VVcmwpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRHJpdmVzIGhhbmRvZmYgY2FsbHMgYnkgaW52b2tpbmcgdGhlIGRvd25zdHJlYW0gYWdlbnQgYW5kIGNhcHR1cmluZyBhbnkgZ2VuZXJhdGVkIGl0ZW1zIHNvXG4gKiB0aGUgY3VycmVudCBhZ2VudCBjYW4gY29udGludWUgd2l0aCB0aGUgbmV3IGNvbnRleHQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlSGFuZG9mZkNhbGxzKGFnZW50LCBvcmlnaW5hbElucHV0LCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgbmV3UmVzcG9uc2UsIHJ1bkhhbmRvZmZzLCBydW5uZXIsIHJ1bkNvbnRleHQpIHtcbiAgICBuZXdTdGVwSXRlbXMgPSBbLi4ubmV3U3RlcEl0ZW1zXTtcbiAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdJbmNvcnJlY3RseSBjYWxsZWQgZXhlY3V0ZUhhbmRvZmZDYWxscyB3aXRoIG5vIGhhbmRvZmZzLiBUaGlzIHNob3VsZCBub3QgaGFwcGVuLiBNb3Zpbmcgb24uJyk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdTdGVwSXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xuICAgIH1cbiAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyBtdWx0aXBsZSBoYW5kb2Zmcy4gSWdub3JpbmcgYWxsIGJ1dCB0aGUgZmlyc3Qgb25lIGJ5IGFkZGluZyByZWplY3QgcmVzcG9uc2VzIGZvciB0aG9zZVxuICAgICAgICBjb25zdCBvdXRwdXRNZXNzYWdlID0gJ011bHRpcGxlIGhhbmRvZmZzIGRldGVjdGVkLCBpZ25vcmluZyB0aGlzIG9uZS4nO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJ1bkhhbmRvZmZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbShydW5IYW5kb2Zmc1tpXS50b29sQ2FsbCwgb3V0cHV0TWVzc2FnZSksIGFnZW50LCBvdXRwdXRNZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWN0dWFsSGFuZG9mZiA9IHJ1bkhhbmRvZmZzWzBdO1xuICAgIHJldHVybiB3aXRoSGFuZG9mZlNwYW4oYXN5bmMgKGhhbmRvZmZTcGFuKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRvZmYgPSBhY3R1YWxIYW5kb2ZmLmhhbmRvZmY7XG4gICAgICAgIGNvbnN0IG5ld0FnZW50ID0gYXdhaXQgaGFuZG9mZi5vbkludm9rZUhhbmRvZmYocnVuQ29udGV4dCwgYWN0dWFsSGFuZG9mZi50b29sQ2FsbC5hcmd1bWVudHMpO1xuICAgICAgICBoYW5kb2ZmU3Bhbi5zcGFuRGF0YS50b19hZ2VudCA9IG5ld0FnZW50Lm5hbWU7XG4gICAgICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ZWRBZ2VudHMgPSBydW5IYW5kb2Zmcy5tYXAoKGgpID0+IGguaGFuZG9mZi5hZ2VudE5hbWUpO1xuICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNdWx0aXBsZSBoYW5kb2ZmcyByZXF1ZXN0ZWQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkX2FnZW50czogcmVxdWVzdGVkQWdlbnRzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuSGFuZG9mZk91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKGFjdHVhbEhhbmRvZmYudG9vbENhbGwsIGdldFRyYW5zZmVyTWVzc2FnZShuZXdBZ2VudCkpLCBhZ2VudCwgbmV3QWdlbnQpKTtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCBydW5Db250ZXh0LCBhZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgcnVuQ29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICBjb25zdCBpbnB1dEZpbHRlciA9IGhhbmRvZmYuaW5wdXRGaWx0ZXIgPz8gcnVubmVyLmNvbmZpZy5oYW5kb2ZmSW5wdXRGaWx0ZXI7XG4gICAgICAgIGlmIChpbnB1dEZpbHRlcikge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdGaWx0ZXJpbmcgaW5wdXRzIGZvciBoYW5kb2ZmJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0RmlsdGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dCBmaWx0ZXInLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiAnbm90IGNhbGxhYmxlJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZJbnB1dERhdGEgPSB7XG4gICAgICAgICAgICAgICAgaW5wdXRIaXN0b3J5OiBBcnJheS5pc0FycmF5KG9yaWdpbmFsSW5wdXQpXG4gICAgICAgICAgICAgICAgICAgID8gWy4uLm9yaWdpbmFsSW5wdXRdXG4gICAgICAgICAgICAgICAgICAgIDogb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICBwcmVIYW5kb2ZmSXRlbXM6IFsuLi5wcmVTdGVwSXRlbXNdLFxuICAgICAgICAgICAgICAgIG5ld0l0ZW1zOiBbLi4ubmV3U3RlcEl0ZW1zXSxcbiAgICAgICAgICAgICAgICBydW5Db250ZXh0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gaW5wdXRGaWx0ZXIoaGFuZG9mZklucHV0RGF0YSk7XG4gICAgICAgICAgICBvcmlnaW5hbElucHV0ID0gZmlsdGVyZWQuaW5wdXRIaXN0b3J5O1xuICAgICAgICAgICAgcHJlU3RlcEl0ZW1zID0gZmlsdGVyZWQucHJlSGFuZG9mZkl0ZW1zO1xuICAgICAgICAgICAgbmV3U3RlcEl0ZW1zID0gZmlsdGVyZWQubmV3SXRlbXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX2hhbmRvZmYnLCBuZXdBZ2VudCB9KTtcbiAgICB9LCB7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGZyb21fYWdlbnQ6IGFnZW50Lm5hbWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5jb25zdCBOT1RfRklOQUxfT1VUUFVUID0ge1xuICAgIGlzRmluYWxPdXRwdXQ6IGZhbHNlLFxuICAgIGlzSW50ZXJydXB0ZWQ6IHVuZGVmaW5lZCxcbn07XG4vKipcbiAqIENvbGxlY3RzIGFwcHJvdmFsIGludGVycnVwdGlvbnMgZnJvbSB0b29sIGV4ZWN1dGlvbiByZXN1bHRzIGFuZCBhbnkgYWRkaXRpb25hbFxuICogUnVuSXRlbXMgKGUuZy4sIHNoZWxsL2FwcGx5X3BhdGNoIGFwcHJvdmFsIHBsYWNlaG9sZGVycykuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb2xsZWN0SW50ZXJydXB0aW9ucyh0b29sUmVzdWx0cywgYWRkaXRpb25hbEl0ZW1zID0gW10pIHtcbiAgICBjb25zdCBpbnRlcnJ1cHRpb25zID0gW107XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGFkZGl0aW9uYWxJdGVtcykge1xuICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pIHtcbiAgICAgICAgICAgIGludGVycnVwdGlvbnMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiB0b29sUmVzdWx0cykge1xuICAgICAgICBpZiAocmVzdWx0LnJ1bkl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKSB7XG4gICAgICAgICAgICBpbnRlcnJ1cHRpb25zLnB1c2gocmVzdWx0LnJ1bkl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQudHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdC5pbnRlcnJ1cHRpb25zKSkge1xuICAgICAgICAgICAgICAgIGludGVycnVwdGlvbnMucHVzaCguLi5yZXN1bHQuaW50ZXJydXB0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuYWdlbnRSdW5SZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXN0ZWRJbnRlcnJ1cHRpb25zID0gcmVzdWx0LmFnZW50UnVuUmVzdWx0LmludGVycnVwdGlvbnM7XG4gICAgICAgICAgICAgICAgaWYgKG5lc3RlZEludGVycnVwdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpbnRlcnJ1cHRpb25zLnB1c2goLi4ubmVzdGVkSW50ZXJydXB0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbnRlcnJ1cHRpb25zO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIERldGVybWluZXMgd2hldGhlciB0b29sIGV4ZWN1dGlvbnMgcHJvZHVjZWQgYSBmaW5hbCBhZ2VudCBvdXRwdXQsIHRyaWdnZXJlZCBhbiBpbnRlcnJ1cHRpb24sXG4gKiBvciB3aGV0aGVyIHRoZSBhZ2VudCBsb29wIHNob3VsZCBjb250aW51ZSBjb2xsZWN0aW5nIG1vcmUgcmVzcG9uc2VzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyhhZ2VudCwgdG9vbFJlc3VsdHMsIHN0YXRlLCBhZGRpdGlvbmFsSW50ZXJydXB0aW9ucyA9IFtdKSB7XG4gICAgaWYgKHRvb2xSZXN1bHRzLmxlbmd0aCA9PT0gMCAmJiBhZGRpdGlvbmFsSW50ZXJydXB0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGNvbnN0IGludGVycnVwdGlvbnMgPSBjb2xsZWN0SW50ZXJydXB0aW9ucyh0b29sUmVzdWx0cywgYWRkaXRpb25hbEludGVycnVwdGlvbnMpO1xuICAgIGlmIChpbnRlcnJ1cHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGludGVycnVwdGlvbnMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChhZ2VudC50b29sVXNlQmVoYXZpb3IgPT09ICdydW5fbGxtX2FnYWluJykge1xuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgY29uc3QgZmlyc3RUb29sUmVzdWx0ID0gdG9vbFJlc3VsdHNbMF07XG4gICAgaWYgKGFnZW50LnRvb2xVc2VCZWhhdmlvciA9PT0gJ3N0b3Bfb25fZmlyc3RfdG9vbCcpIHtcbiAgICAgICAgaWYgKGZpcnN0VG9vbFJlc3VsdD8udHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ091dHB1dCA9IHRvU21hcnRTdHJpbmcoZmlyc3RUb29sUmVzdWx0Lm91dHB1dCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0OiBzdHJpbmdPdXRwdXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBjb25zdCB0b29sVXNlQmVoYXZpb3IgPSBhZ2VudC50b29sVXNlQmVoYXZpb3I7XG4gICAgaWYgKHR5cGVvZiB0b29sVXNlQmVoYXZpb3IgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnN0IHN0b3BwaW5nVG9vbCA9IHRvb2xSZXN1bHRzLmZpbmQoKHIpID0+IHRvb2xVc2VCZWhhdmlvci5zdG9wQXRUb29sTmFtZXMuaW5jbHVkZXMoci50b29sLm5hbWUpKTtcbiAgICAgICAgaWYgKHN0b3BwaW5nVG9vbD8udHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ091dHB1dCA9IHRvU21hcnRTdHJpbmcoc3RvcHBpbmdUb29sLm91dHB1dCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0OiBzdHJpbmdPdXRwdXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRvb2xVc2VCZWhhdmlvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdG9vbFVzZUJlaGF2aW9yKHN0YXRlLl9jb250ZXh0LCB0b29sUmVzdWx0cyk7XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEludmFsaWQgdG9vbFVzZUJlaGF2aW9yOiAke3Rvb2xVc2VCZWhhdmlvcn1gLCBzdGF0ZSk7XG59XG4vKipcbiAqIEFjY2VwdHMgd2hhdGV2ZXIgdGhlIHRvb2wgcmV0dXJuZWQgYW5kIGF0dGVtcHRzIHRvIGNvZXJjZSBpdCBpbnRvIHRoZSBzdHJ1Y3R1cmVkIHByb3RvY29sXG4gKiBzaGFwZXMgd2UgZXhwb3NlIHRvIGRvd25zdHJlYW0gbW9kZWwgYWRhcHRlcnMgKGlucHV0X3RleHQvaW5wdXRfaW1hZ2UvaW5wdXRfZmlsZSkuIFRvb2xzIGFyZVxuICogYWxsb3dlZCB0byByZXR1cm4gZWl0aGVyIGEgc2luZ2xlIHN0cnVjdHVyZWQgb2JqZWN0IG9yIGFuIGFycmF5IG9mIHRoZW07IGFueXRoaW5nIGVsc2UgZmFsbHNcbiAqIGJhY2sgdG8gdGhlIGxlZ2FjeSBzdHJpbmcgcGlwZWxpbmUuXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0cyhvdXRwdXQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvdXRwdXQpKSB7XG4gICAgICAgIGNvbnN0IHN0cnVjdHVyZWQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG91dHB1dCkge1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0KGl0ZW0pO1xuICAgICAgICAgICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHJ1Y3R1cmVkLnB1c2gobm9ybWFsaXplZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cnVjdHVyZWQ7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dChvdXRwdXQpO1xuICAgIHJldHVybiBub3JtYWxpemVkID8gW25vcm1hbGl6ZWRdIDogbnVsbDtcbn1cbi8qKlxuICogQmVzdC1lZmZvcnQgbm9ybWFsaXphdGlvbiBvZiBhIHNpbmdsZSB0b29sIG91dHB1dCBpdGVtLiBJZiB0aGUgb2JqZWN0IGFscmVhZHkgbWF0Y2hlcyB0aGVcbiAqIHByb3RvY29sIHNoYXBlIHdlIHNpbXBseSBjYXN0IGl0OyBvdGhlcndpc2Ugd2UgY29weSB0aGUgcmVjb2duaXNlZCBmaWVsZHMgaW50byB0aGUgY2Fub25pY2FsXG4gKiBzdHJ1Y3R1cmUuIFJldHVybmluZyBudWxsIGxldHMgdGhlIGNhbGxlciBrbm93IHdlIHNob3VsZCByZXZlcnQgdG8gcGxhaW4tc3RyaW5nIGhhbmRsaW5nLlxuICovXG5mdW5jdGlvbiBub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dCh2YWx1ZSkge1xuICAgIGlmICghaXNSZWNvcmQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB0eXBlID0gdmFsdWUudHlwZTtcbiAgICBpZiAodHlwZSA9PT0gJ3RleHQnICYmIHR5cGVvZiB2YWx1ZS50ZXh0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7IHR5cGU6ICd0ZXh0JywgdGV4dDogdmFsdWUudGV4dCB9O1xuICAgICAgICBpZiAoaXNSZWNvcmQodmFsdWUucHJvdmlkZXJEYXRhKSkge1xuICAgICAgICAgICAgb3V0cHV0LnByb3ZpZGVyRGF0YSA9IHZhbHVlLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gJ2ltYWdlJykge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7IHR5cGU6ICdpbWFnZScgfTtcbiAgICAgICAgbGV0IGltYWdlU3RyaW5nO1xuICAgICAgICBsZXQgaW1hZ2VGaWxlSWQ7XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUgPSBpc05vbkVtcHR5U3RyaW5nKHZhbHVlLm1lZGlhVHlwZSlcbiAgICAgICAgICAgID8gdmFsdWUubWVkaWFUeXBlXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgaW1hZ2VGaWVsZCA9IHZhbHVlLmltYWdlO1xuICAgICAgICBpZiAodHlwZW9mIGltYWdlRmllbGQgPT09ICdzdHJpbmcnICYmIGltYWdlRmllbGQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSBpbWFnZUZpZWxkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUmVjb3JkKGltYWdlRmllbGQpKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZU9iaiA9IGltYWdlRmllbGQ7XG4gICAgICAgICAgICBjb25zdCBpbmxpbmVNZWRpYVR5cGUgPSBpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLm1lZGlhVHlwZSlcbiAgICAgICAgICAgICAgICA/IGltYWdlT2JqLm1lZGlhVHlwZVxuICAgICAgICAgICAgICAgIDogZmFsbGJhY2tJbWFnZU1lZGlhVHlwZTtcbiAgICAgICAgICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLnVybCkpIHtcbiAgICAgICAgICAgICAgICBpbWFnZVN0cmluZyA9IGltYWdlT2JqLnVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBpbWFnZVN0cmluZyA9IHRvSW5saW5lSW1hZ2VTdHJpbmcoaW1hZ2VPYmouZGF0YSwgaW5saW5lTWVkaWFUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGltYWdlT2JqLmRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmXG4gICAgICAgICAgICAgICAgaW1hZ2VPYmouZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSB0b0lubGluZUltYWdlU3RyaW5nKGltYWdlT2JqLmRhdGEsIGlubGluZU1lZGlhVHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWltYWdlU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlSWQgPSAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5maWxlSWQpICYmIGltYWdlT2JqLmZpbGVJZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouaWQpICYmIGltYWdlT2JqLmlkKSB8fFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlRmlsZUlkID0gY2FuZGlkYXRlSWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaW1hZ2VTdHJpbmcgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZS5pbWFnZVVybCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHZhbHVlLmltYWdlVXJsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGltYWdlU3RyaW5nID0gdmFsdWUuaW1hZ2VVcmw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbWFnZUZpbGVJZCAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlLmZpbGVJZCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHZhbHVlLmZpbGVJZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbWFnZUZpbGVJZCA9IHZhbHVlLmZpbGVJZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWltYWdlU3RyaW5nICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUuZGF0YSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHZhbHVlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSBmYWxsYmFja0ltYWdlTWVkaWFUeXBlXG4gICAgICAgICAgICAgICAgPyB0b0lubGluZUltYWdlU3RyaW5nKHZhbHVlLmRhdGEsIGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUpXG4gICAgICAgICAgICAgICAgOiB2YWx1ZS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFpbWFnZVN0cmluZyAmJlxuICAgICAgICAgICAgdmFsdWUuZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiZcbiAgICAgICAgICAgIHZhbHVlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSB0b0lubGluZUltYWdlU3RyaW5nKHZhbHVlLmRhdGEsIGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUuZGV0YWlsID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5kZXRhaWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgb3V0cHV0LmRldGFpbCA9IHZhbHVlLmRldGFpbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW1hZ2VTdHJpbmcpIHtcbiAgICAgICAgICAgIG91dHB1dC5pbWFnZSA9IGltYWdlU3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGltYWdlRmlsZUlkKSB7XG4gICAgICAgICAgICBvdXRwdXQuaW1hZ2UgPSB7IGZpbGVJZDogaW1hZ2VGaWxlSWQgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlY29yZCh2YWx1ZS5wcm92aWRlckRhdGEpKSB7XG4gICAgICAgICAgICBvdXRwdXQucHJvdmlkZXJEYXRhID0gdmFsdWUucHJvdmlkZXJEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSAnZmlsZScpIHtcbiAgICAgICAgY29uc3QgZmlsZVZhbHVlID0gbm9ybWFsaXplRmlsZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgaWYgKCFmaWxlVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHsgdHlwZTogJ2ZpbGUnLCBmaWxlOiBmaWxlVmFsdWUgfTtcbiAgICAgICAgaWYgKGlzUmVjb3JkKHZhbHVlLnByb3ZpZGVyRGF0YSkpIHtcbiAgICAgICAgICAgIG91dHB1dC5wcm92aWRlckRhdGEgPSB2YWx1ZS5wcm92aWRlckRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRyYW5zbGF0ZXMgdGhlIG5vcm1hbGl6ZWQgdG9vbCBvdXRwdXQgaW50byB0aGUgcHJvdG9jb2wgYGlucHV0XypgIGl0ZW1zLiBUaGlzIGlzIHRoZSBsYXN0IGhvcFxuICogYmVmb3JlIHdlIGhhbmQgdGhlIGRhdGEgdG8gbW9kZWwtc3BlY2lmaWMgYWRhcHRlcnMsIHNvIHdlIGdlbmVyYXRlIHRoZSBleGFjdCBzY2hlbWEgZXhwZWN0ZWQgYnlcbiAqIHRoZSBwcm90b2NvbCBkZWZpbml0aW9ucy5cbiAqL1xuZnVuY3Rpb24gY29udmVydFN0cnVjdHVyZWRUb29sT3V0cHV0VG9JbnB1dEl0ZW0ob3V0cHV0KSB7XG4gICAgaWYgKG91dHB1dC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgdHlwZTogJ2lucHV0X3RleHQnLFxuICAgICAgICAgICAgdGV4dDogb3V0cHV0LnRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICByZXN1bHQucHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdpbWFnZScpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyB0eXBlOiAnaW5wdXRfaW1hZ2UnIH07XG4gICAgICAgIGlmICh0eXBlb2Ygb3V0cHV0LmRldGFpbCA9PT0gJ3N0cmluZycgJiYgb3V0cHV0LmRldGFpbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXN1bHQuZGV0YWlsID0gb3V0cHV0LmRldGFpbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG91dHB1dC5pbWFnZSA9PT0gJ3N0cmluZycgJiYgb3V0cHV0LmltYWdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlc3VsdC5pbWFnZSA9IG91dHB1dC5pbWFnZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1JlY29yZChvdXRwdXQuaW1hZ2UpKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZU9iaiA9IG91dHB1dC5pbWFnZTtcbiAgICAgICAgICAgIGNvbnN0IGlubGluZU1lZGlhVHlwZSA9IGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmoubWVkaWFUeXBlKVxuICAgICAgICAgICAgICAgID8gaW1hZ2VPYmoubWVkaWFUeXBlXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai51cmwpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID0gaW1hZ2VPYmoudXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5kYXRhKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5pbWFnZSA9XG4gICAgICAgICAgICAgICAgICAgIGlubGluZU1lZGlhVHlwZSAmJiAhaW1hZ2VPYmouZGF0YS5zdGFydHNXaXRoKCdkYXRhOicpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGFzRGF0YVVybChpbWFnZU9iai5kYXRhLCBpbmxpbmVNZWRpYVR5cGUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGltYWdlT2JqLmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbWFnZU9iai5kYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSAmJlxuICAgICAgICAgICAgICAgIGltYWdlT2JqLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChpbWFnZU9iai5kYXRhKTtcbiAgICAgICAgICAgICAgICByZXN1bHQuaW1hZ2UgPSBhc0RhdGFVcmwoYmFzZTY0LCBpbmxpbmVNZWRpYVR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlZElkID0gKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouZmlsZUlkKSAmJiBpbWFnZU9iai5maWxlSWQpIHx8XG4gICAgICAgICAgICAgICAgICAgIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLmlkKSAmJiBpbWFnZU9iai5pZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChyZWZlcmVuY2VkSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID0geyBpZDogcmVmZXJlbmNlZElkIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICByZXN1bHQucHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHR5cGU6ICdpbnB1dF9maWxlJyB9O1xuICAgICAgICBjb25zdCBmaWxlVmFsdWUgPSBvdXRwdXQuZmlsZTtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWxlVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZSA9IGZpbGVWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmaWxlVmFsdWUgJiYgdHlwZW9mIGZpbGVWYWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlY29yZCA9IGZpbGVWYWx1ZTtcbiAgICAgICAgICAgIGlmICgnZGF0YScgaW4gcmVjb3JkICYmIHJlY29yZC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVkaWFUeXBlID0gcmVjb3JkLm1lZGlhVHlwZSA/PyAndGV4dC9wbGFpbic7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWNvcmQuZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmZpbGUgPSBhc0RhdGFVcmwocmVjb3JkLmRhdGEsIG1lZGlhVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQocmVjb3JkLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZmlsZSA9IGFzRGF0YVVybChiYXNlNjQsIG1lZGlhVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJlY29yZC51cmwgPT09ICdzdHJpbmcnICYmIHJlY29yZC51cmwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5maWxlID0geyB1cmw6IHJlY29yZC51cmwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZmVyZW5jZWRJZCA9ICh0eXBlb2YgcmVjb3JkLmlkID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgICAgICAgICByZWNvcmQuaWQubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICByZWNvcmQuaWQpIHx8XG4gICAgICAgICAgICAgICAgICAgICh0eXBlb2YgcmVjb3JkLmZpbGVJZCA9PT0gJ3N0cmluZycgJiYgcmVjb3JkLmZpbGVJZC5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHJlY29yZC5maWxlSWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBpZiAocmVmZXJlbmNlZElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5maWxlID0geyBpZDogcmVmZXJlbmNlZElkIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiByZWNvcmQuZmlsZW5hbWUgPT09ICdzdHJpbmcnICYmIHJlY29yZC5maWxlbmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gcmVjb3JkLmZpbGVuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICByZXN1bHQucHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBjb25zdCBleGhhdXN0aXZlQ2hlY2sgPSBvdXRwdXQ7XG4gICAgcmV0dXJuIGV4aGF1c3RpdmVDaGVjaztcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUZpbGVWYWx1ZSh2YWx1ZSkge1xuICAgIGNvbnN0IGRpcmVjdEZpbGUgPSB2YWx1ZS5maWxlO1xuICAgIGlmICh0eXBlb2YgZGlyZWN0RmlsZSA9PT0gJ3N0cmluZycgJiYgZGlyZWN0RmlsZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBkaXJlY3RGaWxlO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkT2JqZWN0ID0gbm9ybWFsaXplRmlsZU9iamVjdENhbmRpZGF0ZShkaXJlY3RGaWxlKTtcbiAgICBpZiAobm9ybWFsaXplZE9iamVjdCkge1xuICAgICAgICByZXR1cm4gbm9ybWFsaXplZE9iamVjdDtcbiAgICB9XG4gICAgY29uc3QgbGVnYWN5VmFsdWUgPSBub3JtYWxpemVMZWdhY3lGaWxlVmFsdWUodmFsdWUpO1xuICAgIGlmIChsZWdhY3lWYWx1ZSkge1xuICAgICAgICByZXR1cm4gbGVnYWN5VmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplRmlsZU9iamVjdENhbmRpZGF0ZSh2YWx1ZSkge1xuICAgIGlmICghaXNSZWNvcmQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoJ2RhdGEnIGluIHZhbHVlICYmIHZhbHVlLmRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBkYXRhVmFsdWUgPSB2YWx1ZS5kYXRhO1xuICAgICAgICBjb25zdCBoYXNTdHJpbmdEYXRhID0gdHlwZW9mIGRhdGFWYWx1ZSA9PT0gJ3N0cmluZycgJiYgZGF0YVZhbHVlLmxlbmd0aCA+IDA7XG4gICAgICAgIGNvbnN0IGhhc0JpbmFyeURhdGEgPSBkYXRhVmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmIGRhdGFWYWx1ZS5sZW5ndGggPiAwO1xuICAgICAgICBpZiAoIWhhc1N0cmluZ0RhdGEgJiYgIWhhc0JpbmFyeURhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5tZWRpYVR5cGUpIHx8XG4gICAgICAgICAgICAhaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5maWxlbmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhOiB0eXBlb2YgZGF0YVZhbHVlID09PSAnc3RyaW5nJyA/IGRhdGFWYWx1ZSA6IG5ldyBVaW50OEFycmF5KGRhdGFWYWx1ZSksXG4gICAgICAgICAgICBtZWRpYVR5cGU6IHZhbHVlLm1lZGlhVHlwZSxcbiAgICAgICAgICAgIGZpbGVuYW1lOiB2YWx1ZS5maWxlbmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlzTm9uRW1wdHlTdHJpbmcodmFsdWUudXJsKSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHVybDogdmFsdWUudXJsIH07XG4gICAgICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKHZhbHVlLmZpbGVuYW1lKSkge1xuICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gdmFsdWUuZmlsZW5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY29uc3QgcmVmZXJlbmNlZElkID0gKGlzTm9uRW1wdHlTdHJpbmcodmFsdWUuaWQpICYmIHZhbHVlLmlkKSB8fFxuICAgICAgICAoaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5maWxlSWQpICYmIHZhbHVlLmZpbGVJZCk7XG4gICAgaWYgKHJlZmVyZW5jZWRJZCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IGlkOiByZWZlcmVuY2VkSWQgfTtcbiAgICAgICAgaWYgKGlzTm9uRW1wdHlTdHJpbmcodmFsdWUuZmlsZW5hbWUpKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSB2YWx1ZS5maWxlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUxlZ2FjeUZpbGVWYWx1ZSh2YWx1ZSkge1xuICAgIGNvbnN0IGZpbGVuYW1lID0gdHlwZW9mIHZhbHVlLmZpbGVuYW1lID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5maWxlbmFtZS5sZW5ndGggPiAwXG4gICAgICAgID8gdmFsdWUuZmlsZW5hbWVcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgbWVkaWFUeXBlID0gdHlwZW9mIHZhbHVlLm1lZGlhVHlwZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubWVkaWFUeXBlLmxlbmd0aCA+IDBcbiAgICAgICAgPyB2YWx1ZS5tZWRpYVR5cGVcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZS5maWxlRGF0YSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZmlsZURhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoIW1lZGlhVHlwZSB8fCAhZmlsZW5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRhdGE6IHZhbHVlLmZpbGVEYXRhLCBtZWRpYVR5cGUsIGZpbGVuYW1lIH07XG4gICAgfVxuICAgIGlmICh2YWx1ZS5maWxlRGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiYgdmFsdWUuZmlsZURhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoIW1lZGlhVHlwZSB8fCAhZmlsZW5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRhdGE6IG5ldyBVaW50OEFycmF5KHZhbHVlLmZpbGVEYXRhKSwgbWVkaWFUeXBlLCBmaWxlbmFtZSB9O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlLmZpbGVVcmwgPT09ICdzdHJpbmcnICYmIHZhbHVlLmZpbGVVcmwubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHVybDogdmFsdWUuZmlsZVVybCB9O1xuICAgICAgICBpZiAoZmlsZW5hbWUpIHtcbiAgICAgICAgICAgIHJlc3VsdC5maWxlbmFtZSA9IGZpbGVuYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUuZmlsZUlkID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5maWxlSWQubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IGlkOiB2YWx1ZS5maWxlSWQgfTtcbiAgICAgICAgaWYgKGZpbGVuYW1lKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGlzUmVjb3JkKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGw7XG59XG5mdW5jdGlvbiBpc05vbkVtcHR5U3RyaW5nKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubGVuZ3RoID4gMDtcbn1cbmZ1bmN0aW9uIHRvSW5saW5lSW1hZ2VTdHJpbmcoZGF0YSwgbWVkaWFUeXBlKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAobWVkaWFUeXBlICYmICFkYXRhLnN0YXJ0c1dpdGgoJ2RhdGE6JykpIHtcbiAgICAgICAgICAgIHJldHVybiBhc0RhdGFVcmwoZGF0YSwgbWVkaWFUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KGRhdGEpO1xuICAgIHJldHVybiBhc0RhdGFVcmwoYmFzZTY0LCBtZWRpYVR5cGUpO1xufVxuZnVuY3Rpb24gYXNEYXRhVXJsKGJhc2U2NCwgbWVkaWFUeXBlKSB7XG4gICAgcmV0dXJuIG1lZGlhVHlwZSA/IGBkYXRhOiR7bWVkaWFUeXBlfTtiYXNlNjQsJHtiYXNlNjR9YCA6IGJhc2U2NDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2xFeGVjdXRpb24ubWpzLm1hcCIsImltcG9ydCB7IFJ1blRvb2xDYWxsSXRlbSB9IGZyb20gXCIuLi9pdGVtcy5tanNcIjtcbi8qKlxuICogTm9ybWFsaXplcyBob3N0ZWQgTUNQIGFwcHJvdmFsIGZsb3dzIHNvIHN0cmVhbWluZyBhbmQgbm9uLXN0cmVhbWluZyBsb29wcyBzaGFyZSBpZGVudGljYWxcbiAqIGJlaGF2aW9yLiBIYW5kbGVzIHN5bmNocm9ub3VzIGFwcHJvdmFscywgcHJldmlvdXNseSBkZWNpZGVkIGFwcHJvdmFscywgYW5kIHBlbmRpbmcgYXBwcm92YWxzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlSG9zdGVkTWNwQXBwcm92YWxzKHsgcmVxdWVzdHMsIGFnZW50LCBzdGF0ZSwgZnVuY3Rpb25SZXN1bHRzLCBhcHBlbmRJZk5ldywgcmVzb2x2ZUFwcHJvdmFsLCB9KSB7XG4gICAgY29uc3QgcGVuZGluZ0FwcHJvdmFscyA9IG5ldyBTZXQoKTtcbiAgICBjb25zdCBwZW5kaW5nQXBwcm92YWxJZHMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBhcHByb3ZhbFJlcXVlc3Qgb2YgcmVxdWVzdHMpIHtcbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbS5yYXdJdGVtO1xuICAgICAgICBpZiAocmF3SXRlbS50eXBlICE9PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHJhd0l0ZW0ucHJvdmlkZXJEYXRhO1xuICAgICAgICBpZiAoIXByb3ZpZGVyRGF0YSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbERhdGEgPSBhcHByb3ZhbFJlcXVlc3QubWNwVG9vbC5wcm92aWRlckRhdGE7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsUmVxdWVzdElkID0gcmF3SXRlbS5pZCA/PyBwcm92aWRlckRhdGEuaWQ7XG4gICAgICAgIGlmICh0b29sRGF0YT8ub25fYXBwcm92YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVzdWx0ID0gYXdhaXQgdG9vbERhdGEub25fYXBwcm92YWwoc3RhdGUuX2NvbnRleHQsIGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbSk7XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbFJlc3BvbnNlRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZhbFJlc3VsdC5hcHByb3ZlLFxuICAgICAgICAgICAgICAgIGFwcHJvdmFsX3JlcXVlc3RfaWQ6IGFwcHJvdmFsUmVxdWVzdElkID8/IHByb3ZpZGVyRGF0YS5pZCxcbiAgICAgICAgICAgICAgICByZWFzb246IGFwcHJvdmFsUmVzdWx0LnJlYXNvbixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhcHBlbmRJZk5ldyhuZXcgUnVuVG9vbENhbGxJdGVtKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ21jcF9hcHByb3ZhbF9yZXNwb25zZScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiBhcHByb3ZhbFJlc3BvbnNlRGF0YSxcbiAgICAgICAgICAgIH0sIGFnZW50KSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcHByb3ZhbERlY2lzaW9uID0gdHlwZW9mIHJlc29sdmVBcHByb3ZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgPyByZXNvbHZlQXBwcm92YWwocmF3SXRlbSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAodHlwZW9mIGFwcHJvdmFsRGVjaXNpb24gIT09ICd1bmRlZmluZWQnICYmIGFwcHJvdmFsUmVxdWVzdElkKSB7XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbFJlc3BvbnNlRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZhbERlY2lzaW9uLFxuICAgICAgICAgICAgICAgIGFwcHJvdmFsX3JlcXVlc3RfaWQ6IGFwcHJvdmFsUmVxdWVzdElkLFxuICAgICAgICAgICAgICAgIHJlYXNvbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGFwcGVuZElmTmV3KG5ldyBSdW5Ub29sQ2FsbEl0ZW0oe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnbWNwX2FwcHJvdmFsX3Jlc3BvbnNlJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IGFwcHJvdmFsUmVzcG9uc2VEYXRhLFxuICAgICAgICAgICAgfSwgYWdlbnQpKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uUmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfbWNwX3Rvb2xfYXBwcm92YWwnLFxuICAgICAgICAgICAgdG9vbDogYXBwcm92YWxSZXF1ZXN0Lm1jcFRvb2wsXG4gICAgICAgICAgICBydW5JdGVtOiBhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW0sXG4gICAgICAgIH0pO1xuICAgICAgICBhcHBlbmRJZk5ldyhhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW0pO1xuICAgICAgICBwZW5kaW5nQXBwcm92YWxzLmFkZChhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW0pO1xuICAgICAgICBpZiAoYXBwcm92YWxSZXF1ZXN0SWQpIHtcbiAgICAgICAgICAgIHBlbmRpbmdBcHByb3ZhbElkcy5hZGQoYXBwcm92YWxSZXF1ZXN0SWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IHBlbmRpbmdBcHByb3ZhbHMsIHBlbmRpbmdBcHByb3ZhbElkcyB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWNwQXBwcm92YWxzLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBSdW5NZXNzYWdlT3V0cHV0SXRlbSwgUnVuVG9vbEFwcHJvdmFsSXRlbSB9IGZyb20gXCIuLi9pdGVtcy5tanNcIjtcbmltcG9ydCB7IGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2UgfSBmcm9tIFwiLi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIH0gZnJvbSBcIi4uL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgc2FmZUV4ZWN1dGUgfSBmcm9tIFwiLi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG5pbXBvcnQgeyBhZGRFcnJvclRvQ3VycmVudFNwYW4gfSBmcm9tIFwiLi4vdHJhY2luZy9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgU2luZ2xlU3RlcFJlc3VsdCwgbmV4dFN0ZXBTY2hlbWEgfSBmcm9tIFwiLi9zdGVwcy5tanNcIjtcbmltcG9ydCB7IGNoZWNrRm9yRmluYWxPdXRwdXRGcm9tVG9vbHMsIGV4ZWN1dGVBcHBseVBhdGNoT3BlcmF0aW9ucywgZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucywgZXhlY3V0ZUZ1bmN0aW9uVG9vbENhbGxzLCBleGVjdXRlSGFuZG9mZkNhbGxzLCBleGVjdXRlU2hlbGxBY3Rpb25zLCBjb2xsZWN0SW50ZXJydXB0aW9ucywgfSBmcm9tIFwiLi90b29sRXhlY3V0aW9uLm1qc1wiO1xuaW1wb3J0IHsgaGFuZGxlSG9zdGVkTWNwQXBwcm92YWxzIH0gZnJvbSBcIi4vbWNwQXBwcm92YWxzLm1qc1wiO1xuY29uc3QgQVBQUk9WQUxfSVRFTV9UWVBFUyA9IFtcbiAgICAnZnVuY3Rpb25fY2FsbCcsXG4gICAgJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICdzaGVsbF9jYWxsJyxcbiAgICAnYXBwbHlfcGF0Y2hfY2FsbCcsXG5dO1xuZnVuY3Rpb24gaXNIb3N0ZWRNY3BBcHByb3ZhbEl0ZW0oaXRlbSkge1xuICAgIHJldHVybiAoaXRlbS5yYXdJdGVtLnR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJyAmJlxuICAgICAgICBpdGVtLnJhd0l0ZW0ucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnKTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVBcHByb3ZhbFN0YXRlKGl0ZW0sIHN0YXRlKSB7XG4gICAgaWYgKGlzSG9zdGVkTWNwQXBwcm92YWxJdGVtKGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiAncGVuZGluZyc7XG4gICAgfVxuICAgIGNvbnN0IHJhd0l0ZW0gPSBpdGVtLnJhd0l0ZW07XG4gICAgY29uc3QgdG9vbE5hbWUgPSBpdGVtLnRvb2xOYW1lID8/XG4gICAgICAgICgnbmFtZScgaW4gcmF3SXRlbSAmJiB0eXBlb2YgcmF3SXRlbS5uYW1lID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyByYXdJdGVtLm5hbWVcbiAgICAgICAgICAgIDogdW5kZWZpbmVkKTtcbiAgICBjb25zdCBjYWxsSWQgPSAnY2FsbElkJyBpbiByYXdJdGVtICYmIHR5cGVvZiByYXdJdGVtLmNhbGxJZCA9PT0gJ3N0cmluZydcbiAgICAgICAgPyByYXdJdGVtLmNhbGxJZFxuICAgICAgICA6ICdpZCcgaW4gcmF3SXRlbSAmJiB0eXBlb2YgcmF3SXRlbS5pZCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gcmF3SXRlbS5pZFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKCF0b29sTmFtZSB8fCAhY2FsbElkKSB7XG4gICAgICAgIHJldHVybiAncGVuZGluZyc7XG4gICAgfVxuICAgIGNvbnN0IGFwcHJvdmFsID0gc3RhdGUuX2NvbnRleHQuaXNUb29sQXBwcm92ZWQoeyB0b29sTmFtZSwgY2FsbElkIH0pO1xuICAgIGlmIChhcHByb3ZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gJ2FwcHJvdmVkJztcbiAgICB9XG4gICAgaWYgKGFwcHJvdmFsID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gJ3JlamVjdGVkJztcbiAgICB9XG4gICAgcmV0dXJuICdwZW5kaW5nJztcbn1cbmZ1bmN0aW9uIGlzQXBwcm92YWxJdGVtTGlrZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghKCdyYXdJdGVtJyBpbiB2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCByYXdJdGVtID0gdmFsdWUucmF3SXRlbTtcbiAgICBpZiAoIXJhd0l0ZW0gfHwgdHlwZW9mIHJhd0l0ZW0gIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaXRlbVR5cGUgPSByYXdJdGVtLnR5cGU7XG4gICAgcmV0dXJuIEFQUFJPVkFMX0lURU1fVFlQRVMuaW5jbHVkZXMoaXRlbVR5cGUpO1xufVxuZnVuY3Rpb24gZ2V0QXBwcm92YWxJZGVudGl0eShhcHByb3ZhbCkge1xuICAgIGNvbnN0IHJhd0l0ZW0gPSBhcHByb3ZhbC5yYXdJdGVtO1xuICAgIGlmICghcmF3SXRlbSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAocmF3SXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcgJiYgcmF3SXRlbS5jYWxsSWQpIHtcbiAgICAgICAgcmV0dXJuIGBmdW5jdGlvbl9jYWxsOiR7cmF3SXRlbS5jYWxsSWR9YDtcbiAgICB9XG4gICAgaWYgKCdjYWxsSWQnIGluIHJhd0l0ZW0gJiYgcmF3SXRlbS5jYWxsSWQpIHtcbiAgICAgICAgcmV0dXJuIGAke3Jhd0l0ZW0udHlwZX06JHtyYXdJdGVtLmNhbGxJZH1gO1xuICAgIH1cbiAgICBjb25zdCBpZCA9ICdpZCcgaW4gcmF3SXRlbSA/IHJhd0l0ZW0uaWQgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGlkKSB7XG4gICAgICAgIHJldHVybiBgJHtyYXdJdGVtLnR5cGV9OiR7aWR9YDtcbiAgICB9XG4gICAgY29uc3QgcHJvdmlkZXJEYXRhID0gdHlwZW9mIHJhd0l0ZW0ucHJvdmlkZXJEYXRhID09PSAnb2JqZWN0JyAmJiByYXdJdGVtLnByb3ZpZGVyRGF0YVxuICAgICAgICA/IHJhd0l0ZW0ucHJvdmlkZXJEYXRhXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmIChwcm92aWRlckRhdGE/LmlkKSB7XG4gICAgICAgIHJldHVybiBgJHtyYXdJdGVtLnR5cGV9OnByb3ZpZGVyOiR7cHJvdmlkZXJEYXRhLmlkfWA7XG4gICAgfVxuICAgIGNvbnN0IGFnZW50TmFtZSA9ICdhZ2VudCcgaW4gYXBwcm92YWwgJiYgYXBwcm92YWwuYWdlbnQgPyBhcHByb3ZhbC5hZ2VudC5uYW1lIDogJyc7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGAke2FnZW50TmFtZX06JHtyYXdJdGVtLnR5cGV9OiR7SlNPTi5zdHJpbmdpZnkocmF3SXRlbSl9YDtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gYCR7YWdlbnROYW1lfToke3Jhd0l0ZW0udHlwZX1gO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGJ1aWxkQXBwZW5kQ29udGV4dChleGlzdGluZ0l0ZW1zKSB7XG4gICAgY29uc3Qgc2Vlbkl0ZW1zID0gbmV3IFNldChleGlzdGluZ0l0ZW1zKTtcbiAgICBjb25zdCBzZWVuQXBwcm92YWxJZGVudGl0aWVzID0gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBleGlzdGluZ0l0ZW1zKSB7XG4gICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkge1xuICAgICAgICAgICAgY29uc3QgaWRlbnRpdHkgPSBnZXRBcHByb3ZhbElkZW50aXR5KGl0ZW0pO1xuICAgICAgICAgICAgaWYgKGlkZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgc2VlbkFwcHJvdmFsSWRlbnRpdGllcy5hZGQoaWRlbnRpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IHNlZW5JdGVtcywgc2VlbkFwcHJvdmFsSWRlbnRpdGllcyB9O1xufVxuZnVuY3Rpb24gYXBwZW5kUnVuSXRlbUlmTmV3KGl0ZW0sIHRhcmdldCwgY29udGV4dCkge1xuICAgIGlmIChjb250ZXh0LnNlZW5JdGVtcy5oYXMoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pIHtcbiAgICAgICAgY29uc3QgaWRlbnRpdHkgPSBnZXRBcHByb3ZhbElkZW50aXR5KGl0ZW0pO1xuICAgICAgICBpZiAoaWRlbnRpdHkpIHtcbiAgICAgICAgICAgIGlmIChjb250ZXh0LnNlZW5BcHByb3ZhbElkZW50aXRpZXMuaGFzKGlkZW50aXR5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRleHQuc2VlbkFwcHJvdmFsSWRlbnRpdGllcy5hZGQoaWRlbnRpdHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnRleHQuc2Vlbkl0ZW1zLmFkZChpdGVtKTtcbiAgICB0YXJnZXQucHVzaChpdGVtKTtcbn1cbmZ1bmN0aW9uIGJ1aWxkQXBwcm92ZWRDYWxsSWRTZXQoaXRlbXMsIHR5cGUpIHtcbiAgICBjb25zdCBjYWxsSWRzID0gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBpZiAoIShpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJhd0l0ZW0gPSBpdGVtLnJhd0l0ZW07XG4gICAgICAgIGlmICghcmF3SXRlbSB8fCByYXdJdGVtLnR5cGUgIT09IHR5cGUpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgnY2FsbElkJyBpbiByYXdJdGVtICYmIHJhd0l0ZW0uY2FsbElkKSB7XG4gICAgICAgICAgICBjYWxsSWRzLmFkZChyYXdJdGVtLmNhbGxJZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoJ2lkJyBpbiByYXdJdGVtICYmIHJhd0l0ZW0uaWQpIHtcbiAgICAgICAgICAgIGNhbGxJZHMuYWRkKHJhd0l0ZW0uaWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjYWxsSWRzO1xufVxuZnVuY3Rpb24gY29sbGVjdENvbXBsZXRlZENhbGxJZHMoaXRlbXMsIHR5cGUpIHtcbiAgICBjb25zdCBjb21wbGV0ZWQgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IHJhd0l0ZW0gPSBpdGVtLnJhd0l0ZW07XG4gICAgICAgIGlmICghcmF3SXRlbSB8fCB0eXBlb2YgcmF3SXRlbSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyYXdJdGVtLnR5cGUgIT09IHR5cGUpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhbGxJZCA9IHJhd0l0ZW0uY2FsbElkO1xuICAgICAgICBpZiAodHlwZW9mIGNhbGxJZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbXBsZXRlZC5hZGQoY2FsbElkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29tcGxldGVkO1xufVxuZnVuY3Rpb24gZmlsdGVyQWN0aW9uc0J5QXBwcm92YWwocHJlU3RlcEl0ZW1zLCBhY3Rpb25zLCB0eXBlKSB7XG4gICAgY29uc3QgYWxsb3dlZENhbGxJZHMgPSBidWlsZEFwcHJvdmVkQ2FsbElkU2V0KHByZVN0ZXBJdGVtcywgdHlwZSk7XG4gICAgaWYgKGFsbG93ZWRDYWxsSWRzLnNpemUgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICByZXR1cm4gYWN0aW9ucy5maWx0ZXIoKGFjdGlvbikgPT4gdHlwZW9mIGFjdGlvbi50b29sQ2FsbC5jYWxsSWQgPT09ICdzdHJpbmcnICYmXG4gICAgICAgIGFsbG93ZWRDYWxsSWRzLmhhcyhhY3Rpb24udG9vbENhbGwuY2FsbElkKSk7XG59XG5mdW5jdGlvbiBmaWx0ZXJQZW5kaW5nQWN0aW9ucyhhY3Rpb25zLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGFjdGlvbnMuZmlsdGVyKChhY3Rpb24pID0+IHtcbiAgICAgICAgY29uc3QgY2FsbElkID0gYWN0aW9uLnRvb2xDYWxsLmNhbGxJZDtcbiAgICAgICAgY29uc3QgaGFzQ2FsbElkID0gdHlwZW9mIGNhbGxJZCA9PT0gJ3N0cmluZyc7XG4gICAgICAgIGlmIChvcHRpb25zLmFsbG93ZWRDYWxsSWRzICYmIG9wdGlvbnMuYWxsb3dlZENhbGxJZHMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIGlmICghaGFzQ2FsbElkIHx8ICFvcHRpb25zLmFsbG93ZWRDYWxsSWRzLmhhcyhjYWxsSWQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNDYWxsSWQgJiYgb3B0aW9ucy5jb21wbGV0ZWRDYWxsSWRzLmhhcyhjYWxsSWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG59XG5mdW5jdGlvbiB0cnVuY2F0ZUZvckRldmVsb3BlcihtZXNzYWdlLCBtYXhMZW5ndGggPSAxNjApIHtcbiAgICBjb25zdCB0cmltbWVkID0gbWVzc2FnZS50cmltKCk7XG4gICAgaWYgKCF0cmltbWVkKSB7XG4gICAgICAgIHJldHVybiAnU2NoZW1hIHZhbGlkYXRpb24gZmFpbGVkLic7XG4gICAgfVxuICAgIGlmICh0cmltbWVkLmxlbmd0aCA8PSBtYXhMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRyaW1tZWQ7XG4gICAgfVxuICAgIHJldHVybiBgJHt0cmltbWVkLnNsaWNlKDAsIG1heExlbmd0aCAtIDMpfS4uLmA7XG59XG5mdW5jdGlvbiBmb3JtYXRGaW5hbE91dHB1dFR5cGVFcnJvcihlcnJvcikge1xuICAgIC8vIFN1cmZhY2Ugc3RydWN0dXJlZCBvdXRwdXQgdmFsaWRhdGlvbiBoaW50cyB3aXRob3V0IGVjaG9pbmcgcG90ZW50aWFsbHkgbGFyZ2Ugb3Igc2Vuc2l0aXZlIHBheWxvYWRzLlxuICAgIHRyeSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzc3VlID0gZXJyb3IuaXNzdWVzWzBdO1xuICAgICAgICAgICAgaWYgKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNzdWVQYXRoUGFydHMgPSBBcnJheS5pc0FycmF5KGlzc3VlLnBhdGgpID8gaXNzdWUucGF0aCA6IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzc3VlUGF0aCA9IGlzc3VlUGF0aFBhcnRzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgPyBpc3N1ZVBhdGhQYXJ0cy5tYXAoKHBhcnQpID0+IFN0cmluZyhwYXJ0KSkuam9pbignLicpXG4gICAgICAgICAgICAgICAgICAgIDogJyhyb290KSc7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRydW5jYXRlRm9yRGV2ZWxvcGVyKGlzc3VlLm1lc3NhZ2UgPz8gJycpO1xuICAgICAgICAgICAgICAgIHJldHVybiBgSW52YWxpZCBvdXRwdXQgdHlwZTogZmluYWwgYXNzaXN0YW50IG91dHB1dCBmYWlsZWQgc2NoZW1hIHZhbGlkYXRpb24gYXQgXCIke2lzc3VlUGF0aH1cIiAoJHttZXNzYWdlfSkuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAnSW52YWxpZCBvdXRwdXQgdHlwZTogZmluYWwgYXNzaXN0YW50IG91dHB1dCBmYWlsZWQgc2NoZW1hIHZhbGlkYXRpb24uJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gYEludmFsaWQgb3V0cHV0IHR5cGU6ICR7dHJ1bmNhdGVGb3JEZXZlbG9wZXIoZXJyb3IubWVzc2FnZSl9YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIC8vIFN3YWxsb3cgZm9ybWF0dGluZyBlcnJvcnMgc28gd2UgY2FuIHJldHVybiBhIGdlbmVyaWMgbWVzc2FnZSBiZWxvdy5cbiAgICB9XG4gICAgcmV0dXJuICdJbnZhbGlkIG91dHB1dCB0eXBlOiBmaW5hbCBhc3Npc3RhbnQgb3V0cHV0IGRpZCBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHNjaGVtYS4nO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIENvbnRpbnVlcyBhIHR1cm4gdGhhdCB3YXMgcHJldmlvdXNseSBpbnRlcnJ1cHRlZCB3YWl0aW5nIGZvciB0b29sIGFwcHJvdmFsLiBFeGVjdXRlcyB0aGUgbm93XG4gKiBhcHByb3ZlZCB0b29scyBhbmQgcmV0dXJucyB0aGUgcmVzdWx0aW5nIHN0ZXAgdHJhbnNpdGlvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4oYWdlbnQsIG9yaWdpbmFsSW5wdXQsIG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICAvLyBjYWxsX2lkcyBmb3IgZnVuY3Rpb24gdG9vbHNcbiAgICBjb25zdCBmdW5jdGlvbkNhbGxJZHMgPSBvcmlnaW5hbFByZVN0ZXBJdGVtc1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSAmJlxuICAgICAgICAnY2FsbElkJyBpbiBpdGVtLnJhd0l0ZW0gJiZcbiAgICAgICAgaXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJylcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS5yYXdJdGVtLmNhbGxJZCk7XG4gICAgY29uc3QgY29tcGxldGVkRnVuY3Rpb25DYWxsSWRzID0gY29sbGVjdENvbXBsZXRlZENhbGxJZHMob3JpZ2luYWxQcmVTdGVwSXRlbXMsICdmdW5jdGlvbl9jYWxsX3Jlc3VsdCcpO1xuICAgIGNvbnN0IGNvbXBsZXRlZFNoZWxsQ2FsbElkcyA9IGNvbGxlY3RDb21wbGV0ZWRDYWxsSWRzKG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCAnc2hlbGxfY2FsbF9vdXRwdXQnKTtcbiAgICBjb25zdCBjb21wbGV0ZWRBcHBseVBhdGNoQ2FsbElkcyA9IGNvbGxlY3RDb21wbGV0ZWRDYWxsSWRzKG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCAnYXBwbHlfcGF0Y2hfY2FsbF9vdXRwdXQnKTtcbiAgICAvLyBXZSBhbHJlYWR5IHBlcnNpc3RlZCB0aGUgdHVybiBvbmNlIHdoZW4gdGhlIGFwcHJvdmFsIGludGVycnVwdCB3YXMgcmFpc2VkLCBzbyB0aGVcbiAgICAvLyBjb3VudGVyIHJlZmxlY3RzIHRoZSBhcHByb3ZhbCBpdGVtcyBhcyBcImZsdXNoZWRcIi4gV2hlbiB3ZSByZXN1bWUgdGhlIHNhbWUgdHVybiB3ZSBuZWVkXG4gICAgLy8gdG8gcmV3aW5kIGl0IHNvIHRoZSBldmVudHVhbCB0b29sIG91dHB1dCBmb3IgdGhpcyBjYWxsIGlzIHN0aWxsIHdyaXR0ZW4gdG8gdGhlIHNlc3Npb24uXG4gICAgY29uc3QgcGVuZGluZ0FwcHJvdmFsSXRlbXMgPSBzdGF0ZVxuICAgICAgICAuZ2V0SW50ZXJydXB0aW9ucygpXG4gICAgICAgIC5maWx0ZXIoaXNBcHByb3ZhbEl0ZW1MaWtlKTtcbiAgICBjb25zdCBwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzID0gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3QgYXBwcm92YWwgb2YgcGVuZGluZ0FwcHJvdmFsSXRlbXMpIHtcbiAgICAgICAgaWYgKCEoYXBwcm92YWwgaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzSG9zdGVkTWNwQXBwcm92YWxJdGVtKGFwcHJvdmFsKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IGFwcHJvdmFsLnJhd0l0ZW07XG4gICAgICAgIGlmIChyYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJyAmJlxuICAgICAgICAgICAgcmF3SXRlbS5jYWxsSWQgJiZcbiAgICAgICAgICAgIGNvbXBsZXRlZEZ1bmN0aW9uQ2FsbElkcy5oYXMocmF3SXRlbS5jYWxsSWQpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmF3SXRlbS50eXBlID09PSAnc2hlbGxfY2FsbCcgJiZcbiAgICAgICAgICAgIHJhd0l0ZW0uY2FsbElkICYmXG4gICAgICAgICAgICBjb21wbGV0ZWRTaGVsbENhbGxJZHMuaGFzKHJhd0l0ZW0uY2FsbElkKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJhd0l0ZW0udHlwZSA9PT0gJ2FwcGx5X3BhdGNoX2NhbGwnICYmXG4gICAgICAgICAgICByYXdJdGVtLmNhbGxJZCAmJlxuICAgICAgICAgICAgY29tcGxldGVkQXBwbHlQYXRjaENhbGxJZHMuaGFzKHJhd0l0ZW0uY2FsbElkKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaWRlbnRpdHkgPSBnZXRBcHByb3ZhbElkZW50aXR5KGFwcHJvdmFsKTtcbiAgICAgICAgaWYgKGlkZW50aXR5KSB7XG4gICAgICAgICAgICBpZiAocmVzb2x2ZUFwcHJvdmFsU3RhdGUoYXBwcm92YWwsIHN0YXRlKSA9PT0gJ3BlbmRpbmcnKSB7XG4gICAgICAgICAgICAgICAgcGVuZGluZ0FwcHJvdmFsSWRlbnRpdGllcy5hZGQoaWRlbnRpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFJ1biBmdW5jdGlvbiB0b29scyB0aGF0IHJlcXVpcmUgYXBwcm92YWwgb3IgYXJlIHJlc3VtaW5nIGEgbmVzdGVkIGFnZW50IHRvb2wgcnVuLlxuICAgIGNvbnN0IGZ1bmN0aW9uVG9vbFJ1bnMgPSBwcm9jZXNzZWRSZXNwb25zZS5mdW5jdGlvbnMuZmlsdGVyKChydW4pID0+IHtcbiAgICAgICAgY29uc3QgY2FsbElkID0gcnVuLnRvb2xDYWxsLmNhbGxJZDtcbiAgICAgICAgaWYgKCFjYWxsSWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0FwcHJvdmVkQ2FsbCA9IGZ1bmN0aW9uQ2FsbElkcy5pbmNsdWRlcyhjYWxsSWQpO1xuICAgICAgICBjb25zdCBpc1BlbmRpbmdOZXN0ZWQgPSBzdGF0ZS5oYXNQZW5kaW5nQWdlbnRUb29sUnVuKHJ1bi50b29sLm5hbWUsIGNhbGxJZCk7XG4gICAgICAgIGlmICghaXNBcHByb3ZlZENhbGwgJiYgIWlzUGVuZGluZ05lc3RlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhY29tcGxldGVkRnVuY3Rpb25DYWxsSWRzLmhhcyhjYWxsSWQpO1xuICAgIH0pO1xuICAgIGNvbnN0IHNoZWxsUnVucyA9IGZpbHRlclBlbmRpbmdBY3Rpb25zKGZpbHRlckFjdGlvbnNCeUFwcHJvdmFsKG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCBwcm9jZXNzZWRSZXNwb25zZS5zaGVsbEFjdGlvbnMsICdzaGVsbF9jYWxsJyksIHtcbiAgICAgICAgY29tcGxldGVkQ2FsbElkczogY29tcGxldGVkU2hlbGxDYWxsSWRzLFxuICAgIH0pO1xuICAgIGNvbnN0IHBlbmRpbmdDb21wdXRlckFjdGlvbnMgPSBmaWx0ZXJQZW5kaW5nQWN0aW9ucyhwcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnMsIHtcbiAgICAgICAgY29tcGxldGVkQ2FsbElkczogY29sbGVjdENvbXBsZXRlZENhbGxJZHMob3JpZ2luYWxQcmVTdGVwSXRlbXMsICdjb21wdXRlcl9jYWxsX3Jlc3VsdCcpLFxuICAgIH0pO1xuICAgIGNvbnN0IGFwcGx5UGF0Y2hSdW5zID0gZmlsdGVyUGVuZGluZ0FjdGlvbnMoZmlsdGVyQWN0aW9uc0J5QXBwcm92YWwob3JpZ2luYWxQcmVTdGVwSXRlbXMsIHByb2Nlc3NlZFJlc3BvbnNlLmFwcGx5UGF0Y2hBY3Rpb25zLCAnYXBwbHlfcGF0Y2hfY2FsbCcpLCB7XG4gICAgICAgIGNvbXBsZXRlZENhbGxJZHM6IGNvbXBsZXRlZEFwcGx5UGF0Y2hDYWxsSWRzLFxuICAgIH0pO1xuICAgIGNvbnN0IGZ1bmN0aW9uUmVzdWx0cyA9IGF3YWl0IGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgZnVuY3Rpb25Ub29sUnVucywgcnVubmVyLCBzdGF0ZSk7XG4gICAgLy8gVGhlcmUgaXMgbm8gYnVpbHQtaW4gSElUTCBhcHByb3ZhbCBzdXJmYWNlIGZvciBjb21wdXRlciB0b29scyB0b2RheSwgc28gZXZlcnkgcGVuZGluZyBhY3Rpb25cbiAgICAvLyBpcyBleGVjdXRlZCBpbW1lZGlhdGVseSB3aGVuIHRoZSB0dXJuIHJlc3VtZXMuXG4gICAgY29uc3QgY29tcHV0ZXJSZXN1bHRzID0gcGVuZGluZ0NvbXB1dGVyQWN0aW9ucy5sZW5ndGggPiAwXG4gICAgICAgID8gYXdhaXQgZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyhhZ2VudCwgcGVuZGluZ0NvbXB1dGVyQWN0aW9ucywgcnVubmVyLCBzdGF0ZS5fY29udGV4dClcbiAgICAgICAgOiBbXTtcbiAgICBjb25zdCBzaGVsbFJlc3VsdHMgPSBzaGVsbFJ1bnMubGVuZ3RoID4gMFxuICAgICAgICA/IGF3YWl0IGV4ZWN1dGVTaGVsbEFjdGlvbnMoYWdlbnQsIHNoZWxsUnVucywgcnVubmVyLCBzdGF0ZS5fY29udGV4dClcbiAgICAgICAgOiBbXTtcbiAgICBjb25zdCBhcHBseVBhdGNoUmVzdWx0cyA9IGFwcGx5UGF0Y2hSdW5zLmxlbmd0aCA+IDBcbiAgICAgICAgPyBhd2FpdCBleGVjdXRlQXBwbHlQYXRjaE9wZXJhdGlvbnMoYWdlbnQsIGFwcGx5UGF0Y2hSdW5zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KVxuICAgICAgICA6IFtdO1xuICAgIGNvbnN0IG5ld0l0ZW1zID0gW107XG4gICAgY29uc3QgYXBwZW5kQ29udGV4dCA9IGJ1aWxkQXBwZW5kQ29udGV4dChvcmlnaW5hbFByZVN0ZXBJdGVtcyk7XG4gICAgY29uc3QgYXBwZW5kSWZOZXcgPSAoaXRlbSkgPT4gYXBwZW5kUnVuSXRlbUlmTmV3KGl0ZW0sIG5ld0l0ZW1zLCBhcHBlbmRDb250ZXh0KTtcbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBmdW5jdGlvblJlc3VsdHMpIHtcbiAgICAgICAgaWYgKHJlc3VsdC50eXBlID09PSAnZnVuY3Rpb25fb3V0cHV0JyAmJlxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShyZXN1bHQuaW50ZXJydXB0aW9ucykgJiZcbiAgICAgICAgICAgIHJlc3VsdC5pbnRlcnJ1cHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGFwcGVuZElmTmV3KHJlc3VsdC5ydW5JdGVtKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCByZXN1bHQgb2YgY29tcHV0ZXJSZXN1bHRzKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KHJlc3VsdCk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHNoZWxsUmVzdWx0cykge1xuICAgICAgICBhcHBlbmRJZk5ldyhyZXN1bHQpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBhcHBseVBhdGNoUmVzdWx0cykge1xuICAgICAgICBhcHBlbmRJZk5ldyhyZXN1bHQpO1xuICAgIH1cbiAgICBjb25zdCBhZGRpdGlvbmFsSW50ZXJydXB0aW9ucyA9IGNvbGxlY3RJbnRlcnJ1cHRpb25zKFtdLCBbLi4uc2hlbGxSZXN1bHRzLCAuLi5hcHBseVBhdGNoUmVzdWx0c10pO1xuICAgIGNvbnN0IGhvc3RlZE1jcEFwcHJvdmFscyA9IGF3YWl0IGhhbmRsZUhvc3RlZE1jcEFwcHJvdmFscyh7XG4gICAgICAgIHJlcXVlc3RzOiBwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzLFxuICAgICAgICBhZ2VudCxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGZ1bmN0aW9uUmVzdWx0cyxcbiAgICAgICAgYXBwZW5kSWZOZXcsXG4gICAgICAgIHJlc29sdmVBcHByb3ZhbDogKHJhd0l0ZW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHJhd0l0ZW0ucHJvdmlkZXJEYXRhO1xuICAgICAgICAgICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0SWQgPSByYXdJdGVtLmlkID8/IHByb3ZpZGVyRGF0YT8uaWQ7XG4gICAgICAgICAgICBpZiAoIWFwcHJvdmFsUmVxdWVzdElkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5fY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IHJhd0l0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IGFwcHJvdmFsUmVxdWVzdElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgLy8gU2VydmVyLW1hbmFnZWQgY29udmVyc2F0aW9ucyByZWx5IG9uIHByZVN0ZXBJdGVtcyB0byByZS1zdXJmYWNlIHBlbmRpbmcgYXBwcm92YWxzLlxuICAgIC8vIEtlZXAgdW5yZXNvbHZlZCBob3N0ZWQgTUNQIGFwcHJvdmFscyBpbiBwbGFjZSBzbyBISVRMIGZsb3dzIHN0aWxsIGhhdmUgc29tZXRoaW5nIHRvIGFwcHJvdmUgbmV4dCB0dXJuLlxuICAgIC8vIERyb3AgcmVzb2x2ZWQgYXBwcm92YWwgcGxhY2Vob2xkZXJzIHNvIHRoZXkgYXJlIG5vdCByZXBsYXllZCBvbiB0aGUgbmV4dCB0dXJuLCBidXQga2VlcFxuICAgIC8vIHBlbmRpbmcgYXBwcm92YWxzIGluIHBsYWNlIHRvIHNpZ25hbCB0aGUgb3V0c3RhbmRpbmcgd29yayB0byB0aGUgVUkgYW5kIHNlc3Npb24gc3RvcmUuXG4gICAgY29uc3QgcHJlU3RlcEl0ZW1zID0gb3JpZ2luYWxQcmVTdGVwSXRlbXMuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgIGlmICghKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzSG9zdGVkTWNwQXBwcm92YWxJdGVtKGl0ZW0pKSB7XG4gICAgICAgICAgICBpZiAoaG9zdGVkTWNwQXBwcm92YWxzLnBlbmRpbmdBcHByb3ZhbHMuaGFzKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbFJlcXVlc3RJZCA9IGl0ZW0ucmF3SXRlbS5pZCA/P1xuICAgICAgICAgICAgICAgIGl0ZW0ucmF3SXRlbS5wcm92aWRlckRhdGE/LmlkO1xuICAgICAgICAgICAgaWYgKGFwcHJvdmFsUmVxdWVzdElkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhvc3RlZE1jcEFwcHJvdmFscy5wZW5kaW5nQXBwcm92YWxJZHMuaGFzKGFwcHJvdmFsUmVxdWVzdElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcmVzZXJ2ZSBhbGwgb3RoZXIgYXBwcm92YWwgaXRlbXMgc28gcmVzdW1wdGlvbnMgY2FuIGNvbnRpbnVlIHRvIHJlZmVyZW5jZSB0aGVcbiAgICAgICAgLy8gb3JpZ2luYWwgYXBwcm92YWwgcmVxdWVzdHMgKGUuZy4sIGZ1bmN0aW9uL3NoZWxsL2FwcGx5X3BhdGNoKSBPTkxZIHdoaWxlIHRoZXkgYXJlIHN0aWxsIHBlbmRpbmcuXG4gICAgICAgIGNvbnN0IGlkZW50aXR5ID0gZ2V0QXBwcm92YWxJZGVudGl0eShpdGVtKTtcbiAgICAgICAgaWYgKCFpZGVudGl0eSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBlbmRpbmdBcHByb3ZhbElkZW50aXRpZXMuaGFzKGlkZW50aXR5KTtcbiAgICB9KTtcbiAgICBjb25zdCBrZXB0QXBwcm92YWxJdGVtcyA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcHJlU3RlcEl0ZW1zKSB7XG4gICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkge1xuICAgICAgICAgICAga2VwdEFwcHJvdmFsSXRlbXMuYWRkKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCByZW1vdmVkQXBwcm92YWxDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIG9yaWdpbmFsUHJlU3RlcEl0ZW1zKSB7XG4gICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSAmJiAha2VwdEFwcHJvdmFsSXRlbXMuaGFzKGl0ZW0pKSB7XG4gICAgICAgICAgICByZW1vdmVkQXBwcm92YWxDb3VudCsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChyZW1vdmVkQXBwcm92YWxDb3VudCA+IDApIHtcbiAgICAgICAgLy8gUGVyc2lzdGluZyB0aGUgYXBwcm92YWwgcmVxdWVzdCBhbHJlYWR5IGFkdmFuY2VkIHRoZSBjb3VudGVyIG9uY2UsIHNvIHVuZG8gdGhlIGluY3JlbWVudFxuICAgICAgICAvLyB0byBtYWtlIHN1cmUgd2Ugd3JpdGUgdGhlIGZpbmFsIHRvb2wgb3V0cHV0IGJhY2sgdG8gdGhlIHNlc3Npb24gd2hlbiB0aGUgdHVybiByZXN1bWVzLlxuICAgICAgICBzdGF0ZS5yZXdpbmRUdXJuUGVyc2lzdGVuY2UocmVtb3ZlZEFwcHJvdmFsQ291bnQpO1xuICAgIH1cbiAgICBjb25zdCBjb21wbGV0ZWRTdGVwID0gYXdhaXQgbWF5YmVDb21wbGV0ZVR1cm5Gcm9tVG9vbFJlc3VsdHMoe1xuICAgICAgICBhZ2VudCxcbiAgICAgICAgcnVubmVyLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgZnVuY3Rpb25SZXN1bHRzLFxuICAgICAgICBvcmlnaW5hbElucHV0LFxuICAgICAgICBuZXdSZXNwb25zZSxcbiAgICAgICAgcHJlU3RlcEl0ZW1zLFxuICAgICAgICBuZXdJdGVtcyxcbiAgICAgICAgYWRkaXRpb25hbEludGVycnVwdGlvbnMsXG4gICAgfSk7XG4gICAgaWYgKGNvbXBsZXRlZFN0ZXApIHtcbiAgICAgICAgcmV0dXJuIGNvbXBsZXRlZFN0ZXA7XG4gICAgfVxuICAgIC8vIHdlIG9ubHkgcmFuIG5ldyB0b29scyBhbmQgc2lkZSBlZmZlY3RzLiBXZSBuZWVkIHRvIHJ1biB0aGUgcmVzdCBvZiB0aGUgYWdlbnRcbiAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIEV4ZWN1dGVzIGV2ZXJ5IGZvbGxvdy11cCBhY3Rpb24gdGhlIG1vZGVsIHJlcXVlc3RlZCAoZnVuY3Rpb24gdG9vbHMsIGNvbXB1dGVyIGFjdGlvbnMsIE1DUCBmbG93cyksXG4gKiBhcHBlbmRzIHRoZWlyIG91dHB1dHMgdG8gdGhlIHJ1biBoaXN0b3J5LCBhbmQgZGV0ZXJtaW5lcyB0aGUgbmV4dCBzdGVwIGZvciB0aGUgYWdlbnQgbG9vcC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc29sdmVUdXJuQWZ0ZXJNb2RlbFJlc3BvbnNlKGFnZW50LCBvcmlnaW5hbElucHV0LCBvcmlnaW5hbFByZVN0ZXBJdGVtcywgbmV3UmVzcG9uc2UsIHByb2Nlc3NlZFJlc3BvbnNlLCBydW5uZXIsIHN0YXRlKSB7XG4gICAgLy8gUmV1c2UgdGhlIHNhbWUgYXJyYXkgcmVmZXJlbmNlIHNvIHdlIGNhbiBjb21wYXJlIG9iamVjdCBpZGVudGl0eSB3aGVuIGRlY2lkaW5nIHdoZXRoZXIgdG9cbiAgICAvLyBhcHBlbmQgbmV3IGl0ZW1zLCBlbnN1cmluZyB3ZSBuZXZlciBkb3VibGUtc3RyZWFtIGV4aXN0aW5nIFJ1bkl0ZW1zLlxuICAgIGNvbnN0IHByZVN0ZXBJdGVtcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zO1xuICAgIGNvbnN0IG5ld0l0ZW1zID0gW107XG4gICAgY29uc3QgYXBwZW5kQ29udGV4dCA9IGJ1aWxkQXBwZW5kQ29udGV4dChvcmlnaW5hbFByZVN0ZXBJdGVtcyk7XG4gICAgY29uc3QgYXBwZW5kSWZOZXcgPSAoaXRlbSkgPT4gYXBwZW5kUnVuSXRlbUlmTmV3KGl0ZW0sIG5ld0l0ZW1zLCBhcHBlbmRDb250ZXh0KTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcHJvY2Vzc2VkUmVzcG9uc2UubmV3SXRlbXMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcoaXRlbSk7XG4gICAgfVxuICAgIC8vIFJ1biBmdW5jdGlvbiB0b29scyBhbmQgY29tcHV0ZXIgYWN0aW9ucyBpbiBwYXJhbGxlbDsgbmVpdGhlciBkZXBlbmRzIG9uIHRoZSBvdGhlcidzIHNpZGUgZWZmZWN0cy5cbiAgICBjb25zdCBbZnVuY3Rpb25SZXN1bHRzLCBjb21wdXRlclJlc3VsdHMsIHNoZWxsUmVzdWx0cywgYXBwbHlQYXRjaFJlc3VsdHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMoYWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucywgcnVubmVyLCBzdGF0ZSksXG4gICAgICAgIGV4ZWN1dGVDb21wdXRlckFjdGlvbnMoYWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLmNvbXB1dGVyQWN0aW9ucywgcnVubmVyLCBzdGF0ZS5fY29udGV4dCksXG4gICAgICAgIGV4ZWN1dGVTaGVsbEFjdGlvbnMoYWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLnNoZWxsQWN0aW9ucywgcnVubmVyLCBzdGF0ZS5fY29udGV4dCksXG4gICAgICAgIGV4ZWN1dGVBcHBseVBhdGNoT3BlcmF0aW9ucyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UuYXBwbHlQYXRjaEFjdGlvbnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpLFxuICAgIF0pO1xuICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIGZ1bmN0aW9uUmVzdWx0cykge1xuICAgICAgICBpZiAocmVzdWx0LnR5cGUgPT09ICdmdW5jdGlvbl9vdXRwdXQnICYmXG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KHJlc3VsdC5pbnRlcnJ1cHRpb25zKSAmJlxuICAgICAgICAgICAgcmVzdWx0LmludGVycnVwdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYXBwZW5kSWZOZXcocmVzdWx0LnJ1bkl0ZW0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY29tcHV0ZXJSZXN1bHRzKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KGl0ZW0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc2hlbGxSZXN1bHRzKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KGl0ZW0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXBwbHlQYXRjaFJlc3VsdHMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcoaXRlbSk7XG4gICAgfVxuICAgIGNvbnN0IGFkZGl0aW9uYWxJbnRlcnJ1cHRpb25zID0gY29sbGVjdEludGVycnVwdGlvbnMoW10sIFsuLi5zaGVsbFJlc3VsdHMsIC4uLmFwcGx5UGF0Y2hSZXN1bHRzXSk7XG4gICAgaWYgKHByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBhd2FpdCBoYW5kbGVIb3N0ZWRNY3BBcHByb3ZhbHMoe1xuICAgICAgICAgICAgcmVxdWVzdHM6IHByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMsXG4gICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgZnVuY3Rpb25SZXN1bHRzLFxuICAgICAgICAgICAgYXBwZW5kSWZOZXcsXG4gICAgICAgICAgICByZXNvbHZlQXBwcm92YWw6IChyYXdJdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gcmF3SXRlbS5wcm92aWRlckRhdGE7XG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0SWQgPSByYXdJdGVtLmlkID8/IHByb3ZpZGVyRGF0YT8uaWQ7XG4gICAgICAgICAgICAgICAgaWYgKCFhcHByb3ZhbFJlcXVlc3RJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGUuX2NvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogcmF3SXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBjYWxsSWQ6IGFwcHJvdmFsUmVxdWVzdElkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIHByb2Nlc3MgaGFuZG9mZnNcbiAgICBpZiAocHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZUhhbmRvZmZDYWxscyhhZ2VudCwgb3JpZ2luYWxJbnB1dCwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgbmV3UmVzcG9uc2UsIHByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KTtcbiAgICB9XG4gICAgY29uc3QgY29tcGxldGVkU3RlcCA9IGF3YWl0IG1heWJlQ29tcGxldGVUdXJuRnJvbVRvb2xSZXN1bHRzKHtcbiAgICAgICAgYWdlbnQsXG4gICAgICAgIHJ1bm5lcixcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGZ1bmN0aW9uUmVzdWx0cyxcbiAgICAgICAgb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgbmV3UmVzcG9uc2UsXG4gICAgICAgIHByZVN0ZXBJdGVtcyxcbiAgICAgICAgbmV3SXRlbXMsXG4gICAgICAgIGFkZGl0aW9uYWxJbnRlcnJ1cHRpb25zLFxuICAgIH0pO1xuICAgIGlmIChjb21wbGV0ZWRTdGVwKSB7XG4gICAgICAgIHJldHVybiBjb21wbGV0ZWRTdGVwO1xuICAgIH1cbiAgICAvLyBJZiB0aGUgbW9kZWwgaXNzdWVkIGFueSB0b29sIGNhbGxzIG9yIGhhbmRvZmZzIGluIHRoaXMgdHVybixcbiAgICAvLyB3ZSBtdXN0IE5PVCB0cmVhdCBhbnkgYXNzaXN0YW50IG1lc3NhZ2UgaW4gdGhlIHNhbWUgdHVybiBhcyB0aGUgZmluYWwgb3V0cHV0LlxuICAgIC8vIFdlIHNob3VsZCBydW4gdGhlIGxvb3AgYWdhaW4gc28gdGhlIG1vZGVsIGNhbiBzZWUgdGhlIHRvb2wgcmVzdWx0cyBhbmQgcmVzcG9uZC5cbiAgICBpZiAocHJvY2Vzc2VkUmVzcG9uc2UuaGFzVG9vbHNPckFwcHJvdmFsc1RvUnVuKCkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbiAgICB9XG4gICAgLy8gTm8gdG9vbCBjYWxscy9hY3Rpb25zIGluIHRoaXMgdHVybjsgc2FmZSB0byBjb25zaWRlciBhIHBsYWluIGFzc2lzdGFudCBtZXNzYWdlIGFzIGZpbmFsLlxuICAgIGNvbnN0IG1lc3NhZ2VJdGVtcyA9IG5ld0l0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbSBpbnN0YW5jZW9mIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKTtcbiAgICAvLyB3ZSB3aWxsIHVzZSB0aGUgbGFzdCBjb250ZW50IG91dHB1dCBhcyB0aGUgZmluYWwgb3V0cHV0XG4gICAgY29uc3QgcG90ZW50aWFsRmluYWxPdXRwdXQgPSBtZXNzYWdlSXRlbXMubGVuZ3RoID4gMFxuICAgICAgICA/IGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2UobWVzc2FnZUl0ZW1zW21lc3NhZ2VJdGVtcy5sZW5ndGggLSAxXS5yYXdJdGVtKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAvLyBpZiB0aGVyZSBpcyBubyBvdXRwdXQgd2UganVzdCBydW4gYWdhaW5cbiAgICBpZiAodHlwZW9mIHBvdGVudGlhbEZpbmFsT3V0cHV0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xuICAgIH1cbiAgICAvLyBLZWVwIGxvb3BpbmcgaWYgYW55IHRvb2wgb3V0cHV0IHBsYWNlaG9sZGVycyBzdGlsbCByZXF1aXJlIGFuIGFwcHJvdmFsIGZvbGxvdy11cC5cbiAgICBjb25zdCBoYXNQZW5kaW5nVG9vbHNPckFwcHJvdmFscyA9IGZ1bmN0aW9uUmVzdWx0cy5zb21lKChyZXN1bHQpID0+IHJlc3VsdC5ydW5JdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkgfHwgYWRkaXRpb25hbEludGVycnVwdGlvbnMubGVuZ3RoID4gMDtcbiAgICBpZiAoIWhhc1BlbmRpbmdUb29sc09yQXBwcm92YWxzKSB7XG4gICAgICAgIGlmIChhZ2VudC5vdXRwdXRUeXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHBvdGVudGlhbEZpbmFsT3V0cHV0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFnZW50Lm91dHB1dFR5cGUgIT09ICd0ZXh0JyAmJiBwb3RlbnRpYWxGaW5hbE91dHB1dCkge1xuICAgICAgICAgICAgLy8gU3RydWN0dXJlZCBvdXRwdXQgc2NoZW1hID0+IGFsd2F5cyBsZWFkcyB0byBhIGZpbmFsIG91dHB1dCBpZiB3ZSBoYXZlIHRleHQuXG4gICAgICAgICAgICBjb25zdCB7IHBhcnNlciB9ID0gZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZShhZ2VudC5vdXRwdXRUeXBlLCAnZmluYWxfb3V0cHV0Jyk7XG4gICAgICAgICAgICBjb25zdCBbZXJyb3JdID0gYXdhaXQgc2FmZUV4ZWN1dGUoKCkgPT4gcGFyc2VyKHBvdGVudGlhbEZpbmFsT3V0cHV0KSk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRFcnJvck1lc3NhZ2UgPSBmb3JtYXRGaW5hbE91dHB1dFR5cGVFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogb3V0cHV0RXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKG91dHB1dEVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLCBvdXRwdXQ6IHBvdGVudGlhbEZpbmFsT3V0cHV0IH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG59XG4vLyBDb25zb2xpZGF0ZXMgdGhlIGxvZ2ljIHRoYXQgZGV0ZXJtaW5lcyB3aGV0aGVyIHRvb2wgcmVzdWx0cyB5aWVsZGVkIGEgZmluYWwgYW5zd2VyLFxuLy8gdHJpZ2dlcmVkIGFuIGludGVycnVwdGlvbiwgb3IgcmVxdWlyZSB0aGUgYWdlbnQgbG9vcCB0byBjb250aW51ZSBydW5uaW5nLlxuYXN5bmMgZnVuY3Rpb24gbWF5YmVDb21wbGV0ZVR1cm5Gcm9tVG9vbFJlc3VsdHMoeyBhZ2VudCwgcnVubmVyOiBfcnVubmVyLCBzdGF0ZSwgZnVuY3Rpb25SZXN1bHRzLCBvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgYWRkaXRpb25hbEludGVycnVwdGlvbnMgPSBbXSwgfSkge1xuICAgIGNvbnN0IHRvb2xPdXRjb21lID0gYXdhaXQgY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyhhZ2VudCwgZnVuY3Rpb25SZXN1bHRzLCBzdGF0ZSwgYWRkaXRpb25hbEludGVycnVwdGlvbnMpO1xuICAgIGlmICh0b29sT3V0Y29tZS5pc0ZpbmFsT3V0cHV0KSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgb3V0cHV0OiB0b29sT3V0Y29tZS5maW5hbE91dHB1dCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0b29sT3V0Y29tZS5pc0ludGVycnVwdGVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGludGVycnVwdGlvbnM6IHRvb2xPdXRjb21lLmludGVycnVwdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5leHBvcnQgeyBuZXh0U3RlcFNjaGVtYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHVyblJlc29sdXRpb24ubWpzLm1hcCIsImltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMubWpzXCI7XG5mdW5jdGlvbiBpc0NvbXB1dGVySW5zdGFuY2UodmFsdWUpIHtcbiAgICByZXR1cm4gKCEhdmFsdWUgJiZcbiAgICAgICAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAnZW52aXJvbm1lbnQnIGluIHZhbHVlICYmXG4gICAgICAgICdkaW1lbnNpb25zJyBpbiB2YWx1ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplVG9vbCh0b29sKSB7XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogdG9vbC5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgc3RyaWN0OiB0b29sLnN0cmljdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2NvbXB1dGVyJykge1xuICAgICAgICAvLyBXaGVuIGEgY29tcHV0ZXIgaXMgY3JlYXRlZCBsYXppbHkgdmlhIGFuIGluaXRpYWxpemVyLCBzZXJpYWxpemVUb29sIGNhbiBiZSBjYWxsZWQgYmVmb3JlIGluaXRpYWxpemF0aW9uIChlLmcuLCBtYW51YWwgc2VyaWFsaXplIHdpdGhvdXQgcnVubmluZyB0aGUgYWdlbnQpLlxuICAgICAgICBpZiAoIWlzQ29tcHV0ZXJJbnN0YW5jZSh0b29sLmNvbXB1dGVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignQ29tcHV0ZXIgdG9vbCBpcyBub3QgaW5pdGlhbGl6ZWQgZm9yIHNlcmlhbGl6YXRpb24uIENhbGwgcmVzb2x2ZUNvbXB1dGVyKHsgdG9vbCwgcnVuQ29udGV4dCB9KSBmaXJzdCAoZm9yIGV4YW1wbGUsIHdoZW4gYnVpbGRpbmcgYSBtb2RlbCBwYXlsb2FkIG91dHNpZGUgUnVubmVyLnJ1bikuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21wdXRlcicsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogdG9vbC5jb21wdXRlci5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGRpbWVuc2lvbnM6IHRvb2wuY29tcHV0ZXIuZGltZW5zaW9ucyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ3NoZWxsJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3NoZWxsJyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2FwcGx5X3BhdGNoJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FwcGx5X3BhdGNoJyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sJyxcbiAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICBwcm92aWRlckRhdGE6IHRvb2wucHJvdmlkZXJEYXRhLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplSGFuZG9mZihoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdG9vbE5hbWU6IGgudG9vbE5hbWUsXG4gICAgICAgIHRvb2xEZXNjcmlwdGlvbjogaC50b29sRGVzY3JpcHRpb24sXG4gICAgICAgIGlucHV0SnNvblNjaGVtYTogaC5pbnB1dEpzb25TY2hlbWEsXG4gICAgICAgIHN0cmljdEpzb25TY2hlbWE6IGguc3RyaWN0SnNvblNjaGVtYSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VyaWFsaXplLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRDdXJyZW50U3BhbiB9IGZyb20gXCIuLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVBZ2VudFNwYW4gfSBmcm9tIFwiLi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi4vdHJhY2luZy9wcm92aWRlci5tanNcIjtcbi8qKlxuICogTm9ybWFsaXplcyB0cmFjaW5nIGNvbmZpZ3VyYXRpb24gaW50byB0aGUgZm9ybWF0IGV4cGVjdGVkIGJ5IG1vZGVsIHByb3ZpZGVycy5cbiAqIFJldHVybnMgYGZhbHNlYCB0byBkaXNhYmxlIHRyYWNpbmcsIGB0cnVlYCB0byBpbmNsdWRlIGZ1bGwgcGF5bG9hZCBkYXRhLCBvclxuICogYCdlbmFibGVkX3dpdGhvdXRfZGF0YSdgIHRvIG9taXQgc2Vuc2l0aXZlIGNvbnRlbnQgd2hpbGUgc3RpbGwgZW1pdHRpbmcgc3BhbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFjaW5nKHRyYWNpbmdEaXNhYmxlZCwgdHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgIGlmICh0cmFjaW5nRGlzYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuICdlbmFibGVkX3dpdGhvdXRfZGF0YSc7XG59XG5mdW5jdGlvbiByZWJhc2VTcGFuQ2hhaW4oc3BhbiwgdHJhY2UpIHtcbiAgICBjb25zdCBwcmV2aW91c1NwYW4gPSBzcGFuLnByZXZpb3VzU3BhblxuICAgICAgICA/IHJlYmFzZVNwYW5DaGFpbihzcGFuLnByZXZpb3VzU3BhbiwgdHJhY2UpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IHBhcmVudCA9IHByZXZpb3VzU3BhbiA/PyB0cmFjZTtcbiAgICBjb25zdCByZWJhc2VkU3BhbiA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgc3BhbklkOiBzcGFuLnNwYW5JZCxcbiAgICAgICAgcGFyZW50SWQ6IHNwYW4ucGFyZW50SWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBzdGFydGVkQXQ6IHNwYW4uc3RhcnRlZEF0ID8/IHVuZGVmaW5lZCxcbiAgICAgICAgZW5kZWRBdDogc3Bhbi5lbmRlZEF0ID8/IHVuZGVmaW5lZCxcbiAgICAgICAgZGF0YTogc3Bhbi5zcGFuRGF0YSxcbiAgICAgICAgZXJyb3I6IHNwYW4uZXJyb3IgPz8gdW5kZWZpbmVkLFxuICAgICAgICB0cmFjaW5nQXBpS2V5OiBzcGFuLnRyYWNpbmdBcGlLZXksXG4gICAgfSwgcGFyZW50KTtcbiAgICByZWJhc2VkU3Bhbi5wcmV2aW91c1NwYW4gPSBwcmV2aW91c1NwYW47XG4gICAgcmV0dXJuIHJlYmFzZWRTcGFuO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5VHJhY2VPdmVycmlkZXModHJhY2UsIGN1cnJlbnRTcGFuLCBvdmVycmlkZXMpIHtcbiAgICBjb25zdCB0cmFjZUlkT3ZlcnJpZGUgPSBvdmVycmlkZXMudHJhY2VJZCAhPT0gdW5kZWZpbmVkICYmIG92ZXJyaWRlcy50cmFjZUlkICE9PSB0cmFjZS50cmFjZUlkO1xuICAgIGNvbnN0IHRyYWNpbmdBcGlLZXlPdmVycmlkZSA9IG92ZXJyaWRlcy50cmFjaW5nQXBpS2V5ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgb3ZlcnJpZGVzLnRyYWNpbmdBcGlLZXkgIT09IHRyYWNlLnRyYWNpbmdBcGlLZXk7XG4gICAgaWYgKG92ZXJyaWRlcy50cmFjZUlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdHJhY2UudHJhY2VJZCA9IG92ZXJyaWRlcy50cmFjZUlkO1xuICAgIH1cbiAgICBpZiAob3ZlcnJpZGVzLndvcmtmbG93TmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRyYWNlLm5hbWUgPSBvdmVycmlkZXMud29ya2Zsb3dOYW1lO1xuICAgIH1cbiAgICBpZiAob3ZlcnJpZGVzLmdyb3VwSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0cmFjZS5ncm91cElkID0gb3ZlcnJpZGVzLmdyb3VwSWQgPz8gbnVsbDtcbiAgICB9XG4gICAgaWYgKG92ZXJyaWRlcy50cmFjZU1ldGFkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdHJhY2UubWV0YWRhdGEgPSBvdmVycmlkZXMudHJhY2VNZXRhZGF0YTtcbiAgICB9XG4gICAgaWYgKG92ZXJyaWRlcy50cmFjaW5nQXBpS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdHJhY2UudHJhY2luZ0FwaUtleSA9IG92ZXJyaWRlcy50cmFjaW5nQXBpS2V5O1xuICAgIH1cbiAgICBpZiAoY3VycmVudFNwYW4gJiYgKHRyYWNlSWRPdmVycmlkZSB8fCB0cmFjaW5nQXBpS2V5T3ZlcnJpZGUpKSB7XG4gICAgICAgIHJldHVybiB7IHRyYWNlLCBjdXJyZW50U3BhbjogcmViYXNlU3BhbkNoYWluKGN1cnJlbnRTcGFuLCB0cmFjZSkgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdHJhY2UsIGN1cnJlbnRTcGFuIH07XG59XG4vKipcbiAqIEVuc3VyZXMgYW4gYWdlbnQgc3BhbiBleGlzdHMgYW5kIHVwZGF0ZXMgdG9vbCBtZXRhZGF0YSBpZiBhbHJlYWR5IHByZXNlbnQuXG4gKiBSZXR1cm5zIHRoZSBzcGFuIHNvIGNhbGxlcnMgY2FuIHBhc3MgaXQgdGhyb3VnaCBydW4gc3RhdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVBZ2VudFNwYW4ocGFyYW1zKSB7XG4gICAgY29uc3QgeyBhZ2VudCwgaGFuZG9mZnMsIHRvb2xzLCBjdXJyZW50U3BhbiB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGV4aXN0aW5nU3BhbiA9IGN1cnJlbnRTcGFuO1xuICAgIGlmIChleGlzdGluZ1NwYW4pIHtcbiAgICAgICAgZXhpc3RpbmdTcGFuLnNwYW5EYXRhLnRvb2xzID0gdG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpO1xuICAgICAgICByZXR1cm4gZXhpc3RpbmdTcGFuO1xuICAgIH1cbiAgICBjb25zdCBoYW5kb2ZmTmFtZXMgPSBoYW5kb2Zmcy5tYXAoKGgpID0+IGguYWdlbnROYW1lKTtcbiAgICBjb25zdCBzcGFuID0gY3JlYXRlQWdlbnRTcGFuKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgIGhhbmRvZmZzOiBoYW5kb2ZmTmFtZXMsXG4gICAgICAgICAgICB0b29sczogdG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpLFxuICAgICAgICAgICAgb3V0cHV0X3R5cGU6IGFnZW50Lm91dHB1dFNjaGVtYU5hbWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgc3Bhbi5zdGFydCgpO1xuICAgIHNldEN1cnJlbnRTcGFuKHNwYW4pO1xuICAgIHJldHVybiBzcGFuO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhY2luZy5tanMubWFwIiwiaW1wb3J0IHsgc2VyaWFsaXplSGFuZG9mZiwgc2VyaWFsaXplVG9vbCB9IGZyb20gXCIuLi91dGlscy9zZXJpYWxpemUubWpzXCI7XG5pbXBvcnQgeyByZXNvbHZlQ29tcHV0ZXIgfSBmcm9tIFwiLi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IGVuc3VyZUFnZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcubWpzXCI7XG4vKipcbiAqIENvbGxlY3RzIHRvb2xzIGFuZCBoYW5kb2ZmcyBmb3IgdGhlIGN1cnJlbnQgYWdlbnQgc28gbW9kZWwgY2FsbHMgYW5kIHRyYWNpbmcgc2hhcmUgdGhlIHNhbWVcbiAqIHNuYXBzaG90IG9mIGVuYWJsZWQgY2FwYWJpbGl0aWVzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJlcGFyZUFnZW50QXJ0aWZhY3RzKHN0YXRlKSB7XG4gICAgY29uc3QgY2FwYWJpbGl0aWVzID0gYXdhaXQgY29sbGVjdEFnZW50Q2FwYWJpbGl0aWVzKHN0YXRlKTtcbiAgICBhd2FpdCB3YXJtVXBDb21wdXRlclRvb2xzKGNhcGFiaWxpdGllcy50b29scywgc3RhdGUuX2NvbnRleHQpO1xuICAgIHN0YXRlLnNldEN1cnJlbnRBZ2VudFNwYW4oZW5zdXJlQWdlbnRTcGFuKHtcbiAgICAgICAgYWdlbnQ6IHN0YXRlLl9jdXJyZW50QWdlbnQsXG4gICAgICAgIGhhbmRvZmZzOiBjYXBhYmlsaXRpZXMuaGFuZG9mZnMsXG4gICAgICAgIHRvb2xzOiBjYXBhYmlsaXRpZXMudG9vbHMsXG4gICAgICAgIGN1cnJlbnRTcGFuOiBzdGF0ZS5fY3VycmVudEFnZW50U3BhbixcbiAgICB9KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY2FwYWJpbGl0aWVzLFxuICAgICAgICBzZXJpYWxpemVkSGFuZG9mZnM6IGNhcGFiaWxpdGllcy5oYW5kb2Zmcy5tYXAoKGhhbmRvZmYpID0+IHNlcmlhbGl6ZUhhbmRvZmYoaGFuZG9mZikpLFxuICAgICAgICBzZXJpYWxpemVkVG9vbHM6IGNhcGFiaWxpdGllcy50b29scy5tYXAoKHRvb2wpID0+IHNlcmlhbGl6ZVRvb2wodG9vbCkpLFxuICAgICAgICB0b29sc0V4cGxpY2l0bHlQcm92aWRlZDogc3RhdGUuX2N1cnJlbnRBZ2VudC5oYXNFeHBsaWNpdFRvb2xDb25maWcoKSxcbiAgICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gY29sbGVjdEFnZW50Q2FwYWJpbGl0aWVzKHN0YXRlKSB7XG4gICAgY29uc3QgaGFuZG9mZnMgPSBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldEVuYWJsZWRIYW5kb2ZmcyhzdGF0ZS5fY29udGV4dCk7XG4gICAgY29uc3QgdG9vbHMgPSAoYXdhaXQgc3RhdGUuX2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scyhzdGF0ZS5fY29udGV4dCkpO1xuICAgIHJldHVybiB7IGhhbmRvZmZzLCB0b29scyB9O1xufVxuYXN5bmMgZnVuY3Rpb24gd2FybVVwQ29tcHV0ZXJUb29scyh0b29scywgcnVuQ29udGV4dCkge1xuICAgIGNvbnN0IGNvbXB1dGVyVG9vbHMgPSB0b29scy5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2NvbXB1dGVyJyk7XG4gICAgaWYgKGNvbXB1dGVyVG9vbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoY29tcHV0ZXJUb29scy5tYXAoYXN5bmMgKHRvb2wpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzb2x2ZUNvbXB1dGVyKHsgdG9vbCwgcnVuQ29udGV4dCB9KTtcbiAgICB9KSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb2RlbFByZXBhcmF0aW9uLm1qcy5tYXAiLCJpbXBvcnQgeyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgYnVpbGRJbnB1dEd1YXJkcmFpbERlZmluaXRpb25zLCBydW5JbnB1dEd1YXJkcmFpbHMsIHNwbGl0SW5wdXRHdWFyZHJhaWxzLCB9IGZyb20gXCIuL2d1YXJkcmFpbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRUdXJuSW5wdXQgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCB7IHByZXBhcmVBZ2VudEFydGlmYWN0cyB9IGZyb20gXCIuL21vZGVsUHJlcGFyYXRpb24ubWpzXCI7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJlcGFyZVR1cm4ob3B0aW9ucykge1xuICAgIGNvbnN0IHsgc3RhdGUsIGlucHV0LCBnZW5lcmF0ZWRJdGVtcywgaXNSZXN1bWVkU3RhdGUsIHByZXNlcnZlVHVyblBlcnNpc3RlbmNlT25SZXN1bWUsIGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4sIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIsIGlucHV0R3VhcmRyYWlsRGVmcywgZ3VhcmRyYWlsSGFuZGxlcnMsIGVtaXRBZ2VudFN0YXJ0LCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBhcnRpZmFjdHMgPSBhd2FpdCBwcmVwYXJlQWdlbnRBcnRpZmFjdHMoc3RhdGUpO1xuICAgIGNvbnN0IHsgaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24gfSA9IGJlZ2luVHVybihzdGF0ZSwge1xuICAgICAgICBpc1Jlc3VtZWRTdGF0ZSxcbiAgICAgICAgcHJlc2VydmVUdXJuUGVyc2lzdGVuY2VPblJlc3VtZSxcbiAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybixcbiAgICB9KTtcbiAgICBpZiAoc3RhdGUuX2N1cnJlbnRUdXJuID4gc3RhdGUuX21heFR1cm5zKSB7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiAnTWF4IHR1cm5zIGV4Y2VlZGVkJyxcbiAgICAgICAgICAgIGRhdGE6IHsgbWF4X3R1cm5zOiBzdGF0ZS5fbWF4VHVybnMgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRocm93IG5ldyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IoYE1heCB0dXJucyAoJHtzdGF0ZS5fbWF4VHVybnN9KSBleGNlZWRlZGAsIHN0YXRlKTtcbiAgICB9XG4gICAgbG9nZ2VyLmRlYnVnKGBSdW5uaW5nIGFnZW50ICR7c3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lfSAodHVybiAke3N0YXRlLl9jdXJyZW50VHVybn0pYCk7XG4gICAgY29uc3QgeyBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2UgfSA9IGF3YWl0IHJ1bklucHV0R3VhcmRyYWlsc0ZvclR1cm4oc3RhdGUsIGlucHV0R3VhcmRyYWlsRGVmcywgaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24sIGd1YXJkcmFpbEhhbmRsZXJzKTtcbiAgICBjb25zdCB0dXJuSW5wdXQgPSBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyXG4gICAgICAgID8gc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlci5wcmVwYXJlSW5wdXQoaW5wdXQsIGdlbmVyYXRlZEl0ZW1zKVxuICAgICAgICA6IGdldFR1cm5JbnB1dChpbnB1dCwgZ2VuZXJhdGVkSXRlbXMpO1xuICAgIGlmIChzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1bikge1xuICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0Jywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHR1cm5JbnB1dCk7XG4gICAgICAgIGVtaXRBZ2VudFN0YXJ0Py4oc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHR1cm5JbnB1dCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGFydGlmYWN0cyxcbiAgICAgICAgdHVybklucHV0LFxuICAgICAgICBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2UsXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJ1bklucHV0R3VhcmRyYWlsc0ZvclR1cm4oc3RhdGUsIHJ1bm5lckd1YXJkcmFpbHMsIGlzUmVzdW1pbmdGcm9tSW50ZXJydXB0aW9uLCBoYW5kbGVycyA9IHt9KSB7XG4gICAgaWYgKHN0YXRlLl9jdXJyZW50VHVybiAhPT0gMSB8fCBpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbikge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGNvbnN0IGd1YXJkcmFpbERlZnMgPSBidWlsZElucHV0R3VhcmRyYWlsRGVmaW5pdGlvbnMoc3RhdGUsIHJ1bm5lckd1YXJkcmFpbHMpO1xuICAgIGNvbnN0IGd1YXJkcmFpbHMgPSBzcGxpdElucHV0R3VhcmRyYWlscyhndWFyZHJhaWxEZWZzKTtcbiAgICBpZiAoZ3VhcmRyYWlscy5ibG9ja2luZy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGF3YWl0IHJ1bklucHV0R3VhcmRyYWlscyhzdGF0ZSwgZ3VhcmRyYWlscy5ibG9ja2luZyk7XG4gICAgfVxuICAgIGlmIChndWFyZHJhaWxzLnBhcmFsbGVsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaGFuZGxlcnMub25QYXJhbGxlbFN0YXJ0Py4oKTtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHJ1bklucHV0R3VhcmRyYWlscyhzdGF0ZSwgZ3VhcmRyYWlscy5wYXJhbGxlbCk7XG4gICAgICAgIGNvbnN0IHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSA9IHByb21pc2UuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgaGFuZGxlcnMub25QYXJhbGxlbEVycm9yPy4oZXJyKTtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSB9O1xuICAgIH1cbiAgICByZXR1cm4ge307XG59XG5mdW5jdGlvbiBiZWdpblR1cm4oc3RhdGUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbiA9IG9wdGlvbnMuaXNSZXN1bWVkU3RhdGUgJiYgb3B0aW9ucy5jb250aW51aW5nSW50ZXJydXB0ZWRUdXJuO1xuICAgIGNvbnN0IHJlc3VtaW5nVHVybkluUHJvZ3Jlc3MgPSBvcHRpb25zLmlzUmVzdW1lZFN0YXRlICYmIHN0YXRlLl9jdXJyZW50VHVybkluUHJvZ3Jlc3MgPT09IHRydWU7XG4gICAgLy8gRG8gbm90IGFkdmFuY2UgdGhlIHR1cm4gd2hlbiByZXN1bWluZyBmcm9tIGFuIGludGVycnVwdGlvbjsgdGhlIG5leHQgbW9kZWwgY2FsbCBpc1xuICAgIC8vIHN0aWxsIHBhcnQgb2YgdGhlIHNhbWUgbG9naWNhbCB0dXJuLlxuICAgIGlmICghaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24gJiYgIXJlc3VtaW5nVHVybkluUHJvZ3Jlc3MpIHtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuKys7XG4gICAgICAgIGlmICghb3B0aW9ucy5pc1Jlc3VtZWRTdGF0ZSB8fCAhb3B0aW9ucy5wcmVzZXJ2ZVR1cm5QZXJzaXN0ZW5jZU9uUmVzdW1lKSB7XG4gICAgICAgICAgICBzdGF0ZS5yZXNldFR1cm5QZXJzaXN0ZW5jZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA+IHN0YXRlLl9nZW5lcmF0ZWRJdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIFJlc2V0IGlmIGEgc3RhbGUgY291bnQgd291bGQgc2tpcCBpdGVtcyBpbiBzdWJzZXF1ZW50IHR1cm5zLlxuICAgICAgICAgICAgc3RhdGUucmVzZXRUdXJuUGVyc2lzdGVuY2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0ZS5fY3VycmVudFR1cm5JblByb2dyZXNzID0gdHJ1ZTtcbiAgICByZXR1cm4geyBpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbiB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHVyblByZXBhcmF0aW9uLm1qcy5tYXAiLCJpbXBvcnQgeyByZXNvbHZlSW50ZXJydXB0ZWRUdXJuIH0gZnJvbSBcIi4vdHVyblJlc29sdXRpb24ubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gYXBwbHlUdXJuUmVzdWx0KG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHN0YXRlLCB0dXJuUmVzdWx0LCBhZ2VudCwgdG9vbHNVc2VkLCByZXNldFR1cm5QZXJzaXN0ZW5jZSwgb25TdGVwSXRlbXMsIH0gPSBvcHRpb25zO1xuICAgIG9uU3RlcEl0ZW1zPy4odHVyblJlc3VsdCk7XG4gICAgc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2UoYWdlbnQsIHRvb2xzVXNlZCk7XG4gICAgc3RhdGUuX29yaWdpbmFsSW5wdXQgPSB0dXJuUmVzdWx0Lm9yaWdpbmFsSW5wdXQ7XG4gICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICBpZiAocmVzZXRUdXJuUGVyc2lzdGVuY2UgJiZcbiAgICAgICAgdHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgc3RhdGUucmVzZXRUdXJuUGVyc2lzdGVuY2UoKTtcbiAgICB9XG4gICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICBzdGF0ZS5fZmluYWxPdXRwdXRTb3VyY2UgPVxuICAgICAgICB0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0J1xuICAgICAgICAgICAgPyAndHVybl9yZXNvbHV0aW9uJ1xuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzdW1lSW50ZXJydXB0ZWRUdXJuKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHN0YXRlLCBydW5uZXIsIG9uU3RlcEl0ZW1zIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCByZXNvbHZlSW50ZXJydXB0ZWRUdXJuKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCBydW5uZXIsIHN0YXRlKTtcbiAgICBhcHBseVR1cm5SZXN1bHQoe1xuICAgICAgICBzdGF0ZSxcbiAgICAgICAgdHVyblJlc3VsdCxcbiAgICAgICAgYWdlbnQ6IHN0YXRlLl9jdXJyZW50QWdlbnQsXG4gICAgICAgIHRvb2xzVXNlZDogc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZT8udG9vbHNVc2VkID8/IFtdLFxuICAgICAgICByZXNldFR1cm5QZXJzaXN0ZW5jZTogZmFsc2UsXG4gICAgICAgIG9uU3RlcEl0ZW1zLFxuICAgIH0pO1xuICAgIC8vIE1hcCBuZXh0LXN0ZXAgb3V0Y29tZXMgdG8gaW50ZXJydXB0aW9uIGZsb3cgY29udHJvbCBmb3IgdGhlIG91dGVyIHJ1biBsb29wLlxuICAgIC8vIHJldHVybl9pbnRlcnJ1cHRpb246IHN0aWxsIHdhaXRpbmcgb24gYXBwcm92YWxzLiByZXJ1bl90dXJuOiBzYW1lIHR1cm4gcmVydW4gd2l0aG91dCBpbmNyZW1lbnQuXG4gICAgLy8gYWR2YW5jZV9zdGVwOiBwcm9jZWVkIHdpdGhvdXQgcmVydW5uaW5nIHRoZSBzYW1lIHR1cm4uXG4gICAgaWYgKHR1cm5SZXN1bHQubmV4dFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgIHJldHVybiB7IG5leHRTdGVwOiB0dXJuUmVzdWx0Lm5leHRTdGVwLCBhY3Rpb246ICdyZXR1cm5faW50ZXJydXB0aW9uJyB9O1xuICAgIH1cbiAgICBpZiAodHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgcmV0dXJuIHsgbmV4dFN0ZXA6IHR1cm5SZXN1bHQubmV4dFN0ZXAsIGFjdGlvbjogJ3JlcnVuX3R1cm4nIH07XG4gICAgfVxuICAgIHJldHVybiB7IG5leHRTdGVwOiB0dXJuUmVzdWx0Lm5leHRTdGVwLCBhY3Rpb246ICdhZHZhbmNlX3N0ZXAnIH07XG59XG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlSW50ZXJydXB0ZWRPdXRjb21lKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHN0YXRlLCBvdXRjb21lLCBzZXRDb250aW51aW5nSW50ZXJydXB0ZWRUdXJuIH0gPSBvcHRpb25zO1xuICAgIHN3aXRjaCAob3V0Y29tZS5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSAncmV0dXJuX2ludGVycnVwdGlvbic6XG4gICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSBvdXRjb21lLm5leHRTdGVwO1xuICAgICAgICAgICAgcmV0dXJuIHsgc2hvdWxkUmV0dXJuOiB0cnVlLCBzaG91bGRDb250aW51ZTogZmFsc2UgfTtcbiAgICAgICAgY2FzZSAncmVydW5fdHVybic6XG4gICAgICAgICAgICAvLyBDbGVhciB0aGUgc3RlcCBzbyB0aGUgb3V0ZXIgbG9vcCB0cmVhdHMgdGhpcyBhcyBhIG5ldyBydW4tYWdhaW4gd2l0aG91dCBpbmNyZW1lbnRpbmcgdGhlIHR1cm4uXG4gICAgICAgICAgICBzZXRDb250aW51aW5nSW50ZXJydXB0ZWRUdXJuKHRydWUpO1xuICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIHsgc2hvdWxkUmV0dXJuOiBmYWxzZSwgc2hvdWxkQ29udGludWU6IHRydWUgfTtcbiAgICAgICAgY2FzZSAnYWR2YW5jZV9zdGVwJzpcbiAgICAgICAgICAgIHNldENvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4oZmFsc2UpO1xuICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gb3V0Y29tZS5uZXh0U3RlcDtcbiAgICAgICAgICAgIHJldHVybiB7IHNob3VsZFJldHVybjogZmFsc2UsIHNob3VsZENvbnRpbnVlOiBmYWxzZSB9O1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICBjb25zdCBfZXhoYXVzdGl2ZSA9IG91dGNvbWUuYWN0aW9uO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmhhbmRsZWQgaW50ZXJydXB0aW9uIG91dGNvbWU6ICR7X2V4aGF1c3RpdmV9YCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5Mb29wLm1qcy5tYXAiLCIvKipcbiAqIENyZWF0ZXMgYSB1c2VyIG1lc3NhZ2UgZW50cnlcbiAqXG4gKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IG1lc3NhZ2UgZnJvbSB0aGUgdXNlci5cbiAqIEBwYXJhbSBvcHRpb25zIEFueSBhZGRpdGlvbmFsIG9wdGlvbnMgdGhhdCB3aWxsIGJlIGRpcmVjdGx5IHBhc3NlZCB0byB0aGUgbW9kZWwuXG4gKiBAcmV0dXJucyBBIG1lc3NhZ2UgZW50cnkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VyKGlucHV0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgIGNvbnRlbnQ6IHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2lucHV0X3RleHQnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBpbnB1dCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXVxuICAgICAgICAgICAgOiBpbnB1dCxcbiAgICAgICAgcHJvdmlkZXJEYXRhOiBvcHRpb25zLFxuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZXMgYSBzeXN0ZW0gbWVzc2FnZSBlbnRyeVxuICpcbiAqIEBwYXJhbSBpbnB1dCBUaGUgc3lzdGVtIHByb21wdC5cbiAqIEBwYXJhbSBvcHRpb25zIEFueSBhZGRpdGlvbmFsIG9wdGlvbnMgdGhhdCB3aWxsIGJlIGRpcmVjdGx5IHBhc3NlZCB0byB0aGUgbW9kZWwuXG4gKiBAcmV0dXJucyBBIG1lc3NhZ2UgZW50cnkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzeXN0ZW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxuICAgICAgICBjb250ZW50OiBpbnB1dCxcbiAgICAgICAgcHJvdmlkZXJEYXRhOiBvcHRpb25zLFxuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZXMgYW4gYXNzaXN0YW50IG1lc3NhZ2UgZW50cnkgZm9yIGV4YW1wbGUgZm9yIG11bHRpLXNob3QgcHJvbXB0aW5nXG4gKlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFzc2lzdGFudCByZXNwb25zZS5cbiAqIEBwYXJhbSBvcHRpb25zIEFueSBhZGRpdGlvbmFsIG9wdGlvbnMgdGhhdCB3aWxsIGJlIGRpcmVjdGx5IHBhc3NlZCB0byB0aGUgbW9kZWwuXG4gKiBAcmV0dXJucyBBIG1lc3NhZ2UgZW50cnkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3Npc3RhbnQoY29udGVudCwgb3B0aW9ucykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgIGNvbnRlbnQ6IHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnb3V0cHV0X3RleHQnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjb250ZW50LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdXG4gICAgICAgICAgICA6IGNvbnRlbnQsXG4gICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgIHByb3ZpZGVyRGF0YTogb3B0aW9ucyxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVzc2FnZS5tanMubWFwIiwiaW1wb3J0IHsgTWF4VHVybnNFeGNlZWRlZEVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IGFzc2lzdGFudCB9IGZyb20gXCIuLi9oZWxwZXJzL21lc3NhZ2UubWpzXCI7XG5pbXBvcnQgeyBSdW5NZXNzYWdlT3V0cHV0SXRlbSB9IGZyb20gXCIuLi9pdGVtcy5tanNcIjtcbmltcG9ydCB7IFJ1blJlc3VsdCB9IGZyb20gXCIuLi9yZXN1bHQubWpzXCI7XG5pbXBvcnQgeyBydW5PdXRwdXRHdWFyZHJhaWxzIH0gZnJvbSBcIi4vZ3VhcmRyYWlscy5tanNcIjtcbmltcG9ydCB7IGdldFR1cm5JbnB1dCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IHsgc3RyZWFtU3RlcEl0ZW1zVG9SdW5SZXN1bHQgfSBmcm9tIFwiLi9zdHJlYW1pbmcubWpzXCI7XG5jb25zdCBidWlsZFJ1bkRhdGEgPSAoc3RhdGUpID0+ICh7XG4gICAgaW5wdXQ6IHN0YXRlLl9vcmlnaW5hbElucHV0LFxuICAgIG5ld0l0ZW1zOiBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsXG4gICAgaGlzdG9yeTogZ2V0VHVybklucHV0KHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMpLFxuICAgIG91dHB1dDogZ2V0VHVybklucHV0KFtdLCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMpLFxuICAgIHJhd1Jlc3BvbnNlczogc3RhdGUuX21vZGVsUmVzcG9uc2VzLFxuICAgIGxhc3RBZ2VudDogc3RhdGUuX2N1cnJlbnRBZ2VudCxcbiAgICBzdGF0ZSxcbn0pO1xuY29uc3QgZm9ybWF0RmluYWxPdXRwdXQgPSAoYWdlbnQsIGZpbmFsT3V0cHV0KSA9PiB7XG4gICAgaWYgKGFnZW50Lm91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICByZXR1cm4gU3RyaW5nKGZpbmFsT3V0cHV0KTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGZpbmFsT3V0cHV0KTtcbn07XG5jb25zdCBjcmVhdGVGaW5hbE91dHB1dEl0ZW0gPSAoYWdlbnQsIG91dHB1dFRleHQpID0+IG5ldyBSdW5NZXNzYWdlT3V0cHV0SXRlbShhc3Npc3RhbnQob3V0cHV0VGV4dCksIGFnZW50KTtcbmV4cG9ydCBjb25zdCB0cnlIYW5kbGVSdW5FcnJvciA9IGFzeW5jICh7IGVycm9yLCBzdGF0ZSwgZXJyb3JIYW5kbGVycywgb3V0cHV0R3VhcmRyYWlsRGVmcywgZW1pdEFnZW50RW5kLCBzdHJlYW1SZXN1bHQsIH0pID0+IHtcbiAgICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIE1heFR1cm5zRXhjZWVkZWRFcnJvcikpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgaGFuZGxlciA9IGVycm9ySGFuZGxlcnM/Lm1heFR1cm5zID8/IGVycm9ySGFuZGxlcnM/LmRlZmF1bHQ7XG4gICAgaWYgKCFoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZXJSZXN1bHQgPSBhd2FpdCBoYW5kbGVyKHtcbiAgICAgICAgZXJyb3IsXG4gICAgICAgIGNvbnRleHQ6IHN0YXRlLl9jb250ZXh0LFxuICAgICAgICBydW5EYXRhOiBidWlsZFJ1bkRhdGEoc3RhdGUpLFxuICAgIH0pO1xuICAgIGlmICghaGFuZGxlclJlc3VsdCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBpbmNsdWRlSW5IaXN0b3J5ID0gaGFuZGxlclJlc3VsdC5pbmNsdWRlSW5IaXN0b3J5ICE9PSBmYWxzZTtcbiAgICBjb25zdCBvdXRwdXRUZXh0ID0gZm9ybWF0RmluYWxPdXRwdXQoc3RhdGUuX2N1cnJlbnRBZ2VudCwgaGFuZGxlclJlc3VsdC5maW5hbE91dHB1dCk7XG4gICAgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBpdGVtID0gY3JlYXRlRmluYWxPdXRwdXRJdGVtKHN0YXRlLl9jdXJyZW50QWdlbnQsIG91dHB1dFRleHQpO1xuICAgIGlmIChpbmNsdWRlSW5IaXN0b3J5KSB7XG4gICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcy5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICBpZiAoc3RyZWFtUmVzdWx0KSB7XG4gICAgICAgIHN0cmVhbVN0ZXBJdGVtc1RvUnVuUmVzdWx0KHN0cmVhbVJlc3VsdCwgW2l0ZW1dKTtcbiAgICB9XG4gICAgc3RhdGUuX2N1cnJlbnRTdGVwID0ge1xuICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcsXG4gICAgICAgIG91dHB1dDogb3V0cHV0VGV4dCxcbiAgICB9O1xuICAgIHN0YXRlLl9maW5hbE91dHB1dFNvdXJjZSA9ICdlcnJvcl9oYW5kbGVyJztcbiAgICBhd2FpdCBydW5PdXRwdXRHdWFyZHJhaWxzKHN0YXRlLCBvdXRwdXRHdWFyZHJhaWxEZWZzLCBvdXRwdXRUZXh0KTtcbiAgICBzdGF0ZS5fY3VycmVudFR1cm5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgZW1pdEFnZW50RW5kKHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudEFnZW50LCBvdXRwdXRUZXh0KTtcbiAgICByZXR1cm4gbmV3IFJ1blJlc3VsdChzdGF0ZSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JIYW5kbGVycy5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmltcG9ydCB7IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50LCBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBkZWZpbmVJbnB1dEd1YXJkcmFpbCwgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmltcG9ydCB7IFJ1bkhvb2tzIH0gZnJvbSBcIi4vbGlmZWN5Y2xlLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0TW9kZWxQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy5tanNcIjtcbmltcG9ydCB7IFJ1bkNvbnRleHQgfSBmcm9tIFwiLi9ydW5Db250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgUnVuUmVzdWx0LCBTdHJlYW1lZFJ1blJlc3VsdCB9IGZyb20gXCIuL3Jlc3VsdC5tanNcIjtcbmltcG9ydCB7IFJ1blN0YXRlIH0gZnJvbSBcIi4vcnVuU3RhdGUubWpzXCI7XG5pbXBvcnQgeyBkaXNwb3NlUmVzb2x2ZWRDb21wdXRlcnMgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuaW1wb3J0IHsgZ2V0T3JDcmVhdGVUcmFjZSwgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhOZXdTcGFuQ29udGV4dCwgd2l0aFRyYWNlLCB9IGZyb20gXCIuL3RyYWNpbmcvY29udGV4dC5tanNcIjtcbmltcG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IERFRkFVTFRfTUFYX1RVUk5TIH0gZnJvbSBcIi4vcnVubmVyL2NvbnN0YW50cy5tanNcIjtcbmltcG9ydCB7IFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQgfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmltcG9ydCB7IFNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIsIGFwcGx5Q2FsbE1vZGVsSW5wdXRGaWx0ZXIsIH0gZnJvbSBcIi4vcnVubmVyL2NvbnZlcnNhdGlvbi5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUd1YXJkcmFpbFRyYWNrZXIsIHJ1bk91dHB1dEd1YXJkcmFpbHMsIH0gZnJvbSBcIi4vcnVubmVyL2d1YXJkcmFpbHMubWpzXCI7XG5pbXBvcnQgeyBhZGp1c3RNb2RlbFNldHRpbmdzRm9yTm9uR1BUNVJ1bm5lck1vZGVsLCBtYXliZVJlc2V0VG9vbENob2ljZSwgc2VsZWN0TW9kZWwsIH0gZnJvbSBcIi4vcnVubmVyL21vZGVsU2V0dGluZ3MubWpzXCI7XG5pbXBvcnQgeyBwcm9jZXNzTW9kZWxSZXNwb25zZSB9IGZyb20gXCIuL3J1bm5lci9tb2RlbE91dHB1dHMubWpzXCI7XG5pbXBvcnQgeyBhZGRTdGVwVG9SdW5SZXN1bHQsIHN0cmVhbVN0ZXBJdGVtc1RvUnVuUmVzdWx0LCBpc0Fib3J0RXJyb3IsIH0gZnJvbSBcIi4vcnVubmVyL3N0cmVhbWluZy5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZVNlc3Npb25QZXJzaXN0ZW5jZVRyYWNrZXIsIHByZXBhcmVJbnB1dEl0ZW1zV2l0aFNlc3Npb24sIHNhdmVTdHJlYW1JbnB1dFRvU2Vzc2lvbiwgc2F2ZVN0cmVhbVJlc3VsdFRvU2Vzc2lvbiwgc2F2ZVRvU2Vzc2lvbiwgfSBmcm9tIFwiLi9ydW5uZXIvc2Vzc2lvblBlcnNpc3RlbmNlLm1qc1wiO1xuaW1wb3J0IHsgcmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2UgfSBmcm9tIFwiLi9ydW5uZXIvdHVyblJlc29sdXRpb24ubWpzXCI7XG5pbXBvcnQgeyBwcmVwYXJlVHVybiB9IGZyb20gXCIuL3J1bm5lci90dXJuUHJlcGFyYXRpb24ubWpzXCI7XG5pbXBvcnQgeyBhcHBseVR1cm5SZXN1bHQsIGhhbmRsZUludGVycnVwdGVkT3V0Y29tZSwgcmVzdW1lSW50ZXJydXB0ZWRUdXJuLCB9IGZyb20gXCIuL3J1bm5lci9ydW5Mb29wLm1qc1wiO1xuaW1wb3J0IHsgYXBwbHlUcmFjZU92ZXJyaWRlcywgZ2V0VHJhY2luZyB9IGZyb20gXCIuL3J1bm5lci90cmFjaW5nLm1qc1wiO1xuaW1wb3J0IHsgdHJ5SGFuZGxlUnVuRXJyb3IgfSBmcm9tIFwiLi9ydW5uZXIvZXJyb3JIYW5kbGVycy5tanNcIjtcbmV4cG9ydCB7IGdldFRyYWNpbmcgfSBmcm9tIFwiLi9ydW5uZXIvdHJhY2luZy5tanNcIjtcbmV4cG9ydCB7IHNlbGVjdE1vZGVsIH0gZnJvbSBcIi4vcnVubmVyL21vZGVsU2V0dGluZ3MubWpzXCI7XG5leHBvcnQgeyBnZXRUdXJuSW5wdXQgfSBmcm9tIFwiLi9ydW5uZXIvaXRlbXMubWpzXCI7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHJ1bm5lciA9IGdldERlZmF1bHRSdW5uZXIoKTtcbiAgICBpZiAob3B0aW9ucz8uc3RyZWFtKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBydW5uZXIucnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXdhaXQgcnVubmVyLnJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbn1cbi8qKlxuICogT3JjaGVzdHJhdGVzIGFnZW50IGV4ZWN1dGlvbiwgaW5jbHVkaW5nIGd1YXJkcmFpbHMsIHRvb2wgY2FsbHMsIHNlc3Npb24gcGVyc2lzdGVuY2UsIGFuZFxuICogdHJhY2luZy4gUmV1c2UgYSBgUnVubmVyYCBpbnN0YW5jZSB3aGVuIHlvdSB3YW50IGNvbnNpc3RlbnQgY29uZmlndXJhdGlvbiBhY3Jvc3MgbXVsdGlwbGUgcnVucy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5lciBleHRlbmRzIFJ1bkhvb2tzIHtcbiAgICBjb25maWc7XG4gICAgdHJhY2VPdmVycmlkZXM7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJ1bm5lciB3aXRoIG9wdGlvbmFsIGRlZmF1bHRzIHRoYXQgYXBwbHkgdG8gZXZlcnkgc3Vic2VxdWVudCBydW4gaW52b2NhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25maWcgLSBPdmVycmlkZXMgZm9yIG1vZGVscywgZ3VhcmRyYWlscywgdHJhY2luZywgb3Igc2Vzc2lvbiBiZWhhdmlvci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgICAgICAgIG1vZGVsUHJvdmlkZXI6IGNvbmZpZy5tb2RlbFByb3ZpZGVyID8/IGdldERlZmF1bHRNb2RlbFByb3ZpZGVyKCksXG4gICAgICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsLFxuICAgICAgICAgICAgbW9kZWxTZXR0aW5nczogY29uZmlnLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICBoYW5kb2ZmSW5wdXRGaWx0ZXI6IGNvbmZpZy5oYW5kb2ZmSW5wdXRGaWx0ZXIsXG4gICAgICAgICAgICBpbnB1dEd1YXJkcmFpbHM6IGNvbmZpZy5pbnB1dEd1YXJkcmFpbHMsXG4gICAgICAgICAgICBvdXRwdXRHdWFyZHJhaWxzOiBjb25maWcub3V0cHV0R3VhcmRyYWlscyxcbiAgICAgICAgICAgIHRyYWNpbmdEaXNhYmxlZDogY29uZmlnLnRyYWNpbmdEaXNhYmxlZCA/PyBmYWxzZSxcbiAgICAgICAgICAgIHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGE6IGNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhID8/IHRydWUsXG4gICAgICAgICAgICB3b3JrZmxvd05hbWU6IGNvbmZpZy53b3JrZmxvd05hbWUgPz8gJ0FnZW50IHdvcmtmbG93JyxcbiAgICAgICAgICAgIHRyYWNlSWQ6IGNvbmZpZy50cmFjZUlkLFxuICAgICAgICAgICAgZ3JvdXBJZDogY29uZmlnLmdyb3VwSWQsXG4gICAgICAgICAgICB0cmFjZU1ldGFkYXRhOiBjb25maWcudHJhY2VNZXRhZGF0YSxcbiAgICAgICAgICAgIHRyYWNpbmc6IGNvbmZpZy50cmFjaW5nLFxuICAgICAgICAgICAgc2Vzc2lvbklucHV0Q2FsbGJhY2s6IGNvbmZpZy5zZXNzaW9uSW5wdXRDYWxsYmFjayxcbiAgICAgICAgICAgIGNhbGxNb2RlbElucHV0RmlsdGVyOiBjb25maWcuY2FsbE1vZGVsSW5wdXRGaWx0ZXIsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHJhY2VPdmVycmlkZXMgPSB7XG4gICAgICAgICAgICAuLi4oY29uZmlnLnRyYWNlSWQgIT09IHVuZGVmaW5lZCA/IHsgdHJhY2VJZDogY29uZmlnLnRyYWNlSWQgfSA6IHt9KSxcbiAgICAgICAgICAgIC4uLihjb25maWcud29ya2Zsb3dOYW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHsgd29ya2Zsb3dOYW1lOiBjb25maWcud29ya2Zsb3dOYW1lIH1cbiAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgIC4uLihjb25maWcuZ3JvdXBJZCAhPT0gdW5kZWZpbmVkID8geyBncm91cElkOiBjb25maWcuZ3JvdXBJZCB9IDoge30pLFxuICAgICAgICAgICAgLi4uKGNvbmZpZy50cmFjZU1ldGFkYXRhICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHsgdHJhY2VNZXRhZGF0YTogY29uZmlnLnRyYWNlTWV0YWRhdGEgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgLi4uKGNvbmZpZy50cmFjaW5nPy5hcGlLZXkgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8geyB0cmFjaW5nQXBpS2V5OiBjb25maWcudHJhY2luZy5hcGlLZXkgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlucHV0R3VhcmRyYWlsRGVmcyA9IChjb25maWcuaW5wdXRHdWFyZHJhaWxzID8/IFtdKS5tYXAoZGVmaW5lSW5wdXRHdWFyZHJhaWwpO1xuICAgICAgICB0aGlzLm91dHB1dEd1YXJkcmFpbERlZnMgPSAoY29uZmlnLm91dHB1dEd1YXJkcmFpbHMgPz8gW10pLm1hcChkZWZpbmVPdXRwdXRHdWFyZHJhaWwpO1xuICAgIH1cbiAgICBhc3luYyBydW4oYWdlbnQsIGlucHV0LCBvcHRpb25zID0ge1xuICAgICAgICBzdHJlYW06IGZhbHNlLFxuICAgICAgICBjb250ZXh0OiB1bmRlZmluZWQsXG4gICAgfSkge1xuICAgICAgICBjb25zdCByZXNvbHZlZE9wdGlvbnMgPSBvcHRpb25zID8/IHsgc3RyZWFtOiBmYWxzZSwgY29udGV4dDogdW5kZWZpbmVkIH07XG4gICAgICAgIC8vIFBlci1ydW4gb3B0aW9ucyB0YWtlIHByZWNlZGVuY2Ugb3ZlciBydW5uZXIgZGVmYXVsdHMgZm9yIHNlc3Npb24gbWVtb3J5IGJlaGF2aW9yLlxuICAgICAgICBjb25zdCBzZXNzaW9uSW5wdXRDYWxsYmFjayA9IHJlc29sdmVkT3B0aW9ucy5zZXNzaW9uSW5wdXRDYWxsYmFjayA/PyB0aGlzLmNvbmZpZy5zZXNzaW9uSW5wdXRDYWxsYmFjaztcbiAgICAgICAgLy8gTGlrZXdpc2UgYWxsb3cgY2FsbGVycyB0byBvdmVycmlkZSBjYWxsTW9kZWxJbnB1dEZpbHRlciBvbiBpbmRpdmlkdWFsIHJ1bnMuXG4gICAgICAgIGNvbnN0IGNhbGxNb2RlbElucHV0RmlsdGVyID0gcmVzb2x2ZWRPcHRpb25zLmNhbGxNb2RlbElucHV0RmlsdGVyID8/IHRoaXMuY29uZmlnLmNhbGxNb2RlbElucHV0RmlsdGVyO1xuICAgICAgICBjb25zdCBoYXNDYWxsTW9kZWxJbnB1dEZpbHRlciA9IEJvb2xlYW4oY2FsbE1vZGVsSW5wdXRGaWx0ZXIpO1xuICAgICAgICBjb25zdCB0cmFjaW5nQ29uZmlnID0gcmVzb2x2ZWRPcHRpb25zLnRyYWNpbmcgPz8gdGhpcy5jb25maWcudHJhY2luZztcbiAgICAgICAgY29uc3QgdHJhY2VPdmVycmlkZXMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLnRyYWNlT3ZlcnJpZGVzLFxuICAgICAgICAgICAgLi4uKHJlc29sdmVkT3B0aW9ucy50cmFjaW5nPy5hcGlLZXkgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8geyB0cmFjaW5nQXBpS2V5OiByZXNvbHZlZE9wdGlvbnMudHJhY2luZy5hcGlLZXkgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlZmZlY3RpdmVPcHRpb25zID0ge1xuICAgICAgICAgICAgLi4ucmVzb2x2ZWRPcHRpb25zLFxuICAgICAgICAgICAgc2Vzc2lvbklucHV0Q2FsbGJhY2ssXG4gICAgICAgICAgICBjYWxsTW9kZWxJbnB1dEZpbHRlcixcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzdW1pbmdGcm9tU3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlO1xuICAgICAgICBjb25zdCBwcmVzZXJ2ZVR1cm5QZXJzaXN0ZW5jZU9uUmVzdW1lID0gcmVzdW1pbmdGcm9tU3RhdGUgJiZcbiAgICAgICAgICAgIGlucHV0Ll9jdXJyZW50VHVybkluUHJvZ3Jlc3MgPT09IHRydWU7XG4gICAgICAgIGNvbnN0IHJlc3VtZWRDb252ZXJzYXRpb25JZCA9IHJlc3VtaW5nRnJvbVN0YXRlXG4gICAgICAgICAgICA/IGlucHV0Ll9jb252ZXJzYXRpb25JZFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHJlc3VtZWRQcmV2aW91c1Jlc3BvbnNlSWQgPSByZXN1bWluZ0Zyb21TdGF0ZVxuICAgICAgICAgICAgPyBpbnB1dC5fcHJldmlvdXNSZXNwb25zZUlkXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbiA9IEJvb2xlYW4oZWZmZWN0aXZlT3B0aW9ucy5jb252ZXJzYXRpb25JZCA/PyByZXN1bWVkQ29udmVyc2F0aW9uSWQpIHx8XG4gICAgICAgICAgICBCb29sZWFuKGVmZmVjdGl2ZU9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkID8/IHJlc3VtZWRQcmV2aW91c1Jlc3BvbnNlSWQpO1xuICAgICAgICAvLyBXaGVuIHRoZSBzZXJ2ZXIgdHJhY2tzIGNvbnZlcnNhdGlvbiBoaXN0b3J5IHdlIGRlZmVyIHRvIGl0IGZvciBwcmV2aW91cyB0dXJucyBzbyBsb2NhbCBzZXNzaW9uXG4gICAgICAgIC8vIHBlcnNpc3RlbmNlIGNhbiBmb2N1cyBzb2xlbHkgb24gdGhlIG5ldyBkZWx0YSBiZWluZyBnZW5lcmF0ZWQgaW4gdGhpcyBwcm9jZXNzLlxuICAgICAgICBjb25zdCBzZXNzaW9uID0gZWZmZWN0aXZlT3B0aW9ucy5zZXNzaW9uO1xuICAgICAgICBjb25zdCBzZXNzaW9uUGVyc2lzdGVuY2UgPSBjcmVhdGVTZXNzaW9uUGVyc2lzdGVuY2VUcmFja2VyKHtcbiAgICAgICAgICAgIHNlc3Npb24sXG4gICAgICAgICAgICBoYXNDYWxsTW9kZWxJbnB1dEZpbHRlcixcbiAgICAgICAgICAgIHBlcnNpc3RJbnB1dDogc2F2ZVN0cmVhbUlucHV0VG9TZXNzaW9uLFxuICAgICAgICAgICAgcmVzdW1pbmdGcm9tU3RhdGUsXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgcHJlcGFyZWRJbnB1dCA9IGlucHV0O1xuICAgICAgICBpZiAoIShwcmVwYXJlZElucHV0IGluc3RhbmNlb2YgUnVuU3RhdGUpKSB7XG4gICAgICAgICAgICBjb25zdCBwcmVwYXJlZCA9IGF3YWl0IHByZXBhcmVJbnB1dEl0ZW1zV2l0aFNlc3Npb24ocHJlcGFyZWRJbnB1dCwgc2Vzc2lvbiwgc2Vzc2lvbklucHV0Q2FsbGJhY2ssIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBzZXJ2ZXIgdHJhY2tzIGNvbnZlcnNhdGlvbiBzdGF0ZSB3ZSBvbmx5IHNlbmQgdGhlIG5ldyB0dXJuIGlucHV0cztcbiAgICAgICAgICAgICAgICAvLyBwcmV2aW91cyBtZXNzYWdlcyBhcmUgcmVjb3ZlcmVkIHZpYSBjb252ZXJzYXRpb25JZC9wcmV2aW91c1Jlc3BvbnNlSWQuXG4gICAgICAgICAgICAgICAgaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXQ6ICFzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uLFxuICAgICAgICAgICAgICAgIHByZXNlcnZlRHJvcHBlZE5ld0l0ZW1zOiBzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbiAmJiBzZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgc2VydmVyIG1hbmFnZXMgbWVtb3J5IHdlIG9ubHkgcGVyc2lzdCB0aGUgbmV3IHR1cm4gaW5wdXRzIGxvY2FsbHkgc28gdGhlXG4gICAgICAgICAgICAgICAgLy8gY29udmVyc2F0aW9uIHNlcnZpY2Ugc3RheXMgdGhlIHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIHByaW9yIGV4Y2hhbmdlcy5cbiAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uSXRlbXMgPSBwcmVwYXJlZC5zZXNzaW9uSXRlbXM7XG4gICAgICAgICAgICAgICAgaWYgKHNlc3Npb25JdGVtcyAmJiBzZXNzaW9uSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBwcmVwYXJlZElucHV0ID0gc2Vzc2lvbkl0ZW1zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlcGFyZWRJbnB1dCA9IHByZXBhcmVkLnByZXBhcmVkSW5wdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJlcGFyZWRJbnB1dCA9IHByZXBhcmVkLnByZXBhcmVkSW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXNzaW9uUGVyc2lzdGVuY2U/LnNldFByZXBhcmVkSXRlbXMocHJlcGFyZWQuc2Vzc2lvbkl0ZW1zKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTdHJlYW1pbmcgcnVucyBwZXJzaXN0IHRoZSBpbnB1dCBhc3luY2hyb25vdXNseSwgc28gdHJhY2sgYSBvbmUtc2hvdCBoZWxwZXJcbiAgICAgICAgLy8gdGhhdCBjYW4gYmUgYXdhaXRlZCBmcm9tIG11bHRpcGxlIGJyYW5jaGVzIHdpdGhvdXQgZG91YmxlLXdyaXRpbmcuXG4gICAgICAgIGNvbnN0IGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkID0gc2Vzc2lvblBlcnNpc3RlbmNlPy5idWlsZFBlcnNpc3RJbnB1dE9uY2Uoc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbik7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGVSdW4gPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZWZmZWN0aXZlT3B0aW9ucy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW1SZXN1bHQgPSBhd2FpdCB0aGlzLiNydW5JbmRpdmlkdWFsU3RyZWFtKGFnZW50LCBwcmVwYXJlZElucHV0LCBlZmZlY3RpdmVPcHRpb25zLCBlbnN1cmVTdHJlYW1JbnB1dFBlcnNpc3RlZCwgc2Vzc2lvblBlcnNpc3RlbmNlPy5yZWNvcmRUdXJuSXRlbXMsIHByZXNlcnZlVHVyblBlcnNpc3RlbmNlT25SZXN1bWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHJlYW1SZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBydW5SZXN1bHQgPSBhd2FpdCB0aGlzLiNydW5JbmRpdmlkdWFsTm9uU3RyZWFtKGFnZW50LCBwcmVwYXJlZElucHV0LCBlZmZlY3RpdmVPcHRpb25zLCBzZXNzaW9uUGVyc2lzdGVuY2U/LnJlY29yZFR1cm5JdGVtcywgcHJlc2VydmVUdXJuUGVyc2lzdGVuY2VPblJlc3VtZSk7XG4gICAgICAgICAgICAvLyBTZWUgbm90ZSBhYm92ZTogYWxsb3cgc2Vzc2lvbnMgdG8gcnVuIGZvciBjYWxsYmFja3Mvc3RhdGUgYnV0IHNraXAgd3JpdGVzIHdoZW4gdGhlIHNlcnZlclxuICAgICAgICAgICAgLy8gaXMgdGhlIHNvdXJjZSBvZiB0cnV0aCBmb3IgdHJhbnNjcmlwdCBoaXN0b3J5LlxuICAgICAgICAgICAgaWYgKHNlc3Npb25QZXJzaXN0ZW5jZSAmJiAhc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNhdmVUb1Nlc3Npb24oc2Vzc2lvbiwgc2Vzc2lvblBlcnNpc3RlbmNlLmdldEl0ZW1zRm9yUGVyc2lzdGVuY2UoKSwgcnVuUmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydW5SZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChwcmVwYXJlZElucHV0IGluc3RhbmNlb2YgUnVuU3RhdGUgJiYgcHJlcGFyZWRJbnB1dC5fdHJhY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcGxpZWQgPSBhcHBseVRyYWNlT3ZlcnJpZGVzKHByZXBhcmVkSW5wdXQuX3RyYWNlLCBwcmVwYXJlZElucHV0Ll9jdXJyZW50QWdlbnRTcGFuLCB0cmFjZU92ZXJyaWRlcyk7XG4gICAgICAgICAgICBwcmVwYXJlZElucHV0Ll90cmFjZSA9IGFwcGxpZWQudHJhY2U7XG4gICAgICAgICAgICBwcmVwYXJlZElucHV0Ll9jdXJyZW50QWdlbnRTcGFuID0gYXBwbGllZC5jdXJyZW50U3BhbjtcbiAgICAgICAgICAgIHJldHVybiB3aXRoVHJhY2UocHJlcGFyZWRJbnB1dC5fdHJhY2UsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocHJlcGFyZWRJbnB1dC5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50U3BhbihwcmVwYXJlZElucHV0Ll9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSdW4oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZXRPckNyZWF0ZVRyYWNlKGFzeW5jICgpID0+IGV4ZWN1dGVSdW4oKSwge1xuICAgICAgICAgICAgdHJhY2VJZDogdGhpcy5jb25maWcudHJhY2VJZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuY29uZmlnLndvcmtmbG93TmFtZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuY29uZmlnLmdyb3VwSWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5jb25maWcudHJhY2VNZXRhZGF0YSxcbiAgICAgICAgICAgIC8vIFBlci1ydW4gdHJhY2luZyBjb25maWcgb3ZlcnJpZGVzIGV4cG9ydGVyIGRlZmF1bHRzIHN1Y2ggYXMgZW52aXJvbm1lbnQgQVBJIGtleS5cbiAgICAgICAgICAgIHRyYWNpbmdBcGlLZXk6IHRyYWNpbmdDb25maWc/LmFwaUtleSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gIEludGVybmFsc1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgaW5wdXRHdWFyZHJhaWxEZWZzO1xuICAgIG91dHB1dEd1YXJkcmFpbERlZnM7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogUmVzb2x2ZXMgdGhlIGVmZmVjdGl2ZSBtb2RlbCBvbmNlIHNvIGJvdGggcnVuIGxvb3BzIG9iZXkgdGhlIHNhbWUgcHJlY2VkZW5jZSBydWxlcy5cbiAgICAgKi9cbiAgICBhc3luYyAjcmVzb2x2ZU1vZGVsRm9yQWdlbnQoYWdlbnQpIHtcbiAgICAgICAgY29uc3QgZXhwbGljdGx5TW9kZWxTZXQgPSAoYWdlbnQubW9kZWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgYWdlbnQubW9kZWwgIT09IEFnZW50LkRFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVIpIHx8XG4gICAgICAgICAgICAodGhpcy5jb25maWcubW9kZWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLm1vZGVsICE9PSBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRNb2RlbCA9IHNlbGVjdE1vZGVsKGFnZW50Lm1vZGVsLCB0aGlzLmNvbmZpZy5tb2RlbCk7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkTW9kZWxOYW1lID0gdHlwZW9mIHNlbGVjdGVkTW9kZWwgPT09ICdzdHJpbmcnID8gc2VsZWN0ZWRNb2RlbCA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRNb2RlbCA9IHR5cGVvZiBzZWxlY3RlZE1vZGVsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBhd2FpdCB0aGlzLmNvbmZpZy5tb2RlbFByb3ZpZGVyLmdldE1vZGVsKHNlbGVjdGVkTW9kZWwpXG4gICAgICAgICAgICA6IHNlbGVjdGVkTW9kZWw7XG4gICAgICAgIHJldHVybiB7IG1vZGVsOiByZXNvbHZlZE1vZGVsLCBleHBsaWN0bHlNb2RlbFNldCwgcmVzb2x2ZWRNb2RlbE5hbWUgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1bkluZGl2aWR1YWxOb25TdHJlYW0oc3RhcnRpbmdBZ2VudCwgaW5wdXQsIG9wdGlvbnMsIFxuICAgIC8vIHNlc3Npb25JbnB1dFVwZGF0ZSBsZXRzIHRoZSBjYWxsZXIgYWRqdXN0IHF1ZXVlZCBzZXNzaW9uIGl0ZW1zIGFmdGVyIGZpbHRlcnMgcnVuIHNvIHdlXG4gICAgLy8gcGVyc2lzdCBleGFjdGx5IHdoYXQgd2Ugc2VuZCB0byB0aGUgbW9kZWwgKGUuZy4sIGFmdGVyIHJlZGFjdGlvbnMgb3IgdHJ1bmNhdGlvbikuXG4gICAgc2Vzc2lvbklucHV0VXBkYXRlLCBwcmVzZXJ2ZVR1cm5QZXJzaXN0ZW5jZU9uUmVzdW1lKSB7XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIHNhdmVkIHN0YXRlIHdlIHVzZSB0aGF0IG9uZSwgb3RoZXJ3aXNlIHdlIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgICAgIGNvbnN0IGlzUmVzdW1lZFN0YXRlID0gaW5wdXQgaW5zdGFuY2VvZiBSdW5TdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gaXNSZXN1bWVkU3RhdGVcbiAgICAgICAgICAgICAgICA/IGlucHV0XG4gICAgICAgICAgICAgICAgOiBuZXcgUnVuU3RhdGUob3B0aW9ucy5jb250ZXh0IGluc3RhbmNlb2YgUnVuQ29udGV4dFxuICAgICAgICAgICAgICAgICAgICA/IG9wdGlvbnMuY29udGV4dFxuICAgICAgICAgICAgICAgICAgICA6IG5ldyBSdW5Db250ZXh0KG9wdGlvbnMuY29udGV4dCksIGlucHV0LCBzdGFydGluZ0FnZW50LCBvcHRpb25zLm1heFR1cm5zID8/IERFRkFVTFRfTUFYX1RVUk5TKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkQ29udmVyc2F0aW9uSWQgPSBvcHRpb25zLmNvbnZlcnNhdGlvbklkID8/XG4gICAgICAgICAgICAgICAgKGlzUmVzdW1lZFN0YXRlID8gc3RhdGUuX2NvbnZlcnNhdGlvbklkIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkUHJldmlvdXNSZXNwb25zZUlkID0gb3B0aW9ucy5wcmV2aW91c1Jlc3BvbnNlSWQgPz9cbiAgICAgICAgICAgICAgICAoaXNSZXN1bWVkU3RhdGUgPyBzdGF0ZS5fcHJldmlvdXNSZXNwb25zZUlkIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGlmICghaXNSZXN1bWVkU3RhdGUpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5zZXRDb252ZXJzYXRpb25Db250ZXh0KHJlc29sdmVkQ29udmVyc2F0aW9uSWQsIHJlc29sdmVkUHJldmlvdXNSZXNwb25zZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIgPSByZXNvbHZlZENvbnZlcnNhdGlvbklkIHx8IHJlc29sdmVkUHJldmlvdXNSZXNwb25zZUlkXG4gICAgICAgICAgICAgICAgPyBuZXcgU2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcih7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiByZXNvbHZlZENvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IHJlc29sdmVkUHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciAmJiBpc1Jlc3VtZWRTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIucHJpbWVGcm9tU3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbElucHV0OiBzdGF0ZS5fb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHN0YXRlLl9tb2RlbFJlc3BvbnNlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5zZXRDb252ZXJzYXRpb25Db250ZXh0KHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIuY29udmVyc2F0aW9uSWQsIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIucHJldmlvdXNSZXNwb25zZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRyYWNrcyB3aGVuIHdlIHJlc3VtZSBhbiBhcHByb3ZhbCBpbnRlcnJ1cHRpb24gc28gdGhlIG5leHQgcnVuLWFnYWluIHN0ZXAgc3RheXMgaW4gdGhlIHNhbWUgdHVybi5cbiAgICAgICAgICAgIGxldCBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gZmFsc2U7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSBjdXJyZW50IHN0ZXAsIHdlIHRyZWF0IHRoaXMgYXMgYSBuZXcgcnVuXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHN0YXRlLl9jdXJyZW50U3RlcCA/PyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRpbnVpbmcgZnJvbSBpbnRlcnJ1cHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfHwgIXN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdObyBtb2RlbCByZXNwb25zZSBmb3VuZCBpbiBwcmV2aW91cyBzdGF0ZScsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVycnVwdGVkT3V0Y29tZSA9IGF3YWl0IHJlc3VtZUludGVycnVwdGVkVHVybih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVubmVyOiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCByZXNldCBjb3VudGVyIGhlcmUgLSByZXNvbHZlSW50ZXJydXB0ZWRUdXJuIGFscmVhZHkgYWRqdXN0ZWQgaXQgdmlhIHJld2luZCBsb2dpY1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNvdW50ZXIgd2lsbCBiZSByZXNldCB3aGVuIF9jdXJyZW50VHVybiBpcyBpbmNyZW1lbnRlZCAoc3RhcnRpbmcgYSBuZXcgdHVybilcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc2hvdWxkUmV0dXJuLCBzaG91bGRDb250aW51ZSB9ID0gaGFuZGxlSW50ZXJydXB0ZWRPdXRjb21lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRjb21lOiBpbnRlcnJ1cHRlZE91dGNvbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q29udGludWluZ0ludGVycnVwdGVkVHVybjogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkUmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIHN0aWxsIGluIGFuIGludGVycnVwdGlvbiwgc28gd2UgbmVlZCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZENvbnRpbnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdhc0NvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4gPSBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3VhcmRyYWlsVHJhY2tlciA9IGNyZWF0ZUd1YXJkcmFpbFRyYWNrZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzVHVybiA9IHN0YXRlLl9jdXJyZW50VHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzUGVyc2lzdGVkQ291bnQgPSBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0dlbmVyYXRlZENvdW50ID0gc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgYXJ0aWZhY3RzLCB0dXJuSW5wdXQsIHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSB9ID0gYXdhaXQgcHJlcGFyZVR1cm4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBzdGF0ZS5fb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZWRJdGVtczogc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmVzdW1lZFN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXNlcnZlVHVyblBlcnNpc3RlbmNlT25SZXN1bWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybjogd2FzQ29udGludWluZ0ludGVycnVwdGVkVHVybixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0R3VhcmRyYWlsRGVmczogdGhpcy5pbnB1dEd1YXJkcmFpbERlZnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsSGFuZGxlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25QYXJhbGxlbFN0YXJ0OiBndWFyZHJhaWxUcmFja2VyLm1hcmtQZW5kaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblBhcmFsbGVsRXJyb3I6IGd1YXJkcmFpbFRyYWNrZXIuc2V0RXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWl0QWdlbnRTdGFydDogKGNvbnRleHQsIGFnZW50LCBpbnB1dEl0ZW1zKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCBjb250ZXh0LCBhZ2VudCwgaW5wdXRJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXNlcnZlVHVyblBlcnNpc3RlbmNlT25SZXN1bWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4gPiBwcmV2aW91c1R1cm4gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1BlcnNpc3RlZENvdW50IDw9IHByZXZpb3VzR2VuZXJhdGVkQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmVzZXJ2ZSBwZXJzaXN0ZWQgb2Zmc2V0cyBmcm9tIGEgcmVzdW1lZCBydW4gdG8gYXZvaWQgcmUtc2F2aW5nIHByaW9yIGl0ZW1zLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9IHByZXZpb3VzUGVyc2lzdGVkQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBndWFyZHJhaWxUcmFja2VyLnNldFByb21pc2UocGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXBhcmVkQ2FsbCA9IGF3YWl0IHRoaXMuI3ByZXBhcmVNb2RlbENhbGwoc3RhdGUsIG9wdGlvbnMsIGFydGlmYWN0cywgdHVybklucHV0LCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLCBzZXNzaW9uSW5wdXRVcGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsVHJhY2tlci50aHJvd0lmRXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlID0gYXdhaXQgcHJlcGFyZWRDYWxsLm1vZGVsLmdldFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbnM6IHByZXBhcmVkQ2FsbC5tb2RlbElucHV0Lmluc3RydWN0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IHByZXBhcmVkQ2FsbC5wcm9tcHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhwbGljaXQgYWdlbnQvcnVuIGNvbmZpZyBtb2RlbHMgc2hvdWxkIHRha2UgcHJlY2VkZW5jZSBvdmVyIHByb21wdCBkZWZhdWx0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4ocHJlcGFyZWRDYWxsLmV4cGxpY3RseU1vZGVsU2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8geyBvdmVycmlkZVByb21wdE1vZGVsOiB0cnVlIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHByZXBhcmVkQ2FsbC5tb2RlbElucHV0LmlucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUmVzcG9uc2VJZDogcHJlcGFyZWRDYWxsLnByZXZpb3VzUmVzcG9uc2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogcHJlcGFyZWRDYWxsLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3M6IHByZXBhcmVkQ2FsbC5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzOiBwcmVwYXJlZENhbGwuc2VyaWFsaXplZFRvb2xzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzRXhwbGljaXRseVByb3ZpZGVkOiBwcmVwYXJlZENhbGwudG9vbHNFeHBsaWNpdGx5UHJvdmlkZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZTogY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlKHN0YXRlLl9jdXJyZW50QWdlbnQub3V0cHV0VHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZG9mZnM6IHByZXBhcmVkQ2FsbC5zZXJpYWxpemVkSGFuZG9mZnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogZ2V0VHJhY2luZyh0aGlzLmNvbmZpZy50cmFjaW5nRGlzYWJsZWQsIHRoaXMuY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlci5tYXJrSW5wdXRBc1NlbnQocHJlcGFyZWRDYWxsLnNvdXJjZUl0ZW1zLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckFwcGxpZWQ6IHByZXBhcmVkQ2FsbC5maWx0ZXJBcHBsaWVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxUdXJuSXRlbXM6IHByZXBhcmVkQ2FsbC50dXJuSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbW9kZWxSZXNwb25zZXMucHVzaChzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY29udGV4dC51c2FnZS5hZGQoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UudXNhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFmdGVyIGVhY2ggdHVybiByZWNvcmQgdGhlIGl0ZW1zIGVjaG9lZCBieSB0aGUgc2VydmVyIHNvIGZ1dHVyZSByZXF1ZXN0cyBvbmx5XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmNsdWRlIHRoZSBpbmNyZW1lbnRhbCBpbnB1dHMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBhY2tub3dsZWRnZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyPy50cmFja1NlcnZlckl0ZW1zKHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuc2V0Q29udmVyc2F0aW9uQ29udGV4dChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLmNvbnZlcnNhdGlvbklkLCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByZXZpb3VzUmVzcG9uc2VJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRSZXNwb25zZSA9IHByb2Nlc3NNb2RlbFJlc3BvbnNlKHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fY3VycmVudEFnZW50LCBwcmVwYXJlZENhbGwudG9vbHMsIHByZXBhcmVkQ2FsbC5oYW5kb2Zmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgcmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2Uoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5VHVyblJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVyblJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZ2VudDogc3RhdGUuX2N1cnJlbnRBZ2VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sc1VzZWQ6IHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2U/LnRvb2xzVXNlZCA/PyBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldFR1cm5QZXJzaXN0ZW5jZTogIWlzUmVzdW1lZFN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBndWFyZHJhaWxUcmFja2VyLmF3YWl0Q29tcGxldGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTdGVwID0gc3RhdGUuX2N1cnJlbnRTdGVwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRTdGVwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1J1bm5pbmcgbmV4dCBsb29wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGN1cnJlbnRTdGVwLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk91dHB1dEd1YXJkcmFpbHMoc3RhdGUsIHRoaXMub3V0cHV0R3VhcmRyYWlsRGVmcywgY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRBZ2VudCwgY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBjdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUnVuUmVzdWx0KHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25leHRfc3RlcF9oYW5kb2ZmJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zZXRDdXJyZW50QWdlbnQoY3VycmVudFN0ZXAubmV3QWdlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zZXRDdXJyZW50QWdlbnRTcGFuKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UndmUgcHJvY2Vzc2VkIHRoZSBoYW5kb2ZmLCBzbyB3ZSBuZWVkIHRvIHJ1biB0aGUgbG9vcCBhZ2Fpbi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW50ZXJydXB0ZWQuIERvbid0IHJ1biBhbnkgZ3VhcmRyYWlscy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJ1blJlc3VsdChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICduZXh0X3N0ZXBfcnVuX2FnYWluJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSdW5uaW5nIG5leHQgbG9vcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1J1bm5pbmcgbmV4dCBsb29wJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZWRSZXN1bHQgPSBhd2FpdCB0cnlIYW5kbGVSdW5FcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsZXJzOiBvcHRpb25zLmVycm9ySGFuZGxlcnMsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dEd1YXJkcmFpbERlZnM6IHRoaXMub3V0cHV0R3VhcmRyYWlsRGVmcyxcbiAgICAgICAgICAgICAgICAgICAgZW1pdEFnZW50RW5kOiAoY29udGV4dCwgYWdlbnQsIG91dHB1dFRleHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfZW5kJywgY29udGV4dCwgYWdlbnQsIG91dHB1dFRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgY29udGV4dCwgb3V0cHV0VGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZWRSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZWRSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gYWdlbnQgcnVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZXJyb3I6IFN0cmluZyhlcnIpIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlICE9PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGRpc3Bvc2VSZXNvbHZlZENvbXB1dGVycyh7IHJ1bkNvbnRleHQ6IHN0YXRlLl9jb250ZXh0IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBkaXNwb3NlIGNvbXB1dGVycyBhZnRlciBydW46ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3QgZW5kIHRoZSBzcGFuIGlmIHRoZSBydW4gd2FzIGludGVycnVwdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1blN0cmVhbUxvb3AocmVzdWx0LCBvcHRpb25zLCBpc1Jlc3VtZWRTdGF0ZSwgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQsIHNlc3Npb25JbnB1dFVwZGF0ZSwgcHJlc2VydmVUdXJuUGVyc2lzdGVuY2VPblJlc3VtZSkge1xuICAgICAgICBjb25zdCByZXNvbHZlZENvbnZlcnNhdGlvbklkID0gb3B0aW9ucy5jb252ZXJzYXRpb25JZCA/PyByZXN1bHQuc3RhdGUuX2NvbnZlcnNhdGlvbklkO1xuICAgICAgICBjb25zdCByZXNvbHZlZFByZXZpb3VzUmVzcG9uc2VJZCA9IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkID8/IHJlc3VsdC5zdGF0ZS5fcHJldmlvdXNSZXNwb25zZUlkO1xuICAgICAgICBjb25zdCBzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uID0gQm9vbGVhbihyZXNvbHZlZENvbnZlcnNhdGlvbklkKSB8fCBCb29sZWFuKHJlc29sdmVkUHJldmlvdXNSZXNwb25zZUlkKTtcbiAgICAgICAgY29uc3Qgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciA9IHNlcnZlck1hbmFnZXNDb252ZXJzYXRpb25cbiAgICAgICAgICAgID8gbmV3IFNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIoe1xuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiByZXNvbHZlZENvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUmVzcG9uc2VJZDogcmVzb2x2ZWRQcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyKSB7XG4gICAgICAgICAgICByZXN1bHQuc3RhdGUuc2V0Q29udmVyc2F0aW9uQ29udGV4dChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLmNvbnZlcnNhdGlvbklkLCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByZXZpb3VzUmVzcG9uc2VJZCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNlbnRJbnB1dFRvTW9kZWwgPSBmYWxzZTtcbiAgICAgICAgbGV0IHN0cmVhbUlucHV0UGVyc2lzdGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBndWFyZHJhaWxUcmFja2VyID0gY3JlYXRlR3VhcmRyYWlsVHJhY2tlcigpO1xuICAgICAgICBjb25zdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChzdHJlYW1JbnB1dFBlcnNpc3RlZCB8fCAhZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBCb3RoIHN1Y2Nlc3MgYW5kIGVycm9yIHBhdGhzIGNhbGwgdGhpcyBoZWxwZXIsIHNvIGd1YXJkIGFnYWluc3QgbXVsdGlwbGUgd3JpdGVzLlxuICAgICAgICAgICAgYXdhaXQgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQoKTtcbiAgICAgICAgICAgIHN0cmVhbUlucHV0UGVyc2lzdGVkID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZTtcbiAgICAgICAgY29uc3QgYXdhaXRHdWFyZHJhaWxzQW5kUGVyc2lzdElucHV0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgZ3VhcmRyYWlsVHJhY2tlci5hd2FpdENvbXBsZXRpb24oKTtcbiAgICAgICAgICAgIGlmIChndWFyZHJhaWxUcmFja2VyLmZhaWxlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IGd1YXJkcmFpbFRyYWNrZXIuZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VudElucHV0VG9Nb2RlbCAmJlxuICAgICAgICAgICAgICAgICFzdHJlYW1JbnB1dFBlcnNpc3RlZCAmJlxuICAgICAgICAgICAgICAgICFndWFyZHJhaWxUcmFja2VyLmZhaWxlZCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHBlcnNpc3RTdHJlYW1JbnB1dElmTmVlZGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyICYmIGlzUmVzdW1lZFN0YXRlKSB7XG4gICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByaW1lRnJvbVN0YXRlKHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbElucHV0OiByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsXG4gICAgICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHJlc3VsdC5zdGF0ZS5fbW9kZWxSZXNwb25zZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5zZXRDb252ZXJzYXRpb25Db250ZXh0KHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIuY29udmVyc2F0aW9uSWQsIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIucHJldmlvdXNSZXNwb25zZUlkKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUcmFja3Mgd2hlbiB3ZSByZXN1bWUgYW4gYXBwcm92YWwgaW50ZXJydXB0aW9uIHNvIHRoZSBuZXh0IHJ1bi1hZ2FpbiBzdGVwIHN0YXlzIGluIHRoZSBzYW1lIHR1cm4uXG4gICAgICAgIGxldCBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRBZ2VudCA9IHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50O1xuICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID8/IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQ29udGludWluZyBmcm9tIGludGVycnVwdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIXJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdObyBtb2RlbCByZXNwb25zZSBmb3VuZCBpbiBwcmV2aW91cyBzdGF0ZScsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZXJydXB0ZWRPdXRjb21lID0gYXdhaXQgcmVzdW1lSW50ZXJydXB0ZWRUdXJuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiByZXN1bHQuc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5uZXI6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvblN0ZXBJdGVtczogKHR1cm5SZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCB0dXJuUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCByZXNldCBjb3VudGVyIGhlcmUgLSByZXNvbHZlSW50ZXJydXB0ZWRUdXJuIGFscmVhZHkgYWRqdXN0ZWQgaXQgdmlhIHJld2luZCBsb2dpY1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY291bnRlciB3aWxsIGJlIHJlc2V0IHdoZW4gX2N1cnJlbnRUdXJuIGlzIGluY3JlbWVudGVkIChzdGFydGluZyBhIG5ldyB0dXJuKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHNob3VsZFJldHVybiwgc2hvdWxkQ29udGludWUgfSA9IGhhbmRsZUludGVycnVwdGVkT3V0Y29tZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogcmVzdWx0LnN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0Y29tZTogaW50ZXJydXB0ZWRPdXRjb21lLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q29udGludWluZ0ludGVycnVwdGVkVHVybjogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRSZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBzdGlsbCBpbiBhbiBpbnRlcnJ1cHRpb24sIHNvIHdlIG5lZWQgdG8gYXZvaWQgYW4gaW5maW5pdGUgbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRDb250aW51ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsVHJhY2tlciA9IGNyZWF0ZUd1YXJkcmFpbFRyYWNrZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2FzQ29udGludWluZ0ludGVycnVwdGVkVHVybiA9IGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm47XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNUdXJuID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNQZXJzaXN0ZWRDb3VudCA9IHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzR2VuZXJhdGVkQ291bnQgPSByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlcGFyZWRUdXJuID0gYXdhaXQgcHJlcGFyZVR1cm4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHJlc3VsdC5zdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiByZXN1bHQuaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZWRJdGVtczogcmVzdWx0Lm5ld0l0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXN1bWVkU3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVzZXJ2ZVR1cm5QZXJzaXN0ZW5jZU9uUmVzdW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybjogd2FzQ29udGludWluZ0ludGVycnVwdGVkVHVybixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dEd1YXJkcmFpbERlZnM6IHRoaXMuaW5wdXRHdWFyZHJhaWxEZWZzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsSGFuZGxlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblBhcmFsbGVsU3RhcnQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsVHJhY2tlci5tYXJrUGVuZGluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25QYXJhbGxlbEVycm9yOiAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkcmFpbFRyYWNrZXIuc2V0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRBZ2VudFN0YXJ0OiAoY29udGV4dCwgYWdlbnQsIGlucHV0SXRlbXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3N0YXJ0JywgY29udGV4dCwgYWdlbnQsIGlucHV0SXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmVzZXJ2ZVR1cm5QZXJzaXN0ZW5jZU9uUmVzdW1lICYmXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuID4gcHJldmlvdXNUdXJuICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1BlcnNpc3RlZENvdW50IDw9IHByZXZpb3VzR2VuZXJhdGVkQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXNlcnZlIHBlcnNpc3RlZCBvZmZzZXRzIGZyb20gYSByZXN1bWVkIHJ1biB0byBhdm9pZCByZS1zYXZpbmcgcHJpb3IgaXRlbXMuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1BlcnNpc3RlZENvdW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgYXJ0aWZhY3RzLCB0dXJuSW5wdXQgfSA9IHByZXBhcmVkVHVybjtcbiAgICAgICAgICAgICAgICAgICAgcGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlID0gcHJlcGFyZWRUdXJuLnBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZTtcbiAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsVHJhY2tlci5zZXRQcm9taXNlKHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGd1YXJkcmFpbHMgYXJlIHN0aWxsIHJ1bm5pbmcsIGRlZmVyIGlucHV0IHBlcnNpc3RlbmNlIHVudGlsIHRoZXkgZmluaXNoLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWxheVN0cmVhbUlucHV0UGVyc2lzdGVuY2UgPSBndWFyZHJhaWxUcmFja2VyLnBlbmRpbmc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXBhcmVkQ2FsbCA9IGF3YWl0IHRoaXMuI3ByZXBhcmVNb2RlbENhbGwocmVzdWx0LnN0YXRlLCBvcHRpb25zLCBhcnRpZmFjdHMsIHR1cm5JbnB1dCwgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciwgc2Vzc2lvbklucHV0VXBkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsVHJhY2tlci50aHJvd0lmRXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsUmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dE1hcmtlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrSW5wdXRPbmNlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0TWFya2VkIHx8ICFzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2Ugb25seSBtYXJrIGlucHV0cyBhcyBzZW50IGFmdGVyIHJlY2VpdmluZyB0aGUgZmlyc3Qgc3RyZWFtIGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hpY2ggaXMgdGhlIGVhcmxpZXN0IHJlbGlhYmxlIGNvbmZpcm1hdGlvbiB0aGF0IHRoZSBzZXJ2ZXIgYWNjZXB0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0LiBJZiB0aGUgc3RyZWFtIGZhaWxzIGJlZm9yZSBhbnkgZXZlbnRzLCBsZWF2ZSBpbnB1dHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVubWFya2VkIHNvIGEgcmV0cnkgY2FuIHJlc2VuZCBzYWZlbHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWNvcmQgdGhlIGV4YWN0IGlucHV0IHRoYXQgd2FzIHNlbnQgc28gdGhlIHNlcnZlciB0cmFja2VyIGNhbiBhZHZhbmNlIHNhZmVseS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIubWFya0lucHV0QXNTZW50KHByZXBhcmVkQ2FsbC5zb3VyY2VJdGVtcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckFwcGxpZWQ6IHByZXBhcmVkQ2FsbC5maWx0ZXJBcHBsaWVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbFR1cm5JdGVtczogcHJlcGFyZWRDYWxsLnR1cm5JbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRNYXJrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBzZW50SW5wdXRUb01vZGVsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkZWxheVN0cmVhbUlucHV0UGVyc2lzdGVuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBlcnNpc3RTdHJlYW1JbnB1dElmTmVlZGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgZXZlbnQgb2YgcHJlcGFyZWRDYWxsLm1vZGVsLmdldFN0cmVhbWVkUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uczogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdDogcHJlcGFyZWRDYWxsLnByb21wdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdHJlYW1pbmcgcmVxdWVzdHMgc2hvdWxkIGFsc28gaG9ub3IgZXhwbGljaXRseSBjaG9zZW4gbW9kZWxzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihwcmVwYXJlZENhbGwuZXhwbGljdGx5TW9kZWxTZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7IG92ZXJyaWRlUHJvbXB0TW9kZWw6IHRydWUgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiBwcmVwYXJlZENhbGwucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBwcmVwYXJlZENhbGwuY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5nczogcHJlcGFyZWRDYWxsLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHByZXBhcmVkQ2FsbC5zZXJpYWxpemVkVG9vbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHNFeHBsaWNpdGx5UHJvdmlkZWQ6IHByZXBhcmVkQ2FsbC50b29sc0V4cGxpY2l0bHlQcm92aWRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2ZmczogcHJlcGFyZWRDYWxsLnNlcmlhbGl6ZWRIYW5kb2ZmcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlOiBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUoY3VycmVudEFnZW50Lm91dHB1dFR5cGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IGdldFRyYWNpbmcodGhpcy5jb25maWcudHJhY2luZ0Rpc2FibGVkLCB0aGlzLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWFyZHJhaWxUcmFja2VyLnRocm93SWZFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtJbnB1dE9uY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Jlc3BvbnNlX2RvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQucGFyc2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbFJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IG5ldyBVc2FnZShwYXJzZWQucmVzcG9uc2UudXNhZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBwYXJzZWQucmVzcG9uc2Uub3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZDogcGFyc2VkLnJlc3BvbnNlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2NvbnRleHQudXNhZ2UuYWRkKGZpbmFsUmVzcG9uc2UudXNhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSB1c2VyJ3MgY29kZSBleGl0cyBhIGxvb3AgdG8gY29uc3VtZSB0aGUgc3RyZWFtLCB3ZSBuZWVkIHRvIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgbG9vcCB0byBwcmV2ZW50IGludGVybmFsIGZhbHNlIGVycm9ycyBhbmQgdW5uZWNlc3NhcnkgcHJvY2Vzc2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhd2FpdEd1YXJkcmFpbHNBbmRQZXJzaXN0SW5wdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1blJhd01vZGVsU3RyZWFtRXZlbnQoZXZlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Fib3J0RXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbnRJbnB1dFRvTW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya0lucHV0T25jZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhd2FpdEd1YXJkcmFpbHNBbmRQZXJzaXN0SW5wdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya0lucHV0T25jZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGF3YWl0R3VhcmRyYWlsc0FuZFBlcnNpc3RJbnB1dCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbmFsUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ01vZGVsIGRpZCBub3QgcHJvZHVjZSBhIGZpbmFsIHJlc3BvbnNlIScsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlID0gZmluYWxSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgdHJhY2tlciBpbiBzeW5jIHdpdGggdGhlIHN0cmVhbWVkIHJlc3BvbnNlIHNvIHJlY29ubmVjdGlvbnMgcmVtYWluIGFjY3VyYXRlLlxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyPy50cmFja1NlcnZlckl0ZW1zKGZpbmFsUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLnNldENvbnZlcnNhdGlvbkNvbnRleHQoc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlci5jb252ZXJzYXRpb25JZCwgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlci5wcmV2aW91c1Jlc3BvbnNlSWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbW9kZWxSZXNwb25zZXMucHVzaChyZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRSZXNwb25zZSA9IHByb2Nlc3NNb2RlbFJlc3BvbnNlKHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgY3VycmVudEFnZW50LCBwcmVwYXJlZENhbGwudG9vbHMsIHByZXBhcmVkQ2FsbC5oYW5kb2Zmcyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlY29yZCB0aGUgaXRlbXMgZW1pdHRlZCBkaXJlY3RseSBmcm9tIHRoZSBtb2RlbCByZXNwb25zZSBzbyB3ZSBkbyBub3RcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RyZWFtIHRoZW0gYWdhaW4gYWZ0ZXIgdG9vbHMgYW5kIG90aGVyIHNpZGUgZWZmZWN0cyBmaW5pc2guXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZVRvb2xJdGVtcyA9IG5ldyBTZXQocHJvY2Vzc2VkUmVzcG9uc2UubmV3SXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJlVG9vbEl0ZW1zLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1TdGVwSXRlbXNUb1J1blJlc3VsdChyZXN1bHQsIHByb2Nlc3NlZFJlc3BvbnNlLm5ld0l0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgcmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2UoY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQsIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGFwcGx5VHVyblJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogcmVzdWx0LnN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHVyblJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50OiBjdXJyZW50QWdlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sc1VzZWQ6IHByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0VHVyblBlcnNpc3RlbmNlOiAhaXNSZXN1bWVkU3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBvblN0ZXBJdGVtczogKHN0ZXApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCBzdGVwLCB7IHNraXBJdGVtczogcHJlVG9vbEl0ZW1zIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTdGVwID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGN1cnJlbnRTdGVwLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBydW5PdXRwdXRHdWFyZHJhaWxzKHJlc3VsdC5zdGF0ZSwgdGhpcy5vdXRwdXRHdWFyZHJhaWxEZWZzLCBjdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBlcnNpc3RTdHJlYW1JbnB1dElmTmVlZGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHdWFyZHJhaWxzIG11c3Qgc3VjY2VlZCBiZWZvcmUgcGVyc2lzdGluZyBzZXNzaW9uIG1lbW9yeSB0byBhdm9pZCBzdG9yaW5nIGJsb2NrZWQgb3V0cHV0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNhdmVTdHJlYW1SZXN1bHRUb1Nlc3Npb24ob3B0aW9ucy5zZXNzaW9uLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRBZ2VudCwgY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9lbmQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgYXJlIGRvbmUgZm9yIG5vdy4gRG9uJ3QgcnVuIGFueSBvdXRwdXQgZ3VhcmRyYWlscy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBlcnNpc3RTdHJlYW1JbnB1dElmTmVlZGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzYXZlU3RyZWFtUmVzdWx0VG9TZXNzaW9uKG9wdGlvbnMuc2Vzc2lvbiwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmV4dF9zdGVwX2hhbmRvZmYnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLnNldEN1cnJlbnRBZ2VudChjdXJyZW50U3RlcC5uZXdBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5zZXRDdXJyZW50QWdlbnRTcGFuKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50KHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlJ3ZlIHByb2Nlc3NlZCB0aGUgaGFuZG9mZiwgc28gd2UgbmVlZCB0byBydW4gdGhlIGxvb3AgYWdhaW4uXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmV4dF9zdGVwX3J1bl9hZ2Fpbic6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSdW5uaW5nIG5leHQgbG9vcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1J1bm5pbmcgbmV4dCBsb29wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChndWFyZHJhaWxUcmFja2VyLnBlbmRpbmcpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBndWFyZHJhaWxUcmFja2VyLmF3YWl0Q29tcGxldGlvbih7IHN1cHByZXNzRXJyb3JzOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbnRJbnB1dFRvTW9kZWwgJiZcbiAgICAgICAgICAgICAgICAhc3RyZWFtSW5wdXRQZXJzaXN0ZWQgJiZcbiAgICAgICAgICAgICAgICAhZ3VhcmRyYWlsVHJhY2tlci5mYWlsZWQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGFuZGxlZFJlc3VsdCA9IGF3YWl0IHRyeUhhbmRsZVJ1bkVycm9yKHtcbiAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICBzdGF0ZTogcmVzdWx0LnN0YXRlLFxuICAgICAgICAgICAgICAgIGVycm9ySGFuZGxlcnM6IG9wdGlvbnMuZXJyb3JIYW5kbGVycyxcbiAgICAgICAgICAgICAgICBvdXRwdXRHdWFyZHJhaWxEZWZzOiB0aGlzLm91dHB1dEd1YXJkcmFpbERlZnMsXG4gICAgICAgICAgICAgICAgZW1pdEFnZW50RW5kOiAoY29udGV4dCwgYWdlbnQsIG91dHB1dFRleHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCBjb250ZXh0LCBhZ2VudCwgb3V0cHV0VGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIGNvbnRleHQsIG91dHB1dFRleHQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3RyZWFtUmVzdWx0OiByZXN1bHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChoYW5kbGVkUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2F2ZVN0cmVhbVJlc3VsdFRvU2Vzc2lvbihvcHRpb25zLnNlc3Npb24sIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gYWdlbnQgcnVuJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBlcnJvcjogU3RyaW5nKGVycm9yKSB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoZ3VhcmRyYWlsVHJhY2tlci5wZW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZ3VhcmRyYWlsVHJhY2tlci5hd2FpdENvbXBsZXRpb24oeyBzdXBwcmVzc0Vycm9yczogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZW50SW5wdXRUb01vZGVsICYmXG4gICAgICAgICAgICAgICAgIXN0cmVhbUlucHV0UGVyc2lzdGVkICYmXG4gICAgICAgICAgICAgICAgIWd1YXJkcmFpbFRyYWNrZXIuZmFpbGVkKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlICE9PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBkaXNwb3NlUmVzb2x2ZWRDb21wdXRlcnMoeyBydW5Db250ZXh0OiByZXN1bHQuc3RhdGUuX2NvbnRleHQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihgRmFpbGVkIHRvIGRpc3Bvc2UgY29tcHV0ZXJzIGFmdGVyIHJ1bjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyAjcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMsIGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkLCBzZXNzaW9uSW5wdXRVcGRhdGUsIHByZXNlcnZlVHVyblBlcnNpc3RlbmNlT25SZXN1bWUpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBvciByZXVzZSBleGlzdGluZyBzdGF0ZVxuICAgICAgICAgICAgY29uc3QgaXNSZXN1bWVkU3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlO1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBpc1Jlc3VtZWRTdGF0ZVxuICAgICAgICAgICAgICAgID8gaW5wdXRcbiAgICAgICAgICAgICAgICA6IG5ldyBSdW5TdGF0ZShvcHRpb25zLmNvbnRleHQgaW5zdGFuY2VvZiBSdW5Db250ZXh0XG4gICAgICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb250ZXh0XG4gICAgICAgICAgICAgICAgICAgIDogbmV3IFJ1bkNvbnRleHQob3B0aW9ucy5jb250ZXh0KSwgaW5wdXQsIGFnZW50LCBvcHRpb25zLm1heFR1cm5zID8/IERFRkFVTFRfTUFYX1RVUk5TKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkQ29udmVyc2F0aW9uSWQgPSBvcHRpb25zLmNvbnZlcnNhdGlvbklkID8/XG4gICAgICAgICAgICAgICAgKGlzUmVzdW1lZFN0YXRlID8gc3RhdGUuX2NvbnZlcnNhdGlvbklkIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkUHJldmlvdXNSZXNwb25zZUlkID0gb3B0aW9ucy5wcmV2aW91c1Jlc3BvbnNlSWQgPz9cbiAgICAgICAgICAgICAgICAoaXNSZXN1bWVkU3RhdGUgPyBzdGF0ZS5fcHJldmlvdXNSZXNwb25zZUlkIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGlmICghaXNSZXN1bWVkU3RhdGUpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5zZXRDb252ZXJzYXRpb25Db250ZXh0KHJlc29sdmVkQ29udmVyc2F0aW9uSWQsIHJlc29sdmVkUHJldmlvdXNSZXNwb25zZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHN0cmVhbWVkIHJlc3VsdCB3aXRoIGV4aXN0aW5nIHN0YXRlXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgU3RyZWFtZWRSdW5SZXN1bHQoe1xuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbU9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IHJlc3VsdC5fZ2V0QWJvcnRTaWduYWwoKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBTZXR1cCBkZWZhdWx0c1xuICAgICAgICAgICAgcmVzdWx0Lm1heFR1cm5zID0gc3RyZWFtT3B0aW9ucy5tYXhUdXJucyA/PyBzdGF0ZS5fbWF4VHVybnM7XG4gICAgICAgICAgICAvLyBDb250aW51ZSB0aGUgc3RyZWFtIGxvb3Agd2l0aG91dCBibG9ja2luZ1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtTG9vcFByb21pc2UgPSB0aGlzLiNydW5TdHJlYW1Mb29wKHJlc3VsdCwgc3RyZWFtT3B0aW9ucywgaXNSZXN1bWVkU3RhdGUsIGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkLCBzZXNzaW9uSW5wdXRVcGRhdGUsIHByZXNlcnZlVHVyblBlcnNpc3RlbmNlT25SZXN1bWUpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5fZG9uZSgpO1xuICAgICAgICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5fcmFpc2VFcnJvcihlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBBdHRhY2ggdGhlIHN0cmVhbSBsb29wIHByb21pc2Ugc28gdHJhY2UgZW5kIHdhaXRzIGZvciB0aGUgbG9vcCB0byBjb21wbGV0ZVxuICAgICAgICAgICAgcmVzdWx0Ll9zZXRTdHJlYW1Mb29wUHJvbWlzZShzdHJlYW1Mb29wUHJvbWlzZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQXBwbGllcyBjYWxsLWxldmVsIGZpbHRlcnMgYW5kIG1lcmdlcyBzZXNzaW9uIHVwZGF0ZXMgc28gdGhlIG1vZGVsIHJlcXVlc3QgbWlycm9ycyBleGFjdGx5XG4gICAgICogd2hhdCB3ZSBwZXJzaXN0ZWQgZm9yIGhpc3RvcnkuXG4gICAgICovXG4gICAgYXN5bmMgI3ByZXBhcmVNb2RlbENhbGwoc3RhdGUsIG9wdGlvbnMsIGFydGlmYWN0cywgdHVybklucHV0LCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLCBzZXNzaW9uSW5wdXRVcGRhdGUpIHtcbiAgICAgICAgY29uc3QgeyBtb2RlbCwgZXhwbGljdGx5TW9kZWxTZXQsIHJlc29sdmVkTW9kZWxOYW1lIH0gPSBhd2FpdCB0aGlzLiNyZXNvbHZlTW9kZWxGb3JBZ2VudChzdGF0ZS5fY3VycmVudEFnZW50KTtcbiAgICAgICAgbGV0IG1vZGVsU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICAuLi50aGlzLmNvbmZpZy5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgLi4uc3RhdGUuX2N1cnJlbnRBZ2VudC5tb2RlbFNldHRpbmdzLFxuICAgICAgICB9O1xuICAgICAgICBtb2RlbFNldHRpbmdzID0gYWRqdXN0TW9kZWxTZXR0aW5nc0Zvck5vbkdQVDVSdW5uZXJNb2RlbChleHBsaWN0bHlNb2RlbFNldCwgc3RhdGUuX2N1cnJlbnRBZ2VudC5tb2RlbFNldHRpbmdzLCBtb2RlbCwgbW9kZWxTZXR0aW5ncywgcmVzb2x2ZWRNb2RlbE5hbWUpO1xuICAgICAgICBtb2RlbFNldHRpbmdzID0gbWF5YmVSZXNldFRvb2xDaG9pY2Uoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX3Rvb2xVc2VUcmFja2VyLCBtb2RlbFNldHRpbmdzKTtcbiAgICAgICAgc3RhdGUuX2xhc3RNb2RlbFNldHRpbmdzID0gbW9kZWxTZXR0aW5ncztcbiAgICAgICAgY29uc3Qgc3lzdGVtSW5zdHJ1Y3Rpb25zID0gYXdhaXQgc3RhdGUuX2N1cnJlbnRBZ2VudC5nZXRTeXN0ZW1Qcm9tcHQoc3RhdGUuX2NvbnRleHQpO1xuICAgICAgICBjb25zdCBwcm9tcHQgPSBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldFByb21wdChzdGF0ZS5fY29udGV4dCk7XG4gICAgICAgIGNvbnN0IHsgbW9kZWxJbnB1dCwgc291cmNlSXRlbXMsIHBlcnNpc3RlZEl0ZW1zLCBmaWx0ZXJBcHBsaWVkIH0gPSBhd2FpdCBhcHBseUNhbGxNb2RlbElucHV0RmlsdGVyKHN0YXRlLl9jdXJyZW50QWdlbnQsIG9wdGlvbnMuY2FsbE1vZGVsSW5wdXRGaWx0ZXIsIHN0YXRlLl9jb250ZXh0LCB0dXJuSW5wdXQsIHN5c3RlbUluc3RydWN0aW9ucyk7XG4gICAgICAgIC8vIFByb3ZpZGUgZmlsdGVyZWQgY2xvbmVzIHdoZW5ldmVyIGZpbHRlcnMgcnVuIHNvIHNlc3Npb24gaGlzdG9yeSBtaXJyb3JzIHRoZSBtb2RlbCBwYXlsb2FkLlxuICAgICAgICAvLyBSZXR1cm5pbmcgYW4gZW1wdHkgYXJyYXkgaXMgaW50ZW50aW9uYWw6IGl0IHRlbGxzIHRoZSBzZXNzaW9uIGxheWVyIHRvIHBlcnNpc3QgXCJub3RoaW5nXCJcbiAgICAgICAgLy8gaW5zdGVhZCBvZiBmYWxsaW5nIGJhY2sgdG8gdGhlIHVuZmlsdGVyZWQgb3JpZ2luYWxzIHdoZW4gdGhlIGZpbHRlciByZWRhY3RzIGV2ZXJ5dGhpbmcuXG4gICAgICAgIHNlc3Npb25JbnB1dFVwZGF0ZT8uKHNvdXJjZUl0ZW1zLCBmaWx0ZXJBcHBsaWVkID8gcGVyc2lzdGVkSXRlbXMgOiB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBwcmV2aW91c1Jlc3BvbnNlSWQgPSBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyPy5wcmV2aW91c1Jlc3BvbnNlSWQgPz9cbiAgICAgICAgICAgIG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkO1xuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25JZCA9IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXI/LmNvbnZlcnNhdGlvbklkID8/IG9wdGlvbnMuY29udmVyc2F0aW9uSWQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5hcnRpZmFjdHMsXG4gICAgICAgICAgICBtb2RlbCxcbiAgICAgICAgICAgIGV4cGxpY3RseU1vZGVsU2V0LFxuICAgICAgICAgICAgbW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgIG1vZGVsSW5wdXQsXG4gICAgICAgICAgICBwcm9tcHQsXG4gICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgIHNvdXJjZUl0ZW1zLFxuICAgICAgICAgICAgZmlsdGVyQXBwbGllZCxcbiAgICAgICAgICAgIHR1cm5JbnB1dCxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyBpbnRlcm5hbCBoZWxwZXJzIGFuZCBjb25zdGFudHNcbmxldCBkZWZhdWx0UnVubmVyO1xuY29uc3QgZ2V0RGVmYXVsdFJ1bm5lciA9ICgpID0+IHtcbiAgICBpZiAoIWRlZmF1bHRSdW5uZXIpIHtcbiAgICAgICAgZGVmYXVsdFJ1bm5lciA9IG5ldyBSdW5uZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmF1bHRSdW5uZXI7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IEFnZW50SG9va3MgfSBmcm9tIFwiLi9saWZlY3ljbGUubWpzXCI7XG5pbXBvcnQgeyBnZXRBbGxNY3BUb29scyB9IGZyb20gXCIuL21jcC5tanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRNb2RlbFNldHRpbmdzLCBncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZCwgaXNHcHQ1RGVmYXVsdCwgfSBmcm9tIFwiLi9kZWZhdWx0TW9kZWwubWpzXCI7XG5pbXBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmltcG9ydCB7IHRvb2wsIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IGdldEhhbmRvZmYgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuaW1wb3J0IHsgUnVubmVyIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IHsgUnVuU3RhdGUgfSBmcm9tIFwiLi9ydW5TdGF0ZS5tanNcIjtcbmltcG9ydCB7IHRvRnVuY3Rpb25Ub29sTmFtZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0T3V0cHV0VGV4dCB9IGZyb20gXCIuL3V0aWxzL21lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgaXNBZ2VudFRvb2xJbnB1dCB9IGZyb20gXCIuL3V0aWxzL3R5cGVHdWFyZHMubWpzXCI7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCB9IGZyb20gXCIuL3V0aWxzL3R5cGVHdWFyZHMubWpzXCI7XG5pbXBvcnQgeyBNb2RlbEJlaGF2aW9yRXJyb3IsIFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuLy8gUGVyLXByb2Nlc3MsIGVwaGVtZXJhbCBtYXAgbGlua2luZyBhIGZ1bmN0aW9uIHRvb2wgY2FsbCB0byBpdHMgbmVzdGVkXG4vLyBBZ2VudCBydW4gcmVzdWx0IHdpdGhpbiB0aGUgc2FtZSBydW47IGVudHJ5IGlzIHJlbW92ZWQgYWZ0ZXIgY29uc3VtcHRpb24uXG5jb25zdCBhZ2VudFRvb2xSdW5SZXN1bHRzID0gbmV3IFdlYWtNYXAoKTtcbmV4cG9ydCBmdW5jdGlvbiBzYXZlQWdlbnRUb29sUnVuUmVzdWx0KHRvb2xDYWxsLCBydW5SZXN1bHQpIHtcbiAgICBpZiAodG9vbENhbGwpIHtcbiAgICAgICAgYWdlbnRUb29sUnVuUmVzdWx0cy5zZXQodG9vbENhbGwsIHJ1blJlc3VsdCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnN1bWVBZ2VudFRvb2xSdW5SZXN1bHQodG9vbENhbGwpIHtcbiAgICBjb25zdCBydW5SZXN1bHQgPSBhZ2VudFRvb2xSdW5SZXN1bHRzLmdldCh0b29sQ2FsbCk7XG4gICAgaWYgKHJ1blJlc3VsdCkge1xuICAgICAgICBhZ2VudFRvb2xSdW5SZXN1bHRzLmRlbGV0ZSh0b29sQ2FsbCk7XG4gICAgfVxuICAgIHJldHVybiBydW5SZXN1bHQ7XG59XG4vLyBUaGUgcGFyYW1ldGVyIHR5cGUgZm8gbmVlZEFwcHJvdmFsIGZ1bmN0aW9uIGZvciB0aGUgdG9vbCBjcmVhdGVkIGJ5IEFnZW50LmFzVG9vbCgpIG1ldGhvZFxuY29uc3QgQWdlbnRBc1Rvb2xOZWVkQXBwcm92YWxTY2hhbWUgPSB6Lm9iamVjdCh7IGlucHV0OiB6LnN0cmluZygpIH0pO1xuLyoqXG4gKiBUaGUgY2xhc3MgcmVwcmVzZW50aW5nIGFuIEFJIGFnZW50IGNvbmZpZ3VyZWQgd2l0aCBpbnN0cnVjdGlvbnMsIHRvb2xzLCBndWFyZHJhaWxzLCBoYW5kb2ZmcyBhbmQgbW9yZS5cbiAqXG4gKiBXZSBzdHJvbmdseSByZWNvbW1lbmQgcGFzc2luZyBgaW5zdHJ1Y3Rpb25zYCwgd2hpY2ggaXMgdGhlIFwic3lzdGVtIHByb21wdFwiIGZvciB0aGUgYWdlbnQuIEluXG4gKiBhZGRpdGlvbiwgeW91IGNhbiBwYXNzIGBoYW5kb2ZmRGVzY3JpcHRpb25gLCB3aGljaCBpcyBhIGh1bWFuLXJlYWRhYmxlIGRlc2NyaXB0aW9uIG9mIHRoZVxuICogYWdlbnQsIHVzZWQgd2hlbiB0aGUgYWdlbnQgaXMgdXNlZCBpbnNpZGUgdG9vbHMvaGFuZG9mZnMuXG4gKlxuICogQWdlbnRzIGFyZSBnZW5lcmljIG9uIHRoZSBjb250ZXh0IHR5cGUuIFRoZSBjb250ZXh0IGlzIGEgKG11dGFibGUpIG9iamVjdCB5b3UgY3JlYXRlLiBJdCBpc1xuICogcGFzc2VkIHRvIHRvb2wgZnVuY3Rpb25zLCBoYW5kb2ZmcywgZ3VhcmRyYWlscywgZXRjLlxuICovXG5leHBvcnQgY2xhc3MgQWdlbnQgZXh0ZW5kcyBBZ2VudEhvb2tzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gQWdlbnQgd2l0aCBoYW5kb2ZmcyBhbmQgYXV0b21hdGljYWxseSBpbmZlciB0aGUgdW5pb24gdHlwZSBmb3IgVE91dHB1dCBmcm9tIHRoZSBoYW5kb2ZmIGFnZW50cycgb3V0cHV0IHR5cGVzLlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWdlbnQoe1xuICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgICAgaGFuZG9mZnM6IGNvbmZpZy5oYW5kb2ZmcyxcbiAgICAgICAgICAgIG91dHB1dFR5cGU6IGNvbmZpZy5vdXRwdXRUeXBlLFxuICAgICAgICAgICAgaGFuZG9mZk91dHB1dFR5cGVXYXJuaW5nRW5hYmxlZDogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUiA9ICcnO1xuICAgIG5hbWU7XG4gICAgaW5zdHJ1Y3Rpb25zO1xuICAgIHByb21wdDtcbiAgICBoYW5kb2ZmRGVzY3JpcHRpb247XG4gICAgaGFuZG9mZnM7XG4gICAgbW9kZWw7XG4gICAgbW9kZWxTZXR0aW5ncztcbiAgICB0b29scztcbiAgICBtY3BTZXJ2ZXJzO1xuICAgIGlucHV0R3VhcmRyYWlscztcbiAgICBvdXRwdXRHdWFyZHJhaWxzO1xuICAgIG91dHB1dFR5cGUgPSAndGV4dCc7XG4gICAgdG9vbFVzZUJlaGF2aW9yO1xuICAgIHJlc2V0VG9vbENob2ljZTtcbiAgICBfdG9vbHNFeHBsaWNpdGx5Q29uZmlndXJlZDtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcubmFtZSAhPT0gJ3N0cmluZycgfHwgY29uZmlnLm5hbWUudHJpbSgpID09PSAnJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignQWdlbnQgbXVzdCBoYXZlIGEgbmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWUgPSBjb25maWcubmFtZTtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSBjb25maWcuaW5zdHJ1Y3Rpb25zID8/IEFnZW50LkRFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVI7XG4gICAgICAgIHRoaXMucHJvbXB0ID0gY29uZmlnLnByb21wdDtcbiAgICAgICAgdGhpcy5oYW5kb2ZmRGVzY3JpcHRpb24gPSBjb25maWcuaGFuZG9mZkRlc2NyaXB0aW9uID8/ICcnO1xuICAgICAgICB0aGlzLmhhbmRvZmZzID0gY29uZmlnLmhhbmRvZmZzID8/IFtdO1xuICAgICAgICB0aGlzLm1vZGVsID0gY29uZmlnLm1vZGVsID8/ICcnO1xuICAgICAgICB0aGlzLm1vZGVsU2V0dGluZ3MgPSBjb25maWcubW9kZWxTZXR0aW5ncyA/PyBnZXREZWZhdWx0TW9kZWxTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLnRvb2xzID0gY29uZmlnLnRvb2xzID8/IFtdO1xuICAgICAgICB0aGlzLl90b29sc0V4cGxpY2l0bHlDb25maWd1cmVkID0gY29uZmlnLnRvb2xzICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubWNwU2VydmVycyA9IGNvbmZpZy5tY3BTZXJ2ZXJzID8/IFtdO1xuICAgICAgICB0aGlzLmlucHV0R3VhcmRyYWlscyA9IGNvbmZpZy5pbnB1dEd1YXJkcmFpbHMgPz8gW107XG4gICAgICAgIHRoaXMub3V0cHV0R3VhcmRyYWlscyA9IGNvbmZpZy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdO1xuICAgICAgICBpZiAoY29uZmlnLm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VHlwZSA9IGNvbmZpZy5vdXRwdXRUeXBlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9vbFVzZUJlaGF2aW9yID0gY29uZmlnLnRvb2xVc2VCZWhhdmlvciA/PyAncnVuX2xsbV9hZ2Fpbic7XG4gICAgICAgIHRoaXMucmVzZXRUb29sQ2hvaWNlID0gY29uZmlnLnJlc2V0VG9vbENob2ljZSA/PyB0cnVlO1xuICAgICAgICBpZiAoXG4gICAgICAgIC8vIFRoZSB1c2VyIHNldHMgYSBub24tZGVmYXVsdCBtb2RlbFxuICAgICAgICBjb25maWcubW9kZWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgbW9kZWwgaXMgZ3B0LTVcbiAgICAgICAgICAgIGlzR3B0NURlZmF1bHQoKSAmJlxuICAgICAgICAgICAgLy8gSG93ZXZlciwgdGhlIHNwZWNpZmllZCBtb2RlbCBpcyBub3QgYSBncHQtNSBtb2RlbFxuICAgICAgICAgICAgKHR5cGVvZiBjb25maWcubW9kZWwgIT09ICdzdHJpbmcnIHx8XG4gICAgICAgICAgICAgICAgIWdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkKGNvbmZpZy5tb2RlbCkpICYmXG4gICAgICAgICAgICAvLyBUaGUgbW9kZWwgc2V0dGluZ3MgYXJlIG5vdCBjdXN0b21pemVkIGZvciB0aGUgc3BlY2lmaWVkIG1vZGVsXG4gICAgICAgICAgICBjb25maWcubW9kZWxTZXR0aW5ncyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBJbiB0aGlzIHNjZW5hcmlvLCB3ZSBzaG91bGQgdXNlIGEgZ2VuZXJpYyBtb2RlbCBzZXR0aW5nc1xuICAgICAgICAgICAgLy8gYmVjYXVzZSBub24tZ3B0LTUgbW9kZWxzIGFyZSBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSBkZWZhdWx0IGdwdC01IG1vZGVsIHNldHRpbmdzLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGJlc3QtZWZmb3J0IGF0dGVtcHQgdG8gbWFrZSB0aGUgYWdlbnQgd29yayB3aXRoIG5vbi1ncHQtNSBtb2RlbHMuXG4gICAgICAgICAgICB0aGlzLm1vZGVsU2V0dGluZ3MgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICAvLyAtLS0gUnVudGltZSB3YXJuaW5nIGZvciBoYW5kb2ZmIG91dHB1dCB0eXBlIGNvbXBhdGliaWxpdHkgLS0tXG4gICAgICAgIGlmIChjb25maWcuaGFuZG9mZk91dHB1dFR5cGVXYXJuaW5nRW5hYmxlZCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBjb25maWcuaGFuZG9mZk91dHB1dFR5cGVXYXJuaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFuZG9mZnMgJiYgdGhpcy5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0VHlwZXMgPSBuZXcgU2V0KFtKU09OLnN0cmluZ2lmeSh0aGlzLm91dHB1dFR5cGUpXSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBoIG9mIHRoaXMuaGFuZG9mZnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCdvdXRwdXRUeXBlJyBpbiBoICYmIGgub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZXMuYWRkKEpTT04uc3RyaW5naWZ5KGgub3V0cHV0VHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCdhZ2VudCcgaW4gaCAmJiBoLmFnZW50Lm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGVzLmFkZChKU09OLnN0cmluZ2lmeShoLmFnZW50Lm91dHB1dFR5cGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0VHlwZXMuc2l6ZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFtBZ2VudF0gV2FybmluZzogSGFuZG9mZiBhZ2VudHMgaGF2ZSBkaWZmZXJlbnQgb3V0cHV0IHR5cGVzOiAke0FycmF5LmZyb20ob3V0cHV0VHlwZXMpLmpvaW4oJywgJyl9LiBZb3UgY2FuIG1ha2UgaXQgdHlwZS1zYWZlIGJ5IHVzaW5nIEFnZW50LmNyZWF0ZSh7IC4uLiB9KSBtZXRob2QgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogT3V0cHV0IHNjaGVtYSBuYW1lLlxuICAgICAqL1xuICAgIGdldCBvdXRwdXRTY2hlbWFOYW1lKCkge1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRUeXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIHJldHVybiAndGV4dCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNab2RPYmplY3QodGhpcy5vdXRwdXRUeXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuICdab2RPdXRwdXQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB0aGlzLm91dHB1dFR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXRUeXBlLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIG91dHB1dCB0eXBlOiAke3RoaXMub3V0cHV0VHlwZX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZXMgYSBjb3B5IG9mIHRoZSBhZ2VudCwgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzIGNoYW5nZWQuIEZvciBleGFtcGxlLCB5b3UgY291bGQgZG86XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBjb25zdCBuZXdBZ2VudCA9IGFnZW50LmNsb25lKHsgaW5zdHJ1Y3Rpb25zOiAnTmV3IGluc3RydWN0aW9ucycgfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25maWcgLSBBIHBhcnRpYWwgY29uZmlndXJhdGlvbiB0byBjaGFuZ2UuXG4gICAgICogQHJldHVybnMgQSBuZXcgYWdlbnQgd2l0aCB0aGUgZ2l2ZW4gY2hhbmdlcy5cbiAgICAgKi9cbiAgICBjbG9uZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2VudCh7XG4gICAgICAgICAgICAuLi50aGlzLFxuICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHRoaXMgYWdlbnQgaW50byBhIHRvb2wsIGNhbGxhYmxlIGJ5IG90aGVyIGFnZW50cy5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgZGlmZmVyZW50IGZyb20gaGFuZG9mZnMgaW4gdHdvIHdheXM6XG4gICAgICogMS4gSW4gaGFuZG9mZnMsIHRoZSBuZXcgYWdlbnQgcmVjZWl2ZXMgdGhlIGNvbnZlcnNhdGlvbiBoaXN0b3J5LiBJbiB0aGlzIHRvb2wsIHRoZSBuZXcgYWdlbnRcbiAgICAgKiAgICByZWNlaXZlcyBnZW5lcmF0ZWQgaW5wdXQuXG4gICAgICogMi4gSW4gaGFuZG9mZnMsIHRoZSBuZXcgYWdlbnQgdGFrZXMgb3ZlciB0aGUgY29udmVyc2F0aW9uLiBJbiB0aGlzIHRvb2wsIHRoZSBuZXcgYWdlbnQgaXNcbiAgICAgKiAgICBjYWxsZWQgYXMgYSB0b29sLCBhbmQgdGhlIGNvbnZlcnNhdGlvbiBpcyBjb250aW51ZWQgYnkgdGhlIG9yaWdpbmFsIGFnZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgdG9vbC5cbiAgICAgKiBAcmV0dXJucyBBIHRvb2wgdGhhdCBydW5zIHRoZSBhZ2VudCBhbmQgcmV0dXJucyB0aGUgb3V0cHV0IHRleHQuXG4gICAgICovXG4gICAgYXNUb29sKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyB0b29sTmFtZSwgdG9vbERlc2NyaXB0aW9uLCBjdXN0b21PdXRwdXRFeHRyYWN0b3IsIG5lZWRzQXBwcm92YWwsIHJ1bkNvbmZpZywgcnVuT3B0aW9ucywgcmVzdW1lU3RhdGUsIGlzRW5hYmxlZCwgb25TdHJlYW0sIH0gPSBvcHRpb25zO1xuICAgICAgICAvLyBFdmVudCBoYW5kbGVycyBhcmUgc2NvcGVkIHRvIHRoaXMgYWdlbnQgdG9vbCBpbnN0YW5jZSBhbmQgYXJlIG5vdCBzaGFyZWQ7IHdlIG9ubHkgc3VwcG9ydCByZWdpc3RyYXRpb24gKG5vIHJlbW92YWwpIHRvIGtlZXAgdGhlIEFQSSBzdXJmYWNlIHNtYWxsLlxuICAgICAgICBjb25zdCBldmVudEhhbmRsZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICBjb25zdCBlbWl0RXZlbnQgPSBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIC8vIFdlIGludGVudGlvbmFsbHkga2VlcCBvbmx5IGFkZCBzZW1hbnRpY3MgKG5vIG9mZikgdG8gcmVkdWNlIHN1cmZhY2UgYXJlYTsgaGFuZGxlcnMgYXJlIHNjb3BlZCB0byB0aGlzIGFnZW50IHRvb2wgaW5zdGFuY2UuXG4gICAgICAgICAgICBjb25zdCBzcGVjaWZpYyA9IGV2ZW50SGFuZGxlcnMuZ2V0KGV2ZW50LmV2ZW50LnR5cGUpO1xuICAgICAgICAgICAgY29uc3Qgd2lsZGNhcmQgPSBldmVudEhhbmRsZXJzLmdldCgnKicpO1xuICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlcyA9IFtcbiAgICAgICAgICAgICAgICAuLi4ob25TdHJlYW0gPyBbb25TdHJlYW1dIDogW10pLFxuICAgICAgICAgICAgICAgIC4uLihzcGVjaWZpYyA/IEFycmF5LmZyb20oc3BlY2lmaWMpIDogW10pLFxuICAgICAgICAgICAgICAgIC4uLih3aWxkY2FyZCA/IEFycmF5LmZyb20od2lsZGNhcmQpIDogW10pLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIC8vIFJ1biBhbGwgaGFuZGxlcnMgaW4gcGFyYWxsZWwgc28gYSBzbG93IG9uU3RyZWFtIGNhbGxiYWNrIGRvZXMgbm90IGJsb2NrIG9uKC4uLikgaGFuZGxlcnMgKGFuZCB2aWNlIHZlcnNhKS5cbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChjYW5kaWRhdGVzLm1hcCgoaGFuZGxlcikgPT4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiBoYW5kbGVyKGV2ZW50KSkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYmFzZVRvb2wgPSB0b29sKHtcbiAgICAgICAgICAgIG5hbWU6IHRvb2xOYW1lID8/IHRvRnVuY3Rpb25Ub29sTmFtZSh0aGlzLm5hbWUpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRvb2xEZXNjcmlwdGlvbiA/PyAnJyxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IEFnZW50QXNUb29sTmVlZEFwcHJvdmFsU2NoYW1lLFxuICAgICAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICAgICAgbmVlZHNBcHByb3ZhbCxcbiAgICAgICAgICAgIGlzRW5hYmxlZCxcbiAgICAgICAgICAgIGV4ZWN1dGU6IGFzeW5jIChkYXRhLCBjb250ZXh0LCBkZXRhaWxzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FnZW50VG9vbElucHV0KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0FnZW50IHRvb2wgY2FsbGVkIHdpdGggaW52YWxpZCBpbnB1dCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBydW5uZXIgPSBuZXcgUnVubmVyKHJ1bkNvbmZpZyA/PyB7fSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdW1lQ29udGV4dFN0cmF0ZWd5ID0gcmVzdW1lU3RhdGU/LmNvbnRleHRTdHJhdGVneSA/PyAnbWVyZ2UnO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VtZUNvbnRleHQgPSByZXN1bWVDb250ZXh0U3RyYXRlZ3kgPT09ICdwcmVmZXJTZXJpYWxpemVkJ1xuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IHJ1bk9wdGlvbnM/LmNvbnRleHQgaW5zdGFuY2VvZiBSdW5Db250ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICA/IHJ1bk9wdGlvbnMuY29udGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0eXBlb2YgcnVuT3B0aW9ucz8uY29udGV4dCAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG5ldyBSdW5Db250ZXh0KHJ1bk9wdGlvbnMuY29udGV4dClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnRleHQ7XG4gICAgICAgICAgICAgICAgbGV0IHJ1bklucHV0ID0gZGF0YS5pbnB1dDtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWlscz8ucmVzdW1lU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VtZUNvbnRleHRTdHJhdGVneSA9PT0gJ3ByZWZlclNlcmlhbGl6ZWQnIHx8ICFyZXN1bWVDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydW5JbnB1dCA9IGF3YWl0IFJ1blN0YXRlLmZyb21TdHJpbmcodGhpcywgZGV0YWlscy5yZXN1bWVTdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdW1lQ29udGV4dFN0cmF0ZWd5ID09PSAnbWVyZ2UnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VtZUNvbnRleHQgIT09IGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bWVDb250ZXh0Ll9tZXJnZUFwcHJvdmFscyhjb250ZXh0LnRvSlNPTigpLmFwcHJvdmFscyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBydW5JbnB1dCA9IGF3YWl0IFJ1blN0YXRlLmZyb21TdHJpbmdXaXRoQ29udGV4dCh0aGlzLCBkZXRhaWxzLnJlc3VtZVN0YXRlLCByZXN1bWVDb250ZXh0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dFN0cmF0ZWd5OiByZXN1bWVDb250ZXh0U3RyYXRlZ3kgPT09ICdyZXBsYWNlJyA/ICdyZXBsYWNlJyA6ICdtZXJnZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBPbmx5IGZsaXAgdG8gc3RyZWFtaW5nIG1vZGUgd2hlbiBhIGhhbmRsZXIgaXMgcHJvdmlkZWQgdG8gYXZvaWQgZXh0cmEgb3ZlcmhlYWQgZm9yIGNhbGxlcnMgdGhhdCBkbyBub3QgbmVlZCBldmVudHMuXG4gICAgICAgICAgICAgICAgLy8gRmxpcCB0byBzdHJlYW1pbmcgaWYgZWl0aGVyIGEgbGVnYWN5IG9uU3RyZWFtIGNhbGxiYWNrIG9yIGV2ZW50IGhhbmRsZXJzIGFyZSByZWdpc3RlcmVkOyBvdGhlcndpc2Ugc3RheSBvbiB0aGUgbm9uLXN0cmVhbSBwYXRoIHRvIGF2b2lkIGV4dHJhIG92ZXJoZWFkLlxuICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZFN0cmVhbSA9IHR5cGVvZiBvblN0cmVhbSA9PT0gJ2Z1bmN0aW9uJyB8fCBldmVudEhhbmRsZXJzLnNpemUgPiAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHNob3VsZFN0cmVhbVxuICAgICAgICAgICAgICAgICAgICA/IGF3YWl0IHJ1bm5lci5ydW4odGhpcywgcnVuSW5wdXQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4ocnVuT3B0aW9ucyA/PyB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIDogYXdhaXQgcnVubmVyLnJ1bih0aGlzLCBydW5JbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihydW5PcHRpb25zID8/IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtUGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWdlbnQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBkZXRhaWxzPy50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGRTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FzdCB0aHJvdWdoIHVua25vd246IHRoZSBhc3luYyBpdGVyYXRvciBzaGFwZSBtYXRjaGVzIGFuZCB3ZSB3YW50IHRvIGRyYWluIHRoZSBzdHJlYW0gZm9yIHNpZGUgZWZmZWN0cyB3aGlsZSBrZWVwaW5nIHRoZSBwdWJsaWMgQVBJIHN0YWJsZS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAvLyBEcmFpbiB0aGUgc3RyZWFtIHRvIGRlbGl2ZXIgZXZlcnkgZXZlbnQgdG8gcmVnaXN0ZXJlZCBoYW5kbGVyczsgZW5zdXJlIGNvbXBsZXRpb24gYXdhaXRlZCBzbyB0aGUgbmVzdGVkIHJ1biBmaW5pc2hlcyBiZWZvcmUgcmV0dXJuaW5nLlxuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIHN0cmVhbVJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZW1pdEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5zdHJlYW1QYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3RyZWFtUmVzdWx0LmNvbXBsZXRlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGVkUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXNTdG9wQXRUb29sTmFtZXMgPSB0eXBlb2YgdGhpcy50b29sVXNlQmVoYXZpb3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFVzZUJlaGF2aW9yICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICdzdG9wQXRUb29sTmFtZXMnIGluIHRoaXMudG9vbFVzZUJlaGF2aW9yO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VzdG9tT3V0cHV0RXh0cmFjdG9yICE9PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICAgICAgICAgIHVzZXNTdG9wQXRUb29sTmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBZb3UncmUgcGFzc2luZyB0aGUgYWdlbnQgKG5hbWU6ICR7dGhpcy5uYW1lfSkgd2l0aCB0b29sVXNlQmVoYXZpb3Iuc3RvcEF0VG9vbE5hbWVzIGNvbmZpZ3VyZWQgYXMgYSB0b29sIHRvIGEgZGlmZmVyZW50IGFnZW50OyB0aGlzIG1heSBub3Qgd29yayBhcyB5b3UgZXhwZWN0LiBZb3UgbWF5IHdhbnQgdG8gaGF2ZSBhIHdyYXBwZXIgZnVuY3Rpb24gdG9vbCB0byBjb25zaXN0ZW50bHkgcmV0dXJuIHRoZSBmaW5hbCBvdXRwdXQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBvdXRwdXRUZXh0O1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VzdG9tT3V0cHV0RXh0cmFjdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFRleHQgPSBhd2FpdCBjdXN0b21PdXRwdXRFeHRyYWN0b3IoY29tcGxldGVkUmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsT3V0cHV0VGV4dCA9IHR5cGVvZiBjb21wbGV0ZWRSZXN1bHQuZmluYWxPdXRwdXQgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMub3V0cHV0VHlwZSA9PT0gJ3RleHQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBTdHJpbmcoY29tcGxldGVkUmVzdWx0LmZpbmFsT3V0cHV0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogSlNPTi5zdHJpbmdpZnkoY29tcGxldGVkUmVzdWx0LmZpbmFsT3V0cHV0KVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhd1Jlc3BvbnNlcyA9IGNvbXBsZXRlZFJlc3VsdC5yYXdSZXNwb25zZXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhd091dHB1dFRleHQgPSByYXdSZXNwb25zZXMgJiYgcmF3UmVzcG9uc2VzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gZ2V0T3V0cHV0VGV4dChyYXdSZXNwb25zZXNbcmF3UmVzcG9uc2VzLmxlbmd0aCAtIDFdKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRSYXdPdXRwdXRUZXh0ID0gdHlwZW9mIHJhd091dHB1dFRleHQgPT09ICdzdHJpbmcnICYmIHJhd091dHB1dFRleHQudHJpbSgpID09PSAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmF3T3V0cHV0VGV4dDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlZmVyc0ZpbmFsT3V0cHV0ID0gY29tcGxldGVkUmVzdWx0LnN0YXRlPy5fZmluYWxPdXRwdXRTb3VyY2UgPT09ICdlcnJvcl9oYW5kbGVyJztcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0VGV4dCA9IHByZWZlcnNGaW5hbE91dHB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgPyAoZmluYWxPdXRwdXRUZXh0ID8/IG5vcm1hbGl6ZWRSYXdPdXRwdXRUZXh0ID8/ICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAobm9ybWFsaXplZFJhd091dHB1dFRleHQgPz8gZmluYWxPdXRwdXRUZXh0ID8/ICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRldGFpbHM/LnRvb2xDYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNhdmVBZ2VudFRvb2xSdW5SZXN1bHQoZGV0YWlscy50b29sQ2FsbCwgY29tcGxldGVkUmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dFRleHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYWdlbnRUb29sID0ge1xuICAgICAgICAgICAgLi4uYmFzZVRvb2wsXG4gICAgICAgICAgICBvbjogKG5hbWUsIGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXQgPSBldmVudEhhbmRsZXJzLmdldChuYW1lKSA/PyBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgc2V0LmFkZChoYW5kbGVyKTtcbiAgICAgICAgICAgICAgICBldmVudEhhbmRsZXJzLnNldChuYW1lLCBzZXQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhZ2VudFRvb2w7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYWdlbnRUb29sO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzeXN0ZW0gcHJvbXB0IGZvciB0aGUgYWdlbnQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYWdlbnQgaGFzIGEgZnVuY3Rpb24gYXMgaXRzIGluc3RydWN0aW9ucywgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgICAqIHJ1bkNvbnRleHQgYW5kIHRoZSBhZ2VudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRTeXN0ZW1Qcm9tcHQocnVuQ29udGV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW5zdHJ1Y3Rpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbnN0cnVjdGlvbnMocnVuQ29udGV4dCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9tcHQgdGVtcGxhdGUgZm9yIHRoZSBhZ2VudCwgaWYgZGVmaW5lZC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhZ2VudCBoYXMgYSBmdW5jdGlvbiBhcyBpdHMgcHJvbXB0LCB0aGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAgICogcnVuQ29udGV4dCBhbmQgdGhlIGFnZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFByb21wdChydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9tcHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb21wdChydW5Db250ZXh0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9tcHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGF2YWlsYWJsZSB0b29scyBmcm9tIHRoZSBNQ1Agc2VydmVycy5cbiAgICAgKiBAcmV0dXJucyB0aGUgTUNQIHBvd2VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRNY3BUb29scyhydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLm1jcFNlcnZlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEFsbE1jcFRvb2xzKHtcbiAgICAgICAgICAgICAgICBtY3BTZXJ2ZXJzOiB0aGlzLm1jcFNlcnZlcnMsXG4gICAgICAgICAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgICAgICAgICBhZ2VudDogdGhpcyxcbiAgICAgICAgICAgICAgICBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0OiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQUxsIGFnZW50IHRvb2xzLCBpbmNsdWRpbmcgdGhlIE1DUGwgYW5kIGZ1bmN0aW9uIHRvb2xzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYWxsIGNvbmZpZ3VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRBbGxUb29scyhydW5Db250ZXh0KSB7XG4gICAgICAgIGNvbnN0IG1jcFRvb2xzID0gYXdhaXQgdGhpcy5nZXRNY3BUb29scyhydW5Db250ZXh0KTtcbiAgICAgICAgY29uc3QgZW5hYmxlZFRvb2xzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHRoaXMudG9vbHMpIHtcbiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1heWJlSXNFbmFibGVkID0gY2FuZGlkYXRlLmlzRW5hYmxlZDtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmFibGVkID0gdHlwZW9mIG1heWJlSXNFbmFibGVkID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgbWF5YmVJc0VuYWJsZWQocnVuQ29udGV4dCwgdGhpcylcbiAgICAgICAgICAgICAgICAgICAgOiB0eXBlb2YgbWF5YmVJc0VuYWJsZWQgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBtYXliZUlzRW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbmFibGVkVG9vbHMucHVzaChjYW5kaWRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4ubWNwVG9vbHMsIC4uLmVuYWJsZWRUb29sc107XG4gICAgfVxuICAgIGhhc0V4cGxpY2l0VG9vbENvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rvb2xzRXhwbGljaXRseUNvbmZpZ3VyZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGhhbmRvZmZzIHRoYXQgc2hvdWxkIGJlIGV4cG9zZWQgdG8gdGhlIG1vZGVsIGZvciB0aGUgY3VycmVudCBydW4uXG4gICAgICpcbiAgICAgKiBIYW5kb2ZmcyB0aGF0IHByb3ZpZGUgYW4gYGlzRW5hYmxlZGAgZnVuY3Rpb24gcmV0dXJuaW5nIGBmYWxzZWAgYXJlIG9taXR0ZWQuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0RW5hYmxlZEhhbmRvZmZzKHJ1bkNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgaGFuZG9mZnMgPSB0aGlzLmhhbmRvZmZzPy5tYXAoKGgpID0+IGdldEhhbmRvZmYoaCkpID8/IFtdO1xuICAgICAgICBjb25zdCBlbmFibGVkID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaGFuZG9mZiBvZiBoYW5kb2Zmcykge1xuICAgICAgICAgICAgaWYgKGF3YWl0IGhhbmRvZmYuaXNFbmFibGVkKHsgcnVuQ29udGV4dCwgYWdlbnQ6IHRoaXMgfSkpIHtcbiAgICAgICAgICAgICAgICBlbmFibGVkLnB1c2goaGFuZG9mZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuYWJsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2Nlc3NlcyB0aGUgZmluYWwgb3V0cHV0IG9mIHRoZSBhZ2VudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXRwdXQgLSBUaGUgb3V0cHV0IG9mIHRoZSBhZ2VudC5cbiAgICAgKiBAcmV0dXJucyBUaGUgcGFyc2VkIG91dC5cbiAgICAgKi9cbiAgICBwcm9jZXNzRmluYWxPdXRwdXQob3V0cHV0KSB7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3V0cHV0VHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uob3V0cHV0KTtcbiAgICAgICAgICAgIGlmIChpc1pvZE9iamVjdCh0aGlzLm91dHB1dFR5cGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0VHlwZS5wYXJzZShwYXJzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gb3V0cHV0IHR5cGU6ICR7dGhpcy5vdXRwdXRUeXBlfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgYWdlbnQsIHdoaWNoIGlzIHNlcmlhbGl6YWJsZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgSlNPTiBvYmplY3QgY29udGFpbmluZyB0aGUgYWdlbnQncyBuYW1lLlxuICAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZ2VudC5tanMubWFwIiwiaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuY29uc3QgREVGQVVMVF9DT05ORUNUX1RJTUVPVVRfTVMgPSAxMF8wMDA7XG5jb25zdCBERUZBVUxUX0NMT1NFX1RJTUVPVVRfTVMgPSAxMF8wMDA7XG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ29wZW5haS1hZ2VudHM6bWNwLXNlcnZlcnMnKTtcbmNsYXNzIFNlcnZlcldvcmtlciB7XG4gICAgc2VydmVyO1xuICAgIGNvbm5lY3RUaW1lb3V0TXM7XG4gICAgY2xvc2VUaW1lb3V0TXM7XG4gICAgcXVldWUgPSBbXTtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGRvbmUgPSBmYWxzZTtcbiAgICBjbG9zaW5nID0gbnVsbDtcbiAgICBjbG9zZVJlc3VsdCA9IG51bGw7XG4gICAgY29uc3RydWN0b3Ioc2VydmVyLCBjb25uZWN0VGltZW91dE1zLCBjbG9zZVRpbWVvdXRNcykge1xuICAgICAgICB0aGlzLnNlcnZlciA9IHNlcnZlcjtcbiAgICAgICAgdGhpcy5jb25uZWN0VGltZW91dE1zID0gY29ubmVjdFRpbWVvdXRNcztcbiAgICAgICAgdGhpcy5jbG9zZVRpbWVvdXRNcyA9IGNsb3NlVGltZW91dE1zO1xuICAgIH1cbiAgICBnZXQgaXNEb25lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb25lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJtaXQoJ2Nvbm5lY3QnLCB0aGlzLmNvbm5lY3RUaW1lb3V0TXMpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VibWl0KCdjbG9zZScsIHRoaXMuY2xvc2VUaW1lb3V0TXMpO1xuICAgIH1cbiAgICBzdWJtaXQoYWN0aW9uLCB0aW1lb3V0TXMpIHtcbiAgICAgICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGNyZWF0ZUNsb3NlZEVycm9yKHRoaXMuc2VydmVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2xvc2VSZXN1bHQgfHwgdGhpcy5jbG9zaW5nKSB7XG4gICAgICAgICAgICBpZiAoYWN0aW9uID09PSAnY2xvc2UnICYmIHRoaXMuY2xvc2VSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbG9zZVJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjcmVhdGVDbG9zaW5nRXJyb3IodGhpcy5zZXJ2ZXIpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzb2x2ZUNvbW1hbmQ7XG4gICAgICAgIGxldCByZWplY3RDb21tYW5kO1xuICAgICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZUNvbW1hbmQgPSByZXNvbHZlO1xuICAgICAgICAgICAgcmVqZWN0Q29tbWFuZCA9IHJlamVjdDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSB7XG4gICAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgICB0aW1lb3V0TXMsXG4gICAgICAgICAgICByZXNvbHZlOiByZXNvbHZlQ29tbWFuZCxcbiAgICAgICAgICAgIHJlamVjdDogcmVqZWN0Q29tbWFuZCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2Nsb3NlJykge1xuICAgICAgICAgICAgdGhpcy5jbG9zZVJlc3VsdCA9IHByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKGNvbW1hbmQpO1xuICAgICAgICB2b2lkIHRoaXMuZHJhaW4oKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIGFzeW5jIGRyYWluKCkge1xuICAgICAgICBpZiAodGhpcy5kcmFpbmluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJhaW5pbmcgPSB0cnVlO1xuICAgICAgICB3aGlsZSAodGhpcy5xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBjb21tYW5kID0gdGhpcy5xdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCFjb21tYW5kKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzaG91bGRFeGl0ID0gY29tbWFuZC5hY3Rpb24gPT09ICdjbG9zZSc7XG4gICAgICAgICAgICBsZXQgY2xvc2VFcnJvciA9IG51bGw7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjb21tYW5kLmFjdGlvbiA9PT0gJ2Nvbm5lY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJ1bldpdGhUaW1lb3V0KCgpID0+IHRoaXMuc2VydmVyLmNvbm5lY3QoKSwgY29tbWFuZC50aW1lb3V0TXMsIGNyZWF0ZVRpbWVvdXRFcnJvcignY29ubmVjdCcsIHRoaXMuc2VydmVyLCBjb21tYW5kLnRpbWVvdXRNcykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xvc2VUYXNrID0gdGhpcy5zZXJ2ZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zaW5nID0gY2xvc2VUYXNrXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB1bmRlZmluZWQsICgpID0+IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2luZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBydW5XaXRoVGltZW91dFRhc2soY2xvc2VUYXNrLCBjb21tYW5kLnRpbWVvdXRNcywgY3JlYXRlVGltZW91dEVycm9yKCdjbG9zZScsIHRoaXMuc2VydmVyLCBjb21tYW5kLnRpbWVvdXRNcykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb21tYW5kLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVyciA9IHRvRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIGNvbW1hbmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZEV4aXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VFcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2hvdWxkRXhpdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBlbmRpbmdFcnJvciA9IGNsb3NlRXJyb3IgPz8gY3JlYXRlQ2xvc2VkRXJyb3IodGhpcy5zZXJ2ZXIpO1xuICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLnF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVuZGluZyA9IHRoaXMucXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmcucmVqZWN0KHBlbmRpbmdFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVJlc3VsdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKCFjbG9zZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJhaW5pbmcgPSBmYWxzZTtcbiAgICB9XG59XG4vKipcbiAqIE1hbmFnZXMgTUNQIHNlcnZlciBsaWZlY3ljbGUgYW5kIGV4cG9zZXMgb25seSBjb25uZWN0ZWQgc2VydmVycy5cbiAqL1xuZXhwb3J0IGNsYXNzIE1DUFNlcnZlcnMge1xuICAgIGFsbFNlcnZlcnM7XG4gICAgYWN0aXZlU2VydmVycztcbiAgICBmYWlsZWRTZXJ2ZXJzID0gW107XG4gICAgZmFpbGVkU2VydmVyU2V0ID0gbmV3IFNldCgpO1xuICAgIGVycm9yc0J5U2VydmVyID0gbmV3IE1hcCgpO1xuICAgIHN1cHByZXNzZWRBYm9ydEZhaWx1cmVzID0gbmV3IFNldCgpO1xuICAgIHdvcmtlcnMgPSBuZXcgTWFwKCk7XG4gICAgY29ubmVjdFRpbWVvdXRNcztcbiAgICBjbG9zZVRpbWVvdXRNcztcbiAgICBkcm9wRmFpbGVkO1xuICAgIHN0cmljdDtcbiAgICBzdXBwcmVzc0Fib3J0RXJyb3I7XG4gICAgY29ubmVjdEluUGFyYWxsZWw7XG4gICAgc3RhdGljIHtcbiAgICAgICAgY29uc3QgYXN5bmNEaXNwb3NlID0gU3ltYm9sLmFzeW5jRGlzcG9zZTtcbiAgICAgICAgaWYgKGFzeW5jRGlzcG9zZSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMucHJvdG90eXBlLCBhc3luY0Rpc3Bvc2UsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3RydWN0b3Ioc2VydmVycywgb3B0aW9ucykge1xuICAgICAgICB0aGlzLmFsbFNlcnZlcnMgPSBbLi4uc2VydmVyc107XG4gICAgICAgIHRoaXMuYWN0aXZlU2VydmVycyA9IFsuLi5zZXJ2ZXJzXTtcbiAgICAgICAgdGhpcy5jb25uZWN0VGltZW91dE1zID1cbiAgICAgICAgICAgIG9wdGlvbnM/LmNvbm5lY3RUaW1lb3V0TXMgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gREVGQVVMVF9DT05ORUNUX1RJTUVPVVRfTVNcbiAgICAgICAgICAgICAgICA6IG9wdGlvbnMuY29ubmVjdFRpbWVvdXRNcztcbiAgICAgICAgdGhpcy5jbG9zZVRpbWVvdXRNcyA9XG4gICAgICAgICAgICBvcHRpb25zPy5jbG9zZVRpbWVvdXRNcyA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBERUZBVUxUX0NMT1NFX1RJTUVPVVRfTVNcbiAgICAgICAgICAgICAgICA6IG9wdGlvbnMuY2xvc2VUaW1lb3V0TXM7XG4gICAgICAgIHRoaXMuZHJvcEZhaWxlZCA9IG9wdGlvbnM/LmRyb3BGYWlsZWQgPz8gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdHJpY3QgPSBvcHRpb25zPy5zdHJpY3QgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMuc3VwcHJlc3NBYm9ydEVycm9yID0gb3B0aW9ucz8uc3VwcHJlc3NBYm9ydEVycm9yID8/IHRydWU7XG4gICAgICAgIHRoaXMuY29ubmVjdEluUGFyYWxsZWwgPSBvcHRpb25zPy5jb25uZWN0SW5QYXJhbGxlbCA/PyBmYWxzZTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIG9wZW4oc2VydmVycywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gbmV3IE1DUFNlcnZlcnMoc2VydmVycywgb3B0aW9ucyk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgT3BlbmluZyBNQ1BTZXJ2ZXJzIHdpdGggJHtzZXNzaW9uLmFsbFNlcnZlcnMubGVuZ3RofSBzZXJ2ZXIocykuYCk7XG4gICAgICAgIGF3YWl0IHNlc3Npb24uY29ubmVjdEFsbCgpO1xuICAgICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9XG4gICAgZ2V0IGFsbCgpIHtcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLmFsbFNlcnZlcnNdO1xuICAgIH1cbiAgICBnZXQgYWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gWy4uLnRoaXMuYWN0aXZlU2VydmVyc107XG4gICAgfVxuICAgIGdldCBmYWlsZWQoKSB7XG4gICAgICAgIHJldHVybiBbLi4udGhpcy5mYWlsZWRTZXJ2ZXJzXTtcbiAgICB9XG4gICAgZ2V0IGVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNYXAodGhpcy5lcnJvcnNCeVNlcnZlcik7XG4gICAgfVxuICAgIGFzeW5jIHJlY29ubmVjdChvcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3QgZmFpbGVkT25seSA9IG9wdGlvbnMuZmFpbGVkT25seSA/PyB0cnVlO1xuICAgICAgICBsZXQgc2VydmVyc1RvUmV0cnk7XG4gICAgICAgIGlmIChmYWlsZWRPbmx5KSB7XG4gICAgICAgICAgICBzZXJ2ZXJzVG9SZXRyeSA9IHVuaXF1ZVNlcnZlcnModGhpcy5mYWlsZWRTZXJ2ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNlcnZlcnNUb1JldHJ5ID0gWy4uLnRoaXMuYWxsU2VydmVyc107XG4gICAgICAgICAgICB0aGlzLmZhaWxlZFNlcnZlcnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZmFpbGVkU2VydmVyU2V0ID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgdGhpcy5lcnJvcnNCeVNlcnZlciA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMuc3VwcHJlc3NlZEFib3J0RmFpbHVyZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZWNvbm5lY3RpbmcgTUNQIHNlcnZlcnMgKGZhaWxlZE9ubHk9JHtmYWlsZWRPbmx5fSkgd2l0aCAke3NlcnZlcnNUb1JldHJ5Lmxlbmd0aH0gdGFyZ2V0KHMpLmApO1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0SW5QYXJhbGxlbCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0QWxsUGFyYWxsZWwoc2VydmVyc1RvUmV0cnkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzZXJ2ZXIgb2Ygc2VydmVyc1RvUmV0cnkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmF0dGVtcHRDb25uZWN0KHNlcnZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWZyZXNoQWN0aXZlU2VydmVycygpO1xuICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmU7XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmNsb3NlQWxsKCk7XG4gICAgfVxuICAgIGFzeW5jIGNvbm5lY3RBbGwoKSB7XG4gICAgICAgIHRoaXMuZmFpbGVkU2VydmVycyA9IFtdO1xuICAgICAgICB0aGlzLmZhaWxlZFNlcnZlclNldCA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5lcnJvcnNCeVNlcnZlciA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5zdXBwcmVzc2VkQWJvcnRGYWlsdXJlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgY29uc3Qgc2VydmVyc1RvQ29ubmVjdCA9IFsuLi50aGlzLmFsbFNlcnZlcnNdO1xuICAgICAgICBsZXQgY29ubmVjdGVkU2VydmVycyA9IFtdO1xuICAgICAgICBsb2dnZXIuZGVidWcoYENvbm5lY3RpbmcgJHtzZXJ2ZXJzVG9Db25uZWN0Lmxlbmd0aH0gTUNQIHNlcnZlcihzKS5gKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RJblBhcmFsbGVsKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0QWxsUGFyYWxsZWwoc2VydmVyc1RvQ29ubmVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNlcnZlciBvZiBzZXJ2ZXJzVG9Db25uZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXR0ZW1wdENvbm5lY3Qoc2VydmVyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZhaWxlZFNlcnZlclNldC5oYXMoc2VydmVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkU2VydmVycy5wdXNoKHNlcnZlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0SW5QYXJhbGxlbCkge1xuICAgICAgICAgICAgICAgIGNvbm5lY3RlZFNlcnZlcnMgPSBzZXJ2ZXJzVG9Db25uZWN0LmZpbHRlcigoc2VydmVyKSA9PiAhdGhpcy5mYWlsZWRTZXJ2ZXJTZXQuaGFzKHNlcnZlcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2VydmVyc1RvQ2xlYW51cCA9IHVuaXF1ZVNlcnZlcnMoW1xuICAgICAgICAgICAgICAgIC4uLmNvbm5lY3RlZFNlcnZlcnMsXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mYWlsZWRTZXJ2ZXJzLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNsb3NlU2VydmVycyhzZXJ2ZXJzVG9DbGVhbnVwKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlU2VydmVycyA9IFtdO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWZyZXNoQWN0aXZlU2VydmVycygpO1xuICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmU7XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlQWxsKCkge1xuICAgICAgICBmb3IgKGNvbnN0IHNlcnZlciBvZiBbLi4udGhpcy5hbGxTZXJ2ZXJzXS5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xvc2VTZXJ2ZXIoc2VydmVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBhdHRlbXB0Q29ubmVjdChzZXJ2ZXIpIHtcbiAgICAgICAgY29uc3QgcmFpc2VPbkVycm9yID0gdGhpcy5zdHJpY3Q7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYENvbm5lY3RpbmcgTUNQIHNlcnZlciAnJHtzZXJ2ZXIubmFtZX0nLmApO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5ydW5Db25uZWN0KHNlcnZlcik7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYENvbm5lY3RlZCBNQ1Agc2VydmVyICcke3NlcnZlci5uYW1lfScuYCk7XG4gICAgICAgICAgICBpZiAodGhpcy5mYWlsZWRTZXJ2ZXJTZXQuaGFzKHNlcnZlcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZhaWxlZFNlcnZlcihzZXJ2ZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzQnlTZXJ2ZXIuZGVsZXRlKHNlcnZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnIgPSB0b0Vycm9yKGVycm9yKTtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0RXJyb3IoZXJyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkRmFpbHVyZShzZXJ2ZXIsIGVyciwgJ2Nvbm5lY3QnKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3VwcHJlc3NBYm9ydEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3VwcHJlc3NlZEFib3J0RmFpbHVyZXMuZGVsZXRlKHNlcnZlcik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zdXBwcmVzc2VkQWJvcnRGYWlsdXJlcy5hZGQoc2VydmVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1cHByZXNzZWRBYm9ydEZhaWx1cmVzLmRlbGV0ZShzZXJ2ZXIpO1xuICAgICAgICAgICAgdGhpcy5yZWNvcmRGYWlsdXJlKHNlcnZlciwgZXJyLCAnY29ubmVjdCcpO1xuICAgICAgICAgICAgaWYgKHJhaXNlT25FcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZWZyZXNoQWN0aXZlU2VydmVycygpIHtcbiAgICAgICAgaWYgKHRoaXMuZHJvcEZhaWxlZCkge1xuICAgICAgICAgICAgY29uc3QgZmFpbGVkID0gbmV3IFNldCh0aGlzLmZhaWxlZFNlcnZlclNldCk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVNlcnZlcnMgPSB0aGlzLmFsbFNlcnZlcnMuZmlsdGVyKChzZXJ2ZXIpID0+ICFmYWlsZWQuaGFzKHNlcnZlcikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVTZXJ2ZXJzID0gWy4uLnRoaXMuYWxsU2VydmVyc107XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBBY3RpdmUgTUNQIHNlcnZlcnM6ICR7dGhpcy5hY3RpdmVTZXJ2ZXJzLmxlbmd0aH07IGZhaWxlZDogJHt0aGlzLmZhaWxlZFNlcnZlcnMubGVuZ3RofS5gKTtcbiAgICB9XG4gICAgcmVjb3JkRmFpbHVyZShzZXJ2ZXIsIGVycm9yLCBwaGFzZSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoYEZhaWxlZCB0byAke3BoYXNlfSBNQ1Agc2VydmVyICcke3NlcnZlci5uYW1lfSc6YCwgZXJyb3IpO1xuICAgICAgICBpZiAoIXRoaXMuZmFpbGVkU2VydmVyU2V0LmhhcyhzZXJ2ZXIpKSB7XG4gICAgICAgICAgICB0aGlzLmZhaWxlZFNlcnZlcnMucHVzaChzZXJ2ZXIpO1xuICAgICAgICAgICAgdGhpcy5mYWlsZWRTZXJ2ZXJTZXQuYWRkKHNlcnZlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lcnJvcnNCeVNlcnZlci5zZXQoc2VydmVyLCBlcnJvcik7XG4gICAgfVxuICAgIGFzeW5jIHJ1bkNvbm5lY3Qoc2VydmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RJblBhcmFsbGVsKSB7XG4gICAgICAgICAgICBjb25zdCB3b3JrZXIgPSB0aGlzLmdldFdvcmtlcihzZXJ2ZXIpO1xuICAgICAgICAgICAgYXdhaXQgd29ya2VyLmNvbm5lY3QoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5XaXRoVGltZW91dCgoKSA9PiBzZXJ2ZXIuY29ubmVjdCgpLCB0aGlzLmNvbm5lY3RUaW1lb3V0TXMsIGNyZWF0ZVRpbWVvdXRFcnJvcignY29ubmVjdCcsIHNlcnZlciwgdGhpcy5jb25uZWN0VGltZW91dE1zKSk7XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlU2VydmVyKHNlcnZlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBDbG9zaW5nIE1DUCBzZXJ2ZXIgJyR7c2VydmVyLm5hbWV9Jy5gKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucnVuQ2xvc2Uoc2VydmVyKTtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ2xvc2VkIE1DUCBzZXJ2ZXIgJyR7c2VydmVyLm5hbWV9Jy5gKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGVyciA9IHRvRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgaWYgKGlzQWJvcnRFcnJvcihlcnIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN1cHByZXNzQWJvcnRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ2xvc2UgY2FuY2VsbGVkIGZvciBNQ1Agc2VydmVyICcke3NlcnZlci5uYW1lfSc6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzQnlTZXJ2ZXIuc2V0KHNlcnZlciwgZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEZhaWxlZCB0byBjbG9zZSBNQ1Agc2VydmVyICcke3NlcnZlci5uYW1lfSc6YCwgZXJyKTtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JzQnlTZXJ2ZXIuc2V0KHNlcnZlciwgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBydW5DbG9zZShzZXJ2ZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdEluUGFyYWxsZWwgJiYgdGhpcy53b3JrZXJzLmhhcyhzZXJ2ZXIpKSB7XG4gICAgICAgICAgICBjb25zdCB3b3JrZXIgPSB0aGlzLndvcmtlcnMuZ2V0KHNlcnZlcik7XG4gICAgICAgICAgICBpZiAod29ya2VyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgd29ya2VyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHdvcmtlci5pc0RvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JrZXJzLmRlbGV0ZShzZXJ2ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuV2l0aFRpbWVvdXQoKCkgPT4gc2VydmVyLmNsb3NlKCksIHRoaXMuY2xvc2VUaW1lb3V0TXMsIGNyZWF0ZVRpbWVvdXRFcnJvcignY2xvc2UnLCBzZXJ2ZXIsIHRoaXMuY2xvc2VUaW1lb3V0TXMpKTtcbiAgICB9XG4gICAgYXN5bmMgY2xvc2VTZXJ2ZXJzKHNlcnZlcnMpIHtcbiAgICAgICAgZm9yIChjb25zdCBzZXJ2ZXIgb2YgWy4uLnNlcnZlcnNdLnJldmVyc2UoKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jbG9zZVNlcnZlcihzZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNvbm5lY3RBbGxQYXJhbGxlbChzZXJ2ZXJzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoc2VydmVycy5tYXAoKHNlcnZlcikgPT4gdGhpcy5hdHRlbXB0Q29ubmVjdChzZXJ2ZXIpKSk7XG4gICAgICAgIGNvbnN0IHJlamVjdGlvbiA9IHJlc3VsdHMuZmluZCgocmVzdWx0KSA9PiByZXN1bHQuc3RhdHVzID09PSAncmVqZWN0ZWQnKTtcbiAgICAgICAgaWYgKHJlamVjdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgcmVqZWN0aW9uLnJlYXNvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdHJpY3QgJiYgdGhpcy5mYWlsZWRTZXJ2ZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0RmFpbHVyZSA9IHRoaXMuZmFpbGVkU2VydmVycy5maW5kKChzZXJ2ZXIpID0+ICF0aGlzLnN1cHByZXNzZWRBYm9ydEZhaWx1cmVzLmhhcyhzZXJ2ZXIpKTtcbiAgICAgICAgICAgIGlmIChmaXJzdEZhaWx1cmUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IHRoaXMuZXJyb3JzQnlTZXJ2ZXIuZ2V0KGZpcnN0RmFpbHVyZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjb25uZWN0IE1DUCBzZXJ2ZXIgJyR7Zmlyc3RGYWlsdXJlLm5hbWV9Jy5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRXb3JrZXIoc2VydmVyKSB7XG4gICAgICAgIGNvbnN0IHdvcmtlciA9IHRoaXMud29ya2Vycy5nZXQoc2VydmVyKTtcbiAgICAgICAgaWYgKCF3b3JrZXIgfHwgd29ya2VyLmlzRG9uZSkge1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IG5ldyBTZXJ2ZXJXb3JrZXIoc2VydmVyLCB0aGlzLmNvbm5lY3RUaW1lb3V0TXMsIHRoaXMuY2xvc2VUaW1lb3V0TXMpO1xuICAgICAgICAgICAgdGhpcy53b3JrZXJzLnNldChzZXJ2ZXIsIG5leHQpO1xuICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdvcmtlcjtcbiAgICB9XG4gICAgcmVtb3ZlRmFpbGVkU2VydmVyKHNlcnZlcikge1xuICAgICAgICBpZiAodGhpcy5mYWlsZWRTZXJ2ZXJTZXQuaGFzKHNlcnZlcikpIHtcbiAgICAgICAgICAgIHRoaXMuZmFpbGVkU2VydmVyU2V0LmRlbGV0ZShzZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3VwcHJlc3NlZEFib3J0RmFpbHVyZXMuZGVsZXRlKHNlcnZlcik7XG4gICAgICAgIHRoaXMuZmFpbGVkU2VydmVycyA9IHRoaXMuZmFpbGVkU2VydmVycy5maWx0ZXIoKGZhaWxlZFNlcnZlcikgPT4gZmFpbGVkU2VydmVyICE9PSBzZXJ2ZXIpO1xuICAgIH1cbn1cbi8qKlxuICogQ29ubmVjdCB0byBtdWx0aXBsZSBNQ1Agc2VydmVycyBhbmQgcmV0dXJuIGEgbWFuYWdlZCBNQ1BTZXJ2ZXJzIGluc3RhbmNlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdE1jcFNlcnZlcnMoc2VydmVycywgb3B0aW9ucykge1xuICAgIHJldHVybiBNQ1BTZXJ2ZXJzLm9wZW4oc2VydmVycywgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBjcmVhdGVUaW1lb3V0RXJyb3IoYWN0aW9uLCBzZXJ2ZXIsIHRpbWVvdXRNcykge1xuICAgIGlmICh0aW1lb3V0TXMgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihgTUNQIHNlcnZlciAke2FjdGlvbn0gdGltZWQgb3V0LmApO1xuICAgIH1cbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgTUNQIHNlcnZlciAke2FjdGlvbn0gdGltZWQgb3V0IGFmdGVyICR7dGltZW91dE1zfW1zIGZvciAnJHtzZXJ2ZXIubmFtZX0nLmApO1xuICAgIGVycm9yLm5hbWUgPSAnVGltZW91dEVycm9yJztcbiAgICByZXR1cm4gZXJyb3I7XG59XG5mdW5jdGlvbiBjcmVhdGVDbG9zZWRFcnJvcihzZXJ2ZXIpIHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgTUNQIHNlcnZlciAnJHtzZXJ2ZXIubmFtZX0nIGlzIGNsb3NlZC5gKTtcbiAgICBlcnJvci5uYW1lID0gJ0Nsb3NlZEVycm9yJztcbiAgICByZXR1cm4gZXJyb3I7XG59XG5mdW5jdGlvbiBjcmVhdGVDbG9zaW5nRXJyb3Ioc2VydmVyKSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYE1DUCBzZXJ2ZXIgJyR7c2VydmVyLm5hbWV9JyBpcyBjbG9zaW5nLmApO1xuICAgIGVycm9yLm5hbWUgPSAnQ2xvc2luZ0Vycm9yJztcbiAgICByZXR1cm4gZXJyb3I7XG59XG5hc3luYyBmdW5jdGlvbiBydW5XaXRoVGltZW91dChmbiwgdGltZW91dE1zLCB0aW1lb3V0RXJyb3IpIHtcbiAgICBpZiAodGltZW91dE1zID09PSBudWxsKSB7XG4gICAgICAgIGF3YWl0IGZuKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHRpbWVyO1xuICAgIGxldCB0aW1lZE91dCA9IGZhbHNlO1xuICAgIGNvbnN0IHRhc2sgPSBmbigpO1xuICAgIGNvbnN0IHRpbWVvdXRQcm9taXNlID0gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGltZWRPdXQgPSB0cnVlO1xuICAgICAgICAgICAgcmVqZWN0KHRpbWVvdXRFcnJvcik7XG4gICAgICAgIH0sIHRpbWVvdXRNcyk7XG4gICAgfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5yYWNlKFt0YXNrLCB0aW1lb3V0UHJvbWlzZV0pO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgaWYgKHRpbWVyKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aW1lZE91dCkge1xuICAgICAgICAgICAgdGFzay5jYXRjaCgoKSA9PiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gcnVuV2l0aFRpbWVvdXRUYXNrKHRhc2ssIHRpbWVvdXRNcywgdGltZW91dEVycm9yKSB7XG4gICAgaWYgKHRpbWVvdXRNcyA9PT0gbnVsbCkge1xuICAgICAgICBhd2FpdCB0YXNrO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCB0aW1lcjtcbiAgICBsZXQgdGltZWRPdXQgPSBmYWxzZTtcbiAgICBjb25zdCB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRpbWVkT3V0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlamVjdCh0aW1lb3V0RXJyb3IpO1xuICAgICAgICB9LCB0aW1lb3V0TXMpO1xuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UucmFjZShbdGFzaywgdGltZW91dFByb21pc2VdKTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIGlmICh0aW1lcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGltZWRPdXQpIHtcbiAgICAgICAgICAgIHRhc2suY2F0Y2goKCkgPT4gdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHRvRXJyb3IoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgfVxuICAgIHJldHVybiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSk7XG59XG5mdW5jdGlvbiBpc0Fib3J0RXJyb3IoZXJyb3IpIHtcbiAgICBjb25zdCBjb2RlID0gZXJyb3IuY29kZTtcbiAgICByZXR1cm4gKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJyB8fFxuICAgICAgICBlcnJvci5uYW1lID09PSAnQ2FuY2VsZWRFcnJvcicgfHxcbiAgICAgICAgZXJyb3IubmFtZSA9PT0gJ0NhbmNlbGxlZEVycm9yJyB8fFxuICAgICAgICBjb2RlID09PSAnQUJPUlRfRVJSJyB8fFxuICAgICAgICBjb2RlID09PSAnRVJSX0FCT1JURUQnKTtcbn1cbmZ1bmN0aW9uIHVuaXF1ZVNlcnZlcnMoc2VydmVycykge1xuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgdW5pcXVlID0gW107XG4gICAgZm9yIChjb25zdCBzZXJ2ZXIgb2Ygc2VydmVycykge1xuICAgICAgICBpZiAoIXNlZW4uaGFzKHNlcnZlcikpIHtcbiAgICAgICAgICAgIHNlZW4uYWRkKHNlcnZlcik7XG4gICAgICAgICAgICB1bmlxdWUucHVzaChzZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmlxdWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tY3BTZXJ2ZXJzLm1qcy5tYXAiLCJpbXBvcnQgeyBhZGRUcmFjZVByb2Nlc3NvciB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0UHJvY2Vzc29yIH0gZnJvbSBcIi4vdHJhY2luZy9wcm9jZXNzb3IubWpzXCI7XG5leHBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuZXhwb3J0IHsgQWdlbnQsIH0gZnJvbSBcIi4vYWdlbnQubWpzXCI7XG5leHBvcnQgeyBBZ2VudHNFcnJvciwgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IsIElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIE1heFR1cm5zRXhjZWVkZWRFcnJvciwgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgVG9vbElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIFRvb2xPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgVG9vbENhbGxFcnJvciwgVXNlckVycm9yLCBTeXN0ZW1FcnJvciwgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5leHBvcnQgeyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCwgUnVuUmF3TW9kZWxTdHJlYW1FdmVudCwgUnVuSXRlbVN0cmVhbUV2ZW50LCB9IGZyb20gXCIuL2V2ZW50cy5tanNcIjtcbmV4cG9ydCB7IGRlZmluZU91dHB1dEd1YXJkcmFpbCwgfSBmcm9tIFwiLi9ndWFyZHJhaWwubWpzXCI7XG5leHBvcnQgeyBUb29sR3VhcmRyYWlsRnVuY3Rpb25PdXRwdXRGYWN0b3J5LCBkZWZpbmVUb29sSW5wdXRHdWFyZHJhaWwsIGRlZmluZVRvb2xPdXRwdXRHdWFyZHJhaWwsIHJlc29sdmVUb29sSW5wdXRHdWFyZHJhaWxzLCByZXNvbHZlVG9vbE91dHB1dEd1YXJkcmFpbHMsIH0gZnJvbSBcIi4vdG9vbEd1YXJkcmFpbC5tanNcIjtcbmV4cG9ydCB7IGdldEhhbmRvZmYsIGdldFRyYW5zZmVyTWVzc2FnZSwgSGFuZG9mZiwgaGFuZG9mZiwgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuZXhwb3J0IHsgYXNzaXN0YW50LCBzeXN0ZW0sIHVzZXIgfSBmcm9tIFwiLi9oZWxwZXJzL21lc3NhZ2UubWpzXCI7XG5leHBvcnQgeyBleHRyYWN0QWxsVGV4dE91dHB1dCwgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuZXhwb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmV4cG9ydCB7IGdldExvZ2dlciB9IGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmV4cG9ydCB7IGFwcGx5RGlmZiB9IGZyb20gXCIuL3V0aWxzL2FwcGx5RGlmZi5tanNcIjtcbmV4cG9ydCB7IGdldEFsbE1jcFRvb2xzLCBpbnZhbGlkYXRlU2VydmVyVG9vbHNDYWNoZSwgbWNwVG9GdW5jdGlvblRvb2wsIE1DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCwgTUNQU2VydmVyU1NFLCB9IGZyb20gXCIuL21jcC5tanNcIjtcbmV4cG9ydCB7IE1DUFNlcnZlcnMsIGNvbm5lY3RNY3BTZXJ2ZXJzLCB9IGZyb20gXCIuL21jcFNlcnZlcnMubWpzXCI7XG5leHBvcnQgeyBjcmVhdGVNQ1BUb29sU3RhdGljRmlsdGVyLCB9IGZyb20gXCIuL21jcFV0aWwubWpzXCI7XG5leHBvcnQgeyBPUEVOQUlfREVGQVVMVF9NT0RFTF9FTlZfVkFSSUFCTEVfTkFNRSwgZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQsIGdldERlZmF1bHRNb2RlbCwgZ2V0RGVmYXVsdE1vZGVsU2V0dGluZ3MsIGlzR3B0NURlZmF1bHQsIH0gZnJvbSBcIi4vZGVmYXVsdE1vZGVsLm1qc1wiO1xuZXhwb3J0IHsgc2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcnMubWpzXCI7XG5leHBvcnQgeyBSdW5SZXN1bHQsIFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0Lm1qc1wiO1xuZXhwb3J0IHsgcnVuLCBSdW5uZXIsIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuZXhwb3J0IHsgUnVuQ29udGV4dCB9IGZyb20gXCIuL3J1bkNvbnRleHQubWpzXCI7XG5leHBvcnQgeyBSdW5TdGF0ZSB9IGZyb20gXCIuL3J1blN0YXRlLm1qc1wiO1xuZXhwb3J0IHsgY29tcHV0ZXJUb29sLCBzaGVsbFRvb2wsIGFwcGx5UGF0Y2hUb29sLCBob3N0ZWRNY3BUb29sLCB0b29sLCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuZXhwb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciwgVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3RyYWNpbmcvcHJvdmlkZXIubWpzXCI7XG5leHBvcnQgeyBydW5Ub29sSW5wdXRHdWFyZHJhaWxzLCBydW5Ub29sT3V0cHV0R3VhcmRyYWlscywgfSBmcm9tIFwiLi91dGlscy90b29sR3VhcmRyYWlscy5tanNcIjtcbmV4cG9ydCB7IFJlcXVlc3RVc2FnZSwgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbmV4cG9ydCB7IGlzT3BlbkFJUmVzcG9uc2VzQ29tcGFjdGlvbkF3YXJlU2Vzc2lvbiB9IGZyb20gXCIuL21lbW9yeS9zZXNzaW9uLm1qc1wiO1xuZXhwb3J0IHsgTWVtb3J5U2Vzc2lvbiB9IGZyb20gXCIuL21lbW9yeS9tZW1vcnlTZXNzaW9uLm1qc1wiO1xuZXhwb3J0ICogYXMgcHJvdG9jb2wgZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG4vKipcbiAqIEFkZCB0aGUgZGVmYXVsdCBwcm9jZXNzb3IsIHdoaWNoIGV4cG9ydHMgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgYmFja2VuZCBpbiBiYXRjaGVzLiBZb3UgY2FuXG4gKiBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3IgYnkgZWl0aGVyOlxuICogMS4gY2FsbGluZyBhZGRUcmFjZVByb2Nlc3Nvciwgd2hpY2ggYWRkcyBhZGRpdGlvbmFsIHByb2Nlc3NvcnMsIG9yXG4gKiAyLiBjYWxsaW5nIHNldFRyYWNlUHJvY2Vzc29ycywgd2hpY2ggc2V0cyB0aGUgcHJvY2Vzc29ycyBhbmQgZGlzY2FyZHMgdGhlIGRlZmF1bHQgb25lXG4gKi9cbmFkZFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRQcm9jZXNzb3IoKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIiwiaW1wb3J0IE1FVEFEQVRBIGZyb20gXCIuL21ldGFkYXRhLm1qc1wiO1xuaW1wb3J0IHsgUnVuVG9vbEFwcHJvdmFsSXRlbSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuLyoqXG4gKiBDb252ZXJ0cyBhIGJhc2U2NCBzdHJpbmcgdG8gYW4gQXJyYXlCdWZmZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlNjRcbiAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0KSB7XG4gICAgY29uc3QgYmluYXJ5U3RyaW5nID0gYXRvYihiYXNlNjQpO1xuICAgIGNvbnN0IGxlbiA9IGJpbmFyeVN0cmluZy5sZW5ndGg7XG4gICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW4pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgYnl0ZXNbaV0gPSBiaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzLmJ1ZmZlcjtcbn1cbi8qKlxuICogQ29udmVydHMgYW4gQXJyYXlCdWZmZXIgdG8gYSBiYXNlNjQgc3RyaW5nXG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBhcnJheUJ1ZmZlclxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5QnVmZmVyVG9CYXNlNjQoYXJyYXlCdWZmZXIpIHtcbiAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLm5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKSk7XG4gICAgcmV0dXJuIGJ0b2EoYmluYXJ5U3RyaW5nKTtcbn1cbi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSBhbiBhdWRpbyBvdXRwdXQgbWVzc2FnZVxuICogQHBhcmFtIGl0ZW1cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UoaXRlbSkge1xuICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgaXRlbSA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgaXRlbSAhPT0gJ29iamVjdCcgfHxcbiAgICAgICAgISgndHlwZScgaW4gaXRlbSkgfHxcbiAgICAgICAgdHlwZW9mIGl0ZW0udHlwZSAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgIWl0ZW0udHlwZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoaXRlbS50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCEoJ2NvbnRlbnQnIGluIGl0ZW0pIHx8XG4gICAgICAgICFBcnJheS5pc0FycmF5KGl0ZW0uY29udGVudCkgfHxcbiAgICAgICAgaXRlbS5jb250ZW50Lmxlbmd0aCA8IDEpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgbGFzdENvbnRlbnRJdGVtID0gaXRlbS5jb250ZW50W2l0ZW0uY29udGVudC5sZW5ndGggLSAxXTtcbiAgICBpZiAoISgndHlwZScgaW4gbGFzdENvbnRlbnRJdGVtKSB8fFxuICAgICAgICB0eXBlb2YgbGFzdENvbnRlbnRJdGVtLnR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChsYXN0Q29udGVudEl0ZW0udHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGxhc3RDb250ZW50SXRlbS50ZXh0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBsYXN0Q29udGVudEl0ZW0udGV4dFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChsYXN0Q29udGVudEl0ZW0udHlwZSA9PT0gJ291dHB1dF9hdWRpbycpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udHJhbnNjcmlwdCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gbGFzdENvbnRlbnRJdGVtLnRyYW5zY3JpcHRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBDb21wYXJlIHR3byBjb252ZXJzYXRpb24gaGlzdG9yaWVzIHRvIGRldGVybWluZSB0aGUgcmVtb3ZhbHMsIGFkZGl0aW9ucywgYW5kIHVwZGF0ZXMuXG4gKiBAcGFyYW0gb2xkSGlzdG9yeSAtIFRoZSBvbGQgaGlzdG9yeS5cbiAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5LlxuICogQHJldHVybnMgQSBkaWZmIG9mIHRoZSB0d28gaGlzdG9yaWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlmZlJlYWx0aW1lSGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KSB7XG4gICAgY29uc3QgcmVtb3ZhbHMgPSBvbGRIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gIW5ld0hpc3Rvcnkuc29tZSgobmV3SXRlbSkgPT4gbmV3SXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkKSk7XG4gICAgY29uc3QgYWRkaXRpb25zID0gbmV3SGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+ICFvbGRIaXN0b3J5LnNvbWUoKG9sZEl0ZW0pID0+IG9sZEl0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCkpO1xuICAgIGNvbnN0IHVwZGF0ZXMgPSBuZXdIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gb2xkSGlzdG9yeS5zb21lKChvbGRJdGVtKSA9PiBvbGRJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQgJiZcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkob2xkSXRlbSkgIT09IEpTT04uc3RyaW5naWZ5KGl0ZW0pKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZhbHMsXG4gICAgICAgIGFkZGl0aW9ucyxcbiAgICAgICAgdXBkYXRlcyxcbiAgICB9O1xufVxuLyoqXG4gKiBDaGVjayBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBXZWJSVEMuXG4gKiBAcmV0dXJucyBUcnVlIGlmIFdlYlJUQyBpcyBzdXBwb3J0ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1dlYlJUQ1N1cHBvcnQoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3dbJ1JUQ1BlZXJDb25uZWN0aW9uJ10gIT09ICd1bmRlZmluZWQnO1xufVxuLyoqXG4gKiBSZW1vdmVzIHRoZSBhdWRpbyBkYXRhIGZyb20gYWxsIGNvbnRlbnQgaW4gYSBtZXNzYWdlIGJ5IHNldHRpbmcgaXQgdG8gbnVsbC5cbiAqIEBwYXJhbSBpdGVtXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQXVkaW9Gcm9tQ29udGVudChpdGVtKSB7XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ3N5c3RlbScpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICAgIGlmIChpdGVtLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50Lm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ291dHB1dF9hdWRpbycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXRlbS5yb2xlID09PSAndXNlcicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnaW5wdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW07XG59XG4vLyBSZWFsdGltZSBjYW4gcmVzZW5kIHRydW5jYXRlZCBhc3Npc3RhbnQgaXRlbXMgd2l0aG91dCB0cmFuc2NyaXB0cyBhZnRlciBhblxuLy8gaW50ZXJydXB0L3JldHJpZXZlIGN5Y2xlLiBUaGlzIGhlbHBlciBtZXJnZXMgdGhvc2UgdXBkYXRlcyB3aXRoIHRoZSBsYXRlc3Rcbi8vIGtub3duIHRyYW5zY3JpcHQgc28gVUlzIHJldGFpbiB0aGUgcG9ydGlvbiBvZiB0aGUgbWVzc2FnZSB0aGUgdXNlciBhbHJlYWR5XG4vLyBoZWFyZC5cbmZ1bmN0aW9uIHByZXNlcnZlQXNzaXN0YW50QXVkaW9UcmFuc2NyaXB0cyhleGlzdGluZywgaW5jb21pbmcpIHtcbiAgICBpZiAoZXhpc3Rpbmcucm9sZSAhPT0gJ2Fzc2lzdGFudCcgfHwgaW5jb21pbmcucm9sZSAhPT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgIH1cbiAgICBjb25zdCBtZXJnZWRDb250ZW50ID0gaW5jb21pbmcuY29udGVudC5tYXAoKGVudHJ5LCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoZW50cnkudHlwZSAhPT0gJ291dHB1dF9hdWRpbycpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFuc2NyaXB0TWlzc2luZyA9IHR5cGVvZiBlbnRyeS50cmFuc2NyaXB0ICE9PSAnc3RyaW5nJyB8fCBlbnRyeS50cmFuc2NyaXB0Lmxlbmd0aCA9PT0gMDtcbiAgICAgICAgaWYgKCF0cmFuc2NyaXB0TWlzc2luZykge1xuICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXZpb3VzRW50cnkgPSBleGlzdGluZy5jb250ZW50W2luZGV4XTtcbiAgICAgICAgaWYgKHByZXZpb3VzRW50cnkgJiZcbiAgICAgICAgICAgIHByZXZpb3VzRW50cnkudHlwZSA9PT0gJ291dHB1dF9hdWRpbycgJiZcbiAgICAgICAgICAgIHR5cGVvZiBwcmV2aW91c0VudHJ5LnRyYW5zY3JpcHQgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICBwcmV2aW91c0VudHJ5LnRyYW5zY3JpcHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0OiBwcmV2aW91c0VudHJ5LnRyYW5zY3JpcHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnRyeTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5pbmNvbWluZyxcbiAgICAgICAgY29udGVudDogbWVyZ2VkQ29udGVudCxcbiAgICB9O1xufVxuLyoqXG4gKiBVcGRhdGVzIHRoZSByZWFsdGltZSBoaXN0b3J5IGFycmF5IGJhc2VkIG9uIHRoZSBpbmNvbWluZyBldmVudCBhbmQgb3B0aW9ucy5cbiAqIEBwYXJhbSBoaXN0b3J5IC0gVGhlIGN1cnJlbnQgaGlzdG9yeSBhcnJheS5cbiAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBwcm9jZXNzIChSZWFsdGltZUl0ZW0pLlxuICogQHBhcmFtIHNob3VsZEluY2x1ZGVBdWRpb0RhdGEgLSBXaGV0aGVyIHRvIGluY2x1ZGUgYXVkaW8gZGF0YSBpbiBtZXNzYWdlIGl0ZW1zLlxuICogQHJldHVybnMgVGhlIHVwZGF0ZWQgaGlzdG9yeSBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJlYWx0aW1lSGlzdG9yeShoaXN0b3J5LCBldmVudCwgc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSkge1xuICAgIC8vIE1lcmdlIHRyYW5zY3JpcHQgaW50byBwbGFjZWhvbGRlciBpbnB1dF9hdWRpbyBtZXNzYWdlXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcpIHtcbiAgICAgICAgcmV0dXJuIGhpc3RvcnkubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1faWQgJiZcbiAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPT09ICdtZXNzYWdlJyAmJlxuICAgICAgICAgICAgICAgICdyb2xlJyBpbiBpdGVtICYmXG4gICAgICAgICAgICAgICAgaXRlbS5yb2xlID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnaW5wdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY3JpcHQ6IGV2ZW50LnRyYW5zY3JpcHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB1cGRhdGVkQ29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBuZXdFdmVudCA9ICFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGV2ZW50LnR5cGUgPT09ICdtZXNzYWdlJ1xuICAgICAgICA/IHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoZXZlbnQpXG4gICAgICAgIDogZXZlbnQ7XG4gICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IGhpc3RvcnkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICBpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtID0gaGlzdG9yeVtleGlzdGluZ0luZGV4XTtcbiAgICAgICAgY29uc3QgbWVyZ2VkRXZlbnQgPSBuZXdFdmVudC50eXBlID09PSAnbWVzc2FnZScgJiYgZXhpc3RpbmdJdGVtLnR5cGUgPT09ICdtZXNzYWdlJ1xuICAgICAgICAgICAgPyBwcmVzZXJ2ZUFzc2lzdGFudEF1ZGlvVHJhbnNjcmlwdHMoZXhpc3RpbmdJdGVtLCBuZXdFdmVudClcbiAgICAgICAgICAgIDogbmV3RXZlbnQ7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBpdGVtXG4gICAgICAgIHJldHVybiBoaXN0b3J5Lm1hcCgoaXRlbSwgaWR4KSA9PiB7XG4gICAgICAgICAgICBpZiAoaWR4ID09PSBleGlzdGluZ0luZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lcmdlZEV2ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LnByZXZpb3VzSXRlbUlkKSB7XG4gICAgICAgIC8vIEluc2VydCBhZnRlciBwcmV2aW91c0l0ZW1JZCBpZiBmb3VuZCwgZWxzZSBhdCBlbmRcbiAgICAgICAgY29uc3QgcHJldkluZGV4ID0gaGlzdG9yeS5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5wcmV2aW91c0l0ZW1JZCk7XG4gICAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC4uLmhpc3Rvcnkuc2xpY2UoMCwgcHJldkluZGV4ICsgMSksXG4gICAgICAgICAgICAgICAgbmV3RXZlbnQsXG4gICAgICAgICAgICAgICAgLi4uaGlzdG9yeS5zbGljZShwcmV2SW5kZXggKyAxKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gWy4uLmhpc3RvcnksIG5ld0V2ZW50XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFsuLi5oaXN0b3J5LCBuZXdFdmVudF07XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgaGVhZGVycyB0byB1c2UgZm9yIHRoZSBSZWFsdGltZSBBUEkuXG4gKi9cbmV4cG9ydCBjb25zdCBIRUFERVJTID0ge1xuICAgICdVc2VyLUFnZW50JzogYEFnZW50cy9KYXZhU2NyaXB0ICR7TUVUQURBVEEudmVyc2lvbn1gLFxuICAgICdYLU9wZW5BSS1BZ2VudHMtU0RLJzogYG9wZW5haS1hZ2VudHMtc2RrLiR7TUVUQURBVEEudmVyc2lvbn1gLFxufTtcbi8qKlxuICogQnJvd3NlciB3ZWJzb2NrZXQgaGVhZGVyXG4gKi9cbmV4cG9ydCBjb25zdCBXRUJTT0NLRVRfTUVUQSA9IGBvcGVuYWktYWdlbnRzLXNkay4ke01FVEFEQVRBLnZlcnNpb259YDtcbmV4cG9ydCBmdW5jdGlvbiByZWFsdGltZUFwcHJvdmFsSXRlbVRvQXBwcm92YWxJdGVtKGFnZW50LCBpdGVtKSB7XG4gICAgY29uc3QgeyBuYW1lLCBhcmd1bWVudHM6IGFyZ3MsIC4uLnJlc3QgfSA9IGl0ZW07XG4gICAgcmV0dXJuIG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHtcbiAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICBuYW1lLFxuICAgICAgICBhcmd1bWVudHM6IEpTT04uc3RyaW5naWZ5KGFyZ3MpLFxuICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsXG4gICAgICAgIHByb3ZpZGVyRGF0YToge1xuICAgICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgfSxcbiAgICB9LCBhZ2VudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbShpdGVtKSB7XG4gICAgaWYgKGl0ZW0ucmF3SXRlbS50eXBlICE9PSAnZnVuY3Rpb25fY2FsbCcgJiZcbiAgICAgICAgaXRlbS5yYXdJdGVtLnR5cGUgIT09ICdob3N0ZWRfdG9vbF9jYWxsJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXBwcm92YWwgaXRlbSB0eXBlIGZvciBSZWFsdGltZSBNQ1AgYXBwcm92YWwgcmVxdWVzdCcpO1xuICAgIH1cbiAgICBjb25zdCB7IG5hbWUsIGFyZ3VtZW50czogYXJncywgcHJvdmlkZXJEYXRhIH0gPSBpdGVtLnJhd0l0ZW07XG4gICAgY29uc3QgeyBpdGVtSWQsIHNlcnZlckxhYmVsLCAuLi5yZXN0IH0gPSBwcm92aWRlckRhdGEgPz8ge307XG4gICAgaWYgKCFpdGVtSWQgfHwgIXNlcnZlckxhYmVsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcHByb3ZhbCBpdGVtIGZvciBSZWFsdGltZSBNQ1AgYXBwcm92YWwgcmVxdWVzdCcpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnLFxuICAgICAgICBpdGVtSWQsXG4gICAgICAgIHNlcnZlckxhYmVsLFxuICAgICAgICAuLi5yZXN0LFxuICAgICAgICBuYW1lLFxuICAgICAgICBhcmd1bWVudHM6IGFyZ3MgPyBKU09OLnBhcnNlKGFyZ3MpIDoge30sXG4gICAgICAgIGFwcHJvdmVkOiBudWxsLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgYWdlbnQgaW5zdGFuY2UgdGhhdCBpcyBtZWFudCB0byBiZSB1c2VkIHdpdGhpbiBhIGBSZWFsdGltZVNlc3Npb25gIHRvIGJ1aWxkXG4gKiB2b2ljZSBhZ2VudHMuIER1ZSB0byB0aGUgbmF0dXJlIG9mIHRoaXMgYWdlbnQsIHNvbWUgY29uZmlndXJhdGlvbiBvcHRpb25zIGFyZSBub3Qgc3VwcG9ydGVkXG4gKiB0aGF0IGFyZSBzdXBwb3J0ZWQgYnkgcmVndWxhciBgQWdlbnRgIGluc3RhbmNlcy4gRm9yIGV4YW1wbGU6XG4gKiAtIGBtb2RlbGAgY2hvaWNlIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgbW9kZWxTZXR0aW5nc2AgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGBvdXRwdXRUeXBlYCBpcyBub3Qgc3VwcG9ydGVkIGFzIFJlYWx0aW1lQWdlbnRzIGRvIG5vdCBzdXBwb3J0IHN0cnVjdHVyZWQgb3V0cHV0c1xuICogLSBgdG9vbFVzZUJlaGF2aW9yYCBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYHZvaWNlYCBjYW4gYmUgY29uZmlndXJlZCBvbiBhbiBgQWdlbnRgIGxldmVsIGhvd2V2ZXIgaXQgY2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgdGhlIGZpcnN0XG4gKiAgICBhZ2VudCB3aXRoaW4gYSBgUmVhbHRpbWVTZXNzaW9uYCBzcG9rZVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZUFnZW50IGV4dGVuZHMgQWdlbnQge1xuICAgIC8qKlxuICAgICAqIFRoZSB2b2ljZSBpbnRlbmRlZCB0byBiZSB1c2VkIGJ5IHRoZSBhZ2VudC4gSWYgYW5vdGhlciBhZ2VudCBhbHJlYWR5IHNwb2tlIGR1cmluZyB0aGVcbiAgICAgKiBSZWFsdGltZVNlc3Npb24sIGNoYW5naW5nIHRoZSB2b2ljZSBkdXJpbmcgYSBoYW5kb2ZmIHdpbGwgZmFpbC5cbiAgICAgKi9cbiAgICB2b2ljZTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy52b2ljZSA9IGNvbmZpZy52b2ljZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZUFnZW50Lm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlYm91bmNlVGV4dExlbmd0aDogc2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoID8/IDEwMCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKHsgcG9saWN5SGludDogcG9saWN5SGludElucHV0LCAuLi5vcHRpb25zIH0pIHtcbiAgICBjb25zdCBiYXNlR3VhcmRyYWlsID0gZGVmaW5lT3V0cHV0R3VhcmRyYWlsKG9wdGlvbnMpO1xuICAgIGNvbnN0IHBvbGljeUhpbnQgPSBwb2xpY3lIaW50SW5wdXQgPz8gYmFzZUd1YXJkcmFpbC5uYW1lO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmJhc2VHdWFyZHJhaWwsXG4gICAgICAgIHBvbGljeUhpbnQsXG4gICAgICAgIHJ1bjogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJhc2VHdWFyZHJhaWwucnVuKGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IC4uLnJlc3VsdC5ndWFyZHJhaWwsIHBvbGljeUhpbnQgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgbWVzc2FnZSB0aGF0IGluZm9ybXMgdGhlIG1vZGVsIGFib3V0IHdoeSB0aGUgZ3VhcmRyYWlsIHdhcyB0cmlnZ2VyZWQgYW5kIHRvXG4gKiBjb3JyZWN0IHRoZSBiZWhhdmlvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKHJlc3VsdCkge1xuICAgIHJldHVybiBgXG7imqDvuI8gWW91ciBsYXN0IGFuc3dlciB3YXMgYmxvY2tlZC4gXG5GYWlsZWQgR3VhcmRyYWlsIFJlYXNvbjogJHtyZXN1bHQuZ3VhcmRyYWlsLnBvbGljeUhpbnR9LiBcbkZhaWx1cmUgRGV0YWlsczogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8gPz8ge30pfS4gXG5QbGVhc2UgcmVzcG9uZCBhZ2FpbiBmb2xsb3dpbmcgcG9saWN5LiBBcG9sb2dpemUgZm9yIG5vdCBiZWluZyBhYmxlIHRvIGFuc3dlciB0aGUgcXVlc3Rpb24gKHdoaWxlIGF2b2lkaW5nIHRoZSBzcGVjaWZpYyByZWFzb24pIGFuZCBkaXZlcnQgZGlzY3Vzc2lvbiBiYWNrIHRvIGFuIGFwcHJvdmVkIHRvcGljIGltbWVkaWF0ZWx5IGFuZCBub3QgaW52aXRlIG1vcmUgZGlzY3Vzc2lvbi5cbmAudHJpbSgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRyYWlsLm1qcy5tYXAiLCJmdW5jdGlvbiBpc0RlZmluZWQoa2V5LCBvYmplY3QpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGZ1ZGdpbmcgd2l0aCB0eXBlcyBoZXJlIGZvciB0aGUgaW5kZXggdHlwZXNcbiAgICByZXR1cm4ga2V5IGluIG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0W2tleV0gIT09ICd1bmRlZmluZWQnO1xufVxuZnVuY3Rpb24gaXNEZXByZWNhdGVkQ29uZmlnKGNvbmZpZykge1xuICAgIHJldHVybiAoaXNEZWZpbmVkKCdtb2RhbGl0aWVzJywgY29uZmlnKSB8fFxuICAgICAgICBpc0RlZmluZWQoJ2lucHV0QXVkaW9Gb3JtYXQnLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnb3V0cHV0QXVkaW9Gb3JtYXQnLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnaW5wdXRBdWRpb1RyYW5zY3JpcHRpb24nLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgndHVybkRldGVjdGlvbicsIGNvbmZpZykgfHxcbiAgICAgICAgaXNEZWZpbmVkKCdpbnB1dEF1ZGlvTm9pc2VSZWR1Y3Rpb24nLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnc3BlZWQnLCBjb25maWcpKTtcbn1cbi8qKlxuICogQ29udmVydCBhbnkgZ2l2ZW4gY29uZmlnIChvbGQgb3IgbmV3KSB0byB0aGUgbmV3IEdBIGNvbmZpZyBzaGFwZS5cbiAqIElmIGEgbmV3IGNvbmZpZyBpcyBwcm92aWRlZCwgaXQgd2lsbCBiZSByZXR1cm5lZCBhcy1pcyAobm9ybWFsaXplZCBzaGFsbG93bHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9OZXdTZXNzaW9uQ29uZmlnKGNvbmZpZykge1xuICAgIGlmICghaXNEZXByZWNhdGVkQ29uZmlnKGNvbmZpZykpIHtcbiAgICAgICAgY29uc3QgaW5wdXRDb25maWcgPSBjb25maWcuYXVkaW8/LmlucHV0XG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IG5vcm1hbGl6ZUF1ZGlvRm9ybWF0KGNvbmZpZy5hdWRpby5pbnB1dC5mb3JtYXQpLFxuICAgICAgICAgICAgICAgIG5vaXNlUmVkdWN0aW9uOiBjb25maWcuYXVkaW8uaW5wdXQubm9pc2VSZWR1Y3Rpb24gPz8gbnVsbCxcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0aW9uOiBjb25maWcuYXVkaW8uaW5wdXQudHJhbnNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICB0dXJuRGV0ZWN0aW9uOiBjb25maWcuYXVkaW8uaW5wdXQudHVybkRldGVjdGlvbixcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCByZXF1ZXN0ZWRPdXRwdXRWb2ljZSA9IGNvbmZpZy5hdWRpbz8ub3V0cHV0Py52b2ljZSA/PyBjb25maWcudm9pY2U7XG4gICAgICAgIGNvbnN0IG91dHB1dENvbmZpZyA9IGNvbmZpZy5hdWRpbz8ub3V0cHV0IHx8IHR5cGVvZiByZXF1ZXN0ZWRPdXRwdXRWb2ljZSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogbm9ybWFsaXplQXVkaW9Gb3JtYXQoY29uZmlnLmF1ZGlvPy5vdXRwdXQ/LmZvcm1hdCksXG4gICAgICAgICAgICAgICAgdm9pY2U6IHJlcXVlc3RlZE91dHB1dFZvaWNlLFxuICAgICAgICAgICAgICAgIHNwZWVkOiBjb25maWcuYXVkaW8/Lm91dHB1dD8uc3BlZWQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsOiBjb25maWcubW9kZWwsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IGNvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB0b29sQ2hvaWNlOiBjb25maWcudG9vbENob2ljZSxcbiAgICAgICAgICAgIHRvb2xzOiBjb25maWcudG9vbHMsXG4gICAgICAgICAgICB0cmFjaW5nOiBjb25maWcudHJhY2luZyxcbiAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogY29uZmlnLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgIHByb21wdDogY29uZmlnLnByb21wdCxcbiAgICAgICAgICAgIG91dHB1dE1vZGFsaXRpZXM6IGNvbmZpZy5vdXRwdXRNb2RhbGl0aWVzLFxuICAgICAgICAgICAgYXVkaW86IGlucHV0Q29uZmlnIHx8IG91dHB1dENvbmZpZ1xuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dDogaW5wdXRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogb3V0cHV0Q29uZmlnLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbW9kZWw6IGNvbmZpZy5tb2RlbCxcbiAgICAgICAgaW5zdHJ1Y3Rpb25zOiBjb25maWcuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICB0b29sQ2hvaWNlOiBjb25maWcudG9vbENob2ljZSxcbiAgICAgICAgdG9vbHM6IGNvbmZpZy50b29scyxcbiAgICAgICAgdHJhY2luZzogY29uZmlnLnRyYWNpbmcsXG4gICAgICAgIHByb3ZpZGVyRGF0YTogY29uZmlnLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgcHJvbXB0OiBjb25maWcucHJvbXB0LFxuICAgICAgICBvdXRwdXRNb2RhbGl0aWVzOiBjb25maWcubW9kYWxpdGllcyxcbiAgICAgICAgYXVkaW86IHtcbiAgICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBub3JtYWxpemVBdWRpb0Zvcm1hdChjb25maWcuaW5wdXRBdWRpb0Zvcm1hdCksXG4gICAgICAgICAgICAgICAgbm9pc2VSZWR1Y3Rpb246IGNvbmZpZy5pbnB1dEF1ZGlvTm9pc2VSZWR1Y3Rpb24gPz8gbnVsbCxcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0aW9uOiBjb25maWcuaW5wdXRBdWRpb1RyYW5zY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgdHVybkRldGVjdGlvbjogY29uZmlnLnR1cm5EZXRlY3Rpb24sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBub3JtYWxpemVBdWRpb0Zvcm1hdChjb25maWcub3V0cHV0QXVkaW9Gb3JtYXQpLFxuICAgICAgICAgICAgICAgIHZvaWNlOiBjb25maWcudm9pY2UsXG4gICAgICAgICAgICAgICAgc3BlZWQ6IGNvbmZpZy5zcGVlZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVBdWRpb0Zvcm1hdChmb3JtYXQpIHtcbiAgICBpZiAoIWZvcm1hdClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ29iamVjdCcpXG4gICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgY29uc3QgZiA9IFN0cmluZyhmb3JtYXQpO1xuICAgIGlmIChmID09PSAncGNtMTYnKVxuICAgICAgICByZXR1cm4geyB0eXBlOiAnYXVkaW8vcGNtJywgcmF0ZTogMjQwMDAgfTtcbiAgICBpZiAoZiA9PT0gJ2c3MTFfdWxhdycpXG4gICAgICAgIHJldHVybiB7IHR5cGU6ICdhdWRpby9wY211JyB9O1xuICAgIGlmIChmID09PSAnZzcxMV9hbGF3JylcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2F1ZGlvL3BjbWEnIH07XG4gICAgLy8gRGVmYXVsdCBmYWxsYmFjazogYXNzdW1lIDI0a0h6IFBDTSBpZiB1bmtub3duIHN0cmluZ1xuICAgIHJldHVybiB7IHR5cGU6ICdhdWRpby9wY20nLCByYXRlOiAyNDAwMCB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50TWVzc2FnZXMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuZXhwb3J0IGNvbnN0IGJhc2VJdGVtU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigncm9sZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCdzeXN0ZW0nKSxcbiAgICAgICAgY29udGVudDogei5hcnJheSh6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgICAgICB9KSkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ2Fzc2lzdGFudCcpLFxuICAgICAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pLm9yKHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvJyksXG4gICAgICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgfSkpKSxcbiAgICB9KSxcbl0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lVG9vbENhbGxJdGVtID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5saXRlcmFsKCdmdW5jdGlvbl9jYWxsJyksXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWNwQ2FsbEl0ZW0gPSB6Lm9iamVjdCh7XG4gICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LmVudW0oWydtY3BfY2FsbCcsICdtY3BfdG9vbF9jYWxsJ10pLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG59KTtcbmV4cG9ydCBjb25zdCByZWFsdGltZU1jcENhbGxBcHByb3ZhbFJlcXVlc3RJdGVtID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyksXG4gICAgc2VydmVyTGFiZWw6IHouc3RyaW5nKCksXG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBhcmd1bWVudHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIGFwcHJvdmVkOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZW1zLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignb3BlbmFpLWFnZW50czpyZWFsdGltZScpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbi8vIEV2ZW50IHNjaGVtYXMgbWlycm9yaW5nIHRoZSBzdHJ1Y3R1cmVzIGRlZmluZWQgaW4gdGhlIE9wZW5BSSBTREsgdHlwaW5ncy5cbi8vIE1vc3QgZmllbGRzIGZyb20gdGhlIGludGVyZmFjZXMgaW4gYHJlYWx0aW1lLmQudHNgIGFyZSBjYXB0dXJlZCBoZXJlIHRvXG4vLyBwcm92aWRlIGJldHRlciBydW50aW1lIHZhbGlkYXRpb24gd2hlbiBwYXJzaW5nIGV2ZW50cyBmcm9tIHRoZSBzZXJ2ZXIuXG5leHBvcnQgY29uc3QgcmVhbHRpbWVSZXNwb25zZSA9IHoub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgY29udmVyc2F0aW9uX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtYXhfb3V0cHV0X3Rva2Vuczogei5udW1iZXIoKS5vcih6LmxpdGVyYWwoJ2luZicpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgbWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAvLyBHQSByZW5hbWU6IG1vZGFsaXRpZXMgLT4gb3V0cHV0X21vZGFsaXRpZXNcbiAgICBvdXRwdXRfbW9kYWxpdGllczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3JlYWx0aW1lLnJlc3BvbnNlJykub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG91dHB1dDogei5hcnJheSh6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgLy8gR0EgZ3JvdXBpbmc6IGF1ZGlvLm91dHB1dC57Zm9ybWF0LHZvaWNlfVxuICAgIGF1ZGlvOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICBvdXRwdXQ6IHpcbiAgICAgICAgICAgIC5vYmplY3Qoe1xuICAgICAgICAgICAgZm9ybWF0OiB6LmFueSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgICAgIHZvaWNlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgICAgICAubnVsbGFibGUoKSxcbiAgICB9KVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAubnVsbGFibGUoKSxcbiAgICBzdGF0dXM6IHpcbiAgICAgICAgLmVudW0oWydjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZScsICdmYWlsZWQnLCAnY2FuY2VsbGVkJywgJ2luX3Byb2dyZXNzJ10pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHN0YXR1c19kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdXNhZ2U6IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIGlucHV0X3Rva2Vuczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBpbnB1dF90b2tlbl9kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgICAgIG91dHB1dF90b2tlbnM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgb3V0cHV0X3Rva2VuX2RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICB9KVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAubnVsbGFibGUoKSxcbn0pO1xuLy8gQmFzaWMgY29udGVudCBzY2hlbWEgdXNlZCBieSBDb252ZXJzYXRpb25JdGVtLlxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRleHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoudW5pb24oW1xuICAgICAgICB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSxcbiAgICAgICAgei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICB6LmxpdGVyYWwoJ2l0ZW1fcmVmZXJlbmNlJyksXG4gICAgICAgIHoubGl0ZXJhbCgnb3V0cHV0X3RleHQnKSxcbiAgICAgICAgei5saXRlcmFsKCdvdXRwdXRfYXVkaW8nKSxcbiAgICBdKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBjYWxsX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY29udGVudDogei5hcnJheShjb252ZXJzYXRpb25JdGVtQ29udGVudFNjaGVtYSkub3B0aW9uYWwoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICByb2xlOiB6LmVudW0oWyd1c2VyJywgJ2Fzc2lzdGFudCcsICdzeXN0ZW0nXSkub3B0aW9uYWwoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJywgJ2luX3Byb2dyZXNzJ10pLm9wdGlvbmFsKCksXG4gICAgdHlwZTogelxuICAgICAgICAuZW51bShbXG4gICAgICAgICdtZXNzYWdlJyxcbiAgICAgICAgJ2Z1bmN0aW9uX2NhbGwnLFxuICAgICAgICAnZnVuY3Rpb25fY2FsbF9vdXRwdXQnLFxuICAgICAgICAnbWNwX2xpc3RfdG9vbHMnLFxuICAgICAgICAnbWNwX3Rvb2xfY2FsbCcsXG4gICAgICAgICdtY3BfY2FsbCcsXG4gICAgICAgICdtY3BfYXBwcm92YWxfcmVxdWVzdCcsXG4gICAgICAgICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgIF0pXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIGFwcHJvdmFsX3JlcXVlc3RfaWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIGFwcHJvdmU6IHouYm9vbGVhbigpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICByZWFzb246IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHNlcnZlcl9sYWJlbDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGVycm9yOiB6LmFueSgpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0b29sczogelxuICAgICAgICAuYXJyYXkoelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCksXG4gICAgICAgIGlucHV0X3NjaGVtYTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKSxcbiAgICB9KVxuICAgICAgICAucGFzc3Rocm91Z2goKSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgY29udmVyc2F0aW9uOiB6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5jb252ZXJzYXRpb24nKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG4vLyBHQSByZW5hbWU6IGNvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZWQgLT4gY29udmVyc2F0aW9uLml0ZW0uYWRkZWRcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtQWRkZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuLy8gR0EgYWRkaXRpb246IGNvbnZlcnNhdGlvbi5pdGVtLmRvbmVcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRGVsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCksXG4gICAgbG9ncHJvYnM6IHouYXJyYXkoei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHVzYWdlOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rva2VucycpLFxuICAgICAgICB0b3RhbF90b2tlbnM6IHoubnVtYmVyKCksXG4gICAgICAgIGlucHV0X3Rva2Vuczogei5udW1iZXIoKSxcbiAgICAgICAgaW5wdXRfdG9rZW5fZGV0YWlsczogei5vYmplY3Qoe1xuICAgICAgICAgICAgdGV4dF90b2tlbnM6IHoubnVtYmVyKCksXG4gICAgICAgICAgICBhdWRpb190b2tlbnM6IHoubnVtYmVyKCksXG4gICAgICAgIH0pLFxuICAgICAgICBvdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGxvZ3Byb2JzOiB6LmFycmF5KHouYW55KCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5mYWlsZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZXJyb3I6IHoub2JqZWN0KHtcbiAgICAgICAgY29kZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBtZXNzYWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHBhcmFtOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX2VuZF9tczogei5udW1iZXIoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbURlbGV0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX2VuZF9tczogei5udW1iZXIoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBlcnJvckV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZXJyb3InKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGVycm9yOiB6LmFueSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNsZWFyZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5hcHBlbmQnKSxcbiAgICBhdWRpbzogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY2xlYXInKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNvbW1pdCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0dGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0dGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdGFydGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuc3BlZWNoX3N0YXJ0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX3N0YXJ0X21zOiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0b3BwZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RvcHBlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLnN0YXJ0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLnN0b3BwZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLmNsZWFyZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyYXRlX2xpbWl0cy51cGRhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmF0ZV9saW1pdHM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICBsaW1pdDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBuYW1lOiB6LmVudW0oWydyZXF1ZXN0cycsICd0b2tlbnMnXSkub3B0aW9uYWwoKSxcbiAgICAgICAgcmVtYWluaW5nOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIHJlc2V0X3NlY29uZHM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICB9KSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF9hdWRpby5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgLy8gIEdBIG1heSBpbnRyb2R1Y2UgcmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZG9uZVxuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJ0OiB6Lm9iamVjdCh7XG4gICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmVudW0oWyd0ZXh0JywgJ2F1ZGlvJ10pLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcnQ6IHoub2JqZWN0KHtcbiAgICAgICAgYXVkaW86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouZW51bShbJ3RleHQnLCAnYXVkaW8nXSkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlOiByZWFsdGltZVJlc3BvbnNlLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2U6IHJlYWx0aW1lUmVzcG9uc2UsXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNhbGxfaWQ6IHouc3RyaW5nKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF90ZXh0LmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICAvLyBObyByZW5hbWUgc3BlY2lmaWVkIGZvciBkb25lOyBrZWVwIHJlc3BvbnNlLnRleHQuZG9uZVxuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X3RleHQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0ZXh0OiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdzZXNzaW9uLmNyZWF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24udXBkYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNhbmNlbEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY2FuY2VsJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNyZWF0ZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcmVzcG9uc2U6IHouYW55KCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24udXBkYXRlJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3QgbWNwTGlzdFRvb2xzSW5Qcm9ncmVzc0V2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWNwX2xpc3RfdG9vbHMuaW5fcHJvZ3Jlc3MnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IG1jcExpc3RUb29sc0NvbXBsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWNwX2xpc3RfdG9vbHMuY29tcGxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU1jcENhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UubWNwX2NhbGxfYXJndW1lbnRzLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb2JmdXNjYXRpb246IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU1jcENhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5tY3BfY2FsbF9hcmd1bWVudHMuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlTWNwQ2FsbEluUHJvZ3Jlc3NFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm1jcF9jYWxsLmluX3Byb2dyZXNzJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU1jcENhbGxDb21wbGV0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm1jcF9jYWxsLmNvbXBsZXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgbWNwTGlzdFRvb2xzRmFpbGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdtY3BfbGlzdF90b29scy5mYWlsZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuLyoqXG4gKiBUaGlzIHNjaGVtYSBpcyB1c2VkIGlmIGFuIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudC4gVGhlIFJlYWx0aW1lIEFQSSBtaWdodCBpbnRyb2R1Y2VcbiAqIG5ldyBldmVudHMgYXQgc29tZSBwb2ludCBhbmQgd2Ugc2hvdWxkIGhhbmRsZSB0aGVtIGdyYWNlZnVsbHkgYnkgdHJlYXRpbmcgdGhlbSBhcyBnZW5lcmljIGV2ZW50c1xuICogb25seSByZXF1aXJpbmcgYSB0eXBlIGFuZCBhbiBvcHRpb25hbCBldmVudF9pZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGdlbmVyaWNFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVTZXJ2ZXJFdmVudFNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIGNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtQWRkZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtRG9uZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uQ29tcGxldGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRGVsdGFFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25GYWlsZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlZEV2ZW50U2NoZW1hLFxuICAgIGVycm9yRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0dGVkRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyU3RhcnRlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hLFxuICAgIHJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDb250ZW50UGFydEFkZGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDb250ZW50UGFydERvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZURvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZVRleHREb25lRXZlbnRTY2hlbWEsXG4gICAgc2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hLFxuICAgIG1jcExpc3RUb29sc0luUHJvZ3Jlc3NFdmVudFNjaGVtYSxcbiAgICBtY3BMaXN0VG9vbHNDb21wbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBtY3BMaXN0VG9vbHNGYWlsZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU1jcENhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU1jcENhbGxJblByb2dyZXNzRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VNY3BDYWxsQ29tcGxldGVkRXZlbnRTY2hlbWEsXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZUNsaWVudEV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEsXG5dKTtcbi8qKlxuICogUGFyc2VzIGEgcmVhbHRpbWUgZXZlbnQgZnJvbSB0aGUgc2VydmVyLiBJZiB0aGUgZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LCBpdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSBnZW5lcmljIGV2ZW50LlxuICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHBhcnNlLlxuICogQHJldHVybnMgVGhlIHBhcnNlZCBldmVudCBvciBudWxsIGlmIHRoZSBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlYWx0aW1lRXZlbnQoZXZlbnQpIHtcbiAgICBjb25zdCByYXcgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEudG9TdHJpbmcoKSk7XG4gICAgY29uc3QgcGFyc2VkID0gcmVhbHRpbWVTZXJ2ZXJFdmVudFNjaGVtYS5zYWZlUGFyc2UocmF3KTtcbiAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XG4gICAgICAgIGNvbnN0IGdlbmVyaWNQYXJzZWQgPSBnZW5lcmljRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHJhdyk7XG4gICAgICAgIGlmIChnZW5lcmljUGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IGdlbmVyaWNQYXJzZWQuZGF0YSwgaXNHZW5lcmljOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgaXNHZW5lcmljOiB0cnVlIH07XG4gICAgfVxuICAgIHJldHVybiB7IGRhdGE6IHBhcnNlZC5kYXRhLCBpc0dlbmVyaWM6IGZhbHNlIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZUV2ZW50cy5tanMubWFwIiwiaW1wb3J0IHsgUnVudGltZUV2ZW50RW1pdHRlciwgVXNhZ2UgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IHRvTmV3U2Vzc2lvbkNvbmZpZywgfSBmcm9tIFwiLi9jbGllbnRNZXNzYWdlcy5tanNcIjtcbmltcG9ydCB7IHJlYWx0aW1lTWNwQ2FsbEFwcHJvdmFsUmVxdWVzdEl0ZW0sIHJlYWx0aW1lTWNwQ2FsbEl0ZW0sIHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEsIHJlYWx0aW1lVG9vbENhbGxJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQsIHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgYXJyYXlCdWZmZXJUb0Jhc2U2NCwgZGlmZlJlYWx0aW1lSGlzdG9yeSB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyRGVsZWdhdGUgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL3V0aWxzJztcbi8qKlxuICogVGhlIGRlZmF1bHQgbW9kZWwgdGhhdCBpcyB1c2VkIGR1cmluZyB0aGUgY29ubmVjdGlvbiBpZiBubyBtb2RlbCBpcyBwcm92aWRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMID0gJ2dwdC1yZWFsdGltZSc7XG4vKipcbiAqIFRoZSBkZWZhdWx0IHNlc3Npb24gY29uZmlnIHRoYXQgZ2V0cyBzZW5kIG92ZXIgZHVyaW5nIHNlc3Npb24gY29ubmVjdGlvbiB1bmxlc3Mgb3ZlcnJpZGRlblxuICogYnkgdGhlIHVzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRyA9IHtcbiAgICBvdXRwdXRNb2RhbGl0aWVzOiBbJ2F1ZGlvJ10sXG4gICAgYXVkaW86IHtcbiAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgIGZvcm1hdDogeyB0eXBlOiAnYXVkaW8vcGNtJywgcmF0ZTogMjQwMDAgfSxcbiAgICAgICAgICAgIHRyYW5zY3JpcHRpb246IHsgbW9kZWw6ICdncHQtNG8tbWluaS10cmFuc2NyaWJlJyB9LFxuICAgICAgICAgICAgdHVybkRldGVjdGlvbjogeyB0eXBlOiAnc2VtYW50aWNfdmFkJyB9LFxuICAgICAgICAgICAgbm9pc2VSZWR1Y3Rpb246IG51bGwsXG4gICAgICAgIH0sXG4gICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgZm9ybWF0OiB7IHR5cGU6ICdhdWRpby9wY20nLCByYXRlOiAyNDAwMCB9LFxuICAgICAgICAgICAgc3BlZWQ6IDEsXG4gICAgICAgIH0sXG4gICAgfSxcbn07XG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVCYXNlIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgICNtb2RlbDtcbiAgICAjYXBpS2V5O1xuICAgICN0cmFjaW5nQ29uZmlnID0gbnVsbDtcbiAgICAjcmF3U2Vzc2lvbkNvbmZpZyA9IG51bGw7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IFJ1bnRpbWVFdmVudEVtaXR0ZXIoKTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy4jbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMO1xuICAgICAgICB0aGlzLiNhcGlLZXkgPSBvcHRpb25zLmFwaUtleTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgbW9kZWwgdGhhdCBpcyBiZWluZyB1c2VkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIuXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRNb2RlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21vZGVsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBtb2RlbCB0aGF0IGlzIGJlaW5nIHVzZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllci5cbiAgICAgKiAqKk5vdGUqKjogVGhlIG1vZGVsIGNhbm5vdCBiZSBjaGFuZ2VkIG1pZCBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgc2V0IGN1cnJlbnRNb2RlbChtb2RlbCkge1xuICAgICAgICB0aGlzLiNtb2RlbCA9IG1vZGVsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIb29rIGZvciBzdWJjbGFzc2VzIHRvIGNsZWFuIHVwIHRyYW5zcG9ydC1zcGVjaWZpYyBzdGF0ZSB3aGVuIGF1ZGlvXG4gICAgICogcGxheWJhY2sgZmluaXNoZXMuIERlZmF1bHRzIHRvIGEgbm8tb3AuXG4gICAgICovXG4gICAgX2FmdGVyQXVkaW9Eb25lRXZlbnQoKSB7XG4gICAgICAgIC8vIEludGVudGlvbmFsbHkgZW1wdHkuXG4gICAgfVxuICAgIGdldCBfcmF3U2Vzc2lvbkNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3Jhd1Nlc3Npb25Db25maWcgPz8gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgX2dldEFwaUtleShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IG9wdGlvbnMuYXBpS2V5ID8/IHRoaXMuI2FwaUtleTtcbiAgICAgICAgaWYgKHR5cGVvZiBhcGlLZXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBhcGlLZXkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXBpS2V5O1xuICAgIH1cbiAgICBfb25NZXNzYWdlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChldmVudCk7XG4gICAgICAgIGlmIChwYXJzZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJyonLCBwYXJzZWQpO1xuICAgICAgICBpZiAoaXNHZW5lcmljKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgeyB0eXBlOiAnZXJyb3InLCBlcnJvcjogcGFyc2VkIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbWl0KHBhcnNlZC50eXBlLCBwYXJzZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fc3RhcnRlZCcsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2Vfc3RhcnRlZCcsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcnNlZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnc2Vzc2lvbi51cGRhdGVkJykge1xuICAgICAgICAgICAgdGhpcy4jcmF3U2Vzc2lvbkNvbmZpZyA9IHBhcnNlZC5zZXNzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLnNhZmVQYXJzZShwYXJzZWQpO1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBwYXJzaW5nIHJlc3BvbnNlIGRvbmUgZXZlbnQnLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW5wdXRUb2tlbnMgPSByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5pbnB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dFRva2VucyA9IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsVG9rZW5zID0gaW5wdXRUb2tlbnMgKyBvdXRwdXRUb2tlbnM7XG4gICAgICAgICAgICBjb25zdCB1c2FnZSA9IG5ldyBVc2FnZSh7XG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5pbnB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5fZGV0YWlscyA/PyB7fSxcbiAgICAgICAgICAgICAgICB0b3RhbFRva2VucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd1c2FnZV91cGRhdGUnLCB1c2FnZSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fZG9uZScsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2VfZG9uZScsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UuaWQgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS5vdXRwdXQgPz8gW10sXG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8uaW5wdXRfdG9rZW5fZGV0YWlscyA/PyB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpby5kb25lJykge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19kb25lJyk7XG4gICAgICAgICAgICB0aGlzLl9hZnRlckF1ZGlvRG9uZUV2ZW50KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV9kZWxldGVkJywge1xuICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGVkJykge1xuICAgICAgICAgICAgLy8gcmlnaHQgbm93IHJhdGhlciB0aGFuIGtlZXBpbmcgdHJhY2sgb2YgcGFydGlhbHMgYW5kIHJlYnVpbGRpbmcgdGhlIGl0ZW0gd2VcbiAgICAgICAgICAgIC8vIHdpbGwgcmV0cmlldmUgaXQgaW5zdGVhZCB3aGljaCB0cmlnZ2VycyB0aGUgYGNvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZGAgZXZlbnQgYmVsb3dcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmUnLFxuICAgICAgICAgICAgICAgIGl0ZW1faWQ6IHBhcnNlZC5pdGVtX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5kZWx0YScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X3RleHQuZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpb190cmFuc2NyaXB0LmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpb190cmFuc2NyaXB0LmRlbHRhJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fdHJhbnNjcmlwdF9kZWx0YScsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RyYW5zY3JpcHRfZGVsdGEnLFxuICAgICAgICAgICAgICAgICAgICBkZWx0YTogcGFyc2VkLmRlbHRhLFxuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtX2lkLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiBwYXJzZWQucmVzcG9uc2VfaWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBubyBzdXBwb3J0IGZvciBwYXJ0aWFsIHRyYW5zY3JpcHRzIHlldC5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5hZGRlZCcgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkJykge1xuICAgICAgICAgICAgLy8gSGFuZGxlIE1DUCBsaXN0IHRvb2xzIGl0ZW1zIChvbmx5IGFjdCB3aGVuIGRvbmUgdG8gZW5zdXJlIHRvb2xzIGFyZSBwcmVzZW50KVxuICAgICAgICAgICAgaWYgKHBhcnNlZC5pdGVtLnR5cGUgPT09ICdtY3BfbGlzdF90b29scycgJiZcbiAgICAgICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmVyTGFiZWwgPSBwYXJzZWQuaXRlbS5zZXJ2ZXJfbGFiZWwgPz8gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbHMgPSAocGFyc2VkLml0ZW0udG9vbHMgPz8gW10pO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWNwX3Rvb2xzX2xpc3RlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZW1pdHRpbmcgbWNwX3Rvb2xzX2xpc3RlZCcsIGVyciwgcGFyc2VkLml0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXZSBkbyBub3QgYWRkIHRoaXMgaXRlbSB0byBoaXN0b3J5OyBpdCdzIGEgdHJhbnNwb3J0LWxldmVsIHNpZGUtY2hhbm5lbC5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNJdGVtSWQgPSBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmFkZGVkJyB8fFxuICAgICAgICAgICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmRvbmUnXG4gICAgICAgICAgICAgICAgICAgID8gcGFyc2VkLnByZXZpb3VzX2l0ZW1faWRcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtSWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnNlZC5pdGVtLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5pdGVtLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcGFyc2VkLml0ZW0uc3RhdHVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBpdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyAmJlxuICAgICAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkLml0ZW07XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwQXBwcm92YWxSZXF1ZXN0ID0gcmVhbHRpbWVNY3BDYWxsQXBwcm92YWxSZXF1ZXN0SXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJMYWJlbDogaXRlbS5zZXJ2ZXJfbGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBKU09OLnBhcnNlKGl0ZW0uYXJndW1lbnRzIHx8ICd7fScpLFxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZlZDogaXRlbS5hcHByb3ZlZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgbWNwQXBwcm92YWxSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JywgbWNwQXBwcm92YWxSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF90b29sX2NhbGwnIHx8XG4gICAgICAgICAgICAgICAgcGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF9jYWxsJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZSdcbiAgICAgICAgICAgICAgICAgICAgPyAnY29tcGxldGVkJ1xuICAgICAgICAgICAgICAgICAgICA6ICdpbl9wcm9ncmVzcyc7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwQ2FsbCA9IHJlYWx0aW1lTWNwQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZWQuaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogcGFyc2VkLml0ZW0uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYXJzZWQuaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHBhcnNlZC5pdGVtLm91dHB1dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgbWNwQ2FsbCk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdtY3BfdG9vbF9jYWxsX2NvbXBsZXRlZCcsIG1jcENhbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UubWNwX2NhbGwuaW5fcHJvZ3Jlc3MnKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkO1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScsXG4gICAgICAgICAgICAgICAgaXRlbV9pZDogaXRlbS5pdGVtX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnbWNwX2xpc3RfdG9vbHMuaW5fcHJvZ3Jlc3MnKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkO1xuICAgICAgICAgICAgaWYgKGl0ZW0uaXRlbV9pZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbV9pZDogaXRlbS5pdGVtX2lkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmFkZGVkJykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHBhcnNlZC5pdGVtO1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnICYmIGl0ZW0uc3RhdHVzID09PSAnY29tcGxldGVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gcmVhbHRpbWVUb29sQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLCAvLyB3ZSBzZXQgaXQgdG8gaW5fcHJvZ3Jlc3MgZm9yIHRoZSBVSSBhcyBpdCB3aWxsIG9ubHkgYmUgY29tcGxldGVkIHdpdGggdGhlIG91dHB1dFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGl0ZW0uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogbnVsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgdG9vbENhbGwpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZnVuY3Rpb25fY2FsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkOiBpdGVtLmNhbGxfaWQgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogaXRlbS5hcmd1bWVudHMgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSA/PyAnJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWNwX3Rvb2xfY2FsbCcgfHwgaXRlbS50eXBlID09PSAnbWNwX2NhbGwnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwQ2FsbCA9IHJlYWx0aW1lTWNwQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdjb21wbGV0ZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICdpbl9wcm9ncmVzcycsIC8vIHdlIHNldCBpdCB0byBpbl9wcm9ncmVzcyBmb3IgdGhlIFVJIGFzIGl0IHdpbGwgb25seSBiZSBjb21wbGV0ZWQgd2l0aCB0aGUgb3V0cHV0XG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogaXRlbS5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBpdGVtLm91dHB1dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgbWNwQ2FsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbHRpbWVJdGVtID0gcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnNlZC5pdGVtLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5pdGVtLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyAoaXRlbS5zdGF0dXMgPz8gJ2NvbXBsZXRlZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IChpdGVtLnN0YXR1cyA/PyAnaW5fcHJvZ3Jlc3MnKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgcmVhbHRpbWVJdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX29uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9vbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIF9vbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgY3JlYXRlIGEgbmV3IGl0ZW0gaW4gdGhlIGNvbnZlcnNhdGlvbiBhbmRcbiAgICAgKiB0cmlnZ2VyIGEgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEsIHsgdHJpZ2dlclJlc3BvbnNlID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfdGV4dCcsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgIDogbWVzc2FnZS5jb250ZW50Lm1hcCgoY29udGVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdpbnB1dF9pbWFnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnB1dF9pbWFnZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IGNvbnRlbnQuaW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4oY29udGVudC5wcm92aWRlckRhdGEgPz8ge30pLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgIGl0ZW06IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4ub3RoZXJFdmVudERhdGEsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHJpZ2dlclJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRJbWFnZShpbWFnZSwgeyB0cmlnZ2VyUmVzcG9uc2UgPSB0cnVlIH0gPSB7fSkge1xuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFt7IHR5cGU6ICdpbnB1dF9pbWFnZScsIGltYWdlIH1dLFxuICAgICAgICB9LCB7fSwgeyB0cmlnZ2VyUmVzcG9uc2UgfSk7XG4gICAgfVxuICAgIF9nZXRNZXJnZWRTZXNzaW9uQ29uZmlnKGNvbmZpZykge1xuICAgICAgICBjb25zdCBuZXdDb25maWcgPSB0b05ld1Nlc3Npb25Db25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3Qgbm9pc2VSZWR1Y3Rpb25PdmVycmlkZSA9IG5ld0NvbmZpZy5hdWRpbz8uaW5wdXQ/Lm5vaXNlUmVkdWN0aW9uO1xuICAgICAgICBjb25zdCB0cmFuc2NyaXB0aW9uT3ZlcnJpZGUgPSBuZXdDb25maWcuYXVkaW8/LmlucHV0Py50cmFuc2NyaXB0aW9uO1xuICAgICAgICBjb25zdCB0dXJuRGV0ZWN0aW9uT3ZlcnJpZGUgPSBPcGVuQUlSZWFsdGltZUJhc2UuYnVpbGRUdXJuRGV0ZWN0aW9uQ29uZmlnKG5ld0NvbmZpZy5hdWRpbz8uaW5wdXQ/LnR1cm5EZXRlY3Rpb24pO1xuICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IG5ld0NvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBtb2RlbDogbmV3Q29uZmlnLm1vZGVsID8/IHRoaXMuI21vZGVsLFxuICAgICAgICAgICAgb3V0cHV0X21vZGFsaXRpZXM6IG5ld0NvbmZpZy5vdXRwdXRNb2RhbGl0aWVzID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcub3V0cHV0TW9kYWxpdGllcyxcbiAgICAgICAgICAgIGF1ZGlvOiB7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBuZXdDb25maWcuYXVkaW8/LmlucHV0Py5mb3JtYXQgPz9cbiAgICAgICAgICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmF1ZGlvPy5pbnB1dD8uZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICBub2lzZV9yZWR1Y3Rpb246IG5vaXNlUmVkdWN0aW9uT3ZlcnJpZGUgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/Lm5vaXNlUmVkdWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5vaXNlUmVkdWN0aW9uT3ZlcnJpZGUsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zY3JpcHRpb246IHRyYW5zY3JpcHRpb25PdmVycmlkZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmF1ZGlvPy5pbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8udHJhbnNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0cmFuc2NyaXB0aW9uT3ZlcnJpZGUsXG4gICAgICAgICAgICAgICAgICAgIHR1cm5fZGV0ZWN0aW9uOiB0dXJuRGV0ZWN0aW9uT3ZlcnJpZGUgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/LnR1cm5EZXRlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIDogdHVybkRldGVjdGlvbk92ZXJyaWRlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogbmV3Q29uZmlnLmF1ZGlvPy5vdXRwdXQ/LmZvcm1hdCA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/Lm91dHB1dD8uZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICB2b2ljZTogbmV3Q29uZmlnLmF1ZGlvPy5vdXRwdXQ/LnZvaWNlID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8ub3V0cHV0Py52b2ljZSxcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IG5ld0NvbmZpZy5hdWRpbz8ub3V0cHV0Py5zcGVlZCA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/Lm91dHB1dD8uc3BlZWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b29sX2Nob2ljZTogbmV3Q29uZmlnLnRvb2xDaG9pY2UgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy50b29sQ2hvaWNlLFxuICAgICAgICAgICAgLy8gV2UgZG9uJ3Qgc2V0IHRyYWNpbmcgaGVyZSB0byBtYWtlIHN1cmUgdGhhdCB3ZSBkb24ndCB0cnkgdG8gb3ZlcnJpZGUgaXQgb24gZXZlcnlcbiAgICAgICAgICAgIC8vIHNlc3Npb24udXBkYXRlIGFzIGl0IG1pZ2h0IGxlYWQgdG8gZXJyb3JzXG4gICAgICAgICAgICAuLi4obmV3Q29uZmlnLnByb3ZpZGVyRGF0YSA/PyB7fSksXG4gICAgICAgIH07XG4gICAgICAgIGlmIChuZXdDb25maWcucHJvbXB0KSB7XG4gICAgICAgICAgICBzZXNzaW9uRGF0YS5wcm9tcHQgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IG5ld0NvbmZpZy5wcm9tcHQucHJvbXB0SWQsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogbmV3Q29uZmlnLnByb21wdC52ZXJzaW9uLFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogbmV3Q29uZmlnLnByb21wdC52YXJpYWJsZXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdDb25maWcudG9vbHMgJiYgbmV3Q29uZmlnLnRvb2xzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNlc3Npb25EYXRhLnRvb2xzID0gbmV3Q29uZmlnLnRvb2xzLm1hcCgodG9vbCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBpY2tEZWZpbmVkID0gKG9iaikgPT4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKG9iaikuZmlsdGVyKChbLCB2YWx1ZV0pID0+IHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpKTtcbiAgICAgICAgICAgICAgICBpZiAodG9vbC50eXBlID09PSAnbWNwJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZWFsdGltZSBBUEkgTUNQIHRvb2wgc2hhcGU6IHNlc3Npb24udXBkYXRlIHByb3BlcnRpZXMgYW5kIE1DUCB0b29sIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBpY2tEZWZpbmVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyX2xhYmVsOiB0b29sLnNlcnZlcl9sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlcl91cmw6IHRvb2wuc2VydmVyX3VybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlcl9kZXNjcmlwdGlvbjogdG9vbC5zZXJ2ZXJfZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0b3JfaWQ6IHRvb2wuY29ubmVjdG9yX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdG9vbC5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdG9vbC5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9vbC5hbGxvd2VkX3Rvb2xzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogdG9vbC5yZXF1aXJlX2FwcHJvdmFsLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUmVhbHRpbWUgQVBJIGZ1bmN0aW9uIHRvb2wgc2hhcGU6IGtlZXAgb25seSBkb2N1bWVudGVkIGZpZWxkcyBmb3Igc2Vzc2lvbi51cGRhdGUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBpY2tEZWZpbmVkKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdG9vbC50eXBlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiB0b29sLnBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2Vzc2lvbkRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkIHRoZSBwYXlsb2FkIG9iamVjdCBleHBlY3RlZCBieSB0aGUgUmVhbHRpbWUgQVBJIHdoZW4gY3JlYXRpbmcgb3IgdXBkYXRpbmcgYSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogVGhlIGhlbHBlciBjZW50cmFsaXNlcyB0aGUgY29udmVyc2lvbiBmcm9tIGNhbWVsQ2FzZSBydW50aW1lIGNvbmZpZyB0byB0aGUgc25ha2VfY2FzZSBwYXlsb2FkXG4gICAgICogcmVxdWlyZWQgYnkgdGhlIFJlYWx0aW1lIEFQSSBzbyB0cmFuc3BvcnRzIHRoYXQgbmVlZCBhIG9uZS1vZmYgcGF5bG9hZCAoZm9yIGV4YW1wbGUgU0lQIGNhbGxcbiAgICAgKiBhY2NlcHRhbmNlKSBjYW4gcmV1c2UgdGhlIHNhbWUgbG9naWMgd2l0aG91dCBkdXBsaWNhdGluZyBwcml2YXRlIHN0YXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIFRoZSBzZXNzaW9uIGNvbmZpZyB0byBtZXJnZSB3aXRoIGRlZmF1bHRzLlxuICAgICAqL1xuICAgIGJ1aWxkU2Vzc2lvblBheWxvYWQoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRNZXJnZWRTZXNzaW9uQ29uZmlnKGNvbmZpZyk7XG4gICAgfVxuICAgIHN0YXRpYyBidWlsZFR1cm5EZXRlY3Rpb25Db25maWcoYykge1xuICAgICAgICBpZiAodHlwZW9mIGMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHR5cGUsIGNyZWF0ZVJlc3BvbnNlLCBjcmVhdGVfcmVzcG9uc2UsIGVhZ2VybmVzcywgaW50ZXJydXB0UmVzcG9uc2UsIGludGVycnVwdF9yZXNwb25zZSwgcHJlZml4UGFkZGluZ01zLCBwcmVmaXhfcGFkZGluZ19tcywgc2lsZW5jZUR1cmF0aW9uTXMsIHNpbGVuY2VfZHVyYXRpb25fbXMsIHRocmVzaG9sZCwgaWRsZVRpbWVvdXRNcywgaWRsZV90aW1lb3V0X21zLCAuLi5yZXN0IH0gPSBjO1xuICAgICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgY3JlYXRlX3Jlc3BvbnNlOiBjcmVhdGVSZXNwb25zZSA/PyBjcmVhdGVfcmVzcG9uc2UsXG4gICAgICAgICAgICBlYWdlcm5lc3MsXG4gICAgICAgICAgICBpbnRlcnJ1cHRfcmVzcG9uc2U6IGludGVycnVwdFJlc3BvbnNlID8/IGludGVycnVwdF9yZXNwb25zZSxcbiAgICAgICAgICAgIHByZWZpeF9wYWRkaW5nX21zOiBwcmVmaXhQYWRkaW5nTXMgPz8gcHJlZml4X3BhZGRpbmdfbXMsXG4gICAgICAgICAgICBzaWxlbmNlX2R1cmF0aW9uX21zOiBzaWxlbmNlRHVyYXRpb25NcyA/PyBzaWxlbmNlX2R1cmF0aW9uX21zLFxuICAgICAgICAgICAgaWRsZV90aW1lb3V0X21zOiBpZGxlVGltZW91dE1zID8/IGlkbGVfdGltZW91dF9tcyxcbiAgICAgICAgICAgIHRocmVzaG9sZCxcbiAgICAgICAgICAgIC4uLnJlc3QsXG4gICAgICAgIH07XG4gICAgICAgIC8vIFJlbW92ZSB1bmRlZmluZWQgdmFsdWVzIGZyb20gdGhlIGNvbmZpZ1xuICAgICAgICBPYmplY3Qua2V5cyhjb25maWcpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbmZpZ1trZXldID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgZGVsZXRlIGNvbmZpZ1trZXldO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGNvbmZpZykubGVuZ3RoID4gMCA/IGNvbmZpZyA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgaW50ZXJuYWwgdHJhY2luZyBjb25maWcuIFRoaXMgaXMgdXNlZCB0byB0cmFjayB0aGUgdHJhY2luZyBjb25maWcgdGhhdCBoYXMgYmVlbiBzZXRcbiAgICAgKiBkdXJpbmcgdGhlIHNlc3Npb24uY3JlYXRlIGV2ZW50LlxuICAgICAqL1xuICAgIHNldCBfdHJhY2luZ0NvbmZpZyh0cmFjaW5nQ29uZmlnKSB7XG4gICAgICAgIHRoaXMuI3RyYWNpbmdDb25maWcgPSB0cmFjaW5nQ29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0cmFjaW5nIGNvbmZpZyBmb3IgdGhlIHNlc3Npb24uIFRoaXMgd2lsbCBzZW5kIHRoZSB0cmFjaW5nIGNvbmZpZyB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYWNpbmdDb25maWcgLSBUaGUgdHJhY2luZyBjb25maWcgdG8gc2V0LiBXZSBkb24ndCBzdXBwb3J0ICdhdXRvJyBoZXJlIGFzIHRoZSBTREsgd2lsbCBhbHdheXMgY29uZmlndXJlIGEgV29ya2Zsb3cgTmFtZSB1bmxlc3MgaXQgZXhpc3RzXG4gICAgICovXG4gICAgX3VwZGF0ZVRyYWNpbmdDb25maWcodHJhY2luZ0NvbmZpZykge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAvLyB0cmVhdGluZyBpdCBhcyBkZWZhdWx0IHZhbHVlXG4gICAgICAgICAgICB0aGlzLiN0cmFjaW5nQ29uZmlnID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAvLyB0dXJuIG9uIHRyYWNpbmcgaW4gYXV0byBtb2RlXG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3RyYWNpbmdDb25maWcgIT09IG51bGwgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLiN0cmFjaW5nQ29uZmlnICE9PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgdHlwZW9mIHRyYWNpbmdDb25maWcgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyB0cmFjaW5nIGlzIGFscmVhZHkgc2V0LCB3ZSBjYW4ndCBjaGFuZ2UgaXRcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdUcmFjaW5nIGNvbmZpZyBpcyBhbHJlYWR5IHNldCwgc2tpcHBpbmcgc2V0dGluZyBpdCBhZ2Fpbi4gVGhpcyBsaWtlbHkgaGFwcGVucyB3aGVuIHlvdSBhbHJlYWR5IHNldCBhIHRyYWNpbmcgY29uZmlnIG9uIHNlc3Npb24gY3JlYXRpb24uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnRGlzYWJsaW5nIHRyYWNpbmcgZm9yIHRoaXMgc2Vzc2lvbi4gSXQgY2Fubm90IGJlIHR1cm5lZCBvbiBmb3IgdGhpcyBzZXNzaW9uIGZyb20gdGhpcyBwb2ludCBvbi4nKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JlYWx0aW1lJyxcbiAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogbnVsbCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3RyYWNpbmdDb25maWcgPT09IG51bGwgfHxcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLiN0cmFjaW5nQ29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gdHJhY2luZyBpcyBjdXJyZW50bHkgbm90IHNldCBzbyB3ZSBjYW4gc2V0IGl0IHRvIHRoZSBuZXcgdmFsdWVcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JlYWx0aW1lJyxcbiAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogdHJhY2luZ0NvbmZpZyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWc/Lmdyb3VwX2lkICE9PSB0aGlzLiN0cmFjaW5nQ29uZmlnPy5ncm91cF9pZCB8fFxuICAgICAgICAgICAgdHJhY2luZ0NvbmZpZz8ubWV0YWRhdGEgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/Lm1ldGFkYXRhIHx8XG4gICAgICAgICAgICB0cmFjaW5nQ29uZmlnPy53b3JrZmxvd19uYW1lICE9PSB0aGlzLiN0cmFjaW5nQ29uZmlnPy53b3JrZmxvd19uYW1lKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignTWlzbWF0Y2ggaW4gdHJhY2luZyBjb25maWcuIElnbm9yaW5nIHRoZSBuZXcgdHJhY2luZyBjb25maWcuIFRoaXMgbGlrZWx5IGhhcHBlbnMgd2hlbiB5b3UgYWxyZWFkeSBzZXQgYSB0cmFjaW5nIGNvbmZpZyBvbiBzZXNzaW9uIGNyZWF0aW9uLiBDdXJyZW50IHRyYWNpbmcgY29uZmlnOiAlcywgbmV3IHRyYWNpbmcgY29uZmlnOiAlcycsIEpTT04uc3RyaW5naWZ5KHRoaXMuI3RyYWNpbmdDb25maWcpLCBKU09OLnN0cmluZ2lmeSh0cmFjaW5nQ29uZmlnKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgc2Vzc2lvbiBjb25maWcuIFRoaXMgd2lsbCBtZXJnZSBpdCB3aXRoIHRoZSBjdXJyZW50IHNlc3Npb24gY29uZmlnIHdpdGggdGhlIGRlZmF1bHRcbiAgICAgKiB2YWx1ZXMgYW5kIHNlbmQgaXQgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25maWcgLSBUaGUgc2Vzc2lvbiBjb25maWcgdG8gdXBkYXRlLlxuICAgICAqL1xuICAgIHVwZGF0ZVNlc3Npb25Db25maWcoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0gdGhpcy5idWlsZFNlc3Npb25QYXlsb2FkKGNvbmZpZyk7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICBzZXNzaW9uOiBzZXNzaW9uRGF0YSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgdGhlIG91dHB1dCBvZiBhIGZ1bmN0aW9uIGNhbGwgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0b29sQ2FsbCAtIFRoZSB0b29sIGNhbGwgdG8gc2VuZCB0aGUgb3V0cHV0IGZvci5cbiAgICAgKiBAcGFyYW0gb3V0cHV0IC0gVGhlIG91dHB1dCBvZiB0aGUgZnVuY3Rpb24gY2FsbC5cbiAgICAgKiBAcGFyYW0gc3RhcnRSZXNwb25zZSAtIFdoZXRoZXIgdG8gc3RhcnQgYSBuZXcgcmVzcG9uc2UgYWZ0ZXIgc2VuZGluZyB0aGUgb3V0cHV0LlxuICAgICAqL1xuICAgIHNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIG91dHB1dCwgc3RhcnRSZXNwb25zZSA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICBpdGVtOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgICAgY2FsbF9pZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcmVhbHRpbWVUb29sQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgIGl0ZW1JZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHRvb2xDYWxsLnByZXZpb3VzSXRlbUlkLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsJyxcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50czogdG9vbENhbGwuYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgdG9vbCBjYWxsIGl0ZW0nLCBlcnJvciwgdG9vbENhbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydFJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGF1ZGlvIGJ1ZmZlciB0byB0aGUgUmVhbHRpbWUgQVBJLiBJZiBgeyBjb21taXQ6IHRydWUgfWAgaXMgcGFzc2VkLCB0aGUgYXVkaW8gYnVmZmVyXG4gICAgICogd2lsbCBiZSBjb21taXR0ZWQgYW5kIHRoZSBtb2RlbCB3aWxsIHN0YXJ0IHByb2Nlc3NpbmcgaXQuIFRoaXMgaXMgbmVjZXNzYXJ5IGlmIHlvdSBoYXZlXG4gICAgICogZGlzYWJsZWQgdHVybiBkZXRlY3Rpb24gLyB2b2ljZSBhY3Rpdml0eSBkZXRlY3Rpb24gKFZBRCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gYnVmZmVyIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKi9cbiAgICBzZW5kQXVkaW8oYXVkaW8sIHsgY29tbWl0ID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdpbnB1dF9hdWRpb19idWZmZXIuYXBwZW5kJyxcbiAgICAgICAgICAgIGF1ZGlvOiBhcnJheUJ1ZmZlclRvQmFzZTY0KGF1ZGlvKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjb21taXQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfYXVkaW9fYnVmZmVyLmNvbW1pdCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLiBUaGlzIHdpbGwgY3JlYXRlIGEgZGlmZiBiZXR3ZWVuIHRoZSBvbGQgYW5kIG5ldyBoaXN0b3J5XG4gICAgICogYW5kIHNlbmQgdGhlIG5lY2Vzc2FyeSBldmVudHMgdG8gdGhlIFJlYWx0aW1lIEFQSSB0byB1cGRhdGUgdGhlIGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb2xkSGlzdG9yeSAtIFRoZSBvbGQgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5IG9mIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgcmVzZXRIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpIHtcbiAgICAgICAgY29uc3QgeyByZW1vdmFscywgYWRkaXRpb25zLCB1cGRhdGVzIH0gPSBkaWZmUmVhbHRpbWVIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpO1xuICAgICAgICBjb25zdCByZW1vdmFsSWRzID0gbmV3IFNldChyZW1vdmFscy5tYXAoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkKSk7XG4gICAgICAgIC8vIHdlIGRvbid0IGhhdmUgYW4gdXBkYXRlIGV2ZW50IGZvciBpdGVtcyBzbyB3ZSB3aWxsIHJlbW92ZSBhbmQgcmUtYWRkIHdoYXQncyB0aGVyZVxuICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XG4gICAgICAgICAgICByZW1vdmFsSWRzLmFkZCh1cGRhdGUuaXRlbUlkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtb3ZhbElkcy5zaXplID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtSWQgb2YgcmVtb3ZhbElkcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZScsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1faWQ6IGl0ZW1JZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZGRpdGlvbnNBbmRVcGRhdGVzID0gWy4uLmFkZGl0aW9ucywgLi4udXBkYXRlc107XG4gICAgICAgIGZvciAoY29uc3QgYWRkaXRpb24gb2YgYWRkaXRpb25zQW5kVXBkYXRlcykge1xuICAgICAgICAgICAgaWYgKGFkZGl0aW9uLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1FbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiBhZGRpdGlvbi5yb2xlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBhZGRpdGlvbi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBpZDogYWRkaXRpb24uaXRlbUlkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uLnJvbGUgIT09ICdzeXN0ZW0nICYmIGFkZGl0aW9uLnN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICBpdGVtRW50cnkuc3RhdHVzID0gYWRkaXRpb24uc3RhdHVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtOiBpdGVtRW50cnksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhZGRpdGlvbi50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRnVuY3Rpb24gY2FsbHMgY2Fubm90IGJlIG1hbnVhbGx5IGFkZGVkIG9yIHVwZGF0ZWQgYXQgdGhlIG1vbWVudC4gSWdub3JpbmcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VuZE1jcFJlc3BvbnNlKGFwcHJvdmFsUmVxdWVzdCwgYXBwcm92ZWQpIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICBwcmV2aW91c19pdGVtX2lkOiBhcHByb3ZhbFJlcXVlc3QuaXRlbUlkLFxuICAgICAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgIGFwcHJvdmFsX3JlcXVlc3RfaWQ6IGFwcHJvdmFsUmVxdWVzdC5pdGVtSWQsXG4gICAgICAgICAgICAgICAgYXBwcm92ZTogYXBwcm92ZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZUJhc2UubWpzLm1hcCIsIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG5pbXBvcnQgeyBpc0Jyb3dzZXJFbnZpcm9ubWVudCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZUJhc2UsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWFsdGltZUV2ZW50IH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG5pbXBvcnQgeyBIRUFERVJTIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG4vKipcbiAqIFRyYW5zcG9ydCBsYXllciB0aGF0J3MgaGFuZGxpbmcgdGhlIGNvbm5lY3Rpb24gYmV0d2VlbiB0aGUgY2xpZW50IGFuZCBPcGVuQUkncyBSZWFsdGltZSBBUElcbiAqIHZpYSBXZWJSVEMuIFdoaWxlIHRoaXMgdHJhbnNwb3J0IGxheWVyIGlzIGRlc2lnbmVkIHRvIGJlIHVzZWQgd2l0aGluIGEgUmVhbHRpbWVTZXNzaW9uLCBpdCBjYW5cbiAqIGFsc28gYmUgdXNlZCBzdGFuZGFsb25lIGlmIHlvdSB3YW50IHRvIGhhdmUgYSBkaXJlY3QgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICpcbiAqIFVubGVzcyB5b3Ugc3BlY2lmeSBhIGBtZWRpYVN0cmVhbWAgb3IgYGF1ZGlvRWxlbWVudGAgb3B0aW9uLCB0aGUgdHJhbnNwb3J0IGxheWVyIHdpbGxcbiAqIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZSBtaWNyb3Bob25lIGFuZCBhdWRpbyBvdXRwdXQgdG8gYmUgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lV2ViUlRDIGV4dGVuZHMgT3BlbkFJUmVhbHRpbWVCYXNlIHtcbiAgICBvcHRpb25zO1xuICAgICN1cmw7XG4gICAgI3N0YXRlID0ge1xuICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICBwZWVyQ29ubmVjdGlvbjogdW5kZWZpbmVkLFxuICAgICAgICBkYXRhQ2hhbm5lbDogdW5kZWZpbmVkLFxuICAgICAgICBjYWxsSWQ6IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgICN1c2VJbnNlY3VyZUFwaUtleTtcbiAgICAjb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgI211dGVkID0gZmFsc2U7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICh0eXBlb2YgUlRDUGVlckNvbm5lY3Rpb24gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlJUQyBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy4jdXJsID0gb3B0aW9ucy5iYXNlVXJsID8/IGBodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL3JlYWx0aW1lL2NhbGxzYDtcbiAgICAgICAgdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgPSBvcHRpb25zLnVzZUluc2VjdXJlQXBpS2V5ID8/IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBjYWxsIElEIG9mIHRoZSBXZWJSVEMgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgY2FsbElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGUuY2FsbElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIFdlYlJUQyBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZS5zdGF0dXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbm5lY3Rpb24gc3RhdGUgb2YgdGhlIFdlYlJUQyBjb25uZWN0aW9uIGluY2x1ZGluZyB0aGUgcGVlciBjb25uZWN0aW9uIGFuZCBkYXRhXG4gICAgICogY2hhbm5lbC5cbiAgICAgKi9cbiAgICBnZXQgY29ubmVjdGlvblN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHNlc3Npb24gaXMgbXV0ZWQuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jbXV0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIGVzdGFibGlzaCB0aGUgY29ubmVjdGlvbiB0byB0aGUgT3BlbkFJIFJlYWx0aW1lIEFQSVxuICAgICAqIHZpYSBXZWJSVEMuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgYXJlIHVzaW5nIGEgYnJvd3NlciwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsIGFsc28gYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlXG4gICAgICogbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGluZycpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdSZWFsdGltZSBjb25uZWN0aW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MuIFBsZWFzZSBhd2FpdCBvcmlnaW5hbCBwcm9taXNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IHRoaXMuY3VycmVudE1vZGVsO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1vZGVsO1xuICAgICAgICBjb25zdCBiYXNlVXJsID0gb3B0aW9ucy51cmwgPz8gdGhpcy4jdXJsO1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXkob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGlzQ2xpZW50S2V5ID0gdHlwZW9mIGFwaUtleSA9PT0gJ3N0cmluZycgJiYgYXBpS2V5LnN0YXJ0c1dpdGgoJ2VrXycpO1xuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSAmJiAhdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgJiYgIWlzQ2xpZW50S2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdVc2luZyB0aGUgV2ViUlRDIGNvbm5lY3Rpb24gaW4gYSBicm93c2VyIGVudmlyb25tZW50IHJlcXVpcmVzIGFuIGVwaGVtZXJhbCBjbGllbnQga2V5LiBJZiB5b3UgbmVlZCB0byB1c2UgYSByZWd1bGFyIEFQSSBrZXksIHVzZSB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydCBvciBzZXQgdGhlIGB1c2VJbnNlY3VyZUFwaUtleWAgb3B0aW9uIHRvIHRydWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWFzeW5jLXByb21pc2UtZXhlY3V0b3JcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlclNlc3Npb25Db25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihvcHRpb25zLmluaXRpYWxTZXNzaW9uQ29uZmlnIHx8IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMuY3VycmVudE1vZGVsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvblVybCA9IG5ldyBVUkwoYmFzZVVybCk7XG4gICAgICAgICAgICAgICAgbGV0IHBlZXJDb25uZWN0aW9uID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YUNoYW5uZWwgPSBwZWVyQ29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbCgnb2FpLWV2ZW50cycpO1xuICAgICAgICAgICAgICAgIGxldCBjYWxsSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0YWNoQ29ubmVjdGlvblN0YXRlSGFuZGxlciA9IChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub25jb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb24uY29ubmVjdGlvblN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGlzY29ubmVjdGVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmYWlsZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nsb3NlZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJ2Nvbm5lY3RlZCcgc3RhdGUgaXMgaGFuZGxlZCBieSBkYXRhQ2hhbm5lbC5vbm9wZW4uIFNvIHdlIGRvbid0IG5lZWQgdG8gaGFuZGxlIGl0IGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJ25ldycgYW5kICdjb25uZWN0aW5nJyBhcmUgaW50ZXJtZWRpYXRlIHN0YXRlcyBhbmQgZG8gbm90IHJlcXVpcmUgYWN0aW9uIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhdHRhY2hDb25uZWN0aW9uU3RhdGVIYW5kbGVyKHBlZXJDb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGluZycsXG4gICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbCxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VuZGluZyB0aGUgc2Vzc2lvbiBjb25maWcgYWdhaW4gaGVyZSBvbmNlIHRoZSBjaGFubmVsIGlzIGNvbm5lY3RlZCB0byBlbnN1cmVcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB0aGUgc2Vzc2lvbiBjb25maWcgaXMgc2VudCB0byB0aGUgc2VydmVyIGJlZm9yZSB0aGUgZmlyc3QgcmVzcG9uc2UgaXMgcmVjZWl2ZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0dGluZyBpdCBvbiBjb25uZWN0aW9uIHNob3VsZCB3b3JrIGJ1dCB0aGUgY29uZmlnIGlzIG5vdCBiZWluZyB2YWxpZGF0ZWQgb24gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlcnZlci4gVGhpcyB0cmlnZ2VycyBhIHZhbGlkYXRpb24gZXJyb3IgaWYgdGhlIGNvbmZpZyBpcyBub3QgdmFsaWQuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2Vzc2lvbkNvbmZpZyh1c2VyU2Vzc2lvbkNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk1lc3NhZ2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IHBhcnNlZCwgaXNHZW5lcmljIH0gPSBwYXJzZVJlYWx0aW1lRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZCB8fCBpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFjaW5nQ29uZmlnID0gcGFyc2VkLnNlc3Npb24udHJhY2luZztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeWluZyB0byB0dXJuIG9uIHRyYWNpbmcgYWZ0ZXIgdGhlIHNlc3Npb24gaXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhY2luZ0NvbmZpZyA9IHR5cGVvZiB1c2VyU2Vzc2lvbkNvbmZpZy50cmFjaW5nID09PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1c2VyU2Vzc2lvbkNvbmZpZy50cmFjaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVHJhY2luZ0NvbmZpZyh0cmFjaW5nQ29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIHNldCB1cCBhdWRpbyBwbGF5YmFja1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvRWxlbWVudCA9IHRoaXMub3B0aW9ucy5hdWRpb0VsZW1lbnQgPz8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnQuYXV0b3BsYXkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLm9udHJhY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50LnNyY09iamVjdCA9IGV2ZW50LnN0cmVhbXNbMF07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBnZXQgbWljcm9waG9uZSBzdHJlYW1cbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLm9wdGlvbnMubWVkaWFTdHJlYW0gPz9cbiAgICAgICAgICAgICAgICAgICAgKGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uYWRkVHJhY2soc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2hhbmdlUGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxQZWVyQ29ubmVjdGlvbiA9IHBlZXJDb25uZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9wdGlvbnMuY2hhbmdlUGVlckNvbm5lY3Rpb24ocGVlckNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxQZWVyQ29ubmVjdGlvbiAhPT0gcGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsUGVlckNvbm5lY3Rpb24ub25jb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF0dGFjaENvbm5lY3Rpb25TdGF0ZUhhbmRsZXIocGVlckNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHsgLi4udGhpcy4jc3RhdGUsIHBlZXJDb25uZWN0aW9uIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG9mZmVyID0gYXdhaXQgcGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKG9mZmVyKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9mZmVyLnNkcCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgb2ZmZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc2RwUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjb25uZWN0aW9uVXJsLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiBvZmZlci5zZHAsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vc2RwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthcGlLZXl9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdYLU9wZW5BSS1BZ2VudHMtU0RLJzogSEVBREVSU1snWC1PcGVuQUktQWdlbnRzLVNESyddLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNhbGxJZCA9IHNkcFJlc3BvbnNlLmhlYWRlcnM/LmdldCgnTG9jYXRpb24nKT8uc3BsaXQoJy8nKS5wb3AoKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHsgLi4udGhpcy4jc3RhdGUsIGNhbGxJZCB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuc3dlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Fuc3dlcicsXG4gICAgICAgICAgICAgICAgICAgIHNkcDogYXdhaXQgc2RwUmVzcG9uc2UudGV4dCgpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXdhaXQgcGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24oYW5zd2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgc3RyaW5naWZ5IHRoZSBldmVudCBhbmQgc2VuZCBpdCBkaXJlY3RseSB0byB0aGVcbiAgICAgKiBBUEkuIFRoaXMgY2FuIGJlIHVzZWQgaWYgeW91IHdhbnQgdG8gdGFrZSBjb250cm9sIG92ZXIgdGhlIGNvbm5lY3Rpb24gYW5kIHNlbmQgZXZlbnRzIG1hbnVhbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwgfHxcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLnJlYWR5U3RhdGUgIT09ICdvcGVuJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJSVEMgZGF0YSBjaGFubmVsIGlzIG5vdCBjb25uZWN0ZWQuIE1ha2Ugc3VyZSB5b3UgY2FsbCBgY29ubmVjdCgpYCBiZWZvcmUgc2VuZGluZyBldmVudHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwuc2VuZChKU09OLnN0cmluZ2lmeShldmVudCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlIG9yIHVubXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbXV0ZWQgLSBXaGV0aGVyIHRvIG11dGUgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgbXV0ZShtdXRlZCkge1xuICAgICAgICB0aGlzLiNtdXRlZCA9IG11dGVkO1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHBlZXJDb25uZWN0aW9uID0gdGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb247XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZm9yRWFjaCgoc2VuZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbmRlci50cmFjaykge1xuICAgICAgICAgICAgICAgICAgICBzZW5kZXIudHJhY2suZW5hYmxlZCA9ICFtdXRlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfYWZ0ZXJBdWRpb0RvbmVFdmVudCgpIHtcbiAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkgYW5kIGRpc2Nvbm5lY3RzIHRoZSB1bmRlcmx5aW5nIFdlYlJUQyBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwpIHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBwZWVyQ29ubmVjdGlvbiA9IHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24ub25jb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2goKHNlbmRlcikgPT4ge1xuICAgICAgICAgICAgICAgIHNlbmRlci50cmFjaz8uc3RvcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgIT09ICdkaXNjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uQ2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcnJ1cHQgdGhlIGN1cnJlbnQgcmVzcG9uc2UgaWYgb25lIGlzIG9uZ29pbmcgYW5kIGNsZWFyIHRoZSBhdWRpbyBidWZmZXIgc28gdGhhdCB0aGUgYWdlbnRcbiAgICAgKiBzdG9wcyB0YWxraW5nLlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI29uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jYW5jZWwnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnb3V0cHV0X2F1ZGlvX2J1ZmZlci5jbGVhcicsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lV2ViUnRjLm1qcy5tYXAiLCIvLy8gPHJlZmVyZW5jZSBsaWI9XCJkb21cIiAvPlxuZXhwb3J0IGNvbnN0IFdlYlNvY2tldCA9IGdsb2JhbFRoaXMuV2ViU29ja2V0O1xuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlckVudmlyb25tZW50KCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGNvbnN0IHVzZVdlYlNvY2tldFByb3RvY29scyA9IHRydWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGltcy1icm93c2VyLm1qcy5tYXAiLCJpbXBvcnQgeyBpc0Jyb3dzZXJFbnZpcm9ubWVudCwgdXNlV2ViU29ja2V0UHJvdG9jb2xzLCBXZWJTb2NrZXQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvX3NoaW1zJztcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5pbXBvcnQgeyBiYXNlNjRUb0FycmF5QnVmZmVyLCBIRUFERVJTLCBXRUJTT0NLRVRfTUVUQSB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQncyBoYW5kbGluZyB0aGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIE9wZW5BSSdzIFJlYWx0aW1lIEFQSVxuICogdmlhIFdlYlNvY2tldHMuIFdoaWxlIHRoaXMgdHJhbnNwb3J0IGxheWVyIGlzIGRlc2lnbmVkIHRvIGJlIHVzZWQgd2l0aGluIGEgUmVhbHRpbWVTZXNzaW9uLCBpdFxuICogY2FuIGFsc28gYmUgdXNlZCBzdGFuZGFsb25lIGlmIHlvdSB3YW50IHRvIGhhdmUgYSBkaXJlY3QgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQgZXh0ZW5kcyBPcGVuQUlSZWFsdGltZUJhc2Uge1xuICAgICNhcGlLZXk7XG4gICAgI3VybDtcbiAgICAjZGVmYXVsdFVybDtcbiAgICAjc3RhdGUgPSB7XG4gICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgI3VzZUluc2VjdXJlQXBpS2V5O1xuICAgICNjdXJyZW50SXRlbUlkO1xuICAgICNjdXJyZW50QXVkaW9Db250ZW50SW5kZXg7XG4gICAgLyoqXG4gICAgICogVGltZXN0YW1wIG1haW50YWluZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllciB0byBhaWQgd2l0aCB0aGUgY2FsY3VsYXRpb24gb2YgdGhlIGVsYXBzZWQgdGltZVxuICAgICAqIHNpbmNlIHRoZSByZXNwb25zZSBzdGFydGVkIHRvIGNvbXB1dGUgdGhlIHJpZ2h0IGludGVycnVwdGlvbiB0aW1lLlxuICAgICAqXG4gICAgICogTW9zdGx5IGludGVybmFsIGJ1dCBtaWdodCBiZSB1c2VkIGJ5IGV4dGVuZGVkIHRyYW5zcG9ydCBsYXllcnMgZm9yIHRoZWlyIGludGVycnVwdGlvblxuICAgICAqIGNhbGN1bGF0aW9uLlxuICAgICAqL1xuICAgIF9maXJzdEF1ZGlvVGltZXN0YW1wO1xuICAgIF9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAjb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgI2NyZWF0ZVdlYlNvY2tldDtcbiAgICAjc2tpcE9wZW5FdmVudExpc3RlbmVycztcbiAgICAjcmVzZXRBdWRpb1BsYXliYWNrU3RhdGUoKSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICAgICB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy4jdXJsID0gb3B0aW9ucy51cmw7XG4gICAgICAgIHRoaXMuI2RlZmF1bHRVcmwgPSBvcHRpb25zLnVybDtcbiAgICAgICAgdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgPSBvcHRpb25zLnVzZUluc2VjdXJlQXBpS2V5ID8/IGZhbHNlO1xuICAgICAgICB0aGlzLiNjcmVhdGVXZWJTb2NrZXQgPSBvcHRpb25zLmNyZWF0ZVdlYlNvY2tldDtcbiAgICAgICAgdGhpcy4jc2tpcE9wZW5FdmVudExpc3RlbmVycyA9IG9wdGlvbnMuc2tpcE9wZW5FdmVudExpc3RlbmVycyA/PyBmYWxzZTtcbiAgICB9XG4gICAgZ2V0Q29tbW9uUmVxdWVzdEhlYWRlcnMoKSB7XG4gICAgICAgIHJldHVybiBIRUFERVJTO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZS5zdGF0dXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbm5lY3Rpb24gc3RhdGUgb2YgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWx3YXlzIHJldHVybnMgYG51bGxgIGFzIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90IGhhbmRsZSBtdXRpbmcuIEluc3RlYWQsXG4gICAgICogdGhpcyBzaG91bGQgYmUgaGFuZGxlZCBieSB0aGUgY2xpZW50IGJ5IG5vdCB0cmlnZ2VyaW5nIHRoZSBgc2VuZEF1ZGlvYCBtZXRob2QuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgaXRlbSBJRCBvZiB0aGUgb25nb2luZyByZXNwb25zZS5cbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEl0ZW1JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRJdGVtSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJzIHRoZSBgYXVkaW9gIGV2ZW50IHRoYXQgYSBjbGllbnQgbWlnaHQgbGlzdGVuIHRvIHRvIHJlY2VpdmUgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKiBQcm90ZWN0ZWQgZm9yIHlvdSB0byBiZSBhYmxlIHRvIG92ZXJyaWRlIGFuZCBkaXNhYmxlIGVtaXR0aW5nIHRoaXMgZXZlbnQgaW4gY2FzZSB5b3VyIGV4dGVuZGVkXG4gICAgICogdHJhbnNwb3J0IGxheWVyIGhhbmRsZXMgYXVkaW8gaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdWRpb0V2ZW50IC0gVGhlIGF1ZGlvIGV2ZW50IHRvIGVtaXQuXG4gICAgICovXG4gICAgX29uQXVkaW8oYXVkaW9FdmVudCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvJywgYXVkaW9FdmVudCk7XG4gICAgfVxuICAgIF9hZnRlckF1ZGlvRG9uZUV2ZW50KCkge1xuICAgICAgICB0aGlzLiNyZXNldEF1ZGlvUGxheWJhY2tTdGF0ZSgpO1xuICAgIH1cbiAgICBhc3luYyAjc2V0dXBXZWJTb2NrZXQocmVzb2x2ZSwgcmVqZWN0LCBzZXNzaW9uQ29uZmlnKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS53ZWJzb2NrZXQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuI2FwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignQVBJIGtleSBpcyBub3Qgc2V0LiBQbGVhc2UgY2FsbCBgY29ubmVjdCgpYCB3aXRoIGFuIEFQSSBrZXkgZmlyc3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQnJvd3NlckVudmlyb25tZW50KCkgJiZcbiAgICAgICAgICAgICF0aGlzLiNhcGlLZXkuc3RhcnRzV2l0aCgnZWtfJykgJiZcbiAgICAgICAgICAgICF0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignVXNpbmcgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudCByZXF1aXJlcyBhbiBlcGhlbWVyYWwgY2xpZW50IGtleS4gSWYgeW91IGhhdmUgdG8gdXNlIGEgcmVndWxhciBBUEkga2V5LCBzZXQgdGhlIGB1c2VJbnNlY3VyZUFwaUtleWAgb3B0aW9uIHRvIHRydWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHdzID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuI2NyZWF0ZVdlYlNvY2tldCkge1xuICAgICAgICAgICAgd3MgPSBhd2FpdCB0aGlzLiNjcmVhdGVXZWJTb2NrZXQoe1xuICAgICAgICAgICAgICAgIHVybDogdGhpcy4jdXJsLFxuICAgICAgICAgICAgICAgIGFwaUtleTogdGhpcy4jYXBpS2V5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBicm93c2VycyBhbmQgd29ya2VyZCBzaG91bGQgdXNlIHRoZSBwcm90b2NvbHMgYXJndW1lbnQsIG5vZGUgc2hvdWxkIHVzZSB0aGUgaGVhZGVycyBhcmd1bWVudFxuICAgICAgICAgICAgY29uc3Qgd2Vic29ja2V0QXJndW1lbnRzID0gdXNlV2ViU29ja2V0UHJvdG9jb2xzXG4gICAgICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgICAgICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgICAgIC8vIEF1dGhcbiAgICAgICAgICAgICAgICAgICAgJ29wZW5haS1pbnNlY3VyZS1hcGkta2V5LicgKyB0aGlzLiNhcGlLZXksXG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcnNpb24gaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgIFdFQlNPQ0tFVF9NRVRBLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuI2FwaUtleX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5nZXRDb21tb25SZXF1ZXN0SGVhZGVycygpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3cyA9IG5ldyBXZWJTb2NrZXQodGhpcy4jdXJsLCB3ZWJzb2NrZXRBcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGluZycsXG4gICAgICAgICAgICB3ZWJzb2NrZXQ6IHdzLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgY29uc3Qgb25Tb2NrZXRPcGVuUmVhZHkgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdlYnNvY2tldDogd3MsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbk9wZW4oKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuI3NraXBPcGVuRXZlbnRMaXN0ZW5lcnMgPT09IHRydWUpIHtcbiAgICAgICAgICAgIG9uU29ja2V0T3BlblJlYWR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgb25Tb2NrZXRPcGVuUmVhZHkpO1xuICAgICAgICB9XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9vbk1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IHBhcnNlZCwgaXNHZW5lcmljIH0gPSBwYXJzZVJlYWx0aW1lRXZlbnQobWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAoIXBhcnNlZCB8fCBpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfYXVkaW8uZGVsdGEnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gcGFyc2VkLmNvbnRlbnRfaW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEl0ZW1JZCA9IHBhcnNlZC5pdGVtX2lkO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlc3BvbnNlIHN0YXJ0IHRpbWVzdGFtcCBpcyBub3Qgc2V0LCB3ZSBzZXQgaXQgdG8gdGhlIGN1cnJlbnQgdGltZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgZWxhcHNlZCB0aW1lIGZvciBpbnRlcnJ1cHRpb24uXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYnVmZiA9IGJhc2U2NFRvQXJyYXlCdWZmZXIocGFyc2VkLmRlbHRhKTtcbiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIGF1ZGlvIGxlbmd0aCBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICAvLyBHQSBmb3JtYXQ6IHNlc3Npb24uYXVkaW8ub3V0cHV0LmZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIHsgdHlwZTogXCJhdWRpby9wY21cIiwgcmF0ZSB9IG9yIFwiYXVkaW8vcGNtdVwiIGV0Yy5cbiAgICAgICAgICAgICAgICBjb25zdCBmbXQgPSB0aGlzLl9yYXdTZXNzaW9uQ29uZmlnPy5hdWRpbz8ub3V0cHV0Py5mb3JtYXQ7XG4gICAgICAgICAgICAgICAgaWYgKGZtdCAmJiB0eXBlb2YgZm10ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAvLyBTdHJ1Y3R1cmVkIGZvcm1hdFxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZm10LnR5cGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ID09PSAnYXVkaW8vcGNtdScgfHwgdCA9PT0gJ2F1ZGlvL3BjbWEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyA4a0h6LCAxIGJ5dGUgcGVyIHNhbXBsZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyA4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHQgPT09ICdhdWRpby9wY20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByYXRlID0gZm10LnJhdGUgPz8gMjQwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBieXRlcyAtPiBzYW1wbGVzICgyIGJ5dGVzIHBlciBzYW1wbGUpIC0+IG1zXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IChidWZmLmJ5dGVMZW5ndGggLyAyIC8gcmF0ZSkgKiAxMDAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgYXNzdW1wdGlvbiBzaW1pbGFyIHRvIGxlZ2FjeVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyAyNCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGZtdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZtdC5zdGFydHNXaXRoKCdnNzExXycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBc3N1bWUgMjRrSHogUENNMTZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gYnVmZi5ieXRlTGVuZ3RoIC8gMjQgLyAyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IHRvIDI0a0h6IFBDTTE2IGJlaGF2aW9yIGlmIHVuc3BlY2lmaWVkXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gYnVmZi5ieXRlTGVuZ3RoIC8gMjQgLyAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0V2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYXVkaW8nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBidWZmLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiBwYXJzZWQucmVzcG9uc2VfaWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkF1ZGlvKGF1ZGlvRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdpbnB1dF9hdWRpb19idWZmZXIuc3BlZWNoX3N0YXJ0ZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXV0b21hdGljUmVzcG9uc2VDYW5jZWxsYXRpb25FbmFibGVkID0gdGhpcy5fcmF3U2Vzc2lvbkNvbmZpZz8uYXVkaW8/LmlucHV0Py50dXJuX2RldGVjdGlvblxuICAgICAgICAgICAgICAgICAgICA/LmludGVycnVwdF9yZXNwb25zZSA/PyBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVycnVwdCghYXV0b21hdGljUmVzcG9uc2VDYW5jZWxsYXRpb25FbmFibGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5kb25lJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhY2luZ0NvbmZpZyA9IHBhcnNlZC5zZXNzaW9uLnRyYWNpbmc7XG4gICAgICAgICAgICAgICAgLy8gVHJ5aW5nIHRvIHR1cm4gb24gdHJhY2luZyBhZnRlciB0aGUgc2Vzc2lvbiBpcyBjcmVhdGVkXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhY2luZ0NvbmZpZyA9IHR5cGVvZiBzZXNzaW9uQ29uZmlnLnRyYWNpbmcgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgICAgID8gJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgIDogc2Vzc2lvbkNvbmZpZy50cmFjaW5nO1xuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRyYWNpbmdDb25maWcodHJhY2luZ0NvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbkNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IHRoaXMuY3VycmVudE1vZGVsO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLiNhcGlLZXkgPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXkob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxJZCA9IG9wdGlvbnMuY2FsbElkO1xuICAgICAgICBsZXQgdXJsO1xuICAgICAgICBpZiAob3B0aW9ucy51cmwpIHtcbiAgICAgICAgICAgIHVybCA9IG9wdGlvbnMudXJsO1xuICAgICAgICAgICAgdGhpcy4jZGVmYXVsdFVybCA9IG9wdGlvbnMudXJsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNhbGxJZCkge1xuICAgICAgICAgICAgdXJsID0gYHdzczovL2FwaS5vcGVuYWkuY29tL3YxL3JlYWx0aW1lP2NhbGxfaWQ9JHtjYWxsSWR9YDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLiNkZWZhdWx0VXJsKSB7XG4gICAgICAgICAgICB1cmwgPSB0aGlzLiNkZWZhdWx0VXJsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXJsID0gYHdzczovL2FwaS5vcGVuYWkuY29tL3YxL3JlYWx0aW1lP21vZGVsPSR7dGhpcy5jdXJyZW50TW9kZWx9YDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiN1cmwgPSB1cmw7XG4gICAgICAgIGNvbnN0IHNlc3Npb25Db25maWcgPSB7XG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5pbml0aWFsU2Vzc2lvbkNvbmZpZyB8fCB7fSksXG4gICAgICAgICAgICBtb2RlbDogdGhpcy5jdXJyZW50TW9kZWwsXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3NldHVwV2ViU29ja2V0KHJlc29sdmUsIHJlamVjdCwgc2Vzc2lvbkNvbmZpZykuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2Vzc2lvbkNvbmZpZyhzZXNzaW9uQ29uZmlnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgc3RyaW5naWZ5IHRoZSBldmVudCBhbmQgc2VuZCBpdCBkaXJlY3RseSB0byB0aGVcbiAgICAgKiBBUEkuIFRoaXMgY2FuIGJlIHVzZWQgaWYgeW91IHdhbnQgdG8gdGFrZSBjb250cm9sIG92ZXIgdGhlIGNvbm5lY3Rpb24gYW5kIHNlbmQgZXZlbnRzIG1hbnVhbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhdGUud2Vic29ja2V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlNvY2tldCBpcyBub3QgY29ubmVjdGVkLiBNYWtlIHN1cmUgeW91IGNhbGwgYGNvbm5lY3QoKWAgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXRlLndlYnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KGV2ZW50KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgd2lsbCBhbHNvIHJlc2V0IGFueSBpbnRlcm5hbCBjb25uZWN0aW9uIHRyYWNraW5nIHVzZWQgZm9yIGludGVycnVwdGlvbiBoYW5kbGluZy5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jc3RhdGUud2Vic29ja2V0Py5jbG9zZSgpO1xuICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaWxsIHRocm93IGFuIGVycm9yIGFzIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90IHN1cHBvcnQgbXV0aW5nLlxuICAgICAqL1xuICAgIG11dGUoX211dGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTXV0ZSBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydC4gWW91IGhhdmUgdG8gbXV0ZSB0aGUgYXVkaW8gaW5wdXQgeW91cnNlbGYuJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gYXVkaW8gYnVmZmVyIHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgaXMgdXNlZCBmb3IgeW91ciBjbGllbnQgdG8gc2VuZCBhdWRpbyB0byB0aGVcbiAgICAgKiBtb2RlbCB0byByZXNwb25kLlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIGJ1ZmZlciB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHN1cGVyLnNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIGNhbmNlbCByZXNwb25zZSBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIGlzIHVzZWQgdG8gY2FuY2VsIGFuIG9uZ29pbmdcbiAgICAgKiAgcmVzcG9uc2UgdGhhdCB0aGUgbW9kZWwgaXMgY3VycmVudGx5IGdlbmVyYXRpbmcuXG4gICAgICovXG4gICAgX2NhbmNlbFJlc3BvbnNlKCkge1xuICAgICAgICAvLyBjYW5jZWwgdGhlIG9uZ29pbmcgcmVzcG9uc2VcbiAgICAgICAgaWYgKHRoaXMuI29uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jYW5jZWwnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEbyBOT1QgY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseS4gQ2FsbCBgaW50ZXJydXB0KClgIGluc3RlYWQgZm9yIHByb3BlciBpbnRlcnJ1cHRpb24gaGFuZGxpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNlbmQgdGhlIHJpZ2h0IGV2ZW50cyB0byB0aGUgQVBJIHRvIGluZm9ybSB0aGUgbW9kZWwgdGhhdCB0aGUgdXNlciBoYXNcbiAgICAgKiBpbnRlcnJ1cHRlZCB0aGUgcmVzcG9uc2UuIEl0IG1pZ2h0IGJlIG92ZXJyaWRkZW4vZXh0ZW5kZWQgYnkgYW4gZXh0ZW5kZWQgdHJhbnNwb3J0IGxheWVyLiBTZWVcbiAgICAgKiB0aGUgYFR3aWxpb1JlYWx0aW1lVHJhbnNwb3J0TGF5ZXJgIGZvciBhbiBleGFtcGxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGVsYXBzZWRUaW1lIC0gVGhlIGVsYXBzZWQgdGltZSBzaW5jZSB0aGUgcmVzcG9uc2Ugc3RhcnRlZC5cbiAgICAgKi9cbiAgICBfaW50ZXJydXB0KGVsYXBzZWRUaW1lLCBjYW5jZWxPbmdvaW5nUmVzcG9uc2UgPSB0cnVlKSB7XG4gICAgICAgIGlmIChlbGFwc2VkVGltZSA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbW1lZGlhdGVseSBlbWl0IHRoaXMgZXZlbnQgc28gdGhlIGNsaWVudCBjYW4gc3RvcCBwbGF5aW5nIGF1ZGlvXG4gICAgICAgIGlmIChjYW5jZWxPbmdvaW5nUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhbmNlbFJlc3BvbnNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5fYXVkaW9MZW5ndGhNcyA/PyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIC8vIGF1ZGlvX2VuZF9tcyBtdXN0IGJlIGFuIGludGVnZXJcbiAgICAgICAgY29uc3QgYXVkaW9fZW5kX21zID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihNYXRoLm1pbihlbGFwc2VkVGltZSwgbGVuZ3RoKSkpO1xuICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2ludGVycnVwdGVkJyk7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZScsXG4gICAgICAgICAgICBpdGVtX2lkOiB0aGlzLiNjdXJyZW50SXRlbUlkLFxuICAgICAgICAgICAgY29udGVudF9pbmRleDogdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4LFxuICAgICAgICAgICAgYXVkaW9fZW5kX21zLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBvbmdvaW5nIHJlc3BvbnNlLiBUaGlzIG1ldGhvZCBpcyB0cmlnZ2VyZWQgYXV0b21hdGljYWxseSBieSB0aGUgY2xpZW50IHdoZW5cbiAgICAgKiB2b2ljZSBhY3Rpdml0eSBkZXRlY3Rpb24gKFZBRCkgaXMgZW5hYmxlZCAoZGVmYXVsdCkgYXMgd2VsbCBhcyB3aGVuIGFuIG91dHB1dCBndWFyZHJhaWwgZ290XG4gICAgICogdHJpZ2dlcmVkLlxuICAgICAqXG4gICAgICogWW91IGNhbiBhbHNvIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkgaWYgeW91IHdhbnQgdG8gaW50ZXJydXB0IHRoZSBjb252ZXJzYXRpb24gZm9yIGV4YW1wbGVcbiAgICAgKiBiYXNlZCBvbiBhbiBldmVudCBpbiB0aGUgY2xpZW50LlxuICAgICAqL1xuICAgIGludGVycnVwdChjYW5jZWxPbmdvaW5nUmVzcG9uc2UgPSB0cnVlKSB7XG4gICAgICAgIGlmICghdGhpcy4jY3VycmVudEl0ZW1JZCB8fCB0eXBlb2YgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbGFwc2VkVGltZSA9IERhdGUubm93KCkgLSB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wO1xuICAgICAgICBpZiAoZWxhcHNlZFRpbWUgPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5faW50ZXJydXB0KGVsYXBzZWRUaW1lLCBjYW5jZWxPbmdvaW5nUmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3Jlc2V0QXVkaW9QbGF5YmFja1N0YXRlKCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzLm1hcCIsImltcG9ydCB7IFVzZXJFcnJvciwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmV4cG9ydCBjb25zdCBCQUNLR1JPVU5EX1JFU1VMVF9TWU1CT0wgPSBTeW1ib2woJ2JhY2tncm91bmRSZXN1bHQnKTtcbmV4cG9ydCBmdW5jdGlvbiBiYWNrZ3JvdW5kUmVzdWx0KGNvbnRlbnQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBbQkFDS0dST1VORF9SRVNVTFRfU1lNQk9MXTogdHJ1ZSxcbiAgICAgICAgY29udGVudCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQmFja2dyb3VuZFJlc3VsdChyZXN1bHQpIHtcbiAgICByZXR1cm4gKHR5cGVvZiByZXN1bHQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHJlc3VsdCAhPT0gbnVsbCAmJlxuICAgICAgICBCQUNLR1JPVU5EX1JFU1VMVF9TWU1CT0wgaW4gcmVzdWx0KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkUmVhbHRpbWVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gKHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fFxuICAgICAgICAodG9vbC50eXBlID09PSAnaG9zdGVkX3Rvb2wnICYmIHRvb2wubmFtZSA9PT0gJ2hvc3RlZF9tY3AnKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdG9SZWFsdGltZVRvb2xEZWZpbml0aW9uKHRvb2wpIHtcbiAgICBpZiAodG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB0b29sO1xuICAgIH1cbiAgICBpZiAodG9vbC50eXBlID09PSAnaG9zdGVkX3Rvb2wnICYmIHRvb2wubmFtZSA9PT0gJ2hvc3RlZF9tY3AnKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlclVybCA9IHRvb2wucHJvdmlkZXJEYXRhLnNlcnZlcl91cmwgJiYgdG9vbC5wcm92aWRlckRhdGEuc2VydmVyX3VybC5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IHRvb2wucHJvdmlkZXJEYXRhLnNlcnZlcl91cmxcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IHRvb2wucHJvdmlkZXJEYXRhLnNlcnZlcl9sYWJlbCxcbiAgICAgICAgICAgIHNlcnZlcl91cmw6IHNlcnZlclVybCxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRvb2wucHJvdmlkZXJEYXRhLmhlYWRlcnMsXG4gICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b29sLnByb3ZpZGVyRGF0YS5hbGxvd2VkX3Rvb2xzLFxuICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogdG9vbC5wcm92aWRlckRhdGEucmVxdWlyZV9hcHByb3ZhbCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgSW52YWxpZCB0b29sIHR5cGU6ICR7dG9vbH1gKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2wubWpzLm1hcCIsImltcG9ydCB7IGdldFRyYW5zZmVyTWVzc2FnZSwgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgUnVuQ29udGV4dCwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCwgdG9TbWFydFN0cmluZyB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvdXRpbHMnO1xuaW1wb3J0IHsgZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwsIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlLCBnZXRSZWFsdGltZUd1YXJkcmFpbFNldHRpbmdzLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmltcG9ydCB7IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViUlRDIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzXCI7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qc1wiO1xuaW1wb3J0IHsgYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbSwgZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlLCBoYXNXZWJSVENTdXBwb3J0LCByZWFsdGltZUFwcHJvdmFsSXRlbVRvQXBwcm92YWxJdGVtLCB1cGRhdGVSZWFsdGltZUhpc3RvcnksIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IGlzQmFja2dyb3VuZFJlc3VsdCwgaXNWYWxpZFJlYWx0aW1lVG9vbCwgdG9SZWFsdGltZVRvb2xEZWZpbml0aW9uLCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG5pbXBvcnQgeyBydW5Ub29sSW5wdXRHdWFyZHJhaWxzLCBydW5Ub29sT3V0cHV0R3VhcmRyYWlscywgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmZ1bmN0aW9uIGNsb25lRGVmYXVsdFNlc3Npb25Db25maWcoKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcpKTtcbn1cbi8qKlxuICogQSBgUmVhbHRpbWVTZXNzaW9uYCBpcyB0aGUgY29ybmVyc3RvbmUgb2YgYnVpbGRpbmcgVm9pY2UgQWdlbnRzLiBJdCdzIHRoZSBlcXVpdmFsZW50IG9mIGFcbiAqIFJ1bm5lciBpbiB0ZXh0LWJhc2VkIGFnZW50cyBleGNlcHQgdGhhdCBpdCBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgbXVsdGlwbGUgdHVybnMgYnkgbWFpbnRhaW5pbmcgYVxuICogY29ubmVjdGlvbiB3aXRoIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllci5cbiAqXG4gKiBUaGUgc2Vzc2lvbiBoYW5kbGVzIG1hbmFnaW5nIHRoZSBsb2NhbCBoaXN0b3J5IGNvcHksIGV4ZWN1dGVzIHRvb2xzLCBydW5zIG91dHB1dCBndWFyZHJhaWxzLCBhbmRcbiAqIGZhY2lsaXRhdGVzIGhhbmRvZmZzLlxuICpcbiAqIFRoZSBhY3R1YWwgYXVkaW8gaGFuZGxpbmcgYW5kIGdlbmVyYXRpb24gb2YgbW9kZWwgcmVzcG9uc2VzIGlzIGhhbmRsZWQgYnkgdGhlIHVuZGVybHlpbmdcbiAqIHRyYW5zcG9ydCBsYXllci4gQnkgZGVmYXVsdCBpZiB5b3UgYXJlIHVzaW5nIGEgYnJvd3NlciB3aXRoIFdlYlJUQyBzdXBwb3J0LCB0aGUgc2Vzc2lvbiB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IHVzZSB0aGUgV2ViUlRDIHZlcnNpb24gb2YgdGhlIE9wZW5BSSBSZWFsdGltZSBBUEkuIE9uIHRoZSBzZXJ2ZXIgb3IgaWYgeW91IHBhc3NcbiAqIGB3ZWJzb2NrZXRgIGFzIHRoZSB0cmFuc3BvcnQgbGF5ZXIsIHRoZSBzZXNzaW9uIHdpbGwgZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB1c2luZyBXZWJTb2NrZXRzLlxuICpcbiAqIEluIHRoZSBjYXNlIG9mIFdlYlJUQywgaW4gdGhlIGJyb3dzZXIsIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZVxuICogbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gKlxuICogWW91IGNhbiBhbHNvIGNyZWF0ZSBhIHRyYW5zcG9ydCBsYXllciBpbnN0YW5jZSB5b3Vyc2VsZiBhbmQgcGFzcyBpdCBpbiB0byBoYXZlIG1vcmUgY29udHJvbCBvdmVyXG4gKiB0aGUgY29uZmlndXJhdGlvbiBvciBldmVuIGV4dGVuZCB0aGUgZXhpc3Rpbmcgb25lcy4gQ2hlY2sgb3V0IHRoZSBgVHdpbGlvUmVhbHRpbWVUcmFuc3BvcnRMYXllcmBcbiAqIGZvciBhbiBleGFtcGxlIG9mIGhvdyB0byBjcmVhdGUgYSBjdXN0b20gdHJhbnNwb3J0IGxheWVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogc2Vzc2lvbi5jb25uZWN0KHtcbiAqICAgYXBpS2V5OiAneW91ci1hcGkta2V5JyxcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZVNlc3Npb24gZXh0ZW5kcyBSdW50aW1lRXZlbnRFbWl0dGVyIHtcbiAgICBpbml0aWFsQWdlbnQ7XG4gICAgb3B0aW9ucztcbiAgICAjdHJhbnNwb3J0O1xuICAgICNjdXJyZW50QWdlbnQ7XG4gICAgI2N1cnJlbnRUb29scztcbiAgICAjY29udGV4dDtcbiAgICAjb3V0cHV0R3VhcmRyYWlscyA9IFtdO1xuICAgICNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncztcbiAgICAjdHJhbnNjcmliZWRUZXh0RGVsdGFzID0ge307XG4gICAgI2hpc3RvcnkgPSBbXTtcbiAgICAjc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YTtcbiAgICAjaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCA9IHt9O1xuICAgICNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAvLyBUcmFja3MgYWxsIE1DUCB0b29scyBmZXRjaGVkIHBlciBzZXJ2ZXIgbGFiZWwgKGZyb20gbWNwX2xpc3RfdG9vbHMgcmVzdWx0cykuXG4gICAgI2FsbE1jcFRvb2xzQnlTZXJ2ZXIgPSBuZXcgTWFwKCk7XG4gICAgLy8gVHJhY2tzIGN1cnJlbnRseSBhdmFpbGFibGUgTUNQIHRvb2xzIGJhc2VkIG9uIHRoZSBhY3RpdmUgYWdlbnQncyBjb25maWd1cmVkIHNlcnZlcl9sYWJlbHMuXG4gICAgI2F2YWlsYWJsZU1jcFRvb2xzID0gW107XG4gICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIGxhc3QgZnVsbCBzZXNzaW9uIGNvbmZpZyB3ZSBzZW50IChjYW1lbENhc2Uga2V5cykgc28gdGhhdFxuICAgIC8vIHN1YnNlcXVlbnQgdXBkYXRlcyAoZS5nLiBkdXJpbmcgYWdlbnQgaGFuZG9mZnMpIHByZXNlcnZlIHByb3BlcnRpZXMgdGhhdCBhcmVcbiAgICAvLyBub3QgZXhwbGljaXRseSByZWNhbGN1bGF0ZWQgaGVyZSAoc3VjaCBhcyBpbnB1dEF1ZGlvRm9ybWF0LCBvdXRwdXRBdWRpb0Zvcm1hdCxcbiAgICAvLyBtb2RhbGl0aWVzLCBzcGVlZCwgdG9vbENob2ljZSwgdHVybkRldGVjdGlvbiwgZXRjLikuIFdpdGhvdXQgdGhpcywgdXBkYXRpbmdcbiAgICAvLyB0aGUgYWdlbnQgd291bGQgZHJvcCBhdWRpbyBmb3JtYXQgb3ZlcnJpZGVzIChlLmcuIGc3MTFfdWxhdykgYW5kIHJldmVydCB0b1xuICAgIC8vIHRyYW5zcG9ydCBkZWZhdWx0cyBjYXVzaW5nIGlzc3VlcyBmb3IgaW50ZWdyYXRpb25zIGxpa2UgVHdpbGlvLlxuICAgICNsYXN0U2Vzc2lvbkNvbmZpZyA9IGNsb25lRGVmYXVsdFNlc3Npb25Db25maWcoKTtcbiAgICAjYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyA9IHRydWU7XG4gICAgY29uc3RydWN0b3IoaW5pdGlhbEFnZW50LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsQWdlbnQgPSBpbml0aWFsQWdlbnQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIGlmICgodHlwZW9mIG9wdGlvbnMudHJhbnNwb3J0ID09PSAndW5kZWZpbmVkJyAmJiBoYXNXZWJSVENTdXBwb3J0KCkpIHx8XG4gICAgICAgICAgICBvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3dlYnJ0YycpIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG5ldyBPcGVuQUlSZWFsdGltZVdlYlJUQygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMudHJhbnNwb3J0ID09PSAnd2Vic29ja2V0JyB8fFxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMudHJhbnNwb3J0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gbmV3IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBvcHRpb25zLnRyYW5zcG9ydDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQgPSBpbml0aWFsQWdlbnQ7XG4gICAgICAgIHRoaXMuI2NvbnRleHQgPSBuZXcgUnVuQ29udGV4dCh7XG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5jb250ZXh0ID8/IHt9KSxcbiAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMuI2hpc3RvcnksXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNvdXRwdXRHdWFyZHJhaWxzID0gKG9wdGlvbnMub3V0cHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKTtcbiAgICAgICAgdGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MgPSBnZXRSZWFsdGltZUd1YXJkcmFpbFNldHRpbmdzKG9wdGlvbnMub3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MgPz8ge30pO1xuICAgICAgICB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhID0gb3B0aW9ucy5oaXN0b3J5U3RvcmVBdWRpbyA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy4jYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyA9XG4gICAgICAgICAgICBvcHRpb25zLmF1dG9tYXRpY2FsbHlUcmlnZ2VyUmVzcG9uc2VGb3JNY3BUb29sQ2FsbHMgPz8gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zcG9ydCBsYXllciB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCB0cmFuc3BvcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFuc3BvcnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGFnZW50IGluIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjdXJyZW50QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHVzYWdlIG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCB1c2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbnRleHQudXNhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbnRleHQgb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGNvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb250ZXh0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBzZXNzaW9uIGlzIG11dGVkLiBNaWdodCBiZSBgbnVsbGAgaWYgdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90XG4gICAgICogc3VwcG9ydCBtdXRpbmcuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdHJhbnNwb3J0Lm11dGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGlzdG9yeSBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgaGlzdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2hpc3Rvcnk7XG4gICAgfVxuICAgIGdldCBhdmFpbGFibGVNY3BUb29scygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2F2YWlsYWJsZU1jcFRvb2xzO1xuICAgIH1cbiAgICBhc3luYyAjc2V0Q3VycmVudEFnZW50KGFnZW50KSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudCA9IGFnZW50O1xuICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRFbmFibGVkSGFuZG9mZnModGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZUb29scyA9IGhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4gaGFuZG9mZi5nZXRIYW5kb2ZmQXNGdW5jdGlvblRvb2woKSk7XG4gICAgICAgIGNvbnN0IGFsbFRvb2xzID0gKGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scyh0aGlzLiNjb250ZXh0KSlcbiAgICAgICAgICAgIC5maWx0ZXIoaXNWYWxpZFJlYWx0aW1lVG9vbClcbiAgICAgICAgICAgIC5tYXAodG9SZWFsdGltZVRvb2xEZWZpbml0aW9uKTtcbiAgICAgICAgY29uc3QgaGFzVG9vbHNEZWZpbmVkID0gdHlwZW9mIHRoaXMuI2N1cnJlbnRBZ2VudC50b29scyAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLiNjdXJyZW50QWdlbnQubWNwU2VydmVycyAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICAgIGNvbnN0IGhhc0hhbmRvZmZzRGVmaW5lZCA9IGhhbmRvZmZzLmxlbmd0aCA+IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRUb29scyA9XG4gICAgICAgICAgICBoYXNUb29sc0RlZmluZWQgfHwgaGFzSGFuZG9mZnNEZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBbLi4uYWxsVG9vbHMsIC4uLmhhbmRvZmZUb29sc11cbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gUmVjb21wdXRlIGN1cnJlbnRseSBhdmFpbGFibGUgTUNQIHRvb2xzIGJhc2VkIG9uIHRoZSBuZXcgYWdlbnQncyBhY3RpdmUgc2VydmVyIGxhYmVscy5cbiAgICAgICAgdGhpcy4jdXBkYXRlQXZhaWxhYmxlTWNwVG9vbHMoKTtcbiAgICB9XG4gICAgYXN5bmMgI2dldFNlc3Npb25Db25maWcoYWRkaXRpb25hbENvbmZpZyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlc0NvbmZpZyA9IGFkZGl0aW9uYWxDb25maWcgPz8ge307XG4gICAgICAgIGNvbnN0IG9wdGlvbnNDb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnID8/IHt9O1xuICAgICAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSBhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0U3lzdGVtUHJvbXB0KHRoaXMuI2NvbnRleHQpO1xuICAgICAgICBjb25zdCBnZXRBdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUgPSAoY29uZmlnKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhdWRpb0NvbmZpZyA9IGNvbmZpZ1xuICAgICAgICAgICAgICAgIC5hdWRpbztcbiAgICAgICAgICAgIHJldHVybiBhdWRpb0NvbmZpZz8ub3V0cHV0Py52b2ljZTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVhbHRpbWUgZXhwZWN0cyB0cmFjaW5nIHRvIGJlIGV4cGxpY2l0bHkgbnVsbCB0byBkaXNhYmxlIGl0OyBsZWF2aW5nIHRoZSBwcmV2aW91cyBjb25maWdcbiAgICAgICAgLy8gaW4gcGxhY2Ugd291bGQgb3RoZXJ3aXNlIGNvbnRpbnVlIGVtaXR0aW5nIHNwYW5zLlxuICAgICAgICBjb25zdCB0cmFjaW5nQ29uZmlnID0gdGhpcy5vcHRpb25zXG4gICAgICAgICAgICAudHJhY2luZ0Rpc2FibGVkXG4gICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgIDogdGhpcy5vcHRpb25zLndvcmtmbG93TmFtZVxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm9wdGlvbnMud29ya2Zsb3dOYW1lLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6ICdhdXRvJztcbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgIT09IG51bGwgJiYgdHJhY2luZ0NvbmZpZyAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICB0cmFjaW5nQ29uZmlnLmdyb3VwX2lkID0gdGhpcy5vcHRpb25zLmdyb3VwSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICB0cmFjaW5nQ29uZmlnLm1ldGFkYXRhID0gdGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLmdyb3VwSWQgfHwgdGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdJbiBvcmRlciB0byBzZXQgdHJhY2VNZXRhZGF0YSBvciBhIGdyb3VwSWQgeW91IG5lZWQgdG8gc3BlY2lmeSBhIHdvcmtmbG93TmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUgPSBnZXRBdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUob3ZlcnJpZGVzQ29uZmlnKSA/P1xuICAgICAgICAgICAgZ2V0QXVkaW9PdXRwdXRWb2ljZU92ZXJyaWRlKG9wdGlvbnNDb25maWcpO1xuICAgICAgICBjb25zdCB0b3BMZXZlbFZvaWNlT3ZlcnJpZGUgPSBvdmVycmlkZXNDb25maWcudm9pY2UgPz8gb3B0aW9uc0NvbmZpZy52b2ljZTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRWb2ljZSA9IHR5cGVvZiBhdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZVxuICAgICAgICAgICAgOiB0eXBlb2YgdG9wTGV2ZWxWb2ljZU92ZXJyaWRlICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgID8gdG9wTGV2ZWxWb2ljZU92ZXJyaWRlXG4gICAgICAgICAgICAgICAgOiB0aGlzLiNjdXJyZW50QWdlbnQudm9pY2U7XG4gICAgICAgIC8vIFN0YXJ0IGZyb20gYW55IHByZXZpb3VzbHktc2VudCBjb25maWcgKHNvIHdlIHByZXNlcnZlIHZhbHVlcyBsaWtlIGF1ZGlvIGZvcm1hdHMpXG4gICAgICAgIC8vIGFuZCB0aGUgb3JpZ2luYWwgb3B0aW9ucy5jb25maWcgcHJvdmlkZWQgYnkgdGhlIHVzZXIuIFByZWZlcmVuY2Ugb3JkZXI6XG4gICAgICAgIC8vIDEuIExhc3Qgc2Vzc2lvbiBjb25maWcgd2Ugc2VudCAoI2xhc3RTZXNzaW9uQ29uZmlnKVxuICAgICAgICAvLyAyLiBPcmlnaW5hbCBvcHRpb25zLmNvbmZpZ1xuICAgICAgICAvLyAzLiBBZGRpdGlvbmFsIGNvbmZpZyBwYXNzZWQgaW50byB0aGlzIGludm9jYXRpb24gKGV4cGxpY2l0IG92ZXJyaWRlcylcbiAgICAgICAgLy8gRmluYWxseSB3ZSBvdmVyd3JpdGUgZHluYW1pYyBmaWVsZHMgKGluc3RydWN0aW9ucywgdm9pY2UsIG1vZGVsLCB0b29scywgdHJhY2luZylcbiAgICAgICAgLy8gdG8gZW5zdXJlIHRoZXkgYWx3YXlzIHJlZmxlY3QgdGhlIGN1cnJlbnQgYWdlbnQgJiBydW50aW1lIHN0YXRlLlxuICAgICAgICBjb25zdCBiYXNlID0ge1xuICAgICAgICAgICAgLi4uKHRoaXMuI2xhc3RTZXNzaW9uQ29uZmlnID8/IHt9KSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnNDb25maWcsXG4gICAgICAgICAgICAuLi5vdmVycmlkZXNDb25maWcsXG4gICAgICAgIH07XG4gICAgICAgIC8vIE5vdGU6IENlcnRhaW4gZmllbGRzIGNhbm5vdCBiZSB1cGRhdGVkIGFmdGVyIHRoZSBzZXNzaW9uIGJlZ2lucywgc3VjaCBhcyB2b2ljZSBhbmQgbW9kZWxcbiAgICAgICAgY29uc3QgZnVsbENvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLmJhc2UsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB2b2ljZTogcmVzb2x2ZWRWb2ljZSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm9wdGlvbnMubW9kZWwsXG4gICAgICAgICAgICB0b29sczogdGhpcy4jY3VycmVudFRvb2xzLFxuICAgICAgICAgICAgdHJhY2luZzogdHJhY2luZ0NvbmZpZyxcbiAgICAgICAgICAgIHByb21wdDogdHlwZW9mIHRoaXMuI2N1cnJlbnRBZ2VudC5wcm9tcHQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICA/IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5wcm9tcHQodGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KVxuICAgICAgICAgICAgICAgIDogdGhpcy4jY3VycmVudEFnZW50LnByb21wdCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVXBkYXRlIG91ciBjYWNoZSBzbyBzdWJzZXF1ZW50IHVwZGF0ZXMgaW5oZXJpdCB0aGUgZnVsbCBzZXQgaW5jbHVkaW5nIGFueVxuICAgICAgICAvLyBkeW5hbWljIGZpZWxkcyB3ZSBqdXN0IG92ZXJ3cm90ZS5cbiAgICAgICAgdGhpcy4jbGFzdFNlc3Npb25Db25maWcgPSBmdWxsQ29uZmlnO1xuICAgICAgICByZXR1cm4gZnVsbENvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZSB0aGUgaW5pdGlhbCBzZXNzaW9uIGNvbmZpZyB0aGF0IHRoZSBjdXJyZW50IHNlc3Npb24gd2lsbCB1c2Ugd2hlbiBjb25uZWN0aW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtaXJyb3JzIHRoZSBjb25maWd1cmF0aW9uIHBheWxvYWQgd2Ugc2VuZCBkdXJpbmcgYGNvbm5lY3RgLCBpbmNsdWRpbmcgZHluYW1pYyB2YWx1ZXNcbiAgICAgKiBzdWNoIGFzIHRoZSB1cHN0cmVhbSBhZ2VudCBpbnN0cnVjdGlvbnMsIHRvb2wgZGVmaW5pdGlvbnMsIGFuZCBwcm9tcHQgY29udGVudCBnZW5lcmF0ZWQgYXRcbiAgICAgKiBydW50aW1lLiBLZWVwaW5nIHRoaXMgaGVscGVyIGV4cG9zZWQgYWxsb3dzIHRyYW5zcG9ydHMgb3Igb3JjaGVzdHJhdGlvbiBsYXllcnMgdG8gcHJlY29tcHV0ZVxuICAgICAqIGEgQ2FsbEFjY2VwdC1jb21wYXRpYmxlIHBheWxvYWQgd2l0aG91dCBvcGVuaW5nIGEgc29ja2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG92ZXJyaWRlcyAtIEFkZGl0aW9uYWwgY29uZmlnIG92ZXJyaWRlcyBhcHBsaWVkIG9uIHRvcCBvZiB0aGUgc2Vzc2lvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGFzeW5jIGdldEluaXRpYWxTZXNzaW9uQ29uZmlnKG92ZXJyaWRlcyA9IHt9KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudCh0aGlzLmluaXRpYWxBZ2VudCk7XG4gICAgICAgIHJldHVybiB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKHtcbiAgICAgICAgICAgIC4uLih0aGlzLm9wdGlvbnMuY29uZmlnID8/IHt9KSxcbiAgICAgICAgICAgIC4uLihvdmVycmlkZXMgPz8ge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVuaWVuY2UgaGVscGVyIHRvIGNvbXB1dGUgdGhlIGluaXRpYWwgc2Vzc2lvbiBjb25maWcgd2l0aG91dCBtYW51YWxseSBpbnN0YW50aWF0aW5nIGFuZCBjb25uZWN0aW5nIGEgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgcHJpbWFyaWx5IHVzZWZ1bCBmb3IgaW50ZWdyYXRpb25zIHRoYXQgbXVzdCBwcm92aWRlIHRoZSBzZXNzaW9uIGNvbmZpZ3VyYXRpb24gdG8gYVxuICAgICAqIHRoaXJkIHBhcnR5IChmb3IgZXhhbXBsZSB0aGUgU0lQIGBjYWxscy5hY2NlcHRgIGVuZHBvaW50KSBiZWZvcmUgdGhlIGFjdHVhbCByZWFsdGltZSBzZXNzaW9uXG4gICAgICogaXMgYXR0YWNoZWQuIFRoZSBoZWxwZXIgaW5zdGFudGlhdGVzIGEgdGhyb3dhd2F5IHNlc3Npb24gc28gYWxsIGFnZW50LWRyaXZlbiBkeW5hbWljIGZpZWxkc1xuICAgICAqIHJlc29sdmUgaW4gZXhhY3RseSB0aGUgc2FtZSB3YXkgYXMgdGhlIGxpdmUgc2Vzc2lvbiBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFnZW50IC0gVGhlIHN0YXJ0aW5nIGFnZW50IGZvciB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNlc3Npb24gb3B0aW9ucyB1c2VkIHRvIHNlZWQgdGhlIGNvbmZpZyBjYWxjdWxhdGlvbi5cbiAgICAgKiBAcGFyYW0gb3ZlcnJpZGVzIC0gQWRkaXRpb25hbCBjb25maWcgb3ZlcnJpZGVzIGFwcGxpZWQgb24gdG9wIG9mIHRoZSBwcm92aWRlZCBvcHRpb25zLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBjb21wdXRlSW5pdGlhbFNlc3Npb25Db25maWcoYWdlbnQsIG9wdGlvbnMgPSB7fSwgb3ZlcnJpZGVzID0ge30pIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQsIG9wdGlvbnMpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlc3Npb24uZ2V0SW5pdGlhbFNlc3Npb25Db25maWcob3ZlcnJpZGVzKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNlc3Npb24uY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB1cGRhdGVBZ2VudChuZXdBZ2VudCkge1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudChuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3RyYW5zcG9ydC51cGRhdGVTZXNzaW9uQ29uZmlnKGF3YWl0IHRoaXMuI2dldFNlc3Npb25Db25maWcoKSk7XG4gICAgICAgIHJldHVybiBuZXdBZ2VudDtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUhhbmRvZmYodG9vbENhbGwsIGhhbmRvZmYpIHtcbiAgICAgICAgY29uc3QgbmV3QWdlbnQgPSAoYXdhaXQgaGFuZG9mZi5vbkludm9rZUhhbmRvZmYodGhpcy4jY29udGV4dCwgdG9vbENhbGwuYXJndW1lbnRzKSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIG5ld0FnZW50KTtcbiAgICAgICAgLy8gdXBkYXRlIHNlc3Npb24gd2l0aCBuZXcgYWdlbnRcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LnVwZGF0ZVNlc3Npb25Db25maWcoYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZygpKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gZ2V0VHJhbnNmZXJNZXNzYWdlKG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIG91dHB1dCwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBuZXdBZ2VudDtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwodG9vbENhbGwsIHRvb2wpIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuI2hpc3RvcnkpKTsgLy8gZGVlcCBjb3B5IG9mIHRoZSBoaXN0b3J5XG4gICAgICAgIGxldCBwYXJzZWRBcmdzID0gdG9vbENhbGwuYXJndW1lbnRzO1xuICAgICAgICBpZiAodG9vbC5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodG9vbC5wYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSB0b29sLnBhcmFtZXRlcnMucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gSlNPTi5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gYXdhaXQgdG9vbC5uZWVkc0FwcHJvdmFsKHRoaXMuI2NvbnRleHQsIHBhcnNlZEFyZ3MsIHRvb2xDYWxsLmNhbGxJZCk7XG4gICAgICAgIGlmIChuZWVkc0FwcHJvdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbCA9IHRoaXMuY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGFwcHJvdmFsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgcmVzdWx0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCByZXN1bHQsIHsgdG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdG9vbCwgcmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3Rvb2xfYXBwcm92YWxfcmVxdWVzdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2wsXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0odG9vbENhbGwsIHRoaXMuI2N1cnJlbnRBZ2VudCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlucHV0R3VhcmRyYWlsUmVzdWx0ID0gYXdhaXQgcnVuVG9vbElucHV0R3VhcmRyYWlscyh7XG4gICAgICAgICAgICBndWFyZHJhaWxzOiB0b29sLmlucHV0R3VhcmRyYWlscyxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuI2NvbnRleHQsXG4gICAgICAgICAgICBhZ2VudDogdGhpcy4jY3VycmVudEFnZW50LFxuICAgICAgICAgICAgdG9vbENhbGw6IHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdG9vbCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4jaGlzdG9yeSkpOyAvLyBkZWVwIGNvcHkgb2YgdGhlIGhpc3RvcnlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gaW5wdXRHdWFyZHJhaWxSZXN1bHQudHlwZSA9PT0gJ3JlamVjdCdcbiAgICAgICAgICAgID8gaW5wdXRHdWFyZHJhaWxSZXN1bHQubWVzc2FnZVxuICAgICAgICAgICAgOiBhd2FpdCB0b29sLmludm9rZSh0aGlzLiNjb250ZXh0LCB0b29sQ2FsbC5hcmd1bWVudHMsIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjb25zdCBndWFyZGVkUmVzdWx0ID0gaW5wdXRHdWFyZHJhaWxSZXN1bHQudHlwZSA9PT0gJ3JlamVjdCdcbiAgICAgICAgICAgID8gcmVzdWx0XG4gICAgICAgICAgICA6IGF3YWl0IHJ1blRvb2xPdXRwdXRHdWFyZHJhaWxzKHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWxzOiB0b29sLm91dHB1dEd1YXJkcmFpbHMsXG4gICAgICAgICAgICAgICAgY29udGV4dDogdGhpcy4jY29udGV4dCxcbiAgICAgICAgICAgICAgICBhZ2VudDogdGhpcy4jY3VycmVudEFnZW50LFxuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiB0b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB0b29sT3V0cHV0OiByZXN1bHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgbGV0IHN0cmluZ1Jlc3VsdDtcbiAgICAgICAgaWYgKGlzQmFja2dyb3VuZFJlc3VsdChndWFyZGVkUmVzdWx0KSkge1xuICAgICAgICAgICAgLy8gRG9uJ3QgZ2VuZXJhdGUgYSBuZXcgcmVzcG9uc2UsIGp1c3Qgc2VuZCB0aGUgcmVzdWx0XG4gICAgICAgICAgICBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKGd1YXJkZWRSZXN1bHQuY29udGVudCk7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgc3RyaW5nUmVzdWx0LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKGd1YXJkZWRSZXN1bHQpO1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIHN0cmluZ1Jlc3VsdCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwgc3RyaW5nUmVzdWx0LCB7IHRvb2xDYWxsIH0pO1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGwgfSk7XG4gICAgfVxuICAgIGFzeW5jICNoYW5kbGVGdW5jdGlvbkNhbGwodG9vbENhbGwpIHtcbiAgICAgICAgY29uc3QgZW5hYmxlZEhhbmRvZmZzID0gYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEVuYWJsZWRIYW5kb2Zmcyh0aGlzLiNjb250ZXh0KTtcbiAgICAgICAgY29uc3QgaGFuZG9mZk1hcCA9IG5ldyBNYXAoZW5hYmxlZEhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4gW2hhbmRvZmYudG9vbE5hbWUsIGhhbmRvZmZdKSk7XG4gICAgICAgIGNvbnN0IGFsbFRvb2xzID0gYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEFsbFRvb2xzKHRoaXMuI2NvbnRleHQpO1xuICAgICAgICBjb25zdCBmdW5jdGlvblRvb2xNYXAgPSBuZXcgTWFwKGFsbFRvb2xzLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICAgICAgY29uc3QgcG9zc2libGVIYW5kb2ZmID0gaGFuZG9mZk1hcC5nZXQodG9vbENhbGwubmFtZSk7XG4gICAgICAgIGlmIChwb3NzaWJsZUhhbmRvZmYpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUhhbmRvZmYodG9vbENhbGwsIHBvc3NpYmxlSGFuZG9mZik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvblRvb2wgPSBmdW5jdGlvblRvb2xNYXAuZ2V0KHRvb2xDYWxsLm5hbWUpO1xuICAgICAgICAgICAgaWYgKGZ1bmN0aW9uVG9vbCAmJiBmdW5jdGlvblRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwodG9vbENhbGwsIGZ1bmN0aW9uVG9vbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7dG9vbENhbGwubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgI3J1bk91dHB1dEd1YXJkcmFpbHMob3V0cHV0LCByZXNwb25zZUlkLCBpdGVtSWQpIHtcbiAgICAgICAgaWYgKHRoaXMuI291dHB1dEd1YXJkcmFpbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ3VhcmRyYWlsQXJncyA9IHtcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLiNjdXJyZW50QWdlbnQsXG4gICAgICAgICAgICBhZ2VudE91dHB1dDogb3V0cHV0LFxuICAgICAgICAgICAgY29udGV4dDogdGhpcy4jY29udGV4dCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHRoaXMuI291dHB1dEd1YXJkcmFpbHMubWFwKChndWFyZHJhaWwpID0+IGd1YXJkcmFpbC5ydW4oZ3VhcmRyYWlsQXJncykpKTtcbiAgICAgICAgY29uc3QgZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCA9IHJlc3VsdHMuZmluZCgocmVzdWx0KSA9PiByZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKTtcbiAgICAgICAgaWYgKGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgZW5zdXJlcyB0aGF0IGlmIG9uZSBndWFyZHJhaWwgYWxyZWFkeSB0cmlwcyBhbmQgd2UgYXJlIGluIHRoZSBtaWRkbGUgb2YgYW5vdGhlclxuICAgICAgICAgICAgLy8gZ3VhcmRyYWlsIHJ1biwgd2UgZG9uJ3QgdHJpcCBhZ2FpblxuICAgICAgICAgICAgaWYgKHRoaXMuI2ludGVycnVwdGVkQnlHdWFyZHJhaWxbcmVzcG9uc2VJZF0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsW3Jlc3BvbnNlSWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKGBPdXRwdXQgZ3VhcmRyYWlsIHRyaWdnZXJlZDogJHtKU09OLnN0cmluZ2lmeShmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkLm91dHB1dC5vdXRwdXRJbmZvKX1gLCBmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZ3VhcmRyYWlsX3RyaXBwZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIGVycm9yLCB7XG4gICAgICAgICAgICAgICAgaXRlbUlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmludGVycnVwdCgpO1xuICAgICAgICAgICAgY29uc3QgZmVlZGJhY2tUZXh0ID0gZ2V0UmVhbHRpbWVHdWFyZHJhaWxGZWVkYmFja01lc3NhZ2UoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKGZlZWRiYWNrVGV4dCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgI3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJyonLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndHJhbnNwb3J0X2V2ZW50JywgZXZlbnQpO1xuICAgICAgICAgICAgLy8gSGFuZGxlIGNvbXBsZXRlZCB1c2VyIHRyYW5zY3JpcHRpb24gZXZlbnRzXG4gICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZEV2ZW50ID0gZXZlbnQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2hpc3RvcnkgPSB1cGRhdGVSZWFsdGltZUhpc3RvcnkodGhpcy4jaGlzdG9yeSwgY29tcGxldGVkRXZlbnQsIHRoaXMuI3Nob3VsZEluY2x1ZGVBdWRpb0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ21jcF90b29sc19saXN0ZWQnLCAoeyBzZXJ2ZXJMYWJlbCwgdG9vbHMgfSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNhbGxNY3BUb29sc0J5U2VydmVyLnNldChzZXJ2ZXJMYWJlbCwgdG9vbHMgPz8gW10pO1xuICAgICAgICAgICAgICAgIHRoaXMuI3VwZGF0ZUF2YWlsYWJsZU1jcFRvb2xzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHsgdHlwZTogJ2Vycm9yJywgZXJyb3I6IGVyciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW8nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy4jYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYXVkaW9TdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW8nLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3R1cm5fc3RhcnRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2F1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd0dXJuX2RvbmUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBldmVudC5yZXNwb25zZS5vdXRwdXRbZXZlbnQucmVzcG9uc2Uub3V0cHV0Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY29uc3QgdGV4dE91dHB1dCA9IGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZShpdGVtKSA/PyAnJztcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0/LmlkID8/ICcnO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRleHRPdXRwdXQpO1xuICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHRoaXMuI2NvbnRleHQsIHRleHRPdXRwdXQpO1xuICAgICAgICAgICAgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyh0ZXh0T3V0cHV0LCBldmVudC5yZXNwb25zZS5pZCwgaXRlbUlkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9fZG9uZScsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiNhdWRpb1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fc3RvcHBlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbGFzdFJ1bkluZGV4ID0gMDtcbiAgICAgICAgbGV0IGxhc3RJdGVtSWQ7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9fdHJhbnNjcmlwdF9kZWx0YScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IGV2ZW50LmRlbHRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50Lml0ZW1JZDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUlkID0gZXZlbnQucmVzcG9uc2VJZDtcbiAgICAgICAgICAgICAgICBpZiAobGFzdEl0ZW1JZCAhPT0gaXRlbUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RJdGVtSWQgPSBpdGVtSWQ7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RSdW5JbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUZXh0ID0gdGhpcy4jdHJhbnNjcmliZWRUZXh0RGVsdGFzW2l0ZW1JZF0gPz8gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9IGN1cnJlbnRUZXh0ICsgZGVsdGE7XG4gICAgICAgICAgICAgICAgdGhpcy4jdHJhbnNjcmliZWRUZXh0RGVsdGFzW2l0ZW1JZF0gPSBuZXdUZXh0O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncy5kZWJvdW5jZVRleHRMZW5ndGggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UnVuSW5kZXggPSBNYXRoLmZsb29yKG5ld1RleHQubGVuZ3RoIC8gdGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3UnVuSW5kZXggPiBsYXN0UnVuSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJ1bkluZGV4ID0gbmV3UnVuSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IGNhbmNlbCBleGlzdGluZyBydW5zIGJlY2F1c2Ugd2Ugd2FudCB0aGUgZmlyc3Qgb25lIHRvIGZhaWwgdG8gZmFpbFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdHJhbnNwb3J0IGxheWVyIHNob3VsZCB1cG9uIGZhaWx1cmUgaGFuZGxlIHRoZSBpbnRlcnJ1cHRpb24gYW5kIHN0b3AgdGhlIG1vZGVsXG4gICAgICAgICAgICAgICAgICAgIC8vIGZyb20gZ2VuZXJhdGluZyBmdXJ0aGVyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHMobmV3VGV4dCwgcmVzcG9uc2VJZCwgaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignaXRlbV91cGRhdGUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNOZXcgPSAhdGhpcy4jaGlzdG9yeS5zb21lKChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNoaXN0b3J5ID0gdXBkYXRlUmVhbHRpbWVIaXN0b3J5KHRoaXMuI2hpc3RvcnksIGV2ZW50LCB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZGVkSXRlbSA9IHRoaXMuI2hpc3RvcnkuZmluZCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGRlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV9hZGRlZCcsIGFkZGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdpdGVtX2RlbGV0ZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHRoaXMuI2hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiBpdGVtLml0ZW1JZCAhPT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdmdW5jdGlvbl9jYWxsJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uQ2FsbChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGhhbmRsaW5nIGZ1bmN0aW9uIGNhbGwnLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3VzYWdlX3VwZGF0ZScsICh1c2FnZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jY29udGV4dC51c2FnZS5hZGQodXNhZ2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb19pbnRlcnJ1cHRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiNhdWRpb1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignbWNwX3Rvb2xfY2FsbF9jb21wbGV0ZWQnLCAodG9vbENhbGwpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnbWNwX3Rvb2xfY2FsbF9jb21wbGV0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2xDYWxsKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiNhdXRvbWF0aWNhbGx5VHJpZ2dlclJlc3BvbnNlRm9yTWNwVG9vbENhbGxzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jcmVhdGUnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdtY3BfYXBwcm92YWxfcmVxdWVzdCcsIChhcHByb3ZhbFJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndG9vbF9hcHByb3ZhbF9yZXF1ZXN0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnLFxuICAgICAgICAgICAgICAgIGFwcHJvdmFsSXRlbTogcmVhbHRpbWVBcHByb3ZhbEl0ZW1Ub0FwcHJvdmFsSXRlbSh0aGlzLiNjdXJyZW50QWdlbnQsIGFwcHJvdmFsUmVxdWVzdCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29tcHV0ZXMgdGhlIGN1cnJlbnRseSBhdmFpbGFibGUgTUNQIHRvb2xzIGJhc2VkIG9uIHRoZSBjdXJyZW50IGFnZW50J3MgYWN0aXZlXG4gICAgICogTUNQIHNlcnZlciBjb25maWd1cmF0aW9ucyBhbmQgdGhlIGNhY2hlZCBwZXItc2VydmVyIHRvb2wgbGlzdGluZ3MuIEVtaXRzXG4gICAgICogYG1jcF90b29sc19jaGFuZ2VkYCBpZiB0aGUgc2V0IGNoYW5nZWQuXG4gICAgICovXG4gICAgI3VwZGF0ZUF2YWlsYWJsZU1jcFRvb2xzKCkge1xuICAgICAgICAvLyBDb2xsZWN0IGFjdGl2ZSBNQ1Agc2VydmVyIGxhYmVscyBhbmQgb3B0aW9uYWwgYWxsb3dlZCBmaWx0ZXJzIGZyb20gdGhlIGN1cnJlbnQgYWdlbnRcbiAgICAgICAgY29uc3QgYWN0aXZlTWNwQ29uZmlncyA9IHRoaXMuI2N1cnJlbnRUb29scz8uZmlsdGVyKCh0KSA9PiB0LnR5cGUgPT09ICdtY3AnKTtcbiAgICAgICAgY29uc3QgYWxsb3dlZEZyb21Db25maWcgPSAoY2ZnKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhbGxvd2VkID0gY2ZnLmFsbG93ZWRfdG9vbHM7XG4gICAgICAgICAgICBpZiAoIWFsbG93ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFsbG93ZWQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhbGxvd2VkO1xuICAgICAgICAgICAgaWYgKGFsbG93ZWQgJiYgQXJyYXkuaXNBcnJheShhbGxvd2VkLnRvb2xfbmFtZXMpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhbGxvd2VkLnRvb2xfbmFtZXM7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBkZWR1cEJ5TmFtZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgZm9yIChjb25zdCBjZmcgb2YgYWN0aXZlTWNwQ29uZmlncykge1xuICAgICAgICAgICAgY29uc3QgdG9vbHMgPSB0aGlzLiNhbGxNY3BUb29sc0J5U2VydmVyLmdldChjZmcuc2VydmVyX2xhYmVsKSA/PyBbXTtcbiAgICAgICAgICAgIGNvbnN0IGFsbG93ZWQgPSBhbGxvd2VkRnJvbUNvbmZpZyhjZmcpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0b29sIG9mIHRvb2xzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFsbG93ZWQgJiYgIWFsbG93ZWQuaW5jbHVkZXModG9vbC5uYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgaWYgKCFkZWR1cEJ5TmFtZS5oYXModG9vbC5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBkZWR1cEJ5TmFtZS5zZXQodG9vbC5uYW1lLCB0b29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV4dCA9IEFycmF5LmZyb20oZGVkdXBCeU5hbWUudmFsdWVzKCkpO1xuICAgICAgICBjb25zdCBwcmV2ID0gdGhpcy4jYXZhaWxhYmxlTWNwVG9vbHM7XG4gICAgICAgIGNvbnN0IGNoYW5nZWQgPSBwcmV2Lmxlbmd0aCAhPT0gbmV4dC5sZW5ndGggfHxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHByZXYubWFwKCh0KSA9PiB0Lm5hbWUpLnNvcnQoKSkgIT09XG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkobmV4dC5tYXAoKHQpID0+IHQubmFtZSkuc29ydCgpKTtcbiAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuI2F2YWlsYWJsZU1jcFRvb2xzID0gbmV4dDtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnbWNwX3Rvb2xzX2NoYW5nZWQnLCB0aGlzLiNhdmFpbGFibGVNY3BUb29scyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdCB0byB0aGUgc2Vzc2lvbi4gVGhpcyB3aWxsIGVzdGFibGlzaCB0aGUgY29ubmVjdGlvbiB0byB0aGUgdW5kZXJseWluZyB0cmFuc3BvcnQgbGF5ZXJcbiAgICAgKiBhbmQgc3RhcnQgdGhlIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBBZnRlciBjb25uZWN0aW5nLCB0aGUgc2Vzc2lvbiB3aWxsIGFsc28gZW1pdCBhIGBoaXN0b3J5X3VwZGF0ZWRgIGV2ZW50IHdpdGggYW4gZW1wdHkgaGlzdG9yeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbm5lY3Qob3B0aW9ucykge1xuICAgICAgICAvLyBtYWtlcyBzdXJlIHRoZSBjdXJyZW50IGFnZW50IGlzIGNvcnJlY3RseSBzZXQgYW5kIGxvYWRzIHRoZSB0b29sc1xuICAgICAgICBhd2FpdCB0aGlzLiNzZXRDdXJyZW50QWdlbnQodGhpcy5pbml0aWFsQWdlbnQpO1xuICAgICAgICB0aGlzLiNzZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICBhd2FpdCB0aGlzLiN0cmFuc3BvcnQuY29ubmVjdCh7XG4gICAgICAgICAgICBhcGlLZXk6IG9wdGlvbnMuYXBpS2V5ID8/IHRoaXMub3B0aW9ucy5hcGlLZXksXG4gICAgICAgICAgICBtb2RlbDogdGhpcy5vcHRpb25zLm1vZGVsLFxuICAgICAgICAgICAgdXJsOiBvcHRpb25zLnVybCxcbiAgICAgICAgICAgIGNhbGxJZDogb3B0aW9ucy5jYWxsSWQsXG4gICAgICAgICAgICBpbml0aWFsU2Vzc2lvbkNvbmZpZzogYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZyh0aGlzLm9wdGlvbnMuY29uZmlnKSxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEVuc3VyZSB0aGUgY2FjaGVkIGxhc3RTZXNzaW9uQ29uZmlnIGluY2x1ZGVzIGV2ZXJ5dGhpbmcgcGFzc2VkIGFzIHRoZSBpbml0aWFsIHNlc3Npb24gY29uZmlnXG4gICAgICAgIC8vICh0aGUgY2FsbCBhYm92ZSBhbHJlYWR5IHNldCBpdCB2aWEgI2dldFNlc3Npb25Db25maWcgYnV0IGluIGNhc2UgYWRkaXRpb25hbCBvdmVycmlkZXMgd2VyZVxuICAgICAgICAvLyBwYXNzZWQgZGlyZWN0bHkgaGVyZSBpbiB0aGUgZnV0dXJlIHdlIGNvdWxkIG1lcmdlIHRoZW0pLiBGb3Igbm93IGl0J3MgYSBuby1vcC5cbiAgICAgICAgdGhpcy4jaGlzdG9yeSA9IFtdO1xuICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfdXBkYXRlZCcsIHRoaXMuI2hpc3RvcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGhpc3Rvcnkgb2YgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG5ld0hpc3RvcnkgLSBUaGUgbmV3IGhpc3RvcnkgdG8gc2V0LlxuICAgICAqL1xuICAgIHVwZGF0ZUhpc3RvcnkobmV3SGlzdG9yeSkge1xuICAgICAgICBsZXQgdXBkYXRlZEhpc3Rvcnk7XG4gICAgICAgIGlmICh0eXBlb2YgbmV3SGlzdG9yeSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdXBkYXRlZEhpc3RvcnkgPSBuZXdIaXN0b3J5KHRoaXMuI2hpc3RvcnkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlZEhpc3RvcnkgPSBuZXdIaXN0b3J5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5yZXNldEhpc3RvcnkodGhpcy4jaGlzdG9yeSwgdXBkYXRlZEhpc3RvcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEgPSB7fSkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgaW1hZ2UgdG8gdGhlIHNlc3Npb25cbiAgICAgKiBAcGFyYW0gaW1hZ2UgLSBUaGUgaW1hZ2UgdG8gYWRkLlxuICAgICAqL1xuICAgIGFkZEltYWdlKGltYWdlLCB7IHRyaWdnZXJSZXNwb25zZSA9IHRydWUgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5hZGRJbWFnZShpbWFnZSwgeyB0cmlnZ2VyUmVzcG9uc2UgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE11dGUgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG11dGVkIC0gV2hldGhlciB0byBtdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIG11dGUobXV0ZWQpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm11dGUobXV0ZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNjb25uZWN0IGZyb20gdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuI2ludGVycnVwdGVkQnlHdWFyZHJhaWwgPSB7fTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LmNsb3NlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYXVkaW8gdG8gdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuY29tbWl0IC0gV2hldGhlciB0byBmaW5pc2ggdGhlIHR1cm4gd2l0aCB0aGlzIGF1ZGlvLlxuICAgICAqL1xuICAgIHNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcnJ1cHQgdGhlIHNlc3Npb24gYXJ0aWZpY2lhbGx5IGZvciBleGFtcGxlIGlmIHlvdSB3YW50IHRvIGJ1aWxkIGEgXCJzdG9wIHRhbGtpbmdcIlxuICAgICAqIGJ1dHRvbi5cbiAgICAgKi9cbiAgICBpbnRlcnJ1cHQoKSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5pbnRlcnJ1cHQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwcm92ZSBhIHRvb2wgY2FsbC4gVGhpcyB3aWxsIGFsc28gdHJpZ2dlciB0aGUgdG9vbCBjYWxsIHRvIHRoZSBhZ2VudC5cbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIGFwcHJvdmFsIGl0ZW0gdG8gYXBwcm92ZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5hbHdheXNBcHByb3ZlIC0gV2hldGhlciB0byBhbHdheXMgYXBwcm92ZSB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIGFzeW5jIGFwcHJvdmUoYXBwcm92YWxJdGVtLCBvcHRpb25zID0geyBhbHdheXNBcHByb3ZlOiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuI2NvbnRleHQuYXBwcm92ZVRvb2woYXBwcm92YWxJdGVtLCBvcHRpb25zKTtcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBhcHByb3ZhbEl0ZW0udG9vbE5hbWUgPz8gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZTtcbiAgICAgICAgY29uc3QgdG9vbCA9IHRoaXMuI2N1cnJlbnRBZ2VudC50b29scy5maW5kKCh0b29sKSA9PiB0b29sLm5hbWUgPT09IHRvb2xOYW1lKTtcbiAgICAgICAgaWYgKHRvb2wgJiZcbiAgICAgICAgICAgIHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgYXBwcm92YWxJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKGFwcHJvdmFsSXRlbS5yYXdJdGVtLCB0b29sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhcHByb3ZhbEl0ZW0ucmF3SXRlbS50eXBlID09PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFsd2F5c0FwcHJvdmUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignQWx3YXlzIGFwcHJvdmluZyBNQ1AgdG9vbHMgaXMgbm90IHN1cHBvcnRlZC4gVXNlIHRoZSBhbGxvd2VkIHRvb2xzIGNvbmZpZ3VyYXRpb24gaW5zdGVhZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1jcEFwcHJvdmFsUmVxdWVzdCA9IGFwcHJvdmFsSXRlbVRvUmVhbHRpbWVBcHByb3ZhbEl0ZW0oYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kTWNwUmVzcG9uc2UobWNwQXBwcm92YWxSZXF1ZXN0LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHt0b29sTmFtZSA/PyAndW5rbm93bid9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlamVjdCBhIHRvb2wgY2FsbC4gVGhpcyB3aWxsIGFsc28gdHJpZ2dlciB0aGUgdG9vbCBjYWxsIHRvIHRoZSBhZ2VudC5cbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmFsd2F5c1JlamVjdCAtIFdoZXRoZXIgdG8gYWx3YXlzIHJlamVjdCB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIGFzeW5jIHJlamVjdChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c1JlamVjdDogZmFsc2UgfSkge1xuICAgICAgICB0aGlzLiNjb250ZXh0LnJlamVjdFRvb2woYXBwcm92YWxJdGVtLCBvcHRpb25zKTtcbiAgICAgICAgLy8gd2Ugc3RpbGwgbmVlZCB0byBzaW11bGF0ZSBhIHRvb2wgY2FsbCB0byB0aGUgYWdlbnQgdG8gbGV0IHRoZSBhZ2VudCBrbm93XG4gICAgICAgIGNvbnN0IHRvb2xOYW1lID0gYXBwcm92YWxJdGVtLnRvb2xOYW1lID8/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGNvbnN0IHRvb2wgPSB0aGlzLiNjdXJyZW50QWdlbnQudG9vbHMuZmluZCgodG9vbCkgPT4gdG9vbC5uYW1lID09PSB0b29sTmFtZSk7XG4gICAgICAgIGlmICh0b29sICYmXG4gICAgICAgICAgICB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgIGFwcHJvdmFsSXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbChhcHByb3ZhbEl0ZW0ucmF3SXRlbSwgdG9vbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYXBwcm92YWxJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hbHdheXNSZWplY3QpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignQWx3YXlzIHJlamVjdGluZyBNQ1AgdG9vbHMgaXMgbm90IHN1cHBvcnRlZC4gVXNlIHRoZSBhbGxvd2VkIHRvb2xzIGNvbmZpZ3VyYXRpb24gaW5zdGVhZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1jcEFwcHJvdmFsUmVxdWVzdCA9IGFwcHJvdmFsSXRlbVRvUmVhbHRpbWVBcHByb3ZhbEl0ZW0oYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kTWNwUmVzcG9uc2UobWNwQXBwcm92YWxSZXF1ZXN0LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7dG9vbE5hbWUgPz8gJ3Vua25vd24nfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWx0aW1lU2Vzc2lvbi5tanMubWFwIiwiaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanNcIjtcbmltcG9ydCB7IFJlYWx0aW1lU2Vzc2lvbiwgfSBmcm9tIFwiLi9yZWFsdGltZVNlc3Npb24ubWpzXCI7XG4vKipcbiAqIFRyYW5zcG9ydCBsYXllciB0aGF0IGNvbm5lY3RzIHRvIGFuIGV4aXN0aW5nIFNJUC1pbml0aWF0ZWQgUmVhbHRpbWUgY2FsbCB2aWEgY2FsbCBJRC5cbiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lU0lQIGV4dGVuZHMgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVpbGQgdGhlIGluaXRpYWwgc2Vzc2lvbiBwYXlsb2FkIGZvciBhIFNJUC1hdHRhY2hlZCBzZXNzaW9uLCBtYXRjaGluZyB0aGUgY29uZmlnIHRoYXQgYSBSZWFsdGltZVNlc3Npb24gd291bGQgc2VuZCBvbiBjb25uZWN0LlxuICAgICAqXG4gICAgICogVGhpcyBlbmFibGVzIFNJUCBkZXBsb3ltZW50cyB0byBhY2NlcHQgYW4gaW5jb21pbmcgY2FsbCB3aXRoIGEgcGF5bG9hZCB0aGF0IGFscmVhZHkgcmVmbGVjdHNcbiAgICAgKiB0aGUgYWN0aXZlIGFnZW50J3MgaW5zdHJ1Y3Rpb25zLCB0b29scywgcHJvbXB0LCBhbmQgdHJhY2luZyBtZXRhZGF0YSB3aXRob3V0IGR1cGxpY2F0aW5nIHRoZVxuICAgICAqIHNlc3Npb24gbG9naWMgb3V0c2lkZSBvZiB0aGUgU0RLLiBUaGUgcmV0dXJuZWQgb2JqZWN0IHN0cnVjdHVyYWxseSBtYXRjaGVzIHRoZSBSRVNUXG4gICAgICogYENhbGxBY2NlcHRQYXJhbXNgIGludGVyZmFjZSwgc28gaXQgY2FuIGJlIGZvcndhcmRlZCBkaXJlY3RseSB0b1xuICAgICAqIGBvcGVuYWkucmVhbHRpbWUuY2FsbHMuYWNjZXB0KC4uLilgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFnZW50IC0gVGhlIHN0YXJ0aW5nIGFnZW50IHVzZWQgdG8gc2VlZCB0aGUgc2Vzc2lvbiBpbnN0cnVjdGlvbnMsIHRvb2xzLCBhbmQgcHJvbXB0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2Vzc2lvbiBvcHRpb25zIHRoYXQgbWlycm9yIHRoZSBvbmVzIHBhc3NlZCB0byB0aGUgUmVhbHRpbWVTZXNzaW9uIGNvbnN0cnVjdG9yLlxuICAgICAqIEBwYXJhbSBvdmVycmlkZXMgLSBBZGRpdGlvbmFsIGNvbmZpZyBvdmVycmlkZXMgYXBwbGllZCBvbiB0b3Agb2YgdGhlIHNlc3Npb24gb3B0aW9ucy5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgYnVpbGRJbml0aWFsQ29uZmlnKGFnZW50LCBvcHRpb25zID0ge30sIG92ZXJyaWRlcyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25Db25maWcgPSBhd2FpdCBSZWFsdGltZVNlc3Npb24uY29tcHV0ZUluaXRpYWxTZXNzaW9uQ29uZmlnKGFnZW50LCBvcHRpb25zLCBvdmVycmlkZXMpO1xuICAgICAgICBjb25zdCB0cmFuc3BvcnQgPSBuZXcgT3BlbkFJUmVhbHRpbWVTSVAoKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zcG9ydC5idWlsZFNlc3Npb25QYXlsb2FkKHNlc3Npb25Db25maWcpO1xuICAgIH1cbiAgICBzZW5kQXVkaW8oX2F1ZGlvLCBfb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIC8vIFNJUCBpbnRlZ3JhdGlvbnMgc3RyZWFtIGF1ZGlvIHRvIE9wZW5BSSBkaXJlY3RseSB0aHJvdWdoIHRoZSB0ZWxlcGhvbnkgcHJvdmlkZXIsIHNvIHRoZVxuICAgICAgICAvLyB0cmFuc3BvcnQgZGVsaWJlcmF0ZWx5IHByZXZlbnRzIHVzZXJsYW5kIGNvZGUgZnJvbSBzZW5kaW5nIGR1cGxpY2F0ZSBidWZmZXJzLlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09wZW5BSVJlYWx0aW1lU0lQIGRvZXMgbm90IHN1cHBvcnQgc2VuZGluZyBhdWRpbyBidWZmZXJzOyBhdWRpbyBpcyBoYW5kbGVkIGJ5IHRoZSBTSVAgY2FsbC4nKTtcbiAgICB9XG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucy5jYWxsSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ09wZW5BSVJlYWx0aW1lU0lQIHJlcXVpcmVzIGBjYWxsSWRgIGluIHRoZSBjb25uZWN0IG9wdGlvbnMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgc3VwZXIuY29ubmVjdChvcHRpb25zKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZVNpcC5tanMubWFwIiwiaW1wb3J0ICogYXMgdXRpbEltcG9ydCBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCB7IFJlYWx0aW1lQWdlbnQgfSBmcm9tIFwiLi9yZWFsdGltZUFnZW50Lm1qc1wiO1xuZXhwb3J0IHsgUmVhbHRpbWVTZXNzaW9uLCB9IGZyb20gXCIuL3JlYWx0aW1lU2Vzc2lvbi5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViUlRDLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2ViUnRjLm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZVNJUCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lU2lwLm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVCYXNlLCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTCwgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHV0aWxzID0ge1xuICAgIGJhc2U2NFRvQXJyYXlCdWZmZXI6IHV0aWxJbXBvcnQuYmFzZTY0VG9BcnJheUJ1ZmZlcixcbiAgICBhcnJheUJ1ZmZlclRvQmFzZTY0OiB1dGlsSW1wb3J0LmFycmF5QnVmZmVyVG9CYXNlNjQsXG4gICAgZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlOiB1dGlsSW1wb3J0LmdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSxcbn07XG5leHBvcnQgeyBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCB0b29sLCBVc2VyRXJyb3IsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5leHBvcnQgeyBiYWNrZ3JvdW5kUmVzdWx0LCBpc0JhY2tncm91bmRSZXN1bHQgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6WyJNRVRBREFUQSIsInNhZmVFeGVjdXRlIiwiZm4iLCJlcnJvciIsImdldEVudW1WYWx1ZXMiLCJlbnRyaWVzIiwibnVtZXJpY1ZhbHVlcyIsInYiLCJrIiwiXyIsIiRab2RSZWdpc3RyeSQxIiwic2NoZW1hIiwiX21ldGEiLCJtZXRhIiwicCIsInBtIiwicmVnaXN0cnkiLCIkWm9kUmVnaXN0cnkiLCJnbG9iYWxSZWdpc3RyeSIsIkpTT05TY2hlbWFHZW5lcmF0b3IiLCJwYXJhbXMiLCJfcGFyYW1zIiwiX2EiLCJkZWYiLCJmb3JtYXRNYXAiLCJzZWVuIiwicmVzdWx0Iiwib3ZlcnJpZGVTY2hlbWEiLCJfYiIsInBhcmVudCIsIl9qc29uIiwianNvbiIsIm1pbmltdW0iLCJtYXhpbXVtIiwiZm9ybWF0IiwicGF0dGVybnMiLCJjb250ZW50RW5jb2RpbmciLCJyZWdleGVzIiwicmVnZXgiLCJtdWx0aXBsZU9mIiwiZXhjbHVzaXZlTWF4aW11bSIsImV4Y2x1c2l2ZU1pbmltdW0iLCJzaGFwZSIsImtleSIsImFsbEtleXMiLCJyZXF1aXJlZEtleXMiLCJfYyIsIngiLCJpIiwiYSIsImIiLCJpc1NpbXBsZUludGVyc2VjdGlvbiIsInZhbCIsImFsbE9mIiwicHJlZml4SXRlbXMiLCJyZXN0IiwidmFsdWVzIiwidmFscyIsImZpbGUiLCJtaW1lIiwibSIsImlubmVyIiwiY2F0Y2hWYWx1ZSIsInBhdHRlcm4iLCJpbm5lclR5cGUiLCJpc1RyYW5zZm9ybWluZyIsInJvb3QiLCJtYWtlVVJJIiwiZW50cnkiLCJkZWZzU2VnbWVudCIsImV4dGVybmFsSWQiLCJ1cmlHZW5lcmF0b3IiLCJpZCIsImRlZlVyaVByZWZpeCIsImRlZklkIiwiZXh0cmFjdFRvRGVmIiwicmVmIiwiZXh0IiwiZmxhdHRlblJlZiIsInpvZFNjaGVtYSIsIl9jYWNoZWQiLCJyZWZTY2hlbWEiLCJfZCIsIl9lIiwiZGVmcyIsIl9mIiwidG9KU09OU2NoZW1hIiwiaW5wdXQiLCJnZW4iLCJzY2hlbWFzIiwiZXh0ZXJuYWwiLCJfc2NoZW1hIiwiX2N0eCIsImN0eCIsIm9wdGlvbiIsIml0ZW0iLCJtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCIsInJlc3BvbnNlX2Zvcm1hdCIsInBhcnNlciIsIm9iaiIsImlnbm9yZU92ZXJyaWRlIiwiZGVmYXVsdE9wdGlvbnMiLCJnZXREZWZhdWx0T3B0aW9ucyIsIm9wdGlvbnMiLCJ6b2REZWYiLCJpc0VtcHR5T2JqIiwiX2siLCJnZXRSZWZzIiwiX29wdGlvbnMiLCJjdXJyZW50UGF0aCIsIm5hbWUiLCJhZGRFcnJvck1lc3NhZ2UiLCJyZXMiLCJlcnJvck1lc3NhZ2UiLCJyZWZzIiwic2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyIsInZhbHVlIiwiWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIiwicGFyc2VBbnlEZWYiLCJwYXJzZUFycmF5RGVmIiwicGFyc2VEZWYiLCJwYXJzZUJpZ2ludERlZiIsImNoZWNrIiwicGFyc2VCb29sZWFuRGVmIiwicGFyc2VCcmFuZGVkRGVmIiwiX2RlZiIsInBhcnNlQ2F0Y2hEZWYiLCJwYXJzZURhdGVEZWYiLCJvdmVycmlkZURhdGVTdHJhdGVneSIsInN0cmF0ZWd5IiwiaW50ZWdlckRhdGVQYXJzZXIiLCJwYXJzZURlZmF1bHREZWYiLCJwYXJzZUVmZmVjdHNEZWYiLCJmb3JjZVJlc29sdXRpb24iLCJwYXJzZUVudW1EZWYiLCJpc0pzb25TY2hlbWE3QWxsT2ZUeXBlIiwidHlwZSIsInBhcnNlSW50ZXJzZWN0aW9uRGVmIiwidW5ldmFsdWF0ZWRQcm9wZXJ0aWVzIiwibWVyZ2VkQWxsT2YiLCJuZXN0ZWRTY2hlbWEiLCJhZGRpdGlvbmFsUHJvcGVydGllcyIsInBhcnNlTGl0ZXJhbERlZiIsInBhcnNlZFR5cGUiLCJlbW9qaVJlZ2V4Iiwiem9kUGF0dGVybnMiLCJwYXJzZVN0cmluZ0RlZiIsInByb2Nlc3NQYXR0ZXJuIiwiZXNjYXBlTm9uQWxwaGFOdW1lcmljIiwiYWRkRm9ybWF0IiwiYWRkUGF0dGVybiIsImMiLCJtZXNzYWdlIiwicHJvY2Vzc1JlZ0V4cCIsInJlZ2V4T3JGdW5jdGlvbiIsImZsYWdzIiwic291cmNlIiwiaXNFc2NhcGVkIiwiaW5DaGFyR3JvdXAiLCJpbkNoYXJSYW5nZSIsInJlZ2V4VGVzdCIsInBhcnNlUmVjb3JkRGVmIiwiYWNjIiwia2V5VHlwZSIsInBhcnNlTWFwRGVmIiwia2V5cyIsInBhcnNlTmF0aXZlRW51bURlZiIsIm9iamVjdCIsImFjdHVhbFZhbHVlcyIsInBhcnNlZFR5cGVzIiwicGFyc2VOZXZlckRlZiIsInBhcnNlTnVsbERlZiIsInByaW1pdGl2ZU1hcHBpbmdzIiwicGFyc2VVbmlvbkRlZiIsImFzQW55T2YiLCJ0eXBlcyIsInVuaXF1ZVR5cGVzIiwiYW55T2YiLCJwYXJzZU51bGxhYmxlRGVmIiwiYmFzZSIsInBhcnNlTnVtYmVyRGVmIiwiZGVjaWRlQWRkaXRpb25hbFByb3BlcnRpZXMiLCJwYXJzZU9iamVjdERlZiIsInByb3BOYW1lIiwicHJvcERlZiIsInByb3BlcnR5UGF0aCIsInBhcnNlZERlZiIsInBhcnNlT3B0aW9uYWxEZWYiLCJpbm5lclNjaGVtYSIsInBhcnNlUGlwZWxpbmVEZWYiLCJwYXJzZVByb21pc2VEZWYiLCJwYXJzZVNldERlZiIsInBhcnNlVHVwbGVEZWYiLCJwYXJzZVVuZGVmaW5lZERlZiIsInBhcnNlVW5rbm93bkRlZiIsInBhcnNlUmVhZG9ubHlEZWYiLCJzZWVuSXRlbSIsIm92ZXJyaWRlUmVzdWx0Iiwic2VlblNjaGVtYSIsImdldCRyZWYiLCJuZXdJdGVtIiwianNvblNjaGVtYSIsInNlbGVjdFBhcnNlciIsImFkZE1ldGEiLCJnZXRSZWxhdGl2ZVBhdGgiLCJpbmRleCIsInBhdGhBIiwicGF0aEIiLCJ0eXBlTmFtZSIsInpvZFRvSnNvblNjaGVtYSIsIm1haW4iLCJ0aXRsZSIsImRlZmluaXRpb25zIiwicHJvY2Vzc2VkRGVmaW5pdGlvbnMiLCJuZXdEZWZpbml0aW9ucyIsImNvbWJpbmVkIiwibWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCIsInRvb2wiLCJjYWxsYmFjayIsInRvU3RyaWN0SnNvblNjaGVtYSIsInNjaGVtYUNvcHkiLCJlbnN1cmVTdHJpY3RKc29uU2NoZW1hIiwiaXNOdWxsYWJsZSIsIm9uZU9mVmFyaWFudCIsImFsbE9mVmFyaWFudCIsInBhdGgiLCJpc09iamVjdCIsImRlZk5hbWUiLCJkZWZTY2hlbWEiLCJkZWZpbml0aW9uTmFtZSIsImRlZmluaXRpb25TY2hlbWEiLCJyZXF1aXJlZCIsInByb3BlcnRpZXMiLCJwcm9wU2NoZW1hIiwiaXRlbXMiLCJ2YXJpYW50IiwicmVzb2x2ZWQiLCJoYXNNb3JlVGhhbk5LZXlzIiwicmVzb2x2ZVJlZiIsInBhdGhQYXJ0cyIsIm4iLCJ6b2RWM1RvSnNvblNjaGVtYSIsIl96b2RUb0pzb25TY2hlbWEiLCJ6b2RWNFRvSnNvblNjaGVtYSIsIno0LnRvSlNPTlNjaGVtYSIsImlzWm9kVjQiLCJ6b2RPYmplY3QiLCJ6b2RUZXh0Rm9ybWF0IiwicHJvcHMiLCJjb250ZW50Iiwiem9kUmVzcG9uc2VzRnVuY3Rpb24iLCJhcmdzIiwiQWdlbnRzRXJyb3IiLCJzdGF0ZSIsIl9fcHVibGljRmllbGQiLCJTeXN0ZW1FcnJvciIsIk1heFR1cm5zRXhjZWVkZWRFcnJvciIsIk1vZGVsQmVoYXZpb3JFcnJvciIsIkludmFsaWRUb29sSW5wdXRFcnJvciIsIm9yaWdpbmFsRXJyb3IiLCJ0b29sSW52b2NhdGlvbiIsIlVzZXJFcnJvciIsIkd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yIiwiVG9vbENhbGxFcnJvciIsIklucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQiLCJPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCIsIlRvb2xJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIiwiVG9vbE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIiwiYXNab2RUeXBlIiwicmVhZFpvZERlZmluaXRpb24iLCJjYW5kaWRhdGUiLCJyZWFkWm9kVHlwZSIsInJhd1R5cGUiLCJsb3dlciIsImlzWm9kT2JqZWN0IiwiaXNBZ2VudFRvb2xJbnB1dCIsIkpTT05fU0NIRU1BX0RSQUZUXzA3IiwiT1BUSU9OQUxfV1JBUFBFUlMiLCJERUNPUkFUT1JfV1JBUFBFUlMiLCJTSU1QTEVfVFlQRV9NQVBQSU5HIiwiaGFzSnNvblNjaGVtYU9iamVjdFNoYXBlIiwiem9kSnNvblNjaGVtYUNvbXBhdCIsImJ1aWxkT2JqZWN0U2NoZW1hIiwicmVhZFNoYXBlIiwiZmllbGQiLCJvcHRpb25hbCIsImNvbnZlcnRQcm9wZXJ0eSIsImN1cnJlbnQiLCJ1bndyYXBEZWNvcmF0b3JzIiwibmV4dCIsImNvbnZlcnRTY2hlbWEiLCJ1bndyYXBwZWQiLCJidWlsZEFycmF5U2NoZW1hIiwiYnVpbGRUdXBsZVNjaGVtYSIsImJ1aWxkVW5pb25TY2hlbWEiLCJidWlsZEludGVyc2VjdGlvblNjaGVtYSIsImJ1aWxkTGl0ZXJhbCIsImJ1aWxkRW51bSIsImJ1aWxkUmVjb3JkU2NoZW1hIiwiYnVpbGRNYXBTY2hlbWEiLCJidWlsZFNldFNjaGVtYSIsImJ1aWxkTnVsbGFibGVTY2hlbWEiLCJleHRyYWN0Rmlyc3QiLCJjb2VyY2VBcnJheSIsImxlZnQiLCJyaWdodCIsInZhbHVlU2NoZW1hIiwibGl0ZXJhbCIsInpvZFJlc3BvbnNlc0Z1bmN0aW9uQ29tcGF0Iiwiem9kVGV4dEZvcm1hdENvbXBhdCIsImJ1aWxkSnNvblNjaGVtYUZyb21ab2QiLCJpbnB1dFR5cGUiLCJ0b0Z1bmN0aW9uVG9vbE5hbWUiLCJnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIiwidXNlRmFsbGJhY2siLCJmYWxsYmFja1NjaGVtYSIsInJhd0lucHV0IiwiZm9ybWF0dGVkRnVuY3Rpb24iLCJjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUiLCJvdXRwdXRUeXBlIiwiZXhpc3RpbmciLCJvdXRwdXQiLCJzIiwiaCIsImQiLCJ3IiwieSIsIm1zIiwicGFyc2UiLCJmbXRMb25nIiwiZm10U2hvcnQiLCJzdHIiLCJtYXRjaCIsIm1zQWJzIiwicGx1cmFsIiwiaXNQbHVyYWwiLCJzZXR1cCIsImVudiIsImNyZWF0ZURlYnVnIiwiY29lcmNlIiwiZGlzYWJsZSIsImVuYWJsZSIsImVuYWJsZWQiLCJyZXF1aXJlJCQwIiwiZGVzdHJveSIsInNlbGVjdENvbG9yIiwibmFtZXNwYWNlIiwiaGFzaCIsInByZXZUaW1lIiwiZW5hYmxlT3ZlcnJpZGUiLCJuYW1lc3BhY2VzQ2FjaGUiLCJlbmFibGVkQ2FjaGUiLCJkZWJ1ZyIsInNlbGYiLCJjdXJyIiwiZm9ybWF0dGVyIiwiZXh0ZW5kIiwiZGVsaW1pdGVyIiwibmV3RGVidWciLCJuYW1lc3BhY2VzIiwic3BsaXQiLCJucyIsIm1hdGNoZXNUZW1wbGF0ZSIsInNlYXJjaCIsInRlbXBsYXRlIiwic2VhcmNoSW5kZXgiLCJ0ZW1wbGF0ZUluZGV4Iiwic3RhckluZGV4IiwibWF0Y2hJbmRleCIsInNraXAiLCJjb21tb24iLCJleHBvcnRzIiwiZm9ybWF0QXJncyIsInNhdmUiLCJsb2FkIiwidXNlQ29sb3JzIiwibG9jYWxzdG9yYWdlIiwid2FybmVkIiwibW9kdWxlIiwibGFzdEMiLCJyIiwiZm9ybWF0dGVycyIsImxvYWRFbnYiLCJfbG9hZEVudiIsImlzRW5hYmxlZCIsImZsYWdOYW1lIiwidHJhY2luZyIsImxvZ2dpbmciLCJkb250TG9nTW9kZWxEYXRhIiwiZG9udExvZ1Rvb2xEYXRhIiwiZ2V0TG9nZ2VyIiwibG9nZ2VyIiwiQllURV9QUkVWSUVXX0xJTUlUIiwidG9TbWFydFN0cmluZyIsImlzQXJyYXlCdWZmZXJMaWtlIiwiZm9ybWF0Qnl0ZUFycmF5IiwiaXNBcnJheUJ1ZmZlclZpZXciLCJ2aWV3Iiwic21hcnRTdHJpbmdSZXBsYWNlciIsInNoYXJlZEFycmF5QnVmZmVyQ3RvciIsImlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90IiwiaXNOb2RlQnVmZmVyIiwiYnVmZmVyQ3RvciIsImJ5dGVzIiwicHJldmlld0xlbmd0aCIsInByZXZpZXdQYXJ0cyIsImZvcm1hdEJ5dGUiLCJlbGxpcHNpcyIsImJ5dGUiLCJfa2V5IiwibmVzdGVkVmFsdWUiLCJkZWZpbmVUb29sSW5wdXRHdWFyZHJhaWwiLCJkZWZpbmVUb29sT3V0cHV0R3VhcmRyYWlsIiwicmVzb2x2ZVRvb2xJbnB1dEd1YXJkcmFpbHMiLCJndWFyZHJhaWxzIiwiZ3IiLCJyZXNvbHZlVG9vbE91dHB1dEd1YXJkcmFpbHMiLCJpc0NvbXB1dGVyUHJvdmlkZXIiLCJjb21wdXRlckNhY2hlIiwiY29tcHV0ZXJJbml0aWFsaXplck1hcCIsImNvbXB1dGVyc0J5UnVuQ29udGV4dCIsImdldENvbXB1dGVySW5pdGlhbGl6ZXIiLCJpbml0aWFsaXplciIsInRyYWNrUmVzb2x2ZWRDb21wdXRlciIsInJ1bkNvbnRleHQiLCJyZXNvbHZlZEJ5UnVuIiwicmVzb2x2ZUNvbXB1dGVyIiwidG9vbEtleSIsInBlckNvbnRleHQiLCJjYWNoZWQiLCJpbml0aWFsaXplckNvbmZpZyIsImxpZmVjeWNsZSIsImRpc3Bvc2VyIiwiY29tcHV0ZXIiLCJkaXNwb3NlUmVzb2x2ZWRDb21wdXRlcnMiLCJkaXNwb3NlcnMiLCJzdG9yZWRJbml0aWFsaXplciIsImRpc3Bvc2UiLCJkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb24iLCJjb250ZXh0IiwidG9vbEVycm9yRnVuY3Rpb24iLCJzdHJpY3RNb2RlIiwicGFyYW1ldGVycyIsIl9pbnZva2UiLCJkZXRhaWxzIiwicGFyc2VkIiwic3RyaW5nUmVzdWx0IiwiaW52b2tlIiwiY3VycmVudFNwYW4iLCJnZXRDdXJyZW50U3BhbiIsIm5lZWRzQXBwcm92YWwiLCJhZ2VudCIsInByZWRpY2F0ZSIsIiRjb25zdHJ1Y3RvciIsImluaXQiLCJpbnN0IiwicHJvdG8iLCJQYXJlbnQiLCJEZWZpbml0aW9uIiwiJFpvZEFzeW5jRXJyb3IiLCIkWm9kRW5jb2RlRXJyb3IiLCJnbG9iYWxDb25maWciLCJjb25maWciLCJuZXdDb25maWciLCJqc29uU3RyaW5naWZ5UmVwbGFjZXIiLCJnZXR0ZXIiLCJudWxsaXNoIiwiY2xlYW5SZWdleCIsInN0YXJ0IiwiZW5kIiwiZmxvYXRTYWZlUmVtYWluZGVyIiwic3RlcCIsInZhbERlY0NvdW50Iiwic3RlcFN0cmluZyIsInN0ZXBEZWNDb3VudCIsImRlY0NvdW50IiwidmFsSW50Iiwic3RlcEludCIsIkVWQUxVQVRJTkciLCJkZWZpbmVMYXp5IiwiYXNzaWduUHJvcCIsInRhcmdldCIsInByb3AiLCJtZXJnZURlZnMiLCJtZXJnZWREZXNjcmlwdG9ycyIsImRlc2NyaXB0b3JzIiwiZXNjIiwic2x1Z2lmeSIsImNhcHR1cmVTdGFja1RyYWNlIiwiX2FyZ3MiLCJkYXRhIiwiYWxsb3dzRXZhbCIsIkYiLCJpc1BsYWluT2JqZWN0IiwibyIsImN0b3IiLCJwcm90Iiwic2hhbGxvd0Nsb25lIiwicHJvcGVydHlLZXlUeXBlcyIsImVzY2FwZVJlZ2V4IiwiY2xvbmUiLCJjbCIsIm5vcm1hbGl6ZVBhcmFtcyIsIm9wdGlvbmFsS2V5cyIsIk5VTUJFUl9GT1JNQVRfUkFOR0VTIiwicGljayIsIm1hc2siLCJjdXJyRGVmIiwiY2hlY2tzIiwibmV3U2hhcGUiLCJvbWl0IiwiZXhpc3RpbmdTaGFwZSIsIl9zaGFwZSIsInNhZmVFeHRlbmQiLCJtZXJnZSIsInBhcnRpYWwiLCJDbGFzcyIsIm9sZFNoYXBlIiwiYWJvcnRlZCIsInN0YXJ0SW5kZXgiLCJwcmVmaXhJc3N1ZXMiLCJpc3N1ZXMiLCJpc3MiLCJ1bndyYXBNZXNzYWdlIiwiZmluYWxpemVJc3N1ZSIsImZ1bGwiLCJnZXRMZW5ndGhhYmxlT3JpZ2luIiwiaXNzdWUiLCJ1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciIsIiRab2RFcnJvciIsIiRab2RSZWFsRXJyb3IiLCJmbGF0dGVuRXJyb3IiLCJtYXBwZXIiLCJmaWVsZEVycm9ycyIsImZvcm1FcnJvcnMiLCJzdWIiLCJmb3JtYXRFcnJvciIsInByb2Nlc3NFcnJvciIsImVsIiwiX3BhcnNlIiwiX0VyciIsImNvcmUuJFpvZEFzeW5jRXJyb3IiLCJlIiwidXRpbC5maW5hbGl6ZUlzc3VlIiwiY29yZS5jb25maWciLCJ1dGlsLmNhcHR1cmVTdGFja1RyYWNlIiwiX3BhcnNlQXN5bmMiLCJfc2FmZVBhcnNlIiwiZXJyb3JzLiRab2RFcnJvciIsInNhZmVQYXJzZSIsImVycm9ycy4kWm9kUmVhbEVycm9yIiwiX3NhZmVQYXJzZUFzeW5jIiwic2FmZVBhcnNlQXN5bmMiLCJfZW5jb2RlIiwiX2RlY29kZSIsIl9lbmNvZGVBc3luYyIsIl9kZWNvZGVBc3luYyIsIl9zYWZlRW5jb2RlIiwiX3NhZmVEZWNvZGUiLCJfc2FmZUVuY29kZUFzeW5jIiwiX3NhZmVEZWNvZGVBc3luYyIsImN1aWQiLCJjdWlkMiIsInVsaWQiLCJ4aWQiLCJrc3VpZCIsIm5hbm9pZCIsImR1cmF0aW9uIiwiZ3VpZCIsInV1aWQiLCJ2ZXJzaW9uIiwiZW1haWwiLCJfZW1vamkiLCJlbW9qaSIsImlwdjQiLCJpcHY2IiwiY2lkcnY0IiwiY2lkcnY2IiwiYmFzZTY0IiwiYmFzZTY0dXJsIiwiZTE2NCIsImRhdGVTb3VyY2UiLCJkYXRlIiwidGltZVNvdXJjZSIsImhobW0iLCJ0aW1lIiwiZGF0ZXRpbWUiLCJvcHRzIiwidGltZVJlZ2V4Iiwic3RyaW5nIiwiaW50ZWdlciIsIm51bWJlciIsImJvb2xlYW4iLCJsb3dlcmNhc2UiLCJ1cHBlcmNhc2UiLCIkWm9kQ2hlY2siLCJjb3JlLiRjb25zdHJ1Y3RvciIsIm51bWVyaWNPcmlnaW5NYXAiLCIkWm9kQ2hlY2tMZXNzVGhhbiIsIm9yaWdpbiIsImJhZyIsInBheWxvYWQiLCIkWm9kQ2hlY2tHcmVhdGVyVGhhbiIsIiRab2RDaGVja011bHRpcGxlT2YiLCJ1dGlsLmZsb2F0U2FmZVJlbWFpbmRlciIsIiRab2RDaGVja051bWJlckZvcm1hdCIsImlzSW50IiwidXRpbC5OVU1CRVJfRk9STUFUX1JBTkdFUyIsInJlZ2V4ZXMuaW50ZWdlciIsIiRab2RDaGVja01heExlbmd0aCIsInV0aWwubnVsbGlzaCIsInV0aWwuZ2V0TGVuZ3RoYWJsZU9yaWdpbiIsIiRab2RDaGVja01pbkxlbmd0aCIsIiRab2RDaGVja0xlbmd0aEVxdWFscyIsImxlbmd0aCIsInRvb0JpZyIsIiRab2RDaGVja1N0cmluZ0Zvcm1hdCIsIiRab2RDaGVja1JlZ2V4IiwiJFpvZENoZWNrTG93ZXJDYXNlIiwicmVnZXhlcy5sb3dlcmNhc2UiLCIkWm9kQ2hlY2tVcHBlckNhc2UiLCJyZWdleGVzLnVwcGVyY2FzZSIsIiRab2RDaGVja0luY2x1ZGVzIiwiZXNjYXBlZFJlZ2V4IiwidXRpbC5lc2NhcGVSZWdleCIsIiRab2RDaGVja1N0YXJ0c1dpdGgiLCIkWm9kQ2hlY2tFbmRzV2l0aCIsIiRab2RDaGVja092ZXJ3cml0ZSIsIkRvYyIsImFyZyIsImxpbmVzIiwibWluSW5kZW50IiwiZGVkZW50ZWQiLCJsaW5lIiwiJFpvZFR5cGUiLCJjaCIsInJ1bkNoZWNrcyIsImlzQWJvcnRlZCIsInV0aWwuYWJvcnRlZCIsImFzeW5jUmVzdWx0IiwiY3VyckxlbiIsImhhbmRsZUNhbmFyeVJlc3VsdCIsImNhbmFyeSIsImNoZWNrUmVzdWx0IiwidXRpbC5kZWZpbmVMYXp5IiwiJFpvZFN0cmluZyIsInJlZ2V4ZXMuc3RyaW5nIiwiJFpvZFN0cmluZ0Zvcm1hdCIsImNoZWNrcy4kWm9kQ2hlY2tTdHJpbmdGb3JtYXQiLCIkWm9kR1VJRCIsInJlZ2V4ZXMuZ3VpZCIsIiRab2RVVUlEIiwicmVnZXhlcy51dWlkIiwiJFpvZEVtYWlsIiwicmVnZXhlcy5lbWFpbCIsIiRab2RVUkwiLCJ0cmltbWVkIiwidXJsIiwiJFpvZEVtb2ppIiwicmVnZXhlcy5lbW9qaSIsIiRab2ROYW5vSUQiLCJyZWdleGVzLm5hbm9pZCIsIiRab2RDVUlEIiwicmVnZXhlcy5jdWlkIiwiJFpvZENVSUQyIiwicmVnZXhlcy5jdWlkMiIsIiRab2RVTElEIiwicmVnZXhlcy51bGlkIiwiJFpvZFhJRCIsInJlZ2V4ZXMueGlkIiwiJFpvZEtTVUlEIiwicmVnZXhlcy5rc3VpZCIsIiRab2RJU09EYXRlVGltZSIsInJlZ2V4ZXMuZGF0ZXRpbWUiLCIkWm9kSVNPRGF0ZSIsInJlZ2V4ZXMuZGF0ZSIsIiRab2RJU09UaW1lIiwicmVnZXhlcy50aW1lIiwiJFpvZElTT0R1cmF0aW9uIiwicmVnZXhlcy5kdXJhdGlvbiIsIiRab2RJUHY0IiwicmVnZXhlcy5pcHY0IiwiJFpvZElQdjYiLCJyZWdleGVzLmlwdjYiLCIkWm9kQ0lEUnY0IiwicmVnZXhlcy5jaWRydjQiLCIkWm9kQ0lEUnY2IiwicmVnZXhlcy5jaWRydjYiLCJwYXJ0cyIsImFkZHJlc3MiLCJwcmVmaXgiLCJwcmVmaXhOdW0iLCJpc1ZhbGlkQmFzZTY0IiwiJFpvZEJhc2U2NCIsInJlZ2V4ZXMuYmFzZTY0IiwiaXNWYWxpZEJhc2U2NFVSTCIsInJlZ2V4ZXMuYmFzZTY0dXJsIiwicGFkZGVkIiwiJFpvZEJhc2U2NFVSTCIsIiRab2RFMTY0IiwicmVnZXhlcy5lMTY0IiwiaXNWYWxpZEpXVCIsInRva2VuIiwiYWxnb3JpdGhtIiwidG9rZW5zUGFydHMiLCJoZWFkZXIiLCJwYXJzZWRIZWFkZXIiLCIkWm9kSldUIiwiJFpvZE51bWJlciIsInJlZ2V4ZXMubnVtYmVyIiwicmVjZWl2ZWQiLCIkWm9kTnVtYmVyRm9ybWF0IiwiY2hlY2tzLiRab2RDaGVja051bWJlckZvcm1hdCIsIiRab2RCb29sZWFuIiwicmVnZXhlcy5ib29sZWFuIiwiJFpvZEFueSIsIiRab2RVbmtub3duIiwiJFpvZE5ldmVyIiwiaGFuZGxlQXJyYXlSZXN1bHQiLCJmaW5hbCIsInV0aWwucHJlZml4SXNzdWVzIiwiJFpvZEFycmF5IiwicHJvbXMiLCJoYW5kbGVQcm9wZXJ0eVJlc3VsdCIsImlzT3B0aW9uYWxPdXQiLCJub3JtYWxpemVEZWYiLCJva2V5cyIsInV0aWwub3B0aW9uYWxLZXlzIiwiaGFuZGxlQ2F0Y2hhbGwiLCJ1bnJlY29nbml6ZWQiLCJrZXlTZXQiLCJfY2F0Y2hhbGwiLCJ0IiwiJFpvZE9iamVjdCIsImRlc2MiLCJzaCIsIm5ld1NoIiwiX25vcm1hbGl6ZWQiLCJ1dGlsLmNhY2hlZCIsInByb3BWYWx1ZXMiLCJ1dGlsLmlzT2JqZWN0IiwiY2F0Y2hhbGwiLCIkWm9kT2JqZWN0SklUIiwic3VwZXJQYXJzZSIsImdlbmVyYXRlRmFzdHBhc3MiLCJkb2MiLCJub3JtYWxpemVkIiwicGFyc2VTdHIiLCJ1dGlsLmVzYyIsImlkcyIsImNvdW50ZXIiLCJmYXN0cGFzcyIsImppdCIsImNvcmUuZ2xvYmFsQ29uZmlnIiwiZmFzdEVuYWJsZWQiLCJ1dGlsLmFsbG93c0V2YWwiLCJoYW5kbGVVbmlvblJlc3VsdHMiLCJyZXN1bHRzIiwibm9uYWJvcnRlZCIsIiRab2RVbmlvbiIsInV0aWwuY2xlYW5SZWdleCIsInNpbmdsZSIsImZpcnN0IiwiYXN5bmMiLCIkWm9kRGlzY3JpbWluYXRlZFVuaW9uIiwiX3N1cGVyIiwicHYiLCJkaXNjIiwibWFwIiwib3B0IiwiJFpvZEludGVyc2VjdGlvbiIsImhhbmRsZUludGVyc2VjdGlvblJlc3VsdHMiLCJtZXJnZVZhbHVlcyIsInV0aWwuaXNQbGFpbk9iamVjdCIsImJLZXlzIiwic2hhcmVkS2V5cyIsIm5ld09iaiIsInNoYXJlZFZhbHVlIiwibmV3QXJyYXkiLCJpdGVtQSIsIml0ZW1CIiwidW5yZWNLZXlzIiwidW5yZWNJc3N1ZSIsImJvdGhLZXlzIiwiZiIsIm1lcmdlZCIsIiRab2RSZWNvcmQiLCJyZWNvcmRLZXlzIiwia2V5UmVzdWx0IiwicmV0cnlSZXN1bHQiLCIkWm9kRW51bSIsInV0aWwuZ2V0RW51bVZhbHVlcyIsInZhbHVlc1NldCIsInV0aWwucHJvcGVydHlLZXlUeXBlcyIsIiRab2RMaXRlcmFsIiwiJFpvZFRyYW5zZm9ybSIsImNvcmUuJFpvZEVuY29kZUVycm9yIiwiX291dCIsImhhbmRsZU9wdGlvbmFsUmVzdWx0IiwiJFpvZE9wdGlvbmFsIiwiJFpvZEV4YWN0T3B0aW9uYWwiLCIkWm9kTnVsbGFibGUiLCIkWm9kRGVmYXVsdCIsImhhbmRsZURlZmF1bHRSZXN1bHQiLCIkWm9kUHJlZmF1bHQiLCIkWm9kTm9uT3B0aW9uYWwiLCJoYW5kbGVOb25PcHRpb25hbFJlc3VsdCIsIiRab2RDYXRjaCIsIiRab2RQaXBlIiwiaGFuZGxlUGlwZVJlc3VsdCIsIiRab2RSZWFkb25seSIsImhhbmRsZVJlYWRvbmx5UmVzdWx0IiwiJFpvZExhenkiLCIkWm9kQ3VzdG9tIiwiY2hlY2tzLiRab2RDaGVjayIsImhhbmRsZVJlZmluZVJlc3VsdCIsIl9pc3MiLCJ1dGlsLmlzc3VlIiwiX3N0cmluZyIsInV0aWwubm9ybWFsaXplUGFyYW1zIiwiX2VtYWlsIiwiX2d1aWQiLCJfdXVpZCIsIl91dWlkdjQiLCJfdXVpZHY2IiwiX3V1aWR2NyIsIl91cmwiLCJfbmFub2lkIiwiX2N1aWQiLCJfY3VpZDIiLCJfdWxpZCIsIl94aWQiLCJfa3N1aWQiLCJfaXB2NCIsIl9pcHY2IiwiX2NpZHJ2NCIsIl9jaWRydjYiLCJfYmFzZTY0IiwiX2Jhc2U2NHVybCIsIl9lMTY0IiwiX2p3dCIsIl9pc29EYXRlVGltZSIsIl9pc29EYXRlIiwiX2lzb1RpbWUiLCJfaXNvRHVyYXRpb24iLCJfbnVtYmVyIiwiX2ludCIsIl9ib29sZWFuIiwiX2FueSIsIl91bmtub3duIiwiX25ldmVyIiwiX2x0IiwiY2hlY2tzLiRab2RDaGVja0xlc3NUaGFuIiwiX2x0ZSIsIl9ndCIsImNoZWNrcy4kWm9kQ2hlY2tHcmVhdGVyVGhhbiIsIl9ndGUiLCJfbXVsdGlwbGVPZiIsImNoZWNrcy4kWm9kQ2hlY2tNdWx0aXBsZU9mIiwiX21heExlbmd0aCIsImNoZWNrcy4kWm9kQ2hlY2tNYXhMZW5ndGgiLCJfbWluTGVuZ3RoIiwiY2hlY2tzLiRab2RDaGVja01pbkxlbmd0aCIsIl9sZW5ndGgiLCJjaGVja3MuJFpvZENoZWNrTGVuZ3RoRXF1YWxzIiwiX3JlZ2V4IiwiY2hlY2tzLiRab2RDaGVja1JlZ2V4IiwiX2xvd2VyY2FzZSIsImNoZWNrcy4kWm9kQ2hlY2tMb3dlckNhc2UiLCJfdXBwZXJjYXNlIiwiY2hlY2tzLiRab2RDaGVja1VwcGVyQ2FzZSIsIl9pbmNsdWRlcyIsImluY2x1ZGVzIiwiY2hlY2tzLiRab2RDaGVja0luY2x1ZGVzIiwiX3N0YXJ0c1dpdGgiLCJjaGVja3MuJFpvZENoZWNrU3RhcnRzV2l0aCIsIl9lbmRzV2l0aCIsInN1ZmZpeCIsImNoZWNrcy4kWm9kQ2hlY2tFbmRzV2l0aCIsIl9vdmVyd3JpdGUiLCJ0eCIsImNoZWNrcy4kWm9kQ2hlY2tPdmVyd3JpdGUiLCJfbm9ybWFsaXplIiwiZm9ybSIsIl90cmltIiwiX3RvTG93ZXJDYXNlIiwiX3RvVXBwZXJDYXNlIiwiX3NsdWdpZnkiLCJ1dGlsLnNsdWdpZnkiLCJfYXJyYXkiLCJlbGVtZW50IiwiX3JlZmluZSIsIl9zdXBlclJlZmluZSIsIl9jaGVjayIsIl9pc3N1ZSIsImluaXRpYWxpemVDb250ZXh0IiwicHJvY2VzcyIsInByb2Nlc3NvciIsImV4dHJhY3REZWZzIiwiaWRUb1NjaGVtYSIsImZpbmFsaXplIiwicmVmU2VlbiIsInBhcmVudFNlZW4iLCJmaW5hbGl6ZWQiLCJjcmVhdGVTdGFuZGFyZEpTT05TY2hlbWFNZXRob2QiLCJjcmVhdGVUb0pTT05TY2hlbWFNZXRob2QiLCJwcm9jZXNzb3JzIiwiaW8iLCJsaWJyYXJ5T3B0aW9ucyIsInN0cmluZ1Byb2Nlc3NvciIsIm51bWJlclByb2Nlc3NvciIsImJvb2xlYW5Qcm9jZXNzb3IiLCJuZXZlclByb2Nlc3NvciIsImFueVByb2Nlc3NvciIsInVua25vd25Qcm9jZXNzb3IiLCJlbnVtUHJvY2Vzc29yIiwibGl0ZXJhbFByb2Nlc3NvciIsImN1c3RvbVByb2Nlc3NvciIsInRyYW5zZm9ybVByb2Nlc3NvciIsImFycmF5UHJvY2Vzc29yIiwib2JqZWN0UHJvY2Vzc29yIiwidW5pb25Qcm9jZXNzb3IiLCJpc0V4Y2x1c2l2ZSIsImludGVyc2VjdGlvblByb2Nlc3NvciIsInJlY29yZFByb2Nlc3NvciIsImtleUJhZyIsImtleVZhbHVlcyIsInZhbGlkS2V5VmFsdWVzIiwibnVsbGFibGVQcm9jZXNzb3IiLCJub25vcHRpb25hbFByb2Nlc3NvciIsImRlZmF1bHRQcm9jZXNzb3IiLCJwcmVmYXVsdFByb2Nlc3NvciIsImNhdGNoUHJvY2Vzc29yIiwicGlwZVByb2Nlc3NvciIsInJlYWRvbmx5UHJvY2Vzc29yIiwib3B0aW9uYWxQcm9jZXNzb3IiLCJsYXp5UHJvY2Vzc29yIiwiWm9kSVNPRGF0ZVRpbWUiLCJjb3JlLiRab2RJU09EYXRlVGltZSIsInNjaGVtYXMuWm9kU3RyaW5nRm9ybWF0IiwiY29yZS5faXNvRGF0ZVRpbWUiLCJab2RJU09EYXRlIiwiY29yZS4kWm9kSVNPRGF0ZSIsImNvcmUuX2lzb0RhdGUiLCJab2RJU09UaW1lIiwiY29yZS4kWm9kSVNPVGltZSIsImNvcmUuX2lzb1RpbWUiLCJab2RJU09EdXJhdGlvbiIsImNvcmUuJFpvZElTT0R1cmF0aW9uIiwiY29yZS5faXNvRHVyYXRpb24iLCJjb3JlLmZvcm1hdEVycm9yIiwiY29yZS5mbGF0dGVuRXJyb3IiLCJab2RFcnJvciIsIlpvZFJlYWxFcnJvciIsImNvcmUuX3BhcnNlIiwicGFyc2VBc3luYyIsImNvcmUuX3BhcnNlQXN5bmMiLCJjb3JlLl9zYWZlUGFyc2UiLCJjb3JlLl9zYWZlUGFyc2VBc3luYyIsImVuY29kZSIsImNvcmUuX2VuY29kZSIsImRlY29kZSIsImNvcmUuX2RlY29kZSIsImVuY29kZUFzeW5jIiwiY29yZS5fZW5jb2RlQXN5bmMiLCJkZWNvZGVBc3luYyIsImNvcmUuX2RlY29kZUFzeW5jIiwic2FmZUVuY29kZSIsImNvcmUuX3NhZmVFbmNvZGUiLCJzYWZlRGVjb2RlIiwiY29yZS5fc2FmZURlY29kZSIsInNhZmVFbmNvZGVBc3luYyIsImNvcmUuX3NhZmVFbmNvZGVBc3luYyIsInNhZmVEZWNvZGVBc3luYyIsImNvcmUuX3NhZmVEZWNvZGVBc3luYyIsIlpvZFR5cGUiLCJjb3JlLiRab2RUeXBlIiwidXRpbC5tZXJnZURlZnMiLCJjb3JlLmNsb25lIiwicmVnIiwicGFyc2UucGFyc2UiLCJwYXJzZS5zYWZlUGFyc2UiLCJwYXJzZS5wYXJzZUFzeW5jIiwicGFyc2Uuc2FmZVBhcnNlQXN5bmMiLCJwYXJzZS5lbmNvZGUiLCJwYXJzZS5kZWNvZGUiLCJwYXJzZS5lbmNvZGVBc3luYyIsInBhcnNlLmRlY29kZUFzeW5jIiwicGFyc2Uuc2FmZUVuY29kZSIsInBhcnNlLnNhZmVEZWNvZGUiLCJwYXJzZS5zYWZlRW5jb2RlQXN5bmMiLCJwYXJzZS5zYWZlRGVjb2RlQXN5bmMiLCJyZWZpbmUiLCJyZWZpbmVtZW50Iiwic3VwZXJSZWZpbmUiLCJjaGVja3Mub3ZlcndyaXRlIiwiZXhhY3RPcHRpb25hbCIsIm51bGxhYmxlIiwibm9ub3B0aW9uYWwiLCJhcnJheSIsInVuaW9uIiwiaW50ZXJzZWN0aW9uIiwicGlwZSIsInRyYW5zZm9ybSIsIl9kZWZhdWx0IiwicHJlZmF1bHQiLCJfY2F0Y2giLCJyZWFkb25seSIsImRlc2NyaXB0aW9uIiwiY29yZS5nbG9iYWxSZWdpc3RyeSIsIl9ab2RTdHJpbmciLCJjb3JlLiRab2RTdHJpbmciLCJwcm9jZXNzb3JzLnN0cmluZ1Byb2Nlc3NvciIsImNoZWNrcy5yZWdleCIsImNoZWNrcy5pbmNsdWRlcyIsImNoZWNrcy5zdGFydHNXaXRoIiwiY2hlY2tzLmVuZHNXaXRoIiwiY2hlY2tzLm1pbkxlbmd0aCIsImNoZWNrcy5tYXhMZW5ndGgiLCJjaGVja3MubGVuZ3RoIiwiY2hlY2tzLmxvd2VyY2FzZSIsImNoZWNrcy51cHBlcmNhc2UiLCJjaGVja3MudHJpbSIsImNoZWNrcy5ub3JtYWxpemUiLCJjaGVja3MudG9Mb3dlckNhc2UiLCJjaGVja3MudG9VcHBlckNhc2UiLCJjaGVja3Muc2x1Z2lmeSIsIlpvZFN0cmluZyIsImNvcmUuX2VtYWlsIiwiWm9kRW1haWwiLCJjb3JlLl91cmwiLCJab2RVUkwiLCJjb3JlLl9qd3QiLCJab2RKV1QiLCJjb3JlLl9lbW9qaSIsIlpvZEVtb2ppIiwiY29yZS5fZ3VpZCIsIlpvZEdVSUQiLCJjb3JlLl91dWlkIiwiWm9kVVVJRCIsImNvcmUuX3V1aWR2NCIsImNvcmUuX3V1aWR2NiIsImNvcmUuX3V1aWR2NyIsImNvcmUuX25hbm9pZCIsIlpvZE5hbm9JRCIsImNvcmUuX2N1aWQiLCJab2RDVUlEIiwiY29yZS5fY3VpZDIiLCJab2RDVUlEMiIsImNvcmUuX3VsaWQiLCJab2RVTElEIiwiY29yZS5fYmFzZTY0IiwiWm9kQmFzZTY0IiwiY29yZS5fYmFzZTY0dXJsIiwiWm9kQmFzZTY0VVJMIiwiY29yZS5feGlkIiwiWm9kWElEIiwiY29yZS5fa3N1aWQiLCJab2RLU1VJRCIsImNvcmUuX2lwdjQiLCJab2RJUHY0IiwiY29yZS5faXB2NiIsIlpvZElQdjYiLCJjb3JlLl9jaWRydjQiLCJab2RDSURSdjQiLCJjb3JlLl9jaWRydjYiLCJab2RDSURSdjYiLCJjb3JlLl9lMTY0IiwiWm9kRTE2NCIsImlzby5kYXRldGltZSIsImlzby5kYXRlIiwiaXNvLnRpbWUiLCJpc28uZHVyYXRpb24iLCJjb3JlLl9zdHJpbmciLCJab2RTdHJpbmdGb3JtYXQiLCJjb3JlLiRab2RTdHJpbmdGb3JtYXQiLCJjb3JlLiRab2RFbWFpbCIsImNvcmUuJFpvZEdVSUQiLCJjb3JlLiRab2RVVUlEIiwiY29yZS4kWm9kVVJMIiwiY29yZS4kWm9kRW1vamkiLCJjb3JlLiRab2ROYW5vSUQiLCJjb3JlLiRab2RDVUlEIiwiY29yZS4kWm9kQ1VJRDIiLCJjb3JlLiRab2RVTElEIiwiY29yZS4kWm9kWElEIiwiY29yZS4kWm9kS1NVSUQiLCJjb3JlLiRab2RJUHY0IiwiY29yZS4kWm9kSVB2NiIsImNvcmUuJFpvZENJRFJ2NCIsImNvcmUuJFpvZENJRFJ2NiIsImNvcmUuJFpvZEJhc2U2NCIsImNvcmUuJFpvZEJhc2U2NFVSTCIsImNvcmUuJFpvZEUxNjQiLCJjb3JlLiRab2RKV1QiLCJab2ROdW1iZXIiLCJjb3JlLiRab2ROdW1iZXIiLCJwcm9jZXNzb3JzLm51bWJlclByb2Nlc3NvciIsImNoZWNrcy5ndCIsImNoZWNrcy5ndGUiLCJjaGVja3MubHQiLCJjaGVja3MubHRlIiwiaW50IiwiY2hlY2tzLm11bHRpcGxlT2YiLCJjb3JlLl9udW1iZXIiLCJab2ROdW1iZXJGb3JtYXQiLCJjb3JlLiRab2ROdW1iZXJGb3JtYXQiLCJjb3JlLl9pbnQiLCJab2RCb29sZWFuIiwiY29yZS4kWm9kQm9vbGVhbiIsInByb2Nlc3NvcnMuYm9vbGVhblByb2Nlc3NvciIsImNvcmUuX2Jvb2xlYW4iLCJab2RBbnkiLCJjb3JlLiRab2RBbnkiLCJwcm9jZXNzb3JzLmFueVByb2Nlc3NvciIsImFueSIsImNvcmUuX2FueSIsIlpvZFVua25vd24iLCJjb3JlLiRab2RVbmtub3duIiwicHJvY2Vzc29ycy51bmtub3duUHJvY2Vzc29yIiwidW5rbm93biIsImNvcmUuX3Vua25vd24iLCJab2ROZXZlciIsImNvcmUuJFpvZE5ldmVyIiwicHJvY2Vzc29ycy5uZXZlclByb2Nlc3NvciIsIm5ldmVyIiwiY29yZS5fbmV2ZXIiLCJab2RBcnJheSIsImNvcmUuJFpvZEFycmF5IiwicHJvY2Vzc29ycy5hcnJheVByb2Nlc3NvciIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsImxlbiIsImNvcmUuX2FycmF5IiwiWm9kT2JqZWN0IiwiY29yZS4kWm9kT2JqZWN0SklUIiwicHJvY2Vzc29ycy5vYmplY3RQcm9jZXNzb3IiLCJfZW51bSIsImluY29taW5nIiwidXRpbC5leHRlbmQiLCJ1dGlsLnNhZmVFeHRlbmQiLCJvdGhlciIsInV0aWwubWVyZ2UiLCJ1dGlsLnBpY2siLCJ1dGlsLm9taXQiLCJ1dGlsLnBhcnRpYWwiLCJab2RPcHRpb25hbCIsInV0aWwucmVxdWlyZWQiLCJab2ROb25PcHRpb25hbCIsIlpvZFVuaW9uIiwiY29yZS4kWm9kVW5pb24iLCJwcm9jZXNzb3JzLnVuaW9uUHJvY2Vzc29yIiwiWm9kRGlzY3JpbWluYXRlZFVuaW9uIiwiY29yZS4kWm9kRGlzY3JpbWluYXRlZFVuaW9uIiwiZGlzY3JpbWluYXRlZFVuaW9uIiwiZGlzY3JpbWluYXRvciIsIlpvZEludGVyc2VjdGlvbiIsImNvcmUuJFpvZEludGVyc2VjdGlvbiIsInByb2Nlc3NvcnMuaW50ZXJzZWN0aW9uUHJvY2Vzc29yIiwiWm9kUmVjb3JkIiwiY29yZS4kWm9kUmVjb3JkIiwicHJvY2Vzc29ycy5yZWNvcmRQcm9jZXNzb3IiLCJyZWNvcmQiLCJ2YWx1ZVR5cGUiLCJab2RFbnVtIiwiY29yZS4kWm9kRW51bSIsInByb2Nlc3NvcnMuZW51bVByb2Nlc3NvciIsIm5ld0VudHJpZXMiLCJab2RMaXRlcmFsIiwiY29yZS4kWm9kTGl0ZXJhbCIsInByb2Nlc3NvcnMubGl0ZXJhbFByb2Nlc3NvciIsIlpvZFRyYW5zZm9ybSIsImNvcmUuJFpvZFRyYW5zZm9ybSIsInByb2Nlc3NvcnMudHJhbnNmb3JtUHJvY2Vzc29yIiwiY29yZS4kWm9kT3B0aW9uYWwiLCJwcm9jZXNzb3JzLm9wdGlvbmFsUHJvY2Vzc29yIiwiWm9kRXhhY3RPcHRpb25hbCIsImNvcmUuJFpvZEV4YWN0T3B0aW9uYWwiLCJab2ROdWxsYWJsZSIsImNvcmUuJFpvZE51bGxhYmxlIiwicHJvY2Vzc29ycy5udWxsYWJsZVByb2Nlc3NvciIsIlpvZERlZmF1bHQiLCJjb3JlLiRab2REZWZhdWx0IiwicHJvY2Vzc29ycy5kZWZhdWx0UHJvY2Vzc29yIiwiZGVmYXVsdFZhbHVlIiwidXRpbC5zaGFsbG93Q2xvbmUiLCJab2RQcmVmYXVsdCIsImNvcmUuJFpvZFByZWZhdWx0IiwicHJvY2Vzc29ycy5wcmVmYXVsdFByb2Nlc3NvciIsImNvcmUuJFpvZE5vbk9wdGlvbmFsIiwicHJvY2Vzc29ycy5ub25vcHRpb25hbFByb2Nlc3NvciIsIlpvZENhdGNoIiwiY29yZS4kWm9kQ2F0Y2giLCJwcm9jZXNzb3JzLmNhdGNoUHJvY2Vzc29yIiwiWm9kUGlwZSIsImNvcmUuJFpvZFBpcGUiLCJwcm9jZXNzb3JzLnBpcGVQcm9jZXNzb3IiLCJpbl8iLCJvdXQiLCJab2RSZWFkb25seSIsImNvcmUuJFpvZFJlYWRvbmx5IiwicHJvY2Vzc29ycy5yZWFkb25seVByb2Nlc3NvciIsIlpvZExhenkiLCJjb3JlLiRab2RMYXp5IiwicHJvY2Vzc29ycy5sYXp5UHJvY2Vzc29yIiwibGF6eSIsIlpvZEN1c3RvbSIsImNvcmUuJFpvZEN1c3RvbSIsInByb2Nlc3NvcnMuY3VzdG9tUHJvY2Vzc29yIiwiY29yZS5fcmVmaW5lIiwiY29yZS5fc3VwZXJSZWZpbmUiLCJfaW5zdGFuY2VvZiIsImNscyIsInoub2JqZWN0Iiwiei5zdHJpbmciLCJ6LmxpdGVyYWwiLCJ6LnJlY29yZCIsInouYW55Iiwiei5hcnJheSIsInouYm9vbGVhbiIsIl9jYWNoZWRUb29scyIsIl9jYWNoZWRUb29sS2V5c0J5U2VydmVyIiwiZGVmYXVsdE1DUFRvb2xDYWNoZUtleSIsInNlcnZlciIsImdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyIiwiY29udmVydFNjaGVtYXNUb1N0cmljdCIsImdlbmVyYXRlTUNQVG9vbENhY2hlS2V5IiwiY2FjaGVLZXkiLCJtY3BUb0Z1bmN0aW9uVG9vbCIsImxpc3RUb29sc0ZvclNlcnZlciIsInNwYW4iLCJmZXRjaGVkTWNwVG9vbHMiLCJtY3BUb29scyIsImZpbHRlcmVkVG9vbHMiLCJmaWx0ZXIiLCJnbG9iYWxMb2dnZXIiLCJhbGxvd2VkVG9vbE5hbWVzIiwiYmxvY2tlZFRvb2xOYW1lcyIsImFsbG93ZWQiLCJibG9ja2VkIiwidG9vbHMiLCJnZXRDdXJyZW50VHJhY2UiLCJ3aXRoTUNQTGlzdFRvb2xzU3BhbiIsImdldEFsbE1jcFRvb2xzIiwibWNwU2VydmVyc09yT3B0cyIsIm1jcFNlcnZlcnMiLCJjb252ZXJ0U2NoZW1hc1RvU3RyaWN0RnJvbU9wdHMiLCJydW5Db250ZXh0RnJvbU9wdHMiLCJhZ2VudEZyb21PcHRzIiwiYWxsVG9vbHMiLCJ0b29sTmFtZXMiLCJzZXJ2ZXJUb29scyIsIm1jcFRvb2wiLCJfY29udGV4dCIsInN0cmljdFNjaGVtYSIsIm5vblN0cmljdFNjaGVtYSIsIkJyb3dzZXJFdmVudEVtaXR0ZXIiLCJfX3ByaXZhdGVBZGQiLCJfdGFyZ2V0IiwiX2xpc3RlbmVyV3JhcHBlcnMiLCJsaXN0ZW5lciIsImV2ZW50VHlwZSIsImxpc3RlbmVyc0ZvclR5cGUiLCJfX3ByaXZhdGVHZXQiLCJ3cmFwcGVycyIsIndyYXBwZXIiLCJldmVudCIsImhhbmRsZXIiLCJyYW5kb21VVUlEIiwiUmVhZGFibGUiLCJfZGVzdGluYXRpb24iLCJfdHJhbnNmb3JtIiwiUmVhZGFibGVTdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJBc3luY0xvY2FsU3RvcmFnZSIsIkJyb3dzZXJUaW1lciIsInRpbWVvdXQiLCJ0aW1lb3V0SWQiLCJ0aW1lciIsImVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NCIsImdsb2JhbEJ1ZmZlciIsImJpbmFyeSIsImNoYXJzIiwiYzEiLCJjMiIsImMzIiwiZW5jMSIsImVuYzIiLCJlbmMzIiwiZW5jNCIsInNlcmlhbGl6ZUJpbmFyeSIsInRvVWludDhBcnJheUZyb21CaW5hcnkiLCJ0b0FnZW50SW5wdXRMaXN0Iiwib3JpZ2luYWxJbnB1dCIsImdldEFnZW50SW5wdXRJdGVtS2V5IiwiYWdlbnRJbnB1dFNlcmlhbGl6YXRpb25SZXBsYWNlciIsImJ1aWxkQWdlbnRJbnB1dFBvb2wiLCJwb29sIiwidGFrZUFnZW50SW5wdXRGcm9tUG9vbCIsImNhbmRpZGF0ZXMiLCJyZW1vdmVBZ2VudElucHV0RnJvbVBvb2wiLCJzZXJpYWxpemVkIiwiZXh0cmFjdE91dHB1dEl0ZW1zRnJvbVJ1bkl0ZW1zIiwiZ2V0VHVybklucHV0IiwiZ2VuZXJhdGVkSXRlbXMiLCJvdXRwdXRJdGVtcyIsIlNoYXJlZEJhc2UiLCJJdGVtQmFzZSIsIlJlZnVzYWwiLCJPdXRwdXRUZXh0IiwiSW5wdXRUZXh0IiwiUmVhc29uaW5nVGV4dCIsIklucHV0SW1hZ2UiLCJ6XG4gICAgICAgIC8vIDEuIGltYWdlIGRhdGFcbiAgICAgICAgLnN0cmluZyIsIklucHV0RmlsZSIsInpcbiAgICAgICAgLy8gMS4gZmlsZSBkYXRhXG4gICAgICAgIC5zdHJpbmciLCJBdWRpb0NvbnRlbnQiLCJ6XG4gICAgICAgIC5zdHJpbmciLCJJbWFnZUNvbnRlbnQiLCJUb29sT3V0cHV0VGV4dCIsIkltYWdlRGF0YU9iamVjdFNjaGVtYSIsInpcbiAgICAgICAgLnVuaW9uIiwiei5pbnN0YW5jZW9mIiwiSW1hZ2VVcmxPYmplY3RTY2hlbWEiLCJJbWFnZUZpbGVJZE9iamVjdFNjaGVtYSIsIkltYWdlT2JqZWN0U2NoZW1hIiwielxuICAgIC51bmlvbiIsIkZpbGVEYXRhT2JqZWN0U2NoZW1hIiwiRmlsZVVybE9iamVjdFNjaGVtYSIsIkZpbGVJZE9iamVjdFNjaGVtYSIsIkZpbGVSZWZlcmVuY2VTY2hlbWEiLCJ6U3RyaW5nV2l0aEhpbnRzIiwiX2hpbnRzIiwiVG9vbE91dHB1dEltYWdlIiwiVG9vbE91dHB1dEZpbGVDb250ZW50IiwiQ29tcHV0ZXJUb29sT3V0cHV0IiwiY29tcHV0ZXJBY3Rpb25zIiwiei5kaXNjcmltaW5hdGVkVW5pb24iLCJ6Lm51bWJlciIsInouZW51bSIsIkFzc2lzdGFudENvbnRlbnQiLCJNZXNzYWdlQmFzZSIsIkFzc2lzdGFudE1lc3NhZ2VJdGVtIiwiVXNlckNvbnRlbnQiLCJVc2VyTWVzc2FnZUl0ZW0iLCJTeXN0ZW1NZXNzYWdlSXRlbSIsIkhvc3RlZFRvb2xDYWxsSXRlbSIsIkZ1bmN0aW9uQ2FsbEl0ZW0iLCJUb29sQ2FsbE91dHB1dENvbnRlbnQiLCJUb29sQ2FsbFN0cnVjdHVyZWRPdXRwdXQiLCJGdW5jdGlvbkNhbGxSZXN1bHRJdGVtIiwiQ29tcHV0ZXJVc2VDYWxsSXRlbSIsIkNvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0iLCJTaGVsbEFjdGlvbiIsIlNoZWxsQ2FsbEl0ZW0iLCJTaGVsbENhbGxPdXRjb21lIiwiU2hlbGxDYWxsT3V0cHV0Q29udGVudCIsInpcbiAgICAub2JqZWN0IiwiU2hlbGxDYWxsUmVzdWx0SXRlbSIsIkFwcGx5UGF0Y2hPcGVyYXRpb25DcmVhdGVGaWxlIiwiQXBwbHlQYXRjaE9wZXJhdGlvblVwZGF0ZUZpbGUiLCJBcHBseVBhdGNoT3BlcmF0aW9uRGVsZXRlRmlsZSIsIkFwcGx5UGF0Y2hPcGVyYXRpb24iLCJBcHBseVBhdGNoQ2FsbEl0ZW0iLCJBcHBseVBhdGNoQ2FsbFJlc3VsdEl0ZW0iLCJUb29sQ2FsbEl0ZW0iLCJSZWFzb25pbmdJdGVtIiwiQ29tcGFjdGlvbkl0ZW0iLCJVbmtub3duSXRlbSIsIk91dHB1dE1vZGVsSXRlbSIsIk1vZGVsSXRlbSIsInoudW5pb24iLCJSZXF1ZXN0VXNhZ2VEYXRhIiwiVXNhZ2VEYXRhIiwiU3RyZWFtRXZlbnRUZXh0U3RyZWFtIiwiU3RyZWFtRXZlbnRSZXNwb25zZVN0YXJ0ZWQiLCJTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkIiwiU3RyZWFtRXZlbnRHZW5lcmljSXRlbSIsImNyZWF0ZUFib3J0SGFuZGxlclJlZiIsImNvbWJpbmVBYm9ydFNpZ25hbHMiLCJzaWduYWxzIiwiYWN0aXZlIiwiYW55Rm4iLCJjb250cm9sbGVyIiwiYWJvcnRDb21iaW5lZCIsInJlYXNvbiIsInNpZ25hbCIsIlJ1blJlc3VsdEJhc2UiLCJyZXNwb25zZXMiLCJSdW5SZXN1bHQiLCJTdHJlYW1lZFJ1blJlc3VsdCIsIl9TdHJlYW1lZFJ1blJlc3VsdF9pbnN0YW5jZXMiLCJfZXJyb3IiLCJfY29tYmluZWRTaWduYWwiLCJfYWJvcnRTaWduYWxTbmFwc2hvdCIsIl9hYm9ydENvbnRyb2xsZXIiLCJfcmVhZGFibGVDb250cm9sbGVyIiwiX3JlYWRhYmxlU3RyZWFtIiwiX2NvbXBsZXRlZFByb21pc2UiLCJfY29tcGxldGVkUHJvbWlzZVJlc29sdmUiLCJfY29tcGxldGVkUHJvbWlzZVJlamVjdCIsIl9jYW5jZWxsZWQiLCJfc3RyZWFtTG9vcFByb21pc2UiLCJfYWJvcnRIYW5kbGVyIiwiX2Fib3J0SGFuZGxlclJlZiIsIl9fcHJpdmF0ZVNldCIsIl9SZWFkYWJsZVN0cmVhbSIsInJlc29sdmUiLCJyZWplY3QiLCJhYm9ydFJlZiIsImhhbmRsZUFib3J0IiwiX19wcml2YXRlTWV0aG9kIiwiaGFuZGxlQWJvcnRfZm4iLCJkZXRhY2hBYm9ydEhhbmRsZXJfZm4iLCJlcnIiLCJzdHJlYW0iLCJwcm9taXNlIiwiQUxTX1NZTUJPTCIsImxvY2FsRmFsbGJhY2tBbHMiLCJnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UiLCJnbG9iYWxTY29wZSIsImdsb2JhbEFMUyIsIm5ld0FMUyIsImdldEFjdGl2ZUNvbnRleHQiLCJzdG9yZSIsImN1cnJlbnRUcmFjZSIsIl93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUiLCJjdXJyZW50Q29udGV4dCIsInByZXZpb3VzQWxzU3RvcmUiLCJ0cmFjZSIsImNsZWFudXBEZWZlcnJlZCIsInN0YXJ0ZWQiLCJjbGVhbnVwQ29udGV4dCIsInN0cmVhbUxvb3BQcm9taXNlIiwid2l0aFRyYWNlIiwiZ2V0R2xvYmFsVHJhY2VQcm92aWRlciIsImdldE9yQ3JlYXRlVHJhY2UiLCJuZXdDb250ZXh0Iiwic2V0Q3VycmVudFNwYW4iLCJyZXNldEN1cnJlbnRTcGFuIiwiYWRkRXJyb3JUb0N1cnJlbnRTcGFuIiwic3BhbkVycm9yIiwiY2xvbmVDdXJyZW50Q29udGV4dCIsIndpdGhOZXdTcGFuQ29udGV4dCIsImNvcHlPZkNvbnRleHQiLCJDb25zb2xlU3BhbkV4cG9ydGVyIiwiQmF0Y2hUcmFjZVByb2Nlc3NvciIsImV4cG9ydGVyIiwibWF4UXVldWVTaXplIiwibWF4QmF0Y2hTaXplIiwic2NoZWR1bGVEZWxheSIsImV4cG9ydFRyaWdnZXJSYXRpbyIsIl9CYXRjaFRyYWNlUHJvY2Vzc29yX2luc3RhbmNlcyIsIl9tYXhRdWV1ZVNpemUiLCJfbWF4QmF0Y2hTaXplIiwiX3NjaGVkdWxlRGVsYXkiLCJfZXhwb3J0VHJpZ2dlclNpemUiLCJfZXhwb3J0ZXIiLCJfYnVmZmVyIiwiX3RpbWVyIiwiX3RpbWVvdXQiLCJfZXhwb3J0SW5Qcm9ncmVzcyIsIl90aW1lb3V0QWJvcnRDb250cm9sbGVyIiwicnVuRXhwb3J0TG9vcF9mbiIsInNhZmVBZGRJdGVtX2ZuIiwiX3RyYWNlIiwiX3NwYW4iLCJleHBvcnRCYXRjaGVzX2ZuIiwiZm9yY2UiLCJ0b0V4cG9ydCIsImJhdGNoIiwiTXVsdGlUcmFjaW5nUHJvY2Vzc29yIiwiX3Byb2Nlc3NvcnMiLCJfZGVmYXVsdEV4cG9ydGVyIiwiX2RlZmF1bHRQcm9jZXNzb3IiLCJkZWZhdWx0RXhwb3J0ZXIiLCJ0aW1lSXNvIiwiZ2VuZXJhdGVUcmFjZUlkIiwiZ2VuZXJhdGVTcGFuSWQiLCJyZW1vdmVQcml2YXRlRmllbGRzIiwiX1NwYW4iLCJfZGF0YSIsIl90cmFjZUlkIiwiX3NwYW5JZCIsIl9wYXJlbnRJZCIsIl9wcm9jZXNzb3IiLCJfc3RhcnRlZEF0IiwiX2VuZGVkQXQiLCJfdHJhY2luZ0FwaUtleSIsIl9wcmV2aW91c1NwYW4iLCJTcGFuIiwiTm9vcFNwYW4iLCJfVHJhY2UiLCJfc3RhcnRlZCIsIlRyYWNlIiwiTm9vcFRyYWNlIiwiVHJhY2VQcm92aWRlciIsIl9UcmFjZVByb3ZpZGVyX2luc3RhbmNlcyIsIl9tdWx0aVByb2Nlc3NvciIsIl9kaXNhYmxlZCIsImFkZENsZWFudXBMaXN0ZW5lcnNfZm4iLCJkaXNhYmxlZCIsInRyYWNlT3B0aW9ucyIsInRyYWNlSWQiLCJzcGFuT3B0aW9ucyIsInBhcmVudElkIiwidHJhY2luZ0FwaUtleSIsImNsZWFudXAiLCJoYXNPdGhlckxpc3RlbmVyc0ZvclNpZ25hbHMiLCJoYXNPdGhlckxpc3RlbmVyc0ZvckV2ZW50cyIsIm1vZHVsZVRyYWNlUHJvdmlkZXIiLCJzeW1ib2wiLCJnbG9iYWxIb2xkZXIiLCJkZXNjcmlwdG9yIiwiZ2V0TW9kdWxlVHJhY2VQcm92aWRlciIsInByb3ZpZGVyIiwiX3dpdGhTcGFuRmFjdG9yeSIsImNyZWF0ZVNwYW4iLCJjcmVhdGVBZ2VudFNwYW4iLCJjcmVhdGVGdW5jdGlvblNwYW4iLCJ3aXRoRnVuY3Rpb25TcGFuIiwiY3JlYXRlSGFuZG9mZlNwYW4iLCJ3aXRoSGFuZG9mZlNwYW4iLCJjcmVhdGVHdWFyZHJhaWxTcGFuIiwid2l0aEd1YXJkcmFpbFNwYW4iLCJjcmVhdGVNQ1BMaXN0VG9vbHNTcGFuIiwiYWRkVHJhY2VQcm9jZXNzb3IiLCJFdmVudEVtaXR0ZXJEZWxlZ2F0ZSIsIkFnZW50SG9va3MiLCJSdW50aW1lRXZlbnRFbWl0dGVyIiwiUnVuSG9va3MiLCJPUEVOQUlfREVGQVVMVF9NT0RFTF9FTlZfVkFSSUFCTEVfTkFNRSIsImdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkIiwibW9kZWxOYW1lIiwiTk9ORV9FRkZPUlRfU1VQUE9SVEVEX01PREVMUyIsImlzTm9uZUVmZm9ydFN1cHBvcnRlZE1vZGVsIiwiaXNHcHQ1RGVmYXVsdCIsImdldERlZmF1bHRNb2RlbCIsImdldERlZmF1bHRNb2RlbFNldHRpbmdzIiwibW9kZWwiLCJfbW9kZWwiLCJSZXF1ZXN0VXNhZ2UiLCJpbnB1dFRva2Vuc0RldGFpbHMiLCJvdXRwdXRUb2tlbnNEZXRhaWxzIiwiVXNhZ2UiLCJyZXF1ZXN0VXNhZ2VFbnRyaWVzIiwibm9ybWFsaXplZFJlcXVlc3RVc2FnZUVudHJpZXMiLCJuZXdVc2FnZSIsIlJ1bkNvbnRleHQiLCJfYXBwcm92YWxzIiwiYXBwcm92YWxzIiwibWVyZ2VBcHByb3ZhbCIsImN1cnJlbnRMaXN0IiwiaW5jb21pbmdMaXN0IiwidG9vbE5hbWUiLCJhcHByb3ZhbCIsImNhbGxJZCIsImFwcHJvdmFsRW50cnkiLCJpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsIiwiaW5kaXZpZHVhbENhbGxSZWplY3Rpb24iLCJhcHByb3ZhbEl0ZW0iLCJhbHdheXNBcHByb3ZlIiwiYWx3YXlzUmVqZWN0IiwiZ2V0VHJhbnNmZXJNZXNzYWdlIiwiZGVmYXVsdEhhbmRvZmZUb29sTmFtZSIsImRlZmF1bHRIYW5kb2ZmVG9vbERlc2NyaXB0aW9uIiwiSGFuZG9mZiIsIm9uSW52b2tlSGFuZG9mZiIsImhhbmRvZmYiLCJoYXNPbkhhbmRvZmYiLCJoYXNJbnB1dFR5cGUiLCJpbnB1dEpzb25TdHJpbmciLCJnZXRIYW5kb2ZmIiwiUnVuUmF3TW9kZWxTdHJlYW1FdmVudCIsIlJ1bkl0ZW1TdHJlYW1FdmVudCIsIlJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50IiwiZGVmaW5lSW5wdXRHdWFyZHJhaWwiLCJleGVjdXRlIiwicnVuSW5QYXJhbGxlbCIsImRlZmluZU91dHB1dEd1YXJkcmFpbCIsImdldERlZmF1bHRNb2RlbFByb3ZpZGVyIiwiUnVuSXRlbUJhc2UiLCJSdW5NZXNzYWdlT3V0cHV0SXRlbSIsInJhd0l0ZW0iLCJwYXJ0IiwiUnVuVG9vbENhbGxJdGVtIiwiUnVuVG9vbENhbGxPdXRwdXRJdGVtIiwiUnVuUmVhc29uaW5nSXRlbSIsIlJ1bkhhbmRvZmZDYWxsSXRlbSIsIlJ1bkhhbmRvZmZPdXRwdXRJdGVtIiwic291cmNlQWdlbnQiLCJ0YXJnZXRBZ2VudCIsIlJ1blRvb2xBcHByb3ZhbEl0ZW0iLCJBZ2VudFRvb2xVc2VUcmFja2VyIiwiX2FnZW50VG9Ub29scyIsImFsbG93RW1wdHkiLCJuZXh0U3RlcFNjaGVtYSIsIlNpbmdsZVN0ZXBSZXN1bHQiLCJtb2RlbFJlc3BvbnNlIiwicHJlU3RlcEl0ZW1zIiwibmV3U3RlcEl0ZW1zIiwibmV4dFN0ZXAiLCJDVVJSRU5UX1NDSEVNQV9WRVJTSU9OIiwiU1VQUE9SVEVEX1NDSEVNQV9WRVJTSU9OUyIsIiRzY2hlbWFWZXJzaW9uIiwic2VyaWFsaXplZEFnZW50U2NoZW1hIiwiU2VyaWFsaXplZFNwYW4iLCJ6XG4gICAgICAgIC5vYmplY3QiLCJ6LmxhenkiLCJyZXF1ZXN0VXNhZ2VTY2hlbWEiLCJ1c2FnZVNjaGVtYSIsIm1vZGVsUmVzcG9uc2VTY2hlbWEiLCJwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0iLCJpdGVtU2NoZW1hIiwicHJvdG9jb2wuQXNzaXN0YW50TWVzc2FnZUl0ZW0iLCJwcm90b2NvbC5Ub29sQ2FsbEl0ZW0iLCJwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0iLCJwcm90b2NvbC5GdW5jdGlvbkNhbGxSZXN1bHRJdGVtIiwicHJvdG9jb2wuQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSIsInByb3RvY29sLlNoZWxsQ2FsbFJlc3VsdEl0ZW0iLCJwcm90b2NvbC5BcHBseVBhdGNoQ2FsbFJlc3VsdEl0ZW0iLCJwcm90b2NvbC5SZWFzb25pbmdJdGVtIiwicHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbSIsInByb3RvY29sLlNoZWxsQ2FsbEl0ZW0iLCJwcm90b2NvbC5BcHBseVBhdGNoQ2FsbEl0ZW0iLCJzZXJpYWxpemVkVHJhY2VTY2hlbWEiLCJzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2VTY2hlbWEiLCJ6XG4gICAgICAgIC5hcnJheSIsImd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hIiwidG9vbEd1YXJkcmFpbEJlaGF2aW9yU2NoZW1hIiwidG9vbEd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hIiwidG9vbEd1YXJkcmFpbE1ldGFkYXRhU2NoZW1hIiwiaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJ0b29sSW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJ0b29sT3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hIiwiU2VyaWFsaXplZFJ1blN0YXRlIiwicHJvdG9jb2wuTW9kZWxJdGVtIiwiUnVuU3RhdGUiLCJzdGFydGluZ0FnZW50IiwibWF4VHVybnMiLCJjb252ZXJzYXRpb25JZCIsInByZXZpb3VzUmVzcG9uc2VJZCIsImNvdW50Iiwic2VyaWFsaXplZFN0YXRlIiwiaW5jbHVkZVRyYWNpbmdBcGlLZXkiLCJyZXNwb25zZSIsImluaXRpYWxBZ2VudCIsImJ1aWxkUnVuU3RhdGVGcm9tU3RyaW5nIiwicGFyc2luZ0Vycm9yIiwianNvblJlc3VsdCIsImN1cnJlbnRTY2hlbWFWZXJzaW9uIiwic3RhdGVKc29uIiwiYnVpbGRSdW5TdGF0ZUZyb21Kc29uIiwiYWdlbnRNYXAiLCJidWlsZEFnZW50TWFwIiwiY29udGV4dE92ZXJyaWRlIiwiY29udGV4dFN0cmF0ZWd5IiwiY3VycmVudEFnZW50IiwiYWdlbnROYW1lIiwiZGVzZXJpYWxpemVTcGFuIiwiZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlIiwiZGVzZXJpYWxpemVJdGVtIiwiZGVzZXJpYWxpemVQcm9jZXNzZWRSZXNwb25zZSIsInF1ZXVlIiwiQWdlbnQiLCJzZXJpYWxpemVkU3BhbiIsInNwYW5EYXRhIiwicHJldmlvdXNTcGFuIiwic2VyaWFsaXplZE1vZGVsUmVzcG9uc2UiLCJzZXJpYWxpemVkSXRlbSIsInNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZSIsImNvbXB1dGVyVG9vbHMiLCJzaGVsbFRvb2xzIiwiYXBwbHlQYXRjaFRvb2xzIiwiaGFuZG9mZnMiLCJmdW5jdGlvbkNhbGwiLCJjb21wdXRlckFjdGlvbiIsInNoZWxsQWN0aW9uIiwiYXBwbHlQYXRjaEFjdGlvbiIsImFwcHJvdmFsUmVxdWVzdCIsIkRFRkFVTFRfTUFYX1RVUk5TIiwiYXBwbHlDYWxsTW9kZWxJbnB1dEZpbHRlciIsImNhbGxNb2RlbElucHV0RmlsdGVyIiwiaW5wdXRJdGVtcyIsInN5c3RlbUluc3RydWN0aW9ucyIsImNsb25lSW5wdXRJdGVtcyIsImNsb25lZCIsImNsb25lTWFwIiwib3JpZ2luYWxQb29sIiwiZmFsbGJhY2tPcmlnaW5hbHMiLCJyZW1vdmVGcm9tRmFsbGJhY2siLCJvcmlnaW5hbCIsInRha2VGYWxsYmFja09yaWdpbmFsIiwic291cmNlSXRlbXMiLCJtYXRjaGVkQnlDb250ZW50IiwiZmFsbGJhY2siLCJjbG9uZWRGaWx0ZXJlZElucHV0IiwiU2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciIsIm1vZGVsUmVzcG9uc2VzIiwib3JpZ2luYWxJdGVtcyIsImhhc1Jlc3BvbnNlcyIsInNlcnZlckl0ZW1LZXlzIiwibGF0ZXN0UmVzcG9uc2UiLCJyYXdJdGVtS2V5IiwiaW5pdGlhbEl0ZW1zIiwiZGVsaXZlcmVkIiwiZHJvcFJlbWFpbmluZ0luaXRpYWxJbnB1dCIsIm1hcmtGaWx0ZXJlZEl0ZW1zQXNTZW50IiwiYWxsVHVybkl0ZW1zIiwiY3JlYXRlR3VhcmRyYWlsVHJhY2tlciIsInBlbmRpbmciLCJmYWlsZWQiLCJzZXRFcnJvciIsInJ1bkd1YXJkcmFpbHNXaXRoVHJpcHdpcmUiLCJndWFyZHJhaWxBcmdzIiwicmVzdWx0c1RhcmdldCIsIm9uVHJpcHdpcmUiLCJpc1RyaXB3aXJlRXJyb3IiLCJvbkVycm9yIiwiZ3VhcmRyYWlsIiwiYnVpbGRJbnB1dEd1YXJkcmFpbERlZmluaXRpb25zIiwicnVubmVyR3VhcmRyYWlscyIsInNwbGl0SW5wdXRHdWFyZHJhaWxzIiwiYmxvY2tpbmciLCJwYXJhbGxlbCIsInJ1bklucHV0R3VhcmRyYWlscyIsInJ1bk91dHB1dEd1YXJkcmFpbHMiLCJydW5uZXJPdXRwdXRHdWFyZHJhaWxzIiwiYWdlbnRPdXRwdXQiLCJydW5PdXRwdXQiLCJoYXNHcHQ1T25seVNldHRpbmdzIiwic2V0dGluZ3MiLCJwcm92aWRlckRhdGEiLCJzZWxlY3RNb2RlbCIsImFnZW50TW9kZWwiLCJydW5Db25maWdNb2RlbCIsIm1heWJlUmVzZXRUb29sQ2hvaWNlIiwidG9vbFVzZVRyYWNrZXIiLCJtb2RlbFNldHRpbmdzIiwiYWRqdXN0TW9kZWxTZXR0aW5nc0Zvck5vbkdQVDVSdW5uZXJNb2RlbCIsImV4cGxpY3RseU1vZGVsU2V0IiwiYWdlbnRNb2RlbFNldHRpbmdzIiwicnVubmVyTW9kZWwiLCJyZXNvbHZlZE1vZGVsTmFtZSIsImlzTm9uR3B0NVJ1bm5lck1vZGVsIiwiaGFzR3B0NURlZmF1bHRzIiwic3RyaXBHcHQ1T25seVNldHRpbmdzIiwiY29waWVkUHJvdmlkZXJEYXRhIiwiY29waWVkTW9kZWxTZXR0aW5ncyIsImVuc3VyZVRvb2xBdmFpbGFibGUiLCJoYW5kbGVUb29sQ2FsbEFjdGlvbiIsImVycm9yRGF0YSIsInRvb2xzVXNlZCIsImFjdGlvbnMiLCJidWlsZEFjdGlvbiIsInJlc29sdmVkVG9vbCIsInJlc29sdmVGdW5jdGlvbk9ySGFuZG9mZiIsInRvb2xDYWxsIiwiaGFuZG9mZk1hcCIsImZ1bmN0aW9uTWFwIiwiZnVuY3Rpb25Ub29sIiwicHJvY2Vzc01vZGVsUmVzcG9uc2UiLCJydW5IYW5kb2ZmcyIsInJ1bkZ1bmN0aW9ucyIsInJ1bkNvbXB1dGVyQWN0aW9ucyIsInJ1blNoZWxsQWN0aW9ucyIsInJ1bkFwcGx5UGF0Y2hBY3Rpb25zIiwicnVuTUNQQXBwcm92YWxSZXF1ZXN0cyIsImNvbXB1dGVyVG9vbCIsInNoZWxsVG9vbCIsImFwcGx5UGF0Y2hUb29sIiwibWNwVG9vbE1hcCIsIm1jcFNlcnZlckxhYmVsIiwibWNwU2VydmVyVG9vbCIsImlzQWJvcnRFcnJvciIsIkRvbUV4Y2VwdGlvbkN0b3IiLCJnZXRSdW5JdGVtU3RyZWFtRXZlbnROYW1lIiwiZW5xdWV1ZVJ1bkl0ZW1TdHJlYW1FdmVudCIsIml0ZW1OYW1lIiwic3RyZWFtU3RlcEl0ZW1zVG9SdW5SZXN1bHQiLCJhZGRTdGVwVG9SdW5SZXN1bHQiLCJza2lwcGVkSXRlbXMiLCJpc09wZW5BSVJlc3BvbnNlc0NvbXBhY3Rpb25Bd2FyZVNlc3Npb24iLCJzZXNzaW9uIiwiY3JlYXRlU2Vzc2lvblBlcnNpc3RlbmNlVHJhY2tlciIsIlNlc3Npb25QZXJzaXN0ZW5jZVRyYWNrZXJJbXBsIiwic2Vzc2lvbkl0ZW1zIiwiZmlsdGVyZWRJdGVtcyIsInBlbmRpbmdDb3VudHMiLCJjbG9uZUl0ZW1zIiwibmV4dFNuYXBzaG90IiwiY29sbGVjdFBlcnNpc3RhYmxlRmlsdGVyZWRJdGVtcyIsImJ1aWxkU25hcHNob3RGb3JVbmZpbHRlcmVkSXRlbXMiLCJzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uIiwicGVyc2lzdElucHV0Iiwic2F2ZVN0cmVhbUlucHV0VG9TZXNzaW9uIiwiaXRlbXNUb1BlcnNpc3QiLCJidWlsZFNvdXJjZU9jY3VycmVuY2VDb3VudHMiLCJzb3VyY2VPY2N1cnJlbmNlQ291bnRzIiwibmV4dENvdW50IiwiZXhpc3RpbmdTbmFwc2hvdCIsInBlcnNpc3RhYmxlSXRlbXMiLCJjb25zdW1lQW55UGVuZGluZ1dyaXRlU2xvdCIsInJlbWFpbmluZyIsImZpbHRlcmVkSXRlbSIsImFsbG9jYXRlZCIsInBlbmRpbmdPY2N1cnJlbmNlcyIsInNvdXJjZUtleSIsImZpbHRlcmVkS2V5IiwiZmlsdGVyZWRSZW1haW5pbmciLCJmaWx0ZXJlZCIsInNhdmVUb1Nlc3Npb24iLCJzZXNzaW9uSW5wdXRJdGVtcyIsImFscmVhZHlQZXJzaXN0ZWQiLCJuZXdSdW5JdGVtcyIsInBlcnNpc3RSdW5JdGVtc1RvU2Vzc2lvbiIsInNhbml0aXplZElucHV0Iiwibm9ybWFsaXplSXRlbXNGb3JTZXNzaW9uUGVyc2lzdGVuY2UiLCJzYXZlU3RyZWFtUmVzdWx0VG9TZXNzaW9uIiwicHJlcGFyZUlucHV0SXRlbXNXaXRoU2Vzc2lvbiIsInNlc3Npb25JbnB1dENhbGxiYWNrIiwiaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXQiLCJwcmVzZXJ2ZURyb3BwZWROZXdJdGVtcyIsImhpc3RvcnkiLCJuZXdJbnB1dEl0ZW1zIiwiaGlzdG9yeVNuYXBzaG90IiwibmV3SW5wdXRTbmFwc2hvdCIsImhpc3RvcnlDb3VudHMiLCJidWlsZEl0ZW1GcmVxdWVuY3lNYXAiLCJuZXdJbnB1dENvdW50cyIsImhpc3RvcnlSZWZzIiwibmV3SW5wdXRSZWZzIiwiYXBwZW5kZWQiLCJkZWNyZW1lbnRDb3VudCIsImhpc3RvcnlSZW1haW5pbmciLCJuZXdSZW1haW5pbmciLCJwcmVwYXJlZEl0ZW1zIiwic2FuaXRpemVWYWx1ZUZvclNlc3Npb24iLCJzdHJpcFRyYW5zaWVudENhbGxJZHMiLCJ0b0RhdGFVcmxGcm9tQnl0ZXMiLCJtZWRpYVR5cGUiLCJuZXh0Q29udGV4dCIsInNob3VsZFN0cmlwSWQiLCJzaG91bGRTdHJpcElkRm9yVHlwZSIsImV4dHJhSW5wdXRJdGVtcyIsImxhc3RSZXNwb25zZUlkIiwiYWxyZWFkeVBlcnNpc3RlZENvdW50IiwiaXRlbXNUb1NhdmUiLCJydW5Db21wYWN0aW9uT25TZXNzaW9uIiwic2FuaXRpemVkSXRlbXMiLCJyZXNwb25zZUlkIiwiY29tcGFjdGlvbkFyZ3MiLCJjb21wYWN0aW9uUmVzdWx0IiwidXNhZ2UiLCJjb3VudHMiLCJnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlIiwib3V0cHV0TWVzc2FnZSIsImxhc3RJdGVtIiwiZ2V0T3V0cHV0VGV4dCIsIm5vcm1hbGl6ZUJlaGF2aW9yIiwicnVuVG9vbElucHV0R3VhcmRyYWlscyIsIm9uUmVzdWx0IiwibGlzdCIsImJlaGF2aW9yIiwicnVuVG9vbE91dHB1dEd1YXJkcmFpbHMiLCJ0b29sT3V0cHV0IiwiZmluYWxPdXRwdXQiLCJUT09MX0FQUFJPVkFMX1JFSkVDVElPTl9NRVNTQUdFIiwiZ2V0VG9vbENhbGxPdXRwdXRJdGVtIiwibWF5YmVTdHJ1Y3R1cmVkT3V0cHV0cyIsIm5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0cyIsInN0cnVjdHVyZWRJdGVtcyIsImNvbnZlcnRTdHJ1Y3R1cmVkVG9vbE91dHB1dFRvSW5wdXRJdGVtIiwiZXhlY3V0ZUZ1bmN0aW9uVG9vbENhbGxzIiwidG9vbFJ1bnMiLCJydW5uZXIiLCJkZXBzIiwidG9vbFJ1biIsInBhcnNlUmVzdWx0IiwicGFyc2VUb29sQXJndW1lbnRzIiwiYnVpbGRQYXJzZUVycm9yUmVzdWx0IiwiYXBwcm92YWxPdXRjb21lIiwiaGFuZGxlRnVuY3Rpb25BcHByb3ZhbCIsInJ1bkFwcHJvdmVkRnVuY3Rpb25Ub29sIiwicGFyc2VkQXJncyIsImJ1aWxkQXBwcm92YWxSZXF1ZXN0UmVzdWx0IiwiYnVpbGRBcHByb3ZhbFJlamVjdGlvblJlc3VsdCIsImlucHV0R3VhcmRyYWlsUmVzdWx0IiwiZW1pdFRvb2xTdGFydCIsInJlc3VtZVN0YXRlIiwiZW1pdFRvb2xFbmQiLCJmdW5jdGlvblJlc3VsdCIsIm5lc3RlZFJ1blJlc3VsdCIsImNvbnN1bWVBZ2VudFRvb2xSdW5SZXN1bHQiLCJuZXN0ZWRJbnRlcnJ1cHRpb25zIiwiZXJyb3JSZXN1bHQiLCJfcnVuQ29tcHV0ZXJBY3Rpb25BbmRTY3JlZW5zaG90IiwiYWN0aW9uIiwic2NyZWVuc2hvdCIsInRvRXJyb3JNZXNzYWdlIiwicmVzb2x2ZVRvb2xBcHByb3ZhbCIsIm9uQXBwcm92YWwiLCJkZWNpc2lvbiIsImhhbmRsZVRvb2xBcHByb3ZhbERlY2lzaW9uIiwiYnVpbGRSZWplY3Rpb25JdGVtIiwiYXBwcm92YWxTdGF0ZSIsImV4ZWN1dGVTaGVsbEFjdGlvbnMiLCJjdXN0b21Mb2dnZXIiLCJfbG9nZ2VyIiwiYXBwcm92YWxEZWNpc2lvbiIsInJlamVjdGlvbk91dHB1dCIsInNoZWxsT3V0cHV0cyIsInByb3ZpZGVyTWV0YSIsIm1heE91dHB1dExlbmd0aCIsInNoZWxsUmVzdWx0IiwiZXhlY3V0ZUFwcGx5UGF0Y2hPcGVyYXRpb25zIiwic3RhdHVzIiwiZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyIsImltYWdlVXJsIiwiZXhlY3V0ZUhhbmRvZmZDYWxscyIsIm5ld1Jlc3BvbnNlIiwiYWN0dWFsSGFuZG9mZiIsImhhbmRvZmZTcGFuIiwibmV3QWdlbnQiLCJyZXF1ZXN0ZWRBZ2VudHMiLCJpbnB1dEZpbHRlciIsImhhbmRvZmZJbnB1dERhdGEiLCJOT1RfRklOQUxfT1VUUFVUIiwiY29sbGVjdEludGVycnVwdGlvbnMiLCJ0b29sUmVzdWx0cyIsImFkZGl0aW9uYWxJdGVtcyIsImludGVycnVwdGlvbnMiLCJjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzIiwiYWRkaXRpb25hbEludGVycnVwdGlvbnMiLCJmaXJzdFRvb2xSZXN1bHQiLCJ0b29sVXNlQmVoYXZpb3IiLCJzdG9wcGluZ1Rvb2wiLCJzdHJ1Y3R1cmVkIiwibm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXQiLCJpc1JlY29yZCIsImltYWdlU3RyaW5nIiwiaW1hZ2VGaWxlSWQiLCJmYWxsYmFja0ltYWdlTWVkaWFUeXBlIiwiaXNOb25FbXB0eVN0cmluZyIsImltYWdlRmllbGQiLCJpbWFnZU9iaiIsImlubGluZU1lZGlhVHlwZSIsInRvSW5saW5lSW1hZ2VTdHJpbmciLCJjYW5kaWRhdGVJZCIsImZpbGVWYWx1ZSIsIm5vcm1hbGl6ZUZpbGVWYWx1ZSIsImFzRGF0YVVybCIsInJlZmVyZW5jZWRJZCIsImRpcmVjdEZpbGUiLCJub3JtYWxpemVkT2JqZWN0Iiwibm9ybWFsaXplRmlsZU9iamVjdENhbmRpZGF0ZSIsImxlZ2FjeVZhbHVlIiwibm9ybWFsaXplTGVnYWN5RmlsZVZhbHVlIiwiZGF0YVZhbHVlIiwiaGFzU3RyaW5nRGF0YSIsImhhc0JpbmFyeURhdGEiLCJmaWxlbmFtZSIsImhhbmRsZUhvc3RlZE1jcEFwcHJvdmFscyIsInJlcXVlc3RzIiwiZnVuY3Rpb25SZXN1bHRzIiwiYXBwZW5kSWZOZXciLCJyZXNvbHZlQXBwcm92YWwiLCJwZW5kaW5nQXBwcm92YWxzIiwicGVuZGluZ0FwcHJvdmFsSWRzIiwidG9vbERhdGEiLCJhcHByb3ZhbFJlcXVlc3RJZCIsImFwcHJvdmFsUmVzdWx0IiwiYXBwcm92YWxSZXNwb25zZURhdGEiLCJBUFBST1ZBTF9JVEVNX1RZUEVTIiwiaXNIb3N0ZWRNY3BBcHByb3ZhbEl0ZW0iLCJyZXNvbHZlQXBwcm92YWxTdGF0ZSIsImlzQXBwcm92YWxJdGVtTGlrZSIsIml0ZW1UeXBlIiwiZ2V0QXBwcm92YWxJZGVudGl0eSIsImJ1aWxkQXBwZW5kQ29udGV4dCIsImV4aXN0aW5nSXRlbXMiLCJzZWVuSXRlbXMiLCJzZWVuQXBwcm92YWxJZGVudGl0aWVzIiwiaWRlbnRpdHkiLCJhcHBlbmRSdW5JdGVtSWZOZXciLCJidWlsZEFwcHJvdmVkQ2FsbElkU2V0IiwiY2FsbElkcyIsImNvbGxlY3RDb21wbGV0ZWRDYWxsSWRzIiwiY29tcGxldGVkIiwiZmlsdGVyQWN0aW9uc0J5QXBwcm92YWwiLCJhbGxvd2VkQ2FsbElkcyIsImZpbHRlclBlbmRpbmdBY3Rpb25zIiwiaGFzQ2FsbElkIiwidHJ1bmNhdGVGb3JEZXZlbG9wZXIiLCJmb3JtYXRGaW5hbE91dHB1dFR5cGVFcnJvciIsInouWm9kRXJyb3IiLCJpc3N1ZVBhdGhQYXJ0cyIsImlzc3VlUGF0aCIsInJlc29sdmVJbnRlcnJ1cHRlZFR1cm4iLCJvcmlnaW5hbFByZVN0ZXBJdGVtcyIsInByb2Nlc3NlZFJlc3BvbnNlIiwiZnVuY3Rpb25DYWxsSWRzIiwiY29tcGxldGVkRnVuY3Rpb25DYWxsSWRzIiwiY29tcGxldGVkU2hlbGxDYWxsSWRzIiwiY29tcGxldGVkQXBwbHlQYXRjaENhbGxJZHMiLCJwZW5kaW5nQXBwcm92YWxJdGVtcyIsInBlbmRpbmdBcHByb3ZhbElkZW50aXRpZXMiLCJmdW5jdGlvblRvb2xSdW5zIiwicnVuIiwiaXNBcHByb3ZlZENhbGwiLCJpc1BlbmRpbmdOZXN0ZWQiLCJzaGVsbFJ1bnMiLCJwZW5kaW5nQ29tcHV0ZXJBY3Rpb25zIiwiYXBwbHlQYXRjaFJ1bnMiLCJjb21wdXRlclJlc3VsdHMiLCJzaGVsbFJlc3VsdHMiLCJhcHBseVBhdGNoUmVzdWx0cyIsIm5ld0l0ZW1zIiwiYXBwZW5kQ29udGV4dCIsImhvc3RlZE1jcEFwcHJvdmFscyIsImtlcHRBcHByb3ZhbEl0ZW1zIiwicmVtb3ZlZEFwcHJvdmFsQ291bnQiLCJjb21wbGV0ZWRTdGVwIiwibWF5YmVDb21wbGV0ZVR1cm5Gcm9tVG9vbFJlc3VsdHMiLCJyZXNvbHZlVHVybkFmdGVyTW9kZWxSZXNwb25zZSIsIm1lc3NhZ2VJdGVtcyIsInBvdGVudGlhbEZpbmFsT3V0cHV0Iiwib3V0cHV0RXJyb3JNZXNzYWdlIiwiX3J1bm5lciIsInRvb2xPdXRjb21lIiwiaXNDb21wdXRlckluc3RhbmNlIiwic2VyaWFsaXplVG9vbCIsInNlcmlhbGl6ZUhhbmRvZmYiLCJnZXRUcmFjaW5nIiwidHJhY2luZ0Rpc2FibGVkIiwidHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSIsInJlYmFzZVNwYW5DaGFpbiIsInJlYmFzZWRTcGFuIiwiYXBwbHlUcmFjZU92ZXJyaWRlcyIsIm92ZXJyaWRlcyIsInRyYWNlSWRPdmVycmlkZSIsInRyYWNpbmdBcGlLZXlPdmVycmlkZSIsImVuc3VyZUFnZW50U3BhbiIsImV4aXN0aW5nU3BhbiIsImhhbmRvZmZOYW1lcyIsInByZXBhcmVBZ2VudEFydGlmYWN0cyIsImNhcGFiaWxpdGllcyIsImNvbGxlY3RBZ2VudENhcGFiaWxpdGllcyIsIndhcm1VcENvbXB1dGVyVG9vbHMiLCJwcmVwYXJlVHVybiIsImlzUmVzdW1lZFN0YXRlIiwicHJlc2VydmVUdXJuUGVyc2lzdGVuY2VPblJlc3VtZSIsImNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4iLCJzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyIiwiaW5wdXRHdWFyZHJhaWxEZWZzIiwiZ3VhcmRyYWlsSGFuZGxlcnMiLCJlbWl0QWdlbnRTdGFydCIsImFydGlmYWN0cyIsImlzUmVzdW1pbmdGcm9tSW50ZXJydXB0aW9uIiwiYmVnaW5UdXJuIiwicGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlIiwicnVuSW5wdXRHdWFyZHJhaWxzRm9yVHVybiIsInR1cm5JbnB1dCIsImhhbmRsZXJzIiwiZ3VhcmRyYWlsRGVmcyIsInJlc3VtaW5nVHVybkluUHJvZ3Jlc3MiLCJhcHBseVR1cm5SZXN1bHQiLCJ0dXJuUmVzdWx0IiwicmVzZXRUdXJuUGVyc2lzdGVuY2UiLCJvblN0ZXBJdGVtcyIsInJlc3VtZUludGVycnVwdGVkVHVybiIsImhhbmRsZUludGVycnVwdGVkT3V0Y29tZSIsIm91dGNvbWUiLCJzZXRDb250aW51aW5nSW50ZXJydXB0ZWRUdXJuIiwiX2V4aGF1c3RpdmUiLCJhc3Npc3RhbnQiLCJidWlsZFJ1bkRhdGEiLCJmb3JtYXRGaW5hbE91dHB1dCIsImNyZWF0ZUZpbmFsT3V0cHV0SXRlbSIsIm91dHB1dFRleHQiLCJ0cnlIYW5kbGVSdW5FcnJvciIsImVycm9ySGFuZGxlcnMiLCJvdXRwdXRHdWFyZHJhaWxEZWZzIiwiZW1pdEFnZW50RW5kIiwic3RyZWFtUmVzdWx0IiwiaGFuZGxlclJlc3VsdCIsImluY2x1ZGVJbkhpc3RvcnkiLCJSdW5uZXIiLCJfUnVubmVyX2luc3RhbmNlcyIsInJlc29sdmVkT3B0aW9ucyIsImhhc0NhbGxNb2RlbElucHV0RmlsdGVyIiwidHJhY2luZ0NvbmZpZyIsInRyYWNlT3ZlcnJpZGVzIiwiZWZmZWN0aXZlT3B0aW9ucyIsInJlc3VtaW5nRnJvbVN0YXRlIiwicmVzdW1lZENvbnZlcnNhdGlvbklkIiwicmVzdW1lZFByZXZpb3VzUmVzcG9uc2VJZCIsInNlc3Npb25QZXJzaXN0ZW5jZSIsInByZXBhcmVkSW5wdXQiLCJwcmVwYXJlZCIsImVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkIiwiZXhlY3V0ZVJ1biIsInJ1bkluZGl2aWR1YWxTdHJlYW1fZm4iLCJydW5SZXN1bHQiLCJydW5JbmRpdmlkdWFsTm9uU3RyZWFtX2ZuIiwiYXBwbGllZCIsInJlc29sdmVNb2RlbEZvckFnZW50X2ZuIiwic2VsZWN0ZWRNb2RlbCIsInNlc3Npb25JbnB1dFVwZGF0ZSIsInJlc29sdmVkQ29udmVyc2F0aW9uSWQiLCJyZXNvbHZlZFByZXZpb3VzUmVzcG9uc2VJZCIsImludGVycnVwdGVkT3V0Y29tZSIsInNob3VsZFJldHVybiIsInNob3VsZENvbnRpbnVlIiwid2FzQ29udGludWluZ0ludGVycnVwdGVkVHVybiIsImd1YXJkcmFpbFRyYWNrZXIiLCJwcmV2aW91c1R1cm4iLCJwcmV2aW91c1BlcnNpc3RlZENvdW50IiwicHJldmlvdXNHZW5lcmF0ZWRDb3VudCIsInByZXBhcmVkQ2FsbCIsInByZXBhcmVNb2RlbENhbGxfZm4iLCJjdXJyZW50U3RlcCIsImhhbmRsZWRSZXN1bHQiLCJydW5TdHJlYW1Mb29wX2ZuIiwic2VudElucHV0VG9Nb2RlbCIsInN0cmVhbUlucHV0UGVyc2lzdGVkIiwicGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQiLCJhd2FpdEd1YXJkcmFpbHNBbmRQZXJzaXN0SW5wdXQiLCJwcmVwYXJlZFR1cm4iLCJkZWxheVN0cmVhbUlucHV0UGVyc2lzdGVuY2UiLCJmaW5hbFJlc3BvbnNlIiwiaW5wdXRNYXJrZWQiLCJtYXJrSW5wdXRPbmNlIiwicHJlVG9vbEl0ZW1zIiwic3RyZWFtT3B0aW9ucyIsInByb21wdCIsIm1vZGVsSW5wdXQiLCJwZXJzaXN0ZWRJdGVtcyIsImZpbHRlckFwcGxpZWQiLCJhZ2VudFRvb2xSdW5SZXN1bHRzIiwic2F2ZUFnZW50VG9vbFJ1blJlc3VsdCIsIkFnZW50QXNUb29sTmVlZEFwcHJvdmFsU2NoYW1lIiwiX0FnZW50Iiwib3V0cHV0VHlwZXMiLCJ0b29sRGVzY3JpcHRpb24iLCJjdXN0b21PdXRwdXRFeHRyYWN0b3IiLCJydW5Db25maWciLCJydW5PcHRpb25zIiwib25TdHJlYW0iLCJldmVudEhhbmRsZXJzIiwiZW1pdEV2ZW50Iiwic3BlY2lmaWMiLCJ3aWxkY2FyZCIsImFnZW50VG9vbCIsInJlc3VtZUNvbnRleHRTdHJhdGVneSIsInJlc3VtZUNvbnRleHQiLCJydW5JbnB1dCIsInNob3VsZFN0cmVhbSIsInN0cmVhbVBheWxvYWQiLCJjb21wbGV0ZWRSZXN1bHQiLCJ1c2VzU3RvcEF0VG9vbE5hbWVzIiwiZmluYWxPdXRwdXRUZXh0IiwicmF3UmVzcG9uc2VzIiwicmF3T3V0cHV0VGV4dCIsIm5vcm1hbGl6ZWRSYXdPdXRwdXRUZXh0Iiwic2V0IiwiZW5hYmxlZFRvb2xzIiwibWF5YmVJc0VuYWJsZWQiLCJiYXNlNjRUb0FycmF5QnVmZmVyIiwiYmluYXJ5U3RyaW5nIiwiYXJyYXlCdWZmZXJUb0Jhc2U2NCIsImFycmF5QnVmZmVyIiwiZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlIiwibGFzdENvbnRlbnRJdGVtIiwiZGlmZlJlYWx0aW1lSGlzdG9yeSIsIm9sZEhpc3RvcnkiLCJuZXdIaXN0b3J5IiwicmVtb3ZhbHMiLCJhZGRpdGlvbnMiLCJvbGRJdGVtIiwidXBkYXRlcyIsImhhc1dlYlJUQ1N1cHBvcnQiLCJyZW1vdmVBdWRpb0Zyb21Db250ZW50IiwicHJlc2VydmVBc3Npc3RhbnRBdWRpb1RyYW5zY3JpcHRzIiwibWVyZ2VkQ29udGVudCIsInByZXZpb3VzRW50cnkiLCJ1cGRhdGVSZWFsdGltZUhpc3RvcnkiLCJzaG91bGRJbmNsdWRlQXVkaW9EYXRhIiwidXBkYXRlZENvbnRlbnQiLCJuZXdFdmVudCIsImV4aXN0aW5nSW5kZXgiLCJleGlzdGluZ0l0ZW0iLCJtZXJnZWRFdmVudCIsImlkeCIsInByZXZJbmRleCIsIkhFQURFUlMiLCJXRUJTT0NLRVRfTUVUQSIsInJlYWx0aW1lQXBwcm92YWxJdGVtVG9BcHByb3ZhbEl0ZW0iLCJhcHByb3ZhbEl0ZW1Ub1JlYWx0aW1lQXBwcm92YWxJdGVtIiwiaXRlbUlkIiwic2VydmVyTGFiZWwiLCJSZWFsdGltZUFnZW50IiwiZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyIsImRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsIiwicG9saWN5SGludElucHV0IiwiYmFzZUd1YXJkcmFpbCIsInBvbGljeUhpbnQiLCJnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZSIsImlzRGVmaW5lZCIsImlzRGVwcmVjYXRlZENvbmZpZyIsInRvTmV3U2Vzc2lvbkNvbmZpZyIsImlucHV0Q29uZmlnIiwibm9ybWFsaXplQXVkaW9Gb3JtYXQiLCJyZXF1ZXN0ZWRPdXRwdXRWb2ljZSIsIm91dHB1dENvbmZpZyIsIl9oIiwiX2ciLCJyZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hIiwicmVhbHRpbWVUb29sQ2FsbEl0ZW0iLCJyZWFsdGltZU1jcENhbGxJdGVtIiwicmVhbHRpbWVNY3BDYWxsQXBwcm92YWxSZXF1ZXN0SXRlbSIsInJlYWx0aW1lUmVzcG9uc2UiLCJ6XG4gICAgICAgICAgICAub2JqZWN0IiwielxuICAgICAgICAuZW51bSIsImNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVNjaGVtYSIsImNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1BZGRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbURvbmVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkRlbHRhRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25GYWlsZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVRydW5jYXRlRXZlbnRTY2hlbWEiLCJlcnJvckV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDbGVhckV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNvbW1pdHRlZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEiLCJvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSIsIm91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hIiwib3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEiLCJyYXRlTGltaXRzVXBkYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlQ29udGVudFBhcnREb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNyZWF0ZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSIsInNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEiLCJzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDYW5jZWxFdmVudFNjaGVtYSIsInJlc3BvbnNlQ3JlYXRlRXZlbnRTY2hlbWEiLCJzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEiLCJtY3BMaXN0VG9vbHNJblByb2dyZXNzRXZlbnRTY2hlbWEiLCJtY3BMaXN0VG9vbHNDb21wbGV0ZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZU1jcENhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZU1jcENhbGxJblByb2dyZXNzRXZlbnRTY2hlbWEiLCJyZXNwb25zZU1jcENhbGxDb21wbGV0ZWRFdmVudFNjaGVtYSIsIm1jcExpc3RUb29sc0ZhaWxlZEV2ZW50U2NoZW1hIiwiZ2VuZXJpY0V2ZW50U2NoZW1hIiwicmVhbHRpbWVTZXJ2ZXJFdmVudFNjaGVtYSIsInBhcnNlUmVhbHRpbWVFdmVudCIsInJhdyIsImdlbmVyaWNQYXJzZWQiLCJERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTCIsIkRFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHIiwiX09wZW5BSVJlYWx0aW1lQmFzZSIsIl9hcGlLZXkiLCJfdHJhY2luZ0NvbmZpZyIsIl9yYXdTZXNzaW9uQ29uZmlnIiwiYXBpS2V5IiwiaXNHZW5lcmljIiwiaW5wdXRUb2tlbnMiLCJvdXRwdXRUb2tlbnMiLCJ0b3RhbFRva2VucyIsInByZXZpb3VzSXRlbUlkIiwibWNwQXBwcm92YWxSZXF1ZXN0IiwibWNwQ2FsbCIsInJlYWx0aW1lSXRlbSIsIm90aGVyRXZlbnREYXRhIiwidHJpZ2dlclJlc3BvbnNlIiwiaW1hZ2UiLCJub2lzZVJlZHVjdGlvbk92ZXJyaWRlIiwidHJhbnNjcmlwdGlvbk92ZXJyaWRlIiwidHVybkRldGVjdGlvbk92ZXJyaWRlIiwic2Vzc2lvbkRhdGEiLCJfaiIsIl9pIiwiX2wiLCJfbiIsIl9tIiwiX3AiLCJfbyIsIl9yIiwiX3EiLCJfdCIsIl9zIiwiX3YiLCJfdSIsIl94IiwiX3ciLCJfeiIsIl95IiwiX0IiLCJfQSIsInBpY2tEZWZpbmVkIiwiY3JlYXRlUmVzcG9uc2UiLCJjcmVhdGVfcmVzcG9uc2UiLCJlYWdlcm5lc3MiLCJpbnRlcnJ1cHRSZXNwb25zZSIsImludGVycnVwdF9yZXNwb25zZSIsInByZWZpeFBhZGRpbmdNcyIsInByZWZpeF9wYWRkaW5nX21zIiwic2lsZW5jZUR1cmF0aW9uTXMiLCJzaWxlbmNlX2R1cmF0aW9uX21zIiwidGhyZXNob2xkIiwiaWRsZVRpbWVvdXRNcyIsImlkbGVfdGltZW91dF9tcyIsInN0YXJ0UmVzcG9uc2UiLCJhdWRpbyIsImNvbW1pdCIsInJlbW92YWxJZHMiLCJ1cGRhdGUiLCJhZGRpdGlvbnNBbmRVcGRhdGVzIiwiYWRkaXRpb24iLCJpdGVtRW50cnkiLCJhcHByb3ZlZCIsIk9wZW5BSVJlYWx0aW1lQmFzZSIsIk9wZW5BSVJlYWx0aW1lV2ViUlRDIiwiX3N0YXRlIiwiX3VzZUluc2VjdXJlQXBpS2V5IiwiX29uZ29pbmdSZXNwb25zZSIsIl9tdXRlZCIsImJhc2VVcmwiLCJpc0NsaWVudEtleSIsInVzZXJTZXNzaW9uQ29uZmlnIiwiY29ubmVjdGlvblVybCIsInBlZXJDb25uZWN0aW9uIiwiZGF0YUNoYW5uZWwiLCJhdHRhY2hDb25uZWN0aW9uU3RhdGVIYW5kbGVyIiwiY29ubmVjdGlvbiIsImF1ZGlvRWxlbWVudCIsIm9yaWdpbmFsUGVlckNvbm5lY3Rpb24iLCJvZmZlciIsInNkcFJlc3BvbnNlIiwiYW5zd2VyIiwibXV0ZWQiLCJzZW5kZXIiLCJXZWJTb2NrZXQiLCJPcGVuQUlSZWFsdGltZVdlYlNvY2tldCIsIl9PcGVuQUlSZWFsdGltZVdlYlNvY2tldF9pbnN0YW5jZXMiLCJfZGVmYXVsdFVybCIsIl9jdXJyZW50SXRlbUlkIiwiX2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCIsIl9jcmVhdGVXZWJTb2NrZXQiLCJfc2tpcE9wZW5FdmVudExpc3RlbmVycyIsImF1ZGlvRXZlbnQiLCJyZXNldEF1ZGlvUGxheWJhY2tTdGF0ZV9mbiIsInNlc3Npb25Db25maWciLCJzZXR1cFdlYlNvY2tldF9mbiIsImVsYXBzZWRUaW1lIiwiY2FuY2VsT25nb2luZ1Jlc3BvbnNlIiwiYXVkaW9fZW5kX21zIiwid3MiLCJ3ZWJzb2NrZXRBcmd1bWVudHMiLCJvblNvY2tldE9wZW5SZWFkeSIsImJ1ZmYiLCJmbXQiLCJyYXRlIiwiYXV0b21hdGljUmVzcG9uc2VDYW5jZWxsYXRpb25FbmFibGVkIiwiQkFDS0dST1VORF9SRVNVTFRfU1lNQk9MIiwiYmFja2dyb3VuZFJlc3VsdCIsImlzQmFja2dyb3VuZFJlc3VsdCIsImlzVmFsaWRSZWFsdGltZVRvb2wiLCJ0b1JlYWx0aW1lVG9vbERlZmluaXRpb24iLCJzZXJ2ZXJVcmwiLCJjbG9uZURlZmF1bHRTZXNzaW9uQ29uZmlnIiwiX1JlYWx0aW1lU2Vzc2lvbiIsIl9SZWFsdGltZVNlc3Npb25faW5zdGFuY2VzIiwiX3RyYW5zcG9ydCIsIl9jdXJyZW50QWdlbnQiLCJfY3VycmVudFRvb2xzIiwiX291dHB1dEd1YXJkcmFpbHMiLCJfb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MiLCJfdHJhbnNjcmliZWRUZXh0RGVsdGFzIiwiX2hpc3RvcnkiLCJfc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSIsIl9pbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsIiwiX2F1ZGlvU3RhcnRlZCIsIl9hbGxNY3BUb29sc0J5U2VydmVyIiwiX2F2YWlsYWJsZU1jcFRvb2xzIiwiX2xhc3RTZXNzaW9uQ29uZmlnIiwiX2F1dG9tYXRpY2FsbHlUcmlnZ2VyUmVzcG9uc2VGb3JNY3BUb29sQ2FsbHMiLCJzZXRDdXJyZW50QWdlbnRfZm4iLCJnZXRTZXNzaW9uQ29uZmlnX2ZuIiwic2V0RXZlbnRMaXN0ZW5lcnNfZm4iLCJ1cGRhdGVkSGlzdG9yeSIsImhhbmRsZUZ1bmN0aW9uVG9vbENhbGxfZm4iLCJoYW5kb2ZmVG9vbHMiLCJoYXNUb29sc0RlZmluZWQiLCJoYXNIYW5kb2Zmc0RlZmluZWQiLCJ1cGRhdGVBdmFpbGFibGVNY3BUb29sc19mbiIsImFkZGl0aW9uYWxDb25maWciLCJvdmVycmlkZXNDb25maWciLCJvcHRpb25zQ29uZmlnIiwiaW5zdHJ1Y3Rpb25zIiwiZ2V0QXVkaW9PdXRwdXRWb2ljZU92ZXJyaWRlIiwiYXVkaW9Db25maWciLCJhdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUiLCJ0b3BMZXZlbFZvaWNlT3ZlcnJpZGUiLCJyZXNvbHZlZFZvaWNlIiwiZnVsbENvbmZpZyIsImhhbmRsZUhhbmRvZmZfZm4iLCJndWFyZGVkUmVzdWx0IiwiaGFuZGxlRnVuY3Rpb25DYWxsX2ZuIiwiZW5hYmxlZEhhbmRvZmZzIiwiZnVuY3Rpb25Ub29sTWFwIiwicG9zc2libGVIYW5kb2ZmIiwicnVuT3V0cHV0R3VhcmRyYWlsc19mbiIsImZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQiLCJmZWVkYmFja1RleHQiLCJjb21wbGV0ZWRFdmVudCIsInRleHRPdXRwdXQiLCJsYXN0UnVuSW5kZXgiLCJsYXN0SXRlbUlkIiwiZGVsdGEiLCJuZXdUZXh0IiwibmV3UnVuSW5kZXgiLCJpc05ldyIsImFkZGVkSXRlbSIsImFjdGl2ZU1jcENvbmZpZ3MiLCJhbGxvd2VkRnJvbUNvbmZpZyIsImNmZyIsImRlZHVwQnlOYW1lIiwicHJldiIsIlJlYWx0aW1lU2Vzc2lvbiIsIk9wZW5BSVJlYWx0aW1lU0lQIiwiX2F1ZGlvIiwidXRpbHMiLCJ1dGlsSW1wb3J0LmJhc2U2NFRvQXJyYXlCdWZmZXIiLCJ1dGlsSW1wb3J0LmFycmF5QnVmZmVyVG9CYXNlNjQiLCJ1dGlsSW1wb3J0LmdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSJdLCJtYXBwaW5ncyI6IjJsQ0FDTyxNQUFNQSxFQUFXLENBRXBCLFFBQVcsT0FLZixFQ1JPLGVBQWVDLEdBQVlDLEVBQUksQ0FDbEMsR0FBSSxDQUNBLE1BQU8sQ0FBQyxLQUFNLE1BQU1BLEdBQUksQ0FDNUIsT0FDT0MsRUFBTyxDQUNWLE1BQU8sQ0FBQ0EsRUFBTyxJQUFJLENBQ3ZCLENBQ0osQ0NLTyxTQUFTQyxHQUFjQyxFQUFTLENBQ25DLE1BQU1DLEVBQWdCLE9BQU8sT0FBT0QsQ0FBTyxFQUFFLE9BQVFFLEdBQU0sT0FBT0EsR0FBTSxRQUFRLEVBSWhGLE9BSGUsT0FBTyxRQUFRRixDQUFPLEVBQ2hDLE9BQU8sQ0FBQyxDQUFDRyxFQUFHQyxDQUFDLElBQU1ILEVBQWMsUUFBUSxDQUFDRSxDQUFDLElBQU0sRUFBRSxFQUNuRCxJQUFJLENBQUMsQ0FBQ0MsRUFBR0YsQ0FBQyxJQUFNQSxDQUFDLENBRTFCLENDaEJPLElBQUFHLEdBQUEsS0FBbUIsQ0FDdEIsYUFBYyxDQUNWLEtBQUssS0FBTyxJQUFJLElBQ2hCLEtBQUssT0FBUyxJQUFJLEdBQ3RCLENBQ0EsSUFBSUMsS0FBV0MsRUFBTyxDQUNsQixNQUFNQyxFQUFPRCxFQUFNLENBQUMsRUFFcEIsR0FEQSxLQUFLLEtBQUssSUFBSUQsRUFBUUUsQ0FBSSxFQUN0QkEsR0FBUSxPQUFPQSxHQUFTLFVBQVksT0FBUUEsRUFBTSxDQUNsRCxHQUFJLEtBQUssT0FBTyxJQUFJQSxFQUFLLEVBQUUsRUFDdkIsTUFBTSxJQUFJLE1BQU0sTUFBTUEsRUFBSyxFQUFFLGlDQUFpQyxFQUVsRSxLQUFLLE9BQU8sSUFBSUEsRUFBSyxHQUFJRixDQUFNLENBQ25DLENBQ0EsT0FBTyxJQUNYLENBQ0EsT0FBUSxDQUNKLFlBQUssS0FBTyxJQUFJLElBQ2hCLEtBQUssT0FBUyxJQUFJLElBQ1gsSUFDWCxDQUNBLE9BQU9BLEVBQVEsQ0FDWCxNQUFNRSxFQUFPLEtBQUssS0FBSyxJQUFJRixDQUFNLEVBQ2pDLE9BQUlFLEdBQVEsT0FBT0EsR0FBUyxVQUFZLE9BQVFBLEdBQzVDLEtBQUssT0FBTyxPQUFPQSxFQUFLLEVBQUUsRUFFOUIsS0FBSyxLQUFLLE9BQU9GLENBQU0sRUFDaEIsSUFDWCxDQUNBLElBQUlBLEVBQVEsQ0FHUixNQUFNRyxFQUFJSCxFQUFPLEtBQUssT0FDdEIsR0FBSUcsRUFBRyxDQUNILE1BQU1DLEVBQUssQ0FBRSxHQUFJLEtBQUssSUFBSUQsQ0FBQyxHQUFLLENBQUEsQ0FBRyxFQUNuQyxjQUFPQyxFQUFHLEdBQ0gsQ0FBRSxHQUFHQSxFQUFJLEdBQUcsS0FBSyxLQUFLLElBQUlKLENBQU0sQ0FBQyxDQUM1QyxDQUNBLE9BQU8sS0FBSyxLQUFLLElBQUlBLENBQU0sQ0FDL0IsQ0FDQSxJQUFJQSxFQUFRLENBQ1IsT0FBTyxLQUFLLEtBQUssSUFBSUEsQ0FBTSxDQUMvQixDQUNKLEVBRU8sU0FBU0ssSUFBVyxDQUN2QixPQUFPLElBQUlDLEVBQ2YsQ0FDTyxNQUFNQyxHQUErQkYsR0FBUSxFQ2hEN0MsTUFBTUcsRUFBb0IsQ0FDN0IsWUFBWUMsRUFBUSxDQUNoQixLQUFLLFFBQVUsRUFDZixLQUFLLGtCQUFtQkEsR0FBQSxZQUFBQSxFQUFRLFdBQVlGLEdBQzVDLEtBQUssUUFBU0UsR0FBQSxZQUFBQSxFQUFRLFNBQVUsZ0JBQ2hDLEtBQUssaUJBQWtCQSxHQUFBLFlBQUFBLEVBQVEsa0JBQW1CLFFBQ2xELEtBQUssVUFBV0EsR0FBQSxZQUFBQSxFQUFRLFlBQWEsSUFBTSxDQUFFLEdBQzdDLEtBQUssSUFBS0EsR0FBQSxZQUFBQSxFQUFRLEtBQU0sU0FDeEIsS0FBSyxLQUFPLElBQUksR0FDcEIsQ0FDQSxRQUFRVCxFQUFRVSxFQUFVLENBQUUsS0FBTSxHQUFJLFdBQVksQ0FBQSxHQUFNLFdBQ3BELElBQUlDLEVBQ0osTUFBTUMsRUFBTVosRUFBTyxLQUFLLElBQ2xCYSxFQUFZLENBQ2QsS0FBTSxPQUNOLElBQUssTUFDTCxTQUFVLFlBQ1YsWUFBYSxjQUNiLE1BQU8sRUFDbkIsRUFFY0MsRUFBTyxLQUFLLEtBQUssSUFBSWQsQ0FBTSxFQUNqQyxHQUFJYyxFQUNBLE9BQUFBLEVBQUssUUFFV0osRUFBUSxXQUFXLFNBQVNWLENBQU0sSUFFOUNjLEVBQUssTUFBUUosRUFBUSxNQUVsQkksRUFBSyxPQUdoQixNQUFNQyxFQUFTLENBQUUsT0FBUSxDQUFBLEVBQUksTUFBTyxFQUFHLE1BQU8sT0FBVyxLQUFNTCxFQUFRLElBQUksRUFDM0UsS0FBSyxLQUFLLElBQUlWLEVBQVFlLENBQU0sRUFFNUIsTUFBTUMsR0FBaUJDLEdBQUFOLEVBQUFYLEVBQU8sTUFBSyxlQUFaLFlBQUFpQixFQUFBLEtBQUFOLEdBQ3ZCLEdBQUlLLEVBQ0FELEVBQU8sT0FBU0MsTUFFZixDQUNELE1BQU1QLEVBQVMsQ0FDWCxHQUFHQyxFQUNILFdBQVksQ0FBQyxHQUFHQSxFQUFRLFdBQVlWLENBQU0sRUFDMUMsS0FBTVUsRUFBUSxJQUM5QixFQUNrQlEsRUFBU2xCLEVBQU8sS0FBSyxPQUMzQixHQUFJa0IsRUFFQUgsRUFBTyxJQUFNRyxFQUNiLEtBQUssUUFBUUEsRUFBUVQsQ0FBTSxFQUMzQixLQUFLLEtBQUssSUFBSVMsQ0FBTSxFQUFFLFNBQVcsT0FFaEMsQ0FDRCxNQUFNQyxFQUFRSixFQUFPLE9BQ3JCLE9BQVFILEVBQUksS0FBSSxDQUNaLElBQUssU0FBVSxDQUNYLE1BQU1RLEVBQU9ELEVBQ2JDLEVBQUssS0FBTyxTQUNaLEtBQU0sQ0FBRSxRQUFBQyxFQUFTLFFBQUFDLEVBQVMsT0FBQUMsRUFBUSxTQUFBQyxFQUFVLGdCQUFBQyxDQUFlLEVBQUt6QixFQUFPLEtBQ2xFLElBYUwsR0FaSSxPQUFPcUIsR0FBWSxXQUNuQkQsRUFBSyxVQUFZQyxHQUNqQixPQUFPQyxHQUFZLFdBQ25CRixFQUFLLFVBQVlFLEdBRWpCQyxJQUNBSCxFQUFLLE9BQVNQLEVBQVVVLENBQU0sR0FBS0EsRUFDL0JILEVBQUssU0FBVyxJQUNoQixPQUFPQSxFQUFLLFFBRWhCSyxJQUNBTCxFQUFLLGdCQUFrQkssR0FDdkJELEdBQVlBLEVBQVMsS0FBTyxFQUFHLENBQy9CLE1BQU1FLEVBQVUsQ0FBQyxHQUFHRixDQUFRLEVBQ3hCRSxFQUFRLFNBQVcsRUFDbkJOLEVBQUssUUFBVU0sRUFBUSxDQUFDLEVBQUUsT0FDckJBLEVBQVEsT0FBUyxJQUN0QlgsRUFBTyxPQUFPLE1BQVEsQ0FDbEIsR0FBR1csRUFBUSxJQUFLQyxJQUFXLENBQ3ZCLEdBQUksS0FBSyxTQUFXLFVBQVksQ0FBRSxLQUFNLFFBQVEsRUFBSyxHQUNyRCxRQUFTQSxFQUFNLE1BQ3ZELEVBQXNDLENBQ3RDLEVBRXdCLENBQ0EsS0FDSixDQUNBLElBQUssU0FBVSxDQUNYLE1BQU1QLEVBQU9ELEVBQ1AsQ0FBRSxRQUFBRSxFQUFTLFFBQUFDLEVBQVMsT0FBQUMsRUFBUSxXQUFBSyxFQUFZLGlCQUFBQyxFQUFrQixpQkFBQUMsQ0FBZ0IsRUFBSzlCLEVBQU8sS0FBSyxJQUM3RixPQUFPdUIsR0FBVyxVQUFZQSxFQUFPLFNBQVMsS0FBSyxFQUNuREgsRUFBSyxLQUFPLFVBRVpBLEVBQUssS0FBTyxTQUNaLE9BQU9VLEdBQXFCLFdBQzVCVixFQUFLLGlCQUFtQlUsR0FDeEIsT0FBT1QsR0FBWSxXQUNuQkQsRUFBSyxRQUFVQyxFQUNYLE9BQU9TLEdBQXFCLFdBQ3hCQSxHQUFvQlQsRUFDcEIsT0FBT0QsRUFBSyxRQUVaLE9BQU9BLEVBQUssbUJBR3BCLE9BQU9TLEdBQXFCLFdBQzVCVCxFQUFLLGlCQUFtQlMsR0FDeEIsT0FBT1AsR0FBWSxXQUNuQkYsRUFBSyxRQUFVRSxFQUNYLE9BQU9PLEdBQXFCLFdBQ3hCQSxHQUFvQlAsRUFDcEIsT0FBT0YsRUFBSyxRQUVaLE9BQU9BLEVBQUssbUJBR3BCLE9BQU9RLEdBQWUsV0FDdEJSLEVBQUssV0FBYVEsR0FDdEIsS0FDSixDQUNBLElBQUssVUFBVyxDQUNaLE1BQU1SLEVBQU9ELEVBQ2JDLEVBQUssS0FBTyxVQUNaLEtBQ0osQ0FDQSxJQUFLLFNBQVUsQ0FDWCxHQUFJLEtBQUssa0JBQW9CLFFBQ3pCLE1BQU0sSUFBSSxNQUFNLDZDQUE2QyxFQUVqRSxLQUNKLENBQ0EsSUFBSyxTQUFVLENBQ1gsR0FBSSxLQUFLLGtCQUFvQixRQUN6QixNQUFNLElBQUksTUFBTSw4Q0FBOEMsRUFFbEUsS0FDSixDQUNBLElBQUssT0FBUSxDQUNURCxFQUFNLEtBQU8sT0FDYixLQUNKLENBQ0EsSUFBSyxNQUNELE1BRUosSUFBSyxVQUNELE1BRUosSUFBSyxZQUFhLENBQ2QsR0FBSSxLQUFLLGtCQUFvQixRQUN6QixNQUFNLElBQUksTUFBTSxnREFBZ0QsRUFFcEUsS0FDSixDQUNBLElBQUssT0FBUSxDQUNULEdBQUksS0FBSyxrQkFBb0IsUUFDekIsTUFBTSxJQUFJLE1BQU0sMkNBQTJDLEVBRS9ELEtBQ0osQ0FDQSxJQUFLLFFBQVMsQ0FDVkEsRUFBTSxJQUFNLENBQUEsRUFDWixLQUNKLENBQ0EsSUFBSyxPQUFRLENBQ1QsR0FBSSxLQUFLLGtCQUFvQixRQUN6QixNQUFNLElBQUksTUFBTSwyQ0FBMkMsRUFFL0QsS0FDSixDQUNBLElBQUssUUFBUyxDQUNWLE1BQU1DLEVBQU9ELEVBQ1AsQ0FBRSxRQUFBRSxFQUFTLFFBQUFDLENBQU8sRUFBS3RCLEVBQU8sS0FBSyxJQUNyQyxPQUFPcUIsR0FBWSxXQUNuQkQsRUFBSyxTQUFXQyxHQUNoQixPQUFPQyxHQUFZLFdBQ25CRixFQUFLLFNBQVdFLEdBQ3BCRixFQUFLLEtBQU8sUUFDWkEsRUFBSyxNQUFRLEtBQUssUUFBUVIsRUFBSSxRQUFTLENBQUUsR0FBR0gsRUFBUSxLQUFNLENBQUMsR0FBR0EsRUFBTyxLQUFNLE9BQU8sQ0FBQyxDQUFFLEVBQ3JGLEtBQ0osQ0FDQSxJQUFLLFNBQVUsQ0FDWCxNQUFNVyxFQUFPRCxFQUNiQyxFQUFLLEtBQU8sU0FDWkEsRUFBSyxXQUFhLENBQUEsRUFDbEIsTUFBTVcsRUFBUW5CLEVBQUksTUFDbEIsVUFBV29CLEtBQU9ELEVBQ2RYLEVBQUssV0FBV1ksQ0FBRyxFQUFJLEtBQUssUUFBUUQsRUFBTUMsQ0FBRyxFQUFHLENBQzVDLEdBQUd2QixFQUNILEtBQU0sQ0FBQyxHQUFHQSxFQUFPLEtBQU0sYUFBY3VCLENBQUcsQ0FDeEUsQ0FBNkIsRUFHTCxNQUFNQyxFQUFVLElBQUksSUFBSSxPQUFPLEtBQUtGLENBQUssQ0FBQyxFQUVwQ0csRUFBZSxJQUFJLElBQUksQ0FBQyxHQUFHRCxDQUFPLEVBQUUsT0FBUUQsR0FBUSxDQUN0RCxNQUFNcEMsRUFBSWdCLEVBQUksTUFBTW9CLENBQUcsRUFBRSxLQUN6QixPQUFJLEtBQUssS0FBTyxRQUNMcEMsRUFBRSxRQUFVLE9BR1pBLEVBQUUsU0FBVyxNQUU1QixDQUFDLENBQUMsRUFDRXNDLEVBQWEsS0FBTyxJQUNwQmQsRUFBSyxTQUFXLE1BQU0sS0FBS2MsQ0FBWSxLQUd2Q0MsRUFBQXZCLEVBQUksV0FBSixZQUFBdUIsRUFBYyxLQUFLLElBQUksUUFBUyxRQUVoQ2YsRUFBSyxxQkFBdUIsR0FFdEJSLEVBQUksU0FLTEEsRUFBSSxXQUNUUSxFQUFLLHFCQUF1QixLQUFLLFFBQVFSLEVBQUksU0FBVSxDQUNuRCxHQUFHSCxFQUNILEtBQU0sQ0FBQyxHQUFHQSxFQUFPLEtBQU0sc0JBQXNCLENBQzdFLENBQTZCLEdBUEcsS0FBSyxLQUFPLFdBQ1pXLEVBQUsscUJBQXVCLElBUXBDLEtBQ0osQ0FDQSxJQUFLLFFBQVMsQ0FDVixNQUFNQSxFQUFPRCxFQUNiQyxFQUFLLE1BQVFSLEVBQUksUUFBUSxJQUFJLENBQUN3QixFQUFHQyxJQUFNLEtBQUssUUFBUUQsRUFBRyxDQUNuRCxHQUFHM0IsRUFDSCxLQUFNLENBQUMsR0FBR0EsRUFBTyxLQUFNLFFBQVM0QixDQUFDLENBQzdELENBQXlCLENBQUMsRUFDRixLQUNKLENBQ0EsSUFBSyxlQUFnQixDQUNqQixNQUFNakIsRUFBT0QsRUFDUG1CLEVBQUksS0FBSyxRQUFRMUIsRUFBSSxLQUFNLENBQzdCLEdBQUdILEVBQ0gsS0FBTSxDQUFDLEdBQUdBLEVBQU8sS0FBTSxRQUFTLENBQUMsQ0FDN0QsQ0FBeUIsRUFDSzhCLEVBQUksS0FBSyxRQUFRM0IsRUFBSSxNQUFPLENBQzlCLEdBQUdILEVBQ0gsS0FBTSxDQUFDLEdBQUdBLEVBQU8sS0FBTSxRQUFTLENBQUMsQ0FDN0QsQ0FBeUIsRUFDSytCLEVBQXdCQyxHQUFRLFVBQVdBLEdBQU8sT0FBTyxLQUFLQSxDQUFHLEVBQUUsU0FBVyxFQUM5RUMsRUFBUSxDQUNWLEdBQUlGLEVBQXFCRixDQUFDLEVBQUlBLEVBQUUsTUFBUSxDQUFDQSxDQUFDLEVBQzFDLEdBQUlFLEVBQXFCRCxDQUFDLEVBQUlBLEVBQUUsTUFBUSxDQUFDQSxDQUFDLENBQ3RFLEVBQ3dCbkIsRUFBSyxNQUFRc0IsRUFDYixLQUNKLENBQ0EsSUFBSyxRQUFTLENBQ1YsTUFBTXRCLEVBQU9ELEVBQ2JDLEVBQUssS0FBTyxRQUNaLE1BQU11QixFQUFjL0IsRUFBSSxNQUFNLElBQUksQ0FBQyxFQUFHeUIsSUFBTSxLQUFLLFFBQVEsRUFBRyxDQUFFLEdBQUc1QixFQUFRLEtBQU0sQ0FBQyxHQUFHQSxFQUFPLEtBQU0sY0FBZTRCLENBQUMsQ0FBQyxDQUFFLENBQUMsRUFPcEgsR0FOSSxLQUFLLFNBQVcsZ0JBQ2hCakIsRUFBSyxZQUFjdUIsRUFHbkJ2QixFQUFLLE1BQVF1QixFQUViL0IsRUFBSSxLQUFNLENBQ1YsTUFBTWdDLEVBQU8sS0FBSyxRQUFRaEMsRUFBSSxLQUFNLENBQ2hDLEdBQUdILEVBQ0gsS0FBTSxDQUFDLEdBQUdBLEVBQU8sS0FBTSxPQUFPLENBQzlELENBQTZCLEVBQ0csS0FBSyxTQUFXLGdCQUNoQlcsRUFBSyxNQUFRd0IsRUFHYnhCLEVBQUssZ0JBQWtCd0IsQ0FFL0IsQ0FFSWhDLEVBQUksT0FDSlEsRUFBSyxNQUFRLEtBQUssUUFBUVIsRUFBSSxLQUFNLENBQ2hDLEdBQUdILEVBQ0gsS0FBTSxDQUFDLEdBQUdBLEVBQU8sS0FBTSxPQUFPLENBQzlELENBQTZCLEdBR0wsS0FBTSxDQUFFLFFBQUFZLEVBQVMsUUFBQUMsQ0FBTyxFQUFLdEIsRUFBTyxLQUFLLElBQ3JDLE9BQU9xQixHQUFZLFdBQ25CRCxFQUFLLFNBQVdDLEdBQ2hCLE9BQU9DLEdBQVksV0FDbkJGLEVBQUssU0FBV0UsR0FDcEIsS0FDSixDQUNBLElBQUssU0FBVSxDQUNYLE1BQU1GLEVBQU9ELEVBQ2JDLEVBQUssS0FBTyxTQUNaQSxFQUFLLGNBQWdCLEtBQUssUUFBUVIsRUFBSSxRQUFTLENBQUUsR0FBR0gsRUFBUSxLQUFNLENBQUMsR0FBR0EsRUFBTyxLQUFNLGVBQWUsQ0FBQyxDQUFFLEVBQ3JHVyxFQUFLLHFCQUF1QixLQUFLLFFBQVFSLEVBQUksVUFBVyxDQUNwRCxHQUFHSCxFQUNILEtBQU0sQ0FBQyxHQUFHQSxFQUFPLEtBQU0sc0JBQXNCLENBQ3pFLENBQXlCLEVBQ0QsS0FDSixDQUNBLElBQUssTUFBTyxDQUNSLEdBQUksS0FBSyxrQkFBb0IsUUFDekIsTUFBTSxJQUFJLE1BQU0sMENBQTBDLEVBRTlELEtBQ0osQ0FDQSxJQUFLLE1BQU8sQ0FDUixHQUFJLEtBQUssa0JBQW9CLFFBQ3pCLE1BQU0sSUFBSSxNQUFNLDBDQUEwQyxFQUU5RCxLQUNKLENBQ0EsSUFBSyxPQUFRLENBQ1QsTUFBTVcsRUFBT0QsRUFDUDBCLEVBQVNwRCxHQUFjbUIsRUFBSSxPQUFPLEVBRXBDaUMsRUFBTyxNQUFPakQsR0FBTSxPQUFPQSxHQUFNLFFBQVEsSUFDekN3QixFQUFLLEtBQU8sVUFDWnlCLEVBQU8sTUFBT2pELEdBQU0sT0FBT0EsR0FBTSxRQUFRLElBQ3pDd0IsRUFBSyxLQUFPLFVBQ2hCQSxFQUFLLEtBQU95QixFQUNaLEtBQ0osQ0FDQSxJQUFLLFVBQVcsQ0FDWixNQUFNekIsRUFBT0QsRUFDUDJCLEVBQU8sQ0FBQSxFQUNiLFVBQVdMLEtBQU83QixFQUFJLE9BQ2xCLEdBQUk2QixJQUFRLFFBQ1IsR0FBSSxLQUFLLGtCQUFvQixRQUN6QixNQUFNLElBQUksTUFBTSwwREFBMEQsVUFNekUsT0FBT0EsR0FBUSxTQUFVLENBQzlCLEdBQUksS0FBSyxrQkFBb0IsUUFDekIsTUFBTSxJQUFJLE1BQU0sc0RBQXNELEVBR3RFSyxFQUFLLEtBQUssT0FBT0wsQ0FBRyxDQUFDLENBRTdCLE1BRUlLLEVBQUssS0FBS0wsQ0FBRyxFQUdyQixHQUFJSyxFQUFLLFNBQVcsRUFHZixHQUFJQSxFQUFLLFNBQVcsRUFBRyxDQUN4QixNQUFNTCxFQUFNSyxFQUFLLENBQUMsRUFDbEIxQixFQUFLLEtBQU9xQixJQUFRLEtBQU8sT0FBUyxPQUFPQSxFQUMzQ3JCLEVBQUssTUFBUXFCLENBQ2pCLE1BRVFLLEVBQUssTUFBT2xELEdBQU0sT0FBT0EsR0FBTSxRQUFRLElBQ3ZDd0IsRUFBSyxLQUFPLFVBQ1owQixFQUFLLE1BQU9sRCxHQUFNLE9BQU9BLEdBQU0sUUFBUSxJQUN2Q3dCLEVBQUssS0FBTyxVQUNaMEIsRUFBSyxNQUFPbEQsR0FBTSxPQUFPQSxHQUFNLFNBQVMsSUFDeEN3QixFQUFLLEtBQU8sVUFDWjBCLEVBQUssTUFBT2xELEdBQU1BLElBQU0sSUFBSSxJQUM1QndCLEVBQUssS0FBTyxRQUNoQkEsRUFBSyxLQUFPMEIsRUFFaEIsS0FDSixDQUNBLElBQUssT0FBUSxDQUNULE1BQU0xQixFQUFPRCxFQUNQNEIsRUFBTyxDQUNULEtBQU0sU0FDTixPQUFRLFNBQ1IsZ0JBQWlCLFFBQzdDLEVBQzhCLENBQUUsUUFBQTFCLEVBQVMsUUFBQUMsRUFBUyxLQUFBMEIsQ0FBSSxFQUFLaEQsRUFBTyxLQUFLLElBQzNDcUIsSUFBWSxTQUNaMEIsRUFBSyxVQUFZMUIsR0FDakJDLElBQVksU0FDWnlCLEVBQUssVUFBWXpCLEdBQ2pCMEIsRUFDSUEsRUFBSyxTQUFXLEdBQ2hCRCxFQUFLLGlCQUFtQkMsRUFBSyxDQUFDLEVBQzlCLE9BQU8sT0FBTzVCLEVBQU0yQixDQUFJLEdBR3hCM0IsRUFBSyxNQUFRNEIsRUFBSyxJQUFLQyxJQUNMLENBQUUsR0FBR0YsRUFBTSxpQkFBa0JFLENBQUMsRUFFL0MsRUFJTCxPQUFPLE9BQU83QixFQUFNMkIsQ0FBSSxFQUs1QixLQUNKLENBQ0EsSUFBSyxZQUFhLENBQ2QsR0FBSSxLQUFLLGtCQUFvQixRQUN6QixNQUFNLElBQUksTUFBTSxpREFBaUQsRUFFckUsS0FDSixDQUNBLElBQUssV0FBWSxDQUNiLE1BQU1HLEVBQVEsS0FBSyxRQUFRdEMsRUFBSSxVQUFXSCxDQUFNLEVBQ2hEVSxFQUFNLE1BQVEsQ0FBQytCLEVBQU8sQ0FBRSxLQUFNLE1BQU0sQ0FBRSxFQUN0QyxLQUNKLENBQ0EsSUFBSyxjQUFlLENBQ2hCLEtBQUssUUFBUXRDLEVBQUksVUFBV0gsQ0FBTSxFQUNsQ00sRUFBTyxJQUFNSCxFQUFJLFVBQ2pCLEtBQ0osQ0FDQSxJQUFLLFVBQVcsQ0FDWixNQUFNUSxFQUFPRCxFQUNiQyxFQUFLLEtBQU8sVUFDWixLQUNKLENBQ0EsSUFBSyxVQUFXLENBQ1osS0FBSyxRQUFRUixFQUFJLFVBQVdILENBQU0sRUFDbENNLEVBQU8sSUFBTUgsRUFBSSxVQUNqQk8sRUFBTSxRQUFVLEtBQUssTUFBTSxLQUFLLFVBQVVQLEVBQUksWUFBWSxDQUFDLEVBQzNELEtBQ0osQ0FDQSxJQUFLLFdBQVksQ0FDYixLQUFLLFFBQVFBLEVBQUksVUFBV0gsQ0FBTSxFQUNsQ00sRUFBTyxJQUFNSCxFQUFJLFVBQ2IsS0FBSyxLQUFPLFVBQ1pPLEVBQU0sVUFBWSxLQUFLLE1BQU0sS0FBSyxVQUFVUCxFQUFJLFlBQVksQ0FBQyxHQUNqRSxLQUNKLENBQ0EsSUFBSyxRQUFTLENBRVYsS0FBSyxRQUFRQSxFQUFJLFVBQVdILENBQU0sRUFDbENNLEVBQU8sSUFBTUgsRUFBSSxVQUNqQixJQUFJdUMsRUFDSixHQUFJLENBQ0FBLEVBQWF2QyxFQUFJLFdBQVcsTUFBUyxDQUN6QyxNQUNNLENBQ0YsTUFBTSxJQUFJLE1BQU0sdURBQXVELENBQzNFLENBQ0FPLEVBQU0sUUFBVWdDLEVBQ2hCLEtBQ0osQ0FDQSxJQUFLLE1BQU8sQ0FDUixHQUFJLEtBQUssa0JBQW9CLFFBQ3pCLE1BQU0sSUFBSSxNQUFNLDBDQUEwQyxFQUU5RCxLQUNKLENBQ0EsSUFBSyxtQkFBb0IsQ0FDckIsTUFBTS9CLEVBQU9ELEVBQ1BpQyxFQUFVcEQsRUFBTyxLQUFLLFFBQzVCLEdBQUksQ0FBQ29ELEVBQ0QsTUFBTSxJQUFJLE1BQU0sdUNBQXVDLEVBQzNEaEMsRUFBSyxLQUFPLFNBQ1pBLEVBQUssUUFBVWdDLEVBQVEsT0FDdkIsS0FDSixDQUNBLElBQUssT0FBUSxDQUNULE1BQU1DLEVBQVksS0FBSyxLQUFPLFFBQVd6QyxFQUFJLEdBQUcsS0FBSyxJQUFJLE9BQVMsWUFBY0EsRUFBSSxJQUFNQSxFQUFJLEdBQU1BLEVBQUksSUFDeEcsS0FBSyxRQUFReUMsRUFBVzVDLENBQU0sRUFDOUJNLEVBQU8sSUFBTXNDLEVBQ2IsS0FDSixDQUNBLElBQUssV0FBWSxDQUNiLEtBQUssUUFBUXpDLEVBQUksVUFBV0gsQ0FBTSxFQUNsQ00sRUFBTyxJQUFNSCxFQUFJLFVBQ2pCTyxFQUFNLFNBQVcsR0FDakIsS0FDSixDQUVBLElBQUssVUFBVyxDQUNaLEtBQUssUUFBUVAsRUFBSSxVQUFXSCxDQUFNLEVBQ2xDTSxFQUFPLElBQU1ILEVBQUksVUFDakIsS0FDSixDQUNBLElBQUssV0FBWSxDQUNiLEtBQUssUUFBUUEsRUFBSSxVQUFXSCxDQUFNLEVBQ2xDTSxFQUFPLElBQU1ILEVBQUksVUFDakIsS0FDSixDQUNBLElBQUssT0FBUSxDQUNULE1BQU15QyxFQUFZckQsRUFBTyxLQUFLLFVBQzlCLEtBQUssUUFBUXFELEVBQVc1QyxDQUFNLEVBQzlCTSxFQUFPLElBQU1zQyxFQUNiLEtBQ0osQ0FDQSxJQUFLLFNBQVUsQ0FDWCxHQUFJLEtBQUssa0JBQW9CLFFBQ3pCLE1BQU0sSUFBSSxNQUFNLG1EQUFtRCxFQUV2RSxLQUNKLENBSXBCLENBQ1ksQ0FDSixDQUVBLE1BQU1uRCxFQUFPLEtBQUssaUJBQWlCLElBQUlGLENBQU0sRUFDN0MsT0FBSUUsR0FDQSxPQUFPLE9BQU9hLEVBQU8sT0FBUWIsQ0FBSSxFQUNqQyxLQUFLLEtBQU8sU0FBV29ELEdBQWV0RCxDQUFNLElBRTVDLE9BQU9lLEVBQU8sT0FBTyxTQUNyQixPQUFPQSxFQUFPLE9BQU8sU0FHckIsS0FBSyxLQUFPLFNBQVdBLEVBQU8sT0FBTyxhQUNwQ0osRUFBS0ksRUFBTyxRQUFRLFVBQVlKLEVBQUcsUUFBVUksRUFBTyxPQUFPLFlBQ2hFLE9BQU9BLEVBQU8sT0FBTyxVQUVMLEtBQUssS0FBSyxJQUFJZixDQUFNLEVBQ3JCLE1BQ25CLENBQ0EsS0FBS0EsRUFBUVUsRUFBUyxpQkFDbEIsTUFBTUQsRUFBUyxDQUNYLFFBQVFDLEdBQUEsWUFBQUEsRUFBUyxTQUFVLE1BQzNCLFFBQVFBLEdBQUEsWUFBQUEsRUFBUyxTQUFVLFNBRzNCLFVBQVVBLEdBQUEsWUFBQUEsRUFBUyxXQUFZLE1BQzNDLEVBRWM2QyxFQUFPLEtBQUssS0FBSyxJQUFJdkQsQ0FBTSxFQUNqQyxHQUFJLENBQUN1RCxFQUNELE1BQU0sSUFBSSxNQUFNLDJDQUEyQyxFQUsvRCxNQUFNQyxFQUFXQyxHQUFVLE9BS3ZCLE1BQU1DLEVBQWMsS0FBSyxTQUFXLGdCQUFrQixRQUFVLGNBQ2hFLEdBQUlqRCxFQUFPLFNBQVUsQ0FDakIsTUFBTWtELEdBQWFoRCxFQUFBRixFQUFPLFNBQVMsU0FBUyxJQUFJZ0QsRUFBTSxDQUFDLENBQUMsSUFBckMsWUFBQTlDLEVBQXdDLEdBRXJEaUQsRUFBZW5ELEVBQU8sU0FBUyxNQUFTb0QsR0FBT0EsR0FDckQsR0FBSUYsRUFDQSxNQUFPLENBQUUsSUFBS0MsRUFBYUQsQ0FBVSxDQUFDLEVBRzFDLE1BQU1FLEVBQUtKLEVBQU0sQ0FBQyxFQUFFLE9BQVNBLEVBQU0sQ0FBQyxFQUFFLE9BQU8sSUFBTSxTQUFTLEtBQUssU0FBUyxHQUMxRSxPQUFBQSxFQUFNLENBQUMsRUFBRSxNQUFRSSxFQUNWLENBQUUsTUFBT0EsRUFBSSxJQUFLLEdBQUdELEVBQWEsVUFBVSxDQUFDLEtBQUtGLENBQVcsSUFBSUcsQ0FBRSxFQUFFLENBQ2hGLENBQ0EsR0FBSUosRUFBTSxDQUFDLElBQU1GLEVBQ2IsTUFBTyxDQUFFLElBQUssR0FBRyxFQUlyQixNQUFNTyxFQUFlLEtBQWdCSixDQUFXLElBQzFDSyxFQUFRTixFQUFNLENBQUMsRUFBRSxPQUFPLElBQU0sV0FBVyxLQUFLLFNBQVMsR0FDN0QsTUFBTyxDQUFFLE1BQUFNLEVBQU8sSUFBS0QsRUFBZUMsQ0FBSyxDQUM3QyxFQUdNQyxFQUFnQlAsR0FBVSxDQUU1QixHQUFJQSxFQUFNLENBQUMsRUFBRSxPQUFPLEtBQ2hCLE9BRUosTUFBTTNDLEVBQU8yQyxFQUFNLENBQUMsRUFDZCxDQUFFLElBQUFRLEVBQUssTUFBQUYsR0FBVVAsRUFBUUMsQ0FBSyxFQUNwQzNDLEVBQUssSUFBTSxDQUFFLEdBQUdBLEVBQUssTUFBTSxFQUV2QmlELElBQ0FqRCxFQUFLLE1BQVFpRCxHQUVqQixNQUFNL0QsRUFBU2MsRUFBSyxPQUNwQixVQUFXa0IsS0FBT2hDLEVBQ2QsT0FBT0EsRUFBT2dDLENBQUcsRUFFckJoQyxFQUFPLEtBQU9pRSxDQUNsQixFQUdBLEdBQUl4RCxFQUFPLFNBQVcsUUFDbEIsVUFBV2dELEtBQVMsS0FBSyxLQUFLLFFBQU8sRUFBSSxDQUNyQyxNQUFNM0MsRUFBTzJDLEVBQU0sQ0FBQyxFQUNwQixHQUFJM0MsRUFBSyxNQUNMLE1BQU0sSUFBSSxNQUFNLHNCQUNQSCxFQUFBRyxFQUFLLFFBQUwsWUFBQUgsRUFBWSxLQUFLLElBQUk7QUFBQTtBQUFBLGlGQUN3RCxDQUU5RixDQUdKLFVBQVc4QyxLQUFTLEtBQUssS0FBSyxRQUFPLEVBQUksQ0FDckMsTUFBTTNDLEVBQU8yQyxFQUFNLENBQUMsRUFFcEIsR0FBSXpELElBQVd5RCxFQUFNLENBQUMsRUFBRyxDQUNyQk8sRUFBYVAsQ0FBSyxFQUNsQixRQUNKLENBRUEsR0FBSWhELEVBQU8sU0FBVSxDQUNqQixNQUFNeUQsR0FBTWpELEVBQUFSLEVBQU8sU0FBUyxTQUFTLElBQUlnRCxFQUFNLENBQUMsQ0FBQyxJQUFyQyxZQUFBeEMsRUFBd0MsR0FDcEQsR0FBSWpCLElBQVd5RCxFQUFNLENBQUMsR0FBS1MsRUFBSyxDQUM1QkYsRUFBYVAsQ0FBSyxFQUNsQixRQUNKLENBQ0osQ0FHQSxJQURXdEIsRUFBQSxLQUFLLGlCQUFpQixJQUFJc0IsRUFBTSxDQUFDLENBQUMsSUFBbEMsWUFBQXRCLEVBQXFDLEdBQ3hDLENBQ0o2QixFQUFhUCxDQUFLLEVBQ2xCLFFBQ0osQ0FFQSxHQUFJM0MsRUFBSyxNQUFPLENBRVprRCxFQUFhUCxDQUFLLEVBQ2xCLFFBQ0osQ0FFQSxHQUFJM0MsRUFBSyxNQUFRLEdBQ1RMLEVBQU8sU0FBVyxNQUFPLENBQ3pCdUQsRUFBYVAsQ0FBSyxFQUVsQixRQUNKLENBRVIsQ0FFQSxNQUFNVSxFQUFhLENBQUNDLEVBQVczRCxJQUFXLENBQ3RDLE1BQU1LLEVBQU8sS0FBSyxLQUFLLElBQUlzRCxDQUFTLEVBQzlCcEUsRUFBU2MsRUFBSyxLQUFPQSxFQUFLLE9BQzFCdUQsRUFBVSxDQUFFLEdBQUdyRSxDQUFNLEVBRTNCLEdBQUljLEVBQUssTUFBUSxLQUNiLE9BR0osTUFBTW1ELEVBQU1uRCxFQUFLLElBRWpCLEdBREFBLEVBQUssSUFBTSxLQUNQbUQsRUFBSyxDQUNMRSxFQUFXRixFQUFLeEQsQ0FBTSxFQUV0QixNQUFNNkQsRUFBWSxLQUFLLEtBQUssSUFBSUwsQ0FBRyxFQUFFLE9BQ2pDSyxFQUFVLE1BQVE3RCxFQUFPLFNBQVcsV0FDcENULEVBQU8sTUFBUUEsRUFBTyxPQUFTLENBQUEsRUFDL0JBLEVBQU8sTUFBTSxLQUFLc0UsQ0FBUyxJQUczQixPQUFPLE9BQU90RSxFQUFRc0UsQ0FBUyxFQUMvQixPQUFPLE9BQU90RSxFQUFRcUUsQ0FBTyxFQUVyQyxDQUVLdkQsRUFBSyxVQUNOLEtBQUssU0FBUyxDQUNWLFVBQVdzRCxFQUNYLFdBQVlwRSxFQUNaLEtBQU1jLEVBQUssTUFBUSxDQUFBLENBQ3ZDLENBQWlCLENBQ1QsRUFDQSxVQUFXMkMsSUFBUyxDQUFDLEdBQUcsS0FBSyxLQUFLLFFBQU8sQ0FBRSxFQUFFLFVBQ3pDVSxFQUFXVixFQUFNLENBQUMsRUFBRyxDQUFFLE9BQVEsS0FBSyxPQUFRLEVBRWhELE1BQU0xQyxFQUFTLENBQUEsRUFVZixHQVRJLEtBQUssU0FBVyxnQkFDaEJBLEVBQU8sUUFBVSwrQ0FFWixLQUFLLFNBQVcsVUFDckJBLEVBQU8sUUFBVSwwQ0FHakIsUUFBUSxLQUFLLG1CQUFtQixLQUFLLE1BQU0sRUFBRSxHQUU3Q3dELEVBQUE5RCxFQUFPLFdBQVAsTUFBQThELEVBQWlCLElBQUssQ0FDdEIsTUFBTVYsR0FBS1csRUFBQS9ELEVBQU8sU0FBUyxTQUFTLElBQUlULENBQU0sSUFBbkMsWUFBQXdFLEVBQXNDLEdBQ2pELEdBQUksQ0FBQ1gsRUFDRCxNQUFNLElBQUksTUFBTSxvQ0FBb0MsRUFDeEQ5QyxFQUFPLElBQU1OLEVBQU8sU0FBUyxJQUFJb0QsQ0FBRSxDQUN2QyxDQUNBLE9BQU8sT0FBTzlDLEVBQVF3QyxFQUFLLEdBQUcsRUFFOUIsTUFBTWtCLElBQU9DLEVBQUFqRSxFQUFPLFdBQVAsWUFBQWlFLEVBQWlCLE9BQVEsQ0FBQSxFQUN0QyxVQUFXakIsS0FBUyxLQUFLLEtBQUssUUFBTyxFQUFJLENBQ3JDLE1BQU0zQyxFQUFPMkMsRUFBTSxDQUFDLEVBQ2hCM0MsRUFBSyxLQUFPQSxFQUFLLFFBQ2pCMkQsRUFBSzNELEVBQUssS0FBSyxFQUFJQSxFQUFLLElBRWhDLENBRUlMLEVBQU8sVUFHSCxPQUFPLEtBQUtnRSxDQUFJLEVBQUUsT0FBUyxJQUN2QixLQUFLLFNBQVcsZ0JBQ2hCMUQsRUFBTyxNQUFRMEQsRUFHZjFELEVBQU8sWUFBYzBELEdBSWpDLEdBQUksQ0FJQSxPQUFPLEtBQUssTUFBTSxLQUFLLFVBQVUxRCxDQUFNLENBQUMsQ0FDNUMsTUFDYSxDQUNULE1BQU0sSUFBSSxNQUFNLGtDQUFrQyxDQUN0RCxDQUNKLENBQ0osQ0FDTyxTQUFTNEQsR0FBYUMsRUFBT2xFLEVBQVMsQ0FDekMsR0FBSWtFLGFBQWlCdEUsR0FBYyxDQUMvQixNQUFNdUUsRUFBTSxJQUFJckUsR0FBb0JFLENBQU8sRUFDckMrRCxFQUFPLENBQUEsRUFDYixVQUFXaEIsS0FBU21CLEVBQU0sT0FBTyxRQUFPLEVBQUksQ0FDeEMsS0FBTSxDQUFDOUUsRUFBR0UsQ0FBTSxFQUFJeUQsRUFDcEJvQixFQUFJLFFBQVE3RSxDQUFNLENBQ3RCLENBQ0EsTUFBTThFLEVBQVUsQ0FBQSxFQUNWQyxFQUFXLENBQ2IsU0FBVUgsRUFDVixJQUFLbEUsR0FBQSxZQUFBQSxFQUFTLElBQ2QsS0FBQStELENBQ1osRUFDUSxVQUFXaEIsS0FBU21CLEVBQU0sT0FBTyxRQUFPLEVBQUksQ0FDeEMsS0FBTSxDQUFDNUMsRUFBS2hDLENBQU0sRUFBSXlELEVBQ3RCcUIsRUFBUTlDLENBQUcsRUFBSTZDLEVBQUksS0FBSzdFLEVBQVEsQ0FDNUIsR0FBR1UsRUFDSCxTQUFBcUUsQ0FDaEIsQ0FBYSxDQUNMLENBQ0EsR0FBSSxPQUFPLEtBQUtOLENBQUksRUFBRSxPQUFTLEVBQUcsQ0FDOUIsTUFBTWYsRUFBY21CLEVBQUksU0FBVyxnQkFBa0IsUUFBVSxjQUMvREMsRUFBUSxTQUFXLENBQ2YsQ0FBQ3BCLENBQVcsRUFBR2UsQ0FDL0IsQ0FDUSxDQUNBLE1BQU8sQ0FBRSxRQUFBSyxDQUFPLENBQ3BCLENBQ0EsTUFBTUQsRUFBTSxJQUFJckUsR0FBb0JFLENBQU8sRUFDM0MsT0FBQW1FLEVBQUksUUFBUUQsQ0FBSyxFQUNWQyxFQUFJLEtBQUtELEVBQU9sRSxDQUFPLENBQ2xDLENBQ0EsU0FBUzRDLEdBQWUwQixFQUFTQyxFQUFNLENBQ25DLE1BQU1DLEVBQU1ELEdBQVEsQ0FBRSxLQUFNLElBQUksR0FBSyxFQUNyQyxHQUFJQyxFQUFJLEtBQUssSUFBSUYsQ0FBTyxFQUNwQixNQUFPLEdBQ1hFLEVBQUksS0FBSyxJQUFJRixDQUFPLEVBRXBCLE1BQU1wRSxFQURTb0UsRUFDSSxLQUFLLElBQ3hCLE9BQVFwRSxFQUFJLEtBQUksQ0FDWixJQUFLLFNBQ0wsSUFBSyxTQUNMLElBQUssU0FDTCxJQUFLLFVBQ0wsSUFBSyxPQUNMLElBQUssU0FDTCxJQUFLLFlBQ0wsSUFBSyxPQUNMLElBQUssTUFDTCxJQUFLLFVBQ0wsSUFBSyxRQUNMLElBQUssT0FDTCxJQUFLLFVBQ0wsSUFBSyxPQUNMLElBQUssTUFDTCxJQUFLLE9BQ0wsSUFBSyxtQkFDRCxNQUFPLEdBQ1gsSUFBSyxRQUNELE9BQU8wQyxHQUFlMUMsRUFBSSxRQUFTc0UsQ0FBRyxFQUUxQyxJQUFLLFNBQVUsQ0FDWCxVQUFXbEQsS0FBT3BCLEVBQUksTUFDbEIsR0FBSTBDLEdBQWUxQyxFQUFJLE1BQU1vQixDQUFHLEVBQUdrRCxDQUFHLEVBQ2xDLE1BQU8sR0FFZixNQUFPLEVBQ1gsQ0FDQSxJQUFLLFFBQVMsQ0FDVixVQUFXQyxLQUFVdkUsRUFBSSxRQUNyQixHQUFJMEMsR0FBZTZCLEVBQVFELENBQUcsRUFDMUIsTUFBTyxHQUVmLE1BQU8sRUFDWCxDQUNBLElBQUssZUFDRCxPQUFPNUIsR0FBZTFDLEVBQUksS0FBTXNFLENBQUcsR0FBSzVCLEdBQWUxQyxFQUFJLE1BQU9zRSxDQUFHLEVBRXpFLElBQUssUUFBUyxDQUNWLFVBQVdFLEtBQVF4RSxFQUFJLE1BQ25CLEdBQUkwQyxHQUFlOEIsRUFBTUYsQ0FBRyxFQUN4QixNQUFPLEdBRWYsTUFBSSxHQUFBdEUsRUFBSSxNQUFRMEMsR0FBZTFDLEVBQUksS0FBTXNFLENBQUcsRUFHaEQsQ0FDQSxJQUFLLFNBQ0QsT0FBTzVCLEdBQWUxQyxFQUFJLFFBQVNzRSxDQUFHLEdBQUs1QixHQUFlMUMsRUFBSSxVQUFXc0UsQ0FBRyxFQUVoRixJQUFLLE1BQ0QsT0FBTzVCLEdBQWUxQyxFQUFJLFFBQVNzRSxDQUFHLEdBQUs1QixHQUFlMUMsRUFBSSxVQUFXc0UsQ0FBRyxFQUVoRixJQUFLLE1BQ0QsT0FBTzVCLEdBQWUxQyxFQUFJLFVBQVdzRSxDQUFHLEVBRzVDLElBQUssVUFDTCxJQUFLLFdBQ0wsSUFBSyxjQUNMLElBQUssV0FDTCxJQUFLLFdBQ0QsT0FBTzVCLEdBQWUxQyxFQUFJLFVBQVdzRSxDQUFHLEVBQzVDLElBQUssT0FDRCxPQUFPNUIsR0FBZTFDLEVBQUksT0FBTSxFQUFJc0UsQ0FBRyxFQUMzQyxJQUFLLFVBQ0QsT0FBTzVCLEdBQWUxQyxFQUFJLFVBQVdzRSxDQUFHLEVBRTVDLElBQUssV0FDRCxPQUFPNUIsR0FBZTFDLEVBQUksVUFBV3NFLENBQUcsRUFFNUMsSUFBSyxTQUNELE1BQU8sR0FFWCxJQUFLLFlBQ0QsTUFBTyxHQUVYLElBQUssT0FDRCxPQUFPNUIsR0FBZTFDLEVBQUksR0FBSXNFLENBQUcsR0FBSzVCLEdBQWUxQyxFQUFJLElBQUtzRSxDQUFHLEVBRXJFLElBQUssVUFDRCxNQUFPLEdBRVgsSUFBSyxRQUNELE1BQU8sRUFJbkIsQ0FDSSxNQUFNLElBQUksTUFBTSx3QkFBd0J0RSxFQUFJLElBQUksRUFBRSxDQUN0RCxDQzl6Qk8sU0FBU3lFLEdBQXdCQyxFQUFpQkMsRUFBUSxDQUM3RCxNQUFNQyxFQUFNLENBQUUsR0FBR0YsQ0FBZSxFQUNoQyxjQUFPLGlCQUFpQkUsRUFBSyxDQUN6QixPQUFRLENBQ0osTUFBTyxpQ0FDUCxXQUFZLEVBQ3hCLEVBQ1EsVUFBVyxDQUNQLE1BQU9ELEVBQ1AsV0FBWSxFQUN4QixDQUNBLENBQUssRUFDTUMsQ0FDWCxDQy9CTyxNQUFNQyxHQUFpQixPQUFPLG1EQUFtRCxFQUNsRkMsR0FBaUIsQ0FDbkIsS0FBTSxPQUNOLGFBQWMsT0FDZCxlQUFnQixRQUNoQixhQUFjLE1BQ2QsYUFBYyxtQkFDZCxZQUFhLFVBQ2IsaUJBQWtCLGNBQ2xCLHlCQUEwQixjQUMxQixlQUFnQixjQUNoQixPQUFRLGNBQ1IsYUFBYyxHQUNkLGNBQWUsR0FDZixvQkFBcUIsR0FDckIsZ0JBQWlCLFNBQ2pCLGdCQUFpQixHQUNqQixjQUFlLGVBQ2YsZUFBZ0IseUJBQ2hCLGFBQWMsS0FDbEIsRUFDYUMsR0FBcUJDLEdBRXRCLE9BQU9BLEdBQVksU0FDdkIsQ0FDSSxHQUFHRixHQUNILFNBQVUsQ0FBQyxHQUFHLEVBQ2QsWUFBYSxDQUFBLEVBQ2IsS0FBTUUsQ0FDbEIsRUFDVSxDQUNFLEdBQUdGLEdBQ0gsU0FBVSxDQUFDLEdBQUcsRUFDZCxZQUFhLENBQUEsRUFDYixHQUFHRSxDQUNmLEVDbkNhQyxHQUFVekIsR0FDWixTQUFVQSxFQUFZQSxFQUFVLEtBQU9BLEVBRTNDLFNBQVMwQixHQUFXTixFQUFLLENBQzVCLEdBQUksQ0FBQ0EsRUFDRCxNQUFPLEdBQ1gsVUFBV08sS0FBTVAsRUFDYixNQUFPLEdBQ1gsTUFBTyxFQUNYLENDUE8sTUFBTVEsR0FBV0osR0FBWSxDQUNoQyxNQUFNSyxFQUFXTixHQUFrQkMsQ0FBTyxFQUNwQ00sRUFBY0QsRUFBUyxPQUFTLE9BQ2xDLENBQUMsR0FBR0EsRUFBUyxTQUFVQSxFQUFTLGVBQWdCQSxFQUFTLElBQUksRUFDM0RBLEVBQVMsU0FDZixNQUFPLENBQ0gsR0FBR0EsRUFDSCxZQUFhQyxFQUNiLGFBQWMsT0FDZCxTQUFVLElBQUksSUFDZCxLQUFNLElBQUksSUFBSSxPQUFPLFFBQVFELEVBQVMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDRSxFQUFNdkYsQ0FBRyxJQUFNLENBQ3BFaUYsR0FBT2pGLENBQUcsRUFDVixDQUNJLElBQUtpRixHQUFPakYsQ0FBRyxFQUNmLEtBQU0sQ0FBQyxHQUFHcUYsRUFBUyxTQUFVQSxFQUFTLGVBQWdCRSxDQUFJLEVBRTFELFdBQVksTUFDNUIsQ0FDQSxDQUFTLENBQUMsQ0FDVixDQUNBLEVDdEJPLFNBQVNDLEdBQWdCQyxFQUFLckUsRUFBS3NFLEVBQWNDLEVBQU0sQ0FDckRBLEdBQUEsTUFBQUEsRUFBTSxlQUVQRCxJQUNBRCxFQUFJLGFBQWUsQ0FDZixHQUFHQSxFQUFJLGFBQ1AsQ0FBQ3JFLENBQUcsRUFBR3NFLENBQ25CLEVBRUEsQ0FDTyxTQUFTRSxFQUEwQkgsRUFBS3JFLEVBQUt5RSxFQUFPSCxFQUFjQyxFQUFNLENBQzNFRixFQUFJckUsQ0FBRyxFQUFJeUUsRUFDWEwsR0FBZ0JDLEVBQUtyRSxFQUFLc0UsRUFBY0MsQ0FBSSxDQUNoRCxDQysvR08sSUFBSUcsR0FDVixTQUFVQSxFQUF1QixDQUM5QkEsRUFBc0IsVUFBZSxZQUNyQ0EsRUFBc0IsVUFBZSxZQUNyQ0EsRUFBc0IsT0FBWSxTQUNsQ0EsRUFBc0IsVUFBZSxZQUNyQ0EsRUFBc0IsV0FBZ0IsYUFDdENBLEVBQXNCLFFBQWEsVUFDbkNBLEVBQXNCLFVBQWUsWUFDckNBLEVBQXNCLGFBQWtCLGVBQ3hDQSxFQUFzQixRQUFhLFVBQ25DQSxFQUFzQixPQUFZLFNBQ2xDQSxFQUFzQixXQUFnQixhQUN0Q0EsRUFBc0IsU0FBYyxXQUNwQ0EsRUFBc0IsUUFBYSxVQUNuQ0EsRUFBc0IsU0FBYyxXQUNwQ0EsRUFBc0IsVUFBZSxZQUNyQ0EsRUFBc0IsU0FBYyxXQUNwQ0EsRUFBc0Isc0JBQTJCLHdCQUNqREEsRUFBc0IsZ0JBQXFCLGtCQUMzQ0EsRUFBc0IsU0FBYyxXQUNwQ0EsRUFBc0IsVUFBZSxZQUNyQ0EsRUFBc0IsT0FBWSxTQUNsQ0EsRUFBc0IsT0FBWSxTQUNsQ0EsRUFBc0IsWUFBaUIsY0FDdkNBLEVBQXNCLFFBQWEsVUFDbkNBLEVBQXNCLFdBQWdCLGFBQ3RDQSxFQUFzQixRQUFhLFVBQ25DQSxFQUFzQixXQUFnQixhQUN0Q0EsRUFBc0IsY0FBbUIsZ0JBQ3pDQSxFQUFzQixZQUFpQixjQUN2Q0EsRUFBc0IsWUFBaUIsY0FDdkNBLEVBQXNCLFdBQWdCLGFBQ3RDQSxFQUFzQixTQUFjLFdBQ3BDQSxFQUFzQixXQUFnQixhQUN0Q0EsRUFBc0IsV0FBZ0IsYUFDdENBLEVBQXNCLFlBQWlCLGNBQ3ZDQSxFQUFzQixZQUFpQixhQUMzQyxHQUFHQSxJQUEwQkEsRUFBd0IsQ0FBQSxFQUFHLEVDbGpIakQsU0FBU0MsSUFBYyxDQUMxQixNQUFPLENBQUEsQ0FDWCxDQ0NPLFNBQVNDLEdBQWNoRyxFQUFLMkYsRUFBTSxTQUNyQyxNQUFNRixFQUFNLENBQ1IsS0FBTSxPQUNkLEVBQ0ksUUFBSXBGLEdBQUFOLEVBQUFDLEVBQUksT0FBSixZQUFBRCxFQUFVLE9BQVYsWUFBQU0sRUFBZ0IsWUFBYXlGLEVBQXNCLFNBQ25ETCxFQUFJLE1BQVFRLEVBQVNqRyxFQUFJLEtBQUssS0FBTSxDQUNoQyxHQUFHMkYsRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxZQUFhLE9BQU8sQ0FDdEQsQ0FBUyxHQUVEM0YsRUFBSSxXQUNKNEYsRUFBMEJILEVBQUssV0FBWXpGLEVBQUksVUFBVSxNQUFPQSxFQUFJLFVBQVUsUUFBUzJGLENBQUksRUFFM0YzRixFQUFJLFdBQ0o0RixFQUEwQkgsRUFBSyxXQUFZekYsRUFBSSxVQUFVLE1BQU9BLEVBQUksVUFBVSxRQUFTMkYsQ0FBSSxFQUUzRjNGLEVBQUksY0FDSjRGLEVBQTBCSCxFQUFLLFdBQVl6RixFQUFJLFlBQVksTUFBT0EsRUFBSSxZQUFZLFFBQVMyRixDQUFJLEVBQy9GQyxFQUEwQkgsRUFBSyxXQUFZekYsRUFBSSxZQUFZLE1BQU9BLEVBQUksWUFBWSxRQUFTMkYsQ0FBSSxHQUU1RkYsQ0FDWCxDQ3ZCTyxTQUFTUyxHQUFlbEcsRUFBSzJGLEVBQU0sQ0FDdEMsTUFBTUYsRUFBTSxDQUNSLEtBQU0sVUFDTixPQUFRLE9BQ2hCLEVBQ0ksR0FBSSxDQUFDekYsRUFBSSxPQUNMLE9BQU95RixFQUNYLFVBQVdVLEtBQVNuRyxFQUFJLE9BQ3BCLE9BQVFtRyxFQUFNLEtBQUksQ0FDZCxJQUFLLE1BQ0dSLEVBQUssU0FBVyxjQUNaUSxFQUFNLFVBQ05QLEVBQTBCSCxFQUFLLFVBQVdVLEVBQU0sTUFBT0EsRUFBTSxRQUFTUixDQUFJLEVBRzFFQyxFQUEwQkgsRUFBSyxtQkFBb0JVLEVBQU0sTUFBT0EsRUFBTSxRQUFTUixDQUFJLEdBSWxGUSxFQUFNLFlBQ1BWLEVBQUksaUJBQW1CLElBRTNCRyxFQUEwQkgsRUFBSyxVQUFXVSxFQUFNLE1BQU9BLEVBQU0sUUFBU1IsQ0FBSSxHQUU5RSxNQUNKLElBQUssTUFDR0EsRUFBSyxTQUFXLGNBQ1pRLEVBQU0sVUFDTlAsRUFBMEJILEVBQUssVUFBV1UsRUFBTSxNQUFPQSxFQUFNLFFBQVNSLENBQUksRUFHMUVDLEVBQTBCSCxFQUFLLG1CQUFvQlUsRUFBTSxNQUFPQSxFQUFNLFFBQVNSLENBQUksR0FJbEZRLEVBQU0sWUFDUFYsRUFBSSxpQkFBbUIsSUFFM0JHLEVBQTBCSCxFQUFLLFVBQVdVLEVBQU0sTUFBT0EsRUFBTSxRQUFTUixDQUFJLEdBRTlFLE1BQ0osSUFBSyxhQUNEQyxFQUEwQkgsRUFBSyxhQUFjVSxFQUFNLE1BQU9BLEVBQU0sUUFBU1IsQ0FBSSxFQUM3RSxLQUNoQixDQUVJLE9BQU9GLENBQ1gsQ0NoRE8sU0FBU1csSUFBa0IsQ0FDOUIsTUFBTyxDQUNILEtBQU0sU0FDZCxDQUNBLENDSE8sU0FBU0MsR0FBZ0JDLEVBQU1YLEVBQU0sQ0FDeEMsT0FBT00sRUFBU0ssRUFBSyxLQUFLLEtBQU1YLENBQUksQ0FDeEMsQ0NGTyxNQUFNWSxHQUFnQixDQUFDdkcsRUFBSzJGLElBQ3hCTSxFQUFTakcsRUFBSSxVQUFVLEtBQU0yRixDQUFJLEVDRHJDLFNBQVNhLEdBQWF4RyxFQUFLMkYsRUFBTWMsRUFBc0IsQ0FDMUQsTUFBTUMsRUFBV0QsR0FBd0JkLEVBQUssYUFDOUMsR0FBSSxNQUFNLFFBQVFlLENBQVEsRUFDdEIsTUFBTyxDQUNILE1BQU9BLEVBQVMsSUFBSSxDQUFDbEMsRUFBTS9DLElBQU0rRSxHQUFheEcsRUFBSzJGLEVBQU1uQixDQUFJLENBQUMsQ0FDMUUsRUFFSSxPQUFRa0MsRUFBUSxDQUNaLElBQUssU0FDTCxJQUFLLG1CQUNELE1BQU8sQ0FDSCxLQUFNLFNBQ04sT0FBUSxXQUN4QixFQUNRLElBQUssY0FDRCxNQUFPLENBQ0gsS0FBTSxTQUNOLE9BQVEsTUFDeEIsRUFDUSxJQUFLLFVBQ0QsT0FBT0MsR0FBa0IzRyxFQUFLMkYsQ0FBSSxDQUM5QyxDQUNBLENBQ0EsTUFBTWdCLEdBQW9CLENBQUMzRyxFQUFLMkYsSUFBUyxDQUNyQyxNQUFNRixFQUFNLENBQ1IsS0FBTSxVQUNOLE9BQVEsV0FDaEIsRUFDSSxHQUFJRSxFQUFLLFNBQVcsV0FDaEIsT0FBT0YsRUFFWCxVQUFXVSxLQUFTbkcsRUFBSSxPQUNwQixPQUFRbUcsRUFBTSxLQUFJLENBQ2QsSUFBSyxNQUNEUCxFQUEwQkgsRUFBSyxVQUFXVSxFQUFNLE1BQ2hEQSxFQUFNLFFBQVNSLENBQUksRUFDbkIsTUFDSixJQUFLLE1BQ0RDLEVBQTBCSCxFQUFLLFVBQVdVLEVBQU0sTUFDaERBLEVBQU0sUUFBU1IsQ0FBSSxFQUNuQixLQUNoQixDQUVJLE9BQU9GLENBQ1gsRUM1Q08sU0FBU21CLEdBQWdCTixFQUFNWCxFQUFNLENBQ3hDLE1BQU8sQ0FDSCxHQUFHTSxFQUFTSyxFQUFLLFVBQVUsS0FBTVgsQ0FBSSxFQUNyQyxRQUFTVyxFQUFLLGFBQVksQ0FDbEMsQ0FDQSxDQ0xPLFNBQVNPLEdBQWdCUCxFQUFNWCxFQUFNbUIsRUFBaUIsQ0FDekQsT0FBT25CLEVBQUssaUJBQW1CLFFBQVVNLEVBQVNLLEVBQUssT0FBTyxLQUFNWCxFQUFNbUIsQ0FBZSxFQUFJLENBQUEsQ0FDakcsQ0NITyxTQUFTQyxHQUFhL0csRUFBSyxDQUM5QixNQUFPLENBQ0gsS0FBTSxTQUNOLEtBQU0sQ0FBQyxHQUFHQSxFQUFJLE1BQU0sQ0FDNUIsQ0FDQSxDQ0pBLE1BQU1nSCxHQUEwQkMsR0FDeEIsU0FBVUEsR0FBUUEsRUFBSyxPQUFTLFNBQ3pCLEdBQ0osVUFBV0EsRUFFZixTQUFTQyxHQUFxQmxILEVBQUsyRixFQUFNLENBQzVDLE1BQU03RCxFQUFRLENBQ1ZtRSxFQUFTakcsRUFBSSxLQUFLLEtBQU0sQ0FDcEIsR0FBRzJGLEVBQ0gsWUFBYSxDQUFDLEdBQUdBLEVBQUssWUFBYSxRQUFTLEdBQUcsQ0FDM0QsQ0FBUyxFQUNETSxFQUFTakcsRUFBSSxNQUFNLEtBQU0sQ0FDckIsR0FBRzJGLEVBQ0gsWUFBYSxDQUFDLEdBQUdBLEVBQUssWUFBYSxRQUFTLEdBQUcsQ0FDM0QsQ0FBUyxDQUNULEVBQU0sT0FBUW5FLEdBQU0sQ0FBQyxDQUFDQSxDQUFDLEVBQ25CLElBQUkyRixFQUF3QnhCLEVBQUssU0FBVyxvQkFBc0IsQ0FBRSxzQkFBdUIsRUFBSyxFQUFLLE9BQ3JHLE1BQU15QixFQUFjLENBQUEsRUFFcEIsT0FBQXRGLEVBQU0sUUFBUzFDLEdBQVcsQ0FDdEIsR0FBSTRILEdBQXVCNUgsQ0FBTSxFQUM3QmdJLEVBQVksS0FBSyxHQUFHaEksRUFBTyxLQUFLLEVBQzVCQSxFQUFPLHdCQUEwQixTQUdqQytILEVBQXdCLFlBRzNCLENBQ0QsSUFBSUUsRUFBZWpJLEVBQ25CLEdBQUkseUJBQTBCQSxHQUFVQSxFQUFPLHVCQUF5QixHQUFPLENBQzNFLEtBQU0sQ0FBRSxxQkFBQWtJLEVBQXNCLEdBQUd0RixDQUFJLEVBQUs1QyxFQUMxQ2lJLEVBQWVyRixDQUNuQixNQUdJbUYsRUFBd0IsT0FFNUJDLEVBQVksS0FBS0MsQ0FBWSxDQUNqQyxDQUNKLENBQUMsRUFDTUQsRUFBWSxPQUNmLENBQ0ksTUFBT0EsRUFDUCxHQUFHRCxDQUNmLEVBQ1UsTUFDVixDQ2hETyxTQUFTSSxHQUFnQnZILEVBQUsyRixFQUFNLENBQ3ZDLE1BQU02QixFQUFhLE9BQU94SCxFQUFJLE1BQzlCLE9BQUl3SCxJQUFlLFVBQ2ZBLElBQWUsVUFDZkEsSUFBZSxXQUNmQSxJQUFlLFNBQ1IsQ0FDSCxLQUFNLE1BQU0sUUFBUXhILEVBQUksS0FBSyxFQUFJLFFBQVUsUUFDdkQsRUFFUTJGLEVBQUssU0FBVyxXQUNULENBQ0gsS0FBTTZCLElBQWUsU0FBVyxVQUFZQSxFQUM1QyxLQUFNLENBQUN4SCxFQUFJLEtBQUssQ0FDNUIsRUFFVyxDQUNILEtBQU13SCxJQUFlLFNBQVcsVUFBWUEsRUFDNUMsTUFBT3hILEVBQUksS0FDbkIsQ0FDQSxDQ25CQSxJQUFJeUgsR0FPRyxNQUFNQyxHQUFjLENBSXZCLEtBQU0sbUJBQ04sTUFBTyxjQUNQLEtBQU0sMkJBSU4sTUFBTyxtR0FZUCxNQUFPLEtBQ0NELEtBQWUsU0FDZkEsR0FBYSxPQUFPLHVEQUF3RCxHQUFHLEdBRTVFQSxJQWNYLE9BQVEsbUVBQ1IsT0FBUSxxQkFDWixFQUNPLFNBQVNFLEdBQWUzSCxFQUFLMkYsRUFBTSxDQUN0QyxNQUFNRixFQUFNLENBQ1IsS0FBTSxRQUNkLEVBQ0ksU0FBU21DLEVBQWUvQixFQUFPLENBQzNCLE9BQU9GLEVBQUssa0JBQW9CLFNBQVdrQyxHQUFzQmhDLENBQUssRUFBSUEsQ0FDOUUsQ0FDQSxHQUFJN0YsRUFBSSxPQUNKLFVBQVdtRyxLQUFTbkcsRUFBSSxPQUNwQixPQUFRbUcsRUFBTSxLQUFJLENBQ2QsSUFBSyxNQUNEUCxFQUEwQkgsRUFBSyxZQUFhLE9BQU9BLEVBQUksV0FBYyxTQUFXLEtBQUssSUFBSUEsRUFBSSxVQUFXVSxFQUFNLEtBQUssRUFBSUEsRUFBTSxNQUFPQSxFQUFNLFFBQVNSLENBQUksRUFDdkosTUFDSixJQUFLLE1BQ0RDLEVBQTBCSCxFQUFLLFlBQWEsT0FBT0EsRUFBSSxXQUFjLFNBQVcsS0FBSyxJQUFJQSxFQUFJLFVBQVdVLEVBQU0sS0FBSyxFQUFJQSxFQUFNLE1BQU9BLEVBQU0sUUFBU1IsQ0FBSSxFQUN2SixNQUNKLElBQUssUUFDRCxPQUFRQSxFQUFLLGNBQWEsQ0FDdEIsSUFBSyxlQUNEbUMsR0FBVXJDLEVBQUssUUFBU1UsRUFBTSxRQUFTUixDQUFJLEVBQzNDLE1BQ0osSUFBSyxtQkFDRG1DLEdBQVVyQyxFQUFLLFlBQWFVLEVBQU0sUUFBU1IsQ0FBSSxFQUMvQyxNQUNKLElBQUssY0FDRG9DLEdBQVd0QyxFQUFLaUMsR0FBWSxNQUFPdkIsRUFBTSxRQUFTUixDQUFJLEVBQ3RELEtBQzVCLENBQ29CLE1BQ0osSUFBSyxNQUNEbUMsR0FBVXJDLEVBQUssTUFBT1UsRUFBTSxRQUFTUixDQUFJLEVBQ3pDLE1BQ0osSUFBSyxPQUNEbUMsR0FBVXJDLEVBQUssT0FBUVUsRUFBTSxRQUFTUixDQUFJLEVBQzFDLE1BQ0osSUFBSyxRQUNEb0MsR0FBV3RDLEVBQUtVLEVBQU0sTUFBT0EsRUFBTSxRQUFTUixDQUFJLEVBQ2hELE1BQ0osSUFBSyxPQUNEb0MsR0FBV3RDLEVBQUtpQyxHQUFZLEtBQU12QixFQUFNLFFBQVNSLENBQUksRUFDckQsTUFDSixJQUFLLFFBQ0RvQyxHQUFXdEMsRUFBS2lDLEdBQVksTUFBT3ZCLEVBQU0sUUFBU1IsQ0FBSSxFQUN0RCxNQUNKLElBQUssYUFDRG9DLEdBQVd0QyxFQUFLLE9BQU8sSUFBSW1DLEVBQWV6QixFQUFNLEtBQUssQ0FBQyxFQUFFLEVBQUdBLEVBQU0sUUFBU1IsQ0FBSSxFQUM5RSxNQUNKLElBQUssV0FDRG9DLEdBQVd0QyxFQUFLLE9BQU8sR0FBR21DLEVBQWV6QixFQUFNLEtBQUssQ0FBQyxHQUFHLEVBQUdBLEVBQU0sUUFBU1IsQ0FBSSxFQUM5RSxNQUNKLElBQUssV0FDRG1DLEdBQVVyQyxFQUFLLFlBQWFVLEVBQU0sUUFBU1IsQ0FBSSxFQUMvQyxNQUNKLElBQUssT0FDRG1DLEdBQVVyQyxFQUFLLE9BQVFVLEVBQU0sUUFBU1IsQ0FBSSxFQUMxQyxNQUNKLElBQUssT0FDRG1DLEdBQVVyQyxFQUFLLE9BQVFVLEVBQU0sUUFBU1IsQ0FBSSxFQUMxQyxNQUNKLElBQUssV0FDRG1DLEdBQVVyQyxFQUFLLFdBQVlVLEVBQU0sUUFBU1IsQ0FBSSxFQUM5QyxNQUNKLElBQUssU0FDREMsRUFBMEJILEVBQUssWUFBYSxPQUFPQSxFQUFJLFdBQWMsU0FBVyxLQUFLLElBQUlBLEVBQUksVUFBV1UsRUFBTSxLQUFLLEVBQUlBLEVBQU0sTUFBT0EsRUFBTSxRQUFTUixDQUFJLEVBQ3ZKQyxFQUEwQkgsRUFBSyxZQUFhLE9BQU9BLEVBQUksV0FBYyxTQUFXLEtBQUssSUFBSUEsRUFBSSxVQUFXVSxFQUFNLEtBQUssRUFBSUEsRUFBTSxNQUFPQSxFQUFNLFFBQVNSLENBQUksRUFDdkosTUFDSixJQUFLLFdBQVksQ0FDYm9DLEdBQVd0QyxFQUFLLE9BQU9tQyxFQUFlekIsRUFBTSxLQUFLLENBQUMsRUFBR0EsRUFBTSxRQUFTUixDQUFJLEVBQ3hFLEtBQ0osQ0FDQSxJQUFLLEtBQU0sQ0FDSFEsRUFBTSxVQUFZLE1BQ2xCMkIsR0FBVXJDLEVBQUssT0FBUVUsRUFBTSxRQUFTUixDQUFJLEVBRTFDUSxFQUFNLFVBQVksTUFDbEIyQixHQUFVckMsRUFBSyxPQUFRVSxFQUFNLFFBQVNSLENBQUksRUFFOUMsS0FDSixDQUNBLElBQUssUUFDRG9DLEdBQVd0QyxFQUFLaUMsR0FBWSxNQUFPdkIsRUFBTSxRQUFTUixDQUFJLEVBQ3RELE1BQ0osSUFBSyxPQUFRLENBQ1RvQyxHQUFXdEMsRUFBS2lDLEdBQVksS0FBTXZCLEVBQU0sUUFBU1IsQ0FBSSxFQUNyRCxLQUNKLENBQ0EsSUFBSyxTQUFVLENBQ1gsT0FBUUEsRUFBSyxlQUFjLENBQ3ZCLElBQUssZ0JBQWlCLENBQ2xCbUMsR0FBVXJDLEVBQUssU0FBVVUsRUFBTSxRQUFTUixDQUFJLEVBQzVDLEtBQ0osQ0FDQSxJQUFLLHlCQUEwQixDQUMzQkMsRUFBMEJILEVBQUssa0JBQW1CLFNBQVVVLEVBQU0sUUFBU1IsQ0FBSSxFQUMvRSxLQUNKLENBQ0EsSUFBSyxjQUFlLENBQ2hCb0MsR0FBV3RDLEVBQUtpQyxHQUFZLE9BQVF2QixFQUFNLFFBQVNSLENBQUksRUFDdkQsS0FDSixDQUN4QixDQUNvQixLQUNKLENBQ0EsSUFBSyxTQUNEb0MsR0FBV3RDLEVBQUtpQyxHQUFZLE9BQVF2QixFQUFNLFFBQVNSLENBQUksQ0FRM0UsQ0FHSSxPQUFPRixDQUNYLENBQ0EsTUFBTW9DLEdBQXlCaEMsR0FBVSxNQUFNLEtBQUtBLENBQUssRUFDcEQsSUFBS21DLEdBQU8sY0FBYyxLQUFLQSxDQUFDLEVBQUlBLEVBQUksS0FBS0EsQ0FBQyxFQUFHLEVBQ2pELEtBQUssRUFBRSxFQUNORixHQUFZLENBQUMxSSxFQUFReUcsRUFBT29DLEVBQVN0QyxJQUFTLE9BQzVDdkcsRUFBTyxTQUFVVyxFQUFBWCxFQUFPLFFBQVAsTUFBQVcsRUFBYyxLQUFNeUIsR0FBTUEsRUFBRSxTQUN4Q3BDLEVBQU8sUUFDUkEsRUFBTyxNQUFRLENBQUEsR0FFZkEsRUFBTyxTQUNQQSxFQUFPLE1BQU0sS0FBSyxDQUNkLE9BQVFBLEVBQU8sT0FDZixHQUFJQSxFQUFPLGNBQ1B1RyxFQUFLLGVBQWlCLENBQ3RCLGFBQWMsQ0FBRSxPQUFRdkcsRUFBTyxhQUFhLE1BQU0sQ0FDdEUsQ0FDQSxDQUFhLEVBQ0QsT0FBT0EsRUFBTyxPQUNWQSxFQUFPLGVBQ1AsT0FBT0EsRUFBTyxhQUFhLE9BQ3ZCLE9BQU8sS0FBS0EsRUFBTyxZQUFZLEVBQUUsU0FBVyxHQUM1QyxPQUFPQSxFQUFPLGVBSTFCQSxFQUFPLE1BQU0sS0FBSyxDQUNkLE9BQVF5RyxFQUNSLEdBQUlvQyxHQUFXdEMsRUFBSyxlQUFpQixDQUFFLGFBQWMsQ0FBRSxPQUFRc0MsQ0FBTyxFQUNsRixDQUFTLEdBR0RyQyxFQUEwQnhHLEVBQVEsU0FBVXlHLEVBQU9vQyxFQUFTdEMsQ0FBSSxDQUV4RSxFQUNNb0MsR0FBYSxDQUFDM0ksRUFBUTJCLEVBQU9rSCxFQUFTdEMsSUFBUyxPQUM3Q3ZHLEVBQU8sVUFBV1csRUFBQVgsRUFBTyxRQUFQLE1BQUFXLEVBQWMsS0FBTXlCLEdBQU1BLEVBQUUsVUFDekNwQyxFQUFPLFFBQ1JBLEVBQU8sTUFBUSxDQUFBLEdBRWZBLEVBQU8sVUFDUEEsRUFBTyxNQUFNLEtBQUssQ0FDZCxRQUFTQSxFQUFPLFFBQ2hCLEdBQUlBLEVBQU8sY0FDUHVHLEVBQUssZUFBaUIsQ0FDdEIsYUFBYyxDQUFFLFFBQVN2RyxFQUFPLGFBQWEsT0FBTyxDQUN4RSxDQUNBLENBQWEsRUFDRCxPQUFPQSxFQUFPLFFBQ1ZBLEVBQU8sZUFDUCxPQUFPQSxFQUFPLGFBQWEsUUFDdkIsT0FBTyxLQUFLQSxFQUFPLFlBQVksRUFBRSxTQUFXLEdBQzVDLE9BQU9BLEVBQU8sZUFJMUJBLEVBQU8sTUFBTSxLQUFLLENBQ2QsUUFBUzhJLEdBQWNuSCxFQUFPNEUsQ0FBSSxFQUNsQyxHQUFJc0MsR0FBV3RDLEVBQUssZUFBaUIsQ0FBRSxhQUFjLENBQUUsUUFBU3NDLENBQU8sRUFDbkYsQ0FBUyxHQUdEckMsRUFBMEJ4RyxFQUFRLFVBQVc4SSxHQUFjbkgsRUFBTzRFLENBQUksRUFBR3NDLEVBQVN0QyxDQUFJLENBRTlGLEVBRU11QyxHQUFnQixDQUFDQyxFQUFpQnhDLElBQVMsT0FDN0MsTUFBTTVFLEVBQVEsT0FBT29ILEdBQW9CLFdBQWFBLEVBQWUsRUFBS0EsRUFDMUUsR0FBSSxDQUFDeEMsRUFBSyxpQkFBbUIsQ0FBQzVFLEVBQU0sTUFDaEMsT0FBT0EsRUFBTSxPQUVqQixNQUFNcUgsRUFBUSxDQUNWLEVBQUdySCxFQUFNLE1BQU0sU0FBUyxHQUFHLEVBQzNCLEVBQUdBLEVBQU0sTUFBTSxTQUFTLEdBQUcsRUFDM0IsRUFBR0EsRUFBTSxNQUFNLFNBQVMsR0FBRyxDQUNuQyxFQUVVc0gsRUFBU0QsRUFBTSxFQUFJckgsRUFBTSxPQUFPLFlBQVcsRUFBS0EsRUFBTSxPQUM1RCxJQUFJeUIsRUFBVSxHQUNWOEYsRUFBWSxHQUNaQyxFQUFjLEdBQ2RDLEVBQWMsR0FDbEIsUUFBUy9HLEVBQUksRUFBR0EsRUFBSTRHLEVBQU8sT0FBUTVHLElBQUssQ0FDcEMsR0FBSTZHLEVBQVcsQ0FDWDlGLEdBQVc2RixFQUFPNUcsQ0FBQyxFQUNuQjZHLEVBQVksR0FDWixRQUNKLENBQ0EsR0FBSUYsRUFBTSxHQUNOLEdBQUlHLEdBQ0EsR0FBSUYsRUFBTzVHLENBQUMsRUFBRSxNQUFNLE9BQU8sRUFBRyxDQUN0QitHLEdBQ0FoRyxHQUFXNkYsRUFBTzVHLENBQUMsRUFDbkJlLEdBQVcsR0FBRzZGLEVBQU81RyxFQUFJLENBQUMsQ0FBQyxJQUFJNEcsRUFBTzVHLENBQUMsQ0FBQyxHQUFHLFlBQVcsRUFDdEQrRyxFQUFjLElBRVRILEVBQU81RyxFQUFJLENBQUMsSUFBTSxPQUFPMUIsRUFBQXNJLEVBQU81RyxFQUFJLENBQUMsSUFBWixNQUFBMUIsRUFBZSxNQUFNLFdBQ25EeUMsR0FBVzZGLEVBQU81RyxDQUFDLEVBQ25CK0csRUFBYyxJQUdkaEcsR0FBVyxHQUFHNkYsRUFBTzVHLENBQUMsQ0FBQyxHQUFHNEcsRUFBTzVHLENBQUMsRUFBRSxZQUFXLENBQUUsR0FFckQsUUFDSixVQUVLNEcsRUFBTzVHLENBQUMsRUFBRSxNQUFNLE9BQU8sRUFBRyxDQUMvQmUsR0FBVyxJQUFJNkYsRUFBTzVHLENBQUMsQ0FBQyxHQUFHNEcsRUFBTzVHLENBQUMsRUFBRSxZQUFXLENBQUUsSUFDbEQsUUFDSixFQUVKLEdBQUkyRyxFQUFNLEdBQ04sR0FBSUMsRUFBTzVHLENBQUMsSUFBTSxJQUFLLENBQ25CZSxHQUFXO0FBQUEsS0FDWCxRQUNKLFNBQ1M2RixFQUFPNUcsQ0FBQyxJQUFNLElBQUssQ0FDeEJlLEdBQVc7QUFBQSxLQUNYLFFBQ0osRUFFSixHQUFJNEYsRUFBTSxHQUFLQyxFQUFPNUcsQ0FBQyxJQUFNLElBQUssQ0FDOUJlLEdBQVcrRixFQUFjLEdBQUdGLEVBQU81RyxDQUFDLENBQUM7QUFBQSxFQUFTLElBQUk0RyxFQUFPNUcsQ0FBQyxDQUFDO0FBQUEsR0FDM0QsUUFDSixDQUNBZSxHQUFXNkYsRUFBTzVHLENBQUMsRUFDZjRHLEVBQU81RyxDQUFDLElBQU0sS0FDZDZHLEVBQVksR0FFUEMsR0FBZUYsRUFBTzVHLENBQUMsSUFBTSxJQUNsQzhHLEVBQWMsR0FFVCxDQUFDQSxHQUFlRixFQUFPNUcsQ0FBQyxJQUFNLE1BQ25DOEcsRUFBYyxHQUV0QixDQUNBLEdBQUksQ0FDQSxNQUFNRSxFQUFZLElBQUksT0FBT2pHLENBQU8sQ0FDeEMsTUFDTSxDQUNGLGVBQVEsS0FBSyxzQ0FBc0NtRCxFQUFLLFlBQVksS0FBSyxHQUFHLENBQUMsdUVBQXVFLEVBQzdJNUUsRUFBTSxNQUNqQixDQUNBLE9BQU95QixDQUNYLEVDblRPLFNBQVNrRyxHQUFlMUksRUFBSzJGLEVBQU0sYUFDdEMsR0FBSUEsRUFBSyxTQUFXLGNBQWM1RixFQUFBQyxFQUFJLFVBQUosWUFBQUQsRUFBYSxLQUFLLFlBQWErRixFQUFzQixRQUNuRixNQUFPLENBQ0gsS0FBTSxTQUNOLFNBQVU5RixFQUFJLFFBQVEsS0FBSyxPQUMzQixXQUFZQSxFQUFJLFFBQVEsS0FBSyxPQUFPLE9BQU8sQ0FBQzJJLEVBQUt2SCxLQUFTLENBQ3RELEdBQUd1SCxFQUNILENBQUN2SCxDQUFHLEVBQUc2RSxFQUFTakcsRUFBSSxVQUFVLEtBQU0sQ0FDaEMsR0FBRzJGLEVBQ0gsWUFBYSxDQUFDLEdBQUdBLEVBQUssWUFBYSxhQUFjdkUsQ0FBRyxDQUN4RSxDQUFpQixHQUFLLENBQUEsQ0FDdEIsR0FBZ0IsQ0FBQSxDQUFFLEVBQ04scUJBQXNCLEVBQ2xDLEVBRUksTUFBTWhDLEVBQVMsQ0FDWCxLQUFNLFNBQ04scUJBQXNCNkcsRUFBU2pHLEVBQUksVUFBVSxLQUFNLENBQy9DLEdBQUcyRixFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFlBQWEsc0JBQXNCLENBQ3JFLENBQVMsR0FBSyxDQUFBLENBQ2QsRUFDSSxHQUFJQSxFQUFLLFNBQVcsV0FDaEIsT0FBT3ZHLEVBRVgsS0FBSWlCLEVBQUFMLEVBQUksVUFBSixZQUFBSyxFQUFhLEtBQUssWUFBYXlGLEVBQXNCLGFBQWF2RSxFQUFBdkIsRUFBSSxRQUFRLEtBQUssU0FBakIsTUFBQXVCLEVBQXlCLFFBQVEsQ0FDbkcsTUFBTXFILEVBQVUsT0FBTyxRQUFRakIsR0FBZTNILEVBQUksUUFBUSxLQUFNMkYsQ0FBSSxDQUFDLEVBQUUsT0FBTyxDQUFDZ0QsRUFBSyxDQUFDdkgsRUFBS3lFLENBQUssSUFBT3pFLElBQVEsT0FBU3VILEVBQU0sQ0FBRSxHQUFHQSxFQUFLLENBQUN2SCxDQUFHLEVBQUd5RSxDQUFLLEVBQUssQ0FBQSxDQUFFLEVBQzFKLE1BQU8sQ0FDSCxHQUFHekcsRUFDSCxjQUFld0osQ0FDM0IsQ0FDSSxXQUNTakYsRUFBQTNELEVBQUksVUFBSixZQUFBMkQsRUFBYSxLQUFLLFlBQWFtQyxFQUFzQixRQUMxRCxNQUFPLENBQ0gsR0FBRzFHLEVBQ0gsY0FBZSxDQUNYLEtBQU1ZLEVBQUksUUFBUSxLQUFLLE1BQ3ZDLENBQ0EsRUFFSSxPQUFPWixDQUNYLENDMUNPLFNBQVN5SixHQUFZN0ksRUFBSzJGLEVBQU0sQ0FDbkMsR0FBSUEsRUFBSyxjQUFnQixTQUNyQixPQUFPK0MsR0FBZTFJLEVBQUsyRixDQUFJLEVBRW5DLE1BQU1tRCxFQUFPN0MsRUFBU2pHLEVBQUksUUFBUSxLQUFNLENBQ3BDLEdBQUcyRixFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFlBQWEsUUFBUyxRQUFTLEdBQUcsQ0FDaEUsQ0FBSyxHQUFLLENBQUEsRUFDQTFELEVBQVNnRSxFQUFTakcsRUFBSSxVQUFVLEtBQU0sQ0FDeEMsR0FBRzJGLEVBQ0gsWUFBYSxDQUFDLEdBQUdBLEVBQUssWUFBYSxRQUFTLFFBQVMsR0FBRyxDQUNoRSxDQUFLLEdBQUssQ0FBQSxFQUNOLE1BQU8sQ0FDSCxLQUFNLFFBQ04sU0FBVSxJQUNWLE1BQU8sQ0FDSCxLQUFNLFFBQ04sTUFBTyxDQUFDbUQsRUFBTTdHLENBQU0sRUFDcEIsU0FBVSxFQUNWLFNBQVUsQ0FDdEIsQ0FDQSxDQUNBLENDeEJPLFNBQVM4RyxHQUFtQi9JLEVBQUssQ0FDcEMsTUFBTWdKLEVBQVNoSixFQUFJLE9BSWJpSixFQUhhLE9BQU8sS0FBS2pKLEVBQUksTUFBTSxFQUFFLE9BQVFvQixHQUN4QyxPQUFPNEgsRUFBT0EsRUFBTzVILENBQUcsQ0FBQyxHQUFNLFFBQ3pDLEVBQytCLElBQUtBLEdBQVE0SCxFQUFPNUgsQ0FBRyxDQUFDLEVBQ2xEOEgsRUFBYyxNQUFNLEtBQUssSUFBSSxJQUFJRCxFQUFhLElBQUtoSCxHQUFXLE9BQU9BLENBQU0sQ0FBQyxDQUFDLEVBQ25GLE1BQU8sQ0FDSCxLQUFNaUgsRUFBWSxTQUFXLEVBQ3pCQSxFQUFZLENBQUMsSUFBTSxTQUNmLFNBQ0UsU0FDSixDQUFDLFNBQVUsUUFBUSxFQUN6QixLQUFNRCxDQUNkLENBQ0EsQ0NmTyxTQUFTRSxJQUFnQixDQUM1QixNQUFPLENBQ0gsSUFBSyxDQUFBLENBQ2IsQ0FDQSxDQ0pPLFNBQVNDLEdBQWF6RCxFQUFNLENBQy9CLE9BQU9BLEVBQUssU0FBVyxXQUNuQixDQUNJLEtBQU0sQ0FBQyxNQUFNLEVBQ2IsU0FBVSxFQUN0QixFQUNVLENBQ0UsS0FBTSxNQUNsQixDQUNBLENDUk8sTUFBTTBELEdBQW9CLENBQzdCLFVBQVcsU0FDWCxVQUFXLFNBQ1gsVUFBVyxVQUNYLFdBQVksVUFDWixRQUFTLE1BQ2IsRUFDTyxTQUFTQyxHQUFjdEosRUFBSzJGLEVBQU0sQ0FDckMsR0FBSUEsRUFBSyxTQUFXLFdBQ2hCLE9BQU80RCxHQUFRdkosRUFBSzJGLENBQUksRUFDNUIsTUFBTVgsRUFBVWhGLEVBQUksbUJBQW1CLElBQU0sTUFBTSxLQUFLQSxFQUFJLFFBQVEsUUFBUSxFQUFJQSxFQUFJLFFBRXBGLEdBQUlnRixFQUFRLE1BQU94RCxHQUFNQSxFQUFFLEtBQUssWUFBWTZILEtBQXNCLENBQUM3SCxFQUFFLEtBQUssUUFBVSxDQUFDQSxFQUFFLEtBQUssT0FBTyxPQUFPLEVBQUcsQ0FFekcsTUFBTWdJLEVBQVF4RSxFQUFRLE9BQU8sQ0FBQ3dFLEVBQU9oSSxJQUFNLENBQ3ZDLE1BQU15RixFQUFPb0MsR0FBa0I3SCxFQUFFLEtBQUssUUFBUSxFQUM5QyxPQUFPeUYsR0FBUSxDQUFDdUMsRUFBTSxTQUFTdkMsQ0FBSSxFQUFJLENBQUMsR0FBR3VDLEVBQU92QyxDQUFJLEVBQUl1QyxDQUM5RCxFQUFHLENBQUEsQ0FBRSxFQUNMLE1BQU8sQ0FDSCxLQUFNQSxFQUFNLE9BQVMsRUFBSUEsRUFBUUEsRUFBTSxDQUFDLENBQ3BELENBQ0ksU0FDU3hFLEVBQVEsTUFBT3hELEdBQU1BLEVBQUUsS0FBSyxXQUFhLGNBQWdCLENBQUNBLEVBQUUsV0FBVyxFQUFHLENBRS9FLE1BQU1nSSxFQUFReEUsRUFBUSxPQUFPLENBQUMyRCxFQUFLbkgsSUFBTSxDQUNyQyxNQUFNeUYsRUFBTyxPQUFPekYsRUFBRSxLQUFLLE1BQzNCLE9BQVF5RixFQUFJLENBQ1IsSUFBSyxTQUNMLElBQUssU0FDTCxJQUFLLFVBQ0QsTUFBTyxDQUFDLEdBQUcwQixFQUFLMUIsQ0FBSSxFQUN4QixJQUFLLFNBQ0QsTUFBTyxDQUFDLEdBQUcwQixFQUFLLFNBQVMsRUFDN0IsSUFBSyxTQUNELEdBQUluSCxFQUFFLEtBQUssUUFBVSxLQUNqQixNQUFPLENBQUMsR0FBR21ILEVBQUssTUFBTSxFQUM5QixJQUFLLFNBQ0wsSUFBSyxZQUNMLElBQUssV0FDTCxRQUNJLE9BQU9BLENBQzNCLENBQ1EsRUFBRyxDQUFBLENBQUUsRUFDTCxHQUFJYSxFQUFNLFNBQVd4RSxFQUFRLE9BQVEsQ0FFakMsTUFBTXlFLEVBQWNELEVBQU0sT0FBTyxDQUFDaEksRUFBRyxFQUFHRSxJQUFNQSxFQUFFLFFBQVFGLENBQUMsSUFBTSxDQUFDLEVBQ2hFLE1BQU8sQ0FDSCxLQUFNaUksRUFBWSxPQUFTLEVBQUlBLEVBQWNBLEVBQVksQ0FBQyxFQUMxRCxLQUFNekUsRUFBUSxPQUFPLENBQUMyRCxFQUFLbkgsSUFDaEJtSCxFQUFJLFNBQVNuSCxFQUFFLEtBQUssS0FBSyxFQUFJbUgsRUFBTSxDQUFDLEdBQUdBLEVBQUtuSCxFQUFFLEtBQUssS0FBSyxFQUNoRSxDQUFBLENBQUUsQ0FDckIsQ0FDUSxDQUNKLFNBQ1N3RCxFQUFRLE1BQU94RCxHQUFNQSxFQUFFLEtBQUssV0FBYSxTQUFTLEVBQ3ZELE1BQU8sQ0FDSCxLQUFNLFNBQ04sS0FBTXdELEVBQVEsT0FBTyxDQUFDMkQsRUFBS25ILElBQU0sQ0FBQyxHQUFHbUgsRUFBSyxHQUFHbkgsRUFBRSxLQUFLLE9BQU8sT0FBUUEsR0FBTSxDQUFDbUgsRUFBSSxTQUFTbkgsQ0FBQyxDQUFDLENBQUMsRUFBRyxFQUFFLENBQzNHLEVBRUksT0FBTytILEdBQVF2SixFQUFLMkYsQ0FBSSxDQUM1QixDQUNBLE1BQU00RCxHQUFVLENBQUN2SixFQUFLMkYsSUFBUyxDQUMzQixNQUFNK0QsR0FBUzFKLEVBQUksbUJBQW1CLElBQU0sTUFBTSxLQUFLQSxFQUFJLFFBQVEsUUFBUSxFQUFJQSxFQUFJLFNBQzlFLElBQUksQ0FBQ3dCLEVBQUdDLElBQU13RSxFQUFTekUsRUFBRSxLQUFNLENBQ2hDLEdBQUdtRSxFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFlBQWEsUUFBUyxHQUFHbEUsQ0FBQyxFQUFFLENBQzFELENBQUssQ0FBQyxFQUNHLE9BQVFELEdBQU0sQ0FBQyxDQUFDQSxJQUFNLENBQUNtRSxFQUFLLGNBQWlCLE9BQU9uRSxHQUFNLFVBQVksT0FBTyxLQUFLQSxDQUFDLEVBQUUsT0FBUyxFQUFHLEVBQ3RHLE9BQU9rSSxFQUFNLE9BQVMsQ0FBRSxNQUFBQSxDQUFLLEVBQUssTUFDdEMsRUNyRU8sU0FBU0MsR0FBaUIzSixFQUFLMkYsRUFBTSxDQUN4QyxHQUFJLENBQUMsWUFBYSxZQUFhLFlBQWEsYUFBYyxTQUFTLEVBQUUsU0FBUzNGLEVBQUksVUFBVSxLQUFLLFFBQVEsSUFDcEcsQ0FBQ0EsRUFBSSxVQUFVLEtBQUssUUFBVSxDQUFDQSxFQUFJLFVBQVUsS0FBSyxPQUFPLFFBQzFELE9BQUkyRixFQUFLLFNBQVcsWUFBY0EsRUFBSyxtQkFBcUIsV0FDakQsQ0FDSCxLQUFNMEQsR0FBa0JySixFQUFJLFVBQVUsS0FBSyxRQUFRLEVBQ25ELFNBQVUsRUFDMUIsRUFFZSxDQUNILEtBQU0sQ0FBQ3FKLEdBQWtCckosRUFBSSxVQUFVLEtBQUssUUFBUSxFQUFHLE1BQU0sQ0FDekUsRUFFSSxHQUFJMkYsRUFBSyxTQUFXLFdBQVksQ0FDNUIsTUFBTWlFLEVBQU8zRCxFQUFTakcsRUFBSSxVQUFVLEtBQU0sQ0FDdEMsR0FBRzJGLEVBQ0gsWUFBYSxDQUFDLEdBQUdBLEVBQUssV0FBVyxDQUM3QyxDQUFTLEVBQ0QsT0FBSWlFLEdBQVEsU0FBVUEsRUFDWCxDQUFFLE1BQU8sQ0FBQ0EsQ0FBSSxFQUFHLFNBQVUsRUFBSSxFQUNuQ0EsR0FBUSxDQUFFLEdBQUdBLEVBQU0sU0FBVSxFQUFJLENBQzVDLENBQ0EsTUFBTUEsRUFBTzNELEVBQVNqRyxFQUFJLFVBQVUsS0FBTSxDQUN0QyxHQUFHMkYsRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxZQUFhLFFBQVMsR0FBRyxDQUN2RCxDQUFLLEVBQ0QsT0FBT2lFLEdBQVEsQ0FBRSxNQUFPLENBQUNBLEVBQU0sQ0FBRSxLQUFNLE1BQU0sQ0FBRSxDQUFDLENBQ3BELENDNUJPLFNBQVNDLEdBQWU3SixFQUFLMkYsRUFBTSxDQUN0QyxNQUFNRixFQUFNLENBQ1IsS0FBTSxRQUNkLEVBQ0ksR0FBSSxDQUFDekYsRUFBSSxPQUNMLE9BQU95RixFQUNYLFVBQVdVLEtBQVNuRyxFQUFJLE9BQ3BCLE9BQVFtRyxFQUFNLEtBQUksQ0FDZCxJQUFLLE1BQ0RWLEVBQUksS0FBTyxVQUNYRCxHQUFnQkMsRUFBSyxPQUFRVSxFQUFNLFFBQVNSLENBQUksRUFDaEQsTUFDSixJQUFLLE1BQ0dBLEVBQUssU0FBVyxjQUNaUSxFQUFNLFVBQ05QLEVBQTBCSCxFQUFLLFVBQVdVLEVBQU0sTUFBT0EsRUFBTSxRQUFTUixDQUFJLEVBRzFFQyxFQUEwQkgsRUFBSyxtQkFBb0JVLEVBQU0sTUFBT0EsRUFBTSxRQUFTUixDQUFJLEdBSWxGUSxFQUFNLFlBQ1BWLEVBQUksaUJBQW1CLElBRTNCRyxFQUEwQkgsRUFBSyxVQUFXVSxFQUFNLE1BQU9BLEVBQU0sUUFBU1IsQ0FBSSxHQUU5RSxNQUNKLElBQUssTUFDR0EsRUFBSyxTQUFXLGNBQ1pRLEVBQU0sVUFDTlAsRUFBMEJILEVBQUssVUFBV1UsRUFBTSxNQUFPQSxFQUFNLFFBQVNSLENBQUksRUFHMUVDLEVBQTBCSCxFQUFLLG1CQUFvQlUsRUFBTSxNQUFPQSxFQUFNLFFBQVNSLENBQUksR0FJbEZRLEVBQU0sWUFDUFYsRUFBSSxpQkFBbUIsSUFFM0JHLEVBQTBCSCxFQUFLLFVBQVdVLEVBQU0sTUFBT0EsRUFBTSxRQUFTUixDQUFJLEdBRTlFLE1BQ0osSUFBSyxhQUNEQyxFQUEwQkgsRUFBSyxhQUFjVSxFQUFNLE1BQU9BLEVBQU0sUUFBU1IsQ0FBSSxFQUM3RSxLQUNoQixDQUVJLE9BQU9GLENBQ1gsQ0NsREEsU0FBU3FFLEdBQTJCOUosRUFBSzJGLEVBQU0sQ0FDM0MsT0FBSUEsRUFBSywyQkFBNkIsU0FDM0IzRixFQUFJLFNBQVMsS0FBSyxXQUFhLFdBQ2xDQSxFQUFJLGNBQWdCLFNBQ2xCaUcsRUFBU2pHLEVBQUksU0FBUyxLQUFNLENBQzFCLEdBQUcyRixFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFlBQWEsc0JBQXNCLENBQ3pFLENBQWEsR0FBSyxHQUdIM0YsRUFBSSxTQUFTLEtBQUssV0FBYSxXQUNsQ0EsRUFBSSxjQUFnQixjQUNsQmlHLEVBQVNqRyxFQUFJLFNBQVMsS0FBTSxDQUMxQixHQUFHMkYsRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxZQUFhLHNCQUFzQixDQUN6RSxDQUFhLEdBQUssRUFFbEIsQ0FDTyxTQUFTb0UsR0FBZS9KLEVBQUsyRixFQUFNLENBQ3RDLE1BQU14RixFQUFTLENBQ1gsS0FBTSxTQUNOLEdBQUcsT0FBTyxRQUFRSCxFQUFJLE1BQUssQ0FBRSxFQUFFLE9BQU8sQ0FBQzJJLEVBQUssQ0FBQ3FCLEVBQVVDLENBQU8sSUFBTSxPQUNoRSxHQUFJQSxJQUFZLFFBQWFBLEVBQVEsT0FBUyxPQUMxQyxPQUFPdEIsRUFDWCxNQUFNdUIsRUFBZSxDQUFDLEdBQUd2RSxFQUFLLFlBQWEsYUFBY3FFLENBQVEsRUFDM0RHLEVBQVlsRSxFQUFTZ0UsRUFBUSxLQUFNLENBQ3JDLEdBQUd0RSxFQUNILFlBQWF1RSxFQUNiLGFBQUFBLENBQ2hCLENBQWEsRUFDRCxHQUFJQyxJQUFjLE9BQ2QsT0FBT3hCLEVBQ1gsR0FBSWhELEVBQUssa0JBQ0xzRSxFQUFRLFdBQVUsR0FDbEIsQ0FBQ0EsRUFBUSxXQUFVLEdBQ25CLFFBQU9sSyxFQUFBa0ssRUFBUSxPQUFSLFlBQUFsSyxFQUFjLGNBQWlCLElBQ3RDLE1BQU0sSUFBSSxNQUFNLGtCQUFrQm1LLEVBQWEsS0FBSyxHQUFHLENBQUMsbU1BQW1NLEVBRS9QLE1BQU8sQ0FDSCxXQUFZLENBQ1IsR0FBR3ZCLEVBQUksV0FDUCxDQUFDcUIsQ0FBUSxFQUFHRyxDQUNoQyxFQUNnQixTQUFVRixFQUFRLFdBQVUsR0FBTSxDQUFDdEUsRUFBSyxpQkFBbUJnRCxFQUFJLFNBQVcsQ0FBQyxHQUFHQSxFQUFJLFNBQVVxQixDQUFRLENBQ3BILENBQ1EsRUFBRyxDQUFFLFdBQVksQ0FBQSxFQUFJLFNBQVUsQ0FBQSxDQUFFLENBQUUsRUFDbkMscUJBQXNCRixHQUEyQjlKLEVBQUsyRixDQUFJLENBQ2xFLEVBQ0ksT0FBS3hGLEVBQU8sU0FBUyxRQUNqQixPQUFPQSxFQUFPLFNBQ1hBLENBQ1gsQ0NuRE8sTUFBTWlLLEdBQW1CLENBQUNwSyxFQUFLMkYsSUFBUyxDQUMzQyxHQUFJQSxFQUFLLGNBQ0xBLEVBQUssWUFBWSxNQUFNLEVBQUdBLEVBQUssYUFBYSxNQUFNLEVBQUUsU0FBUSxJQUFPQSxFQUFLLGFBQWEsU0FBUSxFQUM3RixPQUFPTSxFQUFTakcsRUFBSSxVQUFVLEtBQU0sQ0FBRSxHQUFHMkYsRUFBTSxZQUFhQSxFQUFLLFlBQWEsRUFFbEYsTUFBTTBFLEVBQWNwRSxFQUFTakcsRUFBSSxVQUFVLEtBQU0sQ0FDN0MsR0FBRzJGLEVBQ0gsWUFBYSxDQUFDLEdBQUdBLEVBQUssWUFBYSxRQUFTLEdBQUcsQ0FDdkQsQ0FBSyxFQUNELE9BQU8wRSxFQUNILENBQ0ksTUFBTyxDQUNILENBQ0ksSUFBSyxDQUFBLENBQ3pCLEVBQ2dCQSxDQUNoQixDQUNBLEVBQ1UsQ0FBQSxDQUNWLEVDbkJhQyxHQUFtQixDQUFDdEssRUFBSzJGLElBQVMsQ0FDM0MsR0FBSUEsRUFBSyxlQUFpQixRQUN0QixPQUFPTSxFQUFTakcsRUFBSSxHQUFHLEtBQU0yRixDQUFJLEVBRWhDLEdBQUlBLEVBQUssZUFBaUIsU0FDM0IsT0FBT00sRUFBU2pHLEVBQUksSUFBSSxLQUFNMkYsQ0FBSSxFQUV0QyxNQUFNakUsRUFBSXVFLEVBQVNqRyxFQUFJLEdBQUcsS0FBTSxDQUM1QixHQUFHMkYsRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxZQUFhLFFBQVMsR0FBRyxDQUN2RCxDQUFLLEVBQ0toRSxFQUFJc0UsRUFBU2pHLEVBQUksSUFBSSxLQUFNLENBQzdCLEdBQUcyRixFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFlBQWEsUUFBU2pFLEVBQUksSUFBTSxHQUFHLENBQ2pFLENBQUssRUFDRCxNQUFPLENBQ0gsTUFBTyxDQUFDQSxFQUFHQyxDQUFDLEVBQUUsT0FBUUgsR0FBTUEsSUFBTSxNQUFTLENBQ25ELENBQ0EsRUNsQk8sU0FBUytJLEdBQWdCdkssRUFBSzJGLEVBQU0sQ0FDdkMsT0FBT00sRUFBU2pHLEVBQUksS0FBSyxLQUFNMkYsQ0FBSSxDQUN2QyxDQ0RPLFNBQVM2RSxHQUFZeEssRUFBSzJGLEVBQU0sQ0FLbkMsTUFBTXZHLEVBQVMsQ0FDWCxLQUFNLFFBQ04sWUFBYSxHQUNiLE1BUFU2RyxFQUFTakcsRUFBSSxVQUFVLEtBQU0sQ0FDdkMsR0FBRzJGLEVBQ0gsWUFBYSxDQUFDLEdBQUdBLEVBQUssWUFBYSxPQUFPLENBQ2xELENBQUssQ0FLTCxFQUNJLE9BQUkzRixFQUFJLFNBQ0o0RixFQUEwQnhHLEVBQVEsV0FBWVksRUFBSSxRQUFRLE1BQU9BLEVBQUksUUFBUSxRQUFTMkYsQ0FBSSxFQUUxRjNGLEVBQUksU0FDSjRGLEVBQTBCeEcsRUFBUSxXQUFZWSxFQUFJLFFBQVEsTUFBT0EsRUFBSSxRQUFRLFFBQVMyRixDQUFJLEVBRXZGdkcsQ0FDWCxDQ2xCTyxTQUFTcUwsR0FBY3pLLEVBQUsyRixFQUFNLENBQ3JDLE9BQUkzRixFQUFJLEtBQ0csQ0FDSCxLQUFNLFFBQ04sU0FBVUEsRUFBSSxNQUFNLE9BQ3BCLE1BQU9BLEVBQUksTUFDTixJQUFJLENBQUN3QixFQUFHQyxJQUFNd0UsRUFBU3pFLEVBQUUsS0FBTSxDQUNoQyxHQUFHbUUsRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxZQUFhLFFBQVMsR0FBR2xFLENBQUMsRUFBRSxDQUNsRSxDQUFhLENBQUMsRUFDRyxPQUFPLENBQUNrSCxFQUFLbkgsSUFBT0EsSUFBTSxPQUFZbUgsRUFBTSxDQUFDLEdBQUdBLEVBQUtuSCxDQUFDLEVBQUksQ0FBQSxDQUFFLEVBQ2pFLGdCQUFpQnlFLEVBQVNqRyxFQUFJLEtBQUssS0FBTSxDQUNyQyxHQUFHMkYsRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxZQUFhLGlCQUFpQixDQUNwRSxDQUFhLENBQ2IsRUFHZSxDQUNILEtBQU0sUUFDTixTQUFVM0YsRUFBSSxNQUFNLE9BQ3BCLFNBQVVBLEVBQUksTUFBTSxPQUNwQixNQUFPQSxFQUFJLE1BQ04sSUFBSSxDQUFDd0IsRUFBR0MsSUFBTXdFLEVBQVN6RSxFQUFFLEtBQU0sQ0FDaEMsR0FBR21FLEVBQ0gsWUFBYSxDQUFDLEdBQUdBLEVBQUssWUFBYSxRQUFTLEdBQUdsRSxDQUFDLEVBQUUsQ0FDbEUsQ0FBYSxDQUFDLEVBQ0csT0FBTyxDQUFDa0gsRUFBS25ILElBQU9BLElBQU0sT0FBWW1ILEVBQU0sQ0FBQyxHQUFHQSxFQUFLbkgsQ0FBQyxFQUFJLENBQUEsQ0FBRSxDQUM3RSxDQUVBLENDL0JPLFNBQVNrSixJQUFvQixDQUNoQyxNQUFPLENBQ0gsSUFBSyxDQUFBLENBQ2IsQ0FDQSxDQ0pPLFNBQVNDLElBQWtCLENBQzlCLE1BQU8sQ0FBQSxDQUNYLENDRE8sTUFBTUMsR0FBbUIsQ0FBQzVLLEVBQUsyRixJQUMzQk0sRUFBU2pHLEVBQUksVUFBVSxLQUFNMkYsQ0FBSSxFQzhCckMsU0FBU00sRUFBU2pHLEVBQUsyRixFQUFNbUIsRUFBa0IsR0FBTyxPQUN6RCxNQUFNK0QsRUFBV2xGLEVBQUssS0FBSyxJQUFJM0YsQ0FBRyxFQUNsQyxHQUFJMkYsRUFBSyxTQUFVLENBQ2YsTUFBTW1GLEdBQWlCL0ssRUFBQTRGLEVBQUssV0FBTCxZQUFBNUYsRUFBQSxLQUFBNEYsRUFBZ0IzRixFQUFLMkYsRUFBTWtGLEVBQVUvRCxHQUM1RCxHQUFJZ0UsSUFBbUJqRyxHQUNuQixPQUFPaUcsQ0FFZixDQUNBLEdBQUlELEdBQVksQ0FBQy9ELEVBQWlCLENBQzlCLE1BQU1pRSxFQUFhQyxHQUFRSCxFQUFVbEYsQ0FBSSxFQUN6QyxHQUFJb0YsSUFBZSxPQUNmLE1BQUksU0FBVUEsR0FDVnBGLEVBQUssU0FBUyxJQUFJb0YsRUFBVyxJQUFJLEVBRTlCQSxDQUVmLENBQ0EsTUFBTUUsRUFBVSxDQUFFLElBQUFqTCxFQUFLLEtBQU0yRixFQUFLLFlBQWEsV0FBWSxNQUFTLEVBQ3BFQSxFQUFLLEtBQUssSUFBSTNGLEVBQUtpTCxDQUFPLEVBQzFCLE1BQU1DLEVBQWFDLEdBQWFuTCxFQUFLQSxFQUFJLFNBQVUyRixFQUFNbUIsQ0FBZSxFQUN4RSxPQUFJb0UsR0FDQUUsR0FBUXBMLEVBQUsyRixFQUFNdUYsQ0FBVSxFQUVqQ0QsRUFBUSxXQUFhQyxFQUNkQSxDQUNYLENBQ0EsTUFBTUYsR0FBVSxDQUFDeEcsRUFBTW1CLElBQVMsQ0FDNUIsT0FBUUEsRUFBSyxhQUFZLENBQ3JCLElBQUssT0FDRCxNQUFPLENBQUUsS0FBTW5CLEVBQUssS0FBSyxLQUFLLEdBQUcsQ0FBQyxFQVN0QyxJQUFLLGtCQUNELE1BQU1lLEVBQU9mLEVBQUssS0FBSyxNQUFNbUIsRUFBSyxTQUFTLE9BQVMsQ0FBQyxFQUFFLEtBQUssR0FBRyxFQUcvRCxPQUFJSixJQUFTSSxFQUFLLE1BQVFBLEVBQUssZUFBaUIsa0JBQzVDQSxFQUFLLFlBQVlKLENBQUksRUFBSWYsRUFBSyxLQUUzQixDQUFFLEtBQU0sQ0FBQyxHQUFHbUIsRUFBSyxTQUFVQSxFQUFLLGVBQWdCSixDQUFJLEVBQUUsS0FBSyxHQUFHLENBQUMsRUFDMUUsSUFBSyxXQUNELE1BQU8sQ0FBRSxLQUFNOEYsR0FBZ0IxRixFQUFLLFlBQWFuQixFQUFLLElBQUksQ0FBQyxFQUMvRCxJQUFLLE9BQ0wsSUFBSyxPQUNELE9BQUlBLEVBQUssS0FBSyxPQUFTbUIsRUFBSyxZQUFZLFFBQ3BDbkIsRUFBSyxLQUFLLE1BQU0sQ0FBQ3FCLEVBQU95RixJQUFVM0YsRUFBSyxZQUFZMkYsQ0FBSyxJQUFNekYsQ0FBSyxHQUNuRSxRQUFRLEtBQUssbUNBQW1DRixFQUFLLFlBQVksS0FBSyxHQUFHLENBQUMscUJBQXFCLEVBQ3hGLENBQUEsR0FFSkEsRUFBSyxlQUFpQixPQUFTLENBQUEsRUFBSyxNQUV2RCxDQUNBLEVBQ00wRixHQUFrQixDQUFDRSxFQUFPQyxJQUFVLENBQ3RDLElBQUkvSixFQUFJLEVBQ1IsS0FBT0EsRUFBSThKLEVBQU0sUUFBVTlKLEVBQUkrSixFQUFNLFFBQzdCRCxFQUFNOUosQ0FBQyxJQUFNK0osRUFBTS9KLENBQUMsRUFEaUJBLElBQ3pDLENBR0osTUFBTyxFQUFFOEosRUFBTSxPQUFTOUosR0FBRyxTQUFRLEVBQUksR0FBRytKLEVBQU0sTUFBTS9KLENBQUMsQ0FBQyxFQUFFLEtBQUssR0FBRyxDQUN0RSxFQUNNMEosR0FBZSxDQUFDbkwsRUFBS3lMLEVBQVU5RixFQUFNbUIsSUFBb0IsQ0FDM0QsT0FBUTJFLEVBQVEsQ0FDWixLQUFLM0YsRUFBc0IsVUFDdkIsT0FBTzZCLEdBQWUzSCxFQUFLMkYsQ0FBSSxFQUNuQyxLQUFLRyxFQUFzQixVQUN2QixPQUFPK0QsR0FBZTdKLEVBQUsyRixDQUFJLEVBQ25DLEtBQUtHLEVBQXNCLFVBQ3ZCLE9BQU9pRSxHQUFlL0osRUFBSzJGLENBQUksRUFDbkMsS0FBS0csRUFBc0IsVUFDdkIsT0FBT0ksR0FBZWxHLEVBQUsyRixDQUFJLEVBQ25DLEtBQUtHLEVBQXNCLFdBQ3ZCLE9BQU9NLEdBQWUsRUFDMUIsS0FBS04sRUFBc0IsUUFDdkIsT0FBT1UsR0FBYXhHLEVBQUsyRixDQUFJLEVBQ2pDLEtBQUtHLEVBQXNCLGFBQ3ZCLE9BQU80RSxHQUFpQixFQUM1QixLQUFLNUUsRUFBc0IsUUFDdkIsT0FBT3NELEdBQWF6RCxDQUFJLEVBQzVCLEtBQUtHLEVBQXNCLFNBQ3ZCLE9BQU9FLEdBQWNoRyxFQUFLMkYsQ0FBSSxFQUNsQyxLQUFLRyxFQUFzQixTQUMzQixLQUFLQSxFQUFzQixzQkFDdkIsT0FBT3dELEdBQWN0SixFQUFLMkYsQ0FBSSxFQUNsQyxLQUFLRyxFQUFzQixnQkFDdkIsT0FBT29CLEdBQXFCbEgsRUFBSzJGLENBQUksRUFDekMsS0FBS0csRUFBc0IsU0FDdkIsT0FBTzJFLEdBQWN6SyxFQUFLMkYsQ0FBSSxFQUNsQyxLQUFLRyxFQUFzQixVQUN2QixPQUFPNEMsR0FBZTFJLEVBQUsyRixDQUFJLEVBQ25DLEtBQUtHLEVBQXNCLFdBQ3ZCLE9BQU95QixHQUFnQnZILEVBQUsyRixDQUFJLEVBQ3BDLEtBQUtHLEVBQXNCLFFBQ3ZCLE9BQU9pQixHQUFhL0csQ0FBRyxFQUMzQixLQUFLOEYsRUFBc0IsY0FDdkIsT0FBT2lELEdBQW1CL0ksQ0FBRyxFQUNqQyxLQUFLOEYsRUFBc0IsWUFDdkIsT0FBTzZELEdBQWlCM0osRUFBSzJGLENBQUksRUFDckMsS0FBS0csRUFBc0IsWUFDdkIsT0FBT3NFLEdBQWlCcEssRUFBSzJGLENBQUksRUFDckMsS0FBS0csRUFBc0IsT0FDdkIsT0FBTytDLEdBQVk3SSxFQUFLMkYsQ0FBSSxFQUNoQyxLQUFLRyxFQUFzQixPQUN2QixPQUFPMEUsR0FBWXhLLEVBQUsyRixDQUFJLEVBQ2hDLEtBQUtHLEVBQXNCLFFBQ3ZCLE9BQU9HLEVBQVNqRyxFQUFJLE9BQU0sRUFBRyxLQUFNMkYsQ0FBSSxFQUMzQyxLQUFLRyxFQUFzQixXQUN2QixPQUFPeUUsR0FBZ0J2SyxFQUFLMkYsQ0FBSSxFQUNwQyxLQUFLRyxFQUFzQixPQUMzQixLQUFLQSxFQUFzQixTQUN2QixPQUFPcUQsR0FBYSxFQUN4QixLQUFLckQsRUFBc0IsV0FDdkIsT0FBT2UsR0FBZ0I3RyxFQUFLMkYsRUFBTW1CLENBQWUsRUFDckQsS0FBS2hCLEVBQXNCLE9BQ3ZCLE9BQU9DLEdBQVcsRUFDdEIsS0FBS0QsRUFBc0IsV0FDdkIsT0FBTzZFLEdBQWUsRUFDMUIsS0FBSzdFLEVBQXNCLFdBQ3ZCLE9BQU9jLEdBQWdCNUcsRUFBSzJGLENBQUksRUFDcEMsS0FBS0csRUFBc0IsV0FDdkIsT0FBT08sR0FBZ0JyRyxFQUFLMkYsQ0FBSSxFQUNwQyxLQUFLRyxFQUFzQixZQUN2QixPQUFPOEUsR0FBaUI1SyxFQUFLMkYsQ0FBSSxFQUNyQyxLQUFLRyxFQUFzQixTQUN2QixPQUFPUyxHQUFjdkcsRUFBSzJGLENBQUksRUFDbEMsS0FBS0csRUFBc0IsWUFDdkIsT0FBT3dFLEdBQWlCdEssRUFBSzJGLENBQUksRUFDckMsS0FBS0csRUFBc0IsWUFDM0IsS0FBS0EsRUFBc0IsUUFDM0IsS0FBS0EsRUFBc0IsVUFDdkIsT0FDSixRQUNJLE9BQVM1RyxHQUFDLElBQXdCLENBQzlDLENBQ0EsRUFDTWtNLEdBQVUsQ0FBQ3BMLEVBQUsyRixFQUFNdUYsS0FDcEJsTCxFQUFJLGNBQ0prTCxFQUFXLFlBQWNsTCxFQUFJLFlBQ3pCMkYsRUFBSyxzQkFDTHVGLEVBQVcsb0JBQXNCbEwsRUFBSSxjQUd0Q2tMLEdDakxMUSxHQUFrQixDQUFDdE0sRUFBUTRGLElBQVksQ0FDekMsTUFBTVcsRUFBT1AsR0FBUUosQ0FBTyxFQUN0Qk8sRUFBTyxPQUFPUCxHQUFZLFNBQVdBLEdBQ3JDQSxHQUFBLFlBQUFBLEVBQVMsZ0JBQWlCLFNBQ3RCQSxHQUFBLEtBRGdDLE9BQ2hDQSxFQUFTLEtBQ2IyRyxFQUFPMUYsRUFBUzdHLEVBQU8sS0FBTW1HLElBQVMsT0FBWUksRUFBUSxDQUM1RCxHQUFHQSxFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFNBQVVBLEVBQUssZUFBZ0JKLENBQUksQ0FDakUsRUFBUSxFQUFLLEdBQUssQ0FBQSxFQUNScUcsRUFBUSxPQUFPNUcsR0FBWSxVQUFZQSxFQUFRLE9BQVMsUUFBYUEsRUFBUSxlQUFpQixRQUNoR0EsRUFBUSxLQUNOLE9BQ0Y0RyxJQUFVLFNBQ1ZELEVBQUssTUFBUUMsR0FFakIsTUFBTUMsR0FBZSxJQUFNLENBQ3ZCLEdBQUkzRyxHQUFXUyxFQUFLLFdBQVcsRUFDM0IsT0FFSixNQUFNa0csRUFBYyxDQUFBLEVBQ2RDLEVBQXVCLElBQUksSUFNakMsUUFBU3JLLEVBQUksRUFBR0EsRUFBSSxJQUFLQSxJQUFLLENBQzFCLE1BQU1zSyxFQUFpQixPQUFPLFFBQVFwRyxFQUFLLFdBQVcsRUFBRSxPQUFPLENBQUMsQ0FBQ3ZFLENBQUcsSUFBTSxDQUFDMEssRUFBcUIsSUFBSTFLLENBQUcsQ0FBQyxFQUN4RyxHQUFJMkssRUFBZSxTQUFXLEVBQzFCLE1BQ0osU0FBVyxDQUFDM0ssRUFBS2hDLENBQU0sSUFBSzJNLEVBQ3hCRixFQUFZekssQ0FBRyxFQUNYNkUsRUFBU2hCLEdBQU83RixDQUFNLEVBQUcsQ0FBRSxHQUFHdUcsRUFBTSxZQUFhLENBQUMsR0FBR0EsRUFBSyxTQUFVQSxFQUFLLGVBQWdCdkUsQ0FBRyxDQUFDLEVBQUksRUFBSSxHQUFLLENBQUEsRUFDOUcwSyxFQUFxQixJQUFJMUssQ0FBRyxDQUVwQyxDQUNBLE9BQU95SyxDQUNYLEdBQUMsRUFDS0csRUFBV3pHLElBQVMsT0FDdEJzRyxFQUNJLENBQ0ksR0FBR0YsRUFDSCxDQUFDaEcsRUFBSyxjQUFjLEVBQUdrRyxDQUN2QyxFQUNjRixFQUNKaEcsRUFBSyxlQUFpQixnQkFDcEIsQ0FDSSxHQUFHZ0csRUFDSCxHQUFJRSxHQUFlbEcsRUFBSyxTQUFTLEtBQzdCLENBQ0ksQ0FBQ0EsRUFBSyxjQUFjLEVBQUcsQ0FDbkIsR0FBR2tHLEVBR0gsR0FBSWxHLEVBQUssU0FBUyxLQUFPLENBQUUsQ0FBQ0osQ0FBSSxFQUFHb0csQ0FBSSxFQUFLLE1BQ3hFLENBQ0EsRUFDc0IsTUFDdEIsRUFDYyxDQUNFLEtBQU0sQ0FBQyxHQUFJaEcsRUFBSyxlQUFpQixXQUFhLENBQUEsRUFBS0EsRUFBSyxTQUFXQSxFQUFLLGVBQWdCSixDQUFJLEVBQUUsS0FBSyxHQUFHLEVBQ3RHLENBQUNJLEVBQUssY0FBYyxFQUFHLENBQ25CLEdBQUdrRyxFQUNILENBQUN0RyxDQUFJLEVBQUdvRyxDQUM1QixDQUNBLEVBQ0ksT0FBSWhHLEVBQUssU0FBVyxjQUNoQnFHLEVBQVMsUUFBVSwwQ0FFZHJHLEVBQUssU0FBVyxzQkFDckJxRyxFQUFTLFFBQVUsaURBRWhCQSxDQUNYLEVDa0JPLFNBQVNDLEdBQTBCQyxFQUFNLENBQUUsT0FBQXZILEVBQVEsU0FBQXdILENBQVEsRUFBSyxDQUNuRSxNQUFNdkgsRUFBTSxDQUFFLEdBQUdzSCxDQUFJLEVBQ3JCLGNBQU8saUJBQWlCdEgsRUFBSyxDQUN6QixPQUFRLENBQ0osTUFBTyxzQkFDUCxXQUFZLEVBQ3hCLEVBQ1EsVUFBVyxDQUNQLE1BQU9ELEVBQ1AsV0FBWSxFQUN4QixFQUNRLFVBQVcsQ0FDUCxNQUFPd0gsRUFDUCxXQUFZLEVBQ3hCLENBQ0EsQ0FBSyxFQUNNdkgsQ0FDWCxDQy9HTyxTQUFTd0gsR0FBbUJoTixFQUFRLENBQ3ZDLEdBQUlBLEVBQU8sT0FBUyxTQUNoQixNQUFNLElBQUksTUFBTSxzREFBc0RBLEVBQU8sS0FBTyxJQUFJQSxFQUFPLElBQUksSUFBTSxXQUFXLEVBQUUsRUFFMUgsTUFBTWlOLEVBQWEsZ0JBQWdCak4sQ0FBTSxFQUN6QyxPQUFPa04sR0FBdUJELEVBQVksQ0FBQSxFQUFJQSxDQUFVLENBQzVELENBQ0EsU0FBU0UsR0FBV25OLEVBQVEsQ0FDeEIsR0FBSSxPQUFPQSxHQUFXLFVBQ2xCLE1BQU8sR0FFWCxHQUFJQSxFQUFPLE9BQVMsT0FDaEIsTUFBTyxHQUVYLFVBQVdvTixLQUFnQnBOLEVBQU8sT0FBUyxDQUFBLEVBQ3ZDLEdBQUltTixHQUFXQyxDQUFZLEVBQ3ZCLE1BQU8sR0FHZixVQUFXQyxLQUFnQnJOLEVBQU8sT0FBUyxDQUFBLEVBQ3ZDLEdBQUltTixHQUFXRSxDQUFZLEVBQ3ZCLE1BQU8sR0FHZixNQUFPLEVBQ1gsQ0FLQSxTQUFTSCxHQUF1QnBCLEVBQVl3QixFQUFNL0osRUFBTSxDQUNwRCxHQUFJLE9BQU91SSxHQUFlLFVBQ3RCLE1BQU0sSUFBSSxVQUFVLGdEQUFnRHdCLEVBQUssS0FBSyxHQUFHLENBQUMsRUFBRSxFQUV4RixHQUFJLENBQUNDLEdBQVN6QixDQUFVLEVBQ3BCLE1BQU0sSUFBSSxVQUFVLFlBQVksS0FBSyxVQUFVQSxDQUFVLENBQUMsMEJBQTBCd0IsRUFBSyxLQUFLLEdBQUcsQ0FBQyxFQUFFLEVBR3hHLE1BQU03SSxFQUFPcUgsRUFBVyxNQUN4QixHQUFJeUIsR0FBUzlJLENBQUksRUFDYixTQUFXLENBQUMrSSxFQUFTQyxDQUFTLElBQUssT0FBTyxRQUFRaEosQ0FBSSxFQUNsRHlJLEdBQXVCTyxFQUFXLENBQUMsR0FBR0gsRUFBTSxRQUFTRSxDQUFPLEVBQUdqSyxDQUFJLEVBSTNFLE1BQU1rSixFQUFjWCxFQUFXLFlBQy9CLEdBQUl5QixHQUFTZCxDQUFXLEVBQ3BCLFNBQVcsQ0FBQ2lCLEVBQWdCQyxDQUFnQixJQUFLLE9BQU8sUUFBUWxCLENBQVcsRUFDdkVTLEdBQXVCUyxFQUFrQixDQUFDLEdBQUdMLEVBQU0sY0FBZUksQ0FBYyxFQUFHbkssQ0FBSSxFQUluRnVJLEVBQVcsT0FDWCxVQUFZLEVBQUUseUJBQTBCQSxLQUNoREEsRUFBVyxxQkFBdUIsSUFFdEMsTUFBTThCLEVBQVc5QixFQUFXLFVBQVksQ0FBQSxFQUVsQytCLEVBQWEvQixFQUFXLFdBQzlCLEdBQUl5QixHQUFTTSxDQUFVLEVBQUcsQ0FDdEIsU0FBVyxDQUFDN0wsRUFBS3lFLENBQUssSUFBSyxPQUFPLFFBQVFvSCxDQUFVLEVBQ2hELEdBQUksQ0FBQ1YsR0FBVzFHLENBQUssR0FBSyxDQUFDbUgsRUFBUyxTQUFTNUwsQ0FBRyxFQUM1QyxNQUFNLElBQUksTUFBTSxrQkFBa0IsQ0FBQyxHQUFHc0wsRUFBTSxhQUFjdEwsQ0FBRyxFQUFFLEtBQUssR0FBRyxDQUFDLG1NQUFtTSxFQUduUjhKLEVBQVcsU0FBVyxPQUFPLEtBQUsrQixDQUFVLEVBQzVDL0IsRUFBVyxXQUFhLE9BQU8sWUFBWSxPQUFPLFFBQVErQixDQUFVLEVBQUUsSUFBSSxDQUFDLENBQUM3TCxFQUFLOEwsQ0FBVSxJQUFNLENBQzdGOUwsRUFDQWtMLEdBQXVCWSxFQUFZLENBQUMsR0FBR1IsRUFBTSxhQUFjdEwsQ0FBRyxFQUFHdUIsQ0FBSSxDQUNqRixDQUFTLENBQUMsQ0FDTixDQUVBLE1BQU13SyxFQUFRakMsRUFBVyxNQUNyQnlCLEdBQVNRLENBQUssSUFDZGpDLEVBQVcsTUFBUW9CLEdBQXVCYSxFQUFPLENBQUMsR0FBR1QsRUFBTSxPQUFPLEVBQUcvSixDQUFJLEdBRzdFLE1BQU0rRyxFQUFRd0IsRUFBVyxNQUNyQixNQUFNLFFBQVF4QixDQUFLLElBQ25Cd0IsRUFBVyxNQUFReEIsRUFBTSxJQUFJLENBQUMwRCxFQUFTM0wsSUFBTTZLLEdBQXVCYyxFQUFTLENBQUMsR0FBR1YsRUFBTSxRQUFTLE9BQU9qTCxDQUFDLENBQUMsRUFBR2tCLENBQUksQ0FBQyxHQUdySCxNQUFNYixFQUFRb0osRUFBVyxNQUN6QixHQUFJLE1BQU0sUUFBUXBKLENBQUssRUFDbkIsR0FBSUEsRUFBTSxTQUFXLEVBQUcsQ0FDcEIsTUFBTXVMLEVBQVdmLEdBQXVCeEssRUFBTSxDQUFDLEVBQUcsQ0FBQyxHQUFHNEssRUFBTSxRQUFTLEdBQUcsRUFBRy9KLENBQUksRUFDL0UsT0FBTyxPQUFPdUksRUFBWW1DLENBQVEsRUFDbEMsT0FBT25DLEVBQVcsS0FDdEIsTUFFSUEsRUFBVyxNQUFRcEosRUFBTSxJQUFJLENBQUNlLEVBQU9wQixJQUFNNkssR0FBdUJ6SixFQUFPLENBQUMsR0FBRzZKLEVBQU0sUUFBUyxPQUFPakwsQ0FBQyxDQUFDLEVBQUdrQixDQUFJLENBQUMsRUFJakh1SSxFQUFXLFVBQVksTUFDdkIsT0FBT0EsRUFBVyxRQUd0QixNQUFNN0gsRUFBTTZILEVBQVcsS0FDdkIsR0FBSTdILEdBQU9pSyxHQUFpQnBDLEVBQVksQ0FBQyxFQUFHLENBQ3hDLEdBQUksT0FBTzdILEdBQVEsU0FDZixNQUFNLElBQUksVUFBVSw4QkFBOEJBLENBQUcsVUFBVXFKLEVBQUssS0FBSyxHQUFHLENBQUMsRUFBRSxFQUVuRixNQUFNVyxFQUFXRSxHQUFXNUssRUFBTVUsQ0FBRyxFQUNyQyxHQUFJLE9BQU9nSyxHQUFhLFVBQ3BCLE1BQU0sSUFBSSxNQUFNLG9CQUFvQmhLLENBQUcsbURBQW1ELEVBRTlGLEdBQUksQ0FBQ3NKLEdBQVNVLENBQVEsRUFDbEIsTUFBTSxJQUFJLE1BQU0sb0JBQW9CaEssQ0FBRyxzQ0FBc0MsS0FBSyxVQUFVZ0ssQ0FBUSxDQUFDLEVBQUUsRUFHM0csY0FBTyxPQUFPbkMsRUFBWSxDQUFFLEdBQUdtQyxFQUFVLEdBQUduQyxFQUFZLEVBQ3hELE9BQU9BLEVBQVcsS0FHWG9CLEdBQXVCcEIsRUFBWXdCLEVBQU0vSixDQUFJLENBQ3hELENBQ0EsT0FBT3VJLENBQ1gsQ0FDQSxTQUFTcUMsR0FBVzVLLEVBQU1VLEVBQUssQ0FDM0IsR0FBSSxDQUFDQSxFQUFJLFdBQVcsSUFBSSxFQUNwQixNQUFNLElBQUksTUFBTSwwQkFBMEIsS0FBSyxVQUFVQSxDQUFHLENBQUMsMEJBQTBCLEVBRTNGLE1BQU1tSyxFQUFZbkssRUFBSSxNQUFNLENBQUMsRUFBRSxNQUFNLEdBQUcsRUFDeEMsSUFBSWdLLEVBQVcxSyxFQUNmLFVBQVd2QixLQUFPb00sRUFBVyxDQUN6QixHQUFJLENBQUNiLEdBQVNVLENBQVEsRUFDbEIsTUFBTSxJQUFJLE1BQU0sZ0RBQWdEaEssQ0FBRyxNQUFNLEtBQUssVUFBVWdLLENBQVEsQ0FBQyxFQUFFLEVBRXZHLE1BQU14SCxFQUFRd0gsRUFBU2pNLENBQUcsRUFDMUIsR0FBSXlFLElBQVUsT0FDVixNQUFNLElBQUksTUFBTSxPQUFPekUsQ0FBRyw4QkFBOEJpQyxDQUFHLEVBQUUsRUFFakVnSyxFQUFXeEgsQ0FDZixDQUNBLE9BQU93SCxDQUNYLENBQ0EsU0FBU1YsR0FBUy9ILEVBQUssQ0FDbkIsT0FBTyxPQUFPQSxHQUFRLFVBQVlBLElBQVEsTUFBUSxDQUFDLE1BQU0sUUFBUUEsQ0FBRyxDQUN4RSxDQUNBLFNBQVMwSSxHQUFpQjFJLEVBQUs2SSxFQUFHLENBQzlCLElBQUloTSxFQUFJLEVBQ1IsVUFBV3ZDLEtBQUswRixFQUVaLEdBREFuRCxJQUNJQSxFQUFJZ00sRUFDSixNQUFPLEdBR2YsTUFBTyxFQUNYLENDaEpBLFNBQVNDLEdBQWtCdE8sRUFBUTRGLEVBQVMsQ0FDeEMsT0FBTzJJLEdBQWlCdk8sRUFBUSxDQUM1QixpQkFBa0IsR0FDbEIsS0FBTTRGLEVBQVEsS0FDZCxhQUFjLGdCQUNkLGFBQWMsa0JBQ2QsaUJBQWtCLFVBQzFCLENBQUssQ0FDTCxDQUNBLFNBQVM0SSxHQUFrQnhPLEVBQVEsQ0FDL0IsT0FBT2dOLEdBQW1CeUIsR0FBZ0J6TyxFQUFRLENBQzlDLE9BQVEsU0FDaEIsQ0FBSyxDQUFDLENBQ04sQ0FDQSxTQUFTME8sR0FBUUMsRUFBVyxDQUN4QixNQUFPLFNBQVVBLENBQ3JCLENBaURPLFNBQVNDLEdBQWNELEVBQVd4SSxFQUFNMEksRUFBTyxDQUNsRCxPQUFPeEosR0FBd0IsQ0FDM0IsS0FBTSxjQUNOLEdBQUd3SixFQUNILEtBQUExSSxFQUNBLE9BQVEsR0FDUixPQUFRdUksR0FBUUMsQ0FBUyxFQUFJSCxHQUFrQkcsQ0FBUyxFQUFJTCxHQUFrQkssRUFBVyxDQUFFLEtBQUF4SSxFQUFNLENBQ3pHLEVBQVEySSxHQUFZSCxFQUFVLE1BQU0sS0FBSyxNQUFNRyxDQUFPLENBQUMsQ0FBQyxDQUN4RCxDQXVCTyxTQUFTQyxHQUFxQm5KLEVBQVMsQ0FDMUMsT0FBT2lILEdBQTBCLENBQzdCLEtBQU0sV0FDTixLQUFNakgsRUFBUSxLQUNkLFdBQVk4SSxHQUFROUksRUFBUSxVQUFVLEVBQ2xDNEksR0FBa0I1SSxFQUFRLFVBQVUsRUFDbEMwSSxHQUFrQjFJLEVBQVEsV0FBWSxDQUFFLEtBQU1BLEVBQVEsS0FBTSxFQUNsRSxPQUFRLEdBQ1IsR0FBSUEsRUFBUSxZQUFjLENBQUUsWUFBYUEsRUFBUSxXQUFXLEVBQUssTUFDekUsRUFBTyxDQUNDLFNBQVVBLEVBQVEsU0FDbEIsT0FBU29KLEdBQVNwSixFQUFRLFdBQVcsTUFBTSxLQUFLLE1BQU1vSixDQUFJLENBQUMsQ0FDbkUsQ0FBSyxDQUNMLENDL0dPLE1BQU1DLFdBQW9CLEtBQU0sQ0FFbkMsWUFBWXBHLEVBQVNxRyxFQUFPLENBQ3hCLE1BQU1yRyxDQUFPLEVBRmpCc0csRUFBQSxjQUdJLEtBQUssS0FBTyxXQUFXLEtBQ3ZCLEtBQUssTUFBUUQsQ0FDakIsQ0FDSixDQUtPLE1BQU1FLFdBQW9CSCxFQUFZLENBQzdDLENBSU8sTUFBTUksV0FBOEJKLEVBQVksQ0FDdkQsQ0FJTyxNQUFNSyxXQUEyQkwsRUFBWSxDQUNwRCxDQUlPLE1BQU1NLFdBQThCRCxFQUFtQixDQUsxRCxZQUFZekcsRUFBU3FHLEVBQU9NLEVBQWVDLEVBQWdCLENBQ3ZELE1BQU01RyxFQUFTcUcsQ0FBSyxFQUp4QkMsRUFBQSxzQkFFQUEsRUFBQSx1QkFHSSxLQUFLLGNBQWdCSyxFQUNyQixLQUFLLGVBQWlCQyxDQUMxQixDQUNKLENBSU8sTUFBTUMsVUFBa0JULEVBQVksQ0FDM0MsQ0FJTyxNQUFNVSxXQUFnQ1YsRUFBWSxDQUVyRCxZQUFZcEcsRUFBU3JKLEVBQU8wUCxFQUFPLENBQy9CLE1BQU1yRyxFQUFTcUcsQ0FBSyxFQUZ4QkMsRUFBQSxjQUdJLEtBQUssTUFBUTNQLENBQ2pCLENBQ0osQ0FJTyxNQUFNb1EsV0FBc0JYLEVBQVksQ0FFM0MsWUFBWXBHLEVBQVNySixFQUFPMFAsRUFBTyxDQUMvQixNQUFNckcsRUFBU3FHLENBQUssRUFGeEJDLEVBQUEsY0FHSSxLQUFLLE1BQVEzUCxDQUNqQixDQUNKLENBSU8sTUFBTXFRLFdBQXdDWixFQUFZLENBRTdELFlBQVlwRyxFQUFTOUgsRUFBUW1PLEVBQU8sQ0FDaEMsTUFBTXJHLEVBQVNxRyxDQUFLLEVBRnhCQyxFQUFBLGVBR0ksS0FBSyxPQUFTcE8sQ0FDbEIsQ0FDSixDQUlPLE1BQU0rTyxXQUF5Q2IsRUFBWSxDQUU5RCxZQUFZcEcsRUFBUzlILEVBQVFtTyxFQUFPLENBQ2hDLE1BQU1yRyxFQUFTcUcsQ0FBSyxFQUZ4QkMsRUFBQSxlQUdJLEtBQUssT0FBU3BPLENBQ2xCLENBQ0osQ0FJTyxNQUFNZ1AsV0FBNENkLEVBQVksQ0FFakUsWUFBWXBHLEVBQVM5SCxFQUFRbU8sRUFBTyxDQUNoQyxNQUFNckcsRUFBU3FHLENBQUssRUFGeEJDLEVBQUEsZUFHSSxLQUFLLE9BQVNwTyxDQUNsQixDQUNKLENBSU8sTUFBTWlQLFdBQTZDZixFQUFZLENBRWxFLFlBQVlwRyxFQUFTOUgsRUFBUW1PLEVBQU8sQ0FDaEMsTUFBTXJHLEVBQVNxRyxDQUFLLEVBRnhCQyxFQUFBLGVBR0ksS0FBSyxPQUFTcE8sQ0FDbEIsQ0FDSixDQ3pHTyxTQUFTa1AsR0FBVWpRLEVBQVEsQ0FDOUIsT0FBT0EsQ0FDWCxDQUNPLFNBQVNrUSxHQUFrQnRMLEVBQU8sT0FDckMsR0FBSSxPQUFPQSxHQUFVLFVBQVlBLElBQVUsS0FDdkMsT0FFSixNQUFNdUwsRUFBWXZMLEVBQ2xCLFFBQU9qRSxFQUFBd1AsRUFBVSxPQUFWLFlBQUF4UCxFQUFnQixNQUFPd1AsRUFBVSxNQUFRQSxFQUFVLEdBQzlELENBQ08sU0FBU0MsR0FBWXhMLEVBQU8sQ0FDL0IsTUFBTWhFLEVBQU1zUCxHQUFrQnRMLENBQUssRUFDbkMsR0FBSSxDQUFDaEUsRUFDRCxPQUVKLE1BQU15UCxFQUFXLE9BQU96UCxFQUFJLFVBQWEsVUFBWUEsRUFBSSxVQUNwRCxPQUFPQSxFQUFJLE1BQVMsVUFBWUEsRUFBSSxLQUN6QyxHQUFJLE9BQU95UCxHQUFZLFNBQ25CLE9BRUosTUFBTUMsRUFBUUQsRUFBUSxZQUFXLEVBQ2pDLE9BQU9DLEVBQU0sV0FBVyxLQUFLLEVBQUlBLEVBQU0sTUFBTSxDQUFDLEVBQUlBLENBQ3RELENDZk8sU0FBU0MsR0FBWTNMLEVBQU8sQ0FFL0IsT0FEbUJzTCxHQUFrQnRMLENBQUssRUFJN0J3TCxHQUFZeEwsQ0FBSyxJQUNkLFNBSEwsRUFJZixDQU1PLFNBQVM0TCxHQUFpQjVMLEVBQU8sQ0FDcEMsT0FBUSxPQUFPQSxHQUFVLFVBQ3JCQSxJQUFVLE1BQ1YsVUFBV0EsR0FDWCxPQUFPQSxFQUFNLE9BQVUsUUFDL0IsQ0N4QkEsTUFBTTZMLEdBQXVCLDBDQUN2QkMsR0FBb0IsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQ3hDQyxHQUFxQixJQUFJLElBQUksQ0FDL0IsUUFDQSxVQUNBLFFBQ0EsVUFDQSxVQUNBLFdBQ0EsT0FDQSxXQUNBLFdBQ0EsYUFDQSxXQUNKLENBQUMsRUFHS0MsR0FBc0IsQ0FDeEIsT0FBUSxDQUFFLEtBQU0sUUFBUSxFQUN4QixPQUFRLENBQUUsS0FBTSxRQUFRLEVBQ3hCLE9BQVEsQ0FBRSxLQUFNLFNBQVMsRUFDekIsUUFBUyxDQUFFLEtBQU0sU0FBUyxFQUMxQixLQUFNLENBQUUsS0FBTSxTQUFVLE9BQVEsV0FBVyxDQUMvQyxFQUNPLFNBQVNDLEdBQXlCcEssRUFBTyxDQUM1QyxPQUFRLE9BQU9BLEdBQVUsVUFDckJBLElBQVUsTUFDVkEsRUFBTSxPQUFTLFVBQ2YsZUFBZ0JBLEdBQ2hCLHlCQUEwQkEsQ0FDbEMsQ0FDTyxTQUFTcUssR0FBb0JsTSxFQUFPLENBSXZDLE1BQU01RSxFQUFTK1EsR0FBa0JuTSxDQUFLLEVBQ3RDLEdBQUs1RSxFQUdMLE9BQUssTUFBTSxRQUFRQSxFQUFPLFFBQVEsSUFDOUJBLEVBQU8sU0FBVyxDQUFBLEdBRWxCLE9BQU9BLEVBQU8scUJBQXlCLE1BQ3ZDQSxFQUFPLHFCQUF1QixJQUU5QixPQUFPQSxFQUFPLFNBQVksV0FDMUJBLEVBQU8sUUFBVXlRLElBRWR6USxDQUNYLENBQ0EsU0FBUytRLEdBQWtCdEssRUFBTyxDQUM5QixNQUFNMUUsRUFBUWlQLEdBQVV2SyxDQUFLLEVBQzdCLEdBQUksQ0FBQzFFLEVBQ0QsT0FFSixNQUFNOEwsRUFBYSxDQUFBLEVBQ2JELEVBQVcsQ0FBQSxFQUNqQixTQUFXLENBQUM1TCxFQUFLaVAsQ0FBSyxJQUFLLE9BQU8sUUFBUWxQLENBQUssRUFBRyxDQUM5QyxLQUFNLENBQUUsT0FBQS9CLEVBQVEsU0FBQWtSLEdBQWFDLEdBQWdCRixDQUFLLEVBQ2xELEdBQUksQ0FBQ2pSLEVBQ0QsT0FFSjZOLEVBQVc3TCxDQUFHLEVBQUloQyxFQUNia1IsR0FDRHRELEVBQVMsS0FBSzVMLENBQUcsQ0FFekIsQ0FDQSxNQUFPLENBQUUsS0FBTSxTQUFVLFdBQUE2TCxFQUFZLFNBQUFELEVBQVUscUJBQXNCLEVBQUssQ0FDOUUsQ0FDQSxTQUFTdUQsR0FBZ0IxSyxFQUFPLENBSTVCLElBQUkySyxFQUFVQyxHQUFpQjVLLENBQUssRUFDaEN5SyxFQUFXLEdBQ2YsS0FBT1IsR0FBa0IsSUFBSU4sR0FBWWdCLENBQU8sR0FBSyxFQUFFLEdBQUcsQ0FDdERGLEVBQVcsR0FDWCxNQUFNdFEsRUFBTXNQLEdBQWtCa0IsQ0FBTyxFQUMvQkUsRUFBT0QsR0FBaUJ6USxHQUFBLFlBQUFBLEVBQUssU0FBUyxFQUM1QyxHQUFJLENBQUMwUSxHQUFRQSxJQUFTRixFQUNsQixNQUVKQSxFQUFVRSxDQUNkLENBQ0EsTUFBTyxDQUFFLE9BQVFDLEdBQWNILENBQU8sRUFBRyxTQUFBRixDQUFRLENBQ3JELENBQ0EsU0FBU0ssR0FBYzlLLEVBQU8sQ0FDMUIsR0FBSUEsSUFBVSxPQUNWLE9BRUosTUFBTStLLEVBQVlILEdBQWlCNUssQ0FBSyxFQUNsQ29CLEVBQU91SSxHQUFZb0IsQ0FBUyxFQUM1QjVRLEVBQU1zUCxHQUFrQnNCLENBQVMsRUFDdkMsR0FBSzNKLEVBR0wsSUFBSUEsS0FBUStJLEdBQ1IsT0FBT0EsR0FBb0IvSSxDQUFJLEVBRW5DLE9BQVFBLEVBQUksQ0FDUixJQUFLLFNBQ0QsT0FBT2tKLEdBQWtCUyxDQUFTLEVBQ3RDLElBQUssUUFDRCxPQUFPQyxHQUFpQjdRLENBQUcsRUFDL0IsSUFBSyxRQUNELE9BQU84USxHQUFpQjlRLENBQUcsRUFDL0IsSUFBSyxRQUNELE9BQU8rUSxHQUFpQi9RLENBQUcsRUFDL0IsSUFBSyxlQUNELE9BQU9nUixHQUF3QmhSLENBQUcsRUFDdEMsSUFBSyxVQUNELE9BQU9pUixHQUFhalIsQ0FBRyxFQUMzQixJQUFLLE9BQ0wsSUFBSyxhQUNELE9BQU9rUixHQUFVbFIsQ0FBRyxFQUN4QixJQUFLLFNBQ0QsT0FBT21SLEdBQWtCblIsQ0FBRyxFQUNoQyxJQUFLLE1BQ0QsT0FBT29SLEdBQWVwUixDQUFHLEVBQzdCLElBQUssTUFDRCxPQUFPcVIsR0FBZXJSLENBQUcsRUFDN0IsSUFBSyxXQUNELE9BQU9zUixHQUFvQnRSLENBQUcsRUFDbEMsUUFDSSxNQUNaLEVBQ0EsQ0FFQSxTQUFTNlEsR0FBaUI3USxFQUFLLENBQzNCLE1BQU1tTixFQUFRd0QsR0FBY1ksR0FBYXZSLEVBQUssVUFBVyxRQUFTLE1BQU0sQ0FBQyxFQUN6RSxPQUFPbU4sRUFBUSxDQUFFLEtBQU0sUUFBUyxNQUFBQSxDQUFLLEVBQUssTUFDOUMsQ0FDQSxTQUFTMkQsR0FBaUI5USxFQUFLLENBQzNCLE1BQU1tTixFQUFRcUUsR0FBWXhSLEdBQUEsWUFBQUEsRUFBSyxLQUFLLEVBQy9CLElBQUt3RSxHQUFTbU0sR0FBY25NLENBQUksQ0FBQyxFQUNqQyxPQUFPLE9BQU8sRUFDbkIsR0FBSSxDQUFDMkksRUFBTSxPQUNQLE9BRUosTUFBTS9OLEVBQVMsQ0FDWCxLQUFNLFFBQ04sTUFBQStOLEVBQ0EsU0FBVUEsRUFBTSxNQUN4QixFQUNJLE9BQUtuTixHQUFBLE1BQUFBLEVBQUssT0FDTlosRUFBTyxTQUFXK04sRUFBTSxRQUVyQi9OLENBQ1gsQ0FDQSxTQUFTMlIsR0FBaUIvUSxFQUFLLENBQzNCLE1BQU1nRixFQUFVd00sSUFBWXhSLEdBQUEsWUFBQUEsRUFBSyxXQUFXQSxHQUFBLFlBQUFBLEVBQUssUUFBTyxFQUNuRCxJQUFLdUUsR0FBV29NLEdBQWNwTSxDQUFNLENBQUMsRUFDckMsT0FBTyxPQUFPLEVBQ25CLE9BQU9TLEVBQVEsT0FBUyxDQUFFLE1BQU9BLENBQU8sRUFBSyxNQUNqRCxDQUNBLFNBQVNnTSxHQUF3QmhSLEVBQUssQ0FDbEMsTUFBTXlSLEVBQU9kLEdBQWMzUSxHQUFBLFlBQUFBLEVBQUssSUFBSSxFQUM5QjBSLEVBQVFmLEdBQWMzUSxHQUFBLFlBQUFBLEVBQUssS0FBSyxFQUN0QyxPQUFPeVIsR0FBUUMsRUFBUSxDQUFFLE1BQU8sQ0FBQ0QsRUFBTUMsQ0FBSyxDQUFDLEVBQUssTUFDdEQsQ0FDQSxTQUFTUCxHQUFrQm5SLEVBQUssQ0FDNUIsTUFBTTJSLEVBQWNoQixJQUFjM1EsR0FBQSxZQUFBQSxFQUFLLGFBQWFBLEdBQUEsWUFBQUEsRUFBSyxPQUFNLEVBQy9ELE9BQU8yUixFQUNELENBQUUsS0FBTSxTQUFVLHFCQUFzQkEsQ0FBVyxFQUNuRCxNQUNWLENBQ0EsU0FBU1AsR0FBZXBSLEVBQUssQ0FDekIsTUFBTTJSLEVBQWNoQixJQUFjM1EsR0FBQSxZQUFBQSxFQUFLLGFBQWFBLEdBQUEsWUFBQUEsRUFBSyxPQUFNLEVBQy9ELE9BQU8yUixFQUFjLENBQUUsS0FBTSxRQUFTLE1BQU9BLENBQVcsRUFBSyxNQUNqRSxDQUNBLFNBQVNOLEdBQWVyUixFQUFLLENBQ3pCLE1BQU0yUixFQUFjaEIsR0FBYzNRLEdBQUEsWUFBQUEsRUFBSyxTQUFTLEVBQ2hELE9BQU8yUixFQUNELENBQUUsS0FBTSxRQUFTLE1BQU9BLEVBQWEsWUFBYSxFQUFJLEVBQ3RELE1BQ1YsQ0FDQSxTQUFTTCxHQUFvQnRSLEVBQUssQ0FDOUIsTUFBTXNDLEVBQVFxTyxJQUFjM1EsR0FBQSxZQUFBQSxFQUFLLGFBQWFBLEdBQUEsWUFBQUEsRUFBSyxLQUFJLEVBQ3ZELE9BQU9zQyxFQUFRLENBQUUsTUFBTyxDQUFDQSxFQUFPLENBQUUsS0FBTSxPQUFRLENBQUMsRUFBSyxNQUMxRCxDQUNBLFNBQVNtTyxHQUFpQjVLLEVBQU8sQ0FDN0IsSUFBSTJLLEVBQVUzSyxFQUNkLEtBQU9rSyxHQUFtQixJQUFJUCxHQUFZZ0IsQ0FBTyxHQUFLLEVBQUUsR0FBRyxDQUN2RCxNQUFNeFEsRUFBTXNQLEdBQWtCa0IsQ0FBTyxFQUMvQkUsR0FBTzFRLEdBQUEsWUFBQUEsRUFBSyxhQUNkQSxHQUFBLFlBQUFBLEVBQUssVUFDTEEsR0FBQSxZQUFBQSxFQUFLLFFBQ0xBLEdBQUEsWUFBQUEsRUFBSyxRQUNMQSxHQUFBLFlBQUFBLEVBQUssV0FDTEEsR0FBQSxZQUFBQSxFQUFLLFlBQ1QsR0FBSSxDQUFDMFEsR0FBUUEsSUFBU0YsRUFDbEIsT0FBT0EsRUFFWEEsRUFBVUUsQ0FDZCxDQUNBLE9BQU9GLENBQ1gsQ0FDQSxTQUFTZSxHQUFhdlIsS0FBUThJLEVBQU0sQ0FDaEMsR0FBSzlJLEdBR0wsVUFBV29CLEtBQU8wSCxFQUNkLEdBQUkxSCxLQUFPcEIsR0FBT0EsRUFBSW9CLENBQUcsSUFBTSxPQUMzQixPQUFPcEIsRUFBSW9CLENBQUcsRUFJMUIsQ0FDQSxTQUFTb1EsR0FBWTNMLEVBQU8sQ0FDeEIsT0FBSSxNQUFNLFFBQVFBLENBQUssRUFDWkEsRUFFSkEsSUFBVSxPQUFZLENBQUEsRUFBSyxDQUFDQSxDQUFLLENBQzVDLENBQ0EsU0FBU29MLEdBQWFqUixFQUFLLENBQ3ZCLEdBQUksQ0FBQ0EsRUFDRCxPQUVKLE1BQU00UixFQUFVTCxHQUFhdlIsRUFBSyxRQUFTLFNBQVMsRUFDcEQsR0FBSTRSLElBQVksT0FHaEIsTUFBTyxDQUNILE1BQU9BLEVBQ1AsS0FBTUEsSUFBWSxLQUFPLE9BQVMsT0FBT0EsQ0FDakQsQ0FDQSxDQUNBLFNBQVNWLEdBQVVsUixFQUFLLENBQ3BCLEdBQUtBLEVBR0wsSUFBSSxNQUFNLFFBQVFBLEVBQUksTUFBTSxFQUN4QixNQUFPLENBQUUsS0FBTUEsRUFBSSxNQUFNLEVBRTdCLEdBQUlBLEVBQUksU0FBVyxPQUFPQSxFQUFJLFNBQVksU0FDdEMsTUFBTyxDQUFFLEtBQU0sT0FBTyxPQUFPQSxFQUFJLE9BQU8sQ0FBQyxFQUU3QyxHQUFJLE1BQU0sUUFBUUEsRUFBSSxPQUFPLEVBQ3pCLE1BQU8sQ0FBRSxLQUFNQSxFQUFJLE9BQU8sRUFFOUIsR0FBSUEsRUFBSSxRQUFVLE9BQU9BLEVBQUksUUFBVyxTQUNwQyxNQUFPLENBQUUsS0FBTSxPQUFPLE9BQU9BLEVBQUksTUFBTSxDQUFDLEVBRTVDLEdBQUlBLEVBQUksTUFBUSxPQUFPQSxFQUFJLE1BQVMsU0FDaEMsTUFBTyxDQUFFLEtBQU0sT0FBTyxPQUFPQSxFQUFJLElBQUksQ0FBQyxFQUc5QyxDQUNBLFNBQVNvUSxHQUFVcE0sRUFBTyxDQUN0QixHQUFJLE9BQU9BLEdBQVUsVUFBWUEsSUFBVSxLQUN2QyxPQUVKLE1BQU11TCxFQUFZdkwsRUFDbEIsR0FBSXVMLEVBQVUsT0FBUyxPQUFPQSxFQUFVLE9BQVUsU0FDOUMsT0FBT0EsRUFBVSxNQUVyQixHQUFJLE9BQU9BLEVBQVUsT0FBVSxXQUMzQixHQUFJLENBQ0EsT0FBT0EsRUFBVSxNQUFLLENBQzFCLE1BQ2UsQ0FDWCxNQUNKLENBRUosTUFBTXZQLEVBQU1zUCxHQUFrQkMsQ0FBUyxFQUNqQ3BPLEVBQVFuQixHQUFBLFlBQUFBLEVBQUssTUFDbkIsR0FBSW1CLEdBQVMsT0FBT0EsR0FBVSxTQUMxQixPQUFPQSxFQUVYLEdBQUksT0FBT0EsR0FBVSxXQUNqQixHQUFJLENBQ0EsT0FBT0EsRUFBSyxDQUNoQixNQUNlLENBQ1gsTUFDSixDQUdSLENDbFJBLE1BQU0wUSxHQUE2QjFELEdBRTdCMkQsR0FBc0I5RCxHQUk1QixTQUFTK0QsR0FBdUJDLEVBQVcsQ0FDdkMsT0FBTzlCLEdBQW9COEIsQ0FBUyxDQUN4QyxDQU9PLFNBQVNDLEdBQW1CMU0sRUFBTSxDQU1yQyxHQUpBQSxFQUFPQSxFQUFLLFFBQVEsTUFBTyxHQUFHLEVBRTlCQSxFQUFPQSxFQUFLLFFBQVEsZ0JBQWlCLEdBQUcsRUFFcENBLEVBQUssU0FBVyxFQUNoQixNQUFNLElBQUksTUFBTSwyQkFBMkIsRUFFL0MsT0FBT0EsQ0FDWCxDQVNPLFNBQVMyTSxHQUFnQ0YsRUFBV3pNLEVBQU0sQ0FDN0QsTUFBTVosRUFBVVgsR0FBVSxLQUFLLE1BQU1BLENBQUssRUFDMUMsR0FBSTJMLEdBQVlxQyxDQUFTLEVBQUcsQ0FDeEIsTUFBTUcsRUFBZXZELEdBQWtCLENBQ25DLE1BQU13RCxFQUFpQkwsR0FBdUJDLENBQVMsRUFDdkQsR0FBSUksRUFDQSxNQUFPLENBQ0gsT0FBUUEsRUFDUixPQUFTQyxHQUFhTCxFQUFVLE1BQU0sS0FBSyxNQUFNSyxDQUFRLENBQUMsQ0FDOUUsRUFFWSxNQUFNM00sRUFBZWtKLGFBQXlCLE1BQ3hDLDJCQUEyQkEsRUFBYyxPQUFPLEdBQ2hELEdBQ04sTUFBTSxJQUFJRSxFQUFVLDZKQUE2SnBKLENBQVksRUFBRSxDQUNuTSxFQUNBLElBQUk0TSxFQUNKLEdBQUksQ0FDQUEsRUFBb0JULEdBQTJCLENBQzNDLEtBQUF0TSxFQUNBLFdBQXNCeU0sRUFDdEIsU0FBVSxJQUFNLENBQUUsRUFDbEIsWUFBYSxFQUM3QixDQUFhLENBQ0wsT0FDT3BULEVBQU8sQ0FDVixPQUFPdVQsRUFBWXZULENBQUssQ0FDNUIsQ0FDQSxPQUFJcVIsR0FBeUJxQyxFQUFrQixVQUFVLEVBQzlDLENBQ0gsT0FBUUEsRUFBa0IsV0FDMUIsT0FBUUEsRUFBa0IsU0FDMUMsRUFFZUgsRUFBVyxDQUN0QixTQUNTLE9BQU9ILEdBQWMsVUFBWUEsSUFBYyxLQUNwRCxNQUFPLENBQ0gsT0FBUUEsRUFDUixPQUFBck4sQ0FDWixFQUVJLE1BQU0sSUFBSW1LLEVBQVUsc0RBQXNELENBQzlFLENBSU8sU0FBU3lELEdBQXFDQyxFQUFZLENBQzdELEdBQUlBLElBQWUsT0FDZixNQUFPLE9BRVgsR0FBSTdDLEdBQVk2QyxDQUFVLEVBQUcsQ0FDekIsTUFBTUwsRUFBYyxDQUFDTSxFQUFVN0QsSUFBa0IsQ0FDN0MsTUFBTXdELEVBQWlCTCxHQUF1QlMsQ0FBVSxFQUN4RCxHQUFJSixFQUNBLE1BQU8sQ0FDSCxNQUFNSyxHQUFBLFlBQUFBLEVBQVUsT0FBUSxjQUN4QixNQUFNQSxHQUFBLFlBQUFBLEVBQVUsT0FBUSxTQUN4QixRQUFRQSxHQUFBLFlBQUFBLEVBQVUsU0FBVSxHQUM1QixPQUFRTCxDQUM1QixFQUVZLE1BQU0xTSxFQUFla0osYUFBeUIsTUFDeEMsMkJBQTJCQSxFQUFjLE9BQU8sR0FDaEQsR0FDTixNQUFNLElBQUlFLEVBQVUsNkpBQTZKcEosQ0FBWSxFQUFFLENBQ25NLEVBQ0EsSUFBSWdOLEVBQ0osR0FBSSxDQUNBQSxFQUFTWixHQUE4QlUsRUFBYSxRQUFRLENBQ2hFLE9BQ081VCxFQUFPLENBQ1YsT0FBT3VULEVBQVksT0FBV3ZULENBQUssQ0FDdkMsQ0FDQSxPQUFJcVIsR0FBeUJ5QyxFQUFPLE1BQU0sRUFDL0IsQ0FDSCxLQUFNQSxFQUFPLEtBQ2IsS0FBTUEsRUFBTyxLQUNiLE9BQVFBLEVBQU8sUUFBVSxHQUN6QixPQUFRQSxFQUFPLE1BQy9CLEVBRWVQLEVBQVlPLENBQU0sQ0FDN0IsQ0FDQSxPQUFPRixDQUNYLG1LQ3hIQSxJQUFJRyxFQUFJLElBQ0p0USxFQUFJc1EsRUFBSSxHQUNSQyxFQUFJdlEsRUFBSSxHQUNSd1EsRUFBSUQsRUFBSSxHQUNSRSxFQUFJRCxFQUFJLEVBQ1JFLEVBQUlGLEVBQUksT0FnQlpHLEdBQWlCLFNBQVVuUixFQUFLbUQsRUFBUyxDQUN2Q0EsRUFBVUEsR0FBVyxDQUFBLEVBQ3JCLElBQUlpQyxFQUFPLE9BQU9wRixFQUNsQixHQUFJb0YsSUFBUyxVQUFZcEYsRUFBSSxPQUFTLEVBQ3BDLE9BQU9vUixFQUFNcFIsQ0FBRyxFQUNYLEdBQUlvRixJQUFTLFVBQVksU0FBU3BGLENBQUcsRUFDMUMsT0FBT21ELEVBQVEsS0FBT2tPLEVBQVFyUixDQUFHLEVBQUlzUixFQUFTdFIsQ0FBRyxFQUVuRCxNQUFNLElBQUksTUFDUix3REFDRSxLQUFLLFVBQVVBLENBQUcsRUFFeEIsRUFVQSxTQUFTb1IsRUFBTUcsRUFBSyxDQUVsQixHQURBQSxFQUFNLE9BQU9BLENBQUcsRUFDWixFQUFBQSxFQUFJLE9BQVMsS0FHakIsS0FBSUMsRUFBUSxtSUFBbUksS0FDN0lELEdBRUYsR0FBS0MsRUFHTCxLQUFJNUYsRUFBSSxXQUFXNEYsRUFBTSxDQUFDLENBQUMsRUFDdkJwTSxHQUFRb00sRUFBTSxDQUFDLEdBQUssTUFBTSxZQUFXLEVBQ3pDLE9BQVFwTSxFQUFJLENBQ1YsSUFBSyxRQUNMLElBQUssT0FDTCxJQUFLLE1BQ0wsSUFBSyxLQUNMLElBQUssSUFDSCxPQUFPd0csRUFBSXNGLEVBQ2IsSUFBSyxRQUNMLElBQUssT0FDTCxJQUFLLElBQ0gsT0FBT3RGLEVBQUlxRixFQUNiLElBQUssT0FDTCxJQUFLLE1BQ0wsSUFBSyxJQUNILE9BQU9yRixFQUFJb0YsRUFDYixJQUFLLFFBQ0wsSUFBSyxPQUNMLElBQUssTUFDTCxJQUFLLEtBQ0wsSUFBSyxJQUNILE9BQU9wRixFQUFJbUYsRUFDYixJQUFLLFVBQ0wsSUFBSyxTQUNMLElBQUssT0FDTCxJQUFLLE1BQ0wsSUFBSyxJQUNILE9BQU9uRixFQUFJcEwsRUFDYixJQUFLLFVBQ0wsSUFBSyxTQUNMLElBQUssT0FDTCxJQUFLLE1BQ0wsSUFBSyxJQUNILE9BQU9vTCxFQUFJa0YsRUFDYixJQUFLLGVBQ0wsSUFBSyxjQUNMLElBQUssUUFDTCxJQUFLLE9BQ0wsSUFBSyxLQUNILE9BQU9sRixFQUNULFFBQ0UsTUFDTixHQUNBLENBVUEsU0FBUzBGLEVBQVNILEVBQUksQ0FDcEIsSUFBSU0sRUFBUSxLQUFLLElBQUlOLENBQUUsRUFDdkIsT0FBSU0sR0FBU1QsRUFDSixLQUFLLE1BQU1HLEVBQUtILENBQUMsRUFBSSxJQUUxQlMsR0FBU1YsRUFDSixLQUFLLE1BQU1JLEVBQUtKLENBQUMsRUFBSSxJQUUxQlUsR0FBU2pSLEVBQ0osS0FBSyxNQUFNMlEsRUFBSzNRLENBQUMsRUFBSSxJQUUxQmlSLEdBQVNYLEVBQ0osS0FBSyxNQUFNSyxFQUFLTCxDQUFDLEVBQUksSUFFdkJLLEVBQUssSUFDZCxDQVVBLFNBQVNFLEVBQVFGLEVBQUksQ0FDbkIsSUFBSU0sRUFBUSxLQUFLLElBQUlOLENBQUUsRUFDdkIsT0FBSU0sR0FBU1QsRUFDSlUsRUFBT1AsRUFBSU0sRUFBT1QsRUFBRyxLQUFLLEVBRS9CUyxHQUFTVixFQUNKVyxFQUFPUCxFQUFJTSxFQUFPVixFQUFHLE1BQU0sRUFFaENVLEdBQVNqUixFQUNKa1IsRUFBT1AsRUFBSU0sRUFBT2pSLEVBQUcsUUFBUSxFQUVsQ2lSLEdBQVNYLEVBQ0pZLEVBQU9QLEVBQUlNLEVBQU9YLEVBQUcsUUFBUSxFQUUvQkssRUFBSyxLQUNkLENBTUEsU0FBU08sRUFBT1AsRUFBSU0sRUFBTzdGLEVBQUdsSSxFQUFNLENBQ2xDLElBQUlpTyxFQUFXRixHQUFTN0YsRUFBSSxJQUM1QixPQUFPLEtBQUssTUFBTXVGLEVBQUt2RixDQUFDLEVBQUksSUFBTWxJLEdBQVFpTyxFQUFXLElBQU0sR0FDN0Qsd0RDM0pBLFNBQVNDLEVBQU1DLEVBQUssQ0FDbkJDLEVBQVksTUFBUUEsRUFDcEJBLEVBQVksUUFBVUEsRUFDdEJBLEVBQVksT0FBU0MsRUFDckJELEVBQVksUUFBVUUsRUFDdEJGLEVBQVksT0FBU0csRUFDckJILEVBQVksUUFBVUksRUFDdEJKLEVBQVksU0FBV0ssR0FBQSxFQUN2QkwsRUFBWSxRQUFVTSxFQUV0QixPQUFPLEtBQUtQLENBQUcsRUFBRSxRQUFRdFMsR0FBTyxDQUMvQnVTLEVBQVl2UyxDQUFHLEVBQUlzUyxFQUFJdFMsQ0FBRyxDQUM1QixDQUFFLEVBTUR1UyxFQUFZLE1BQVEsQ0FBQSxFQUNwQkEsRUFBWSxNQUFRLENBQUEsRUFPcEJBLEVBQVksV0FBYSxDQUFBLEVBUXpCLFNBQVNPLEVBQVlDLEVBQVcsQ0FDL0IsSUFBSUMsRUFBTyxFQUVYLFFBQVMzUyxFQUFJLEVBQUdBLEVBQUkwUyxFQUFVLE9BQVExUyxJQUNyQzJTLEdBQVNBLEdBQVEsR0FBS0EsRUFBUUQsRUFBVSxXQUFXMVMsQ0FBQyxFQUNwRDJTLEdBQVEsRUFHVCxPQUFPVCxFQUFZLE9BQU8sS0FBSyxJQUFJUyxDQUFJLEVBQUlULEVBQVksT0FBTyxNQUFNLENBQ3RFLENBQ0NBLEVBQVksWUFBY08sRUFTMUIsU0FBU1AsRUFBWVEsRUFBVyxDQUMvQixJQUFJRSxFQUNBQyxFQUFpQixLQUNqQkMsRUFDQUMsRUFFSixTQUFTQyxLQUFTckcsRUFBTSxDQUV2QixHQUFJLENBQUNxRyxFQUFNLFFBQ1YsT0FHRCxNQUFNQyxFQUFPRCxFQUdQRSxFQUFPLE9BQU8sSUFBSSxJQUFNLEVBQ3hCM0IsRUFBSzJCLEdBQVFOLEdBQVlNLEdBQy9CRCxFQUFLLEtBQU8xQixFQUNaMEIsRUFBSyxLQUFPTCxFQUNaSyxFQUFLLEtBQU9DLEVBQ1pOLEVBQVdNLEVBRVh2RyxFQUFLLENBQUMsRUFBSXVGLEVBQVksT0FBT3ZGLEVBQUssQ0FBQyxDQUFDLEVBRWhDLE9BQU9BLEVBQUssQ0FBQyxHQUFNLFVBRXRCQSxFQUFLLFFBQVEsSUFBSSxFQUlsQixJQUFJOUMsRUFBUSxFQUNaOEMsRUFBSyxDQUFDLEVBQUlBLEVBQUssQ0FBQyxFQUFFLFFBQVEsZ0JBQWlCLENBQUNpRixFQUFPMVMsSUFBVyxDQUU3RCxHQUFJMFMsSUFBVSxLQUNiLE1BQU8sSUFFUi9ILElBQ0EsTUFBTXNKLEVBQVlqQixFQUFZLFdBQVdoVCxDQUFNLEVBQy9DLEdBQUksT0FBT2lVLEdBQWMsV0FBWSxDQUNwQyxNQUFNL1MsR0FBTXVNLEVBQUs5QyxDQUFLLEVBQ3RCK0gsRUFBUXVCLEVBQVUsS0FBS0YsRUFBTTdTLEVBQUcsRUFHaEN1TSxFQUFLLE9BQU85QyxFQUFPLENBQUMsRUFDcEJBLEdBQ0wsQ0FDSSxPQUFPK0gsQ0FDWCxDQUFJLEVBR0RNLEVBQVksV0FBVyxLQUFLZSxFQUFNdEcsQ0FBSSxHQUV4QnNHLEVBQUssS0FBT2YsRUFBWSxLQUNoQyxNQUFNZSxFQUFNdEcsQ0FBSSxDQUN6QixDQUVFLE9BQUFxRyxFQUFNLFVBQVlOLEVBQ2xCTSxFQUFNLFVBQVlkLEVBQVksVUFBUyxFQUN2Q2MsRUFBTSxNQUFRZCxFQUFZLFlBQVlRLENBQVMsRUFDL0NNLEVBQU0sT0FBU0ksRUFDZkosRUFBTSxRQUFVZCxFQUFZLFFBRTVCLE9BQU8sZUFBZWMsRUFBTyxVQUFXLENBQ3ZDLFdBQVksR0FDWixhQUFjLEdBQ2QsSUFBSyxJQUNBSCxJQUFtQixLQUNmQSxHQUVKQyxJQUFvQlosRUFBWSxhQUNuQ1ksRUFBa0JaLEVBQVksV0FDOUJhLEVBQWViLEVBQVksUUFBUVEsQ0FBUyxHQUd0Q0ssR0FFUixJQUFLeFYsR0FBSyxDQUNUc1YsRUFBaUJ0VixDQUNyQixDQUNBLENBQUcsRUFHRyxPQUFPMlUsRUFBWSxNQUFTLFlBQy9CQSxFQUFZLEtBQUtjLENBQUssRUFHaEJBLENBQ1QsQ0FFQyxTQUFTSSxFQUFPVixFQUFXVyxFQUFXLENBQ3JDLE1BQU1DLEVBQVdwQixFQUFZLEtBQUssV0FBYSxPQUFPbUIsRUFBYyxJQUFjLElBQU1BLEdBQWFYLENBQVMsRUFDOUcsT0FBQVksRUFBUyxJQUFNLEtBQUssSUFDYkEsQ0FDVCxDQVNDLFNBQVNqQixFQUFPa0IsRUFBWSxDQUMzQnJCLEVBQVksS0FBS3FCLENBQVUsRUFDM0JyQixFQUFZLFdBQWFxQixFQUV6QnJCLEVBQVksTUFBUSxDQUFBLEVBQ3BCQSxFQUFZLE1BQVEsQ0FBQSxFQUVwQixNQUFNc0IsR0FBUyxPQUFPRCxHQUFlLFNBQVdBLEVBQWEsSUFDM0QsS0FBSSxFQUNKLFFBQVEsT0FBUSxHQUFHLEVBQ25CLE1BQU0sR0FBRyxFQUNULE9BQU8sT0FBTyxFQUVoQixVQUFXRSxLQUFNRCxFQUNaQyxFQUFHLENBQUMsSUFBTSxJQUNidkIsRUFBWSxNQUFNLEtBQUt1QixFQUFHLE1BQU0sQ0FBQyxDQUFDLEVBRWxDdkIsRUFBWSxNQUFNLEtBQUt1QixDQUFFLENBRzdCLENBVUMsU0FBU0MsRUFBZ0JDLEVBQVFDLEVBQVUsQ0FDMUMsSUFBSUMsRUFBYyxFQUNkQyxFQUFnQixFQUNoQkMsRUFBWSxHQUNaQyxFQUFhLEVBRWpCLEtBQU9ILEVBQWNGLEVBQU8sUUFDM0IsR0FBSUcsRUFBZ0JGLEVBQVMsU0FBV0EsRUFBU0UsQ0FBYSxJQUFNSCxFQUFPRSxDQUFXLEdBQUtELEVBQVNFLENBQWEsSUFBTSxLQUVsSEYsRUFBU0UsQ0FBYSxJQUFNLEtBQy9CQyxFQUFZRCxFQUNaRSxFQUFhSCxFQUNiQyxNQUVBRCxJQUNBQyxhQUVTQyxJQUFjLEdBRXhCRCxFQUFnQkMsRUFBWSxFQUM1QkMsSUFDQUgsRUFBY0csTUFFZCxPQUFPLEdBS1QsS0FBT0YsRUFBZ0JGLEVBQVMsUUFBVUEsRUFBU0UsQ0FBYSxJQUFNLEtBQ3JFQSxJQUdELE9BQU9BLElBQWtCRixFQUFTLE1BQ3BDLENBUUMsU0FBU3hCLEdBQVUsQ0FDbEIsTUFBTW1CLEVBQWEsQ0FDbEIsR0FBR3JCLEVBQVksTUFDZixHQUFHQSxFQUFZLE1BQU0sSUFBSVEsR0FBYSxJQUFNQSxDQUFTLENBQ3hELEVBQUksS0FBSyxHQUFHLEVBQ1YsT0FBQVIsRUFBWSxPQUFPLEVBQUUsRUFDZHFCLENBQ1QsQ0FTQyxTQUFTakIsRUFBUXhPLEVBQU0sQ0FDdEIsVUFBV21RLEtBQVEvQixFQUFZLE1BQzlCLEdBQUl3QixFQUFnQjVQLEVBQU1tUSxDQUFJLEVBQzdCLE1BQU8sR0FJVCxVQUFXUixLQUFNdkIsRUFBWSxNQUM1QixHQUFJd0IsRUFBZ0I1UCxFQUFNMlAsQ0FBRSxFQUMzQixNQUFPLEdBSVQsTUFBTyxFQUNULENBU0MsU0FBU3RCLEVBQU8vUixFQUFLLENBQ3BCLE9BQUlBLGFBQWUsTUFDWEEsRUFBSSxPQUFTQSxFQUFJLFFBRWxCQSxDQUNULENBTUMsU0FBU29TLEdBQVUsQ0FDbEIsUUFBUSxLQUFLLHVJQUF1SSxDQUN0SixDQUVDLE9BQUFOLEVBQVksT0FBT0EsRUFBWSxNQUFNLEVBRTlCQSxDQUNSLENBRUEsT0FBQWdDLEdBQWlCbEMsMERDN1JqQm1DLEVBQUEsV0FBcUJDLEVBQ3JCRCxFQUFBLEtBQWVFLEVBQ2ZGLEVBQUEsS0FBZUcsRUFDZkgsRUFBQSxVQUFvQkksRUFDcEJKLEVBQUEsUUFBa0JLLEVBQVksRUFDOUJMLEVBQUEsU0FBbUIsSUFBTSxDQUN4QixJQUFJTSxFQUFTLEdBRWIsTUFBTyxJQUFNLENBQ1BBLElBQ0pBLEVBQVMsR0FDVCxRQUFRLEtBQUssdUlBQXVJLEVBRXZKLENBQ0EsR0FBQyxFQU1ETixFQUFBLE9BQWlCLENBQ2hCLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFdBWUQsU0FBU0ksR0FBWSxDQUlwQixHQUFJLE9BQU8sT0FBVyxLQUFlLE9BQU8sVUFBWSxPQUFPLFFBQVEsT0FBUyxZQUFjLE9BQU8sUUFBUSxRQUM1RyxNQUFPLEdBSVIsR0FBSSxPQUFPLFVBQWMsS0FBZSxVQUFVLFdBQWEsVUFBVSxVQUFVLFlBQVcsRUFBRyxNQUFNLHVCQUF1QixFQUM3SCxNQUFPLEdBR1IsSUFBSTNULEVBS0osT0FBUSxPQUFPLFNBQWEsS0FBZSxTQUFTLGlCQUFtQixTQUFTLGdCQUFnQixPQUFTLFNBQVMsZ0JBQWdCLE1BQU0sa0JBRXRJLE9BQU8sT0FBVyxLQUFlLE9BQU8sVUFBWSxPQUFPLFFBQVEsU0FBWSxPQUFPLFFBQVEsV0FBYSxPQUFPLFFBQVEsUUFHMUgsT0FBTyxVQUFjLEtBQWUsVUFBVSxZQUFjQSxFQUFJLFVBQVUsVUFBVSxZQUFXLEVBQUcsTUFBTSxnQkFBZ0IsSUFBTSxTQUFTQSxFQUFFLENBQUMsRUFBRyxFQUFFLEdBQUssSUFFcEosT0FBTyxVQUFjLEtBQWUsVUFBVSxXQUFhLFVBQVUsVUFBVSxZQUFXLEVBQUcsTUFBTSxvQkFBb0IsQ0FDMUgsQ0FRQSxTQUFTd1QsRUFBV3pILEVBQU0sQ0FRekIsR0FQQUEsRUFBSyxDQUFDLEdBQUssS0FBSyxVQUFZLEtBQU8sSUFDbEMsS0FBSyxXQUNKLEtBQUssVUFBWSxNQUFRLEtBQzFCQSxFQUFLLENBQUMsR0FDTCxLQUFLLFVBQVksTUFBUSxLQUMxQixJQUFNK0gsRUFBTyxRQUFRLFNBQVMsS0FBSyxJQUFJLEVBRXBDLENBQUMsS0FBSyxVQUNULE9BR0QsTUFBTW5PLEVBQUksVUFBWSxLQUFLLE1BQzNCb0csRUFBSyxPQUFPLEVBQUcsRUFBR3BHLEVBQUcsZ0JBQWdCLEVBS3JDLElBQUlzRCxFQUFRLEVBQ1I4SyxFQUFRLEVBQ1poSSxFQUFLLENBQUMsRUFBRSxRQUFRLGNBQWVpRixHQUFTLENBQ25DQSxJQUFVLE9BR2QvSCxJQUNJK0gsSUFBVSxPQUdiK0MsRUFBUTlLLEdBRVgsQ0FBRSxFQUVEOEMsRUFBSyxPQUFPZ0ksRUFBTyxFQUFHcE8sQ0FBQyxDQUN4QixDQVVBNE4sRUFBQSxJQUFjLFFBQVEsT0FBUyxRQUFRLE1BQVEsSUFBTSxDQUFBLEdBUXJELFNBQVNFLEVBQUtkLEVBQVksQ0FDekIsR0FBSSxDQUNDQSxFQUNIWSxFQUFRLFFBQVEsUUFBUSxRQUFTWixDQUFVLEVBRTNDWSxFQUFRLFFBQVEsV0FBVyxPQUFPLENBRXJDLE1BQWlCLENBR2pCLENBQ0EsQ0FRQSxTQUFTRyxHQUFPLENBQ2YsSUFBSU0sRUFDSixHQUFJLENBQ0hBLEVBQUlULEVBQVEsUUFBUSxRQUFRLE9BQU8sR0FBS0EsRUFBUSxRQUFRLFFBQVEsT0FBTyxDQUN6RSxNQUFpQixDQUdqQixDQUdDLE1BQUksQ0FBQ1MsR0FBSyxPQUFPLFFBQVksS0FBZSxRQUFTLFVBQ3BEQSxFQUFJLFFBQVEsSUFBSSxPQUdWQSxDQUNSLENBYUEsU0FBU0osR0FBZSxDQUN2QixHQUFJLENBR0gsT0FBTyxZQUNULE1BQWlCLENBR2pCLENBQ0EsQ0FFQUUsRUFBQSxRQUFpQm5DLEdBQUEsRUFBb0I0QixDQUFPLEVBRTVDLEtBQU0sQ0FBQyxXQUFBVSxDQUFVLEVBQUlILEVBQU8sUUFNNUJHLEVBQVcsRUFBSSxTQUFVdFgsRUFBRyxDQUMzQixHQUFJLENBQ0gsT0FBTyxLQUFLLFVBQVVBLENBQUMsQ0FDekIsT0FBVUosRUFBTyxDQUNmLE1BQU8sK0JBQWlDQSxFQUFNLE9BQ2hELENBQ0EsMkRDelFPLFNBQVMyWCxJQUFVLENBQ3RCLE9BQU9DLEdBQVEsQ0FDbkIsQ0FPQSxTQUFTQyxHQUFVQyxFQUFVLENBQ3pCLE1BQU1oRCxFQUFNNkMsR0FBTyxFQUNuQixPQUFRLE9BQU83QyxFQUFRLE1BQ2xCQSxFQUFJZ0QsQ0FBUSxJQUFNLFFBQVVoRCxFQUFJZ0QsQ0FBUSxJQUFNLElBQ3ZELENBSU8sTUFBTUMsR0FBVSxDQUNuQixJQUFJLFVBQVcsQ0FFUCxNQUFPLEVBT2YsQ0FDSixFQUlhQyxHQUFVLENBQ25CLElBQUksa0JBQW1CLENBQ25CLE9BQU9ILEdBQVUsbUNBQW1DLENBQ3hELEVBQ0EsSUFBSSxpQkFBa0IsQ0FDbEIsT0FBT0EsR0FBVSxrQ0FBa0MsQ0FDdkQsQ0FDSixFQ3ZDTUksR0FBbUJELEdBQVEsaUJBSzNCRSxHQUFrQkYsR0FBUSxnQkFPekIsU0FBU0csR0FBVTVDLEVBQVksZ0JBQWlCLENBQ25ELE1BQU8sQ0FDSCxVQUFBQSxFQUNBLE1BQU9NLEdBQU1OLENBQVMsRUFDdEIsTUFBTyxJQUFJL0YsSUFBUyxRQUFRLE1BQU0sR0FBR0EsQ0FBSSxFQUN6QyxLQUFNLElBQUlBLElBQVMsUUFBUSxLQUFLLEdBQUdBLENBQUksRUFDdkMsaUJBQUF5SSxHQUNBLGdCQUFBQyxFQUNSLENBQ0EsQ0FDTyxNQUFNRSxFQUFTRCxHQUFVLG9CQUFvQixFQzVCOUNFLEdBQXFCLEdBQ3BCLFNBQVNDLEdBQWNyUixFQUFPLENBRWpDLEdBQUlBLEdBQVUsS0FDVixPQUFPLE9BQU9BLENBQUssRUFFdkIsR0FBSXNSLEdBQWtCdFIsQ0FBSyxFQUN2QixPQUFPdVIsR0FBZ0IsSUFBSSxXQUFXdlIsQ0FBSyxDQUFDLEVBRWhELEdBQUl3UixHQUFrQnhSLENBQUssRUFBRyxDQUMxQixNQUFNeVIsRUFBT3pSLEVBQ2IsT0FBT3VSLEdBQWdCLElBQUksV0FBV0UsRUFBSyxPQUFRQSxFQUFLLFdBQVlBLEVBQUssVUFBVSxDQUFDLENBQ3hGLENBQ0EsR0FBSSxPQUFPelIsR0FBVSxTQUNqQixPQUFPQSxFQUVYLEdBQUksT0FBT0EsR0FBVSxTQUNqQixHQUFJLENBQ0EsT0FBTyxLQUFLLFVBQVVBLEVBQU8wUixFQUFtQixDQUNwRCxNQUNXLENBQ1AsTUFBTyxtQ0FDWCxDQUVKLE9BQU8sT0FBTzFSLENBQUssQ0FDdkIsQ0FDTyxTQUFTc1IsR0FBa0J0UixFQUFPLENBRXJDLEdBQUlBLGFBQWlCLFlBQ2pCLE1BQU8sR0FFWCxNQUFNMlIsRUFBd0IsV0FBVyxrQkFDekMsTUFBTyxHQUFRQSxHQUF5QjNSLGFBQWlCMlIsRUFDN0QsQ0FDTyxTQUFTSCxHQUFrQnhSLEVBQU8sQ0FFckMsT0FBTyxPQUFPLFlBQWdCLEtBQWUsWUFBWSxPQUFPQSxDQUFLLENBQ3pFLENBQ08sU0FBUzRSLEdBQTJCNVIsRUFBTyxDQUU5QyxPQUFRLE9BQU9BLEdBQVUsVUFDckJBLElBQVUsTUFDVkEsRUFBTSxPQUFTLFVBQ2YsTUFBTSxRQUFRQSxFQUFNLElBQUksQ0FDaEMsQ0FDTyxTQUFTNlIsR0FBYTdSLEVBQU8sQ0FFaEMsTUFBTThSLEVBQWEsV0FBVyxPQUM5QixNQUFPLEdBQVFBLEdBQ1gsT0FBT0EsRUFBVyxVQUFhLFlBQy9CQSxFQUFXLFNBQVM5UixDQUFLLEVBQ2pDLENBQ0EsU0FBU3VSLEdBQWdCUSxFQUFPLENBQzVCLEdBQUlBLEVBQU0sU0FBVyxFQUNqQixNQUFPLHlCQUVYLE1BQU1DLEVBQWdCLEtBQUssSUFBSUQsRUFBTSxPQUFRWCxFQUFrQixFQUN6RGEsRUFBZSxDQUFBLEVBQ3JCLFFBQVNyVyxFQUFJLEVBQUdBLEVBQUlvVyxFQUFlcFcsSUFDL0JxVyxFQUFhLEtBQUtDLEdBQVdILEVBQU1uVyxDQUFDLENBQUMsQ0FBQyxFQUUxQyxNQUFNdVcsRUFBV0osRUFBTSxPQUFTWCxHQUFxQixLQUFPLEdBRTVELE1BQU8sZUFEU2EsRUFBYSxLQUFLLEdBQUcsQ0FDUixHQUFHRSxDQUFRLEtBQUtKLEVBQU0sTUFBTSxVQUM3RCxDQUNBLFNBQVNHLEdBQVdFLEVBQU0sQ0FDdEIsTUFBTyxLQUFLQSxFQUFLLFNBQVMsRUFBRSxFQUFFLFNBQVMsRUFBRyxHQUFHLENBQUMsRUFDbEQsQ0FDQSxTQUFTVixHQUFvQlcsRUFBTUMsRUFBYSxDQUM1QyxHQUFJaEIsR0FBa0JnQixDQUFXLEVBQzdCLE9BQU9mLEdBQWdCLElBQUksV0FBV2UsQ0FBVyxDQUFDLEVBRXRELEdBQUlkLEdBQWtCYyxDQUFXLEVBQUcsQ0FDaEMsTUFBTWIsRUFBT2EsRUFDYixPQUFPZixHQUFnQixJQUFJLFdBQVdFLEVBQUssT0FBUUEsRUFBSyxXQUFZQSxFQUFLLFVBQVUsQ0FBQyxDQUN4RixDQUNBLE9BQUlHLEdBQTJCVSxDQUFXLEVBQy9CZixHQUFnQixXQUFXLEtBQUtlLEVBQVksSUFBSSxDQUFDLEVBRXJEQSxDQUNYLENDaEZPLFNBQVNDLEdBQXlCaEssRUFBTSxDQUMzQyxNQUFPLENBQ0gsS0FBTSxhQUNOLEtBQU1BLEVBQUssS0FDWCxJQUFLQSxFQUFLLEdBQ2xCLENBQ0EsQ0FDTyxTQUFTaUssR0FBMEJqSyxFQUFNLENBQzVDLE1BQU8sQ0FDSCxLQUFNLGNBQ04sS0FBTUEsRUFBSyxLQUNYLElBQUtBLEVBQUssR0FDbEIsQ0FDQSxDQXFCTyxTQUFTa0ssR0FBMkJDLEVBQVksQ0FDbkQsT0FBS0EsRUFHRUEsRUFBVyxJQUFLQyxHQUFPLFNBQVVBLEdBQU1BLEVBQUcsT0FBUyxhQUNwREEsRUFDQUosR0FBeUJJLENBQUUsQ0FBQyxFQUp2QixDQUFBLENBS2YsQ0FDTyxTQUFTQyxHQUE0QkYsRUFBWSxDQUNwRCxPQUFLQSxFQUdFQSxFQUFXLElBQUtDLEdBQU8sU0FBVUEsR0FBTUEsRUFBRyxPQUFTLGNBQ3BEQSxFQUNBSCxHQUEwQkcsQ0FBRSxDQUFDLEVBSnhCLENBQUEsQ0FLZixDQ3hDQSxTQUFTRSxHQUFtQm5KLEVBQVcsQ0FDbkMsTUFBUSxDQUFDLENBQUNBLEdBQ04sT0FBT0EsR0FBYyxVQUNyQixPQUFPQSxFQUFVLFFBQVcsVUFDcEMsQ0F1QkEsTUFBTW9KLEdBQWdCLElBQUksUUFFcEJDLEdBQXlCLElBQUksUUFFN0JDLEdBQXdCLElBQUksUUFDbEMsU0FBU0MsR0FBdUI1TSxFQUFNLENBQ2xDLE1BQU02TSxFQUFjSCxHQUF1QixJQUFJMU0sQ0FBSSxFQUNuRCxHQUFJNk0sRUFDQSxPQUFPQSxFQUVYLEdBQUksT0FBTzdNLEVBQUssVUFBYSxZQUN6QndNLEdBQW1CeE0sRUFBSyxRQUFRLEVBQ2hDLE9BQU9BLEVBQUssUUFHcEIsQ0FDQSxTQUFTOE0sR0FBc0I5TSxFQUFNK00sRUFBWTVMLEVBQVUsQ0FDdkQsSUFBSTZMLEVBQWdCTCxHQUFzQixJQUFJSSxDQUFVLEVBQ25EQyxJQUNEQSxFQUFnQixJQUFJLElBQ3BCTCxHQUFzQixJQUFJSSxFQUFZQyxDQUFhLEdBRXZEQSxFQUFjLElBQUloTixFQUFNbUIsQ0FBUSxDQUNwQyxDQUtPLGVBQWU4TCxHQUFnQi9LLEVBQU0sQ0FDeEMsS0FBTSxDQUFFLEtBQUFsQyxFQUFNLFdBQUErTSxDQUFVLEVBQUs3SyxFQUV2QmdMLEVBQVVsTixFQUNoQixJQUFJbU4sRUFBYVYsR0FBYyxJQUFJUyxDQUFPLEVBQ3JDQyxJQUNEQSxFQUFhLElBQUksUUFDakJWLEdBQWMsSUFBSVMsRUFBU0MsQ0FBVSxHQUV6QyxNQUFNQyxFQUFTRCxFQUFXLElBQUlKLENBQVUsRUFDeEMsR0FBSUssRUFDQSxPQUFBTixHQUFzQjlNLEVBQU0rTSxFQUFZSyxDQUFNLEVBQ3ZDQSxFQUFPLFNBRWxCLE1BQU1DLEVBQW9CVCxHQUF1QjVNLENBQUksRUFDL0NzTixFQUFZRCxHQUFxQmIsR0FBbUJhLENBQWlCLEVBQ3JFQSxFQUNBYixHQUFtQnhNLEVBQUssUUFBUSxFQUM1QkEsRUFBSyxTQUNMLE9BQ0o2TSxFQUFjLE9BQU9RLEdBQXNCLFdBQzNDQSxHQUNDQyxHQUFBLFlBQUFBLEVBQVcsVUFDVCxPQUFPdE4sRUFBSyxVQUFhLFdBQ3BCQSxFQUFLLFNBQ0wsUUFDUnVOLEVBQVdELEdBQUEsWUFBQUEsRUFBVyxRQUN0QkUsRUFBV1gsR0FBZSxPQUFPQSxHQUFnQixXQUNqRCxNQUFNQSxFQUFZLENBQUUsV0FBQUUsQ0FBVSxDQUFFLEVBQ2hDL00sRUFBSyxTQUNYLEdBQUksQ0FBQ3dOLEVBQ0QsTUFBTSxJQUFJNUssRUFBVSx3REFBd0QsRUFFaEYsTUFBTXpCLEVBQVcsQ0FDYixTQUFBcU0sRUFDQSxRQUFTRCxDQUNqQixFQUNJLE9BQUFKLEVBQVcsSUFBSUosRUFBWTVMLENBQVEsRUFDbkMyTCxHQUFzQjlNLEVBQU0rTSxFQUFZNUwsQ0FBUSxFQUNoRG5CLEVBQUssU0FBV3dOLEVBQ1RBLENBQ1gsQ0FLTyxlQUFlQyxHQUF5QixDQUFFLFdBQUFWLEdBQWUsQ0FDNUQsTUFBTUMsRUFBZ0JMLEdBQXNCLElBQUlJLENBQVUsRUFDMUQsR0FBSSxDQUFDQyxFQUNELE9BRUpMLEdBQXNCLE9BQU9JLENBQVUsRUFDdkMsTUFBTVcsRUFBWSxDQUFBLEVBQ2xCLFNBQVcsQ0FBQzFOLEVBQU1tQixDQUFRLElBQUs2TCxFQUFjLFFBQU8sRUFBSSxDQUNwRCxNQUFNRyxFQUFhVixHQUFjLElBQUl6TSxDQUFJLEVBQ3pDbU4sR0FBQSxNQUFBQSxFQUFZLE9BQU9KLEdBQ25CLE1BQU1ZLEVBQW9CZixHQUF1QjVNLENBQUksRUFDakQyTixJQUNBM04sRUFBSyxTQUFXMk4sR0FFaEJ4TSxFQUFTLFNBQ1R1TSxFQUFVLEtBQUssU0FBWSxPQUN2QixPQUFNN1osRUFBQXNOLEVBQVMsVUFBVCxZQUFBdE4sRUFBQSxLQUFBc04sRUFBbUIsQ0FBRSxXQUFBNEwsRUFBWSxTQUFVNUwsRUFBUyxXQUM5RCxDQUFDLENBRVQsQ0FDQSxVQUFXeU0sS0FBV0YsRUFDbEIsR0FBSSxDQUNBLE1BQU1FLEVBQU8sQ0FDakIsT0FDT2xiLEVBQU8sQ0FDVm9ZLEVBQU8sS0FBSywrQ0FBK0NwWSxDQUFLLEVBQUUsQ0FDdEUsQ0FFUixDQW9JQSxTQUFTbWIsR0FBeUJDLEVBQVNwYixFQUFPLENBRTlDLE1BQU8sc0VBRFNBLGFBQWlCLE1BQVFBLEVBQU0sU0FBUSxFQUFLLE9BQU9BLENBQUssQ0FDWSxFQUN4RixDQU9PLFNBQVNzTixHQUFLbEgsRUFBUyxDQUMxQixNQUFNTyxFQUFPUCxFQUFRLEtBQ2ZpTixHQUFtQmpOLEVBQVEsSUFBSSxFQUMvQmlOLEdBQW1Cak4sRUFBUSxRQUFRLElBQUksRUFDdkNpVixFQUFvQixPQUFPalYsRUFBUSxjQUFrQixJQUNyRCtVLEdBQ0EvVSxFQUFRLGNBQ2QsR0FBSSxDQUFDTyxFQUNELE1BQU0sSUFBSSxNQUFNLHdGQUF3RixFQUU1RyxNQUFNMlUsRUFBYWxWLEVBQVEsUUFBVSxHQUNyQyxHQUFJLENBQUNrVixHQUFjdkssR0FBWTNLLEVBQVEsVUFBVSxFQUM3QyxNQUFNLElBQUk4SixFQUFVLDRDQUE0QyxFQUVwRSxLQUFNLENBQUUsT0FBQW5LLEVBQVEsT0FBUXdWLENBQVUsRUFBS2pJLEdBQWdDbE4sRUFBUSxXQUFZTyxDQUFJLEVBQy9GLGVBQWU2VSxFQUFRbkIsRUFBWWpWLEVBQU9xVyxFQUFTLENBQy9DLEtBQU0sQ0FBQ3piLEVBQU8wYixDQUFNLEVBQUksTUFBTTViLEdBQVksSUFBTWlHLEVBQU9YLENBQUssQ0FBQyxFQUM3RCxHQUFJcEYsSUFBVSxLQUNWLE1BQUlvWSxFQUFPLGdCQUNQQSxFQUFPLE1BQU0sK0JBQStCelIsQ0FBSSxFQUFFLEVBR2xEeVIsRUFBTyxNQUFNLCtCQUErQnpSLENBQUksS0FBS3ZCLENBQUssRUFBRSxFQUkxRCxJQUFJMkssR0FBc0IsOEJBQStCLE9BQy9EL1AsRUFBTyxDQUFFLFdBQUFxYSxFQUFZLE1BQUFqVixFQUFPLFFBQUFxVyxDQUFPLENBQUUsRUFFckNyRCxFQUFPLGdCQUNQQSxFQUFPLE1BQU0saUJBQWlCelIsQ0FBSSxFQUFFLEVBR3BDeVIsRUFBTyxNQUFNLGlCQUFpQnpSLENBQUksZUFBZXZCLENBQUssRUFBRSxFQUU1RCxNQUFNN0QsRUFBUyxNQUFNNkUsRUFBUSxRQUFRc1YsRUFBUXJCLEVBQVlvQixDQUFPLEVBQzFERSxFQUFlckQsR0FBYy9XLENBQU0sRUFDekMsT0FBSTZXLEVBQU8sZ0JBQ1BBLEVBQU8sTUFBTSxRQUFRelIsQ0FBSSxZQUFZLEVBR3JDeVIsRUFBTyxNQUFNLFFBQVF6UixDQUFJLGNBQWNnVixDQUFZLEVBQUUsRUFFbERwYSxDQUNYLENBQ0EsZUFBZXFhLEVBQU92QixFQUFZalYsRUFBT3FXLEVBQVMsQ0FDOUMsT0FBT0QsRUFBUW5CLEVBQVlqVixFQUFPcVcsQ0FBTyxFQUFFLE1BQU96YixHQUFVLENBQ3hELEdBQUlxYixFQUFtQixDQUNuQixNQUFNUSxFQUFjQyxHQUFjLEVBQ2xDLE9BQUFELEdBQUEsTUFBQUEsRUFBYSxTQUFTLENBQ2xCLFFBQVMsaUNBQ1QsS0FBTSxDQUNGLFVBQVdsVixFQUNYLE1BQU8zRyxFQUFNLFNBQVEsQ0FDN0MsQ0FDQSxHQUN1QnFiLEVBQWtCaEIsRUFBWXJhLENBQUssQ0FDOUMsQ0FDQSxNQUFNQSxDQUNWLENBQUMsQ0FDTCxDQUNBLE1BQU0rYixFQUFnQixPQUFPM1YsRUFBUSxlQUFrQixXQUNqREEsRUFBUSxjQUNSLFNBQVksT0FBT0EsRUFBUSxlQUFrQixVQUN6Q0EsRUFBUSxjQUNSLEdBQ0p5UixFQUFZLE9BQU96UixFQUFRLFdBQWMsV0FDekMsTUFBT2lVLEVBQVkyQixJQUFVLENBQzNCLE1BQU1DLEVBQVk3VixFQUFRLFVBRTFCLE1BQU8sRUFEUSxNQUFNNlYsRUFBVSxDQUFFLFdBQUE1QixFQUFZLE1BQUEyQixDQUFLLENBQUUsQ0FFeEQsRUFDRSxTQUFZLE9BQU81VixFQUFRLFdBQWMsVUFBWUEsRUFBUSxVQUFZLEdBQy9FLE1BQU8sQ0FDSCxLQUFNLFdBQ04sS0FBQU8sRUFDQSxZQUFhUCxFQUFRLFlBQ3JCLFdBQUFtVixFQUNBLE9BQVFELEVBQ1IsT0FBQU0sRUFDQSxjQUFBRyxFQUNBLFVBQUFsRSxFQUNBLGdCQUFpQjZCLEdBQTJCdFQsRUFBUSxlQUFlLEVBQ25FLGlCQUFrQnlULEdBQTRCelQsRUFBUSxnQkFBZ0IsQ0FDOUUsQ0FDQSxDQ3pXZ0MsU0FBUzhWLEVBQWF2VixFQUFNd1QsRUFBYWxaLEVBQVEsQ0FDN0UsU0FBU2tiLEVBQUtDLEVBQU1oYixFQUFLLENBV3JCLEdBVktnYixFQUFLLE1BQ04sT0FBTyxlQUFlQSxFQUFNLE9BQVEsQ0FDaEMsTUFBTyxDQUNILElBQUFoYixFQUNBLE9BQVFkLEVBQ1IsT0FBUSxJQUFJLEdBQ2hDLEVBQ2dCLFdBQVksRUFDNUIsQ0FBYSxFQUVEOGIsRUFBSyxLQUFLLE9BQU8sSUFBSXpWLENBQUksRUFDekIsT0FFSnlWLEVBQUssS0FBSyxPQUFPLElBQUl6VixDQUFJLEVBQ3pCd1QsRUFBWWlDLEVBQU1oYixDQUFHLEVBRXJCLE1BQU1pYixFQUFRL2IsRUFBRSxVQUNWNEosRUFBTyxPQUFPLEtBQUttUyxDQUFLLEVBQzlCLFFBQVN4WixFQUFJLEVBQUdBLEVBQUlxSCxFQUFLLE9BQVFySCxJQUFLLENBQ2xDLE1BQU14QyxFQUFJNkosRUFBS3JILENBQUMsRUFDVnhDLEtBQUsrYixJQUNQQSxFQUFLL2IsQ0FBQyxFQUFJZ2MsRUFBTWhjLENBQUMsRUFBRSxLQUFLK2IsQ0FBSSxFQUVwQyxDQUNKLENBRUEsTUFBTUUsR0FBU3JiLEdBQUEsWUFBQUEsRUFBUSxTQUFVLE9BQ2pDLE1BQU1zYixVQUFtQkQsQ0FBTyxDQUNwQyxDQUNJLE9BQU8sZUFBZUMsRUFBWSxPQUFRLENBQUUsTUFBTzVWLEVBQU0sRUFDekQsU0FBU3JHLEVBQUVjLEVBQUssQ0FDWixJQUFJRCxFQUNKLE1BQU1pYixFQUFPbmIsR0FBQSxNQUFBQSxFQUFRLE9BQVMsSUFBSXNiLEVBQWUsS0FDakRKLEVBQUtDLEVBQU1oYixDQUFHLEdBQ2JELEVBQUtpYixFQUFLLE1BQU0sV0FBYWpiLEVBQUcsU0FBVyxJQUM1QyxVQUFXcEIsS0FBTXFjLEVBQUssS0FBSyxTQUN2QnJjLEVBQUUsRUFFTixPQUFPcWMsQ0FDWCxDQUNBLGNBQU8sZUFBZTliLEVBQUcsT0FBUSxDQUFFLE1BQU82YixFQUFNLEVBQ2hELE9BQU8sZUFBZTdiLEVBQUcsT0FBTyxZQUFhLENBQ3pDLE1BQVE4YixHQUFTLFNBQ2IsT0FBSW5iLEdBQUEsTUFBQUEsRUFBUSxRQUFVbWIsYUFBZ0JuYixFQUFPLE9BQ2xDLElBQ0pRLEdBQUFOLEVBQUFpYixHQUFBLFlBQUFBLEVBQU0sT0FBTixZQUFBamIsRUFBWSxTQUFaLFlBQUFNLEVBQW9CLElBQUlrRixFQUNuQyxDQUNSLENBQUssRUFDRCxPQUFPLGVBQWVyRyxFQUFHLE9BQVEsQ0FBRSxNQUFPcUcsRUFBTSxFQUN6Q3JHLENBQ1gsQ0FHTyxNQUFNa2MsV0FBdUIsS0FBTSxDQUN0QyxhQUFjLENBQ1YsTUFBTSwwRUFBMEUsQ0FDcEYsQ0FDSixDQUNPLE1BQU1DLFdBQXdCLEtBQU0sQ0FDdkMsWUFBWTlWLEVBQU0sQ0FDZCxNQUFNLHVEQUF1REEsQ0FBSSxFQUFFLEVBQ25FLEtBQUssS0FBTyxnQkFDaEIsQ0FDSixDQUNPLE1BQU0rVixHQUFlLENBQUEsRUFDckIsU0FBU0MsR0FBT0MsRUFBVyxDQUc5QixPQUFPRixFQUNYLENDL0RPLFNBQVN6YyxHQUFjQyxFQUFTLENBQ25DLE1BQU1DLEVBQWdCLE9BQU8sT0FBT0QsQ0FBTyxFQUFFLE9BQVFFLEdBQU0sT0FBT0EsR0FBTSxRQUFRLEVBSWhGLE9BSGUsT0FBTyxRQUFRRixDQUFPLEVBQ2hDLE9BQU8sQ0FBQyxDQUFDRyxFQUFHQyxDQUFDLElBQU1ILEVBQWMsUUFBUSxDQUFDRSxDQUFDLElBQU0sRUFBRSxFQUNuRCxJQUFJLENBQUMsQ0FBQ0MsRUFBR0YsQ0FBQyxJQUFNQSxDQUFDLENBRTFCLENBSU8sU0FBU3ljLEdBQXNCdmMsRUFBRzJHLEVBQU8sQ0FDNUMsT0FBSSxPQUFPQSxHQUFVLFNBQ1ZBLEVBQU0sU0FBUSxFQUNsQkEsQ0FDWCxDQUNPLFNBQVN5VCxHQUFPb0MsRUFBUSxDQUUzQixNQUFPLENBQ0gsSUFBSSxPQUFRLENBQ0UsQ0FDTixNQUFNN1YsRUFBUTZWLEVBQU0sRUFDcEIsY0FBTyxlQUFlLEtBQU0sUUFBUyxDQUFFLE1BQUE3VixDQUFLLENBQUUsRUFDdkNBLENBQ1gsQ0FFSixDQUNSLENBQ0EsQ0FDTyxTQUFTOFYsR0FBUTNYLEVBQU8sQ0FDM0IsT0FBT0EsR0FBVSxJQUNyQixDQUNPLFNBQVM0WCxHQUFXdlQsRUFBUSxDQUMvQixNQUFNd1QsRUFBUXhULEVBQU8sV0FBVyxHQUFHLEVBQUksRUFBSSxFQUNyQ3lULEVBQU16VCxFQUFPLFNBQVMsR0FBRyxFQUFJQSxFQUFPLE9BQVMsRUFBSUEsRUFBTyxPQUM5RCxPQUFPQSxFQUFPLE1BQU13VCxFQUFPQyxDQUFHLENBQ2xDLENBQ08sU0FBU0MsR0FBbUJsYSxFQUFLbWEsRUFBTSxDQUMxQyxNQUFNQyxHQUFlcGEsRUFBSSxTQUFRLEVBQUcsTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFLLElBQUksT0FDbkRxYSxFQUFhRixFQUFLLFNBQVEsRUFDaEMsSUFBSUcsR0FBZ0JELEVBQVcsTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFLLElBQUksT0FDcEQsR0FBSUMsSUFBaUIsR0FBSyxXQUFXLEtBQUtELENBQVUsRUFBRyxDQUNuRCxNQUFNN0ksRUFBUTZJLEVBQVcsTUFBTSxZQUFZLEVBQ3ZDN0ksR0FBQSxNQUFBQSxFQUFRLEtBQ1I4SSxFQUFlLE9BQU8sU0FBUzlJLEVBQU0sQ0FBQyxDQUFDLEVBRS9DLENBQ0EsTUFBTStJLEVBQVdILEVBQWNFLEVBQWVGLEVBQWNFLEVBQ3RERSxFQUFTLE9BQU8sU0FBU3hhLEVBQUksUUFBUXVhLENBQVEsRUFBRSxRQUFRLElBQUssRUFBRSxDQUFDLEVBQy9ERSxFQUFVLE9BQU8sU0FBU04sRUFBSyxRQUFRSSxDQUFRLEVBQUUsUUFBUSxJQUFLLEVBQUUsQ0FBQyxFQUN2RSxPQUFRQyxFQUFTQyxFQUFXLElBQU1GLENBQ3RDLENBQ0EsTUFBTUcsR0FBYSxPQUFPLFlBQVksRUFDL0IsU0FBU0MsRUFBV3hULEVBQVE1SCxFQUFLc2EsRUFBUSxDQUM1QyxJQUFJN1YsRUFDSixPQUFPLGVBQWVtRCxFQUFRNUgsRUFBSyxDQUMvQixLQUFNLENBQ0YsR0FBSXlFLElBQVUwVyxHQUlkLE9BQUkxVyxJQUFVLFNBQ1ZBLEVBQVEwVyxHQUNSMVcsRUFBUTZWLEVBQU0sR0FFWDdWLENBQ1gsRUFDQSxJQUFJN0csRUFBRyxDQUNILE9BQU8sZUFBZWdLLEVBQVE1SCxFQUFLLENBQy9CLE1BQU9wQyxDQUV2QixDQUFhLENBRUwsRUFDQSxhQUFjLEVBQ3RCLENBQUssQ0FDTCxDQUlPLFNBQVN5ZCxHQUFXQyxFQUFRQyxFQUFNOVcsRUFBTyxDQUM1QyxPQUFPLGVBQWU2VyxFQUFRQyxFQUFNLENBQ2hDLE1BQUE5VyxFQUNBLFNBQVUsR0FDVixXQUFZLEdBQ1osYUFBYyxFQUN0QixDQUFLLENBQ0wsQ0FDTyxTQUFTK1csTUFBYS9ZLEVBQU0sQ0FDL0IsTUFBTWdaLEVBQW9CLENBQUEsRUFDMUIsVUFBVzdjLEtBQU82RCxFQUFNLENBQ3BCLE1BQU1pWixFQUFjLE9BQU8sMEJBQTBCOWMsQ0FBRyxFQUN4RCxPQUFPLE9BQU82YyxFQUFtQkMsQ0FBVyxDQUNoRCxDQUNBLE9BQU8sT0FBTyxpQkFBaUIsQ0FBQSxFQUFJRCxDQUFpQixDQUN4RCxDQTRCTyxTQUFTRSxHQUFJM0osRUFBSyxDQUNyQixPQUFPLEtBQUssVUFBVUEsQ0FBRyxDQUM3QixDQUNPLFNBQVM0SixHQUFRaFosRUFBTyxDQUMzQixPQUFPQSxFQUNGLFlBQVcsRUFDWCxLQUFJLEVBQ0osUUFBUSxZQUFhLEVBQUUsRUFDdkIsUUFBUSxXQUFZLEdBQUcsRUFDdkIsUUFBUSxXQUFZLEVBQUUsQ0FDL0IsQ0FDTyxNQUFNaVosR0FBcUIsc0JBQXVCLE1BQVEsTUFBTSxrQkFBb0IsSUFBSUMsSUFBVSxDQUFFLEVBQ3BHLFNBQVN2USxHQUFTd1EsRUFBTSxDQUMzQixPQUFPLE9BQU9BLEdBQVMsVUFBWUEsSUFBUyxNQUFRLENBQUMsTUFBTSxRQUFRQSxDQUFJLENBQzNFLENBQ08sTUFBTUMsR0FBYTlELEdBQU8sSUFBTSxPQUVuQyxHQUFJLE9BQU8sVUFBYyxPQUFldlosRUFBQSxpQ0FBVyxZQUFYLE1BQUFBLEVBQXNCLFNBQVMsZUFDbkUsTUFBTyxHQUVYLEdBQUksQ0FDQSxNQUFNc2QsRUFBSSxTQUNWLFdBQUlBLEVBQUUsRUFBRSxFQUNELEVBQ1gsTUFDVSxDQUNOLE1BQU8sRUFDWCxDQUNKLENBQUMsRUFDTSxTQUFTQyxHQUFjQyxFQUFHLENBQzdCLEdBQUk1USxHQUFTNFEsQ0FBQyxJQUFNLEdBQ2hCLE1BQU8sR0FFWCxNQUFNQyxFQUFPRCxFQUFFLFlBR2YsR0FGSUMsSUFBUyxRQUVULE9BQU9BLEdBQVMsV0FDaEIsTUFBTyxHQUVYLE1BQU1DLEVBQU9ELEVBQUssVUFJbEIsTUFISSxFQUFBN1EsR0FBUzhRLENBQUksSUFBTSxJQUduQixPQUFPLFVBQVUsZUFBZSxLQUFLQSxFQUFNLGVBQWUsSUFBTSxHQUl4RSxDQUNPLFNBQVNDLEdBQWFILEVBQUcsQ0FDNUIsT0FBSUQsR0FBY0MsQ0FBQyxFQUNSLENBQUUsR0FBR0EsQ0FBQyxFQUNiLE1BQU0sUUFBUUEsQ0FBQyxFQUNSLENBQUMsR0FBR0EsQ0FBQyxFQUNUQSxDQUNYLENBdURPLE1BQU1JLEdBQW1CLElBQUksSUFBSSxDQUFDLFNBQVUsU0FBVSxRQUFRLENBQUMsRUFFL0QsU0FBU0MsR0FBWXhLLEVBQUssQ0FDN0IsT0FBT0EsRUFBSSxRQUFRLHNCQUF1QixNQUFNLENBQ3BELENBRU8sU0FBU3lLLEdBQU03QyxFQUFNaGIsRUFBS0gsRUFBUSxDQUNyQyxNQUFNaWUsRUFBSyxJQUFJOUMsRUFBSyxLQUFLLE9BQU9oYixHQUFPZ2IsRUFBSyxLQUFLLEdBQUcsRUFDcEQsT0FBSSxDQUFDaGIsR0FBT0gsR0FBQSxNQUFBQSxFQUFRLFVBQ2hCaWUsRUFBRyxLQUFLLE9BQVM5QyxHQUNkOEMsQ0FDWCxDQUNPLFNBQVNDLEVBQWdCamUsRUFBUyxDQUNyQyxNQUFNRCxFQUFTQyxFQUNmLEdBQUksQ0FBQ0QsRUFDRCxNQUFPLENBQUEsRUFDWCxHQUFJLE9BQU9BLEdBQVcsU0FDbEIsTUFBTyxDQUFFLE1BQU8sSUFBTUEsQ0FBTSxFQUNoQyxJQUFJQSxHQUFBLFlBQUFBLEVBQVEsV0FBWSxPQUFXLENBQy9CLElBQUlBLEdBQUEsWUFBQUEsRUFBUSxTQUFVLE9BQ2xCLE1BQU0sSUFBSSxNQUFNLGtEQUFrRCxFQUN0RUEsRUFBTyxNQUFRQSxFQUFPLE9BQzFCLENBRUEsT0FEQSxPQUFPQSxFQUFPLFFBQ1YsT0FBT0EsRUFBTyxPQUFVLFNBQ2pCLENBQUUsR0FBR0EsRUFBUSxNQUFPLElBQU1BLEVBQU8sS0FBSyxFQUMxQ0EsQ0FDWCxDQXlDTyxTQUFTbWUsR0FBYTdjLEVBQU8sQ0FDaEMsT0FBTyxPQUFPLEtBQUtBLENBQUssRUFBRSxPQUFRbEMsR0FDdkJrQyxFQUFNbEMsQ0FBQyxFQUFFLEtBQUssUUFBVSxZQUFja0MsRUFBTWxDLENBQUMsRUFBRSxLQUFLLFNBQVcsVUFDekUsQ0FDTCxDQUNPLE1BQU1nZixHQUF1QixDQUNoQyxRQUFTLENBQUMsT0FBTyxpQkFBa0IsT0FBTyxnQkFBZ0IsRUFDMUQsTUFBTyxDQUFDLFlBQWEsVUFBVSxFQUMvQixPQUFRLENBQUMsRUFBRyxVQUFVLEVBQ3RCLFFBQVMsQ0FBQyxzQkFBd0Isb0JBQXFCLEVBQ3ZELFFBQVMsQ0FBQyxDQUFDLE9BQU8sVUFBVyxPQUFPLFNBQVMsQ0FDakQsRUFLTyxTQUFTQyxHQUFLOWUsRUFBUStlLEVBQU0sQ0FDL0IsTUFBTUMsRUFBVWhmLEVBQU8sS0FBSyxJQUN0QmlmLEVBQVNELEVBQVEsT0FFdkIsR0FEa0JDLEdBQVVBLEVBQU8sT0FBUyxFQUV4QyxNQUFNLElBQUksTUFBTSxpRUFBaUUsRUFFckYsTUFBTXJlLEVBQU00YyxHQUFVeGQsRUFBTyxLQUFLLElBQUssQ0FDbkMsSUFBSSxPQUFRLENBQ1IsTUFBTWtmLEVBQVcsQ0FBQSxFQUNqQixVQUFXbGQsS0FBTytjLEVBQU0sQ0FDcEIsR0FBSSxFQUFFL2MsS0FBT2dkLEVBQVEsT0FDakIsTUFBTSxJQUFJLE1BQU0sc0JBQXNCaGQsQ0FBRyxHQUFHLEVBRTNDK2MsRUFBSy9jLENBQUcsSUFFYmtkLEVBQVNsZCxDQUFHLEVBQUlnZCxFQUFRLE1BQU1oZCxDQUFHLEVBQ3JDLENBQ0EsT0FBQXFiLEdBQVcsS0FBTSxRQUFTNkIsQ0FBUSxFQUMzQkEsQ0FDWCxFQUNBLE9BQVEsQ0FBQSxDQUNoQixDQUFLLEVBQ0QsT0FBT1QsR0FBTXplLEVBQVFZLENBQUcsQ0FDNUIsQ0FDTyxTQUFTdWUsR0FBS25mLEVBQVErZSxFQUFNLENBQy9CLE1BQU1DLEVBQVVoZixFQUFPLEtBQUssSUFDdEJpZixFQUFTRCxFQUFRLE9BRXZCLEdBRGtCQyxHQUFVQSxFQUFPLE9BQVMsRUFFeEMsTUFBTSxJQUFJLE1BQU0saUVBQWlFLEVBRXJGLE1BQU1yZSxFQUFNNGMsR0FBVXhkLEVBQU8sS0FBSyxJQUFLLENBQ25DLElBQUksT0FBUSxDQUNSLE1BQU1rZixFQUFXLENBQUUsR0FBR2xmLEVBQU8sS0FBSyxJQUFJLEtBQUssRUFDM0MsVUFBV2dDLEtBQU8rYyxFQUFNLENBQ3BCLEdBQUksRUFBRS9jLEtBQU9nZCxFQUFRLE9BQ2pCLE1BQU0sSUFBSSxNQUFNLHNCQUFzQmhkLENBQUcsR0FBRyxFQUUzQytjLEVBQUsvYyxDQUFHLEdBRWIsT0FBT2tkLEVBQVNsZCxDQUFHLENBQ3ZCLENBQ0EsT0FBQXFiLEdBQVcsS0FBTSxRQUFTNkIsQ0FBUSxFQUMzQkEsQ0FDWCxFQUNBLE9BQVEsQ0FBQSxDQUNoQixDQUFLLEVBQ0QsT0FBT1QsR0FBTXplLEVBQVFZLENBQUcsQ0FDNUIsQ0FDTyxTQUFTNlUsR0FBT3pWLEVBQVErQixFQUFPLENBQ2xDLEdBQUksQ0FBQ21jLEdBQWNuYyxDQUFLLEVBQ3BCLE1BQU0sSUFBSSxNQUFNLGtEQUFrRCxFQUV0RSxNQUFNa2QsRUFBU2pmLEVBQU8sS0FBSyxJQUFJLE9BRS9CLEdBRGtCaWYsR0FBVUEsRUFBTyxPQUFTLEVBQzdCLENBR1gsTUFBTUcsRUFBZ0JwZixFQUFPLEtBQUssSUFBSSxNQUN0QyxVQUFXZ0MsS0FBT0QsRUFDZCxHQUFJLE9BQU8seUJBQXlCcWQsRUFBZXBkLENBQUcsSUFBTSxPQUN4RCxNQUFNLElBQUksTUFBTSw4RkFBOEYsQ0FHMUgsQ0FDQSxNQUFNcEIsRUFBTTRjLEdBQVV4ZCxFQUFPLEtBQUssSUFBSyxDQUNuQyxJQUFJLE9BQVEsQ0FDUixNQUFNcWYsRUFBUyxDQUFFLEdBQUdyZixFQUFPLEtBQUssSUFBSSxNQUFPLEdBQUcrQixDQUFLLEVBQ25ELE9BQUFzYixHQUFXLEtBQU0sUUFBU2dDLENBQU0sRUFDekJBLENBQ1gsQ0FDUixDQUFLLEVBQ0QsT0FBT1osR0FBTXplLEVBQVFZLENBQUcsQ0FDNUIsQ0FDTyxTQUFTMGUsR0FBV3RmLEVBQVErQixFQUFPLENBQ3RDLEdBQUksQ0FBQ21jLEdBQWNuYyxDQUFLLEVBQ3BCLE1BQU0sSUFBSSxNQUFNLHNEQUFzRCxFQUUxRSxNQUFNbkIsRUFBTTRjLEdBQVV4ZCxFQUFPLEtBQUssSUFBSyxDQUNuQyxJQUFJLE9BQVEsQ0FDUixNQUFNcWYsRUFBUyxDQUFFLEdBQUdyZixFQUFPLEtBQUssSUFBSSxNQUFPLEdBQUcrQixDQUFLLEVBQ25ELE9BQUFzYixHQUFXLEtBQU0sUUFBU2dDLENBQU0sRUFDekJBLENBQ1gsQ0FDUixDQUFLLEVBQ0QsT0FBT1osR0FBTXplLEVBQVFZLENBQUcsQ0FDNUIsQ0FDTyxTQUFTMmUsR0FBTWpkLEVBQUdDLEVBQUcsQ0FDeEIsTUFBTTNCLEVBQU00YyxHQUFVbGIsRUFBRSxLQUFLLElBQUssQ0FDOUIsSUFBSSxPQUFRLENBQ1IsTUFBTStjLEVBQVMsQ0FBRSxHQUFHL2MsRUFBRSxLQUFLLElBQUksTUFBTyxHQUFHQyxFQUFFLEtBQUssSUFBSSxLQUFLLEVBQ3pELE9BQUE4YSxHQUFXLEtBQU0sUUFBU2dDLENBQU0sRUFDekJBLENBQ1gsRUFDQSxJQUFJLFVBQVcsQ0FDWCxPQUFPOWMsRUFBRSxLQUFLLElBQUksUUFDdEIsRUFDQSxPQUFRLENBQUEsQ0FDaEIsQ0FBSyxFQUNELE9BQU9rYyxHQUFNbmMsRUFBRzFCLENBQUcsQ0FDdkIsQ0FDTyxTQUFTNGUsR0FBUUMsRUFBT3pmLEVBQVErZSxFQUFNLENBRXpDLE1BQU1FLEVBRFVqZixFQUFPLEtBQUssSUFDTCxPQUV2QixHQURrQmlmLEdBQVVBLEVBQU8sT0FBUyxFQUV4QyxNQUFNLElBQUksTUFBTSxvRUFBb0UsRUFFeEYsTUFBTXJlLEVBQU00YyxHQUFVeGQsRUFBTyxLQUFLLElBQUssQ0FDbkMsSUFBSSxPQUFRLENBQ1IsTUFBTTBmLEVBQVcxZixFQUFPLEtBQUssSUFBSSxNQUMzQitCLEVBQVEsQ0FBRSxHQUFHMmQsQ0FBUSxFQUMzQixHQUFJWCxFQUNBLFVBQVcvYyxLQUFPK2MsRUFBTSxDQUNwQixHQUFJLEVBQUUvYyxLQUFPMGQsR0FDVCxNQUFNLElBQUksTUFBTSxzQkFBc0IxZCxDQUFHLEdBQUcsRUFFM0MrYyxFQUFLL2MsQ0FBRyxJQUdiRCxFQUFNQyxDQUFHLEVBQUl5ZCxFQUNQLElBQUlBLEVBQU0sQ0FDUixLQUFNLFdBQ04sVUFBV0MsRUFBUzFkLENBQUcsQ0FDbkQsQ0FBeUIsRUFDQzBkLEVBQVMxZCxDQUFHLEVBQ3RCLEtBR0EsV0FBV0EsS0FBTzBkLEVBRWQzZCxFQUFNQyxDQUFHLEVBQUl5ZCxFQUNQLElBQUlBLEVBQU0sQ0FDUixLQUFNLFdBQ04sVUFBV0MsRUFBUzFkLENBQUcsQ0FDbkQsQ0FBeUIsRUFDQzBkLEVBQVMxZCxDQUFHLEVBRzFCLE9BQUFxYixHQUFXLEtBQU0sUUFBU3RiLENBQUssRUFDeEJBLENBQ1gsRUFDQSxPQUFRLENBQUEsQ0FDaEIsQ0FBSyxFQUNELE9BQU8wYyxHQUFNemUsRUFBUVksQ0FBRyxDQUM1QixDQUNPLFNBQVNnTixHQUFTNlIsRUFBT3pmLEVBQVErZSxFQUFNLENBQzFDLE1BQU1uZSxFQUFNNGMsR0FBVXhkLEVBQU8sS0FBSyxJQUFLLENBQ25DLElBQUksT0FBUSxDQUNSLE1BQU0wZixFQUFXMWYsRUFBTyxLQUFLLElBQUksTUFDM0IrQixFQUFRLENBQUUsR0FBRzJkLENBQVEsRUFDM0IsR0FBSVgsRUFDQSxVQUFXL2MsS0FBTytjLEVBQU0sQ0FDcEIsR0FBSSxFQUFFL2MsS0FBT0QsR0FDVCxNQUFNLElBQUksTUFBTSxzQkFBc0JDLENBQUcsR0FBRyxFQUUzQytjLEVBQUsvYyxDQUFHLElBR2JELEVBQU1DLENBQUcsRUFBSSxJQUFJeWQsRUFBTSxDQUNuQixLQUFNLGNBQ04sVUFBV0MsRUFBUzFkLENBQUcsQ0FDL0MsQ0FBcUIsRUFDTCxLQUdBLFdBQVdBLEtBQU8wZCxFQUVkM2QsRUFBTUMsQ0FBRyxFQUFJLElBQUl5ZCxFQUFNLENBQ25CLEtBQU0sY0FDTixVQUFXQyxFQUFTMWQsQ0FBRyxDQUMvQyxDQUFxQixFQUdULE9BQUFxYixHQUFXLEtBQU0sUUFBU3RiLENBQUssRUFDeEJBLENBQ1gsQ0FDUixDQUFLLEVBQ0QsT0FBTzBjLEdBQU16ZSxFQUFRWSxDQUFHLENBQzVCLENBRU8sU0FBUytlLEdBQVF2ZCxFQUFHd2QsRUFBYSxFQUFHLE9BQ3ZDLEdBQUl4ZCxFQUFFLFVBQVksR0FDZCxNQUFPLEdBQ1gsUUFBU0MsRUFBSXVkLEVBQVl2ZCxFQUFJRCxFQUFFLE9BQU8sT0FBUUMsSUFDMUMsS0FBSTFCLEVBQUF5QixFQUFFLE9BQU9DLENBQUMsSUFBVixZQUFBMUIsRUFBYSxZQUFhLEdBQzFCLE1BQU8sR0FHZixNQUFPLEVBQ1gsQ0FDTyxTQUFTa2YsR0FBYXZTLEVBQU13UyxFQUFRLENBQ3ZDLE9BQU9BLEVBQU8sSUFBS0MsR0FBUSxDQUN2QixJQUFJcGYsRUFDSixPQUFDQSxFQUFLb2YsR0FBSyxPQUFTcGYsRUFBRyxLQUFPLENBQUEsR0FDOUJvZixFQUFJLEtBQUssUUFBUXpTLENBQUksRUFDZHlTLENBQ1gsQ0FBQyxDQUNMLENBQ08sU0FBU0MsR0FBY25YLEVBQVMsQ0FDbkMsT0FBTyxPQUFPQSxHQUFZLFNBQVdBLEVBQVVBLEdBQUEsWUFBQUEsRUFBUyxPQUM1RCxDQUNPLFNBQVNvWCxHQUFjRixFQUFLN2EsRUFBS2lYLEVBQVEsaUJBQzVDLE1BQU0rRCxFQUFPLENBQUUsR0FBR0gsRUFBSyxLQUFNQSxFQUFJLE1BQVEsRUFBRSxFQUUzQyxHQUFJLENBQUNBLEVBQUksUUFBUyxDQUNkLE1BQU1sWCxFQUFVbVgsSUFBYzdkLEdBQUFsQixHQUFBTixFQUFBb2YsRUFBSSxPQUFKLFlBQUFwZixFQUFVLEtBQUssTUFBZixZQUFBTSxFQUFvQixRQUFwQixZQUFBa0IsRUFBQSxLQUFBbEIsRUFBNEI4ZSxFQUFJLEdBQzFEQyxJQUFjemIsRUFBQVcsR0FBQSxZQUFBQSxFQUFLLFFBQUwsWUFBQVgsRUFBQSxLQUFBVyxFQUFhNmEsRUFBSSxHQUMvQkMsSUFBY3hiLEVBQUEyWCxFQUFPLGNBQVAsWUFBQTNYLEVBQUEsS0FBQTJYLEVBQXFCNEQsRUFBSSxHQUN2Q0MsSUFBY3RiLEVBQUF5WCxFQUFPLGNBQVAsWUFBQXpYLEVBQUEsS0FBQXlYLEVBQXFCNEQsRUFBSSxHQUN2QyxnQkFDSkcsRUFBSyxRQUFVclgsQ0FDbkIsQ0FFQSxjQUFPcVgsRUFBSyxLQUNaLE9BQU9BLEVBQUssU0FDUGhiLEdBQUEsTUFBQUEsRUFBSyxhQUNOLE9BQU9nYixFQUFLLE1BRVRBLENBQ1gsQ0FXTyxTQUFTQyxHQUFvQnZiLEVBQU8sQ0FDdkMsT0FBSSxNQUFNLFFBQVFBLENBQUssRUFDWixRQUNQLE9BQU9BLEdBQVUsU0FDVixTQUNKLFNBQ1gsQ0FzQk8sU0FBU3diLE1BQVNwUixFQUFNLENBQzNCLEtBQU0sQ0FBQytRLEVBQUtuYixFQUFPZ1gsQ0FBSSxFQUFJNU0sRUFDM0IsT0FBSSxPQUFPK1EsR0FBUSxTQUNSLENBQ0gsUUFBU0EsRUFDVCxLQUFNLFNBQ04sTUFBQW5iLEVBQ0EsS0FBQWdYLENBQ1osRUFFVyxDQUFFLEdBQUdtRSxDQUFHLENBQ25CLENDcGxCQSxNQUFNcEcsR0FBYyxDQUFDaUMsRUFBTWhiLElBQVEsQ0FDL0JnYixFQUFLLEtBQU8sWUFDWixPQUFPLGVBQWVBLEVBQU0sT0FBUSxDQUNoQyxNQUFPQSxFQUFLLEtBQ1osV0FBWSxFQUNwQixDQUFLLEVBQ0QsT0FBTyxlQUFlQSxFQUFNLFNBQVUsQ0FDbEMsTUFBT2hiLEVBQ1AsV0FBWSxFQUNwQixDQUFLLEVBQ0RnYixFQUFLLFFBQVUsS0FBSyxVQUFVaGIsRUFBS3lmLEdBQTRCLENBQUMsRUFDaEUsT0FBTyxlQUFlekUsRUFBTSxXQUFZLENBQ3BDLE1BQU8sSUFBTUEsRUFBSyxRQUNsQixXQUFZLEVBQ3BCLENBQUssQ0FDTCxFQUNhMEUsR0FBWTVFLEVBQWEsWUFBYS9CLEVBQVcsRUFDakQ0RyxHQUFnQjdFLEVBQWEsWUFBYS9CLEdBQWEsQ0FBRSxPQUFRLE1BQU8sRUFDOUUsU0FBUzZHLEdBQWFoaEIsRUFBT2loQixFQUFVTCxHQUFVQSxFQUFNLFFBQVMsQ0FDbkUsTUFBTU0sRUFBYyxDQUFBLEVBQ2RDLEVBQWEsQ0FBQSxFQUNuQixVQUFXQyxLQUFPcGhCLEVBQU0sT0FDaEJvaEIsRUFBSSxLQUFLLE9BQVMsR0FDbEJGLEVBQVlFLEVBQUksS0FBSyxDQUFDLENBQUMsRUFBSUYsRUFBWUUsRUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFLLENBQUEsRUFDdkRGLEVBQVlFLEVBQUksS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLSCxFQUFPRyxDQUFHLENBQUMsR0FHekNELEVBQVcsS0FBS0YsRUFBT0csQ0FBRyxDQUFDLEVBR25DLE1BQU8sQ0FBRSxXQUFBRCxFQUFZLFlBQUFELENBQVcsQ0FDcEMsQ0FDTyxTQUFTRyxHQUFZcmhCLEVBQU9paEIsRUFBVUwsR0FBVUEsRUFBTSxRQUFTLENBQ2xFLE1BQU1NLEVBQWMsQ0FBRSxRQUFTLEVBQUUsRUFDM0JJLEVBQWdCdGhCLEdBQVUsQ0FDNUIsVUFBVzRnQixLQUFTNWdCLEVBQU0sT0FDdEIsR0FBSTRnQixFQUFNLE9BQVMsaUJBQW1CQSxFQUFNLE9BQU8sT0FDL0NBLEVBQU0sT0FBTyxJQUFLTixHQUFXZ0IsRUFBYSxDQUFFLE9BQUFoQixDQUFNLENBQUUsQ0FBQyxVQUVoRE0sRUFBTSxPQUFTLGNBQ3BCVSxFQUFhLENBQUUsT0FBUVYsRUFBTSxNQUFNLENBQUUsVUFFaENBLEVBQU0sT0FBUyxrQkFDcEJVLEVBQWEsQ0FBRSxPQUFRVixFQUFNLE1BQU0sQ0FBRSxVQUVoQ0EsRUFBTSxLQUFLLFNBQVcsRUFDM0JNLEVBQVksUUFBUSxLQUFLRCxFQUFPTCxDQUFLLENBQUMsTUFFckMsQ0FDRCxJQUFJN0ssRUFBT21MLEVBQ1ByZSxFQUFJLEVBQ1IsS0FBT0EsRUFBSStkLEVBQU0sS0FBSyxRQUFRLENBQzFCLE1BQU1XLEVBQUtYLEVBQU0sS0FBSy9kLENBQUMsRUFDTkEsSUFBTStkLEVBQU0sS0FBSyxPQUFTLEdBS3ZDN0ssRUFBS3dMLENBQUUsRUFBSXhMLEVBQUt3TCxDQUFFLEdBQUssQ0FBRSxRQUFTLEVBQUUsRUFDcEN4TCxFQUFLd0wsQ0FBRSxFQUFFLFFBQVEsS0FBS04sRUFBT0wsQ0FBSyxDQUFDLEdBSm5DN0ssRUFBS3dMLENBQUUsRUFBSXhMLEVBQUt3TCxDQUFFLEdBQUssQ0FBRSxRQUFTLEVBQUUsRUFNeEN4TCxFQUFPQSxFQUFLd0wsQ0FBRSxFQUNkMWUsR0FDSixDQUNKLENBRVIsRUFDQSxPQUFBeWUsRUFBYXRoQixDQUFLLEVBQ1hraEIsQ0FDWCxDQ3BFTyxNQUFNTSxHQUFVQyxHQUFTLENBQUNqaEIsRUFBUXlHLEVBQU94QixFQUFNdkUsSUFBWSxDQUM5RCxNQUFNd0UsRUFBTUQsRUFBTyxPQUFPLE9BQU9BLEVBQU0sQ0FBRSxNQUFPLEVBQUssQ0FBRSxFQUFJLENBQUUsTUFBTyxFQUFLLEVBQ25FbEUsRUFBU2YsRUFBTyxLQUFLLElBQUksQ0FBRSxNQUFBeUcsRUFBTyxPQUFRLEVBQUUsRUFBSXZCLENBQUcsRUFDekQsR0FBSW5FLGFBQWtCLFFBQ2xCLE1BQU0sSUFBSW1nQixHQUVkLEdBQUluZ0IsRUFBTyxPQUFPLE9BQVEsQ0FDdEIsTUFBTW9nQixFQUFJLEtBQUt6Z0IsR0FBQSxZQUFBQSxFQUFTLE1BQU91Z0IsR0FBTWxnQixFQUFPLE9BQU8sSUFBS2dmLEdBQVFxQixHQUFtQnJCLEVBQUs3YSxFQUFLbWMsR0FBVyxDQUFFLENBQUMsQ0FBQyxFQUM1R0MsTUFBQUEsR0FBdUJILEVBQUd6Z0IsR0FBQSxZQUFBQSxFQUFTLE1BQU0sRUFDbkN5Z0IsQ0FDVixDQUNBLE9BQU9wZ0IsRUFBTyxLQUNsQixFQUVhd2dCLEdBQWVOLEdBQVMsTUFBT2poQixFQUFReUcsRUFBT3hCLEVBQU14RSxJQUFXLENBQ3hFLE1BQU15RSxFQUFNRCxFQUFPLE9BQU8sT0FBT0EsRUFBTSxDQUFFLE1BQU8sRUFBSSxDQUFFLEVBQUksQ0FBRSxNQUFPLEVBQUksRUFDdkUsSUFBSWxFLEVBQVNmLEVBQU8sS0FBSyxJQUFJLENBQUUsTUFBQXlHLEVBQU8sT0FBUSxFQUFFLEVBQUl2QixDQUFHLEVBR3ZELEdBRkluRSxhQUFrQixVQUNsQkEsRUFBUyxNQUFNQSxHQUNmQSxFQUFPLE9BQU8sT0FBUSxDQUN0QixNQUFNb2dCLEVBQUksS0FBSzFnQixHQUFBLFlBQUFBLEVBQVEsTUFBT3dnQixHQUFNbGdCLEVBQU8sT0FBTyxJQUFLZ2YsR0FBUXFCLEdBQW1CckIsRUFBSzdhLEVBQUttYyxHQUFXLENBQUUsQ0FBQyxDQUFDLEVBQzNHQyxNQUFBQSxHQUF1QkgsRUFBRzFnQixHQUFBLFlBQUFBLEVBQVEsTUFBTSxFQUNsQzBnQixDQUNWLENBQ0EsT0FBT3BnQixFQUFPLEtBQ2xCLEVBRWF5Z0IsR0FBY1AsR0FBUyxDQUFDamhCLEVBQVF5RyxFQUFPeEIsSUFBUyxDQUN6RCxNQUFNQyxFQUFNRCxFQUFPLENBQUUsR0FBR0EsRUFBTSxNQUFPLEVBQUssRUFBSyxDQUFFLE1BQU8sRUFBSyxFQUN2RGxFLEVBQVNmLEVBQU8sS0FBSyxJQUFJLENBQUUsTUFBQXlHLEVBQU8sT0FBUSxFQUFFLEVBQUl2QixDQUFHLEVBQ3pELEdBQUluRSxhQUFrQixRQUNsQixNQUFNLElBQUltZ0IsR0FFZCxPQUFPbmdCLEVBQU8sT0FBTyxPQUNmLENBQ0UsUUFBUyxHQUNULE1BQU8sSUFBS2tnQixHQUFRUSxJQUFrQjFnQixFQUFPLE9BQU8sSUFBS2dmLEdBQVFxQixHQUFtQnJCLEVBQUs3YSxFQUFLbWMsR0FBVyxDQUFFLENBQUMsQ0FBQyxDQUN6SCxFQUNVLENBQUUsUUFBUyxHQUFNLEtBQU10Z0IsRUFBTyxLQUFLLENBQzdDLEVBQ2EyZ0IsR0FBMkJGLEdBQVdHLEVBQW9CLEVBQzFEQyxHQUFtQlgsR0FBUyxNQUFPamhCLEVBQVF5RyxFQUFPeEIsSUFBUyxDQUNwRSxNQUFNQyxFQUFNRCxFQUFPLE9BQU8sT0FBT0EsRUFBTSxDQUFFLE1BQU8sRUFBSSxDQUFFLEVBQUksQ0FBRSxNQUFPLEVBQUksRUFDdkUsSUFBSWxFLEVBQVNmLEVBQU8sS0FBSyxJQUFJLENBQUUsTUFBQXlHLEVBQU8sT0FBUSxFQUFFLEVBQUl2QixDQUFHLEVBQ3ZELE9BQUluRSxhQUFrQixVQUNsQkEsRUFBUyxNQUFNQSxHQUNaQSxFQUFPLE9BQU8sT0FDZixDQUNFLFFBQVMsR0FDVCxNQUFPLElBQUlrZ0IsRUFBS2xnQixFQUFPLE9BQU8sSUFBS2dmLEdBQVFxQixHQUFtQnJCLEVBQUs3YSxFQUFLbWMsR0FBVyxDQUFFLENBQUMsQ0FBQyxDQUNuRyxFQUNVLENBQUUsUUFBUyxHQUFNLEtBQU10Z0IsRUFBTyxLQUFLLENBQzdDLEVBQ2E4Z0IsR0FBZ0NELEdBQWdCRCxFQUFvQixFQUNwRUcsR0FBV2IsR0FBUyxDQUFDamhCLEVBQVF5RyxFQUFPeEIsSUFBUyxDQUN0RCxNQUFNQyxFQUFNRCxFQUFPLE9BQU8sT0FBT0EsRUFBTSxDQUFFLFVBQVcsVUFBVSxDQUFFLEVBQUksQ0FBRSxVQUFXLFVBQVUsRUFDM0YsT0FBTytiLEdBQU9DLENBQUksRUFBRWpoQixFQUFReUcsRUFBT3ZCLENBQUcsQ0FDMUMsRUFFYTZjLEdBQVdkLEdBQVMsQ0FBQ2poQixFQUFReUcsRUFBT3hCLElBQ3RDK2IsR0FBT0MsQ0FBSSxFQUFFamhCLEVBQVF5RyxFQUFPeEIsQ0FBSSxFQUc5QitjLEdBQWdCZixHQUFTLE1BQU9qaEIsRUFBUXlHLEVBQU94QixJQUFTLENBQ2pFLE1BQU1DLEVBQU1ELEVBQU8sT0FBTyxPQUFPQSxFQUFNLENBQUUsVUFBVyxVQUFVLENBQUUsRUFBSSxDQUFFLFVBQVcsVUFBVSxFQUMzRixPQUFPc2MsR0FBWU4sQ0FBSSxFQUFFamhCLEVBQVF5RyxFQUFPdkIsQ0FBRyxDQUMvQyxFQUVhK2MsR0FBZ0JoQixHQUFTLE1BQU9qaEIsRUFBUXlHLEVBQU94QixJQUNqRHNjLEdBQVlOLENBQUksRUFBRWpoQixFQUFReUcsRUFBT3hCLENBQUksRUFHbkNpZCxHQUFlakIsR0FBUyxDQUFDamhCLEVBQVF5RyxFQUFPeEIsSUFBUyxDQUMxRCxNQUFNQyxFQUFNRCxFQUFPLE9BQU8sT0FBT0EsRUFBTSxDQUFFLFVBQVcsVUFBVSxDQUFFLEVBQUksQ0FBRSxVQUFXLFVBQVUsRUFDM0YsT0FBT3VjLEdBQVdQLENBQUksRUFBRWpoQixFQUFReUcsRUFBT3ZCLENBQUcsQ0FDOUMsRUFFYWlkLEdBQWVsQixHQUFTLENBQUNqaEIsRUFBUXlHLEVBQU94QixJQUMxQ3VjLEdBQVdQLENBQUksRUFBRWpoQixFQUFReUcsRUFBT3hCLENBQUksRUFHbENtZCxHQUFvQm5CLEdBQVMsTUFBT2poQixFQUFReUcsRUFBT3hCLElBQVMsQ0FDckUsTUFBTUMsRUFBTUQsRUFBTyxPQUFPLE9BQU9BLEVBQU0sQ0FBRSxVQUFXLFVBQVUsQ0FBRSxFQUFJLENBQUUsVUFBVyxVQUFVLEVBQzNGLE9BQU8yYyxHQUFnQlgsQ0FBSSxFQUFFamhCLEVBQVF5RyxFQUFPdkIsQ0FBRyxDQUNuRCxFQUVhbWQsR0FBb0JwQixHQUFTLE1BQU9qaEIsRUFBUXlHLEVBQU94QixJQUNyRDJjLEdBQWdCWCxDQUFJLEVBQUVqaEIsRUFBUXlHLEVBQU94QixDQUFJLEVDekZ2Q3FkLEdBQU8sbUJBQ1BDLEdBQVEsY0FDUkMsR0FBTyx3Q0FDUEMsR0FBTSxvQkFDTkMsR0FBUSxvQkFDUkMsR0FBUyxzQkFFVEMsR0FBVyxnR0FJWEMsR0FBTyxrRkFJUEMsR0FBUUMsR0FDWkEsRUFFRSxJQUFJLE9BQU8sbUNBQW1DQSxDQUFPLHlEQUF5RCxFQUQxRyx5S0FPRkMsR0FBUSxtR0FVZkMsR0FBUyx1REFDUixTQUFTQyxJQUFRLENBQ3BCLE9BQU8sSUFBSSxPQUFPRCxHQUFRLEdBQUcsQ0FDakMsQ0FDTyxNQUFNRSxHQUFPLHNIQUNQQyxHQUFPLCtYQUtQQyxHQUFTLDJJQUNUQyxHQUFTLGlJQUVUQyxHQUFTLDhFQUNUQyxHQUFZLG1CQU9aQyxHQUFPLG9CQUVkQyxHQUFhLHNOQUNOQyxHQUFxQixJQUFJLE9BQU8sSUFBSUQsRUFBVSxHQUFHLEVBQzlELFNBQVNFLEdBQVc1VSxFQUFNLENBQ3RCLE1BQU02VSxFQUFPLDhCQVFiLE9BUGMsT0FBTzdVLEVBQUssV0FBYyxTQUNsQ0EsRUFBSyxZQUFjLEdBQ2YsR0FBRzZVLENBQUksR0FDUDdVLEVBQUssWUFBYyxFQUNmLEdBQUc2VSxDQUFJLFlBQ1AsR0FBR0EsQ0FBSSxtQkFBbUI3VSxFQUFLLFNBQVMsSUFDaEQsR0FBRzZVLENBQUksNEJBRWpCLENBQ08sU0FBU0MsR0FBSzlVLEVBQU0sQ0FDdkIsT0FBTyxJQUFJLE9BQU8sSUFBSTRVLEdBQVc1VSxDQUFJLENBQUMsR0FBRyxDQUM3QyxDQUVPLFNBQVMrVSxHQUFTL1UsRUFBTSxDQUMzQixNQUFNOFUsRUFBT0YsR0FBVyxDQUFFLFVBQVc1VSxFQUFLLFNBQVMsQ0FBRSxFQUMvQ2dWLEVBQU8sQ0FBQyxHQUFHLEVBQ2JoVixFQUFLLE9BQ0xnVixFQUFLLEtBQUssRUFBRSxFQUVaaFYsRUFBSyxRQUNMZ1YsRUFBSyxLQUFLLG1DQUFtQyxFQUNqRCxNQUFNQyxFQUFZLEdBQUdILENBQUksTUFBTUUsRUFBSyxLQUFLLEdBQUcsQ0FBQyxJQUM3QyxPQUFPLElBQUksT0FBTyxJQUFJTixFQUFVLE9BQU9PLENBQVMsSUFBSSxDQUN4RCxDQUNPLE1BQU1DLEdBQVV6akIsR0FBVyxDQUM5QixNQUFNa0IsRUFBUWxCLEVBQVMsYUFBWUEsR0FBQSxZQUFBQSxFQUFRLFVBQVcsQ0FBQyxLQUFJQSxHQUFBLFlBQUFBLEVBQVEsVUFBVyxFQUFFLElBQU0sWUFDdEYsT0FBTyxJQUFJLE9BQU8sSUFBSWtCLENBQUssR0FBRyxDQUNsQyxFQUVhd2lCLEdBQVUsVUFDVkMsR0FBUyxvQkFDVEMsR0FBVSxvQkFNVkMsR0FBWSxZQUVaQyxHQUFZLFlDakdaQyxHQUEwQkMsRUFBa0IsWUFBYSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDakYsSUFBSUQsRUFDSmliLEVBQUssT0FBU0EsRUFBSyxLQUFPLENBQUEsR0FDMUJBLEVBQUssS0FBSyxJQUFNaGIsR0FDZkQsRUFBS2liLEVBQUssTUFBTSxXQUFhamIsRUFBRyxTQUFXLEdBQ2hELENBQUMsRUFDSytqQixHQUFtQixDQUNyQixPQUFRLFNBQ1IsT0FBUSxTQUNSLE9BQVEsTUFDWixFQUNhQyxHQUFrQ0YsRUFBa0Isb0JBQXFCLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNqRzRqQixHQUFVLEtBQUs1SSxFQUFNaGIsQ0FBRyxFQUN4QixNQUFNZ2tCLEVBQVNGLEdBQWlCLE9BQU85akIsRUFBSSxLQUFLLEVBQ2hEZ2IsRUFBSyxLQUFLLFNBQVMsS0FBTUEsR0FBUyxDQUM5QixNQUFNaUosRUFBTWpKLEVBQUssS0FBSyxJQUNoQnJHLEdBQVEzVSxFQUFJLFVBQVlpa0IsRUFBSSxRQUFVQSxFQUFJLG1CQUFxQixPQUFPLGtCQUN4RWprQixFQUFJLE1BQVEyVSxJQUNSM1UsRUFBSSxVQUNKaWtCLEVBQUksUUFBVWprQixFQUFJLE1BRWxCaWtCLEVBQUksaUJBQW1CamtCLEVBQUksTUFFdkMsQ0FBQyxFQUNEZ2IsRUFBSyxLQUFLLE1BQVNrSixHQUFZLEVBQ3ZCbGtCLEVBQUksVUFBWWtrQixFQUFRLE9BQVNsa0IsRUFBSSxNQUFRa2tCLEVBQVEsTUFBUWxrQixFQUFJLFFBR3JFa2tCLEVBQVEsT0FBTyxLQUFLLENBQ2hCLE9BQUFGLEVBQ0EsS0FBTSxVQUNOLFFBQVMsT0FBT2hrQixFQUFJLE9BQVUsU0FBV0EsRUFBSSxNQUFNLFVBQVlBLEVBQUksTUFDbkUsTUFBT2trQixFQUFRLE1BQ2YsVUFBV2xrQixFQUFJLFVBQ2YsS0FBQWdiLEVBQ0EsU0FBVSxDQUFDaGIsRUFBSSxLQUMzQixDQUFTLENBQ0wsQ0FDSixDQUFDLEVBQ1lta0IsR0FBcUNOLEVBQWtCLHVCQUF3QixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDdkc0akIsR0FBVSxLQUFLNUksRUFBTWhiLENBQUcsRUFDeEIsTUFBTWdrQixFQUFTRixHQUFpQixPQUFPOWpCLEVBQUksS0FBSyxFQUNoRGdiLEVBQUssS0FBSyxTQUFTLEtBQU1BLEdBQVMsQ0FDOUIsTUFBTWlKLEVBQU1qSixFQUFLLEtBQUssSUFDaEJyRyxHQUFRM1UsRUFBSSxVQUFZaWtCLEVBQUksUUFBVUEsRUFBSSxtQkFBcUIsT0FBTyxrQkFDeEVqa0IsRUFBSSxNQUFRMlUsSUFDUjNVLEVBQUksVUFDSmlrQixFQUFJLFFBQVVqa0IsRUFBSSxNQUVsQmlrQixFQUFJLGlCQUFtQmprQixFQUFJLE1BRXZDLENBQUMsRUFDRGdiLEVBQUssS0FBSyxNQUFTa0osR0FBWSxFQUN2QmxrQixFQUFJLFVBQVlra0IsRUFBUSxPQUFTbGtCLEVBQUksTUFBUWtrQixFQUFRLE1BQVFsa0IsRUFBSSxRQUdyRWtrQixFQUFRLE9BQU8sS0FBSyxDQUNoQixPQUFBRixFQUNBLEtBQU0sWUFDTixRQUFTLE9BQU9oa0IsRUFBSSxPQUFVLFNBQVdBLEVBQUksTUFBTSxVQUFZQSxFQUFJLE1BQ25FLE1BQU9ra0IsRUFBUSxNQUNmLFVBQVdsa0IsRUFBSSxVQUNmLEtBQUFnYixFQUNBLFNBQVUsQ0FBQ2hiLEVBQUksS0FDM0IsQ0FBUyxDQUNMLENBQ0osQ0FBQyxFQUNZb2tCLEdBQ0NQLEVBQWtCLHNCQUF1QixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDbEU0akIsR0FBVSxLQUFLNUksRUFBTWhiLENBQUcsRUFDeEJnYixFQUFLLEtBQUssU0FBUyxLQUFNQSxHQUFTLENBQzlCLElBQUlqYixHQUNIQSxFQUFLaWIsRUFBSyxLQUFLLEtBQUssYUFBZWpiLEVBQUcsV0FBYUMsRUFBSSxNQUM1RCxDQUFDLEVBQ0RnYixFQUFLLEtBQUssTUFBU2tKLEdBQVksQ0FDM0IsR0FBSSxPQUFPQSxFQUFRLE9BQVUsT0FBT2xrQixFQUFJLE1BQ3BDLE1BQU0sSUFBSSxNQUFNLG9EQUFvRCxHQUNyRCxPQUFPa2tCLEVBQVEsT0FBVSxTQUN0Q0EsRUFBUSxNQUFRbGtCLEVBQUksUUFBVSxPQUFPLENBQUMsRUFDdENxa0IsR0FBd0JILEVBQVEsTUFBT2xrQixFQUFJLEtBQUssSUFBTSxJQUc1RGtrQixFQUFRLE9BQU8sS0FBSyxDQUNoQixPQUFRLE9BQU9BLEVBQVEsTUFDdkIsS0FBTSxrQkFDTixRQUFTbGtCLEVBQUksTUFDYixNQUFPa2tCLEVBQVEsTUFDZixLQUFBbEosRUFDQSxTQUFVLENBQUNoYixFQUFJLEtBQzNCLENBQVMsQ0FDTCxDQUNKLENBQUMsRUFDWXNrQixHQUFzQ1QsRUFBa0Isd0JBQXlCLENBQUM3SSxFQUFNaGIsSUFBUSxPQUN6RzRqQixHQUFVLEtBQUs1SSxFQUFNaGIsQ0FBRyxFQUN4QkEsRUFBSSxPQUFTQSxFQUFJLFFBQVUsVUFDM0IsTUFBTXVrQixHQUFReGtCLEVBQUFDLEVBQUksU0FBSixZQUFBRCxFQUFZLFNBQVMsT0FDN0Jpa0IsRUFBU08sRUFBUSxNQUFRLFNBQ3pCLENBQUM5akIsRUFBU0MsQ0FBTyxFQUFJOGpCLEdBQTBCeGtCLEVBQUksTUFBTSxFQUMvRGdiLEVBQUssS0FBSyxTQUFTLEtBQU1BLEdBQVMsQ0FDOUIsTUFBTWlKLEVBQU1qSixFQUFLLEtBQUssSUFDdEJpSixFQUFJLE9BQVNqa0IsRUFBSSxPQUNqQmlrQixFQUFJLFFBQVV4akIsRUFDZHdqQixFQUFJLFFBQVV2akIsRUFDVjZqQixJQUNBTixFQUFJLFFBQVVRLEdBQ3RCLENBQUMsRUFDRHpKLEVBQUssS0FBSyxNQUFTa0osR0FBWSxDQUMzQixNQUFNbGdCLEVBQVFrZ0IsRUFBUSxNQUN0QixHQUFJSyxFQUFPLENBQ1AsR0FBSSxDQUFDLE9BQU8sVUFBVXZnQixDQUFLLEVBQUcsQ0FVMUJrZ0IsRUFBUSxPQUFPLEtBQUssQ0FDaEIsU0FBVUYsRUFDVixPQUFRaGtCLEVBQUksT0FDWixLQUFNLGVBQ04sU0FBVSxHQUNWLE1BQUFnRSxFQUNBLEtBQUFnWCxDQUNwQixDQUFpQixFQUNELE1BU0osQ0FDQSxHQUFJLENBQUMsT0FBTyxjQUFjaFgsQ0FBSyxFQUFHLENBQzFCQSxFQUFRLEVBRVJrZ0IsRUFBUSxPQUFPLEtBQUssQ0FDaEIsTUFBQWxnQixFQUNBLEtBQU0sVUFDTixRQUFTLE9BQU8saUJBQ2hCLEtBQU0sa0RBQ04sS0FBQWdYLEVBQ0EsT0FBQWdKLEVBQ0EsVUFBVyxHQUNYLFNBQVUsQ0FBQ2hrQixFQUFJLEtBQ3ZDLENBQXFCLEVBSURra0IsRUFBUSxPQUFPLEtBQUssQ0FDaEIsTUFBQWxnQixFQUNBLEtBQU0sWUFDTixRQUFTLE9BQU8saUJBQ2hCLEtBQU0sa0RBQ04sS0FBQWdYLEVBQ0EsT0FBQWdKLEVBQ0EsVUFBVyxHQUNYLFNBQVUsQ0FBQ2hrQixFQUFJLEtBQ3ZDLENBQXFCLEVBRUwsTUFDSixDQUNKLENBQ0lnRSxFQUFRdkQsR0FDUnlqQixFQUFRLE9BQU8sS0FBSyxDQUNoQixPQUFRLFNBQ1IsTUFBQWxnQixFQUNBLEtBQU0sWUFDTixRQUFBdkQsRUFDQSxVQUFXLEdBQ1gsS0FBQXVhLEVBQ0EsU0FBVSxDQUFDaGIsRUFBSSxLQUMvQixDQUFhLEVBRURnRSxFQUFRdEQsR0FDUndqQixFQUFRLE9BQU8sS0FBSyxDQUNoQixPQUFRLFNBQ1IsTUFBQWxnQixFQUNBLEtBQU0sVUFDTixRQUFBdEQsRUFDQSxVQUFXLEdBQ1gsS0FBQXNhLEVBQ0EsU0FBVSxDQUFDaGIsRUFBSSxLQUMvQixDQUFhLENBRVQsQ0FDSixDQUFDLEVBMEhZMGtCLEdBQW1DYixFQUFrQixxQkFBc0IsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ25HLElBQUlELEVBQ0o2akIsR0FBVSxLQUFLNUksRUFBTWhiLENBQUcsR0FDdkJELEVBQUtpYixFQUFLLEtBQUssS0FBSyxPQUFTamIsRUFBRyxLQUFRbWtCLEdBQVksQ0FDakQsTUFBTXJpQixFQUFNcWlCLEVBQVEsTUFDcEIsTUFBTyxDQUFDUyxHQUFhOWlCLENBQUcsR0FBS0EsRUFBSSxTQUFXLE1BQ2hELEdBQ0FtWixFQUFLLEtBQUssU0FBUyxLQUFNQSxHQUFTLENBQzlCLE1BQU1yRyxFQUFRcUcsRUFBSyxLQUFLLElBQUksU0FBVyxPQUFPLGtCQUMxQ2hiLEVBQUksUUFBVTJVLElBQ2RxRyxFQUFLLEtBQUssSUFBSSxRQUFVaGIsRUFBSSxRQUNwQyxDQUFDLEVBQ0RnYixFQUFLLEtBQUssTUFBU2tKLEdBQVksQ0FDM0IsTUFBTWxnQixFQUFRa2dCLEVBQVEsTUFFdEIsR0FEZWxnQixFQUFNLFFBQ1BoRSxFQUFJLFFBQ2QsT0FDSixNQUFNZ2tCLEVBQVNZLEdBQXlCNWdCLENBQUssRUFDN0NrZ0IsRUFBUSxPQUFPLEtBQUssQ0FDaEIsT0FBQUYsRUFDQSxLQUFNLFVBQ04sUUFBU2hrQixFQUFJLFFBQ2IsVUFBVyxHQUNYLE1BQUFnRSxFQUNBLEtBQUFnWCxFQUNBLFNBQVUsQ0FBQ2hiLEVBQUksS0FDM0IsQ0FBUyxDQUNMLENBQ0osQ0FBQyxFQUNZNmtCLEdBQW1DaEIsRUFBa0IscUJBQXNCLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNuRyxJQUFJRCxFQUNKNmpCLEdBQVUsS0FBSzVJLEVBQU1oYixDQUFHLEdBQ3ZCRCxFQUFLaWIsRUFBSyxLQUFLLEtBQUssT0FBU2piLEVBQUcsS0FBUW1rQixHQUFZLENBQ2pELE1BQU1yaUIsRUFBTXFpQixFQUFRLE1BQ3BCLE1BQU8sQ0FBQ1MsR0FBYTlpQixDQUFHLEdBQUtBLEVBQUksU0FBVyxNQUNoRCxHQUNBbVosRUFBSyxLQUFLLFNBQVMsS0FBTUEsR0FBUyxDQUM5QixNQUFNckcsRUFBUXFHLEVBQUssS0FBSyxJQUFJLFNBQVcsT0FBTyxrQkFDMUNoYixFQUFJLFFBQVUyVSxJQUNkcUcsRUFBSyxLQUFLLElBQUksUUFBVWhiLEVBQUksUUFDcEMsQ0FBQyxFQUNEZ2IsRUFBSyxLQUFLLE1BQVNrSixHQUFZLENBQzNCLE1BQU1sZ0IsRUFBUWtnQixFQUFRLE1BRXRCLEdBRGVsZ0IsRUFBTSxRQUNQaEUsRUFBSSxRQUNkLE9BQ0osTUFBTWdrQixFQUFTWSxHQUF5QjVnQixDQUFLLEVBQzdDa2dCLEVBQVEsT0FBTyxLQUFLLENBQ2hCLE9BQUFGLEVBQ0EsS0FBTSxZQUNOLFFBQVNoa0IsRUFBSSxRQUNiLFVBQVcsR0FDWCxNQUFBZ0UsRUFDQSxLQUFBZ1gsRUFDQSxTQUFVLENBQUNoYixFQUFJLEtBQzNCLENBQVMsQ0FDTCxDQUNKLENBQUMsRUFDWThrQixHQUFzQ2pCLEVBQWtCLHdCQUF5QixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDekcsSUFBSUQsRUFDSjZqQixHQUFVLEtBQUs1SSxFQUFNaGIsQ0FBRyxHQUN2QkQsRUFBS2liLEVBQUssS0FBSyxLQUFLLE9BQVNqYixFQUFHLEtBQVFta0IsR0FBWSxDQUNqRCxNQUFNcmlCLEVBQU1xaUIsRUFBUSxNQUNwQixNQUFPLENBQUNTLEdBQWE5aUIsQ0FBRyxHQUFLQSxFQUFJLFNBQVcsTUFDaEQsR0FDQW1aLEVBQUssS0FBSyxTQUFTLEtBQU1BLEdBQVMsQ0FDOUIsTUFBTWlKLEVBQU1qSixFQUFLLEtBQUssSUFDdEJpSixFQUFJLFFBQVVqa0IsRUFBSSxPQUNsQmlrQixFQUFJLFFBQVVqa0IsRUFBSSxPQUNsQmlrQixFQUFJLE9BQVNqa0IsRUFBSSxNQUNyQixDQUFDLEVBQ0RnYixFQUFLLEtBQUssTUFBU2tKLEdBQVksQ0FDM0IsTUFBTWxnQixFQUFRa2dCLEVBQVEsTUFDaEJhLEVBQVMvZ0IsRUFBTSxPQUNyQixHQUFJK2dCLElBQVcva0IsRUFBSSxPQUNmLE9BQ0osTUFBTWdrQixFQUFTWSxHQUF5QjVnQixDQUFLLEVBQ3ZDZ2hCLEVBQVNELEVBQVMva0IsRUFBSSxPQUM1QmtrQixFQUFRLE9BQU8sS0FBSyxDQUNoQixPQUFBRixFQUNBLEdBQUlnQixFQUFTLENBQUUsS0FBTSxVQUFXLFFBQVNobEIsRUFBSSxRQUFXLENBQUUsS0FBTSxZQUFhLFFBQVNBLEVBQUksTUFBTSxFQUNoRyxVQUFXLEdBQ1gsTUFBTyxHQUNQLE1BQU9ra0IsRUFBUSxNQUNmLEtBQUFsSixFQUNBLFNBQVUsQ0FBQ2hiLEVBQUksS0FDM0IsQ0FBUyxDQUNMLENBQ0osQ0FBQyxFQUNZaWxCLEdBQXNDcEIsRUFBa0Isd0JBQXlCLENBQUM3SSxFQUFNaGIsSUFBUSxDQUN6RyxJQUFJRCxFQUFJTSxFQUNSdWpCLEdBQVUsS0FBSzVJLEVBQU1oYixDQUFHLEVBQ3hCZ2IsRUFBSyxLQUFLLFNBQVMsS0FBTUEsR0FBUyxDQUM5QixNQUFNaUosRUFBTWpKLEVBQUssS0FBSyxJQUN0QmlKLEVBQUksT0FBU2prQixFQUFJLE9BQ2JBLEVBQUksVUFDSmlrQixFQUFJLFdBQWFBLEVBQUksU0FBVyxJQUFJLEtBQ3BDQSxFQUFJLFNBQVMsSUFBSWprQixFQUFJLE9BQU8sRUFFcEMsQ0FBQyxFQUNHQSxFQUFJLFNBQ0hELEVBQUtpYixFQUFLLE1BQU0sUUFBVWpiLEVBQUcsTUFBU21rQixHQUFZLENBQy9DbGtCLEVBQUksUUFBUSxVQUFZLEVBQ3BCLENBQUFBLEVBQUksUUFBUSxLQUFLa2tCLEVBQVEsS0FBSyxHQUVsQ0EsRUFBUSxPQUFPLEtBQUssQ0FDaEIsT0FBUSxTQUNSLEtBQU0saUJBQ04sT0FBUWxrQixFQUFJLE9BQ1osTUFBT2trQixFQUFRLE1BQ2YsR0FBSWxrQixFQUFJLFFBQVUsQ0FBRSxRQUFTQSxFQUFJLFFBQVEsVUFBVSxFQUFLLEdBQ3hELEtBQUFnYixFQUNBLFNBQVUsQ0FBQ2hiLEVBQUksS0FDL0IsQ0FBYSxDQUNMLElBRUNLLEVBQUsyYSxFQUFLLE1BQU0sUUFBVTNhLEVBQUcsTUFBUSxJQUFNLENBQUUsRUFDdEQsQ0FBQyxFQUNZNmtCLEdBQStCckIsRUFBa0IsaUJBQWtCLENBQUM3SSxFQUFNaGIsSUFBUSxDQUMzRmlsQixHQUFzQixLQUFLakssRUFBTWhiLENBQUcsRUFDcENnYixFQUFLLEtBQUssTUFBU2tKLEdBQVksQ0FDM0Jsa0IsRUFBSSxRQUFRLFVBQVksRUFDcEIsQ0FBQUEsRUFBSSxRQUFRLEtBQUtra0IsRUFBUSxLQUFLLEdBRWxDQSxFQUFRLE9BQU8sS0FBSyxDQUNoQixPQUFRLFNBQ1IsS0FBTSxpQkFDTixPQUFRLFFBQ1IsTUFBT0EsRUFBUSxNQUNmLFFBQVNsa0IsRUFBSSxRQUFRLFNBQVEsRUFDN0IsS0FBQWdiLEVBQ0EsU0FBVSxDQUFDaGIsRUFBSSxLQUMzQixDQUFTLENBQ0wsQ0FDSixDQUFDLEVBQ1ltbEIsR0FBbUN0QixFQUFrQixxQkFBc0IsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ25HQSxFQUFJLFVBQVlBLEVBQUksUUFBVW9sQixJQUM5QkgsR0FBc0IsS0FBS2pLLEVBQU1oYixDQUFHLENBQ3hDLENBQUMsRUFDWXFsQixHQUFtQ3hCLEVBQWtCLHFCQUFzQixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDbkdBLEVBQUksVUFBWUEsRUFBSSxRQUFVc2xCLElBQzlCTCxHQUFzQixLQUFLakssRUFBTWhiLENBQUcsQ0FDeEMsQ0FBQyxFQUNZdWxCLEdBQWtDMUIsRUFBa0Isb0JBQXFCLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNqRzRqQixHQUFVLEtBQUs1SSxFQUFNaGIsQ0FBRyxFQUN4QixNQUFNd2xCLEVBQWVDLEdBQWlCemxCLEVBQUksUUFBUSxFQUM1Q3dDLEVBQVUsSUFBSSxPQUFPLE9BQU94QyxFQUFJLFVBQWEsU0FBVyxNQUFNQSxFQUFJLFFBQVEsSUFBSXdsQixDQUFZLEdBQUtBLENBQVksRUFDakh4bEIsRUFBSSxRQUFVd0MsRUFDZHdZLEVBQUssS0FBSyxTQUFTLEtBQU1BLEdBQVMsQ0FDOUIsTUFBTWlKLEVBQU1qSixFQUFLLEtBQUssSUFDdEJpSixFQUFJLFdBQWFBLEVBQUksU0FBVyxJQUFJLEtBQ3BDQSxFQUFJLFNBQVMsSUFBSXpoQixDQUFPLENBQzVCLENBQUMsRUFDRHdZLEVBQUssS0FBSyxNQUFTa0osR0FBWSxDQUN2QkEsRUFBUSxNQUFNLFNBQVNsa0IsRUFBSSxTQUFVQSxFQUFJLFFBQVEsR0FFckRra0IsRUFBUSxPQUFPLEtBQUssQ0FDaEIsT0FBUSxTQUNSLEtBQU0saUJBQ04sT0FBUSxXQUNSLFNBQVVsa0IsRUFBSSxTQUNkLE1BQU9ra0IsRUFBUSxNQUNmLEtBQUFsSixFQUNBLFNBQVUsQ0FBQ2hiLEVBQUksS0FDM0IsQ0FBUyxDQUNMLENBQ0osQ0FBQyxFQUNZMGxCLEdBQW9DN0IsRUFBa0Isc0JBQXVCLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNyRzRqQixHQUFVLEtBQUs1SSxFQUFNaGIsQ0FBRyxFQUN4QixNQUFNd0MsRUFBVSxJQUFJLE9BQU8sSUFBSWlqQixHQUFpQnpsQixFQUFJLE1BQU0sQ0FBQyxJQUFJLEVBQy9EQSxFQUFJLFVBQVlBLEVBQUksUUFBVXdDLEdBQzlCd1ksRUFBSyxLQUFLLFNBQVMsS0FBTUEsR0FBUyxDQUM5QixNQUFNaUosRUFBTWpKLEVBQUssS0FBSyxJQUN0QmlKLEVBQUksV0FBYUEsRUFBSSxTQUFXLElBQUksS0FDcENBLEVBQUksU0FBUyxJQUFJemhCLENBQU8sQ0FDNUIsQ0FBQyxFQUNEd1ksRUFBSyxLQUFLLE1BQVNrSixHQUFZLENBQ3ZCQSxFQUFRLE1BQU0sV0FBV2xrQixFQUFJLE1BQU0sR0FFdkNra0IsRUFBUSxPQUFPLEtBQUssQ0FDaEIsT0FBUSxTQUNSLEtBQU0saUJBQ04sT0FBUSxjQUNSLE9BQVFsa0IsRUFBSSxPQUNaLE1BQU9ra0IsRUFBUSxNQUNmLEtBQUFsSixFQUNBLFNBQVUsQ0FBQ2hiLEVBQUksS0FDM0IsQ0FBUyxDQUNMLENBQ0osQ0FBQyxFQUNZMmxCLEdBQWtDOUIsRUFBa0Isb0JBQXFCLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNqRzRqQixHQUFVLEtBQUs1SSxFQUFNaGIsQ0FBRyxFQUN4QixNQUFNd0MsRUFBVSxJQUFJLE9BQU8sS0FBS2lqQixHQUFpQnpsQixFQUFJLE1BQU0sQ0FBQyxHQUFHLEVBQy9EQSxFQUFJLFVBQVlBLEVBQUksUUFBVXdDLEdBQzlCd1ksRUFBSyxLQUFLLFNBQVMsS0FBTUEsR0FBUyxDQUM5QixNQUFNaUosRUFBTWpKLEVBQUssS0FBSyxJQUN0QmlKLEVBQUksV0FBYUEsRUFBSSxTQUFXLElBQUksS0FDcENBLEVBQUksU0FBUyxJQUFJemhCLENBQU8sQ0FDNUIsQ0FBQyxFQUNEd1ksRUFBSyxLQUFLLE1BQVNrSixHQUFZLENBQ3ZCQSxFQUFRLE1BQU0sU0FBU2xrQixFQUFJLE1BQU0sR0FFckNra0IsRUFBUSxPQUFPLEtBQUssQ0FDaEIsT0FBUSxTQUNSLEtBQU0saUJBQ04sT0FBUSxZQUNSLE9BQVFsa0IsRUFBSSxPQUNaLE1BQU9ra0IsRUFBUSxNQUNmLEtBQUFsSixFQUNBLFNBQVUsQ0FBQ2hiLEVBQUksS0FDM0IsQ0FBUyxDQUNMLENBQ0osQ0FBQyxFQXlDWTRsQixHQUFtQy9CLEVBQWtCLHFCQUFzQixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDbkc0akIsR0FBVSxLQUFLNUksRUFBTWhiLENBQUcsRUFDeEJnYixFQUFLLEtBQUssTUFBU2tKLEdBQVksQ0FDM0JBLEVBQVEsTUFBUWxrQixFQUFJLEdBQUdra0IsRUFBUSxLQUFLLENBQ3hDLENBQ0osQ0FBQyxFQzlqQk0sTUFBTTJCLEVBQUksQ0FDYixZQUFZelgsRUFBTyxHQUFJLENBQ25CLEtBQUssUUFBVSxDQUFBLEVBQ2YsS0FBSyxPQUFTLEVBQ1YsT0FDQSxLQUFLLEtBQU9BLEVBQ3BCLENBQ0EsU0FBU3pQLEVBQUksQ0FDVCxLQUFLLFFBQVUsRUFDZkEsRUFBRyxJQUFJLEVBQ1AsS0FBSyxRQUFVLENBQ25CLENBQ0EsTUFBTW1uQixFQUFLLENBQ1AsR0FBSSxPQUFPQSxHQUFRLFdBQVksQ0FDM0JBLEVBQUksS0FBTSxDQUFFLFVBQVcsTUFBTSxDQUFFLEVBQy9CQSxFQUFJLEtBQU0sQ0FBRSxVQUFXLE9BQU8sQ0FBRSxFQUNoQyxNQUNKLENBRUEsTUFBTUMsRUFEVUQsRUFDTSxNQUFNO0FBQUEsQ0FBSSxFQUFFLE9BQVF0a0IsR0FBTUEsQ0FBQyxFQUMzQ3drQixFQUFZLEtBQUssSUFBSSxHQUFHRCxFQUFNLElBQUt2a0IsR0FBTUEsRUFBRSxPQUFTQSxFQUFFLFVBQVMsRUFBRyxNQUFNLENBQUMsRUFDekV5a0IsRUFBV0YsRUFBTSxJQUFLdmtCLEdBQU1BLEVBQUUsTUFBTXdrQixDQUFTLENBQUMsRUFBRSxJQUFLeGtCLEdBQU0sSUFBSSxPQUFPLEtBQUssT0FBUyxDQUFDLEVBQUlBLENBQUMsRUFDaEcsVUFBVzBrQixLQUFRRCxFQUNmLEtBQUssUUFBUSxLQUFLQyxDQUFJLENBRTlCLENBQ0EsU0FBVSxDQUNOLE1BQU03SSxFQUFJLFNBQ0pqUCxFQUFPLHVCQUFNLEtBRWIyWCxFQUFRLENBQUMsS0FEQyx1QkFBTSxVQUFXLENBQUMsRUFBRSxHQUNWLElBQUt2a0IsR0FBTSxLQUFLQSxDQUFDLEVBQUUsQ0FBQyxFQUU5QyxPQUFPLElBQUk2YixFQUFFLEdBQUdqUCxFQUFNMlgsRUFBTSxLQUFLO0FBQUEsQ0FBSSxDQUFDLENBQzFDLENBQ0osQ0NsQ08sTUFBTTVELEdBQVUsQ0FDbkIsTUFBTyxFQUNQLE1BQU8sRUFDUCxNQUFPLENBQ1gsRUNHYWdFLEdBQXlCdEMsRUFBa0IsV0FBWSxDQUFDN0ksRUFBTWhiLElBQVEsT0FDL0UsSUFBSUQsRUFDSmliLElBQVNBLEVBQU8sSUFDaEJBLEVBQUssS0FBSyxJQUFNaGIsRUFDaEJnYixFQUFLLEtBQUssSUFBTUEsRUFBSyxLQUFLLEtBQU8sR0FDakNBLEVBQUssS0FBSyxRQUFVbUgsR0FDcEIsTUFBTTlELEVBQVMsQ0FBQyxHQUFJckQsRUFBSyxLQUFLLElBQUksUUFBVSxDQUFBLENBQUcsRUFFM0NBLEVBQUssS0FBSyxPQUFPLElBQUksV0FBVyxHQUNoQ3FELEVBQU8sUUFBUXJELENBQUksRUFFdkIsVUFBV29MLEtBQU0vSCxFQUNiLFVBQVcxZixLQUFNeW5CLEVBQUcsS0FBSyxTQUNyQnpuQixFQUFHcWMsQ0FBSSxFQUdmLEdBQUlxRCxFQUFPLFNBQVcsR0FHakJ0ZSxFQUFLaWIsRUFBSyxNQUFNLFdBQWFqYixFQUFHLFNBQVcsS0FDNUNBLEVBQUFpYixFQUFLLEtBQUssV0FBVixNQUFBamIsRUFBb0IsS0FBSyxJQUFNLENBQzNCaWIsRUFBSyxLQUFLLElBQU1BLEVBQUssS0FBSyxLQUM5QixPQUVDLENBQ0QsTUFBTXFMLEVBQVksQ0FBQ25DLEVBQVM3RixFQUFRL1osSUFBUSxDQUN4QyxJQUFJZ2lCLEVBQVlDLEdBQWFyQyxDQUFPLEVBQ2hDc0MsRUFDSixVQUFXSixLQUFNL0gsRUFBUSxDQUNyQixHQUFJK0gsRUFBRyxLQUFLLElBQUksTUFFWixHQUFJLENBRGNBLEVBQUcsS0FBSyxJQUFJLEtBQUtsQyxDQUFPLEVBRXRDLGlCQUVDb0MsRUFDTCxTQUVKLE1BQU1HLEVBQVV2QyxFQUFRLE9BQU8sT0FDekJobEIsRUFBSWtuQixFQUFHLEtBQUssTUFBTWxDLENBQU8sRUFDL0IsR0FBSWhsQixhQUFhLFVBQVdvRixHQUFBLFlBQUFBLEVBQUssU0FBVSxHQUN2QyxNQUFNLElBQUlnYyxHQUVkLEdBQUlrRyxHQUFldG5CLGFBQWEsUUFDNUJzbkIsR0FBZUEsR0FBZSxRQUFRLFFBQU8sR0FBSSxLQUFLLFNBQVksQ0FDOUQsTUFBTXRuQixFQUNVZ2xCLEVBQVEsT0FBTyxTQUNmdUMsSUFFWEgsSUFDREEsRUFBWUMsR0FBYXJDLEVBQVN1QyxDQUFPLEdBQ2pELENBQUMsTUFFQSxDQUVELEdBRGdCdkMsRUFBUSxPQUFPLFNBQ2Z1QyxFQUNaLFNBQ0NILElBQ0RBLEVBQVlDLEdBQWFyQyxFQUFTdUMsQ0FBTyxFQUNqRCxDQUNKLENBQ0EsT0FBSUQsRUFDT0EsRUFBWSxLQUFLLElBQ2J0QyxDQUNWLEVBRUVBLENBQ1gsRUFDTXdDLEVBQXFCLENBQUNDLEVBQVF6QyxFQUFTNWYsSUFBUSxDQUVqRCxHQUFJaWlCLEdBQWFJLENBQU0sRUFDbkIsT0FBQUEsRUFBTyxRQUFVLEdBQ1ZBLEVBR1gsTUFBTUMsRUFBY1AsRUFBVW5DLEVBQVM3RixFQUFRL1osQ0FBRyxFQUNsRCxHQUFJc2lCLGFBQXVCLFFBQVMsQ0FDaEMsR0FBSXRpQixFQUFJLFFBQVUsR0FDZCxNQUFNLElBQUlnYyxHQUNkLE9BQU9zRyxFQUFZLEtBQU1BLEdBQWdCNUwsRUFBSyxLQUFLLE1BQU00TCxFQUFhdGlCLENBQUcsQ0FBQyxDQUM5RSxDQUNBLE9BQU8wVyxFQUFLLEtBQUssTUFBTTRMLEVBQWF0aUIsQ0FBRyxDQUMzQyxFQUNBMFcsRUFBSyxLQUFLLElBQU0sQ0FBQ2tKLEVBQVM1ZixJQUFRLENBQzlCLEdBQUlBLEVBQUksV0FDSixPQUFPMFcsRUFBSyxLQUFLLE1BQU1rSixFQUFTNWYsQ0FBRyxFQUV2QyxHQUFJQSxFQUFJLFlBQWMsV0FBWSxDQUc5QixNQUFNcWlCLEVBQVMzTCxFQUFLLEtBQUssTUFBTSxDQUFFLE1BQU9rSixFQUFRLE1BQU8sT0FBUSxDQUFBLENBQUUsRUFBSSxDQUFFLEdBQUc1ZixFQUFLLFdBQVksR0FBTSxFQUNqRyxPQUFJcWlCLGFBQWtCLFFBQ1hBLEVBQU8sS0FBTUEsR0FDVEQsRUFBbUJDLEVBQVF6QyxFQUFTNWYsQ0FBRyxDQUNqRCxFQUVFb2lCLEVBQW1CQyxFQUFRekMsRUFBUzVmLENBQUcsQ0FDbEQsQ0FFQSxNQUFNbkUsRUFBUzZhLEVBQUssS0FBSyxNQUFNa0osRUFBUzVmLENBQUcsRUFDM0MsR0FBSW5FLGFBQWtCLFFBQVMsQ0FDM0IsR0FBSW1FLEVBQUksUUFBVSxHQUNkLE1BQU0sSUFBSWdjLEdBQ2QsT0FBT25nQixFQUFPLEtBQU1BLEdBQVdrbUIsRUFBVWxtQixFQUFRa2UsRUFBUS9aLENBQUcsQ0FBQyxDQUNqRSxDQUNBLE9BQU8raEIsRUFBVWxtQixFQUFRa2UsRUFBUS9aLENBQUcsQ0FDeEMsQ0FDSixDQUVBdWlCLEVBQWdCN0wsRUFBTSxZQUFhLEtBQU8sQ0FDdEMsU0FBV25WLEdBQVUsT0FDakIsR0FBSSxDQUNBLE1BQU13USxFQUFJeUssR0FBVTlGLEVBQU1uVixDQUFLLEVBQy9CLE9BQU93USxFQUFFLFFBQVUsQ0FBRSxNQUFPQSxFQUFFLElBQUksRUFBSyxDQUFFLFFBQVF0VyxFQUFBc1csRUFBRSxRQUFGLFlBQUF0VyxFQUFTLE1BQU0sQ0FDcEUsTUFDVSxDQUNOLE9BQU9raEIsR0FBZWpHLEVBQU1uVixDQUFLLEVBQUUsS0FBTXdRLEdBQUMsT0FBTSxPQUFBQSxFQUFFLFFBQVUsQ0FBRSxNQUFPQSxFQUFFLElBQUksRUFBSyxDQUFFLFFBQVF0VyxFQUFBc1csRUFBRSxRQUFGLFlBQUF0VyxFQUFTLE1BQU0sRUFBRyxDQUNoSCxDQUNKLEVBQ0EsT0FBUSxNQUNSLFFBQVMsQ0FDakIsRUFBTSxDQUNOLENBQUMsRUFFWSttQixHQUEyQmpELEVBQWtCLGFBQWMsQ0FBQzdJLEVBQU1oYixJQUFRLE9BQ25GbW1CLEdBQVMsS0FBS25MLEVBQU1oYixDQUFHLEVBQ3ZCZ2IsRUFBSyxLQUFLLFFBQVUsQ0FBQyxLQUFJamIsRUFBQWliLEdBQUEsWUFBQUEsRUFBTSxLQUFLLE1BQVgsWUFBQWpiLEVBQWdCLFdBQVksQ0FBQSxDQUFHLEVBQUUsSUFBRyxHQUFNZ25CLEdBQWUvTCxFQUFLLEtBQUssR0FBRyxFQUMvRkEsRUFBSyxLQUFLLE1BQVEsQ0FBQ2tKLEVBQVNobEIsSUFBTSxDQUM5QixHQUFJYyxFQUFJLE9BQ0osR0FBSSxDQUNBa2tCLEVBQVEsTUFBUSxPQUFPQSxFQUFRLEtBQUssQ0FDeEMsTUFDVSxDQUFFLENBQ2hCLE9BQUksT0FBT0EsRUFBUSxPQUFVLFVBRTdCQSxFQUFRLE9BQU8sS0FBSyxDQUNoQixTQUFVLFNBQ1YsS0FBTSxlQUNOLE1BQU9BLEVBQVEsTUFDZixLQUFBbEosQ0FDWixDQUFTLEVBQ01rSixDQUNYLENBQ0osQ0FBQyxFQUNZOEMsR0FBaUNuRCxFQUFrQixtQkFBb0IsQ0FBQzdJLEVBQU1oYixJQUFRLENBRS9GaW5CLEdBQTZCLEtBQUtqTSxFQUFNaGIsQ0FBRyxFQUMzQzhtQixHQUFXLEtBQUs5TCxFQUFNaGIsQ0FBRyxDQUM3QixDQUFDLEVBQ1lrbkIsR0FBeUJyRCxFQUFrQixXQUFZLENBQUM3SSxFQUFNaGIsSUFBUSxDQUMvRUEsRUFBSSxVQUFZQSxFQUFJLFFBQVVtbkIsSUFDOUJILEdBQWlCLEtBQUtoTSxFQUFNaGIsQ0FBRyxDQUNuQyxDQUFDLEVBQ1lvbkIsR0FBeUJ2RCxFQUFrQixXQUFZLENBQUM3SSxFQUFNaGIsSUFBUSxDQUMvRSxHQUFJQSxFQUFJLFFBQVMsQ0FXYixNQUFNaEIsRUFWYSxDQUNmLEdBQUksRUFDSixHQUFJLEVBQ0osR0FBSSxFQUNKLEdBQUksRUFDSixHQUFJLEVBQ0osR0FBSSxFQUNKLEdBQUksRUFDSixHQUFJLENBQ2hCLEVBQzZCZ0IsRUFBSSxPQUFPLEVBQ2hDLEdBQUloQixJQUFNLE9BQ04sTUFBTSxJQUFJLE1BQU0sMEJBQTBCZ0IsRUFBSSxPQUFPLEdBQUcsRUFDNURBLEVBQUksVUFBWUEsRUFBSSxRQUFVcW5CLEdBQWFyb0IsQ0FBQyxFQUNoRCxNQUVJZ0IsRUFBSSxVQUFZQSxFQUFJLFFBQVVxbkIsR0FBWSxHQUM5Q0wsR0FBaUIsS0FBS2hNLEVBQU1oYixDQUFHLENBQ25DLENBQUMsRUFDWXNuQixHQUEwQnpELEVBQWtCLFlBQWEsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ2pGQSxFQUFJLFVBQVlBLEVBQUksUUFBVXVuQixJQUM5QlAsR0FBaUIsS0FBS2hNLEVBQU1oYixDQUFHLENBQ25DLENBQUMsRUFDWXduQixHQUF3QjNELEVBQWtCLFVBQVcsQ0FBQzdJLEVBQU1oYixJQUFRLENBQzdFZ25CLEdBQWlCLEtBQUtoTSxFQUFNaGIsQ0FBRyxFQUMvQmdiLEVBQUssS0FBSyxNQUFTa0osR0FBWSxDQUMzQixHQUFJLENBRUEsTUFBTXVELEVBQVV2RCxFQUFRLE1BQU0sS0FBSSxFQUU1QndELEVBQU0sSUFBSSxJQUFJRCxDQUFPLEVBQ3ZCem5CLEVBQUksV0FDSkEsRUFBSSxTQUFTLFVBQVksRUFDcEJBLEVBQUksU0FBUyxLQUFLMG5CLEVBQUksUUFBUSxHQUMvQnhELEVBQVEsT0FBTyxLQUFLLENBQ2hCLEtBQU0saUJBQ04sT0FBUSxNQUNSLEtBQU0sbUJBQ04sUUFBU2xrQixFQUFJLFNBQVMsT0FDdEIsTUFBT2trQixFQUFRLE1BQ2YsS0FBQWxKLEVBQ0EsU0FBVSxDQUFDaGIsRUFBSSxLQUN2QyxDQUFxQixHQUdMQSxFQUFJLFdBQ0pBLEVBQUksU0FBUyxVQUFZLEVBQ3BCQSxFQUFJLFNBQVMsS0FBSzBuQixFQUFJLFNBQVMsU0FBUyxHQUFHLEVBQUlBLEVBQUksU0FBUyxNQUFNLEVBQUcsRUFBRSxFQUFJQSxFQUFJLFFBQVEsR0FDeEZ4RCxFQUFRLE9BQU8sS0FBSyxDQUNoQixLQUFNLGlCQUNOLE9BQVEsTUFDUixLQUFNLG1CQUNOLFFBQVNsa0IsRUFBSSxTQUFTLE9BQ3RCLE1BQU9ra0IsRUFBUSxNQUNmLEtBQUFsSixFQUNBLFNBQVUsQ0FBQ2hiLEVBQUksS0FDdkMsQ0FBcUIsR0FJTEEsRUFBSSxVQUVKa2tCLEVBQVEsTUFBUXdELEVBQUksS0FJcEJ4RCxFQUFRLE1BQVF1RCxFQUVwQixNQUNKLE1BQ1UsQ0FDTnZELEVBQVEsT0FBTyxLQUFLLENBQ2hCLEtBQU0saUJBQ04sT0FBUSxNQUNSLE1BQU9BLEVBQVEsTUFDZixLQUFBbEosRUFDQSxTQUFVLENBQUNoYixFQUFJLEtBQy9CLENBQWEsQ0FDTCxDQUNKLENBQ0osQ0FBQyxFQUNZMm5CLEdBQTBCOUQsRUFBa0IsWUFBYSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDakZBLEVBQUksVUFBWUEsRUFBSSxRQUFVNG5CLEdBQWEsR0FDM0NaLEdBQWlCLEtBQUtoTSxFQUFNaGIsQ0FBRyxDQUNuQyxDQUFDLEVBQ1k2bkIsR0FBMkJoRSxFQUFrQixhQUFjLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNuRkEsRUFBSSxVQUFZQSxFQUFJLFFBQVU4bkIsSUFDOUJkLEdBQWlCLEtBQUtoTSxFQUFNaGIsQ0FBRyxDQUNuQyxDQUFDLEVBQ1krbkIsR0FBeUJsRSxFQUFrQixXQUFZLENBQUM3SSxFQUFNaGIsSUFBUSxDQUMvRUEsRUFBSSxVQUFZQSxFQUFJLFFBQVVnb0IsSUFDOUJoQixHQUFpQixLQUFLaE0sRUFBTWhiLENBQUcsQ0FDbkMsQ0FBQyxFQUNZaW9CLEdBQTBCcEUsRUFBa0IsWUFBYSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDakZBLEVBQUksVUFBWUEsRUFBSSxRQUFVa29CLElBQzlCbEIsR0FBaUIsS0FBS2hNLEVBQU1oYixDQUFHLENBQ25DLENBQUMsRUFDWW1vQixHQUF5QnRFLEVBQWtCLFdBQVksQ0FBQzdJLEVBQU1oYixJQUFRLENBQy9FQSxFQUFJLFVBQVlBLEVBQUksUUFBVW9vQixJQUM5QnBCLEdBQWlCLEtBQUtoTSxFQUFNaGIsQ0FBRyxDQUNuQyxDQUFDLEVBQ1lxb0IsR0FBd0J4RSxFQUFrQixVQUFXLENBQUM3SSxFQUFNaGIsSUFBUSxDQUM3RUEsRUFBSSxVQUFZQSxFQUFJLFFBQVVzb0IsSUFDOUJ0QixHQUFpQixLQUFLaE0sRUFBTWhiLENBQUcsQ0FDbkMsQ0FBQyxFQUNZdW9CLEdBQTBCMUUsRUFBa0IsWUFBYSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDakZBLEVBQUksVUFBWUEsRUFBSSxRQUFVd29CLElBQzlCeEIsR0FBaUIsS0FBS2hNLEVBQU1oYixDQUFHLENBQ25DLENBQUMsRUFDWXlvQixHQUFnQzVFLEVBQWtCLGtCQUFtQixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDN0ZBLEVBQUksVUFBWUEsRUFBSSxRQUFVMG9CLEdBQWlCMW9CLENBQUcsR0FDbERnbkIsR0FBaUIsS0FBS2hNLEVBQU1oYixDQUFHLENBQ25DLENBQUMsRUFDWTJvQixHQUE0QjlFLEVBQWtCLGNBQWUsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ3JGQSxFQUFJLFVBQVlBLEVBQUksUUFBVTRvQixJQUM5QjVCLEdBQWlCLEtBQUtoTSxFQUFNaGIsQ0FBRyxDQUNuQyxDQUFDLEVBQ1k2b0IsR0FBNEJoRixFQUFrQixjQUFlLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNyRkEsRUFBSSxVQUFZQSxFQUFJLFFBQVU4b0IsR0FBYTlvQixDQUFHLEdBQzlDZ25CLEdBQWlCLEtBQUtoTSxFQUFNaGIsQ0FBRyxDQUNuQyxDQUFDLEVBQ1krb0IsR0FBZ0NsRixFQUFrQixrQkFBbUIsQ0FBQzdJLEVBQU1oYixJQUFRLENBQzdGQSxFQUFJLFVBQVlBLEVBQUksUUFBVWdwQixJQUM5QmhDLEdBQWlCLEtBQUtoTSxFQUFNaGIsQ0FBRyxDQUNuQyxDQUFDLEVBQ1lpcEIsR0FBeUJwRixFQUFrQixXQUFZLENBQUM3SSxFQUFNaGIsSUFBUSxDQUMvRUEsRUFBSSxVQUFZQSxFQUFJLFFBQVVrcEIsSUFDOUJsQyxHQUFpQixLQUFLaE0sRUFBTWhiLENBQUcsRUFDL0JnYixFQUFLLEtBQUssSUFBSSxPQUFTLE1BQzNCLENBQUMsRUFDWW1PLEdBQXlCdEYsRUFBa0IsV0FBWSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDL0VBLEVBQUksVUFBWUEsRUFBSSxRQUFVb3BCLElBQzlCcEMsR0FBaUIsS0FBS2hNLEVBQU1oYixDQUFHLEVBQy9CZ2IsRUFBSyxLQUFLLElBQUksT0FBUyxPQUN2QkEsRUFBSyxLQUFLLE1BQVNrSixHQUFZLENBQzNCLEdBQUksQ0FFQSxJQUFJLElBQUksV0FBV0EsRUFBUSxLQUFLLEdBQUcsQ0FFdkMsTUFDTSxDQUNGQSxFQUFRLE9BQU8sS0FBSyxDQUNoQixLQUFNLGlCQUNOLE9BQVEsT0FDUixNQUFPQSxFQUFRLE1BQ2YsS0FBQWxKLEVBQ0EsU0FBVSxDQUFDaGIsRUFBSSxLQUMvQixDQUFhLENBQ0wsQ0FDSixDQUNKLENBQUMsRUFNWXFwQixHQUEyQnhGLEVBQWtCLGFBQWMsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ25GQSxFQUFJLFVBQVlBLEVBQUksUUFBVXNwQixJQUM5QnRDLEdBQWlCLEtBQUtoTSxFQUFNaGIsQ0FBRyxDQUNuQyxDQUFDLEVBQ1l1cEIsR0FBMkIxRixFQUFrQixhQUFjLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNuRkEsRUFBSSxVQUFZQSxFQUFJLFFBQVV3cEIsSUFDOUJ4QyxHQUFpQixLQUFLaE0sRUFBTWhiLENBQUcsRUFDL0JnYixFQUFLLEtBQUssTUFBU2tKLEdBQVksQ0FDM0IsTUFBTXVGLEVBQVF2RixFQUFRLE1BQU0sTUFBTSxHQUFHLEVBQ3JDLEdBQUksQ0FDQSxHQUFJdUYsRUFBTSxTQUFXLEVBQ2pCLE1BQU0sSUFBSSxNQUNkLEtBQU0sQ0FBQ0MsRUFBU0MsQ0FBTSxFQUFJRixFQUMxQixHQUFJLENBQUNFLEVBQ0QsTUFBTSxJQUFJLE1BQ2QsTUFBTUMsRUFBWSxPQUFPRCxDQUFNLEVBQy9CLEdBQUksR0FBR0MsQ0FBUyxLQUFPRCxFQUNuQixNQUFNLElBQUksTUFDZCxHQUFJQyxFQUFZLEdBQUtBLEVBQVksSUFDN0IsTUFBTSxJQUFJLE1BRWQsSUFBSSxJQUFJLFdBQVdGLENBQU8sR0FBRyxDQUNqQyxNQUNNLENBQ0Z4RixFQUFRLE9BQU8sS0FBSyxDQUNoQixLQUFNLGlCQUNOLE9BQVEsU0FDUixNQUFPQSxFQUFRLE1BQ2YsS0FBQWxKLEVBQ0EsU0FBVSxDQUFDaGIsRUFBSSxLQUMvQixDQUFhLENBQ0wsQ0FDSixDQUNKLENBQUMsRUFFTSxTQUFTNnBCLEdBQWMxTSxFQUFNLENBQ2hDLEdBQUlBLElBQVMsR0FDVCxNQUFPLEdBQ1gsR0FBSUEsRUFBSyxPQUFTLElBQU0sRUFDcEIsTUFBTyxHQUNYLEdBQUksQ0FFQSxZQUFLQSxDQUFJLEVBQ0YsRUFDWCxNQUNNLENBQ0YsTUFBTyxFQUNYLENBQ0osQ0FDTyxNQUFNMk0sR0FBMkJqRyxFQUFrQixhQUFjLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNuRkEsRUFBSSxVQUFZQSxFQUFJLFFBQVUrcEIsSUFDOUIvQyxHQUFpQixLQUFLaE0sRUFBTWhiLENBQUcsRUFDL0JnYixFQUFLLEtBQUssSUFBSSxnQkFBa0IsU0FDaENBLEVBQUssS0FBSyxNQUFTa0osR0FBWSxDQUN2QjJGLEdBQWMzRixFQUFRLEtBQUssR0FFL0JBLEVBQVEsT0FBTyxLQUFLLENBQ2hCLEtBQU0saUJBQ04sT0FBUSxTQUNSLE1BQU9BLEVBQVEsTUFDZixLQUFBbEosRUFDQSxTQUFVLENBQUNoYixFQUFJLEtBQzNCLENBQVMsQ0FDTCxDQUNKLENBQUMsRUFFTSxTQUFTZ3FCLEdBQWlCN00sRUFBTSxDQUNuQyxHQUFJLENBQUM4TSxHQUFrQixLQUFLOU0sQ0FBSSxFQUM1QixNQUFPLEdBQ1gsTUFBTXdGLEVBQVN4RixFQUFLLFFBQVEsUUFBVW5WLEdBQU9BLElBQU0sSUFBTSxJQUFNLEdBQUksRUFDN0RraUIsRUFBU3ZILEVBQU8sT0FBTyxLQUFLLEtBQUtBLEVBQU8sT0FBUyxDQUFDLEVBQUksRUFBRyxHQUFHLEVBQ2xFLE9BQU9rSCxHQUFjSyxDQUFNLENBQy9CLENBQ08sTUFBTUMsR0FBOEJ0RyxFQUFrQixnQkFBaUIsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ3pGQSxFQUFJLFVBQVlBLEVBQUksUUFBVWlxQixJQUM5QmpELEdBQWlCLEtBQUtoTSxFQUFNaGIsQ0FBRyxFQUMvQmdiLEVBQUssS0FBSyxJQUFJLGdCQUFrQixZQUNoQ0EsRUFBSyxLQUFLLE1BQVNrSixHQUFZLENBQ3ZCOEYsR0FBaUI5RixFQUFRLEtBQUssR0FFbENBLEVBQVEsT0FBTyxLQUFLLENBQ2hCLEtBQU0saUJBQ04sT0FBUSxZQUNSLE1BQU9BLEVBQVEsTUFDZixLQUFBbEosRUFDQSxTQUFVLENBQUNoYixFQUFJLEtBQzNCLENBQVMsQ0FDTCxDQUNKLENBQUMsRUFDWW9xQixHQUF5QnZHLEVBQWtCLFdBQVksQ0FBQzdJLEVBQU1oYixJQUFRLENBQy9FQSxFQUFJLFVBQVlBLEVBQUksUUFBVXFxQixJQUM5QnJELEdBQWlCLEtBQUtoTSxFQUFNaGIsQ0FBRyxDQUNuQyxDQUFDLEVBRU0sU0FBU3NxQixHQUFXQyxFQUFPQyxFQUFZLEtBQU0sQ0FDaEQsR0FBSSxDQUNBLE1BQU1DLEVBQWNGLEVBQU0sTUFBTSxHQUFHLEVBQ25DLEdBQUlFLEVBQVksU0FBVyxFQUN2QixNQUFPLEdBQ1gsS0FBTSxDQUFDQyxDQUFNLEVBQUlELEVBQ2pCLEdBQUksQ0FBQ0MsRUFDRCxNQUFPLEdBRVgsTUFBTUMsRUFBZSxLQUFLLE1BQU0sS0FBS0QsQ0FBTSxDQUFDLEVBSzVDLE1BSkksVUFBU0MsSUFBZ0JBLEdBQUEsWUFBQUEsRUFBYyxPQUFRLE9BRS9DLENBQUNBLEVBQWEsS0FFZEgsSUFBYyxFQUFFLFFBQVNHLElBQWlCQSxFQUFhLE1BQVFILEdBR3ZFLE1BQ00sQ0FDRixNQUFPLEVBQ1gsQ0FDSixDQUNPLE1BQU1JLEdBQXdCL0csRUFBa0IsVUFBVyxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDN0VnbkIsR0FBaUIsS0FBS2hNLEVBQU1oYixDQUFHLEVBQy9CZ2IsRUFBSyxLQUFLLE1BQVNrSixHQUFZLENBQ3ZCb0csR0FBV3BHLEVBQVEsTUFBT2xrQixFQUFJLEdBQUcsR0FFckNra0IsRUFBUSxPQUFPLEtBQUssQ0FDaEIsS0FBTSxpQkFDTixPQUFRLE1BQ1IsTUFBT0EsRUFBUSxNQUNmLEtBQUFsSixFQUNBLFNBQVUsQ0FBQ2hiLEVBQUksS0FDM0IsQ0FBUyxDQUNMLENBQ0osQ0FBQyxFQWVZNnFCLEdBQTJCaEgsRUFBa0IsYUFBYyxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDbkZtbUIsR0FBUyxLQUFLbkwsRUFBTWhiLENBQUcsRUFDdkJnYixFQUFLLEtBQUssUUFBVUEsRUFBSyxLQUFLLElBQUksU0FBVzhQLEdBQzdDOVAsRUFBSyxLQUFLLE1BQVEsQ0FBQ2tKLEVBQVM3ZixJQUFTLENBQ2pDLEdBQUlyRSxFQUFJLE9BQ0osR0FBSSxDQUNBa2tCLEVBQVEsTUFBUSxPQUFPQSxFQUFRLEtBQUssQ0FDeEMsTUFDVSxDQUFFLENBQ2hCLE1BQU1sZ0IsRUFBUWtnQixFQUFRLE1BQ3RCLEdBQUksT0FBT2xnQixHQUFVLFVBQVksQ0FBQyxPQUFPLE1BQU1BLENBQUssR0FBSyxPQUFPLFNBQVNBLENBQUssRUFDMUUsT0FBT2tnQixFQUVYLE1BQU02RyxFQUFXLE9BQU8vbUIsR0FBVSxTQUM1QixPQUFPLE1BQU1BLENBQUssRUFDZCxNQUNDLE9BQU8sU0FBU0EsQ0FBSyxFQUVsQixPQURBLFdBRVIsT0FDTixPQUFBa2dCLEVBQVEsT0FBTyxLQUFLLENBQ2hCLFNBQVUsU0FDVixLQUFNLGVBQ04sTUFBQWxnQixFQUNBLEtBQUFnWCxFQUNBLEdBQUkrUCxFQUFXLENBQUUsU0FBQUEsQ0FBUSxFQUFLLEVBQzFDLENBQVMsRUFDTTdHLENBQ1gsQ0FDSixDQUFDLEVBQ1k4RyxHQUFpQ25ILEVBQWtCLG1CQUFvQixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDL0ZpckIsR0FBNkIsS0FBS2pRLEVBQU1oYixDQUFHLEVBQzNDNnFCLEdBQVcsS0FBSzdQLEVBQU1oYixDQUFHLENBQzdCLENBQUMsRUFDWWtyQixHQUE0QnJILEVBQWtCLGNBQWUsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ3JGbW1CLEdBQVMsS0FBS25MLEVBQU1oYixDQUFHLEVBQ3ZCZ2IsRUFBSyxLQUFLLFFBQVVtUSxHQUNwQm5RLEVBQUssS0FBSyxNQUFRLENBQUNrSixFQUFTN2YsSUFBUyxDQUNqQyxHQUFJckUsRUFBSSxPQUNKLEdBQUksQ0FDQWtrQixFQUFRLE1BQVEsRUFBUUEsRUFBUSxLQUNwQyxNQUNVLENBQUUsQ0FDaEIsTUFBTWxnQixFQUFRa2dCLEVBQVEsTUFDdEIsT0FBSSxPQUFPbGdCLEdBQVUsV0FFckJrZ0IsRUFBUSxPQUFPLEtBQUssQ0FDaEIsU0FBVSxVQUNWLEtBQU0sZUFDTixNQUFBbGdCLEVBQ0EsS0FBQWdYLENBQ1osQ0FBUyxFQUNNa0osQ0FDWCxDQUNKLENBQUMsRUE0RVlrSCxHQUF3QnZILEVBQWtCLFVBQVcsQ0FBQzdJLEVBQU1oYixJQUFRLENBQzdFbW1CLEdBQVMsS0FBS25MLEVBQU1oYixDQUFHLEVBQ3ZCZ2IsRUFBSyxLQUFLLE1BQVNrSixHQUFZQSxDQUNuQyxDQUFDLEVBQ1ltSCxHQUE0QnhILEVBQWtCLGNBQWUsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ3JGbW1CLEdBQVMsS0FBS25MLEVBQU1oYixDQUFHLEVBQ3ZCZ2IsRUFBSyxLQUFLLE1BQVNrSixHQUFZQSxDQUNuQyxDQUFDLEVBQ1lvSCxHQUEwQnpILEVBQWtCLFlBQWEsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ2pGbW1CLEdBQVMsS0FBS25MLEVBQU1oYixDQUFHLEVBQ3ZCZ2IsRUFBSyxLQUFLLE1BQVEsQ0FBQ2tKLEVBQVM3ZixLQUN4QjZmLEVBQVEsT0FBTyxLQUFLLENBQ2hCLFNBQVUsUUFDVixLQUFNLGVBQ04sTUFBT0EsRUFBUSxNQUNmLEtBQUFsSixDQUNaLENBQVMsRUFDTWtKLEVBRWYsQ0FBQyxFQXdDRCxTQUFTcUgsR0FBa0JwckIsRUFBUXFyQixFQUFPbGdCLEVBQU8sQ0FDekNuTCxFQUFPLE9BQU8sUUFDZHFyQixFQUFNLE9BQU8sS0FBSyxHQUFHQyxHQUFrQm5nQixFQUFPbkwsRUFBTyxNQUFNLENBQUMsRUFFaEVxckIsRUFBTSxNQUFNbGdCLENBQUssRUFBSW5MLEVBQU8sS0FDaEMsQ0FDTyxNQUFNdXJCLEdBQTBCN0gsRUFBa0IsWUFBYSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDakZtbUIsR0FBUyxLQUFLbkwsRUFBTWhiLENBQUcsRUFDdkJnYixFQUFLLEtBQUssTUFBUSxDQUFDa0osRUFBUzVmLElBQVEsQ0FDaEMsTUFBTU4sRUFBUWtnQixFQUFRLE1BQ3RCLEdBQUksQ0FBQyxNQUFNLFFBQVFsZ0IsQ0FBSyxFQUNwQixPQUFBa2dCLEVBQVEsT0FBTyxLQUFLLENBQ2hCLFNBQVUsUUFDVixLQUFNLGVBQ04sTUFBQWxnQixFQUNBLEtBQUFnWCxDQUNoQixDQUFhLEVBQ01rSixFQUVYQSxFQUFRLE1BQVEsTUFBTWxnQixFQUFNLE1BQU0sRUFDbEMsTUFBTTJuQixFQUFRLENBQUEsRUFDZCxRQUFTLEVBQUksRUFBRyxFQUFJM25CLEVBQU0sT0FBUSxJQUFLLENBQ25DLE1BQU1RLEVBQU9SLEVBQU0sQ0FBQyxFQUNkN0QsRUFBU0gsRUFBSSxRQUFRLEtBQUssSUFBSSxDQUNoQyxNQUFPd0UsRUFDUCxPQUFRLENBQUEsQ0FDeEIsRUFBZUYsQ0FBRyxFQUNGbkUsYUFBa0IsUUFDbEJ3ckIsRUFBTSxLQUFLeHJCLEVBQU8sS0FBTUEsR0FBV29yQixHQUFrQnByQixFQUFRK2pCLEVBQVMsQ0FBQyxDQUFDLENBQUMsRUFHekVxSCxHQUFrQnByQixFQUFRK2pCLEVBQVMsQ0FBQyxDQUU1QyxDQUNBLE9BQUl5SCxFQUFNLE9BQ0MsUUFBUSxJQUFJQSxDQUFLLEVBQUUsS0FBSyxJQUFNekgsQ0FBTyxFQUV6Q0EsQ0FDWCxDQUNKLENBQUMsRUFDRCxTQUFTMEgsR0FBcUJ6ckIsRUFBUXFyQixFQUFPcHFCLEVBQUs0QyxFQUFPNm5CLEVBQWUsQ0FDcEUsR0FBSTFyQixFQUFPLE9BQU8sT0FBUSxDQUV0QixHQUFJMHJCLEdBQWlCLEVBQUV6cUIsS0FBTzRDLEdBQzFCLE9BRUp3bkIsRUFBTSxPQUFPLEtBQUssR0FBR0MsR0FBa0JycUIsRUFBS2pCLEVBQU8sTUFBTSxDQUFDLENBQzlELENBQ0lBLEVBQU8sUUFBVSxPQUNiaUIsS0FBTzRDLElBQ1B3bkIsRUFBTSxNQUFNcHFCLENBQUcsRUFBSSxRQUl2Qm9xQixFQUFNLE1BQU1wcUIsQ0FBRyxFQUFJakIsRUFBTyxLQUVsQyxDQUNBLFNBQVMyckIsR0FBYTlyQixFQUFLLGFBQ3ZCLE1BQU04SSxFQUFPLE9BQU8sS0FBSzlJLEVBQUksS0FBSyxFQUNsQyxVQUFXZixLQUFLNkosRUFDWixHQUFJLEdBQUNuRixHQUFBcEMsR0FBQWxCLEdBQUFOLEVBQUFDLEVBQUksUUFBSixZQUFBRCxFQUFZZCxLQUFaLFlBQUFvQixFQUFnQixPQUFoQixZQUFBa0IsRUFBc0IsU0FBdEIsTUFBQW9DLEVBQThCLElBQUksYUFDbkMsTUFBTSxJQUFJLE1BQU0sMkJBQTJCMUUsQ0FBQywwQkFBMEIsRUFHOUUsTUFBTThzQixFQUFRQyxHQUFrQmhzQixFQUFJLEtBQUssRUFDekMsTUFBTyxDQUNILEdBQUdBLEVBQ0gsS0FBQThJLEVBQ0EsT0FBUSxJQUFJLElBQUlBLENBQUksRUFDcEIsUUFBU0EsRUFBSyxPQUNkLGFBQWMsSUFBSSxJQUFJaWpCLENBQUssQ0FDbkMsQ0FDQSxDQUNBLFNBQVNFLEdBQWVOLEVBQU8zbkIsRUFBT2tnQixFQUFTNWYsRUFBS3RFLEVBQUtnYixFQUFNLENBQzNELE1BQU1rUixFQUFlLENBQUEsRUFFZkMsRUFBU25zQixFQUFJLE9BQ2Jvc0IsRUFBWXBzQixFQUFJLFNBQVMsS0FDekJxc0IsRUFBSUQsRUFBVSxJQUFJLEtBQ2xCUCxFQUFnQk8sRUFBVSxTQUFXLFdBQzNDLFVBQVdockIsS0FBTzRDLEVBQU8sQ0FDckIsR0FBSW1vQixFQUFPLElBQUkvcUIsQ0FBRyxFQUNkLFNBQ0osR0FBSWlyQixJQUFNLFFBQVMsQ0FDZkgsRUFBYSxLQUFLOXFCLENBQUcsRUFDckIsUUFDSixDQUNBLE1BQU1pVixFQUFJK1YsRUFBVSxJQUFJLENBQUUsTUFBT3BvQixFQUFNNUMsQ0FBRyxFQUFHLE9BQVEsQ0FBQSxDQUFFLEVBQUlrRCxDQUFHLEVBQzFEK1IsYUFBYSxRQUNic1YsRUFBTSxLQUFLdFYsRUFBRSxLQUFNQSxHQUFNdVYsR0FBcUJ2VixFQUFHNk4sRUFBUzlpQixFQUFLNEMsRUFBTzZuQixDQUFhLENBQUMsQ0FBQyxFQUdyRkQsR0FBcUJ2VixFQUFHNk4sRUFBUzlpQixFQUFLNEMsRUFBTzZuQixDQUFhLENBRWxFLENBU0EsT0FSSUssRUFBYSxRQUNiaEksRUFBUSxPQUFPLEtBQUssQ0FDaEIsS0FBTSxvQkFDTixLQUFNZ0ksRUFDTixNQUFBbG9CLEVBQ0EsS0FBQWdYLENBQ1osQ0FBUyxFQUVBMlEsRUFBTSxPQUVKLFFBQVEsSUFBSUEsQ0FBSyxFQUFFLEtBQUssSUFDcEJ6SCxDQUNWLEVBSFVBLENBSWYsQ0FDTyxNQUFNb0ksR0FBMkJ6SSxFQUFrQixhQUFjLENBQUM3SSxFQUFNaGIsSUFBUSxDQUVuRm1tQixHQUFTLEtBQUtuTCxFQUFNaGIsQ0FBRyxFQUV2QixNQUFNdXNCLEVBQU8sT0FBTyx5QkFBeUJ2c0IsRUFBSyxPQUFPLEVBQ3pELEdBQUksRUFBQ3VzQixHQUFBLE1BQUFBLEVBQU0sS0FBSyxDQUNaLE1BQU1DLEVBQUt4c0IsRUFBSSxNQUNmLE9BQU8sZUFBZUEsRUFBSyxRQUFTLENBQ2hDLElBQUssSUFBTSxDQUNQLE1BQU15c0IsRUFBUSxDQUFFLEdBQUdELENBQUUsRUFDckIsY0FBTyxlQUFleHNCLEVBQUssUUFBUyxDQUNoQyxNQUFPeXNCLENBQzNCLENBQWlCLEVBQ01BLENBQ1gsQ0FDWixDQUFTLENBQ0wsQ0FDQSxNQUFNQyxFQUFjQyxHQUFZLElBQU1iLEdBQWE5ckIsQ0FBRyxDQUFDLEVBQ3ZENm1CLEVBQWdCN0wsRUFBSyxLQUFNLGFBQWMsSUFBTSxDQUMzQyxNQUFNN1osRUFBUW5CLEVBQUksTUFDWjRzQixFQUFhLENBQUEsRUFDbkIsVUFBV3hyQixLQUFPRCxFQUFPLENBQ3JCLE1BQU1rUCxFQUFRbFAsRUFBTUMsQ0FBRyxFQUFFLEtBQ3pCLEdBQUlpUCxFQUFNLE9BQVEsQ0FDZHVjLEVBQVd4ckIsQ0FBRyxJQUFNd3JCLEVBQVd4ckIsQ0FBRyxFQUFJLElBQUksS0FDMUMsVUFBV3BDLEtBQUtxUixFQUFNLE9BQ2xCdWMsRUFBV3hyQixDQUFHLEVBQUUsSUFBSXBDLENBQUMsQ0FDN0IsQ0FDSixDQUNBLE9BQU80dEIsQ0FDWCxDQUFDLEVBQ0QsTUFBTWpnQixFQUFXa2dCLEdBQ1hDLEVBQVc5c0IsRUFBSSxTQUNyQixJQUFJNkYsRUFDSm1WLEVBQUssS0FBSyxNQUFRLENBQUNrSixFQUFTNWYsSUFBUSxDQUNoQ3VCLElBQVVBLEVBQVE2bUIsRUFBWSxPQUM5QixNQUFNMW9CLEVBQVFrZ0IsRUFBUSxNQUN0QixHQUFJLENBQUN2WCxFQUFTM0ksQ0FBSyxFQUNmLE9BQUFrZ0IsRUFBUSxPQUFPLEtBQUssQ0FDaEIsU0FBVSxTQUNWLEtBQU0sZUFDTixNQUFBbGdCLEVBQ0EsS0FBQWdYLENBQ2hCLENBQWEsRUFDTWtKLEVBRVhBLEVBQVEsTUFBUSxDQUFBLEVBQ2hCLE1BQU15SCxFQUFRLENBQUEsRUFDUnhxQixFQUFRMEUsRUFBTSxNQUNwQixVQUFXekUsS0FBT3lFLEVBQU0sS0FBTSxDQUMxQixNQUFNc2EsRUFBS2hmLEVBQU1DLENBQUcsRUFDZHlxQixFQUFnQjFMLEVBQUcsS0FBSyxTQUFXLFdBQ25DOUosRUFBSThKLEVBQUcsS0FBSyxJQUFJLENBQUUsTUFBT25jLEVBQU01QyxDQUFHLEVBQUcsT0FBUSxDQUFBLENBQUUsRUFBSWtELENBQUcsRUFDeEQrUixhQUFhLFFBQ2JzVixFQUFNLEtBQUt0VixFQUFFLEtBQU1BLEdBQU11VixHQUFxQnZWLEVBQUc2TixFQUFTOWlCLEVBQUs0QyxFQUFPNm5CLENBQWEsQ0FBQyxDQUFDLEVBR3JGRCxHQUFxQnZWLEVBQUc2TixFQUFTOWlCLEVBQUs0QyxFQUFPNm5CLENBQWEsQ0FFbEUsQ0FDQSxPQUFLaUIsRUFHRWIsR0FBZU4sRUFBTzNuQixFQUFPa2dCLEVBQVM1ZixFQUFLb29CLEVBQVksTUFBTzFSLENBQUksRUFGOUQyUSxFQUFNLE9BQVMsUUFBUSxJQUFJQSxDQUFLLEVBQUUsS0FBSyxJQUFNekgsQ0FBTyxFQUFJQSxDQUd2RSxDQUNKLENBQUMsRUFDWTZJLEdBQThCbEosRUFBa0IsZ0JBQWlCLENBQUM3SSxFQUFNaGIsSUFBUSxDQUV6RnNzQixHQUFXLEtBQUt0UixFQUFNaGIsQ0FBRyxFQUN6QixNQUFNZ3RCLEVBQWFoUyxFQUFLLEtBQUssTUFDdkIwUixFQUFjQyxHQUFZLElBQU1iLEdBQWE5ckIsQ0FBRyxDQUFDLEVBQ2pEaXRCLEVBQW9COXJCLEdBQVUsT0FDaEMsTUFBTStyQixFQUFNLElBQUlySCxHQUFJLENBQUMsUUFBUyxVQUFXLEtBQUssQ0FBQyxFQUN6Q3NILEVBQWFULEVBQVksTUFDekJVLEVBQVloc0IsR0FBUSxDQUN0QixNQUFNbkMsRUFBSW91QixHQUFTanNCLENBQUcsRUFDdEIsTUFBTyxTQUFTbkMsQ0FBQyw2QkFBNkJBLENBQUMsdUJBQ25ELEVBQ0FpdUIsRUFBSSxNQUFNLDhCQUE4QixFQUN4QyxNQUFNSSxFQUFNLE9BQU8sT0FBTyxJQUFJLEVBQzlCLElBQUlDLEVBQVUsRUFDZCxVQUFXbnNCLEtBQU8rckIsRUFBVyxLQUN6QkcsRUFBSWxzQixDQUFHLEVBQUksT0FBT21zQixHQUFTLEdBRy9CTCxFQUFJLE1BQU0sdUJBQXVCLEVBQ2pDLFVBQVc5ckIsS0FBTytyQixFQUFXLEtBQU0sQ0FDL0IsTUFBTWxxQixFQUFLcXFCLEVBQUlsc0IsQ0FBRyxFQUNabkMsRUFBSW91QixHQUFTanNCLENBQUcsRUFDaEJoQyxFQUFTK0IsRUFBTUMsQ0FBRyxFQUNsQnlxQixJQUFnQjlyQixFQUFBWCxHQUFBLFlBQUFBLEVBQVEsT0FBUixZQUFBVyxFQUFjLFVBQVcsV0FDL0NtdEIsRUFBSSxNQUFNLFNBQVNqcUIsQ0FBRSxNQUFNbXFCLEVBQVNoc0IsQ0FBRyxDQUFDLEdBQUcsRUFDdkN5cUIsRUFFQXFCLEVBQUksTUFBTTtBQUFBLGNBQ1pqcUIsQ0FBRTtBQUFBLGdCQUNBaEUsQ0FBQztBQUFBLHFEQUNvQ2dFLENBQUU7QUFBQTtBQUFBLGtDQUVyQmhFLENBQUMscUJBQXFCQSxDQUFDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxjQUszQ2dFLENBQUU7QUFBQSxnQkFDQWhFLENBQUM7QUFBQSx3QkFDT0EsQ0FBQztBQUFBO0FBQUE7QUFBQSxzQkFHSEEsQ0FBQyxPQUFPZ0UsQ0FBRTtBQUFBO0FBQUE7QUFBQSxPQUd6QixFQUdTaXFCLEVBQUksTUFBTTtBQUFBLGNBQ1pqcUIsQ0FBRTtBQUFBLG1EQUNtQ0EsQ0FBRTtBQUFBO0FBQUEsZ0NBRXJCaEUsQ0FBQyxxQkFBcUJBLENBQUM7QUFBQTtBQUFBO0FBQUE7QUFBQSxjQUl6Q2dFLENBQUU7QUFBQSxnQkFDQWhFLENBQUM7QUFBQSx3QkFDT0EsQ0FBQztBQUFBO0FBQUE7QUFBQSxzQkFHSEEsQ0FBQyxPQUFPZ0UsQ0FBRTtBQUFBO0FBQUE7QUFBQSxPQUd6QixDQUVDLENBQ0FpcUIsRUFBSSxNQUFNLDRCQUE0QixFQUN0Q0EsRUFBSSxNQUFNLGlCQUFpQixFQUMzQixNQUFNdnVCLEVBQUt1dUIsRUFBSSxRQUFPLEVBQ3RCLE1BQU8sQ0FBQ2hKLEVBQVM1ZixJQUFRM0YsRUFBR3dDLEVBQU8raUIsRUFBUzVmLENBQUcsQ0FDbkQsRUFDQSxJQUFJa3BCLEVBQ0osTUFBTTdnQixFQUFXa2dCLEdBQ1hZLEVBQU0sQ0FBQ0MsR0FBa0IsUUFFekJDLEVBQWNGLEdBRERHLEdBQ21CLE1BQ2hDZCxFQUFXOXNCLEVBQUksU0FDckIsSUFBSTZGLEVBQ0ptVixFQUFLLEtBQUssTUFBUSxDQUFDa0osRUFBUzVmLElBQVEsQ0FDaEN1QixJQUFVQSxFQUFRNm1CLEVBQVksT0FDOUIsTUFBTTFvQixFQUFRa2dCLEVBQVEsTUFDdEIsT0FBS3ZYLEVBQVMzSSxDQUFLLEVBU2Z5cEIsR0FBT0UsSUFBZXJwQixHQUFBLFlBQUFBLEVBQUssU0FBVSxJQUFTQSxFQUFJLFVBQVksSUFFekRrcEIsSUFDREEsRUFBV1AsRUFBaUJqdEIsRUFBSSxLQUFLLEdBQ3pDa2tCLEVBQVVzSixFQUFTdEosRUFBUzVmLENBQUcsRUFDMUJ3b0IsRUFFRWIsR0FBZSxDQUFBLEVBQUlqb0IsRUFBT2tnQixFQUFTNWYsRUFBS3VCLEVBQU9tVixDQUFJLEVBRC9Da0osR0FHUjhJLEVBQVc5SSxFQUFTNWYsQ0FBRyxHQWpCMUI0ZixFQUFRLE9BQU8sS0FBSyxDQUNoQixTQUFVLFNBQ1YsS0FBTSxlQUNOLE1BQUFsZ0IsRUFDQSxLQUFBZ1gsQ0FDaEIsQ0FBYSxFQUNNa0osRUFZZixDQUNKLENBQUMsRUFDRCxTQUFTMkosR0FBbUJDLEVBQVN0QyxFQUFPeFEsRUFBTTFXLEVBQUssQ0FDbkQsVUFBV25FLEtBQVUydEIsRUFDakIsR0FBSTN0QixFQUFPLE9BQU8sU0FBVyxFQUN6QixPQUFBcXJCLEVBQU0sTUFBUXJyQixFQUFPLE1BQ2RxckIsRUFHZixNQUFNdUMsRUFBYUQsRUFBUSxPQUFRelgsR0FBTSxDQUFDa1EsR0FBYWxRLENBQUMsQ0FBQyxFQUN6RCxPQUFJMFgsRUFBVyxTQUFXLEdBQ3RCdkMsRUFBTSxNQUFRdUMsRUFBVyxDQUFDLEVBQUUsTUFDckJBLEVBQVcsQ0FBQyxJQUV2QnZDLEVBQU0sT0FBTyxLQUFLLENBQ2QsS0FBTSxnQkFDTixNQUFPQSxFQUFNLE1BQ2IsS0FBQXhRLEVBQ0EsT0FBUThTLEVBQVEsSUFBSzN0QixHQUFXQSxFQUFPLE9BQU8sSUFBS2dmLEdBQVFxQixHQUFtQnJCLEVBQUs3YSxFQUFLbWMsR0FBVyxDQUFFLENBQUMsQ0FBQyxDQUMvRyxDQUFLLEVBQ00rSyxFQUNYLENBQ08sTUFBTXdDLEdBQTBCbkssRUFBa0IsWUFBYSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDakZtbUIsR0FBUyxLQUFLbkwsRUFBTWhiLENBQUcsRUFDdkI2bUIsRUFBZ0I3TCxFQUFLLEtBQU0sUUFBUyxJQUFNaGIsRUFBSSxRQUFRLEtBQU0sR0FBTSxFQUFFLEtBQUssUUFBVSxVQUFVLEVBQUksV0FBYSxNQUFTLEVBQ3ZINm1CLEVBQWdCN0wsRUFBSyxLQUFNLFNBQVUsSUFBTWhiLEVBQUksUUFBUSxLQUFNLEdBQU0sRUFBRSxLQUFLLFNBQVcsVUFBVSxFQUFJLFdBQWEsTUFBUyxFQUN6SDZtQixFQUFnQjdMLEVBQUssS0FBTSxTQUFVLElBQU0sQ0FDdkMsR0FBSWhiLEVBQUksUUFBUSxNQUFPLEdBQU0sRUFBRSxLQUFLLE1BQU0sRUFDdEMsT0FBTyxJQUFJLElBQUlBLEVBQUksUUFBUSxRQUFTdUUsR0FBVyxNQUFNLEtBQUtBLEVBQU8sS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUd0RixDQUFDLEVBQ0RzaUIsRUFBZ0I3TCxFQUFLLEtBQU0sVUFBVyxJQUFNLENBQ3hDLEdBQUloYixFQUFJLFFBQVEsTUFBTyxHQUFNLEVBQUUsS0FBSyxPQUFPLEVBQUcsQ0FDMUMsTUFBTVksRUFBV1osRUFBSSxRQUFRLElBQUt1ZCxHQUFNQSxFQUFFLEtBQUssT0FBTyxFQUN0RCxPQUFPLElBQUksT0FBTyxLQUFLM2MsRUFBUyxJQUFLckIsR0FBTTB1QixHQUFnQjF1QixFQUFFLE1BQU0sQ0FBQyxFQUFFLEtBQUssR0FBRyxDQUFDLElBQUksQ0FDdkYsQ0FFSixDQUFDLEVBQ0QsTUFBTTJ1QixFQUFTbHVCLEVBQUksUUFBUSxTQUFXLEVBQ2hDbXVCLEVBQVFudUIsRUFBSSxRQUFRLENBQUMsRUFBRSxLQUFLLElBQ2xDZ2IsRUFBSyxLQUFLLE1BQVEsQ0FBQ2tKLEVBQVM1ZixJQUFRLENBQ2hDLEdBQUk0cEIsRUFDQSxPQUFPQyxFQUFNakssRUFBUzVmLENBQUcsRUFFN0IsSUFBSThwQixFQUFRLEdBQ1osTUFBTU4sRUFBVSxDQUFBLEVBQ2hCLFVBQVd2cEIsS0FBVXZFLEVBQUksUUFBUyxDQUM5QixNQUFNRyxFQUFTb0UsRUFBTyxLQUFLLElBQUksQ0FDM0IsTUFBTzJmLEVBQVEsTUFDZixPQUFRLENBQUEsQ0FDeEIsRUFBZTVmLENBQUcsRUFDTixHQUFJbkUsYUFBa0IsUUFDbEIydEIsRUFBUSxLQUFLM3RCLENBQU0sRUFDbkJpdUIsRUFBUSxPQUVQLENBQ0QsR0FBSWp1QixFQUFPLE9BQU8sU0FBVyxFQUN6QixPQUFPQSxFQUNYMnRCLEVBQVEsS0FBSzN0QixDQUFNLENBQ3ZCLENBQ0osQ0FDQSxPQUFLaXVCLEVBRUUsUUFBUSxJQUFJTixDQUFPLEVBQUUsS0FBTUEsR0FDdkJELEdBQW1CQyxFQUFTNUosRUFBU2xKLEVBQU0xVyxDQUFHLENBQ3hELEVBSFV1cEIsR0FBbUJDLEVBQVM1SixFQUFTbEosRUFBTTFXLENBQUcsQ0FJN0QsQ0FDSixDQUFDLEVBMkRZK3BCLEdBRWJ4SyxFQUFrQix5QkFBMEIsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ3ZEQSxFQUFJLFVBQVksR0FDaEJndUIsR0FBVSxLQUFLaFQsRUFBTWhiLENBQUcsRUFDeEIsTUFBTXN1QixFQUFTdFQsRUFBSyxLQUFLLE1BQ3pCNkwsRUFBZ0I3TCxFQUFLLEtBQU0sYUFBYyxJQUFNLENBQzNDLE1BQU00UixFQUFhLENBQUEsRUFDbkIsVUFBV3JvQixLQUFVdkUsRUFBSSxRQUFTLENBQzlCLE1BQU11dUIsRUFBS2hxQixFQUFPLEtBQUssV0FDdkIsR0FBSSxDQUFDZ3FCLEdBQU0sT0FBTyxLQUFLQSxDQUFFLEVBQUUsU0FBVyxFQUNsQyxNQUFNLElBQUksTUFBTSxnREFBZ0R2dUIsRUFBSSxRQUFRLFFBQVF1RSxDQUFNLENBQUMsR0FBRyxFQUNsRyxTQUFXLENBQUN0RixFQUFHRCxDQUFDLElBQUssT0FBTyxRQUFRdXZCLENBQUUsRUFBRyxDQUNoQzNCLEVBQVczdEIsQ0FBQyxJQUNiMnRCLEVBQVczdEIsQ0FBQyxFQUFJLElBQUksS0FDeEIsVUFBVzRDLEtBQU83QyxFQUNkNHRCLEVBQVczdEIsQ0FBQyxFQUFFLElBQUk0QyxDQUFHLENBRTdCLENBQ0osQ0FDQSxPQUFPK3FCLENBQ1gsQ0FBQyxFQUNELE1BQU00QixFQUFPN0IsR0FBWSxJQUFNLE9BQzNCLE1BQU12SixFQUFPcGpCLEVBQUksUUFDWHl1QixFQUFNLElBQUksSUFDaEIsVUFBV2xSLEtBQUs2RixFQUFNLENBQ2xCLE1BQU1uaEIsR0FBU2xDLEVBQUF3ZCxFQUFFLEtBQUssYUFBUCxZQUFBeGQsRUFBb0JDLEVBQUksZUFDdkMsR0FBSSxDQUFDaUMsR0FBVUEsRUFBTyxPQUFTLEVBQzNCLE1BQU0sSUFBSSxNQUFNLGdEQUFnRGpDLEVBQUksUUFBUSxRQUFRdWQsQ0FBQyxDQUFDLEdBQUcsRUFDN0YsVUFBV3ZlLEtBQUtpRCxFQUFRLENBQ3BCLEdBQUl3c0IsRUFBSSxJQUFJenZCLENBQUMsRUFDVCxNQUFNLElBQUksTUFBTSxrQ0FBa0MsT0FBT0EsQ0FBQyxDQUFDLEdBQUcsRUFFbEV5dkIsRUFBSSxJQUFJenZCLEVBQUd1ZSxDQUFDLENBQ2hCLENBQ0osQ0FDQSxPQUFPa1IsQ0FDWCxDQUFDLEVBQ0R6VCxFQUFLLEtBQUssTUFBUSxDQUFDa0osRUFBUzVmLElBQVEsQ0FDaEMsTUFBTU4sRUFBUWtnQixFQUFRLE1BQ3RCLEdBQUksQ0FBQzJJLEdBQWM3b0IsQ0FBSyxFQUNwQixPQUFBa2dCLEVBQVEsT0FBTyxLQUFLLENBQ2hCLEtBQU0sZUFDTixTQUFVLFNBQ1YsTUFBQWxnQixFQUNBLEtBQUFnWCxDQUNoQixDQUFhLEVBQ01rSixFQUVYLE1BQU13SyxFQUFNRixFQUFLLE1BQU0sSUFBSXhxQixHQUFBLFlBQUFBLEVBQVFoRSxFQUFJLGNBQWMsRUFDckQsT0FBSTB1QixFQUNPQSxFQUFJLEtBQUssSUFBSXhLLEVBQVM1ZixDQUFHLEVBRWhDdEUsRUFBSSxjQUNHc3VCLEVBQU9wSyxFQUFTNWYsQ0FBRyxHQUc5QjRmLEVBQVEsT0FBTyxLQUFLLENBQ2hCLEtBQU0sZ0JBQ04sT0FBUSxDQUFBLEVBQ1IsS0FBTSw0QkFDTixjQUFlbGtCLEVBQUksY0FDbkIsTUFBQWdFLEVBQ0EsS0FBTSxDQUFDaEUsRUFBSSxhQUFhLEVBQ3hCLEtBQUFnYixDQUNaLENBQVMsRUFDTWtKLEVBQ1gsQ0FDSixDQUFDLEVBQ1l5SyxHQUFpQzlLLEVBQWtCLG1CQUFvQixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDL0ZtbUIsR0FBUyxLQUFLbkwsRUFBTWhiLENBQUcsRUFDdkJnYixFQUFLLEtBQUssTUFBUSxDQUFDa0osRUFBUzVmLElBQVEsQ0FDaEMsTUFBTU4sRUFBUWtnQixFQUFRLE1BQ2hCelMsRUFBT3pSLEVBQUksS0FBSyxLQUFLLElBQUksQ0FBRSxNQUFPZ0UsRUFBTyxPQUFRLENBQUEsQ0FBRSxFQUFJTSxDQUFHLEVBQzFEb04sRUFBUTFSLEVBQUksTUFBTSxLQUFLLElBQUksQ0FBRSxNQUFPZ0UsRUFBTyxPQUFRLENBQUEsQ0FBRSxFQUFJTSxDQUFHLEVBRWxFLE9BRGNtTixhQUFnQixTQUFXQyxhQUFpQixRQUUvQyxRQUFRLElBQUksQ0FBQ0QsRUFBTUMsQ0FBSyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUNELEVBQU1DLENBQUssSUFDekNrZCxHQUEwQjFLLEVBQVN6UyxFQUFNQyxDQUFLLENBQ3hELEVBRUVrZCxHQUEwQjFLLEVBQVN6UyxFQUFNQyxDQUFLLENBQ3pELENBQ0osQ0FBQyxFQUNELFNBQVNtZCxHQUFZbnRCLEVBQUdDLEVBQUcsQ0FHdkIsR0FBSUQsSUFBTUMsRUFDTixNQUFPLENBQUUsTUFBTyxHQUFNLEtBQU1ELENBQUMsRUFFakMsR0FBSUEsYUFBYSxNQUFRQyxhQUFhLE1BQVEsQ0FBQ0QsR0FBTSxDQUFDQyxFQUNsRCxNQUFPLENBQUUsTUFBTyxHQUFNLEtBQU1ELENBQUMsRUFFakMsR0FBSW90QixHQUFtQnB0QixDQUFDLEdBQUtvdEIsR0FBbUJudEIsQ0FBQyxFQUFHLENBQ2hELE1BQU1vdEIsRUFBUSxPQUFPLEtBQUtwdEIsQ0FBQyxFQUNyQnF0QixFQUFhLE9BQU8sS0FBS3R0QixDQUFDLEVBQUUsT0FBUU4sR0FBUTJ0QixFQUFNLFFBQVEzdEIsQ0FBRyxJQUFNLEVBQUUsRUFDckU2dEIsRUFBUyxDQUFFLEdBQUd2dEIsRUFBRyxHQUFHQyxDQUFDLEVBQzNCLFVBQVdQLEtBQU80dEIsRUFBWSxDQUMxQixNQUFNRSxFQUFjTCxHQUFZbnRCLEVBQUVOLENBQUcsRUFBR08sRUFBRVAsQ0FBRyxDQUFDLEVBQzlDLEdBQUksQ0FBQzh0QixFQUFZLE1BQ2IsTUFBTyxDQUNILE1BQU8sR0FDUCxlQUFnQixDQUFDOXRCLEVBQUssR0FBRzh0QixFQUFZLGNBQWMsQ0FDdkUsRUFFWUQsRUFBTzd0QixDQUFHLEVBQUk4dEIsRUFBWSxJQUM5QixDQUNBLE1BQU8sQ0FBRSxNQUFPLEdBQU0sS0FBTUQsQ0FBTSxDQUN0QyxDQUNBLEdBQUksTUFBTSxRQUFRdnRCLENBQUMsR0FBSyxNQUFNLFFBQVFDLENBQUMsRUFBRyxDQUN0QyxHQUFJRCxFQUFFLFNBQVdDLEVBQUUsT0FDZixNQUFPLENBQUUsTUFBTyxHQUFPLGVBQWdCLENBQUEsQ0FBRSxFQUU3QyxNQUFNd3RCLEVBQVcsQ0FBQSxFQUNqQixRQUFTN2pCLEVBQVEsRUFBR0EsRUFBUTVKLEVBQUUsT0FBUTRKLElBQVMsQ0FDM0MsTUFBTThqQixFQUFRMXRCLEVBQUU0SixDQUFLLEVBQ2YrakIsRUFBUTF0QixFQUFFMkosQ0FBSyxFQUNmNGpCLEVBQWNMLEdBQVlPLEVBQU9DLENBQUssRUFDNUMsR0FBSSxDQUFDSCxFQUFZLE1BQ2IsTUFBTyxDQUNILE1BQU8sR0FDUCxlQUFnQixDQUFDNWpCLEVBQU8sR0FBRzRqQixFQUFZLGNBQWMsQ0FDekUsRUFFWUMsRUFBUyxLQUFLRCxFQUFZLElBQUksQ0FDbEMsQ0FDQSxNQUFPLENBQUUsTUFBTyxHQUFNLEtBQU1DLENBQVEsQ0FDeEMsQ0FDQSxNQUFPLENBQUUsTUFBTyxHQUFPLGVBQWdCLENBQUEsQ0FBRSxDQUM3QyxDQUNBLFNBQVNQLEdBQTBCenVCLEVBQVFzUixFQUFNQyxFQUFPLENBRXBELE1BQU00ZCxFQUFZLElBQUksSUFDdEIsSUFBSUMsRUFDSixVQUFXcFEsS0FBTzFOLEVBQUssT0FDbkIsR0FBSTBOLEVBQUksT0FBUyxvQkFBcUIsQ0FDbENvUSxJQUFlQSxFQUFhcFEsR0FDNUIsVUFBV2xnQixLQUFLa2dCLEVBQUksS0FDWG1RLEVBQVUsSUFBSXJ3QixDQUFDLEdBQ2hCcXdCLEVBQVUsSUFBSXJ3QixFQUFHLEVBQUUsRUFDdkJxd0IsRUFBVSxJQUFJcndCLENBQUMsRUFBRSxFQUFJLEVBRTdCLE1BRUlrQixFQUFPLE9BQU8sS0FBS2dmLENBQUcsRUFHOUIsVUFBV0EsS0FBT3pOLEVBQU0sT0FDcEIsR0FBSXlOLEVBQUksT0FBUyxvQkFDYixVQUFXbGdCLEtBQUtrZ0IsRUFBSSxLQUNYbVEsRUFBVSxJQUFJcndCLENBQUMsR0FDaEJxd0IsRUFBVSxJQUFJcndCLEVBQUcsRUFBRSxFQUN2QnF3QixFQUFVLElBQUlyd0IsQ0FBQyxFQUFFLEVBQUksUUFJekJrQixFQUFPLE9BQU8sS0FBS2dmLENBQUcsRUFJOUIsTUFBTXFRLEVBQVcsQ0FBQyxHQUFHRixDQUFTLEVBQUUsT0FBTyxDQUFDLENBQUEsQ0FBR0csQ0FBQyxJQUFNQSxFQUFFLEdBQUtBLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDeHdCLENBQUMsSUFBTUEsQ0FBQyxFQUk1RSxHQUhJdXdCLEVBQVMsUUFBVUQsR0FDbkJwdkIsRUFBTyxPQUFPLEtBQUssQ0FBRSxHQUFHb3ZCLEVBQVksS0FBTUMsRUFBVSxFQUVwRGpKLEdBQWFwbUIsQ0FBTSxFQUNuQixPQUFPQSxFQUNYLE1BQU11dkIsRUFBU2IsR0FBWXBkLEVBQUssTUFBT0MsRUFBTSxLQUFLLEVBQ2xELEdBQUksQ0FBQ2dlLEVBQU8sTUFDUixNQUFNLElBQUksTUFBTSx3Q0FBNkMsS0FBSyxVQUFVQSxFQUFPLGNBQWMsQ0FBQyxFQUFFLEVBRXhHLE9BQUF2dkIsRUFBTyxNQUFRdXZCLEVBQU8sS0FDZnZ2QixDQUNYLENBOEVPLE1BQU13dkIsR0FBMkI5TCxFQUFrQixhQUFjLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNuRm1tQixHQUFTLEtBQUtuTCxFQUFNaGIsQ0FBRyxFQUN2QmdiLEVBQUssS0FBSyxNQUFRLENBQUNrSixFQUFTNWYsSUFBUSxDQUNoQyxNQUFNTixFQUFRa2dCLEVBQVEsTUFDdEIsR0FBSSxDQUFDNEssR0FBbUI5cUIsQ0FBSyxFQUN6QixPQUFBa2dCLEVBQVEsT0FBTyxLQUFLLENBQ2hCLFNBQVUsU0FDVixLQUFNLGVBQ04sTUFBQWxnQixFQUNBLEtBQUFnWCxDQUNoQixDQUFhLEVBQ01rSixFQUVYLE1BQU15SCxFQUFRLENBQUEsRUFDUjFwQixFQUFTakMsRUFBSSxRQUFRLEtBQUssT0FDaEMsR0FBSWlDLEVBQVEsQ0FDUmlpQixFQUFRLE1BQVEsQ0FBQSxFQUNoQixNQUFNMEwsRUFBYSxJQUFJLElBQ3ZCLFVBQVd4dUIsS0FBT2EsRUFDZCxHQUFJLE9BQU9iLEdBQVEsVUFBWSxPQUFPQSxHQUFRLFVBQVksT0FBT0EsR0FBUSxTQUFVLENBQy9Fd3VCLEVBQVcsSUFBSSxPQUFPeHVCLEdBQVEsU0FBV0EsRUFBSSxTQUFRLEVBQUtBLENBQUcsRUFDN0QsTUFBTWpCLEVBQVNILEVBQUksVUFBVSxLQUFLLElBQUksQ0FBRSxNQUFPZ0UsRUFBTTVDLENBQUcsRUFBRyxPQUFRLENBQUEsQ0FBRSxFQUFJa0QsQ0FBRyxFQUN4RW5FLGFBQWtCLFFBQ2xCd3JCLEVBQU0sS0FBS3hyQixFQUFPLEtBQU1BLEdBQVcsQ0FDM0JBLEVBQU8sT0FBTyxRQUNkK2pCLEVBQVEsT0FBTyxLQUFLLEdBQUd1SCxHQUFrQnJxQixFQUFLakIsRUFBTyxNQUFNLENBQUMsRUFFaEUrakIsRUFBUSxNQUFNOWlCLENBQUcsRUFBSWpCLEVBQU8sS0FDaEMsQ0FBQyxDQUFDLEdBR0VBLEVBQU8sT0FBTyxRQUNkK2pCLEVBQVEsT0FBTyxLQUFLLEdBQUd1SCxHQUFrQnJxQixFQUFLakIsRUFBTyxNQUFNLENBQUMsRUFFaEUrakIsRUFBUSxNQUFNOWlCLENBQUcsRUFBSWpCLEVBQU8sTUFFcEMsQ0FFSixJQUFJK3JCLEVBQ0osVUFBVzlxQixLQUFPNEMsRUFDVDRyQixFQUFXLElBQUl4dUIsQ0FBRyxJQUNuQjhxQixFQUFlQSxHQUFnQixDQUFBLEVBQy9CQSxFQUFhLEtBQUs5cUIsQ0FBRyxHQUd6QjhxQixHQUFnQkEsRUFBYSxPQUFTLEdBQ3RDaEksRUFBUSxPQUFPLEtBQUssQ0FDaEIsS0FBTSxvQkFDTixNQUFBbGdCLEVBQ0EsS0FBQWdYLEVBQ0EsS0FBTWtSLENBQzFCLENBQWlCLENBRVQsS0FDSyxDQUNEaEksRUFBUSxNQUFRLENBQUEsRUFDaEIsVUFBVzlpQixLQUFPLFFBQVEsUUFBUTRDLENBQUssRUFBRyxDQUN0QyxHQUFJNUMsSUFBUSxZQUNSLFNBQ0osSUFBSXl1QixFQUFZN3ZCLEVBQUksUUFBUSxLQUFLLElBQUksQ0FBRSxNQUFPb0IsRUFBSyxPQUFRLENBQUEsQ0FBRSxFQUFJa0QsQ0FBRyxFQUNwRSxHQUFJdXJCLGFBQXFCLFFBQ3JCLE1BQU0sSUFBSSxNQUFNLHNEQUFzRCxFQU8xRSxHQUp3QixPQUFPenVCLEdBQVEsVUFDbkMwcEIsR0FBZSxLQUFLMXBCLENBQUcsR0FDdkJ5dUIsRUFBVSxPQUFPLFFBQ2pCQSxFQUFVLE9BQU8sS0FBTTFRLEdBQVFBLEVBQUksT0FBUyxnQkFBa0JBLEVBQUksV0FBYSxRQUFRLEVBQ3RFLENBQ2pCLE1BQU0yUSxFQUFjOXZCLEVBQUksUUFBUSxLQUFLLElBQUksQ0FBRSxNQUFPLE9BQU9vQixDQUFHLEVBQUcsT0FBUSxDQUFBLENBQUUsRUFBSWtELENBQUcsRUFDaEYsR0FBSXdyQixhQUF1QixRQUN2QixNQUFNLElBQUksTUFBTSxzREFBc0QsRUFFdEVBLEVBQVksT0FBTyxTQUFXLElBQzlCRCxFQUFZQyxFQUVwQixDQUNBLEdBQUlELEVBQVUsT0FBTyxPQUFRLENBQ3JCN3ZCLEVBQUksT0FBUyxRQUVia2tCLEVBQVEsTUFBTTlpQixDQUFHLEVBQUk0QyxFQUFNNUMsQ0FBRyxFQUk5QjhpQixFQUFRLE9BQU8sS0FBSyxDQUNoQixLQUFNLGNBQ04sT0FBUSxTQUNSLE9BQVEyTCxFQUFVLE9BQU8sSUFBSzFRLEdBQVFxQixHQUFtQnJCLEVBQUs3YSxFQUFLbWMsR0FBVyxDQUFFLENBQUMsRUFDakYsTUFBT3JmLEVBQ1AsS0FBTSxDQUFDQSxDQUFHLEVBQ1YsS0FBQTRaLENBQzVCLENBQXlCLEVBRUwsUUFDSixDQUNBLE1BQU03YSxFQUFTSCxFQUFJLFVBQVUsS0FBSyxJQUFJLENBQUUsTUFBT2dFLEVBQU01QyxDQUFHLEVBQUcsT0FBUSxDQUFBLENBQUUsRUFBSWtELENBQUcsRUFDeEVuRSxhQUFrQixRQUNsQndyQixFQUFNLEtBQUt4ckIsRUFBTyxLQUFNQSxHQUFXLENBQzNCQSxFQUFPLE9BQU8sUUFDZCtqQixFQUFRLE9BQU8sS0FBSyxHQUFHdUgsR0FBa0JycUIsRUFBS2pCLEVBQU8sTUFBTSxDQUFDLEVBRWhFK2pCLEVBQVEsTUFBTTJMLEVBQVUsS0FBSyxFQUFJMXZCLEVBQU8sS0FDNUMsQ0FBQyxDQUFDLEdBR0VBLEVBQU8sT0FBTyxRQUNkK2pCLEVBQVEsT0FBTyxLQUFLLEdBQUd1SCxHQUFrQnJxQixFQUFLakIsRUFBTyxNQUFNLENBQUMsRUFFaEUrakIsRUFBUSxNQUFNMkwsRUFBVSxLQUFLLEVBQUkxdkIsRUFBTyxNQUVoRCxDQUNKLENBQ0EsT0FBSXdyQixFQUFNLE9BQ0MsUUFBUSxJQUFJQSxDQUFLLEVBQUUsS0FBSyxJQUFNekgsQ0FBTyxFQUV6Q0EsQ0FDWCxDQUNKLENBQUMsRUFtR1k2TCxHQUF5QmxNLEVBQWtCLFdBQVksQ0FBQzdJLEVBQU1oYixJQUFRLENBQy9FbW1CLEdBQVMsS0FBS25MLEVBQU1oYixDQUFHLEVBQ3ZCLE1BQU1pQyxFQUFTK3RCLEdBQW1CaHdCLEVBQUksT0FBTyxFQUN2Q2l3QixFQUFZLElBQUksSUFBSWh1QixDQUFNLEVBQ2hDK1ksRUFBSyxLQUFLLE9BQVNpVixFQUNuQmpWLEVBQUssS0FBSyxRQUFVLElBQUksT0FBTyxLQUFLL1ksRUFDL0IsT0FBUWhELEdBQU1peEIsR0FBc0IsSUFBSSxPQUFPanhCLENBQUMsQ0FBQyxFQUNqRCxJQUFLLEdBQU8sT0FBTyxHQUFNLFNBQVd3bUIsR0FBaUIsQ0FBQyxFQUFJLEVBQUUsVUFBVyxFQUN2RSxLQUFLLEdBQUcsQ0FBQyxJQUFJLEVBQ2xCekssRUFBSyxLQUFLLE1BQVEsQ0FBQ2tKLEVBQVM3ZixJQUFTLENBQ2pDLE1BQU1MLEVBQVFrZ0IsRUFBUSxNQUN0QixPQUFJK0wsRUFBVSxJQUFJanNCLENBQUssR0FHdkJrZ0IsRUFBUSxPQUFPLEtBQUssQ0FDaEIsS0FBTSxnQkFDTixPQUFBamlCLEVBQ0EsTUFBQStCLEVBQ0EsS0FBQWdYLENBQ1osQ0FBUyxFQUNNa0osQ0FDWCxDQUNKLENBQUMsRUFDWWlNLEdBQTRCdE0sRUFBa0IsY0FBZSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FFckYsR0FEQW1tQixHQUFTLEtBQUtuTCxFQUFNaGIsQ0FBRyxFQUNuQkEsRUFBSSxPQUFPLFNBQVcsRUFDdEIsTUFBTSxJQUFJLE1BQU0sbURBQW1ELEVBRXZFLE1BQU1pQyxFQUFTLElBQUksSUFBSWpDLEVBQUksTUFBTSxFQUNqQ2diLEVBQUssS0FBSyxPQUFTL1ksRUFDbkIrWSxFQUFLLEtBQUssUUFBVSxJQUFJLE9BQU8sS0FBS2hiLEVBQUksT0FDbkMsSUFBS3VkLEdBQU8sT0FBT0EsR0FBTSxTQUFXa0ksR0FBaUJsSSxDQUFDLEVBQUlBLEVBQUlrSSxHQUFpQmxJLEVBQUUsU0FBUSxDQUFFLEVBQUksT0FBT0EsQ0FBQyxDQUFFLEVBQ3pHLEtBQUssR0FBRyxDQUFDLElBQUksRUFDbEJ2QyxFQUFLLEtBQUssTUFBUSxDQUFDa0osRUFBUzdmLElBQVMsQ0FDakMsTUFBTUwsRUFBUWtnQixFQUFRLE1BQ3RCLE9BQUlqaUIsRUFBTyxJQUFJK0IsQ0FBSyxHQUdwQmtnQixFQUFRLE9BQU8sS0FBSyxDQUNoQixLQUFNLGdCQUNOLE9BQVFsa0IsRUFBSSxPQUNaLE1BQUFnRSxFQUNBLEtBQUFnWCxDQUNaLENBQVMsRUFDTWtKLENBQ1gsQ0FDSixDQUFDLEVBaUJZa00sR0FBOEJ2TSxFQUFrQixnQkFBaUIsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ3pGbW1CLEdBQVMsS0FBS25MLEVBQU1oYixDQUFHLEVBQ3ZCZ2IsRUFBSyxLQUFLLE1BQVEsQ0FBQ2tKLEVBQVM1ZixJQUFRLENBQ2hDLEdBQUlBLEVBQUksWUFBYyxXQUNsQixNQUFNLElBQUkrckIsR0FBcUJyVixFQUFLLFlBQVksSUFBSSxFQUV4RCxNQUFNc1YsRUFBT3R3QixFQUFJLFVBQVVra0IsRUFBUSxNQUFPQSxDQUFPLEVBQ2pELEdBQUk1ZixFQUFJLE1BRUosT0FEZWdzQixhQUFnQixRQUFVQSxFQUFPLFFBQVEsUUFBUUEsQ0FBSSxHQUN0RCxLQUFNNWQsSUFDaEJ3UixFQUFRLE1BQVF4UixFQUNUd1IsRUFDVixFQUVMLEdBQUlvTSxhQUFnQixRQUNoQixNQUFNLElBQUloUSxHQUVkLE9BQUE0RCxFQUFRLE1BQVFvTSxFQUNUcE0sQ0FDWCxDQUNKLENBQUMsRUFDRCxTQUFTcU0sR0FBcUJwd0IsRUFBUTZELEVBQU8sQ0FDekMsT0FBSTdELEVBQU8sT0FBTyxRQUFVNkQsSUFBVSxPQUMzQixDQUFFLE9BQVEsR0FBSSxNQUFPLE1BQVMsRUFFbEM3RCxDQUNYLENBQ08sTUFBTXF3QixHQUE2QjNNLEVBQWtCLGVBQWdCLENBQUM3SSxFQUFNaGIsSUFBUSxDQUN2Rm1tQixHQUFTLEtBQUtuTCxFQUFNaGIsQ0FBRyxFQUN2QmdiLEVBQUssS0FBSyxNQUFRLFdBQ2xCQSxFQUFLLEtBQUssT0FBUyxXQUNuQjZMLEVBQWdCN0wsRUFBSyxLQUFNLFNBQVUsSUFDMUJoYixFQUFJLFVBQVUsS0FBSyxPQUFTLElBQUksSUFBSSxDQUFDLEdBQUdBLEVBQUksVUFBVSxLQUFLLE9BQVEsTUFBUyxDQUFDLEVBQUksTUFDM0YsRUFDRDZtQixFQUFnQjdMLEVBQUssS0FBTSxVQUFXLElBQU0sQ0FDeEMsTUFBTXhZLEVBQVV4QyxFQUFJLFVBQVUsS0FBSyxRQUNuQyxPQUFPd0MsRUFBVSxJQUFJLE9BQU8sS0FBS3lyQixHQUFnQnpyQixFQUFRLE1BQU0sQ0FBQyxLQUFLLEVBQUksTUFDN0UsQ0FBQyxFQUNEd1ksRUFBSyxLQUFLLE1BQVEsQ0FBQ2tKLEVBQVM1ZixJQUFRLENBQ2hDLEdBQUl0RSxFQUFJLFVBQVUsS0FBSyxRQUFVLFdBQVksQ0FDekMsTUFBTUcsRUFBU0gsRUFBSSxVQUFVLEtBQUssSUFBSWtrQixFQUFTNWYsQ0FBRyxFQUNsRCxPQUFJbkUsYUFBa0IsUUFDWEEsRUFBTyxLQUFNa1csR0FBTWthLEdBQXFCbGEsRUFBRzZOLEVBQVEsS0FBSyxDQUFDLEVBQzdEcU0sR0FBcUJwd0IsRUFBUStqQixFQUFRLEtBQUssQ0FDckQsQ0FDQSxPQUFJQSxFQUFRLFFBQVUsT0FDWEEsRUFFSmxrQixFQUFJLFVBQVUsS0FBSyxJQUFJa2tCLEVBQVM1ZixDQUFHLENBQzlDLENBQ0osQ0FBQyxFQUNZbXNCLEdBQWtDNU0sRUFBa0Isb0JBQXFCLENBQUM3SSxFQUFNaGIsSUFBUSxDQUVqR3d3QixHQUFhLEtBQUt4VixFQUFNaGIsQ0FBRyxFQUUzQjZtQixFQUFnQjdMLEVBQUssS0FBTSxTQUFVLElBQU1oYixFQUFJLFVBQVUsS0FBSyxNQUFNLEVBQ3BFNm1CLEVBQWdCN0wsRUFBSyxLQUFNLFVBQVcsSUFBTWhiLEVBQUksVUFBVSxLQUFLLE9BQU8sRUFFdEVnYixFQUFLLEtBQUssTUFBUSxDQUFDa0osRUFBUzVmLElBQ2pCdEUsRUFBSSxVQUFVLEtBQUssSUFBSWtrQixFQUFTNWYsQ0FBRyxDQUVsRCxDQUFDLEVBQ1lvc0IsR0FBNkI3TSxFQUFrQixlQUFnQixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDdkZtbUIsR0FBUyxLQUFLbkwsRUFBTWhiLENBQUcsRUFDdkI2bUIsRUFBZ0I3TCxFQUFLLEtBQU0sUUFBUyxJQUFNaGIsRUFBSSxVQUFVLEtBQUssS0FBSyxFQUNsRTZtQixFQUFnQjdMLEVBQUssS0FBTSxTQUFVLElBQU1oYixFQUFJLFVBQVUsS0FBSyxNQUFNLEVBQ3BFNm1CLEVBQWdCN0wsRUFBSyxLQUFNLFVBQVcsSUFBTSxDQUN4QyxNQUFNeFksRUFBVXhDLEVBQUksVUFBVSxLQUFLLFFBQ25DLE9BQU93QyxFQUFVLElBQUksT0FBTyxLQUFLeXJCLEdBQWdCenJCLEVBQVEsTUFBTSxDQUFDLFNBQVMsRUFBSSxNQUNqRixDQUFDLEVBQ0Rxa0IsRUFBZ0I3TCxFQUFLLEtBQU0sU0FBVSxJQUMxQmhiLEVBQUksVUFBVSxLQUFLLE9BQVMsSUFBSSxJQUFJLENBQUMsR0FBR0EsRUFBSSxVQUFVLEtBQUssT0FBUSxJQUFJLENBQUMsRUFBSSxNQUN0RixFQUNEZ2IsRUFBSyxLQUFLLE1BQVEsQ0FBQ2tKLEVBQVM1ZixJQUVwQjRmLEVBQVEsUUFBVSxLQUNYQSxFQUNKbGtCLEVBQUksVUFBVSxLQUFLLElBQUlra0IsRUFBUzVmLENBQUcsQ0FFbEQsQ0FBQyxFQUNZcXNCLEdBQTRCOU0sRUFBa0IsY0FBZSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDckZtbUIsR0FBUyxLQUFLbkwsRUFBTWhiLENBQUcsRUFFdkJnYixFQUFLLEtBQUssTUFBUSxXQUNsQjZMLEVBQWdCN0wsRUFBSyxLQUFNLFNBQVUsSUFBTWhiLEVBQUksVUFBVSxLQUFLLE1BQU0sRUFDcEVnYixFQUFLLEtBQUssTUFBUSxDQUFDa0osRUFBUzVmLElBQVEsQ0FDaEMsR0FBSUEsRUFBSSxZQUFjLFdBQ2xCLE9BQU90RSxFQUFJLFVBQVUsS0FBSyxJQUFJa2tCLEVBQVM1ZixDQUFHLEVBRzlDLEdBQUk0ZixFQUFRLFFBQVUsT0FDbEIsT0FBQUEsRUFBUSxNQUFRbGtCLEVBQUksYUFJYmtrQixFQUdYLE1BQU0vakIsRUFBU0gsRUFBSSxVQUFVLEtBQUssSUFBSWtrQixFQUFTNWYsQ0FBRyxFQUNsRCxPQUFJbkUsYUFBa0IsUUFDWEEsRUFBTyxLQUFNQSxHQUFXeXdCLEdBQW9CendCLEVBQVFILENBQUcsQ0FBQyxFQUU1RDR3QixHQUFvQnp3QixFQUFRSCxDQUFHLENBQzFDLENBQ0osQ0FBQyxFQUNELFNBQVM0d0IsR0FBb0IxTSxFQUFTbGtCLEVBQUssQ0FDdkMsT0FBSWtrQixFQUFRLFFBQVUsU0FDbEJBLEVBQVEsTUFBUWxrQixFQUFJLGNBRWpCa2tCLENBQ1gsQ0FDTyxNQUFNMk0sR0FBNkJoTixFQUFrQixlQUFnQixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDdkZtbUIsR0FBUyxLQUFLbkwsRUFBTWhiLENBQUcsRUFDdkJnYixFQUFLLEtBQUssTUFBUSxXQUNsQjZMLEVBQWdCN0wsRUFBSyxLQUFNLFNBQVUsSUFBTWhiLEVBQUksVUFBVSxLQUFLLE1BQU0sRUFDcEVnYixFQUFLLEtBQUssTUFBUSxDQUFDa0osRUFBUzVmLEtBQ3BCQSxFQUFJLFlBQWMsWUFJbEI0ZixFQUFRLFFBQVUsU0FDbEJBLEVBQVEsTUFBUWxrQixFQUFJLGNBRWpCQSxFQUFJLFVBQVUsS0FBSyxJQUFJa2tCLEVBQVM1ZixDQUFHLEVBRWxELENBQUMsRUFDWXdzQixHQUFnQ2pOLEVBQWtCLGtCQUFtQixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDN0ZtbUIsR0FBUyxLQUFLbkwsRUFBTWhiLENBQUcsRUFDdkI2bUIsRUFBZ0I3TCxFQUFLLEtBQU0sU0FBVSxJQUFNLENBQ3ZDLE1BQU1oYyxFQUFJZ0IsRUFBSSxVQUFVLEtBQUssT0FDN0IsT0FBT2hCLEVBQUksSUFBSSxJQUFJLENBQUMsR0FBR0EsQ0FBQyxFQUFFLE9BQVF3QyxHQUFNQSxJQUFNLE1BQVMsQ0FBQyxFQUFJLE1BQ2hFLENBQUMsRUFDRHdaLEVBQUssS0FBSyxNQUFRLENBQUNrSixFQUFTNWYsSUFBUSxDQUNoQyxNQUFNbkUsRUFBU0gsRUFBSSxVQUFVLEtBQUssSUFBSWtrQixFQUFTNWYsQ0FBRyxFQUNsRCxPQUFJbkUsYUFBa0IsUUFDWEEsRUFBTyxLQUFNQSxHQUFXNHdCLEdBQXdCNXdCLEVBQVE2YSxDQUFJLENBQUMsRUFFakUrVixHQUF3QjV3QixFQUFRNmEsQ0FBSSxDQUMvQyxDQUNKLENBQUMsRUFDRCxTQUFTK1YsR0FBd0I3TSxFQUFTbEosRUFBTSxDQUM1QyxNQUFJLENBQUNrSixFQUFRLE9BQU8sUUFBVUEsRUFBUSxRQUFVLFFBQzVDQSxFQUFRLE9BQU8sS0FBSyxDQUNoQixLQUFNLGVBQ04sU0FBVSxjQUNWLE1BQU9BLEVBQVEsTUFDZixLQUFBbEosQ0FDWixDQUFTLEVBRUVrSixDQUNYLENBa0JPLE1BQU04TSxHQUEwQm5OLEVBQWtCLFlBQWEsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ2pGbW1CLEdBQVMsS0FBS25MLEVBQU1oYixDQUFHLEVBQ3ZCNm1CLEVBQWdCN0wsRUFBSyxLQUFNLFFBQVMsSUFBTWhiLEVBQUksVUFBVSxLQUFLLEtBQUssRUFDbEU2bUIsRUFBZ0I3TCxFQUFLLEtBQU0sU0FBVSxJQUFNaGIsRUFBSSxVQUFVLEtBQUssTUFBTSxFQUNwRTZtQixFQUFnQjdMLEVBQUssS0FBTSxTQUFVLElBQU1oYixFQUFJLFVBQVUsS0FBSyxNQUFNLEVBQ3BFZ2IsRUFBSyxLQUFLLE1BQVEsQ0FBQ2tKLEVBQVM1ZixJQUFRLENBQ2hDLEdBQUlBLEVBQUksWUFBYyxXQUNsQixPQUFPdEUsRUFBSSxVQUFVLEtBQUssSUFBSWtrQixFQUFTNWYsQ0FBRyxFQUc5QyxNQUFNbkUsRUFBU0gsRUFBSSxVQUFVLEtBQUssSUFBSWtrQixFQUFTNWYsQ0FBRyxFQUNsRCxPQUFJbkUsYUFBa0IsUUFDWEEsRUFBTyxLQUFNQSxJQUNoQitqQixFQUFRLE1BQVEvakIsRUFBTyxNQUNuQkEsRUFBTyxPQUFPLFNBQ2QrakIsRUFBUSxNQUFRbGtCLEVBQUksV0FBVyxDQUMzQixHQUFHa2tCLEVBQ0gsTUFBTyxDQUNILE9BQVEvakIsRUFBTyxPQUFPLElBQUtnZixHQUFRcUIsR0FBbUJyQixFQUFLN2EsRUFBS21jLEdBQVcsQ0FBRSxDQUFDLENBQzFHLEVBQ3dCLE1BQU95RCxFQUFRLEtBQ3ZDLENBQXFCLEVBQ0RBLEVBQVEsT0FBUyxDQUFBLEdBRWRBLEVBQ1YsR0FFTEEsRUFBUSxNQUFRL2pCLEVBQU8sTUFDbkJBLEVBQU8sT0FBTyxTQUNkK2pCLEVBQVEsTUFBUWxrQixFQUFJLFdBQVcsQ0FDM0IsR0FBR2trQixFQUNILE1BQU8sQ0FDSCxPQUFRL2pCLEVBQU8sT0FBTyxJQUFLZ2YsR0FBUXFCLEdBQW1CckIsRUFBSzdhLEVBQUttYyxHQUFXLENBQUUsQ0FBQyxDQUNsRyxFQUNnQixNQUFPeUQsRUFBUSxLQUMvQixDQUFhLEVBQ0RBLEVBQVEsT0FBUyxDQUFBLEdBRWRBLEVBQ1gsQ0FDSixDQUFDLEVBZ0JZK00sR0FBeUJwTixFQUFrQixXQUFZLENBQUM3SSxFQUFNaGIsSUFBUSxDQUMvRW1tQixHQUFTLEtBQUtuTCxFQUFNaGIsQ0FBRyxFQUN2QjZtQixFQUFnQjdMLEVBQUssS0FBTSxTQUFVLElBQU1oYixFQUFJLEdBQUcsS0FBSyxNQUFNLEVBQzdENm1CLEVBQWdCN0wsRUFBSyxLQUFNLFFBQVMsSUFBTWhiLEVBQUksR0FBRyxLQUFLLEtBQUssRUFDM0Q2bUIsRUFBZ0I3TCxFQUFLLEtBQU0sU0FBVSxJQUFNaGIsRUFBSSxJQUFJLEtBQUssTUFBTSxFQUM5RDZtQixFQUFnQjdMLEVBQUssS0FBTSxhQUFjLElBQU1oYixFQUFJLEdBQUcsS0FBSyxVQUFVLEVBQ3JFZ2IsRUFBSyxLQUFLLE1BQVEsQ0FBQ2tKLEVBQVM1ZixJQUFRLENBQ2hDLEdBQUlBLEVBQUksWUFBYyxXQUFZLENBQzlCLE1BQU1vTixFQUFRMVIsRUFBSSxJQUFJLEtBQUssSUFBSWtrQixFQUFTNWYsQ0FBRyxFQUMzQyxPQUFJb04sYUFBaUIsUUFDVkEsRUFBTSxLQUFNQSxHQUFVd2YsR0FBaUJ4ZixFQUFPMVIsRUFBSSxHQUFJc0UsQ0FBRyxDQUFDLEVBRTlENHNCLEdBQWlCeGYsRUFBTzFSLEVBQUksR0FBSXNFLENBQUcsQ0FDOUMsQ0FDQSxNQUFNbU4sRUFBT3pSLEVBQUksR0FBRyxLQUFLLElBQUlra0IsRUFBUzVmLENBQUcsRUFDekMsT0FBSW1OLGFBQWdCLFFBQ1RBLEVBQUssS0FBTUEsR0FBU3lmLEdBQWlCemYsRUFBTXpSLEVBQUksSUFBS3NFLENBQUcsQ0FBQyxFQUU1RDRzQixHQUFpQnpmLEVBQU16UixFQUFJLElBQUtzRSxDQUFHLENBQzlDLENBQ0osQ0FBQyxFQUNELFNBQVM0c0IsR0FBaUJ6ZixFQUFNZixFQUFNcE0sRUFBSyxDQUN2QyxPQUFJbU4sRUFBSyxPQUFPLFFBRVpBLEVBQUssUUFBVSxHQUNSQSxHQUVKZixFQUFLLEtBQUssSUFBSSxDQUFFLE1BQU9lLEVBQUssTUFBTyxPQUFRQSxFQUFLLE1BQU0sRUFBSW5OLENBQUcsQ0FDeEUsQ0F1RE8sTUFBTTZzQixHQUE2QnROLEVBQWtCLGVBQWdCLENBQUM3SSxFQUFNaGIsSUFBUSxDQUN2Rm1tQixHQUFTLEtBQUtuTCxFQUFNaGIsQ0FBRyxFQUN2QjZtQixFQUFnQjdMLEVBQUssS0FBTSxhQUFjLElBQU1oYixFQUFJLFVBQVUsS0FBSyxVQUFVLEVBQzVFNm1CLEVBQWdCN0wsRUFBSyxLQUFNLFNBQVUsSUFBTWhiLEVBQUksVUFBVSxLQUFLLE1BQU0sRUFDcEU2bUIsRUFBZ0I3TCxFQUFLLEtBQU0sUUFBUyxJQUFBLFNBQU0sT0FBQTNhLEdBQUFOLEVBQUFDLEVBQUksWUFBSixZQUFBRCxFQUFlLE9BQWYsWUFBQU0sRUFBcUIsTUFBSyxFQUNwRXdtQixFQUFnQjdMLEVBQUssS0FBTSxTQUFVLElBQUEsU0FBTSxPQUFBM2EsR0FBQU4sRUFBQUMsRUFBSSxZQUFKLFlBQUFELEVBQWUsT0FBZixZQUFBTSxFQUFxQixPQUFNLEVBQ3RFMmEsRUFBSyxLQUFLLE1BQVEsQ0FBQ2tKLEVBQVM1ZixJQUFRLENBQ2hDLEdBQUlBLEVBQUksWUFBYyxXQUNsQixPQUFPdEUsRUFBSSxVQUFVLEtBQUssSUFBSWtrQixFQUFTNWYsQ0FBRyxFQUU5QyxNQUFNbkUsRUFBU0gsRUFBSSxVQUFVLEtBQUssSUFBSWtrQixFQUFTNWYsQ0FBRyxFQUNsRCxPQUFJbkUsYUFBa0IsUUFDWEEsRUFBTyxLQUFLaXhCLEVBQW9CLEVBRXBDQSxHQUFxQmp4QixDQUFNLENBQ3RDLENBQ0osQ0FBQyxFQUNELFNBQVNpeEIsR0FBcUJsTixFQUFTLENBQ25DLE9BQUFBLEVBQVEsTUFBUSxPQUFPLE9BQU9BLEVBQVEsS0FBSyxFQUNwQ0EsQ0FDWCxDQXVJTyxNQUFNbU4sR0FBeUJ4TixFQUFrQixXQUFZLENBQUM3SSxFQUFNaGIsSUFBUSxDQUMvRW1tQixHQUFTLEtBQUtuTCxFQUFNaGIsQ0FBRyxFQVF2QjZtQixFQUFnQjdMLEVBQUssS0FBTSxZQUFhLElBQU1oYixFQUFJLFFBQVEsRUFDMUQ2bUIsRUFBZ0I3TCxFQUFLLEtBQU0sVUFBVyxJQUFBLFNBQU0sT0FBQTNhLEdBQUFOLEVBQUFpYixFQUFLLEtBQUssWUFBVixZQUFBamIsRUFBcUIsT0FBckIsWUFBQU0sRUFBMkIsUUFBTyxFQUM5RXdtQixFQUFnQjdMLEVBQUssS0FBTSxhQUFjLElBQUEsU0FBTSxPQUFBM2EsR0FBQU4sRUFBQWliLEVBQUssS0FBSyxZQUFWLFlBQUFqYixFQUFxQixPQUFyQixZQUFBTSxFQUEyQixXQUFVLEVBQ3BGd21CLEVBQWdCN0wsRUFBSyxLQUFNLFFBQVMsSUFBQSxTQUFNLFFBQUEzYSxHQUFBTixFQUFBaWIsRUFBSyxLQUFLLFlBQVYsWUFBQWpiLEVBQXFCLE9BQXJCLFlBQUFNLEVBQTJCLFFBQVMsT0FBUyxFQUN2RndtQixFQUFnQjdMLEVBQUssS0FBTSxTQUFVLElBQUEsU0FBTSxRQUFBM2EsR0FBQU4sRUFBQWliLEVBQUssS0FBSyxZQUFWLFlBQUFqYixFQUFxQixPQUFyQixZQUFBTSxFQUEyQixTQUFVLE9BQVMsRUFDekYyYSxFQUFLLEtBQUssTUFBUSxDQUFDa0osRUFBUzVmLElBQ1YwVyxFQUFLLEtBQUssVUFDWCxLQUFLLElBQUlrSixFQUFTNWYsQ0FBRyxDQUUxQyxDQUFDLEVBQ1lndEIsR0FBMkJ6TixFQUFrQixhQUFjLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNuRnV4QixHQUFpQixLQUFLdlcsRUFBTWhiLENBQUcsRUFDL0JtbUIsR0FBUyxLQUFLbkwsRUFBTWhiLENBQUcsRUFDdkJnYixFQUFLLEtBQUssTUFBUSxDQUFDa0osRUFBU2hsQixJQUNqQmdsQixFQUVYbEosRUFBSyxLQUFLLE1BQVNrSixHQUFZLENBQzNCLE1BQU1sZ0IsRUFBUWtnQixFQUFRLE1BQ2hCN04sRUFBSXJXLEVBQUksR0FBR2dFLENBQUssRUFDdEIsR0FBSXFTLGFBQWEsUUFDYixPQUFPQSxFQUFFLEtBQU1BLEdBQU1tYixHQUFtQm5iLEVBQUc2TixFQUFTbGdCLEVBQU9nWCxDQUFJLENBQUMsRUFFcEV3VyxHQUFtQm5iLEVBQUc2TixFQUFTbGdCLEVBQU9nWCxDQUFJLENBRTlDLENBQ0osQ0FBQyxFQUNELFNBQVN3VyxHQUFtQnJ4QixFQUFRK2pCLEVBQVNsZ0IsRUFBT2dYLEVBQU0sQ0FDdEQsR0FBSSxDQUFDN2EsRUFBUSxDQUNULE1BQU1zeEIsRUFBTyxDQUNULEtBQU0sU0FDTixNQUFBenRCLEVBQ0EsS0FBQWdYLEVBQ0EsS0FBTSxDQUFDLEdBQUlBLEVBQUssS0FBSyxJQUFJLE1BQVEsQ0FBQSxDQUFHLEVBQ3BDLFNBQVUsQ0FBQ0EsRUFBSyxLQUFLLElBQUksS0FFckMsRUFDWUEsRUFBSyxLQUFLLElBQUksU0FDZHlXLEVBQUssT0FBU3pXLEVBQUssS0FBSyxJQUFJLFFBQ2hDa0osRUFBUSxPQUFPLEtBQUt3TixHQUFXRCxDQUFJLENBQUMsQ0FDeEMsQ0FDSixDQzlpRUEsSUFBSTF4QixHQUdHLE1BQU1MLEVBQWEsQ0FDdEIsYUFBYyxDQUNWLEtBQUssS0FBTyxJQUFJLFFBQ2hCLEtBQUssT0FBUyxJQUFJLEdBQ3RCLENBQ0EsSUFBSU4sS0FBV0MsRUFBTyxDQUNsQixNQUFNQyxFQUFPRCxFQUFNLENBQUMsRUFDcEIsWUFBSyxLQUFLLElBQUlELEVBQVFFLENBQUksRUFDdEJBLEdBQVEsT0FBT0EsR0FBUyxVQUFZLE9BQVFBLEdBQzVDLEtBQUssT0FBTyxJQUFJQSxFQUFLLEdBQUlGLENBQU0sRUFFNUIsSUFDWCxDQUNBLE9BQVEsQ0FDSixZQUFLLEtBQU8sSUFBSSxRQUNoQixLQUFLLE9BQVMsSUFBSSxJQUNYLElBQ1gsQ0FDQSxPQUFPQSxFQUFRLENBQ1gsTUFBTUUsRUFBTyxLQUFLLEtBQUssSUFBSUYsQ0FBTSxFQUNqQyxPQUFJRSxHQUFRLE9BQU9BLEdBQVMsVUFBWSxPQUFRQSxHQUM1QyxLQUFLLE9BQU8sT0FBT0EsRUFBSyxFQUFFLEVBRTlCLEtBQUssS0FBSyxPQUFPRixDQUFNLEVBQ2hCLElBQ1gsQ0FDQSxJQUFJQSxFQUFRLENBR1IsTUFBTUcsRUFBSUgsRUFBTyxLQUFLLE9BQ3RCLEdBQUlHLEVBQUcsQ0FDSCxNQUFNQyxFQUFLLENBQUUsR0FBSSxLQUFLLElBQUlELENBQUMsR0FBSyxDQUFBLENBQUcsRUFDbkMsT0FBT0MsRUFBRyxHQUNWLE1BQU1pd0IsRUFBSSxDQUFFLEdBQUdqd0IsRUFBSSxHQUFHLEtBQUssS0FBSyxJQUFJSixDQUFNLENBQUMsRUFDM0MsT0FBTyxPQUFPLEtBQUtxd0IsQ0FBQyxFQUFFLE9BQVNBLEVBQUksTUFDdkMsQ0FDQSxPQUFPLEtBQUssS0FBSyxJQUFJcndCLENBQU0sQ0FDL0IsQ0FDQSxJQUFJQSxFQUFRLENBQ1IsT0FBTyxLQUFLLEtBQUssSUFBSUEsQ0FBTSxDQUMvQixDQUNKLENBRU8sU0FBU0ssSUFBVyxDQUN2QixPQUFPLElBQUlDLEVBQ2YsRUFDQ0ssR0FBSyxZQUFZLHVCQUF5QkEsR0FBRyxxQkFBdUJOLEdBQVEsR0FDdEUsTUFBTUUsR0FBaUIsV0FBVyxxQkM3Q2xDLFNBQVNneUIsR0FBUTlTLEVBQU9oZixFQUFRLENBQ25DLE9BQU8sSUFBSWdmLEVBQU0sQ0FDYixLQUFNLFNBQ04sR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBVU8sU0FBU2d5QixHQUFPaFQsRUFBT2hmLEVBQVEsQ0FDbEMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLFFBQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU2l5QixHQUFNalQsRUFBT2hmLEVBQVEsQ0FDakMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLE9BQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU2t5QixHQUFNbFQsRUFBT2hmLEVBQVEsQ0FDakMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLE9BQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU215QixHQUFRblQsRUFBT2hmLEVBQVEsQ0FDbkMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLE9BQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsUUFBUyxLQUNULEdBQUcrUyxFQUFxQi94QixDQUFNLENBQ3RDLENBQUssQ0FDTCxDQUVPLFNBQVNveUIsR0FBUXBULEVBQU9oZixFQUFRLENBQ25DLE9BQU8sSUFBSWdmLEVBQU0sQ0FDYixLQUFNLFNBQ04sT0FBUSxPQUNSLE1BQU8sZ0JBQ1AsTUFBTyxHQUNQLFFBQVMsS0FDVCxHQUFHK1MsRUFBcUIveEIsQ0FBTSxDQUN0QyxDQUFLLENBQ0wsQ0FFTyxTQUFTcXlCLEdBQVFyVCxFQUFPaGYsRUFBUSxDQUNuQyxPQUFPLElBQUlnZixFQUFNLENBQ2IsS0FBTSxTQUNOLE9BQVEsT0FDUixNQUFPLGdCQUNQLE1BQU8sR0FDUCxRQUFTLEtBQ1QsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU3N5QixHQUFLdFQsRUFBT2hmLEVBQVEsQ0FDaEMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLE1BQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU3dpQixHQUFPeEQsRUFBT2hmLEVBQVEsQ0FDbEMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLFFBQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU3V5QixHQUFRdlQsRUFBT2hmLEVBQVEsQ0FDbkMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLFNBQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU3d5QixHQUFNeFQsRUFBT2hmLEVBQVEsQ0FDakMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLE9BQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU3l5QixHQUFPelQsRUFBT2hmLEVBQVEsQ0FDbEMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLFFBQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBUzB5QixHQUFNMVQsRUFBT2hmLEVBQVEsQ0FDakMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLE9BQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBUzJ5QixHQUFLM1QsRUFBT2hmLEVBQVEsQ0FDaEMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLE1BQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBUzR5QixHQUFPNVQsRUFBT2hmLEVBQVEsQ0FDbEMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLFFBQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBUzZ5QixHQUFNN1QsRUFBT2hmLEVBQVEsQ0FDakMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLE9BQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBUzh5QixHQUFNOVQsRUFBT2hmLEVBQVEsQ0FDakMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLE9BQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBWU8sU0FBUyt5QixHQUFRL1QsRUFBT2hmLEVBQVEsQ0FDbkMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLFNBQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU2d6QixHQUFRaFUsRUFBT2hmLEVBQVEsQ0FDbkMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLFNBQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU2l6QixHQUFRalUsRUFBT2hmLEVBQVEsQ0FDbkMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLFNBQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU2t6QixHQUFXbFUsRUFBT2hmLEVBQVEsQ0FDdEMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLFlBQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU216QixHQUFNblUsRUFBT2hmLEVBQVEsQ0FDakMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLE9BQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU296QixHQUFLcFUsRUFBT2hmLEVBQVEsQ0FDaEMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLE1BQ1IsTUFBTyxnQkFDUCxNQUFPLEdBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBU08sU0FBU3F6QixHQUFhclUsRUFBT2hmLEVBQVEsQ0FDeEMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLFdBQ1IsTUFBTyxnQkFDUCxPQUFRLEdBQ1IsTUFBTyxHQUNQLFVBQVcsS0FDWCxHQUFHK1MsRUFBcUIveEIsQ0FBTSxDQUN0QyxDQUFLLENBQ0wsQ0FFTyxTQUFTc3pCLEdBQVN0VSxFQUFPaGYsRUFBUSxDQUNwQyxPQUFPLElBQUlnZixFQUFNLENBQ2IsS0FBTSxTQUNOLE9BQVEsT0FDUixNQUFPLGdCQUNQLEdBQUcrUyxFQUFxQi94QixDQUFNLENBQ3RDLENBQUssQ0FDTCxDQUVPLFNBQVN1ekIsR0FBU3ZVLEVBQU9oZixFQUFRLENBQ3BDLE9BQU8sSUFBSWdmLEVBQU0sQ0FDYixLQUFNLFNBQ04sT0FBUSxPQUNSLE1BQU8sZ0JBQ1AsVUFBVyxLQUNYLEdBQUcrUyxFQUFxQi94QixDQUFNLENBQ3RDLENBQUssQ0FDTCxDQUVPLFNBQVN3ekIsR0FBYXhVLEVBQU9oZixFQUFRLENBQ3hDLE9BQU8sSUFBSWdmLEVBQU0sQ0FDYixLQUFNLFNBQ04sT0FBUSxXQUNSLE1BQU8sZ0JBQ1AsR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU3l6QixHQUFRelUsRUFBT2hmLEVBQVEsQ0FDbkMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sU0FDTixPQUFRLENBQUEsRUFDUixHQUFHK1MsRUFBcUIveEIsQ0FBTSxDQUN0QyxDQUFLLENBQ0wsQ0FXTyxTQUFTMHpCLEdBQUsxVSxFQUFPaGYsRUFBUSxDQUNoQyxPQUFPLElBQUlnZixFQUFNLENBQ2IsS0FBTSxTQUNOLE1BQU8sZ0JBQ1AsTUFBTyxHQUNQLE9BQVEsVUFDUixHQUFHK1MsRUFBcUIveEIsQ0FBTSxDQUN0QyxDQUFLLENBQ0wsQ0EwQ08sU0FBUzJ6QixHQUFTM1UsRUFBT2hmLEVBQVEsQ0FDcEMsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sVUFDTixHQUFHK1MsRUFBcUIveEIsQ0FBTSxDQUN0QyxDQUFLLENBQ0wsQ0FrRU8sU0FBUzR6QixHQUFLNVUsRUFBTyxDQUN4QixPQUFPLElBQUlBLEVBQU0sQ0FDYixLQUFNLEtBQ2QsQ0FBSyxDQUNMLENBRU8sU0FBUzZVLEdBQVM3VSxFQUFPLENBQzVCLE9BQU8sSUFBSUEsRUFBTSxDQUNiLEtBQU0sU0FDZCxDQUFLLENBQ0wsQ0FFTyxTQUFTOFUsR0FBTzlVLEVBQU9oZixFQUFRLENBQ2xDLE9BQU8sSUFBSWdmLEVBQU0sQ0FDYixLQUFNLFFBQ04sR0FBRytTLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBK0JPLFNBQVMrekIsR0FBSS90QixFQUFPaEcsRUFBUSxDQUMvQixPQUFPLElBQUlnMEIsR0FBeUIsQ0FDaEMsTUFBTyxZQUNQLEdBQUdqQyxFQUFxQi94QixDQUFNLEVBQzlCLE1BQUFnRyxFQUNBLFVBQVcsRUFDbkIsQ0FBSyxDQUNMLENBRU8sU0FBU2l1QixHQUFLanVCLEVBQU9oRyxFQUFRLENBQ2hDLE9BQU8sSUFBSWcwQixHQUF5QixDQUNoQyxNQUFPLFlBQ1AsR0FBR2pDLEVBQXFCL3hCLENBQU0sRUFDOUIsTUFBQWdHLEVBQ0EsVUFBVyxFQUNuQixDQUFLLENBQ0wsQ0FLTyxTQUFTa3VCLEdBQUlsdUIsRUFBT2hHLEVBQVEsQ0FDL0IsT0FBTyxJQUFJbTBCLEdBQTRCLENBQ25DLE1BQU8sZUFDUCxHQUFHcEMsRUFBcUIveEIsQ0FBTSxFQUM5QixNQUFBZ0csRUFDQSxVQUFXLEVBQ25CLENBQUssQ0FDTCxDQUVPLFNBQVNvdUIsR0FBS3B1QixFQUFPaEcsRUFBUSxDQUNoQyxPQUFPLElBQUltMEIsR0FBNEIsQ0FDbkMsTUFBTyxlQUNQLEdBQUdwQyxFQUFxQi94QixDQUFNLEVBQzlCLE1BQUFnRyxFQUNBLFVBQVcsRUFDbkIsQ0FBSyxDQUNMLENBd0JPLFNBQVNxdUIsR0FBWXJ1QixFQUFPaEcsRUFBUSxDQUN2QyxPQUFPLElBQUlzMEIsR0FBMkIsQ0FDbEMsTUFBTyxjQUNQLEdBQUd2QyxFQUFxQi94QixDQUFNLEVBQzlCLE1BQUFnRyxDQUNSLENBQUssQ0FDTCxDQTBCTyxTQUFTdXVCLEdBQVcxekIsRUFBU2IsRUFBUSxDQU14QyxPQUxXLElBQUl3MEIsR0FBMEIsQ0FDckMsTUFBTyxhQUNQLEdBQUd6QyxFQUFxQi94QixDQUFNLEVBQzlCLFFBQUFhLENBQ1IsQ0FBSyxDQUVMLENBRU8sU0FBUzR6QixHQUFXN3pCLEVBQVNaLEVBQVEsQ0FDeEMsT0FBTyxJQUFJMDBCLEdBQTBCLENBQ2pDLE1BQU8sYUFDUCxHQUFHM0MsRUFBcUIveEIsQ0FBTSxFQUM5QixRQUFBWSxDQUNSLENBQUssQ0FDTCxDQUVPLFNBQVMrekIsR0FBUXpQLEVBQVFsbEIsRUFBUSxDQUNwQyxPQUFPLElBQUk0MEIsR0FBNkIsQ0FDcEMsTUFBTyxnQkFDUCxHQUFHN0MsRUFBcUIveEIsQ0FBTSxFQUM5QixPQUFBa2xCLENBQ1IsQ0FBSyxDQUNMLENBRU8sU0FBUzJQLEdBQU9seUIsRUFBUzNDLEVBQVEsQ0FDcEMsT0FBTyxJQUFJODBCLEdBQXNCLENBQzdCLE1BQU8sZ0JBQ1AsT0FBUSxRQUNSLEdBQUcvQyxFQUFxQi94QixDQUFNLEVBQzlCLFFBQUEyQyxDQUNSLENBQUssQ0FDTCxDQUVPLFNBQVNveUIsR0FBVy8wQixFQUFRLENBQy9CLE9BQU8sSUFBSWcxQixHQUEwQixDQUNqQyxNQUFPLGdCQUNQLE9BQVEsWUFDUixHQUFHakQsRUFBcUIveEIsQ0FBTSxDQUN0QyxDQUFLLENBQ0wsQ0FFTyxTQUFTaTFCLEdBQVdqMUIsRUFBUSxDQUMvQixPQUFPLElBQUlrMUIsR0FBMEIsQ0FDakMsTUFBTyxnQkFDUCxPQUFRLFlBQ1IsR0FBR25ELEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBRU8sU0FBU20xQixHQUFVQyxFQUFVcDFCLEVBQVEsQ0FDeEMsT0FBTyxJQUFJcTFCLEdBQXlCLENBQ2hDLE1BQU8sZ0JBQ1AsT0FBUSxXQUNSLEdBQUd0RCxFQUFxQi94QixDQUFNLEVBQzlCLFNBQUFvMUIsQ0FDUixDQUFLLENBQ0wsQ0FFTyxTQUFTRSxHQUFZeEwsRUFBUTlwQixFQUFRLENBQ3hDLE9BQU8sSUFBSXUxQixHQUEyQixDQUNsQyxNQUFPLGdCQUNQLE9BQVEsY0FDUixHQUFHeEQsRUFBcUIveEIsQ0FBTSxFQUM5QixPQUFBOHBCLENBQ1IsQ0FBSyxDQUNMLENBRU8sU0FBUzBMLEdBQVVDLEVBQVF6MUIsRUFBUSxDQUN0QyxPQUFPLElBQUkwMUIsR0FBeUIsQ0FDaEMsTUFBTyxnQkFDUCxPQUFRLFlBQ1IsR0FBRzNELEVBQXFCL3hCLENBQU0sRUFDOUIsT0FBQXkxQixDQUNSLENBQUssQ0FDTCxDQW1CTyxTQUFTRSxHQUFXQyxFQUFJLENBQzNCLE9BQU8sSUFBSUMsR0FBMEIsQ0FDakMsTUFBTyxZQUNQLEdBQUFELENBQ1IsQ0FBSyxDQUNMLENBR08sU0FBU0UsR0FBV0MsRUFBTSxDQUM3QixPQUFPSixHQUFZeHhCLEdBQVVBLEVBQU0sVUFBVTR4QixDQUFJLENBQUMsQ0FDdEQsQ0FHTyxTQUFTQyxJQUFRLENBQ3BCLE9BQU9MLEdBQVl4eEIsR0FBVUEsRUFBTSxLQUFJLENBQUUsQ0FDN0MsQ0FHTyxTQUFTOHhCLElBQWUsQ0FDM0IsT0FBT04sR0FBWXh4QixHQUFVQSxFQUFNLFlBQVcsQ0FBRSxDQUNwRCxDQUdPLFNBQVMreEIsSUFBZSxDQUMzQixPQUFPUCxHQUFZeHhCLEdBQVVBLEVBQU0sWUFBVyxDQUFFLENBQ3BELENBR08sU0FBU2d5QixJQUFXLENBQ3ZCLE9BQU9SLEdBQVl4eEIsR0FBVWl5QixHQUFhanlCLENBQUssQ0FBQyxDQUNwRCxDQUVPLFNBQVNreUIsR0FBT3JYLEVBQU9zWCxFQUFTdDJCLEVBQVEsQ0FDM0MsT0FBTyxJQUFJZ2YsRUFBTSxDQUNiLEtBQU0sUUFDTixRQUFBc1gsRUFJQSxHQUFHdkUsRUFBcUIveEIsQ0FBTSxDQUN0QyxDQUFLLENBQ0wsQ0F3T08sU0FBU3UyQixHQUFRdlgsRUFBT2xnQixFQUFJbUIsRUFBUyxDQU94QyxPQU5lLElBQUkrZSxFQUFNLENBQ3JCLEtBQU0sU0FDTixNQUFPLFNBQ1AsR0FBSWxnQixFQUNKLEdBQUdpekIsRUFBcUI5eEIsQ0FBTyxDQUN2QyxDQUFLLENBRUwsQ0FFTyxTQUFTdTJCLEdBQWExM0IsRUFBSSxDQUM3QixNQUFNeW5CLEVBQUtrUSxHQUFRcFMsSUFDZkEsRUFBUSxTQUFZMUUsR0FBVSxDQUMxQixHQUFJLE9BQU9BLEdBQVUsU0FDakIwRSxFQUFRLE9BQU8sS0FBS3dOLEdBQVdsUyxFQUFPMEUsRUFBUSxNQUFPa0MsRUFBRyxLQUFLLEdBQUcsQ0FBQyxNQUVoRSxDQUVELE1BQU1tUSxFQUFTL1csRUFDWCtXLEVBQU8sUUFDUEEsRUFBTyxTQUFXLElBQ3RCQSxFQUFPLE9BQVNBLEVBQU8sS0FBTyxVQUM5QkEsRUFBTyxRQUFVQSxFQUFPLE1BQVFyUyxFQUFRLE9BQ3hDcVMsRUFBTyxPQUFTQSxFQUFPLEtBQU9uUSxHQUM5Qm1RLEVBQU8sV0FBYUEsRUFBTyxTQUFXLENBQUNuUSxFQUFHLEtBQUssSUFBSSxPQUNuRGxDLEVBQVEsT0FBTyxLQUFLd04sR0FBVzZFLENBQU0sQ0FBQyxDQUMxQyxDQUNKLEVBQ081M0IsRUFBR3VsQixFQUFRLE1BQU9BLENBQU8sRUFDbkMsRUFDRCxPQUFPa0MsQ0FDWCxDQUVPLFNBQVNrUSxHQUFPMzNCLEVBQUlrQixFQUFRLENBQy9CLE1BQU11bUIsRUFBSyxJQUFJbUwsR0FBaUIsQ0FDNUIsTUFBTyxTQUNQLEdBQUdLLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxFQUNELE9BQUF1bUIsRUFBRyxLQUFLLE1BQVF6bkIsRUFDVHluQixDQUNYLENDajlCTyxTQUFTb1EsR0FBa0IzMkIsRUFBUSxDQUV0QyxJQUFJNmMsR0FBUzdjLEdBQUEsWUFBQUEsRUFBUSxTQUFVLGdCQUMvQixPQUFJNmMsSUFBVyxZQUNYQSxFQUFTLFlBQ1RBLElBQVcsWUFDWEEsRUFBUyxZQUNOLENBQ0gsV0FBWTdjLEVBQU8sWUFBYyxDQUFBLEVBQ2pDLGtCQUFrQkEsR0FBQSxZQUFBQSxFQUFRLFdBQVlGLEdBQ3RDLE9BQUErYyxFQUNBLGlCQUFpQjdjLEdBQUEsWUFBQUEsRUFBUSxrQkFBbUIsUUFDNUMsVUFBVUEsR0FBQSxZQUFBQSxFQUFRLFlBQWEsSUFBTSxDQUFFLEdBQ3ZDLElBQUlBLEdBQUEsWUFBQUEsRUFBUSxLQUFNLFNBQ2xCLFFBQVMsRUFDVCxLQUFNLElBQUksSUFDVixRQUFRQSxHQUFBLFlBQUFBLEVBQVEsU0FBVSxNQUMxQixRQUFRQSxHQUFBLFlBQUFBLEVBQVEsU0FBVSxTQUMxQixVQUFVQSxHQUFBLFlBQUFBLEVBQVEsV0FBWSxNQUN0QyxDQUNBLENBQ08sU0FBUzQyQixHQUFRcjNCLEVBQVFrRixFQUFLeEUsRUFBVSxDQUFFLEtBQU0sQ0FBQSxFQUFJLFdBQVksQ0FBQSxHQUFNLFNBQ3pFLElBQUlDLEVBQ0osTUFBTUMsRUFBTVosRUFBTyxLQUFLLElBRWxCYyxFQUFPb0UsRUFBSSxLQUFLLElBQUlsRixDQUFNLEVBQ2hDLEdBQUljLEVBQ0EsT0FBQUEsRUFBSyxRQUVXSixFQUFRLFdBQVcsU0FBU1YsQ0FBTSxJQUU5Q2MsRUFBSyxNQUFRSixFQUFRLE1BRWxCSSxFQUFLLE9BR2hCLE1BQU1DLEVBQVMsQ0FBRSxPQUFRLENBQUEsRUFBSSxNQUFPLEVBQUcsTUFBTyxPQUFXLEtBQU1MLEVBQVEsSUFBSSxFQUMzRXdFLEVBQUksS0FBSyxJQUFJbEYsRUFBUWUsQ0FBTSxFQUUzQixNQUFNQyxHQUFpQkMsR0FBQU4sRUFBQVgsRUFBTyxNQUFLLGVBQVosWUFBQWlCLEVBQUEsS0FBQU4sR0FDdkIsR0FBSUssRUFDQUQsRUFBTyxPQUFTQyxNQUVmLENBQ0QsTUFBTVAsRUFBUyxDQUNYLEdBQUdDLEVBQ0gsV0FBWSxDQUFDLEdBQUdBLEVBQVEsV0FBWVYsQ0FBTSxFQUMxQyxLQUFNVSxFQUFRLElBQzFCLEVBQ1EsR0FBSVYsRUFBTyxLQUFLLGtCQUNaQSxFQUFPLEtBQUssa0JBQWtCa0YsRUFBS25FLEVBQU8sT0FBUU4sQ0FBTSxNQUV2RCxDQUNELE1BQU1VLEVBQVFKLEVBQU8sT0FDZnUyQixFQUFZcHlCLEVBQUksV0FBV3RFLEVBQUksSUFBSSxFQUN6QyxHQUFJLENBQUMwMkIsRUFDRCxNQUFNLElBQUksTUFBTSx1REFBdUQxMkIsRUFBSSxJQUFJLEVBQUUsRUFFckYwMkIsRUFBVXQzQixFQUFRa0YsRUFBSy9ELEVBQU9WLENBQU0sQ0FDeEMsQ0FDQSxNQUFNUyxFQUFTbEIsRUFBTyxLQUFLLE9BQ3ZCa0IsSUFFS0gsRUFBTyxNQUNSQSxFQUFPLElBQU1HLEdBQ2pCbTJCLEdBQVFuMkIsRUFBUWdFLEVBQUt6RSxDQUFNLEVBQzNCeUUsRUFBSSxLQUFLLElBQUloRSxDQUFNLEVBQUUsU0FBVyxHQUV4QyxDQUVBLE1BQU1oQixFQUFPZ0YsRUFBSSxpQkFBaUIsSUFBSWxGLENBQU0sRUFDNUMsT0FBSUUsR0FDQSxPQUFPLE9BQU9hLEVBQU8sT0FBUWIsQ0FBSSxFQUNqQ2dGLEVBQUksS0FBTyxTQUFXNUIsR0FBZXRELENBQU0sSUFFM0MsT0FBT2UsRUFBTyxPQUFPLFNBQ3JCLE9BQU9BLEVBQU8sT0FBTyxTQUdyQm1FLEVBQUksS0FBTyxTQUFXbkUsRUFBTyxPQUFPLGFBQ25DSixFQUFLSSxFQUFPLFFBQVEsVUFBWUosRUFBRyxRQUFVSSxFQUFPLE9BQU8sWUFDaEUsT0FBT0EsRUFBTyxPQUFPLFVBRUxtRSxFQUFJLEtBQUssSUFBSWxGLENBQU0sRUFDcEIsTUFDbkIsQ0FDTyxTQUFTdTNCLEdBQVlyeUIsRUFBS2xGLEVBRS9CLGFBRUUsTUFBTXVELEVBQU8yQixFQUFJLEtBQUssSUFBSWxGLENBQU0sRUFDaEMsR0FBSSxDQUFDdUQsRUFDRCxNQUFNLElBQUksTUFBTSwyQ0FBMkMsRUFFL0QsTUFBTWkwQixFQUFhLElBQUksSUFDdkIsVUFBVy96QixLQUFTeUIsRUFBSSxLQUFLLFFBQU8sRUFBSSxDQUNwQyxNQUFNckIsR0FBS2xELEVBQUF1RSxFQUFJLGlCQUFpQixJQUFJekIsRUFBTSxDQUFDLENBQUMsSUFBakMsWUFBQTlDLEVBQW9DLEdBQy9DLEdBQUlrRCxFQUFJLENBQ0osTUFBTXdQLEVBQVdta0IsRUFBVyxJQUFJM3pCLENBQUUsRUFDbEMsR0FBSXdQLEdBQVlBLElBQWE1UCxFQUFNLENBQUMsRUFDaEMsTUFBTSxJQUFJLE1BQU0sd0JBQXdCSSxDQUFFLG1IQUFtSCxFQUVqSzJ6QixFQUFXLElBQUkzekIsRUFBSUosRUFBTSxDQUFDLENBQUMsQ0FDL0IsQ0FDSixDQUdBLE1BQU1ELEVBQVdDLEdBQVUsT0FLdkIsTUFBTUMsRUFBY3dCLEVBQUksU0FBVyxnQkFBa0IsUUFBVSxjQUMvRCxHQUFJQSxFQUFJLFNBQVUsQ0FDZCxNQUFNdkIsR0FBYWhELEVBQUF1RSxFQUFJLFNBQVMsU0FBUyxJQUFJekIsRUFBTSxDQUFDLENBQUMsSUFBbEMsWUFBQTlDLEVBQXFDLEdBRWxEaUQsRUFBZXNCLEVBQUksU0FBUyxNQUFTckIsR0FBT0EsR0FDbEQsR0FBSUYsRUFDQSxNQUFPLENBQUUsSUFBS0MsRUFBYUQsQ0FBVSxDQUFDLEVBRzFDLE1BQU1FLEVBQUtKLEVBQU0sQ0FBQyxFQUFFLE9BQVNBLEVBQU0sQ0FBQyxFQUFFLE9BQU8sSUFBTSxTQUFTeUIsRUFBSSxTQUFTLEdBQ3pFLE9BQUF6QixFQUFNLENBQUMsRUFBRSxNQUFRSSxFQUNWLENBQUUsTUFBT0EsRUFBSSxJQUFLLEdBQUdELEVBQWEsVUFBVSxDQUFDLEtBQUtGLENBQVcsSUFBSUcsQ0FBRSxFQUFFLENBQ2hGLENBQ0EsR0FBSUosRUFBTSxDQUFDLElBQU1GLEVBQ2IsTUFBTyxDQUFFLElBQUssR0FBRyxFQUlyQixNQUFNTyxFQUFlLEtBQWdCSixDQUFXLElBQzFDSyxFQUFRTixFQUFNLENBQUMsRUFBRSxPQUFPLElBQU0sV0FBV3lCLEVBQUksU0FBUyxHQUM1RCxNQUFPLENBQUUsTUFBQW5CLEVBQU8sSUFBS0QsRUFBZUMsQ0FBSyxDQUM3QyxFQUdNQyxFQUFnQlAsR0FBVSxDQUU1QixHQUFJQSxFQUFNLENBQUMsRUFBRSxPQUFPLEtBQ2hCLE9BRUosTUFBTTNDLEVBQU8yQyxFQUFNLENBQUMsRUFDZCxDQUFFLElBQUFRLEVBQUssTUFBQUYsR0FBVVAsRUFBUUMsQ0FBSyxFQUNwQzNDLEVBQUssSUFBTSxDQUFFLEdBQUdBLEVBQUssTUFBTSxFQUd2QmlELElBQ0FqRCxFQUFLLE1BQVFpRCxHQUVqQixNQUFNL0QsRUFBU2MsRUFBSyxPQUNwQixVQUFXa0IsS0FBT2hDLEVBQ2QsT0FBT0EsRUFBT2dDLENBQUcsRUFFckJoQyxFQUFPLEtBQU9pRSxDQUNsQixFQUdBLEdBQUlpQixFQUFJLFNBQVcsUUFDZixVQUFXekIsS0FBU3lCLEVBQUksS0FBSyxRQUFPLEVBQUksQ0FDcEMsTUFBTXBFLEVBQU8yQyxFQUFNLENBQUMsRUFDcEIsR0FBSTNDLEVBQUssTUFDTCxNQUFNLElBQUksTUFBTSxzQkFDUEcsRUFBQUgsRUFBSyxRQUFMLFlBQUFHLEVBQVksS0FBSyxJQUFJO0FBQUE7QUFBQSxpRkFDd0QsQ0FFOUYsQ0FHSixVQUFXd0MsS0FBU3lCLEVBQUksS0FBSyxRQUFPLEVBQUksQ0FDcEMsTUFBTXBFLEVBQU8yQyxFQUFNLENBQUMsRUFFcEIsR0FBSXpELElBQVd5RCxFQUFNLENBQUMsRUFBRyxDQUNyQk8sRUFBYVAsQ0FBSyxFQUNsQixRQUNKLENBRUEsR0FBSXlCLEVBQUksU0FBVSxDQUNkLE1BQU1oQixHQUFNL0IsRUFBQStDLEVBQUksU0FBUyxTQUFTLElBQUl6QixFQUFNLENBQUMsQ0FBQyxJQUFsQyxZQUFBdEIsRUFBcUMsR0FDakQsR0FBSW5DLElBQVd5RCxFQUFNLENBQUMsR0FBS1MsRUFBSyxDQUM1QkYsRUFBYVAsQ0FBSyxFQUNsQixRQUNKLENBQ0osQ0FHQSxJQURXYyxFQUFBVyxFQUFJLGlCQUFpQixJQUFJekIsRUFBTSxDQUFDLENBQUMsSUFBakMsWUFBQWMsRUFBb0MsR0FDdkMsQ0FDSlAsRUFBYVAsQ0FBSyxFQUNsQixRQUNKLENBRUEsR0FBSTNDLEVBQUssTUFBTyxDQUVaa0QsRUFBYVAsQ0FBSyxFQUNsQixRQUNKLENBRUEsR0FBSTNDLEVBQUssTUFBUSxHQUNUb0UsRUFBSSxTQUFXLE1BQU8sQ0FDdEJsQixFQUFhUCxDQUFLLEVBRWxCLFFBQ0osQ0FFUixDQUNKLENBQ08sU0FBU2cwQixHQUFTdnlCLEVBQUtsRixFQUFRLFdBQ2xDLE1BQU11RCxFQUFPMkIsRUFBSSxLQUFLLElBQUlsRixDQUFNLEVBQ2hDLEdBQUksQ0FBQ3VELEVBQ0QsTUFBTSxJQUFJLE1BQU0sMkNBQTJDLEVBRS9ELE1BQU1ZLEVBQWNDLEdBQWMsQ0FDOUIsTUFBTXRELEVBQU9vRSxFQUFJLEtBQUssSUFBSWQsQ0FBUyxFQUVuQyxHQUFJdEQsRUFBSyxNQUFRLEtBQ2IsT0FDSixNQUFNZCxFQUFTYyxFQUFLLEtBQU9BLEVBQUssT0FDMUJ1RCxFQUFVLENBQUUsR0FBR3JFLENBQU0sRUFDckJpRSxFQUFNbkQsRUFBSyxJQUVqQixHQURBQSxFQUFLLElBQU0sS0FDUG1ELEVBQUssQ0FDTEUsRUFBV0YsQ0FBRyxFQUNkLE1BQU15ekIsRUFBVXh5QixFQUFJLEtBQUssSUFBSWpCLENBQUcsRUFDMUJLLEVBQVlvekIsRUFBUSxPQWMxQixHQVpJcHpCLEVBQVUsT0FBU1ksRUFBSSxTQUFXLFlBQWNBLEVBQUksU0FBVyxZQUFjQSxFQUFJLFNBQVcsZ0JBRTVGbEYsRUFBTyxNQUFRQSxFQUFPLE9BQVMsQ0FBQSxFQUMvQkEsRUFBTyxNQUFNLEtBQUtzRSxDQUFTLEdBRzNCLE9BQU8sT0FBT3RFLEVBQVFzRSxDQUFTLEVBR25DLE9BQU8sT0FBT3RFLEVBQVFxRSxDQUFPLEVBQ1RELEVBQVUsS0FBSyxTQUFXSCxFQUcxQyxVQUFXakMsS0FBT2hDLEVBQ1ZnQyxJQUFRLFFBQVVBLElBQVEsU0FFeEJBLEtBQU9xQyxHQUNULE9BQU9yRSxFQUFPZ0MsQ0FBRyxFQUs3QixHQUFJc0MsRUFBVSxLQUNWLFVBQVd0QyxLQUFPaEMsRUFDVmdDLElBQVEsUUFBVUEsSUFBUSxTQUUxQkEsS0FBTzAxQixFQUFRLEtBQU8sS0FBSyxVQUFVMTNCLEVBQU9nQyxDQUFHLENBQUMsSUFBTSxLQUFLLFVBQVUwMUIsRUFBUSxJQUFJMTFCLENBQUcsQ0FBQyxHQUNyRixPQUFPaEMsRUFBT2dDLENBQUcsQ0FJakMsQ0FJQSxNQUFNZCxFQUFTa0QsRUFBVSxLQUFLLE9BQzlCLEdBQUlsRCxHQUFVQSxJQUFXK0MsRUFBSyxDQUUxQkUsRUFBV2pELENBQU0sRUFDakIsTUFBTXkyQixFQUFhenlCLEVBQUksS0FBSyxJQUFJaEUsQ0FBTSxFQUN0QyxHQUFJeTJCLEdBQUEsTUFBQUEsRUFBWSxPQUFPLE9BQ25CMzNCLEVBQU8sS0FBTzIzQixFQUFXLE9BQU8sS0FFNUJBLEVBQVcsS0FDWCxVQUFXMzFCLEtBQU9oQyxFQUNWZ0MsSUFBUSxRQUFVQSxJQUFRLFNBRTFCQSxLQUFPMjFCLEVBQVcsS0FBTyxLQUFLLFVBQVUzM0IsRUFBT2dDLENBQUcsQ0FBQyxJQUFNLEtBQUssVUFBVTIxQixFQUFXLElBQUkzMUIsQ0FBRyxDQUFDLEdBQzNGLE9BQU9oQyxFQUFPZ0MsQ0FBRyxDQUtyQyxDQUVBa0QsRUFBSSxTQUFTLENBQ1QsVUFBV2QsRUFDWCxXQUFZcEUsRUFDWixLQUFNYyxFQUFLLE1BQVEsQ0FBQSxDQUMvQixDQUFTLENBQ0wsRUFDQSxVQUFXMkMsSUFBUyxDQUFDLEdBQUd5QixFQUFJLEtBQUssUUFBTyxDQUFFLEVBQUUsVUFDeENmLEVBQVdWLEVBQU0sQ0FBQyxDQUFDLEVBRXZCLE1BQU0xQyxFQUFTLENBQUEsRUFnQmYsR0FmSW1FLEVBQUksU0FBVyxnQkFDZm5FLEVBQU8sUUFBVSwrQ0FFWm1FLEVBQUksU0FBVyxXQUNwQm5FLEVBQU8sUUFBVSwwQ0FFWm1FLEVBQUksU0FBVyxXQUNwQm5FLEVBQU8sUUFBVSwwQ0FFWm1FLEVBQUksUUFNVHZFLEVBQUF1RSxFQUFJLFdBQUosTUFBQXZFLEVBQWMsSUFBSyxDQUNuQixNQUFNa0QsR0FBSzVDLEVBQUFpRSxFQUFJLFNBQVMsU0FBUyxJQUFJbEYsQ0FBTSxJQUFoQyxZQUFBaUIsRUFBbUMsR0FDOUMsR0FBSSxDQUFDNEMsRUFDRCxNQUFNLElBQUksTUFBTSxvQ0FBb0MsRUFDeEQ5QyxFQUFPLElBQU1tRSxFQUFJLFNBQVMsSUFBSXJCLENBQUUsQ0FDcEMsQ0FDQSxPQUFPLE9BQU85QyxFQUFRd0MsRUFBSyxLQUFPQSxFQUFLLE1BQU0sRUFFN0MsTUFBTWtCLElBQU90QyxFQUFBK0MsRUFBSSxXQUFKLFlBQUEvQyxFQUFjLE9BQVEsQ0FBQSxFQUNuQyxVQUFXc0IsS0FBU3lCLEVBQUksS0FBSyxRQUFPLEVBQUksQ0FDcEMsTUFBTXBFLEVBQU8yQyxFQUFNLENBQUMsRUFDaEIzQyxFQUFLLEtBQU9BLEVBQUssUUFDakIyRCxFQUFLM0QsRUFBSyxLQUFLLEVBQUlBLEVBQUssSUFFaEMsQ0FFSW9FLEVBQUksVUFHQSxPQUFPLEtBQUtULENBQUksRUFBRSxPQUFTLElBQ3ZCUyxFQUFJLFNBQVcsZ0JBQ2ZuRSxFQUFPLE1BQVEwRCxFQUdmMUQsRUFBTyxZQUFjMEQsR0FJakMsR0FBSSxDQUlBLE1BQU1tekIsRUFBWSxLQUFLLE1BQU0sS0FBSyxVQUFVNzJCLENBQU0sQ0FBQyxFQUNuRCxjQUFPLGVBQWU2MkIsRUFBVyxZQUFhLENBQzFDLE1BQU8sQ0FDSCxHQUFHNTNCLEVBQU8sV0FBVyxFQUNyQixXQUFZLENBQ1IsTUFBTzYzQixHQUErQjczQixFQUFRLFFBQVNrRixFQUFJLFVBQVUsRUFDckUsT0FBUTJ5QixHQUErQjczQixFQUFRLFNBQVVrRixFQUFJLFVBQVUsQ0FDM0YsQ0FDQSxFQUNZLFdBQVksR0FDWixTQUFVLEVBQ3RCLENBQVMsRUFDTTB5QixDQUNYLE1BQ2EsQ0FDVCxNQUFNLElBQUksTUFBTSxrQ0FBa0MsQ0FDdEQsQ0FDSixDQUNBLFNBQVN0MEIsR0FBZTBCLEVBQVNDLEVBQU0sQ0FDbkMsTUFBTUMsRUFBTUQsR0FBUSxDQUFFLEtBQU0sSUFBSSxHQUFLLEVBQ3JDLEdBQUlDLEVBQUksS0FBSyxJQUFJRixDQUFPLEVBQ3BCLE1BQU8sR0FDWEUsRUFBSSxLQUFLLElBQUlGLENBQU8sRUFDcEIsTUFBTXBFLEVBQU1vRSxFQUFRLEtBQUssSUFDekIsR0FBSXBFLEVBQUksT0FBUyxZQUNiLE1BQU8sR0FDWCxHQUFJQSxFQUFJLE9BQVMsUUFDYixPQUFPMEMsR0FBZTFDLEVBQUksUUFBU3NFLENBQUcsRUFDMUMsR0FBSXRFLEVBQUksT0FBUyxNQUNiLE9BQU8wQyxHQUFlMUMsRUFBSSxVQUFXc0UsQ0FBRyxFQUM1QyxHQUFJdEUsRUFBSSxPQUFTLE9BQ2IsT0FBTzBDLEdBQWUxQyxFQUFJLE9BQU0sRUFBSXNFLENBQUcsRUFDM0MsR0FBSXRFLEVBQUksT0FBUyxXQUNiQSxFQUFJLE9BQVMsWUFDYkEsRUFBSSxPQUFTLGVBQ2JBLEVBQUksT0FBUyxZQUNiQSxFQUFJLE9BQVMsWUFDYkEsRUFBSSxPQUFTLFdBQ2JBLEVBQUksT0FBUyxXQUNiLE9BQU8wQyxHQUFlMUMsRUFBSSxVQUFXc0UsQ0FBRyxFQUU1QyxHQUFJdEUsRUFBSSxPQUFTLGVBQ2IsT0FBTzBDLEdBQWUxQyxFQUFJLEtBQU1zRSxDQUFHLEdBQUs1QixHQUFlMUMsRUFBSSxNQUFPc0UsQ0FBRyxFQUV6RSxHQUFJdEUsRUFBSSxPQUFTLFVBQVlBLEVBQUksT0FBUyxNQUN0QyxPQUFPMEMsR0FBZTFDLEVBQUksUUFBU3NFLENBQUcsR0FBSzVCLEdBQWUxQyxFQUFJLFVBQVdzRSxDQUFHLEVBRWhGLEdBQUl0RSxFQUFJLE9BQVMsT0FDYixPQUFPMEMsR0FBZTFDLEVBQUksR0FBSXNFLENBQUcsR0FBSzVCLEdBQWUxQyxFQUFJLElBQUtzRSxDQUFHLEVBRXJFLEdBQUl0RSxFQUFJLE9BQVMsU0FBVSxDQUN2QixVQUFXb0IsS0FBT3BCLEVBQUksTUFDbEIsR0FBSTBDLEdBQWUxQyxFQUFJLE1BQU1vQixDQUFHLEVBQUdrRCxDQUFHLEVBQ2xDLE1BQU8sR0FFZixNQUFPLEVBQ1gsQ0FDQSxHQUFJdEUsRUFBSSxPQUFTLFFBQVMsQ0FDdEIsVUFBV3VFLEtBQVV2RSxFQUFJLFFBQ3JCLEdBQUkwQyxHQUFlNkIsRUFBUUQsQ0FBRyxFQUMxQixNQUFPLEdBRWYsTUFBTyxFQUNYLENBQ0EsR0FBSXRFLEVBQUksT0FBUyxRQUFTLENBQ3RCLFVBQVd3RSxLQUFReEUsRUFBSSxNQUNuQixHQUFJMEMsR0FBZThCLEVBQU1GLENBQUcsRUFDeEIsTUFBTyxHQUVmLE1BQUksR0FBQXRFLEVBQUksTUFBUTBDLEdBQWUxQyxFQUFJLEtBQU1zRSxDQUFHLEVBR2hELENBQ0EsTUFBTyxFQUNYLENBS08sTUFBTTR5QixHQUEyQixDQUFDOTNCLEVBQVErM0IsRUFBYSxDQUFBLElBQVF0M0IsR0FBVyxDQUM3RSxNQUFNeUUsRUFBTWt5QixHQUFrQixDQUFFLEdBQUczMkIsRUFBUSxXQUFBczNCLENBQVUsQ0FBRSxFQUN2RFYsT0FBQUEsR0FBUXIzQixFQUFRa0YsQ0FBRyxFQUNuQnF5QixHQUFZcnlCLEVBQUtsRixDQUFNLEVBQ2hCeTNCLEdBQVN2eUIsRUFBS2xGLENBQU0sQ0FDL0IsRUFDYTYzQixHQUFpQyxDQUFDNzNCLEVBQVFnNEIsRUFBSUQsRUFBYSxDQUFBLElBQVF0M0IsR0FBVyxDQUN2RixLQUFNLENBQUUsZUFBQXczQixFQUFnQixPQUFBM2EsQ0FBTSxFQUFLN2MsR0FBVSxDQUFBLEVBQ3ZDeUUsRUFBTWt5QixHQUFrQixDQUFFLEdBQUlhLEdBQWtCLENBQUEsRUFBSyxPQUFBM2EsRUFBUSxHQUFBMGEsRUFBSSxXQUFBRCxFQUFZLEVBQ25GVixPQUFBQSxHQUFRcjNCLEVBQVFrRixDQUFHLEVBQ25CcXlCLEdBQVlyeUIsRUFBS2xGLENBQU0sRUFDaEJ5M0IsR0FBU3Z5QixFQUFLbEYsQ0FBTSxDQUMvQixFQ2xiTWEsR0FBWSxDQUNkLEtBQU0sT0FDTixJQUFLLE1BQ0wsU0FBVSxZQUNWLFlBQWEsY0FDYixNQUFPLEVBQ1gsRUFFYXEzQixHQUFrQixDQUFDbDRCLEVBQVFrRixFQUFLL0QsRUFBT1QsSUFBWSxDQUM1RCxNQUFNVSxFQUFPRCxFQUNiQyxFQUFLLEtBQU8sU0FDWixLQUFNLENBQUUsUUFBQUMsRUFBUyxRQUFBQyxFQUFTLE9BQUFDLEVBQVEsU0FBQUMsRUFBVSxnQkFBQUMsQ0FBZSxFQUFLekIsRUFBTyxLQUNsRSxJQWtCTCxHQWpCSSxPQUFPcUIsR0FBWSxXQUNuQkQsRUFBSyxVQUFZQyxHQUNqQixPQUFPQyxHQUFZLFdBQ25CRixFQUFLLFVBQVlFLEdBRWpCQyxJQUNBSCxFQUFLLE9BQVNQLEdBQVVVLENBQU0sR0FBS0EsRUFDL0JILEVBQUssU0FBVyxJQUNoQixPQUFPQSxFQUFLLE9BR1pHLElBQVcsUUFDWCxPQUFPSCxFQUFLLFFBR2hCSyxJQUNBTCxFQUFLLGdCQUFrQkssR0FDdkJELEdBQVlBLEVBQVMsS0FBTyxFQUFHLENBQy9CLE1BQU1FLEVBQVUsQ0FBQyxHQUFHRixDQUFRLEVBQ3hCRSxFQUFRLFNBQVcsRUFDbkJOLEVBQUssUUFBVU0sRUFBUSxDQUFDLEVBQUUsT0FDckJBLEVBQVEsT0FBUyxJQUN0Qk4sRUFBSyxNQUFRLENBQ1QsR0FBR00sRUFBUSxJQUFLQyxJQUFXLENBQ3ZCLEdBQUl1RCxFQUFJLFNBQVcsWUFBY0EsRUFBSSxTQUFXLFlBQWNBLEVBQUksU0FBVyxjQUN2RSxDQUFFLEtBQU0sUUFBUSxFQUNoQixHQUNOLFFBQVN2RCxFQUFNLE1BQ25DLEVBQWtCLENBQ2xCLEVBRUksQ0FDSixFQUNhdzJCLEdBQWtCLENBQUNuNEIsRUFBUWtGLEVBQUsvRCxFQUFPVCxJQUFZLENBQzVELE1BQU1VLEVBQU9ELEVBQ1AsQ0FBRSxRQUFBRSxFQUFTLFFBQUFDLEVBQVMsT0FBQUMsRUFBUSxXQUFBSyxFQUFZLGlCQUFBQyxFQUFrQixpQkFBQUMsQ0FBZ0IsRUFBSzlCLEVBQU8sS0FBSyxJQUM3RixPQUFPdUIsR0FBVyxVQUFZQSxFQUFPLFNBQVMsS0FBSyxFQUNuREgsRUFBSyxLQUFPLFVBRVpBLEVBQUssS0FBTyxTQUNaLE9BQU9VLEdBQXFCLFdBQ3hCb0QsRUFBSSxTQUFXLFlBQWNBLEVBQUksU0FBVyxlQUM1QzlELEVBQUssUUFBVVUsRUFDZlYsRUFBSyxpQkFBbUIsSUFHeEJBLEVBQUssaUJBQW1CVSxHQUc1QixPQUFPVCxHQUFZLFdBQ25CRCxFQUFLLFFBQVVDLEVBQ1gsT0FBT1MsR0FBcUIsVUFBWW9ELEVBQUksU0FBVyxhQUNuRHBELEdBQW9CVCxFQUNwQixPQUFPRCxFQUFLLFFBRVosT0FBT0EsRUFBSyxtQkFHcEIsT0FBT1MsR0FBcUIsV0FDeEJxRCxFQUFJLFNBQVcsWUFBY0EsRUFBSSxTQUFXLGVBQzVDOUQsRUFBSyxRQUFVUyxFQUNmVCxFQUFLLGlCQUFtQixJQUd4QkEsRUFBSyxpQkFBbUJTLEdBRzVCLE9BQU9QLEdBQVksV0FDbkJGLEVBQUssUUFBVUUsRUFDWCxPQUFPTyxHQUFxQixVQUFZcUQsRUFBSSxTQUFXLGFBQ25EckQsR0FBb0JQLEVBQ3BCLE9BQU9GLEVBQUssUUFFWixPQUFPQSxFQUFLLG1CQUdwQixPQUFPUSxHQUFlLFdBQ3RCUixFQUFLLFdBQWFRLEVBQzFCLEVBQ2F3MkIsR0FBbUIsQ0FBQ3B6QixFQUFTQyxFQUFNN0QsRUFBTVYsSUFBWSxDQUM5RFUsRUFBSyxLQUFPLFNBQ2hCLEVBK0JhaTNCLEdBQWlCLENBQUNyekIsRUFBU0MsRUFBTTdELEVBQU1WLElBQVksQ0FDNURVLEVBQUssSUFBTSxDQUFBLENBQ2YsRUFDYWszQixHQUFlLENBQUN0ekIsRUFBU0MsRUFBTTlELEVBQU9ULElBQVksQ0FFL0QsRUFDYTYzQixHQUFtQixDQUFDdnpCLEVBQVNDLEVBQU05RCxFQUFPVCxJQUFZLENBRW5FLEVBTWE4M0IsR0FBZ0IsQ0FBQ3g0QixFQUFRaUYsRUFBTTdELEVBQU1WLElBQVksQ0FDMUQsTUFBTUUsRUFBTVosRUFBTyxLQUFLLElBQ2xCNkMsRUFBU3BELEdBQWNtQixFQUFJLE9BQU8sRUFFcENpQyxFQUFPLE1BQU9qRCxHQUFNLE9BQU9BLEdBQU0sUUFBUSxJQUN6Q3dCLEVBQUssS0FBTyxVQUNaeUIsRUFBTyxNQUFPakQsR0FBTSxPQUFPQSxHQUFNLFFBQVEsSUFDekN3QixFQUFLLEtBQU8sVUFDaEJBLEVBQUssS0FBT3lCLENBQ2hCLEVBQ2E0MUIsR0FBbUIsQ0FBQ3o0QixFQUFRa0YsRUFBSzlELEVBQU1WLElBQVksQ0FDNUQsTUFBTUUsRUFBTVosRUFBTyxLQUFLLElBQ2xCOEMsRUFBTyxDQUFBLEVBQ2IsVUFBV0wsS0FBTzdCLEVBQUksT0FDbEIsR0FBSTZCLElBQVEsUUFDUixHQUFJeUMsRUFBSSxrQkFBb0IsUUFDeEIsTUFBTSxJQUFJLE1BQU0sMERBQTBELFVBTXpFLE9BQU96QyxHQUFRLFNBQVUsQ0FDOUIsR0FBSXlDLEVBQUksa0JBQW9CLFFBQ3hCLE1BQU0sSUFBSSxNQUFNLHNEQUFzRCxFQUd0RXBDLEVBQUssS0FBSyxPQUFPTCxDQUFHLENBQUMsQ0FFN0IsTUFFSUssRUFBSyxLQUFLTCxDQUFHLEVBR3JCLEdBQUlLLEVBQUssU0FBVyxFQUdmLEdBQUlBLEVBQUssU0FBVyxFQUFHLENBQ3hCLE1BQU1MLEVBQU1LLEVBQUssQ0FBQyxFQUNsQjFCLEVBQUssS0FBT3FCLElBQVEsS0FBTyxPQUFTLE9BQU9BLEVBQ3ZDeUMsRUFBSSxTQUFXLFlBQWNBLEVBQUksU0FBVyxjQUM1QzlELEVBQUssS0FBTyxDQUFDcUIsQ0FBRyxFQUdoQnJCLEVBQUssTUFBUXFCLENBRXJCLE1BRVFLLEVBQUssTUFBT2xELEdBQU0sT0FBT0EsR0FBTSxRQUFRLElBQ3ZDd0IsRUFBSyxLQUFPLFVBQ1owQixFQUFLLE1BQU9sRCxHQUFNLE9BQU9BLEdBQU0sUUFBUSxJQUN2Q3dCLEVBQUssS0FBTyxVQUNaMEIsRUFBSyxNQUFPbEQsR0FBTSxPQUFPQSxHQUFNLFNBQVMsSUFDeEN3QixFQUFLLEtBQU8sV0FDWjBCLEVBQUssTUFBT2xELEdBQU1BLElBQU0sSUFBSSxJQUM1QndCLEVBQUssS0FBTyxRQUNoQkEsRUFBSyxLQUFPMEIsQ0FFcEIsRUEyQ2E0MUIsR0FBa0IsQ0FBQzF6QixFQUFTRSxFQUFLL0QsRUFBT1QsSUFBWSxDQUM3RCxHQUFJd0UsRUFBSSxrQkFBb0IsUUFDeEIsTUFBTSxJQUFJLE1BQU0sbURBQW1ELENBRTNFLEVBTWF5ekIsR0FBcUIsQ0FBQzN6QixFQUFTRSxFQUFLL0QsRUFBT1QsSUFBWSxDQUNoRSxHQUFJd0UsRUFBSSxrQkFBb0IsUUFDeEIsTUFBTSxJQUFJLE1BQU0saURBQWlELENBRXpFLEVBWWEwekIsR0FBaUIsQ0FBQzU0QixFQUFRa0YsRUFBSy9ELEVBQU9WLElBQVcsQ0FDMUQsTUFBTVcsRUFBT0QsRUFDUFAsRUFBTVosRUFBTyxLQUFLLElBQ2xCLENBQUUsUUFBQXFCLEVBQVMsUUFBQUMsQ0FBTyxFQUFLdEIsRUFBTyxLQUFLLElBQ3JDLE9BQU9xQixHQUFZLFdBQ25CRCxFQUFLLFNBQVdDLEdBQ2hCLE9BQU9DLEdBQVksV0FDbkJGLEVBQUssU0FBV0UsR0FDcEJGLEVBQUssS0FBTyxRQUNaQSxFQUFLLE1BQVFpMkIsR0FBUXoyQixFQUFJLFFBQVNzRSxFQUFLLENBQUUsR0FBR3pFLEVBQVEsS0FBTSxDQUFDLEdBQUdBLEVBQU8sS0FBTSxPQUFPLENBQUMsQ0FBRSxDQUN6RixFQUNhbzRCLEdBQWtCLENBQUM3NEIsRUFBUWtGLEVBQUsvRCxFQUFPVixJQUFXLE9BQzNELE1BQU1XLEVBQU9ELEVBQ1BQLEVBQU1aLEVBQU8sS0FBSyxJQUN4Qm9CLEVBQUssS0FBTyxTQUNaQSxFQUFLLFdBQWEsQ0FBQSxFQUNsQixNQUFNVyxFQUFRbkIsRUFBSSxNQUNsQixVQUFXb0IsS0FBT0QsRUFDZFgsRUFBSyxXQUFXWSxDQUFHLEVBQUlxMUIsR0FBUXQxQixFQUFNQyxDQUFHLEVBQUdrRCxFQUFLLENBQzVDLEdBQUd6RSxFQUNILEtBQU0sQ0FBQyxHQUFHQSxFQUFPLEtBQU0sYUFBY3VCLENBQUcsQ0FDcEQsQ0FBUyxFQUdMLE1BQU1DLEVBQVUsSUFBSSxJQUFJLE9BQU8sS0FBS0YsQ0FBSyxDQUFDLEVBQ3BDRyxFQUFlLElBQUksSUFBSSxDQUFDLEdBQUdELENBQU8sRUFBRSxPQUFRRCxHQUFRLENBQ3RELE1BQU1wQyxFQUFJZ0IsRUFBSSxNQUFNb0IsQ0FBRyxFQUFFLEtBQ3pCLE9BQUlrRCxFQUFJLEtBQU8sUUFDSnRGLEVBQUUsUUFBVSxPQUdaQSxFQUFFLFNBQVcsTUFFNUIsQ0FBQyxDQUFDLEVBQ0VzQyxFQUFhLEtBQU8sSUFDcEJkLEVBQUssU0FBVyxNQUFNLEtBQUtjLENBQVksS0FHdkN2QixFQUFBQyxFQUFJLFdBQUosWUFBQUQsRUFBYyxLQUFLLElBQUksUUFBUyxRQUVoQ1MsRUFBSyxxQkFBdUIsR0FFdEJSLEVBQUksU0FLTEEsRUFBSSxXQUNUUSxFQUFLLHFCQUF1QmkyQixHQUFRejJCLEVBQUksU0FBVXNFLEVBQUssQ0FDbkQsR0FBR3pFLEVBQ0gsS0FBTSxDQUFDLEdBQUdBLEVBQU8sS0FBTSxzQkFBc0IsQ0FDekQsQ0FBUyxHQVBHeUUsRUFBSSxLQUFPLFdBQ1g5RCxFQUFLLHFCQUF1QixHQVF4QyxFQUNhMDNCLEdBQWlCLENBQUM5NEIsRUFBUWtGLEVBQUs5RCxFQUFNWCxJQUFXLENBQ3pELE1BQU1HLEVBQU1aLEVBQU8sS0FBSyxJQUdsQis0QixFQUFjbjRCLEVBQUksWUFBYyxHQUNoQ2dGLEVBQVVoRixFQUFJLFFBQVEsSUFBSSxDQUFDd0IsRUFBR0MsSUFBTWcxQixHQUFRajFCLEVBQUc4QyxFQUFLLENBQ3RELEdBQUd6RSxFQUNILEtBQU0sQ0FBQyxHQUFHQSxFQUFPLEtBQU1zNEIsRUFBYyxRQUFVLFFBQVMxMkIsQ0FBQyxDQUNqRSxDQUFLLENBQUMsRUFDRTAyQixFQUNBMzNCLEVBQUssTUFBUXdFLEVBR2J4RSxFQUFLLE1BQVF3RSxDQUVyQixFQUNhb3pCLEdBQXdCLENBQUNoNUIsRUFBUWtGLEVBQUs5RCxFQUFNWCxJQUFXLENBQ2hFLE1BQU1HLEVBQU1aLEVBQU8sS0FBSyxJQUNsQnNDLEVBQUkrMEIsR0FBUXoyQixFQUFJLEtBQU1zRSxFQUFLLENBQzdCLEdBQUd6RSxFQUNILEtBQU0sQ0FBQyxHQUFHQSxFQUFPLEtBQU0sUUFBUyxDQUFDLENBQ3pDLENBQUssRUFDSzhCLEVBQUk4MEIsR0FBUXoyQixFQUFJLE1BQU9zRSxFQUFLLENBQzlCLEdBQUd6RSxFQUNILEtBQU0sQ0FBQyxHQUFHQSxFQUFPLEtBQU0sUUFBUyxDQUFDLENBQ3pDLENBQUssRUFDSytCLEVBQXdCQyxHQUFRLFVBQVdBLEdBQU8sT0FBTyxLQUFLQSxDQUFHLEVBQUUsU0FBVyxFQUM5RUMsRUFBUSxDQUNWLEdBQUlGLEVBQXFCRixDQUFDLEVBQUlBLEVBQUUsTUFBUSxDQUFDQSxDQUFDLEVBQzFDLEdBQUlFLEVBQXFCRCxDQUFDLEVBQUlBLEVBQUUsTUFBUSxDQUFDQSxDQUFDLENBQ2xELEVBQ0luQixFQUFLLE1BQVFzQixDQUNqQixFQWdEYXUyQixHQUFrQixDQUFDajVCLEVBQVFrRixFQUFLL0QsRUFBT1YsSUFBVyxDQUMzRCxNQUFNVyxFQUFPRCxFQUNQUCxFQUFNWixFQUFPLEtBQUssSUFDeEJvQixFQUFLLEtBQU8sU0FJWixNQUFNb0ksRUFBVTVJLEVBQUksUUFDZHM0QixFQUFTMXZCLEVBQVEsS0FBSyxJQUN0QmhJLEVBQVcwM0IsR0FBQSxZQUFBQSxFQUFRLFNBQ3pCLEdBQUl0NEIsRUFBSSxPQUFTLFNBQVdZLEdBQVlBLEVBQVMsS0FBTyxFQUFHLENBRXZELE1BQU0rUSxFQUFjOGtCLEdBQVF6MkIsRUFBSSxVQUFXc0UsRUFBSyxDQUM1QyxHQUFHekUsRUFDSCxLQUFNLENBQUMsR0FBR0EsRUFBTyxLQUFNLG9CQUFxQixHQUFHLENBQzNELENBQVMsRUFDRFcsRUFBSyxrQkFBb0IsQ0FBQSxFQUN6QixVQUFXZ0MsS0FBVzVCLEVBQ2xCSixFQUFLLGtCQUFrQmdDLEVBQVEsTUFBTSxFQUFJbVAsQ0FFakQsTUFHUXJOLEVBQUksU0FBVyxZQUFjQSxFQUFJLFNBQVcsbUJBQzVDOUQsRUFBSyxjQUFnQmkyQixHQUFRejJCLEVBQUksUUFBU3NFLEVBQUssQ0FDM0MsR0FBR3pFLEVBQ0gsS0FBTSxDQUFDLEdBQUdBLEVBQU8sS0FBTSxlQUFlLENBQ3RELENBQWEsR0FFTFcsRUFBSyxxQkFBdUJpMkIsR0FBUXoyQixFQUFJLFVBQVdzRSxFQUFLLENBQ3BELEdBQUd6RSxFQUNILEtBQU0sQ0FBQyxHQUFHQSxFQUFPLEtBQU0sc0JBQXNCLENBQ3pELENBQVMsRUFHTCxNQUFNMDRCLEVBQVkzdkIsRUFBUSxLQUFLLE9BQy9CLEdBQUkydkIsRUFBVyxDQUNYLE1BQU1DLEVBQWlCLENBQUMsR0FBR0QsQ0FBUyxFQUFFLE9BQVF2NUIsR0FBTSxPQUFPQSxHQUFNLFVBQVksT0FBT0EsR0FBTSxRQUFRLEVBQzlGdzVCLEVBQWUsT0FBUyxJQUN4Qmg0QixFQUFLLFNBQVdnNEIsRUFFeEIsQ0FDSixFQUNhQyxHQUFvQixDQUFDcjVCLEVBQVFrRixFQUFLOUQsRUFBTVgsSUFBVyxDQUM1RCxNQUFNRyxFQUFNWixFQUFPLEtBQUssSUFDbEJrRCxFQUFRbTBCLEdBQVF6MkIsRUFBSSxVQUFXc0UsRUFBS3pFLENBQU0sRUFDMUNLLEVBQU9vRSxFQUFJLEtBQUssSUFBSWxGLENBQU0sRUFDNUJrRixFQUFJLFNBQVcsZUFDZnBFLEVBQUssSUFBTUYsRUFBSSxVQUNmUSxFQUFLLFNBQVcsSUFHaEJBLEVBQUssTUFBUSxDQUFDOEIsRUFBTyxDQUFFLEtBQU0sTUFBTSxDQUFFLENBRTdDLEVBQ2FvMkIsR0FBdUIsQ0FBQ3Q1QixFQUFRa0YsRUFBSy9ELEVBQU9WLElBQVcsQ0FDaEUsTUFBTUcsRUFBTVosRUFBTyxLQUFLLElBQ3hCcTNCLEdBQVF6MkIsRUFBSSxVQUFXc0UsRUFBS3pFLENBQU0sRUFDbEMsTUFBTUssRUFBT29FLEVBQUksS0FBSyxJQUFJbEYsQ0FBTSxFQUNoQ2MsRUFBSyxJQUFNRixFQUFJLFNBQ25CLEVBQ2EyNEIsR0FBbUIsQ0FBQ3Y1QixFQUFRa0YsRUFBSzlELEVBQU1YLElBQVcsQ0FDM0QsTUFBTUcsRUFBTVosRUFBTyxLQUFLLElBQ3hCcTNCLEdBQVF6MkIsRUFBSSxVQUFXc0UsRUFBS3pFLENBQU0sRUFDbEMsTUFBTUssRUFBT29FLEVBQUksS0FBSyxJQUFJbEYsQ0FBTSxFQUNoQ2MsRUFBSyxJQUFNRixFQUFJLFVBQ2ZRLEVBQUssUUFBVSxLQUFLLE1BQU0sS0FBSyxVQUFVUixFQUFJLFlBQVksQ0FBQyxDQUM5RCxFQUNhNDRCLEdBQW9CLENBQUN4NUIsRUFBUWtGLEVBQUs5RCxFQUFNWCxJQUFXLENBQzVELE1BQU1HLEVBQU1aLEVBQU8sS0FBSyxJQUN4QnEzQixHQUFRejJCLEVBQUksVUFBV3NFLEVBQUt6RSxDQUFNLEVBQ2xDLE1BQU1LLEVBQU9vRSxFQUFJLEtBQUssSUFBSWxGLENBQU0sRUFDaENjLEVBQUssSUFBTUYsRUFBSSxVQUNYc0UsRUFBSSxLQUFPLFVBQ1g5RCxFQUFLLFVBQVksS0FBSyxNQUFNLEtBQUssVUFBVVIsRUFBSSxZQUFZLENBQUMsRUFDcEUsRUFDYTY0QixHQUFpQixDQUFDejVCLEVBQVFrRixFQUFLOUQsRUFBTVgsSUFBVyxDQUN6RCxNQUFNRyxFQUFNWixFQUFPLEtBQUssSUFDeEJxM0IsR0FBUXoyQixFQUFJLFVBQVdzRSxFQUFLekUsQ0FBTSxFQUNsQyxNQUFNSyxFQUFPb0UsRUFBSSxLQUFLLElBQUlsRixDQUFNLEVBQ2hDYyxFQUFLLElBQU1GLEVBQUksVUFDZixJQUFJdUMsRUFDSixHQUFJLENBQ0FBLEVBQWF2QyxFQUFJLFdBQVcsTUFBUyxDQUN6QyxNQUNNLENBQ0YsTUFBTSxJQUFJLE1BQU0sdURBQXVELENBQzNFLENBQ0FRLEVBQUssUUFBVStCLENBQ25CLEVBQ2F1MkIsR0FBZ0IsQ0FBQzE1QixFQUFRa0YsRUFBSy9ELEVBQU9WLElBQVcsQ0FDekQsTUFBTUcsRUFBTVosRUFBTyxLQUFLLElBQ2xCcUQsRUFBWTZCLEVBQUksS0FBTyxRQUFXdEUsRUFBSSxHQUFHLEtBQUssSUFBSSxPQUFTLFlBQWNBLEVBQUksSUFBTUEsRUFBSSxHQUFNQSxFQUFJLElBQ3ZHeTJCLEdBQVFoMEIsRUFBVzZCLEVBQUt6RSxDQUFNLEVBQzlCLE1BQU1LLEVBQU9vRSxFQUFJLEtBQUssSUFBSWxGLENBQU0sRUFDaENjLEVBQUssSUFBTXVDLENBQ2YsRUFDYXMyQixHQUFvQixDQUFDMzVCLEVBQVFrRixFQUFLOUQsRUFBTVgsSUFBVyxDQUM1RCxNQUFNRyxFQUFNWixFQUFPLEtBQUssSUFDeEJxM0IsR0FBUXoyQixFQUFJLFVBQVdzRSxFQUFLekUsQ0FBTSxFQUNsQyxNQUFNSyxFQUFPb0UsRUFBSSxLQUFLLElBQUlsRixDQUFNLEVBQ2hDYyxFQUFLLElBQU1GLEVBQUksVUFDZlEsRUFBSyxTQUFXLEVBQ3BCLEVBT2F3NEIsR0FBb0IsQ0FBQzU1QixFQUFRa0YsRUFBSy9ELEVBQU9WLElBQVcsQ0FDN0QsTUFBTUcsRUFBTVosRUFBTyxLQUFLLElBQ3hCcTNCLEdBQVF6MkIsRUFBSSxVQUFXc0UsRUFBS3pFLENBQU0sRUFDbEMsTUFBTUssRUFBT29FLEVBQUksS0FBSyxJQUFJbEYsQ0FBTSxFQUNoQ2MsRUFBSyxJQUFNRixFQUFJLFNBQ25CLEVBQ2FpNUIsR0FBZ0IsQ0FBQzc1QixFQUFRa0YsRUFBSy9ELEVBQU9WLElBQVcsQ0FDekQsTUFBTTRDLEVBQVlyRCxFQUFPLEtBQUssVUFDOUJxM0IsR0FBUWgwQixFQUFXNkIsRUFBS3pFLENBQU0sRUFDOUIsTUFBTUssRUFBT29FLEVBQUksS0FBSyxJQUFJbEYsQ0FBTSxFQUNoQ2MsRUFBSyxJQUFNdUMsQ0FDZixFQ3pnQmF5MkIsR0FBK0JyVixFQUFrQixpQkFBa0IsQ0FBQzdJLEVBQU1oYixJQUFRLENBQzNGbTVCLEdBQXFCLEtBQUtuZSxFQUFNaGIsQ0FBRyxFQUNuQ281QixHQUF3QixLQUFLcGUsRUFBTWhiLENBQUcsQ0FDMUMsQ0FBQyxFQUNNLFNBQVNtakIsR0FBU3RqQixFQUFRLENBQzdCLE9BQU93NUIsR0FBa0JILEdBQWdCcjVCLENBQU0sQ0FDbkQsQ0FDTyxNQUFNeTVCLEdBQTJCelYsRUFBa0IsYUFBYyxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDbkZ1NUIsR0FBaUIsS0FBS3ZlLEVBQU1oYixDQUFHLEVBQy9CbzVCLEdBQXdCLEtBQUtwZSxFQUFNaGIsQ0FBRyxDQUMxQyxDQUFDLEVBQ00sU0FBUytpQixHQUFLbGpCLEVBQVEsQ0FDekIsT0FBTzI1QixHQUFjRixHQUFZejVCLENBQU0sQ0FDM0MsQ0FDTyxNQUFNNDVCLEdBQTJCNVYsRUFBa0IsYUFBYyxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDbkYwNUIsR0FBaUIsS0FBSzFlLEVBQU1oYixDQUFHLEVBQy9CbzVCLEdBQXdCLEtBQUtwZSxFQUFNaGIsQ0FBRyxDQUMxQyxDQUFDLEVBQ00sU0FBU2tqQixHQUFLcmpCLEVBQVEsQ0FDekIsT0FBTzg1QixHQUFjRixHQUFZNTVCLENBQU0sQ0FDM0MsQ0FDTyxNQUFNKzVCLEdBQStCL1YsRUFBa0IsaUJBQWtCLENBQUM3SSxFQUFNaGIsSUFBUSxDQUMzRjY1QixHQUFxQixLQUFLN2UsRUFBTWhiLENBQUcsRUFDbkNvNUIsR0FBd0IsS0FBS3BlLEVBQU1oYixDQUFHLENBQzFDLENBQUMsRUFDTSxTQUFTZ2lCLEdBQVNuaUIsRUFBUSxDQUM3QixPQUFPaTZCLEdBQWtCRixHQUFnQi81QixDQUFNLENBQ25ELENDMUJBLE1BQU1rWixHQUFjLENBQUNpQyxFQUFNa0UsSUFBVyxDQUNsQ1EsR0FBVSxLQUFLMUUsRUFBTWtFLENBQU0sRUFDM0JsRSxFQUFLLEtBQU8sV0FDWixPQUFPLGlCQUFpQkEsRUFBTSxDQUMxQixPQUFRLENBQ0osTUFBUTZFLEdBQVdrYSxHQUFpQi9lLEVBQU02RSxDQUFNLENBRTVELEVBQ1EsUUFBUyxDQUNMLE1BQVFBLEdBQVdtYSxHQUFrQmhmLEVBQU02RSxDQUFNLENBRTdELEVBQ1EsU0FBVSxDQUNOLE1BQVFMLEdBQVUsQ0FDZHhFLEVBQUssT0FBTyxLQUFLd0UsQ0FBSyxFQUN0QnhFLEVBQUssUUFBVSxLQUFLLFVBQVVBLEVBQUssT0FBUXlFLEdBQTRCLENBQUMsQ0FDNUUsQ0FFWixFQUNRLFVBQVcsQ0FDUCxNQUFRUCxHQUFXLENBQ2ZsRSxFQUFLLE9BQU8sS0FBSyxHQUFHa0UsQ0FBTSxFQUMxQmxFLEVBQUssUUFBVSxLQUFLLFVBQVVBLEVBQUssT0FBUXlFLEdBQTRCLENBQUMsQ0FDNUUsQ0FFWixFQUNRLFFBQVMsQ0FDTCxLQUFNLENBQ0YsT0FBT3pFLEVBQUssT0FBTyxTQUFXLENBQ2xDLENBRVosQ0FDQSxDQUFLLENBTUwsRUFDYWlmLEdBQVdwVyxFQUFrQixXQUFZOUssRUFBVyxFQUNwRG1oQixHQUFlclcsRUFBa0IsV0FBWTlLLEdBQWEsQ0FDbkUsT0FBUSxLQUNaLENBQUMsRUMzQ1k5RixHQUF3QmtuQixHQUFZRCxFQUFZLEVBQ2hERSxHQUE2QkMsR0FBaUJILEVBQVksRUFDMURwWixHQUE0QndaLEdBQWdCSixFQUFZLEVBQ3hEalosR0FBaUNzWixHQUFxQkwsRUFBWSxFQUVsRU0sR0FBeUJDLEdBQWFQLEVBQVksRUFDbERRLEdBQXlCQyxHQUFhVCxFQUFZLEVBQ2xEVSxHQUE4QkMsR0FBa0JYLEVBQVksRUFDNURZLEdBQThCQyxHQUFrQmIsRUFBWSxFQUM1RGMsR0FBNkJDLEdBQWlCZixFQUFZLEVBQzFEZ0IsR0FBNkJDLEdBQWlCakIsRUFBWSxFQUMxRGtCLEdBQWtDQyxHQUFzQm5CLEVBQVksRUFDcEVvQixHQUFrQ0MsR0FBc0JyQixFQUFZLEVDUHBFc0IsR0FBd0IzWCxFQUFrQixVQUFXLENBQUM3SSxFQUFNaGIsS0FDckV5N0IsR0FBYyxLQUFLemdCLEVBQU1oYixDQUFHLEVBQzVCLE9BQU8sT0FBT2diLEVBQUssV0FBVyxFQUFHLENBQzdCLFdBQVksQ0FDUixNQUFPaWMsR0FBK0JqYyxFQUFNLE9BQU8sRUFDbkQsT0FBUWljLEdBQStCamMsRUFBTSxRQUFRLENBQ2pFLENBQ0EsQ0FBSyxFQUNEQSxFQUFLLGFBQWVrYyxHQUF5QmxjLEVBQU0sQ0FBQSxDQUFFLEVBQ3JEQSxFQUFLLElBQU1oYixFQUNYZ2IsRUFBSyxLQUFPaGIsRUFBSSxLQUNoQixPQUFPLGVBQWVnYixFQUFNLE9BQVEsQ0FBRSxNQUFPaGIsRUFBSyxFQUVsRGdiLEVBQUssTUFBUSxJQUFJcUQsSUFDTnJELEVBQUssTUFBTTBnQixHQUFlMTdCLEVBQUssQ0FDbEMsT0FBUSxDQUNKLEdBQUlBLEVBQUksUUFBVSxHQUNsQixHQUFHcWUsRUFBTyxJQUFLK0gsR0FBTyxPQUFPQSxHQUFPLFdBQWEsQ0FBRSxLQUFNLENBQUUsTUFBT0EsRUFBSSxJQUFLLENBQUUsTUFBTyxRQUFRLEVBQUksU0FBVSxDQUFBLENBQUUsQ0FBRSxFQUFLQSxDQUFFLENBQ3JJLENBQ0EsQ0FBUyxFQUFHLENBQ0EsT0FBUSxFQUNwQixDQUFTLEVBRUxwTCxFQUFLLEtBQU9BLEVBQUssTUFDakJBLEVBQUssTUFBUSxDQUFDaGIsRUFBS0gsSUFBVzg3QixHQUFXM2dCLEVBQU1oYixFQUFLSCxDQUFNLEVBQzFEbWIsRUFBSyxNQUFRLElBQU1BLEVBQ25CQSxFQUFLLFVBQVksQ0FBQzRnQixFQUFLdDhCLEtBQ25CczhCLEVBQUksSUFBSTVnQixFQUFNMWIsQ0FBSSxFQUNYMGIsSUFHWEEsRUFBSyxNQUFRLENBQUNtQyxFQUFNdGQsSUFBV2c4QixHQUFZN2dCLEVBQU1tQyxFQUFNdGQsRUFBUSxDQUFFLE9BQVFtYixFQUFLLEtBQUssQ0FBRSxFQUNyRkEsRUFBSyxVQUFZLENBQUNtQyxFQUFNdGQsSUFBV2k4QixHQUFnQjlnQixFQUFNbUMsRUFBTXRkLENBQU0sRUFDckVtYixFQUFLLFdBQWEsTUFBT21DLEVBQU10ZCxJQUFXazhCLEdBQWlCL2dCLEVBQU1tQyxFQUFNdGQsRUFBUSxDQUFFLE9BQVFtYixFQUFLLFVBQVUsQ0FBRSxFQUMxR0EsRUFBSyxlQUFpQixNQUFPbUMsRUFBTXRkLElBQVdtOEIsR0FBcUJoaEIsRUFBTW1DLEVBQU10ZCxDQUFNLEVBQ3JGbWIsRUFBSyxJQUFNQSxFQUFLLGVBRWhCQSxFQUFLLE9BQVMsQ0FBQ21DLEVBQU10ZCxJQUFXbzhCLEdBQWFqaEIsRUFBTW1DLEVBQU10ZCxDQUFNLEVBQy9EbWIsRUFBSyxPQUFTLENBQUNtQyxFQUFNdGQsSUFBV3E4QixHQUFhbGhCLEVBQU1tQyxFQUFNdGQsQ0FBTSxFQUMvRG1iLEVBQUssWUFBYyxNQUFPbUMsRUFBTXRkLElBQVdzOEIsR0FBa0JuaEIsRUFBTW1DLEVBQU10ZCxDQUFNLEVBQy9FbWIsRUFBSyxZQUFjLE1BQU9tQyxFQUFNdGQsSUFBV3U4QixHQUFrQnBoQixFQUFNbUMsRUFBTXRkLENBQU0sRUFDL0VtYixFQUFLLFdBQWEsQ0FBQ21DLEVBQU10ZCxJQUFXdzhCLEdBQWlCcmhCLEVBQU1tQyxFQUFNdGQsQ0FBTSxFQUN2RW1iLEVBQUssV0FBYSxDQUFDbUMsRUFBTXRkLElBQVd5OEIsR0FBaUJ0aEIsRUFBTW1DLEVBQU10ZCxDQUFNLEVBQ3ZFbWIsRUFBSyxnQkFBa0IsTUFBT21DLEVBQU10ZCxJQUFXMDhCLEdBQXNCdmhCLEVBQU1tQyxFQUFNdGQsQ0FBTSxFQUN2Rm1iLEVBQUssZ0JBQWtCLE1BQU9tQyxFQUFNdGQsSUFBVzI4QixHQUFzQnhoQixFQUFNbUMsRUFBTXRkLENBQU0sRUFFdkZtYixFQUFLLE9BQVMsQ0FBQzdVLEVBQU90RyxJQUFXbWIsRUFBSyxNQUFNeWhCLEdBQU90MkIsRUFBT3RHLENBQU0sQ0FBQyxFQUNqRW1iLEVBQUssWUFBZTBoQixHQUFlMWhCLEVBQUssTUFBTTJoQixHQUFZRCxDQUFVLENBQUMsRUFDckUxaEIsRUFBSyxVQUFhcmMsR0FBT3FjLEVBQUssTUFBTTRoQixHQUFpQmorQixDQUFFLENBQUMsRUFFeERxYyxFQUFLLFNBQVcsSUFBTTFLLEdBQVMwSyxDQUFJLEVBQ25DQSxFQUFLLGNBQWdCLElBQU02aEIsR0FBYzdoQixDQUFJLEVBQzdDQSxFQUFLLFNBQVcsSUFBTThoQixHQUFTOWhCLENBQUksRUFDbkNBLEVBQUssUUFBVSxJQUFNMUssR0FBU3dzQixHQUFTOWhCLENBQUksQ0FBQyxFQUM1Q0EsRUFBSyxZQUFlbmIsR0FBV2s5QixHQUFZL2hCLEVBQU1uYixDQUFNLEVBQ3ZEbWIsRUFBSyxNQUFRLElBQU1naUIsRUFBTWhpQixDQUFJLEVBQzdCQSxFQUFLLEdBQU04SyxHQUFRbVgsR0FBTSxDQUFDamlCLEVBQU04SyxDQUFHLENBQUMsRUFDcEM5SyxFQUFLLElBQU84SyxHQUFRb1gsR0FBYWxpQixFQUFNOEssQ0FBRyxFQUMxQzlLLEVBQUssVUFBYXlhLEdBQU8wSCxHQUFLbmlCLEVBQU1vaUIsR0FBVTNILENBQUUsQ0FBQyxFQUNqRHphLEVBQUssUUFBV2hiLEdBQVFxOUIsR0FBU3JpQixFQUFNaGIsQ0FBRyxFQUMxQ2diLEVBQUssU0FBWWhiLEdBQVFzOUIsR0FBU3RpQixFQUFNaGIsQ0FBRyxFQUUzQ2diLEVBQUssTUFBU25iLEdBQVcwOUIsR0FBT3ZpQixFQUFNbmIsQ0FBTSxFQUM1Q21iLEVBQUssS0FBUTBCLEdBQVd5Z0IsR0FBS25pQixFQUFNMEIsQ0FBTSxFQUN6QzFCLEVBQUssU0FBVyxJQUFNd2lCLEdBQVN4aUIsQ0FBSSxFQUVuQ0EsRUFBSyxTQUFZeWlCLEdBQWdCLENBQzdCLE1BQU0zZixFQUFLOUMsRUFBSyxNQUFLLEVBQ3JCMGlCLE9BQUFBLEdBQW9CLElBQUk1ZixFQUFJLENBQUUsWUFBQTJmLENBQVcsQ0FBRSxFQUNwQzNmLENBQ1gsRUFDQSxPQUFPLGVBQWU5QyxFQUFNLGNBQWUsQ0FDdkMsS0FBTSxPQUNGLE9BQU8waUIsRUFBQUEsR0FBb0IsSUFBSTFpQixDQUFJLElBQTVCMGlCLFlBQUFBLEVBQStCLFdBQzFDLEVBQ0EsYUFBYyxFQUN0QixDQUFLLEVBQ0QxaUIsRUFBSyxLQUFPLElBQUk1TSxJQUFTLENBQ3JCLEdBQUlBLEVBQUssU0FBVyxFQUNoQixPQUFPc3ZCLEdBQW9CLElBQUkxaUIsQ0FBSSxFQUV2QyxNQUFNOEMsRUFBSzlDLEVBQUssTUFBSyxFQUNyQjBpQixPQUFBQSxHQUFvQixJQUFJNWYsRUFBSTFQLEVBQUssQ0FBQyxDQUFDLEVBQzVCMFAsQ0FDWCxFQUVBOUMsRUFBSyxXQUFhLElBQU1BLEVBQUssVUFBVSxNQUFTLEVBQUUsUUFDbERBLEVBQUssV0FBYSxJQUFNQSxFQUFLLFVBQVUsSUFBSSxFQUFFLFFBQzdDQSxFQUFLLE1BQVNyYyxHQUFPQSxFQUFHcWMsQ0FBSSxFQUNyQkEsRUFDVixFQUVZMmlCLEdBQTJCOVosRUFBa0IsYUFBYyxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDbkY0OUIsR0FBZ0IsS0FBSzVpQixFQUFNaGIsQ0FBRyxFQUM5Qnc3QixHQUFRLEtBQUt4Z0IsRUFBTWhiLENBQUcsRUFDdEJnYixFQUFLLEtBQUssa0JBQW9CLENBQUMxVyxFQUFLOUQsRUFBTVgsSUFBV2crQixHQUEyQjdpQixFQUFNMVcsRUFBSzlELENBQVksRUFDdkcsTUFBTXlqQixFQUFNakosRUFBSyxLQUFLLElBQ3RCQSxFQUFLLE9BQVNpSixFQUFJLFFBQVUsS0FDNUJqSixFQUFLLFVBQVlpSixFQUFJLFNBQVcsS0FDaENqSixFQUFLLFVBQVlpSixFQUFJLFNBQVcsS0FFaENqSixFQUFLLE1BQVEsSUFBSTVNLElBQVM0TSxFQUFLLE1BQU04aUIsR0FBYSxHQUFHMXZCLENBQUksQ0FBQyxFQUMxRDRNLEVBQUssU0FBVyxJQUFJNU0sSUFBUzRNLEVBQUssTUFBTStpQixHQUFnQixHQUFHM3ZCLENBQUksQ0FBQyxFQUNoRTRNLEVBQUssV0FBYSxJQUFJNU0sSUFBUzRNLEVBQUssTUFBTWdqQixHQUFrQixHQUFHNXZCLENBQUksQ0FBQyxFQUNwRTRNLEVBQUssU0FBVyxJQUFJNU0sSUFBUzRNLEVBQUssTUFBTWlqQixHQUFnQixHQUFHN3ZCLENBQUksQ0FBQyxFQUNoRTRNLEVBQUssSUFBTSxJQUFJNU0sSUFBUzRNLEVBQUssTUFBTWtqQixHQUFpQixHQUFHOXZCLENBQUksQ0FBQyxFQUM1RDRNLEVBQUssSUFBTSxJQUFJNU0sSUFBUzRNLEVBQUssTUFBTW1qQixHQUFpQixHQUFHL3ZCLENBQUksQ0FBQyxFQUM1RDRNLEVBQUssT0FBUyxJQUFJNU0sSUFBUzRNLEVBQUssTUFBTW9qQixHQUFjLEdBQUdod0IsQ0FBSSxDQUFDLEVBQzVENE0sRUFBSyxTQUFXLElBQUk1TSxJQUFTNE0sRUFBSyxNQUFNa2pCLEdBQWlCLEVBQUcsR0FBRzl2QixDQUFJLENBQUMsRUFDcEU0TSxFQUFLLFVBQWFuYixHQUFXbWIsRUFBSyxNQUFNcWpCLEdBQWlCeCtCLENBQU0sQ0FBQyxFQUNoRW1iLEVBQUssVUFBYW5iLEdBQVdtYixFQUFLLE1BQU1zakIsR0FBaUJ6K0IsQ0FBTSxDQUFDLEVBRWhFbWIsRUFBSyxLQUFPLElBQU1BLEVBQUssTUFBTXVqQixHQUFXLENBQUUsRUFDMUN2akIsRUFBSyxVQUFZLElBQUk1TSxJQUFTNE0sRUFBSyxNQUFNd2pCLEdBQWlCLEdBQUdwd0IsQ0FBSSxDQUFDLEVBQ2xFNE0sRUFBSyxZQUFjLElBQU1BLEVBQUssTUFBTXlqQixHQUFrQixDQUFFLEVBQ3hEempCLEVBQUssWUFBYyxJQUFNQSxFQUFLLE1BQU0wakIsR0FBa0IsQ0FBRSxFQUN4RDFqQixFQUFLLFFBQVUsSUFBTUEsRUFBSyxNQUFNMmpCLEdBQWMsQ0FBRSxDQUNwRCxDQUFDLEVBQ1lDLEdBQTBCL2EsRUFBa0IsWUFBYSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDakY0OUIsR0FBZ0IsS0FBSzVpQixFQUFNaGIsQ0FBRyxFQUM5QjI5QixHQUFXLEtBQUszaUIsRUFBTWhiLENBQUcsRUFDekJnYixFQUFLLE1BQVNuYixHQUFXbWIsRUFBSyxNQUFNNmpCLEdBQVlDLEdBQVVqL0IsQ0FBTSxDQUFDLEVBQ2pFbWIsRUFBSyxJQUFPbmIsR0FBV21iLEVBQUssTUFBTStqQixHQUFVQyxHQUFRbi9CLENBQU0sQ0FBQyxFQUMzRG1iLEVBQUssSUFBT25iLEdBQVdtYixFQUFLLE1BQU1pa0IsR0FBVUMsR0FBUXIvQixDQUFNLENBQUMsRUFDM0RtYixFQUFLLE1BQVNuYixHQUFXbWIsRUFBSyxNQUFNbWtCLEdBQVlDLEdBQVV2L0IsQ0FBTSxDQUFDLEVBQ2pFbWIsRUFBSyxLQUFRbmIsR0FBV21iLEVBQUssTUFBTXFrQixHQUFXQyxHQUFTei9CLENBQU0sQ0FBQyxFQUM5RG1iLEVBQUssS0FBUW5iLEdBQVdtYixFQUFLLE1BQU11a0IsR0FBV0MsR0FBUzMvQixDQUFNLENBQUMsRUFDOURtYixFQUFLLE9BQVVuYixHQUFXbWIsRUFBSyxNQUFNeWtCLEdBQWFELEdBQVMzL0IsQ0FBTSxDQUFDLEVBQ2xFbWIsRUFBSyxPQUFVbmIsR0FBV21iLEVBQUssTUFBTTBrQixHQUFhRixHQUFTMy9CLENBQU0sQ0FBQyxFQUNsRW1iLEVBQUssT0FBVW5iLEdBQVdtYixFQUFLLE1BQU0ya0IsR0FBYUgsR0FBUzMvQixDQUFNLENBQUMsRUFDbEVtYixFQUFLLE9BQVVuYixHQUFXbWIsRUFBSyxNQUFNNGtCLEdBQWFDLEdBQVdoZ0MsQ0FBTSxDQUFDLEVBQ3BFbWIsRUFBSyxLQUFRbmIsR0FBV21iLEVBQUssTUFBTXFrQixHQUFXQyxHQUFTei9CLENBQU0sQ0FBQyxFQUM5RG1iLEVBQUssS0FBUW5iLEdBQVdtYixFQUFLLE1BQU04a0IsR0FBV0MsR0FBU2xnQyxDQUFNLENBQUMsRUFDOURtYixFQUFLLE1BQVNuYixHQUFXbWIsRUFBSyxNQUFNZ2xCLEdBQVlDLEdBQVVwZ0MsQ0FBTSxDQUFDLEVBQ2pFbWIsRUFBSyxLQUFRbmIsR0FBV21iLEVBQUssTUFBTWtsQixHQUFXQyxHQUFTdGdDLENBQU0sQ0FBQyxFQUM5RG1iLEVBQUssT0FBVW5iLEdBQVdtYixFQUFLLE1BQU1vbEIsR0FBYUMsR0FBV3hnQyxDQUFNLENBQUMsRUFDcEVtYixFQUFLLFVBQWFuYixHQUFXbWIsRUFBSyxNQUFNc2xCLEdBQWdCQyxHQUFjMWdDLENBQU0sQ0FBQyxFQUM3RW1iLEVBQUssSUFBT25iLEdBQVdtYixFQUFLLE1BQU13bEIsR0FBVUMsR0FBUTVnQyxDQUFNLENBQUMsRUFDM0RtYixFQUFLLE1BQVNuYixHQUFXbWIsRUFBSyxNQUFNMGxCLEdBQVlDLEdBQVU5Z0MsQ0FBTSxDQUFDLEVBQ2pFbWIsRUFBSyxLQUFRbmIsR0FBV21iLEVBQUssTUFBTTRsQixHQUFXQyxHQUFTaGhDLENBQU0sQ0FBQyxFQUM5RG1iLEVBQUssS0FBUW5iLEdBQVdtYixFQUFLLE1BQU04bEIsR0FBV0MsR0FBU2xoQyxDQUFNLENBQUMsRUFDOURtYixFQUFLLE9BQVVuYixHQUFXbWIsRUFBSyxNQUFNZ21CLEdBQWFDLEdBQVdwaEMsQ0FBTSxDQUFDLEVBQ3BFbWIsRUFBSyxPQUFVbmIsR0FBV21iLEVBQUssTUFBTWttQixHQUFhQyxHQUFXdGhDLENBQU0sQ0FBQyxFQUNwRW1iLEVBQUssS0FBUW5iLEdBQVdtYixFQUFLLE1BQU1vbUIsR0FBV0MsR0FBU3hoQyxDQUFNLENBQUMsRUFFOURtYixFQUFLLFNBQVluYixHQUFXbWIsRUFBSyxNQUFNc21CLEdBQWF6aEMsQ0FBTSxDQUFDLEVBQzNEbWIsRUFBSyxLQUFRbmIsR0FBV21iLEVBQUssTUFBTXVtQixHQUFTMWhDLENBQU0sQ0FBQyxFQUNuRG1iLEVBQUssS0FBUW5iLEdBQVdtYixFQUFLLE1BQU13bUIsR0FBUzNoQyxDQUFNLENBQUMsRUFDbkRtYixFQUFLLFNBQVluYixHQUFXbWIsRUFBSyxNQUFNeW1CLEdBQWE1aEMsQ0FBTSxDQUFDLENBQy9ELENBQUMsRUFDTSxTQUFTeWpCLEVBQU96akIsRUFBUSxDQUMzQixPQUFPNmhDLEdBQWE5QyxHQUFXLytCLENBQU0sQ0FDekMsQ0FDTyxNQUFNOGhDLEdBQWdDOWQsRUFBa0Isa0JBQW1CLENBQUM3SSxFQUFNaGIsSUFBUSxDQUM3RjRoQyxHQUFzQixLQUFLNW1CLEVBQU1oYixDQUFHLEVBQ3BDMjlCLEdBQVcsS0FBSzNpQixFQUFNaGIsQ0FBRyxDQUM3QixDQUFDLEVBQ1k4K0IsR0FBeUJqYixFQUFrQixXQUFZLENBQUM3SSxFQUFNaGIsSUFBUSxDQUUvRTZoQyxHQUFlLEtBQUs3bUIsRUFBTWhiLENBQUcsRUFDN0IyaEMsR0FBZ0IsS0FBSzNtQixFQUFNaGIsQ0FBRyxDQUNsQyxDQUFDLEVBSVlzL0IsR0FBd0J6YixFQUFrQixVQUFXLENBQUM3SSxFQUFNaGIsSUFBUSxDQUU3RThoQyxHQUFjLEtBQUs5bUIsRUFBTWhiLENBQUcsRUFDNUIyaEMsR0FBZ0IsS0FBSzNtQixFQUFNaGIsQ0FBRyxDQUNsQyxDQUFDLEVBSVl3L0IsR0FBd0IzYixFQUFrQixVQUFXLENBQUM3SSxFQUFNaGIsSUFBUSxDQUU3RStoQyxHQUFjLEtBQUsvbUIsRUFBTWhiLENBQUcsRUFDNUIyaEMsR0FBZ0IsS0FBSzNtQixFQUFNaGIsQ0FBRyxDQUNsQyxDQUFDLEVBZVlnL0IsR0FBdUJuYixFQUFrQixTQUFVLENBQUM3SSxFQUFNaGIsSUFBUSxDQUUzRWdpQyxHQUFhLEtBQUtobkIsRUFBTWhiLENBQUcsRUFDM0IyaEMsR0FBZ0IsS0FBSzNtQixFQUFNaGIsQ0FBRyxDQUNsQyxDQUFDLEVBV1lvL0IsR0FBeUJ2YixFQUFrQixXQUFZLENBQUM3SSxFQUFNaGIsSUFBUSxDQUUvRWlpQyxHQUFlLEtBQUtqbkIsRUFBTWhiLENBQUcsRUFDN0IyaEMsR0FBZ0IsS0FBSzNtQixFQUFNaGIsQ0FBRyxDQUNsQyxDQUFDLEVBSVk2L0IsR0FBMEJoYyxFQUFrQixZQUFhLENBQUM3SSxFQUFNaGIsSUFBUSxDQUVqRmtpQyxHQUFnQixLQUFLbG5CLEVBQU1oYixDQUFHLEVBQzlCMmhDLEdBQWdCLEtBQUszbUIsRUFBTWhiLENBQUcsQ0FDbEMsQ0FBQyxFQUlZKy9CLEdBQXdCbGMsRUFBa0IsVUFBVyxDQUFDN0ksRUFBTWhiLElBQVEsQ0FFN0VtaUMsR0FBYyxLQUFLbm5CLEVBQU1oYixDQUFHLEVBQzVCMmhDLEdBQWdCLEtBQUszbUIsRUFBTWhiLENBQUcsQ0FDbEMsQ0FBQyxFQUlZaWdDLEdBQXlCcGMsRUFBa0IsV0FBWSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FFL0VvaUMsR0FBZSxLQUFLcG5CLEVBQU1oYixDQUFHLEVBQzdCMmhDLEdBQWdCLEtBQUszbUIsRUFBTWhiLENBQUcsQ0FDbEMsQ0FBQyxFQUlZbWdDLEdBQXdCdGMsRUFBa0IsVUFBVyxDQUFDN0ksRUFBTWhiLElBQVEsQ0FFN0VxaUMsR0FBYyxLQUFLcm5CLEVBQU1oYixDQUFHLEVBQzVCMmhDLEdBQWdCLEtBQUszbUIsRUFBTWhiLENBQUcsQ0FDbEMsQ0FBQyxFQUlZeWdDLEdBQXVCNWMsRUFBa0IsU0FBVSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FFM0VzaUMsR0FBYSxLQUFLdG5CLEVBQU1oYixDQUFHLEVBQzNCMmhDLEdBQWdCLEtBQUszbUIsRUFBTWhiLENBQUcsQ0FDbEMsQ0FBQyxFQUlZMmdDLEdBQXlCOWMsRUFBa0IsV0FBWSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FFL0V1aUMsR0FBZSxLQUFLdm5CLEVBQU1oYixDQUFHLEVBQzdCMmhDLEdBQWdCLEtBQUszbUIsRUFBTWhiLENBQUcsQ0FDbEMsQ0FBQyxFQUlZNmdDLEdBQXdCaGQsRUFBa0IsVUFBVyxDQUFDN0ksRUFBTWhiLElBQVEsQ0FFN0V3aUMsR0FBYyxLQUFLeG5CLEVBQU1oYixDQUFHLEVBQzVCMmhDLEdBQWdCLEtBQUszbUIsRUFBTWhiLENBQUcsQ0FDbEMsQ0FBQyxFQVlZK2dDLEdBQXdCbGQsRUFBa0IsVUFBVyxDQUFDN0ksRUFBTWhiLElBQVEsQ0FFN0V5aUMsR0FBYyxLQUFLem5CLEVBQU1oYixDQUFHLEVBQzVCMmhDLEdBQWdCLEtBQUszbUIsRUFBTWhiLENBQUcsQ0FDbEMsQ0FBQyxFQUlZaWhDLEdBQTBCcGQsRUFBa0IsWUFBYSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDakYwaUMsR0FBZ0IsS0FBSzFuQixFQUFNaGIsQ0FBRyxFQUM5QjJoQyxHQUFnQixLQUFLM21CLEVBQU1oYixDQUFHLENBQ2xDLENBQUMsRUFJWW1oQyxHQUEwQnRkLEVBQWtCLFlBQWEsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ2pGMmlDLEdBQWdCLEtBQUszbkIsRUFBTWhiLENBQUcsRUFDOUIyaEMsR0FBZ0IsS0FBSzNtQixFQUFNaGIsQ0FBRyxDQUNsQyxDQUFDLEVBSVlxZ0MsR0FBMEJ4YyxFQUFrQixZQUFhLENBQUM3SSxFQUFNaGIsSUFBUSxDQUVqRjRpQyxHQUFnQixLQUFLNW5CLEVBQU1oYixDQUFHLEVBQzlCMmhDLEdBQWdCLEtBQUszbUIsRUFBTWhiLENBQUcsQ0FDbEMsQ0FBQyxFQUlZdWdDLEdBQTZCMWMsRUFBa0IsZUFBZ0IsQ0FBQzdJLEVBQU1oYixJQUFRLENBRXZGNmlDLEdBQW1CLEtBQUs3bkIsRUFBTWhiLENBQUcsRUFDakMyaEMsR0FBZ0IsS0FBSzNtQixFQUFNaGIsQ0FBRyxDQUNsQyxDQUFDLEVBSVlxaEMsR0FBd0J4ZCxFQUFrQixVQUFXLENBQUM3SSxFQUFNaGIsSUFBUSxDQUU3RThpQyxHQUFjLEtBQUs5bkIsRUFBTWhiLENBQUcsRUFDNUIyaEMsR0FBZ0IsS0FBSzNtQixFQUFNaGIsQ0FBRyxDQUNsQyxDQUFDLEVBSVlrL0IsR0FBdUJyYixFQUFrQixTQUFVLENBQUM3SSxFQUFNaGIsSUFBUSxDQUUzRStpQyxHQUFhLEtBQUsvbkIsRUFBTWhiLENBQUcsRUFDM0IyaEMsR0FBZ0IsS0FBSzNtQixFQUFNaGIsQ0FBRyxDQUNsQyxDQUFDLEVBMEJZZ2pDLEdBQTBCbmYsRUFBa0IsWUFBYSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDakZpakMsR0FBZ0IsS0FBS2pvQixFQUFNaGIsQ0FBRyxFQUM5Qnc3QixHQUFRLEtBQUt4Z0IsRUFBTWhiLENBQUcsRUFDdEJnYixFQUFLLEtBQUssa0JBQW9CLENBQUMxVyxFQUFLOUQsRUFBTVgsSUFBV3FqQyxHQUEyQmxvQixFQUFNMVcsRUFBSzlELENBQVksRUFDdkd3YSxFQUFLLEdBQUssQ0FBQ25WLEVBQU9oRyxJQUFXbWIsRUFBSyxNQUFNbW9CLEdBQVV0OUIsRUFBT2hHLENBQU0sQ0FBQyxFQUNoRW1iLEVBQUssSUFBTSxDQUFDblYsRUFBT2hHLElBQVdtYixFQUFLLE1BQU1vb0IsR0FBV3Y5QixFQUFPaEcsQ0FBTSxDQUFDLEVBQ2xFbWIsRUFBSyxJQUFNLENBQUNuVixFQUFPaEcsSUFBV21iLEVBQUssTUFBTW9vQixHQUFXdjlCLEVBQU9oRyxDQUFNLENBQUMsRUFDbEVtYixFQUFLLEdBQUssQ0FBQ25WLEVBQU9oRyxJQUFXbWIsRUFBSyxNQUFNcW9CLEdBQVV4OUIsRUFBT2hHLENBQU0sQ0FBQyxFQUNoRW1iLEVBQUssSUFBTSxDQUFDblYsRUFBT2hHLElBQVdtYixFQUFLLE1BQU1zb0IsR0FBV3o5QixFQUFPaEcsQ0FBTSxDQUFDLEVBQ2xFbWIsRUFBSyxJQUFNLENBQUNuVixFQUFPaEcsSUFBV21iLEVBQUssTUFBTXNvQixHQUFXejlCLEVBQU9oRyxDQUFNLENBQUMsRUFDbEVtYixFQUFLLElBQU9uYixHQUFXbWIsRUFBSyxNQUFNdW9CLEdBQUkxakMsQ0FBTSxDQUFDLEVBQzdDbWIsRUFBSyxLQUFRbmIsR0FBV21iLEVBQUssTUFBTXVvQixHQUFJMWpDLENBQU0sQ0FBQyxFQUM5Q21iLEVBQUssU0FBWW5iLEdBQVdtYixFQUFLLE1BQU1tb0IsR0FBVSxFQUFHdGpDLENBQU0sQ0FBQyxFQUMzRG1iLEVBQUssWUFBZW5iLEdBQVdtYixFQUFLLE1BQU1vb0IsR0FBVyxFQUFHdmpDLENBQU0sQ0FBQyxFQUMvRG1iLEVBQUssU0FBWW5iLEdBQVdtYixFQUFLLE1BQU1xb0IsR0FBVSxFQUFHeGpDLENBQU0sQ0FBQyxFQUMzRG1iLEVBQUssWUFBZW5iLEdBQVdtYixFQUFLLE1BQU1zb0IsR0FBVyxFQUFHempDLENBQU0sQ0FBQyxFQUMvRG1iLEVBQUssV0FBYSxDQUFDblYsRUFBT2hHLElBQVdtYixFQUFLLE1BQU13b0IsR0FBa0IzOUIsRUFBT2hHLENBQU0sQ0FBQyxFQUNoRm1iLEVBQUssS0FBTyxDQUFDblYsRUFBT2hHLElBQVdtYixFQUFLLE1BQU13b0IsR0FBa0IzOUIsRUFBT2hHLENBQU0sQ0FBQyxFQUUxRW1iLEVBQUssT0FBUyxJQUFNQSxFQUNwQixNQUFNaUosRUFBTWpKLEVBQUssS0FBSyxJQUN0QkEsRUFBSyxTQUNELEtBQUssSUFBSWlKLEVBQUksU0FBVyxPQUFPLGtCQUFtQkEsRUFBSSxrQkFBb0IsT0FBTyxpQkFBaUIsR0FBSyxLQUMzR2pKLEVBQUssU0FDRCxLQUFLLElBQUlpSixFQUFJLFNBQVcsT0FBTyxrQkFBbUJBLEVBQUksa0JBQW9CLE9BQU8saUJBQWlCLEdBQUssS0FDM0dqSixFQUFLLE9BQVNpSixFQUFJLFFBQVUsSUFBSSxTQUFTLEtBQUssR0FBSyxPQUFPLGNBQWNBLEVBQUksWUFBYyxFQUFHLEVBQzdGakosRUFBSyxTQUFXLEdBQ2hCQSxFQUFLLE9BQVNpSixFQUFJLFFBQVUsSUFDaEMsQ0FBQyxFQUNNLFNBQVNULEVBQU8zakIsRUFBUSxDQUMzQixPQUFPNGpDLEdBQWFULEdBQVduakMsQ0FBTSxDQUN6QyxDQUNPLE1BQU02akMsR0FBZ0M3ZixFQUFrQixrQkFBbUIsQ0FBQzdJLEVBQU1oYixJQUFRLENBQzdGMmpDLEdBQXNCLEtBQUszb0IsRUFBTWhiLENBQUcsRUFDcENnakMsR0FBVSxLQUFLaG9CLEVBQU1oYixDQUFHLENBQzVCLENBQUMsRUFDTSxTQUFTdWpDLEdBQUkxakMsRUFBUSxDQUN4QixPQUFPK2pDLEdBQVVGLEdBQWlCN2pDLENBQU0sQ0FDNUMsQ0FhTyxNQUFNZ2tDLEdBQTJCaGdCLEVBQWtCLGFBQWMsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ25GOGpDLEdBQWlCLEtBQUs5b0IsRUFBTWhiLENBQUcsRUFDL0J3N0IsR0FBUSxLQUFLeGdCLEVBQU1oYixDQUFHLEVBQ3RCZ2IsRUFBSyxLQUFLLGtCQUFvQixDQUFDMVcsRUFBSzlELEVBQU1YLElBQVdra0MsR0FBNEIvb0IsRUFBTTFXLEVBQUs5RCxDQUFZLENBQzVHLENBQUMsRUFDTSxTQUFTaWpCLEdBQVE1akIsRUFBUSxDQUM1QixPQUFPbWtDLEdBQWNILEdBQVloa0MsQ0FBTSxDQUMzQyxDQWdFTyxNQUFNb2tDLEdBQXVCcGdCLEVBQWtCLFNBQVUsQ0FBQzdJLEVBQU1oYixJQUFRLENBQzNFa2tDLEdBQWEsS0FBS2xwQixFQUFNaGIsQ0FBRyxFQUMzQnc3QixHQUFRLEtBQUt4Z0IsRUFBTWhiLENBQUcsRUFDdEJnYixFQUFLLEtBQUssa0JBQW9CLENBQUMxVyxFQUFLOUQsRUFBTVgsSUFBV3NrQyxHQUErQyxDQUN4RyxDQUFDLEVBQ00sU0FBU0MsR0FBTSxDQUNsQixPQUFPQyxHQUFVSixFQUFNLENBQzNCLENBQ08sTUFBTUssR0FBMkJ6Z0IsRUFBa0IsYUFBYyxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDbkZ1a0MsR0FBaUIsS0FBS3ZwQixFQUFNaGIsQ0FBRyxFQUMvQnc3QixHQUFRLEtBQUt4Z0IsRUFBTWhiLENBQUcsRUFDdEJnYixFQUFLLEtBQUssa0JBQW9CLENBQUMxVyxFQUFLOUQsRUFBTVgsSUFBVzJrQyxHQUFtRCxDQUM1RyxDQUFDLEVBQ00sU0FBU0MsSUFBVSxDQUN0QixPQUFPQyxHQUFjSixFQUFVLENBQ25DLENBQ08sTUFBTUssR0FBeUI5Z0IsRUFBa0IsV0FBWSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDL0U0a0MsR0FBZSxLQUFLNXBCLEVBQU1oYixDQUFHLEVBQzdCdzdCLEdBQVEsS0FBS3hnQixFQUFNaGIsQ0FBRyxFQUN0QmdiLEVBQUssS0FBSyxrQkFBb0IsQ0FBQzFXLEVBQUs5RCxFQUFNWCxJQUFXZ2xDLEdBQTBCN3BCLEVBQU0xVyxFQUFLOUQsQ0FBWSxDQUMxRyxDQUFDLEVBQ00sU0FBU3NrQyxHQUFNamxDLEVBQVEsQ0FDMUIsT0FBT2tsQyxHQUFZSixHQUFVOWtDLENBQU0sQ0FDdkMsQ0F1Qk8sTUFBTW1sQyxHQUF5Qm5oQixFQUFrQixXQUFZLENBQUM3SSxFQUFNaGIsSUFBUSxDQUMvRWlsQyxHQUFlLEtBQUtqcUIsRUFBTWhiLENBQUcsRUFDN0J3N0IsR0FBUSxLQUFLeGdCLEVBQU1oYixDQUFHLEVBQ3RCZ2IsRUFBSyxLQUFLLGtCQUFvQixDQUFDMVcsRUFBSzlELEVBQU1YLElBQVdxbEMsR0FBMEJscUIsRUFBTTFXLEVBQUs5RCxFQUFNWCxDQUFNLEVBQ3RHbWIsRUFBSyxRQUFVaGIsRUFBSSxRQUNuQmdiLEVBQUssSUFBTSxDQUFDbXFCLEVBQVd0bEMsSUFBV21iLEVBQUssTUFBTWtqQixHQUFpQmlILEVBQVd0bEMsQ0FBTSxDQUFDLEVBQ2hGbWIsRUFBSyxTQUFZbmIsR0FBV21iLEVBQUssTUFBTWtqQixHQUFpQixFQUFHcitCLENBQU0sQ0FBQyxFQUNsRW1iLEVBQUssSUFBTSxDQUFDb3FCLEVBQVd2bEMsSUFBV21iLEVBQUssTUFBTW1qQixHQUFpQmlILEVBQVd2bEMsQ0FBTSxDQUFDLEVBQ2hGbWIsRUFBSyxPQUFTLENBQUNxcUIsRUFBS3hsQyxJQUFXbWIsRUFBSyxNQUFNb2pCLEdBQWNpSCxFQUFLeGxDLENBQU0sQ0FBQyxFQUNwRW1iLEVBQUssT0FBUyxJQUFNQSxFQUFLLE9BQzdCLENBQUMsRUFDTSxTQUFTZ2lCLEVBQU03RyxFQUFTdDJCLEVBQVEsQ0FDbkMsT0FBT3lsQyxHQUFZTixHQUFVN08sRUFBU3QyQixDQUFNLENBQ2hELENBTU8sTUFBTTBsQyxHQUEwQjFoQixFQUFrQixZQUFhLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNqRndsQyxHQUFtQixLQUFLeHFCLEVBQU1oYixDQUFHLEVBQ2pDdzdCLEdBQVEsS0FBS3hnQixFQUFNaGIsQ0FBRyxFQUN0QmdiLEVBQUssS0FBSyxrQkFBb0IsQ0FBQzFXLEVBQUs5RCxFQUFNWCxJQUFXNGxDLEdBQTJCenFCLEVBQU0xVyxFQUFLOUQsRUFBTVgsQ0FBTSxFQUN2R2duQixFQUFnQjdMLEVBQU0sUUFBUyxJQUNwQmhiLEVBQUksS0FDZCxFQUNEZ2IsRUFBSyxNQUFRLElBQU0wcUIsR0FBTSxPQUFPLEtBQUsxcUIsRUFBSyxLQUFLLElBQUksS0FBSyxDQUFDLEVBQ3pEQSxFQUFLLFNBQVk4UixHQUFhOVIsRUFBSyxNQUFNLENBQUUsR0FBR0EsRUFBSyxLQUFLLElBQUssU0FBVThSLENBQVEsQ0FBRSxFQUNqRjlSLEVBQUssWUFBYyxJQUFNQSxFQUFLLE1BQU0sQ0FBRSxHQUFHQSxFQUFLLEtBQUssSUFBSyxTQUFVeXBCLEdBQU8sQ0FBRSxDQUFFLEVBQzdFenBCLEVBQUssTUFBUSxJQUFNQSxFQUFLLE1BQU0sQ0FBRSxHQUFHQSxFQUFLLEtBQUssSUFBSyxTQUFVeXBCLEdBQU8sQ0FBRSxDQUFFLEVBQ3ZFenBCLEVBQUssT0FBUyxJQUFNQSxFQUFLLE1BQU0sQ0FBRSxHQUFHQSxFQUFLLEtBQUssSUFBSyxTQUFVOHBCLEdBQUssQ0FBRSxDQUFFLEVBQ3RFOXBCLEVBQUssTUFBUSxJQUFNQSxFQUFLLE1BQU0sQ0FBRSxHQUFHQSxFQUFLLEtBQUssSUFBSyxTQUFVLE1BQVMsQ0FBRSxFQUN2RUEsRUFBSyxPQUFVMnFCLEdBQ0pDLEdBQVk1cUIsRUFBTTJxQixDQUFRLEVBRXJDM3FCLEVBQUssV0FBYzJxQixHQUNSRSxHQUFnQjdxQixFQUFNMnFCLENBQVEsRUFFekMzcUIsRUFBSyxNQUFTOHFCLEdBQVVDLEdBQVcvcUIsRUFBTThxQixDQUFLLEVBQzlDOXFCLEVBQUssS0FBUW1ELEdBQVM2bkIsR0FBVWhyQixFQUFNbUQsQ0FBSSxFQUMxQ25ELEVBQUssS0FBUW1ELEdBQVM4bkIsR0FBVWpyQixFQUFNbUQsQ0FBSSxFQUMxQ25ELEVBQUssUUFBVSxJQUFJNU0sSUFBUzgzQixHQUFhQyxHQUFhbnJCLEVBQU01TSxFQUFLLENBQUMsQ0FBQyxFQUNuRTRNLEVBQUssU0FBVyxJQUFJNU0sSUFBU2c0QixHQUFjQyxHQUFnQnJyQixFQUFNNU0sRUFBSyxDQUFDLENBQUMsQ0FDNUUsQ0FBQyxFQUNNLFNBQVNwRixFQUFPN0gsRUFBT3RCLEVBQVEsQ0FDbEMsTUFBTUcsRUFBTSxDQUNSLEtBQU0sU0FDTixNQUFPbUIsR0FBUyxDQUFBLEVBQ2hCLEdBQUd5d0IsRUFBcUIveEIsQ0FBTSxDQUN0QyxFQUNJLE9BQU8sSUFBSTBsQyxHQUFVdmxDLENBQUcsQ0FDNUIsQ0FtQk8sTUFBTXNtQyxHQUF5QnppQixFQUFrQixXQUFZLENBQUM3SSxFQUFNaGIsSUFBUSxDQUMvRXVtQyxHQUFlLEtBQUt2ckIsRUFBTWhiLENBQUcsRUFDN0J3N0IsR0FBUSxLQUFLeGdCLEVBQU1oYixDQUFHLEVBQ3RCZ2IsRUFBSyxLQUFLLGtCQUFvQixDQUFDMVcsRUFBSzlELEVBQU1YLElBQVcybUMsR0FBMEJ4ckIsRUFBTTFXLEVBQUs5RCxFQUFNWCxDQUFNLEVBQ3RHbWIsRUFBSyxRQUFVaGIsRUFBSSxPQUN2QixDQUFDLEVBQ00sU0FBU2k5QixHQUFNajRCLEVBQVNuRixFQUFRLENBQ25DLE9BQU8sSUFBSXltQyxHQUFTLENBQ2hCLEtBQU0sUUFDTixRQUFTdGhDLEVBQ1QsR0FBRzRzQixFQUFxQi94QixDQUFNLENBQ3RDLENBQUssQ0FDTCxDQWtCTyxNQUFNNG1DLEdBQXNDNWlCLEVBQWtCLHdCQUF5QixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDekdzbUMsR0FBUyxLQUFLdHJCLEVBQU1oYixDQUFHLEVBQ3ZCMG1DLEdBQTRCLEtBQUsxckIsRUFBTWhiLENBQUcsQ0FDOUMsQ0FBQyxFQUNNLFNBQVMybUMsR0FBbUJDLEVBQWU1aEMsRUFBU25GLEVBQVEsQ0FFL0QsT0FBTyxJQUFJNG1DLEdBQXNCLENBQzdCLEtBQU0sUUFDTixRQUFBemhDLEVBQ0EsY0FBQTRoQyxFQUNBLEdBQUdoVixFQUFxQi94QixDQUFNLENBQ3RDLENBQUssQ0FDTCxDQUNPLE1BQU1nbkMsR0FBZ0NoakIsRUFBa0Isa0JBQW1CLENBQUM3SSxFQUFNaGIsSUFBUSxDQUM3RjhtQyxHQUFzQixLQUFLOXJCLEVBQU1oYixDQUFHLEVBQ3BDdzdCLEdBQVEsS0FBS3hnQixFQUFNaGIsQ0FBRyxFQUN0QmdiLEVBQUssS0FBSyxrQkFBb0IsQ0FBQzFXLEVBQUs5RCxFQUFNWCxJQUFXa25DLEdBQWlDL3JCLEVBQU0xVyxFQUFLOUQsRUFBTVgsQ0FBTSxDQUNqSCxDQUFDLEVBQ00sU0FBU3E5QixHQUFhenJCLEVBQU1DLEVBQU8sQ0FDdEMsT0FBTyxJQUFJbTFCLEdBQWdCLENBQ3ZCLEtBQU0sZUFDTixLQUFNcDFCLEVBQ04sTUFBT0MsQ0FDZixDQUFLLENBQ0wsQ0FxQk8sTUFBTXMxQixHQUEwQm5qQixFQUFrQixZQUFhLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNqRmluQyxHQUFnQixLQUFLanNCLEVBQU1oYixDQUFHLEVBQzlCdzdCLEdBQVEsS0FBS3hnQixFQUFNaGIsQ0FBRyxFQUN0QmdiLEVBQUssS0FBSyxrQkFBb0IsQ0FBQzFXLEVBQUs5RCxFQUFNWCxJQUFXcW5DLEdBQTJCbHNCLEVBQU0xVyxFQUFLOUQsRUFBTVgsQ0FBTSxFQUN2R21iLEVBQUssUUFBVWhiLEVBQUksUUFDbkJnYixFQUFLLFVBQVloYixFQUFJLFNBQ3pCLENBQUMsRUFDTSxTQUFTbW5DLEVBQU92K0IsRUFBU3crQixFQUFXdm5DLEVBQVEsQ0FDL0MsT0FBTyxJQUFJbW5DLEdBQVUsQ0FDakIsS0FBTSxTQUNOLFFBQUFwK0IsRUFDQSxVQUFXdytCLEVBQ1gsR0FBR3hWLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBd0RPLE1BQU13bkMsR0FBd0J4akIsRUFBa0IsVUFBVyxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDN0VzbkMsR0FBYyxLQUFLdHNCLEVBQU1oYixDQUFHLEVBQzVCdzdCLEdBQVEsS0FBS3hnQixFQUFNaGIsQ0FBRyxFQUN0QmdiLEVBQUssS0FBSyxrQkFBb0IsQ0FBQzFXLEVBQUs5RCxFQUFNWCxJQUFXMG5DLEdBQXlCdnNCLEVBQU0xVyxFQUFLOUQsQ0FBWSxFQUNyR3dhLEVBQUssS0FBT2hiLEVBQUksUUFDaEJnYixFQUFLLFFBQVUsT0FBTyxPQUFPaGIsRUFBSSxPQUFPLEVBQ3hDLE1BQU04SSxFQUFPLElBQUksSUFBSSxPQUFPLEtBQUs5SSxFQUFJLE9BQU8sQ0FBQyxFQUM3Q2diLEVBQUssUUFBVSxDQUFDL1ksRUFBUXBDLElBQVcsQ0FDL0IsTUFBTTJuQyxFQUFhLENBQUEsRUFDbkIsVUFBVzNoQyxLQUFTNUQsRUFDaEIsR0FBSTZHLEVBQUssSUFBSWpELENBQUssRUFDZDJoQyxFQUFXM2hDLENBQUssRUFBSTdGLEVBQUksUUFBUTZGLENBQUssTUFHckMsT0FBTSxJQUFJLE1BQU0sT0FBT0EsQ0FBSyxvQkFBb0IsRUFFeEQsT0FBTyxJQUFJd2hDLEdBQVEsQ0FDZixHQUFHcm5DLEVBQ0gsT0FBUSxDQUFBLEVBQ1IsR0FBRzR4QixFQUFxQi94QixDQUFNLEVBQzlCLFFBQVMybkMsQ0FDckIsQ0FBUyxDQUNMLEVBQ0F4c0IsRUFBSyxRQUFVLENBQUMvWSxFQUFRcEMsSUFBVyxDQUMvQixNQUFNMm5DLEVBQWEsQ0FBRSxHQUFHeG5DLEVBQUksT0FBTyxFQUNuQyxVQUFXNkYsS0FBUzVELEVBQ2hCLEdBQUk2RyxFQUFLLElBQUlqRCxDQUFLLEVBQ2QsT0FBTzJoQyxFQUFXM2hDLENBQUssTUFHdkIsT0FBTSxJQUFJLE1BQU0sT0FBT0EsQ0FBSyxvQkFBb0IsRUFFeEQsT0FBTyxJQUFJd2hDLEdBQVEsQ0FDZixHQUFHcm5DLEVBQ0gsT0FBUSxDQUFBLEVBQ1IsR0FBRzR4QixFQUFxQi94QixDQUFNLEVBQzlCLFFBQVMybkMsQ0FDckIsQ0FBUyxDQUNMLENBQ0osQ0FBQyxFQUNELFNBQVM5QixHQUFNempDLEVBQVFwQyxFQUFRLENBQzNCLE1BQU1mLEVBQVUsTUFBTSxRQUFRbUQsQ0FBTSxFQUFJLE9BQU8sWUFBWUEsRUFBTyxJQUFLakQsR0FBTSxDQUFDQSxFQUFHQSxDQUFDLENBQUMsQ0FBQyxFQUFJaUQsRUFDeEYsT0FBTyxJQUFJb2xDLEdBQVEsQ0FDZixLQUFNLE9BQ04sUUFBQXZvQyxFQUNBLEdBQUc4eUIsRUFBcUIveEIsQ0FBTSxDQUN0QyxDQUFLLENBQ0wsQ0FnQk8sTUFBTTRuQyxHQUEyQjVqQixFQUFrQixhQUFjLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNuRjBuQyxHQUFpQixLQUFLMXNCLEVBQU1oYixDQUFHLEVBQy9CdzdCLEdBQVEsS0FBS3hnQixFQUFNaGIsQ0FBRyxFQUN0QmdiLEVBQUssS0FBSyxrQkFBb0IsQ0FBQzFXLEVBQUs5RCxFQUFNWCxJQUFXOG5DLEdBQTRCM3NCLEVBQU0xVyxFQUFLOUQsQ0FBWSxFQUN4R3dhLEVBQUssT0FBUyxJQUFJLElBQUloYixFQUFJLE1BQU0sRUFDaEMsT0FBTyxlQUFlZ2IsRUFBTSxRQUFTLENBQ2pDLEtBQU0sQ0FDRixHQUFJaGIsRUFBSSxPQUFPLE9BQVMsRUFDcEIsTUFBTSxJQUFJLE1BQU0sNEVBQTRFLEVBRWhHLE9BQU9BLEVBQUksT0FBTyxDQUFDLENBQ3ZCLENBQ1IsQ0FBSyxDQUNMLENBQUMsRUFDTSxTQUFTNFIsRUFBUS9MLEVBQU9oRyxFQUFRLENBQ25DLE9BQU8sSUFBSTRuQyxHQUFXLENBQ2xCLEtBQU0sVUFDTixPQUFRLE1BQU0sUUFBUTVoQyxDQUFLLEVBQUlBLEVBQVEsQ0FBQ0EsQ0FBSyxFQUM3QyxHQUFHK3JCLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxDQUNMLENBWU8sTUFBTStuQyxHQUE2Qi9qQixFQUFrQixlQUFnQixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDdkY2bkMsR0FBbUIsS0FBSzdzQixFQUFNaGIsQ0FBRyxFQUNqQ3c3QixHQUFRLEtBQUt4Z0IsRUFBTWhiLENBQUcsRUFDdEJnYixFQUFLLEtBQUssa0JBQW9CLENBQUMxVyxFQUFLOUQsRUFBTVgsSUFBV2lvQyxHQUE4QjlzQixFQUFNMVcsQ0FBaUIsRUFDMUcwVyxFQUFLLEtBQUssTUFBUSxDQUFDa0osRUFBUzdmLElBQVMsQ0FDakMsR0FBSUEsRUFBSyxZQUFjLFdBQ25CLE1BQU0sSUFBSWdzQixHQUFxQnJWLEVBQUssWUFBWSxJQUFJLEVBRXhEa0osRUFBUSxTQUFZMUUsR0FBVSxDQUMxQixHQUFJLE9BQU9BLEdBQVUsU0FDakIwRSxFQUFRLE9BQU8sS0FBS3dOLEdBQVdsUyxFQUFPMEUsRUFBUSxNQUFPbGtCLENBQUcsQ0FBQyxNQUV4RCxDQUVELE1BQU11MkIsRUFBUy9XLEVBQ1grVyxFQUFPLFFBQ1BBLEVBQU8sU0FBVyxJQUN0QkEsRUFBTyxPQUFTQSxFQUFPLEtBQU8sVUFDOUJBLEVBQU8sUUFBVUEsRUFBTyxNQUFRclMsRUFBUSxPQUN4Q3FTLEVBQU8sT0FBU0EsRUFBTyxLQUFPdmIsR0FFOUJrSixFQUFRLE9BQU8sS0FBS3dOLEdBQVc2RSxDQUFNLENBQUMsQ0FDMUMsQ0FDSixFQUNBLE1BQU03akIsRUFBUzFTLEVBQUksVUFBVWtrQixFQUFRLE1BQU9BLENBQU8sRUFDbkQsT0FBSXhSLGFBQWtCLFFBQ1hBLEVBQU8sS0FBTUEsSUFDaEJ3UixFQUFRLE1BQVF4UixFQUNUd1IsRUFDVixHQUVMQSxFQUFRLE1BQVF4UixFQUNUd1IsRUFDWCxDQUNKLENBQUMsRUFDTSxTQUFTa1osR0FBVXorQixFQUFJLENBQzFCLE9BQU8sSUFBSWlwQyxHQUFhLENBQ3BCLEtBQU0sWUFDTixVQUFXanBDLENBQ25CLENBQUssQ0FDTCxDQUNPLE1BQU13bkMsR0FBNEJ0aUIsRUFBa0IsY0FBZSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDckYrbkMsR0FBa0IsS0FBSy9zQixFQUFNaGIsQ0FBRyxFQUNoQ3c3QixHQUFRLEtBQUt4Z0IsRUFBTWhiLENBQUcsRUFDdEJnYixFQUFLLEtBQUssa0JBQW9CLENBQUMxVyxFQUFLOUQsRUFBTVgsSUFBV21vQyxHQUE2Qmh0QixFQUFNMVcsRUFBSzlELEVBQU1YLENBQU0sRUFDekdtYixFQUFLLE9BQVMsSUFBTUEsRUFBSyxLQUFLLElBQUksU0FDdEMsQ0FBQyxFQUNNLFNBQVMxSyxHQUFTN04sRUFBVyxDQUNoQyxPQUFPLElBQUkwakMsR0FBWSxDQUNuQixLQUFNLFdBQ04sVUFBVzFqQyxDQUNuQixDQUFLLENBQ0wsQ0FDTyxNQUFNd2xDLEdBQWlDcGtCLEVBQWtCLG1CQUFvQixDQUFDN0ksRUFBTWhiLElBQVEsQ0FDL0Zrb0MsR0FBdUIsS0FBS2x0QixFQUFNaGIsQ0FBRyxFQUNyQ3c3QixHQUFRLEtBQUt4Z0IsRUFBTWhiLENBQUcsRUFDdEJnYixFQUFLLEtBQUssa0JBQW9CLENBQUMxVyxFQUFLOUQsRUFBTVgsSUFBV21vQyxHQUE2Qmh0QixFQUFNMVcsRUFBSzlELEVBQU1YLENBQU0sRUFDekdtYixFQUFLLE9BQVMsSUFBTUEsRUFBSyxLQUFLLElBQUksU0FDdEMsQ0FBQyxFQUNNLFNBQVM2aEIsR0FBY3A2QixFQUFXLENBQ3JDLE9BQU8sSUFBSXdsQyxHQUFpQixDQUN4QixLQUFNLFdBQ04sVUFBV3hsQyxDQUNuQixDQUFLLENBQ0wsQ0FDTyxNQUFNMGxDLEdBQTRCdGtCLEVBQWtCLGNBQWUsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ3JGb29DLEdBQWtCLEtBQUtwdEIsRUFBTWhiLENBQUcsRUFDaEN3N0IsR0FBUSxLQUFLeGdCLEVBQU1oYixDQUFHLEVBQ3RCZ2IsRUFBSyxLQUFLLGtCQUFvQixDQUFDMVcsRUFBSzlELEVBQU1YLElBQVd3b0MsR0FBNkJydEIsRUFBTTFXLEVBQUs5RCxFQUFNWCxDQUFNLEVBQ3pHbWIsRUFBSyxPQUFTLElBQU1BLEVBQUssS0FBSyxJQUFJLFNBQ3RDLENBQUMsRUFDTSxTQUFTOGhCLEdBQVNyNkIsRUFBVyxDQUNoQyxPQUFPLElBQUkwbEMsR0FBWSxDQUNuQixLQUFNLFdBQ04sVUFBVzFsQyxDQUNuQixDQUFLLENBQ0wsQ0FLTyxNQUFNNmxDLEdBQTJCemtCLEVBQWtCLGFBQWMsQ0FBQzdJLEVBQU1oYixJQUFRLENBQ25GdW9DLEdBQWlCLEtBQUt2dEIsRUFBTWhiLENBQUcsRUFDL0J3N0IsR0FBUSxLQUFLeGdCLEVBQU1oYixDQUFHLEVBQ3RCZ2IsRUFBSyxLQUFLLGtCQUFvQixDQUFDMVcsRUFBSzlELEVBQU1YLElBQVcyb0MsR0FBNEJ4dEIsRUFBTTFXLEVBQUs5RCxFQUFNWCxDQUFNLEVBQ3hHbWIsRUFBSyxPQUFTLElBQU1BLEVBQUssS0FBSyxJQUFJLFVBQ2xDQSxFQUFLLGNBQWdCQSxFQUFLLE1BQzlCLENBQUMsRUFDTSxTQUFTcWlCLEdBQVM1NkIsRUFBV2dtQyxFQUFjLENBQzlDLE9BQU8sSUFBSUgsR0FBVyxDQUNsQixLQUFNLFVBQ04sVUFBVzdsQyxFQUNYLElBQUksY0FBZSxDQUNmLE9BQU8sT0FBT2dtQyxHQUFpQixXQUFhQSxFQUFZLEVBQUtDLEdBQWtCRCxDQUFZLENBQy9GLENBQ1IsQ0FBSyxDQUNMLENBQ08sTUFBTUUsR0FBNEI5a0IsRUFBa0IsY0FBZSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDckY0b0MsR0FBa0IsS0FBSzV0QixFQUFNaGIsQ0FBRyxFQUNoQ3c3QixHQUFRLEtBQUt4Z0IsRUFBTWhiLENBQUcsRUFDdEJnYixFQUFLLEtBQUssa0JBQW9CLENBQUMxVyxFQUFLOUQsRUFBTVgsSUFBV2dwQyxHQUE2Qjd0QixFQUFNMVcsRUFBSzlELEVBQU1YLENBQU0sRUFDekdtYixFQUFLLE9BQVMsSUFBTUEsRUFBSyxLQUFLLElBQUksU0FDdEMsQ0FBQyxFQUNNLFNBQVNzaUIsR0FBUzc2QixFQUFXZ21DLEVBQWMsQ0FDOUMsT0FBTyxJQUFJRSxHQUFZLENBQ25CLEtBQU0sV0FDTixVQUFXbG1DLEVBQ1gsSUFBSSxjQUFlLENBQ2YsT0FBTyxPQUFPZ21DLEdBQWlCLFdBQWFBLEVBQVksRUFBS0MsR0FBa0JELENBQVksQ0FDL0YsQ0FDUixDQUFLLENBQ0wsQ0FDTyxNQUFNcEMsR0FBK0J4aUIsRUFBa0IsaUJBQWtCLENBQUM3SSxFQUFNaGIsSUFBUSxDQUMzRjhvQyxHQUFxQixLQUFLOXRCLEVBQU1oYixDQUFHLEVBQ25DdzdCLEdBQVEsS0FBS3hnQixFQUFNaGIsQ0FBRyxFQUN0QmdiLEVBQUssS0FBSyxrQkFBb0IsQ0FBQzFXLEVBQUs5RCxFQUFNWCxJQUFXa3BDLEdBQWdDL3RCLEVBQU0xVyxFQUFLOUQsRUFBTVgsQ0FBTSxFQUM1R21iLEVBQUssT0FBUyxJQUFNQSxFQUFLLEtBQUssSUFBSSxTQUN0QyxDQUFDLEVBQ00sU0FBUytoQixHQUFZdDZCLEVBQVc1QyxFQUFRLENBQzNDLE9BQU8sSUFBSXdtQyxHQUFlLENBQ3RCLEtBQU0sY0FDTixVQUFXNWpDLEVBQ1gsR0FBR212QixFQUFxQi94QixDQUFNLENBQ3RDLENBQUssQ0FDTCxDQWFPLE1BQU1tcEMsR0FBeUJubEIsRUFBa0IsV0FBWSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDL0VpcEMsR0FBZSxLQUFLanVCLEVBQU1oYixDQUFHLEVBQzdCdzdCLEdBQVEsS0FBS3hnQixFQUFNaGIsQ0FBRyxFQUN0QmdiLEVBQUssS0FBSyxrQkFBb0IsQ0FBQzFXLEVBQUs5RCxFQUFNWCxJQUFXcXBDLEdBQTBCbHVCLEVBQU0xVyxFQUFLOUQsRUFBTVgsQ0FBTSxFQUN0R21iLEVBQUssT0FBUyxJQUFNQSxFQUFLLEtBQUssSUFBSSxVQUNsQ0EsRUFBSyxZQUFjQSxFQUFLLE1BQzVCLENBQUMsRUFDRCxTQUFTdWlCLEdBQU85NkIsRUFBV0YsRUFBWSxDQUNuQyxPQUFPLElBQUl5bUMsR0FBUyxDQUNoQixLQUFNLFFBQ04sVUFBV3ZtQyxFQUNYLFdBQWEsT0FBT0YsR0FBZSxXQUFhQSxFQUFhLElBQU1BLENBQzNFLENBQUssQ0FDTCxDQVVPLE1BQU00bUMsR0FBd0J0bEIsRUFBa0IsVUFBVyxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDN0VvcEMsR0FBYyxLQUFLcHVCLEVBQU1oYixDQUFHLEVBQzVCdzdCLEdBQVEsS0FBS3hnQixFQUFNaGIsQ0FBRyxFQUN0QmdiLEVBQUssS0FBSyxrQkFBb0IsQ0FBQzFXLEVBQUs5RCxFQUFNWCxJQUFXd3BDLEdBQXlCcnVCLEVBQU0xVyxFQUFLOUQsRUFBTVgsQ0FBTSxFQUNyR21iLEVBQUssR0FBS2hiLEVBQUksR0FDZGdiLEVBQUssSUFBTWhiLEVBQUksR0FDbkIsQ0FBQyxFQUNNLFNBQVNtOUIsR0FBS21NLEVBQUtDLEVBQUssQ0FDM0IsT0FBTyxJQUFJSixHQUFRLENBQ2YsS0FBTSxPQUNOLEdBQUlHLEVBQ0osSUFBS0MsQ0FFYixDQUFLLENBQ0wsQ0FjTyxNQUFNQyxHQUE0QjNsQixFQUFrQixjQUFlLENBQUM3SSxFQUFNaGIsSUFBUSxDQUNyRnlwQyxHQUFrQixLQUFLenVCLEVBQU1oYixDQUFHLEVBQ2hDdzdCLEdBQVEsS0FBS3hnQixFQUFNaGIsQ0FBRyxFQUN0QmdiLEVBQUssS0FBSyxrQkFBb0IsQ0FBQzFXLEVBQUs5RCxFQUFNWCxJQUFXNnBDLEdBQTZCMXVCLEVBQU0xVyxFQUFLOUQsRUFBTVgsQ0FBTSxFQUN6R21iLEVBQUssT0FBUyxJQUFNQSxFQUFLLEtBQUssSUFBSSxTQUN0QyxDQUFDLEVBQ00sU0FBU3dpQixHQUFTLzZCLEVBQVcsQ0FDaEMsT0FBTyxJQUFJK21DLEdBQVksQ0FDbkIsS0FBTSxXQUNOLFVBQVcvbUMsQ0FDbkIsQ0FBSyxDQUNMLENBYU8sTUFBTWtuQyxHQUF3QjlsQixFQUFrQixVQUFXLENBQUM3SSxFQUFNaGIsSUFBUSxDQUM3RTRwQyxHQUFjLEtBQUs1dUIsRUFBTWhiLENBQUcsRUFDNUJ3N0IsR0FBUSxLQUFLeGdCLEVBQU1oYixDQUFHLEVBQ3RCZ2IsRUFBSyxLQUFLLGtCQUFvQixDQUFDMVcsRUFBSzlELEVBQU1YLElBQVdncUMsR0FBeUI3dUIsRUFBTTFXLEVBQUs5RCxFQUFNWCxDQUFNLEVBQ3JHbWIsRUFBSyxPQUFTLElBQU1BLEVBQUssS0FBSyxJQUFJLE9BQU0sQ0FDNUMsQ0FBQyxFQUNNLFNBQVM4dUIsR0FBS3B1QixFQUFRLENBQ3pCLE9BQU8sSUFBSWl1QixHQUFRLENBQ2YsS0FBTSxPQUNOLE9BQVFqdUIsQ0FDaEIsQ0FBSyxDQUNMLENBMEJPLE1BQU1xdUIsR0FBMEJsbUIsRUFBa0IsWUFBYSxDQUFDN0ksRUFBTWhiLElBQVEsQ0FDakZncUMsR0FBZ0IsS0FBS2h2QixFQUFNaGIsQ0FBRyxFQUM5Qnc3QixHQUFRLEtBQUt4Z0IsRUFBTWhiLENBQUcsRUFDdEJnYixFQUFLLEtBQUssa0JBQW9CLENBQUMxVyxFQUFLOUQsRUFBTVgsSUFBV29xQyxHQUEyQmp2QixFQUFNMVcsQ0FBaUIsQ0FDM0csQ0FBQyxFQWFNLFNBQVNtNEIsR0FBTzk5QixFQUFJbUIsRUFBVSxHQUFJLENBQ3JDLE9BQU9vcUMsR0FBYUgsR0FBV3ByQyxFQUFJbUIsQ0FBTyxDQUM5QyxDQUVPLFNBQVM2OEIsR0FBWWgrQixFQUFJLENBQzVCLE9BQU93ckMsR0FBa0J4ckMsQ0FBRSxDQUMvQixDQUlBLFNBQVN5ckMsR0FBWUMsRUFBS3hxQyxFQUFTLEdBQUksQ0FDbkMsTUFBTW1iLEVBQU8sSUFBSSt1QixHQUFVLENBQ3ZCLEtBQU0sU0FDTixNQUFPLFNBQ1AsR0FBSzVzQixHQUFTQSxhQUFnQmt0QixFQUM5QixNQUFPLEdBQ1AsR0FBR3pZLEVBQXFCL3hCLENBQU0sQ0FDdEMsQ0FBSyxFQUNELE9BQUFtYixFQUFLLEtBQUssSUFBSSxNQUFRcXZCLEVBRXRCcnZCLEVBQUssS0FBSyxNQUFTa0osR0FBWSxDQUNyQkEsRUFBUSxpQkFBaUJtbUIsR0FDM0JubUIsRUFBUSxPQUFPLEtBQUssQ0FDaEIsS0FBTSxlQUNOLFNBQVVtbUIsRUFBSSxLQUNkLE1BQU9ubUIsRUFBUSxNQUNmLEtBQUFsSixFQUNBLEtBQU0sQ0FBQyxHQUFJQSxFQUFLLEtBQUssSUFBSSxNQUFRLENBQUEsQ0FBRyxDQUNwRCxDQUFhLENBRVQsRUFDT0EsQ0FDWCxDQ2hpQ3VCc3ZCLEVBQVMsQ0FDNUIsS0FBTUMsRUFBUSxFQUNkLFlBQWFBLEVBQVEsRUFBRyxTQUFRLEVBQ2hDLFlBQWFELEVBQVMsQ0FDbEIsS0FBTUUsRUFBVSxRQUFRLEVBQ3hCLFdBQVlDLEVBQVNGLEVBQVEsRUFBSUcsRUFBSyxDQUFFLEVBQ3hDLFNBQVVDLEVBQVFKLEdBQVUsRUFDNUIscUJBQXNCSyxHQUFTLENBQ3ZDLENBQUssQ0FDTCxDQUFDLEVBeUdELE1BQU1DLEdBQWUsQ0FBQSxFQUNmQyxHQUEwQixDQUFBLEVBMEJuQkMsR0FBeUIsQ0FBQyxDQUFFLE9BQUFDLEVBQVEsTUFBQXB3QixLQUN6Q293QixFQUFPLFlBQWMsT0FBT0EsRUFBTyxZQUFlLFlBQWNwd0IsRUFDekQsR0FBR293QixFQUFPLElBQUksSUFBSXB3QixFQUFNLElBQUksR0FFaENvd0IsRUFBTyxLQUtsQixlQUFlQyxHQUEyQixDQUFFLE9BQUFELEVBQVEsdUJBQUFFLEVBQXdCLFdBQUFqeUIsRUFBWSxNQUFBMkIsRUFBTyx3QkFBQXV3QixHQUE0QixDQUN2SCxNQUFNQyxHQUFZRCxHQUEyQkosSUFBd0IsQ0FDakUsT0FBQUMsRUFDQSxNQUFBcHdCLEVBQ0EsV0FBQTNCLENBQ1IsQ0FBSyxFQUVELEdBQUkreEIsRUFBTyxnQkFBa0JILEdBQWFPLENBQVEsRUFDOUMsT0FBT1AsR0FBYU8sQ0FBUSxFQUFFLElBQUsvZSxHQUFNZ2YsR0FBa0JoZixFQUFHMmUsRUFBUUUsQ0FBc0IsQ0FBQyxFQUVqRyxNQUFNSSxFQUFxQixNQUFPQyxHQUFTLENBQ3ZDLE1BQU1DLEVBQWtCLE1BQU1SLEVBQU8sVUFBUyxFQUM5QyxJQUFJUyxFQUFXRCxFQUNmLEdBQUl2eUIsR0FBYzJCLEVBQU8sQ0FDckIsTUFBTVosRUFBVSxDQUFFLFdBQUFmLEVBQVksTUFBQTJCLEVBQU8sV0FBWW93QixFQUFPLElBQUksRUFDdERVLEVBQWdCLENBQUEsRUFDdEIsVUFBV3gvQixLQUFRcy9CLEVBQWlCLENBQ2hDLE1BQU1HLEVBQVNYLEVBQU8sV0FDdEIsR0FBSVcsRUFDQSxHQUFJLE9BQU9BLEdBQVcsWUFFbEIsR0FBSSxDQURhLE1BQU1BLEVBQU8zeEIsRUFBUzlOLENBQUksRUFDNUIsQ0FDWDAvQixFQUFhLE1BQU0scUJBQXFCWixFQUFPLElBQUksV0FBVzkrQixFQUFLLElBQUksc0NBQXNDLEVBQzdHLFFBQ0osTUFFQyxDQUNELE1BQU0yL0IsRUFBbUJGLEVBQU8sa0JBQW9CLENBQUEsRUFDOUNHLEVBQW1CSCxFQUFPLGtCQUFvQixDQUFBLEVBQ3BELEdBQUlFLEVBQWlCLE9BQVMsR0FBS0MsRUFBaUIsT0FBUyxFQUFHLENBQzVELE1BQU1DLEVBQVVGLEVBQWlCLE9BQVMsRUFDcENBLEVBQWlCLFNBQVMzL0IsRUFBSyxJQUFJLEVBQ25DLEdBQ0E4L0IsRUFBVUYsRUFBaUIsT0FBUyxFQUNwQ0EsRUFBaUIsU0FBUzUvQixFQUFLLElBQUksRUFDbkMsR0FDTixHQUFJLENBQUM2L0IsR0FBV0MsRUFBUyxDQUNqQkEsRUFDQUosRUFBYSxNQUFNLHFCQUFxQlosRUFBTyxJQUFJLFdBQVc5K0IsRUFBSyxJQUFJLG9DQUFvQyxFQUVyRzYvQixHQUNOSCxFQUFhLE1BQU0scUJBQXFCWixFQUFPLElBQUksV0FBVzkrQixFQUFLLElBQUksd0NBQXdDLEVBRW5ILFFBQ0osQ0FDSixDQUNKLENBRUp3L0IsRUFBYyxLQUFLeC9CLENBQUksQ0FDM0IsQ0FDQXUvQixFQUFXQyxDQUNmLENBQ0lILElBQ0FBLEVBQUssU0FBUyxPQUFTRSxFQUFTLElBQUtwZixHQUFNQSxFQUFFLElBQUksR0FFckQsTUFBTTRmLEVBQVFSLEVBQVMsSUFBS3BmLEdBQU1nZixHQUFrQmhmLEVBQUcyZSxFQUFRRSxDQUFzQixDQUFDLEVBRXRGLE9BQUlGLEVBQU8saUJBQ1BILEdBQWFPLENBQVEsRUFBSUssRUFDcEJYLEdBQXdCRSxFQUFPLElBQUksSUFDcENGLEdBQXdCRSxFQUFPLElBQUksRUFBSSxJQUFJLEtBRS9DRixHQUF3QkUsRUFBTyxJQUFJLEVBQUUsSUFBSUksQ0FBUSxHQUU5Q2EsQ0FDWCxFQUNBLE9BQUtDLEdBQWUsRUFHYkMsR0FBcUJiLEVBQW9CLENBQzVDLEtBQU0sQ0FBRSxPQUFRTixFQUFPLElBQUksQ0FDbkMsQ0FBSyxFQUpVTSxFQUFrQixDQUtqQyxDQUtPLGVBQWVjLEdBQWVDLEVBQWtCcHpCLEVBQVkyQixFQUFPc3dCLEVBQXlCLEdBQU8sQ0FDdEcsTUFBTTluQixFQUFPLE1BQU0sUUFBUWlwQixDQUFnQixFQUNyQyxDQUNFLFdBQVlBLEVBQ1osV0FBQXB6QixFQUNBLE1BQUEyQixFQUNBLHVCQUFBc3dCLENBQ1osRUFDVW1CLEVBQ0EsQ0FBRSxXQUFBQyxFQUFZLHVCQUF3QkMsRUFBaUMsR0FBTyxXQUFZQyxFQUFvQixNQUFPQyxFQUFlLHdCQUFBdEIsQ0FBdUIsRUFBTS9uQixFQUNqS3NwQixFQUFXLENBQUEsRUFDWEMsRUFBWSxJQUFJLElBQ3RCLFVBQVczQixLQUFVc0IsRUFBWSxDQUM3QixNQUFNTSxFQUFjLE1BQU0zQixHQUEyQixDQUNqRCxPQUFBRCxFQUNBLHVCQUF3QnVCLEVBQ3hCLFdBQVlDLEVBQ1osTUFBT0MsRUFDUCx3QkFBQXRCLENBQ1osQ0FBUyxFQUVLak8sRUFBZSxDQUFDLEdBREUsSUFBSSxJQUFJMFAsRUFBWSxJQUFLdmdCLEdBQU1BLEVBQUUsSUFBSSxDQUFDLENBQ3RCLEVBQUUsT0FBUTVlLEdBQU1rL0IsRUFBVSxJQUFJbC9CLENBQUMsQ0FBQyxFQUN4RSxHQUFJeXZCLEVBQWEsT0FBUyxFQUN0QixNQUFNLElBQUlwdUIsRUFBVSxrREFBa0RvdUIsRUFBYSxLQUFLLElBQUksQ0FBQyxFQUFFLEVBRW5HLFVBQVc3USxLQUFLdWdCLEVBQ1pELEVBQVUsSUFBSXRnQixFQUFFLElBQUksRUFDcEJxZ0IsRUFBUyxLQUFLcmdCLENBQUMsQ0FFdkIsQ0FDQSxPQUFPcWdCLENBQ1gsQ0FJTyxTQUFTckIsR0FBa0J3QixFQUFTN0IsRUFBUUUsRUFBd0IsYUFDdkUsZUFBZTF3QixFQUFPeFcsRUFBTzhvQyxFQUFVLENBQ25DLElBQUkxK0IsRUFBTyxDQUFBLEVBQ1AsT0FBT3BLLEdBQVUsVUFBWUEsRUFDN0JvSyxFQUFPLEtBQUssTUFBTXBLLENBQUssRUFFbEIsT0FBT0EsR0FBVSxVQUFZQSxHQUFTLE9BQzNDb0ssRUFBT3BLLEdBRVgsTUFBTXlXLEVBQWNDLEdBQWMsRUFDOUJELElBQ0FBLEVBQVksU0FBUyxTQUFjLENBQUUsT0FBUXV3QixFQUFPLElBQUksR0FFNUQsTUFBTTk4QixFQUFVLE1BQU04OEIsRUFBTyxTQUFTNkIsRUFBUSxLQUFNeitCLENBQUksRUFDeEQsT0FBT0YsRUFBUSxTQUFXLEVBQUlBLEVBQVEsQ0FBQyxFQUFJQSxDQUMvQyxDQUNBLE1BQU05TyxFQUFTLENBQ1gsR0FBR3l0QyxFQUFRLFlBQ1gsT0FBTTlzQyxFQUFBOHNDLEVBQVEsY0FBUixZQUFBOXNDLEVBQXFCLE9BQVEsU0FDbkMsYUFBWU0sRUFBQXdzQyxFQUFRLGNBQVIsWUFBQXhzQyxFQUFxQixhQUFjLENBQUEsRUFDL0MsV0FBVWtCLEVBQUFzckMsRUFBUSxjQUFSLFlBQUF0ckMsRUFBcUIsV0FBWSxDQUFBLEVBQzNDLHVCQUFzQm9DLEVBQUFrcEMsRUFBUSxjQUFSLFlBQUFscEMsRUFBcUIsdUJBQXdCLEVBQzNFLEVBQ0ksR0FBSXVuQyxHQUEwQjlyQyxFQUFPLHVCQUF5QixHQUMxRCxHQUFJLENBQ0EsTUFBTTJ0QyxFQUFlemdDLEdBQXVCbE4sQ0FBTSxFQUNsRCxPQUFPOE0sR0FBSyxDQUNSLEtBQU0yZ0MsRUFBUSxLQUNkLFlBQWFBLEVBQVEsYUFBZSxHQUNwQyxXQUFZRSxFQUNaLE9BQVEsR0FDUixRQUFTdnlCLENBQ3pCLENBQWEsQ0FDTCxPQUNPK0YsRUFBRyxDQUNOcXJCLEVBQWEsS0FBSywrQ0FBK0NyckIsQ0FBQyxFQUFFLENBQ3hFLENBRUosTUFBTXlzQixFQUFrQixDQUNwQixHQUFHNXRDLEVBQ0gscUJBQXNCLEVBQzlCLEVBQ0ksT0FBTzhNLEdBQUssQ0FDUixLQUFNMmdDLEVBQVEsS0FDZCxZQUFhQSxFQUFRLGFBQWUsR0FDcEMsV0FBWUcsRUFDWixPQUFRLEdBQ1IsUUFBU3h5QixDQUNqQixDQUFLLENBQ0wsQ0FJQSxTQUFTbE8sR0FBdUJsTixFQUFRLENBQ3BDLE1BQU1tcUMsRUFBTSxDQUNSLEdBQUducUMsRUFDSCxxQkFBc0IsRUFDOUIsRUFDSSxPQUFLbXFDLEVBQUksV0FDTEEsRUFBSSxTQUFXLENBQUEsR0FDWkEsQ0FDWCxDQ2xaTyxTQUFTaHpCLElBQVUsQ0FDdEIsTUFBTyxDQUFBLENBQ1gsQ0FDTyxNQUFNMDJCLEVBQW9CLENBQTFCLGNBQ0hDLEVBQUEsS0FBQUMsR0FBVSxJQUFJLGFBQ2RELEVBQUEsS0FBQUUsR0FBb0IsSUFBSSxLQUN4QixHQUFHbm1DLEVBQU1vbUMsRUFBVSxDQUNmLE1BQU1DLEVBQVlybUMsRUFDbEIsSUFBSXNtQyxFQUFtQkMsRUFBQSxLQUFLSixJQUFrQixJQUFJRSxDQUFTLEVBQ3REQyxJQUNEQSxFQUFtQixJQUFJLElBQ3ZCQyxFQUFBLEtBQUtKLElBQWtCLElBQUlFLEVBQVdDLENBQWdCLEdBRTFELElBQUlFLEVBQVdGLEVBQWlCLElBQUlGLENBQVEsRUFDdkNJLElBQ0RBLEVBQVcsSUFBSSxJQUNmRixFQUFpQixJQUFJRixFQUFVSSxDQUFRLEdBRTNDLE1BQU1DLEdBQVlDLEdBQVVOLEVBQVMsR0FBSU0sRUFBTSxRQUFVLENBQUEsQ0FBRyxHQUM1RCxPQUFBRixFQUFTLElBQUlDLENBQU8sRUFDcEJGLEVBQUEsS0FBS0wsSUFBUSxpQkFBaUJHLEVBQVdJLENBQU8sRUFDekMsSUFDWCxDQUNBLElBQUl6bUMsRUFBTW9tQyxFQUFVLENBQ2hCLE1BQU1DLEVBQVlybUMsRUFDWnNtQyxFQUFtQkMsRUFBQSxLQUFLSixJQUFrQixJQUFJRSxDQUFTLEVBQ3ZERyxFQUFXRixHQUFBLFlBQUFBLEVBQWtCLElBQUlGLEdBQ3ZDLEdBQUlJLEdBQUEsTUFBQUEsRUFBVSxLQUFNLENBQ2hCLFVBQVdDLEtBQVdELEVBQ2xCRCxFQUFBLEtBQUtMLElBQVEsb0JBQW9CRyxFQUFXSSxDQUFPLEVBRXZESCxHQUFBLE1BQUFBLEVBQWtCLE9BQU9GLElBQ3JCRSxHQUFBLFlBQUFBLEVBQWtCLFFBQVMsR0FDM0JDLEVBQUEsS0FBS0osSUFBa0IsT0FBT0UsQ0FBUyxDQUUvQyxDQUNBLE9BQU8sSUFDWCxDQUNBLEtBQUtybUMsS0FBU21ILEVBQU0sQ0FDaEIsTUFBTXUvQixFQUFRLElBQUksWUFBWTFtQyxFQUFNLENBQUUsT0FBUW1ILEVBQU0sRUFDcEQsT0FBT28vQixFQUFBLEtBQUtMLElBQVEsY0FBY1EsQ0FBSyxDQUMzQyxDQUNBLEtBQUsxbUMsRUFBTW9tQyxFQUFVLENBQ2pCLE1BQU1PLEVBQVUsSUFBSXgvQixJQUFTLENBQ3pCLEtBQUssSUFBSW5ILEVBQU0ybUMsQ0FBTyxFQUN0QlAsRUFBUyxHQUFHai9CLENBQUksQ0FDcEIsRUFDQSxZQUFLLEdBQUduSCxFQUFNMm1DLENBQU8sRUFDZCxJQUNYLENBQ0osQ0E5Q0lULEdBQUEsWUFDQUMsR0FBQSxZQStDRyxNQUFNUyxHQUFhLElBQ2xCLE9BQU8sT0FBVyxLQUFlLE9BQU8sV0FDakMsT0FBTyxXQUFVLEVBRXJCLHVDQUF1QyxRQUFRLFFBQVMsU0FBVTdsQyxFQUFHLENBQ3hFLE1BQU1xTyxFQUFLLEtBQUssT0FBTSxFQUFLLEdBQU0sRUFFakMsT0FEVXJPLElBQU0sSUFBTXFPLEVBQUtBLEVBQUksRUFBTyxHQUM3QixTQUFTLEVBQUUsQ0FDeEIsQ0FBQyxFQUVReTNCLEdBQVcsS0FBZSxDQUNuQyxhQUFjLENBQUUsQ0FDaEIsT0FBT0MsRUFBYzFvQyxFQUFVLENBQUUsQ0FDakMsWUFBWTJvQyxFQUFZM29DLEVBQVUsQ0FBRSxDQUN4QyxFQUNhNG9DLEdBQWlCLFdBQVcsZUFFNUJDLEdBQWtCLFdBQVcsZ0JBQ25DLE1BQU1DLEVBQWtCLENBRTNCLGFBQWMsQ0FEZDUvQixFQUFBLGVBQVUsS0FDTSxDQUNoQixJQUFJeUwsRUFBU3JiLEVBQUksQ0FDYixZQUFLLFFBQVVxYixFQUNScmIsRUFBRSxDQUNiLENBQ0EsVUFBVyxDQUNQLE9BQU8sS0FBSyxPQUNoQixDQUNBLFVBQVVxYixFQUFTLENBQ2YsS0FBSyxRQUFVQSxDQUNuQixDQUNKLENBUUEsTUFBTW8wQixFQUFhLENBQ2YsYUFBYyxDQUFFLENBQ2hCLFdBQVdqaUMsRUFBVTZHLEVBQUksQ0FDckIsTUFBTXE3QixFQUFVLFdBQVdsaUMsRUFBVTZHLENBQUUsRUFDdkMsT0FBQXE3QixFQUFRLElBQ0osT0FBT0EsRUFBUSxLQUFRLFdBQWFBLEVBQVEsSUFBTSxJQUFNQSxFQUM1REEsRUFBUSxNQUNKLE9BQU9BLEVBQVEsT0FBVSxXQUFhQSxFQUFRLE1BQVEsSUFBTUEsRUFDaEVBLEVBQVEsT0FDSixPQUFPQSxFQUFRLFFBQVcsV0FBYUEsRUFBUSxPQUFTLElBQU0sR0FDbEVBLEVBQVEsUUFDSixPQUFPQSxFQUFRLFNBQVksV0FBYUEsRUFBUSxRQUFVLElBQU1BLEVBQzdEQSxDQUNYLENBQ0EsYUFBYUMsRUFBVyxDQUNwQixPQUFPLGFBQWFBLENBQVMsQ0FDakMsQ0FDSixDQUNBLE1BQU1DLEdBQVEsSUFBSUgsR0M3R1gsU0FBU0ksR0FBeUJyeEIsRUFBTSxDQUMzQyxHQUFJQSxFQUFLLFNBQVcsRUFDaEIsTUFBTyxHQUVYLE1BQU1zeEIsRUFBZSxPQUFPLFdBQWUsS0FBZSxXQUFXLE9BQy9ELFdBQVcsT0FDWCxPQUNOLEdBQUlBLEVBQ0EsT0FBT0EsRUFBYSxLQUFLdHhCLENBQUksRUFBRSxTQUFTLFFBQVEsRUFFcEQsSUFBSXV4QixFQUFTLEdBQ2IsUUFBUyxFQUFJLEVBQUcsRUFBSXZ4QixFQUFLLE9BQVEsR0FBSyxFQUNsQ3V4QixHQUFVLE9BQU8sYUFBYXZ4QixFQUFLLENBQUMsQ0FBQyxFQUV6QyxHQUFJLE9BQU8sV0FBVyxNQUFTLFdBQzNCLE9BQU8sV0FBVyxLQUFLdXhCLENBQU0sRUFFakMsTUFBTUMsRUFBUSxvRUFDZCxJQUFJeHVDLEVBQVMsR0FDVHNCLEVBQUksRUFDUixLQUFPQSxFQUFJaXRDLEVBQU8sUUFBUSxDQUN0QixNQUFNRSxFQUFLRixFQUFPLFdBQVdqdEMsR0FBRyxFQUMxQm90QyxFQUFLSCxFQUFPLFdBQVdqdEMsR0FBRyxFQUMxQnF0QyxFQUFLSixFQUFPLFdBQVdqdEMsR0FBRyxFQUMxQnN0QyxFQUFPSCxHQUFNLEVBQ2JJLEdBQVNKLEVBQUssSUFBUSxFQUFNQyxHQUFNLEVBQ2xDSSxFQUFPLE1BQU1KLENBQUUsRUFBSSxJQUFPQSxFQUFLLEtBQVEsRUFBTUMsR0FBTSxFQUNuREksRUFBTyxNQUFNSixDQUFFLEVBQUksR0FBS0EsRUFBSyxHQUNuQzN1QyxHQUNJd3VDLEVBQU0sT0FBT0ksQ0FBSSxFQUNiSixFQUFNLE9BQU9LLENBQUksRUFDakJMLEVBQU0sT0FBT00sQ0FBSSxFQUNqQk4sRUFBTSxPQUFPTyxDQUFJLENBQzdCLENBQ0EsT0FBTy91QyxDQUNYLENDcENPLFNBQVNndkMsR0FBZ0J0cEMsRUFBTyxDQUNuQyxHQUFJQSxhQUFpQixZQUNqQixNQUFPLENBQ0gsT0FBUSxjQUNSLEtBQU0yb0MsR0FBeUIsSUFBSSxXQUFXM29DLENBQUssQ0FBQyxDQUNoRSxFQUVJLEdBQUl3UixHQUFrQnhSLENBQUssRUFBRyxDQUMxQixNQUFNeVIsRUFBT3pSLEVBQ2IsTUFBTyxDQUNILE9BQVF5UixFQUFLLFlBQVksS0FDekIsS0FBTWszQixHQUF5QixJQUFJLFdBQVdsM0IsRUFBSyxPQUFRQSxFQUFLLFdBQVlBLEVBQUssVUFBVSxDQUFDLENBQ3hHLENBQ0ksQ0FDQSxHQUFJSSxHQUFhN1IsQ0FBSyxFQUFHLENBQ3JCLE1BQU15UixFQUFPelIsRUFDYixNQUFPLENBQ0gsT0FBUSxTQUNSLEtBQU0yb0MsR0FBeUIsSUFBSSxXQUFXbDNCLEVBQUssT0FBUUEsRUFBSyxXQUFZQSxFQUFLLFVBQVUsQ0FBQyxDQUN4RyxDQUNJLENBQ0EsR0FBSUcsR0FBMkI1UixDQUFLLEVBQ2hDLE1BQU8sQ0FDSCxPQUFRLFNBQ1IsS0FBTTJvQyxHQUF5QixXQUFXLEtBQUszb0MsRUFBTSxJQUFJLENBQUMsQ0FDdEUsQ0FHQSxDQUNPLFNBQVN1cEMsR0FBdUJ2cEMsRUFBTyxDQUMxQyxHQUFJQSxhQUFpQixZQUNqQixPQUFPLElBQUksV0FBV0EsQ0FBSyxFQUUvQixHQUFJd1IsR0FBa0J4UixDQUFLLEVBQUcsQ0FDMUIsTUFBTXlSLEVBQU96UixFQUNiLE9BQU8sSUFBSSxXQUFXeVIsRUFBSyxPQUFRQSxFQUFLLFdBQVlBLEVBQUssVUFBVSxDQUN2RSxDQUNBLEdBQUlJLEdBQWE3UixDQUFLLEVBQUcsQ0FDckIsTUFBTXlSLEVBQU96UixFQUNiLE9BQU8sSUFBSSxXQUFXeVIsRUFBSyxPQUFRQSxFQUFLLFdBQVlBLEVBQUssVUFBVSxDQUN2RSxDQUNBLEdBQUlHLEdBQTJCNVIsQ0FBSyxFQUNoQyxPQUFPLFdBQVcsS0FBS0EsRUFBTSxJQUFJLENBR3pDLENDNUNPLFNBQVN3cEMsR0FBaUJDLEVBQWUsQ0FDNUMsT0FBSSxPQUFPQSxHQUFrQixTQUNsQixDQUFDLENBQUUsS0FBTSxVQUFXLEtBQU0sT0FBUSxRQUFTQSxFQUFlLEVBRTlELENBQUMsR0FBR0EsQ0FBYSxDQUM1QixDQUNPLFNBQVNDLEdBQXFCL3FDLEVBQU0sQ0FDdkMsT0FBTyxLQUFLLFVBQVVBLEVBQU1nckMsRUFBK0IsQ0FDL0QsQ0FDTyxTQUFTQyxHQUFvQnRpQyxFQUFPLENBQ3ZDLE1BQU11aUMsRUFBTyxJQUFJLElBQ2pCLFVBQVdsckMsS0FBUTJJLEVBQU8sQ0FDdEIsTUFBTS9MLEVBQU1tdUMsR0FBcUIvcUMsQ0FBSSxFQUMvQmlPLEVBQVdpOUIsRUFBSyxJQUFJdHVDLENBQUcsRUFDekJxUixFQUNBQSxFQUFTLEtBQUtqTyxDQUFJLEVBR2xCa3JDLEVBQUssSUFBSXR1QyxFQUFLLENBQUNvRCxDQUFJLENBQUMsQ0FFNUIsQ0FDQSxPQUFPa3JDLENBQ1gsQ0FDTyxTQUFTQyxHQUF1QkQsRUFBTXR1QyxFQUFLLENBQzlDLE1BQU13dUMsRUFBYUYsRUFBSyxJQUFJdHVDLENBQUcsRUFDL0IsR0FBSSxDQUFDd3VDLEdBQWNBLEVBQVcsU0FBVyxFQUNyQyxPQUVKLEtBQU0sQ0FBQ3poQixDQUFLLEVBQUl5aEIsRUFDaEIsT0FBQUEsRUFBVyxNQUFLLEVBQ1pBLEVBQVcsU0FBVyxHQUN0QkYsRUFBSyxPQUFPdHVDLENBQUcsRUFFWitzQixDQUNYLENBQ08sU0FBUzBoQixHQUF5QkgsRUFBTWxyQyxFQUFNLENBQ2pELE1BQU1wRCxFQUFNbXVDLEdBQXFCL3FDLENBQUksRUFDL0JvckMsRUFBYUYsRUFBSyxJQUFJdHVDLENBQUcsRUFDL0IsR0FBSSxDQUFDd3VDLEdBQWNBLEVBQVcsU0FBVyxFQUNyQyxNQUFPLEdBRVgsTUFBTXRrQyxFQUFRc2tDLEVBQVcsVUFBV3JnQyxHQUFjQSxJQUFjL0ssQ0FBSSxFQUNwRSxPQUFJOEcsSUFBVSxHQUNILElBRVhza0MsRUFBVyxPQUFPdGtDLEVBQU8sQ0FBQyxFQUN0QnNrQyxFQUFXLFNBQVcsR0FDdEJGLEVBQUssT0FBT3R1QyxDQUFHLEVBRVosR0FDWCxDQUNPLFNBQVNvdUMsR0FBZ0N0M0IsRUFBTXJTLEVBQU8sQ0FDekQsTUFBTWlxQyxFQUFhWCxHQUFnQnRwQyxDQUFLLEVBQ3hDLE9BQUlpcUMsR0FHR2pxQyxDQUNYLENBRU8sU0FBU2txQyxHQUErQjVpQyxFQUFPLENBQ2xELE9BQU9BLEVBQ0YsT0FBUTNJLEdBQVNBLEVBQUssT0FBUyxvQkFBb0IsRUFDbkQsSUFBS0EsR0FBU0EsRUFBSyxPQUFPLENBQ25DLENBUU8sU0FBU3dyQyxHQUFhVixFQUFlVyxFQUFnQixDQUN4RCxNQUFNQyxFQUFjSCxHQUErQkUsQ0FBYyxFQUNqRSxNQUFPLENBQUMsR0FBR1osR0FBaUJDLENBQWEsRUFBRyxHQUFHWSxDQUFXLENBQzlELENDckVPLE1BQU1DLEdBQWE3RixFQUFTLENBSy9CLGFBQWNHLEVBQVNGLEVBQVEsRUFBSUcsRUFBSyxDQUFFLEVBQUUsU0FBUSxDQUN4RCxDQUFDLEVBSVkwRixHQUFXRCxHQUFXLE9BQU8sQ0FLdEMsR0FBSTVGLEVBQVEsRUFBRyxTQUFRLENBQzNCLENBQUMsRUFJWThGLEdBQVVGLEdBQVcsT0FBTyxDQUNyQyxLQUFNM0YsRUFBVSxTQUFTLEVBSXpCLFFBQVNELEVBQVEsQ0FDckIsQ0FBQyxFQUNZK0YsR0FBYUgsR0FBVyxPQUFPLENBQ3hDLEtBQU0zRixFQUFVLGFBQWEsRUFJN0IsS0FBTUQsRUFBUSxDQUNsQixDQUFDLEVBQ1lnRyxHQUFZSixHQUFXLE9BQU8sQ0FDdkMsS0FBTTNGLEVBQVUsWUFBWSxFQUk1QixLQUFNRCxFQUFRLENBQ2xCLENBQUMsRUFDWWlHLEdBQWdCTCxHQUFXLE9BQU8sQ0FDM0MsS0FBTTNGLEVBQVUsZ0JBQWdCLEVBSWhDLEtBQU1ELEVBQVEsQ0FDbEIsQ0FBQyxFQUNZa0csR0FBYU4sR0FBVyxPQUFPLENBQ3hDLEtBQU0zRixFQUFVLGFBQWEsRUFLN0IsTUFBT2tHLEVBRUksRUFFTixHQUFHcEcsRUFBUyxDQUFFLEdBQUlDLEVBQVEsRUFBRyxTQUFTLGdCQUFnQixFQUFHLENBQUMsRUFDMUQsU0FBUyw0RUFBNEUsRUFDckYsU0FBUSxFQUtiLE9BQVFBLEVBQVEsRUFBRyxTQUFRLENBQy9CLENBQUMsRUFDWW9HLEdBQVlSLEdBQVcsT0FBTyxDQUN2QyxLQUFNM0YsRUFBVSxZQUFZLEVBSzVCLEtBQU1vRyxFQUVLLEVBQ04sU0FBUyxtRUFBbUUsRUFFNUUsR0FBR3RHLEVBQVMsQ0FBRSxHQUFJQyxFQUFRLEVBQUcsU0FBUyxnQkFBZ0IsRUFBRyxDQUFDLEVBRTFELEdBQUdELEVBQVMsQ0FBRSxJQUFLQyxFQUFRLEVBQUcsU0FBUyw4QkFBOEIsRUFBRyxDQUFDLEVBQ3pFLFNBQVMsbURBQW1ELEVBQzVELFNBQVEsRUFJYixTQUFVQSxFQUFRLEVBQUcsU0FBUSxDQUNqQyxDQUFDLEVBQ1lzRyxHQUFlVixHQUFXLE9BQU8sQ0FDMUMsS0FBTTNGLEVBQVUsT0FBTyxFQUl2QixNQUFPc0csRUFDSSxFQUNOLEdBQUd4RyxFQUFTLENBQ2IsR0FBSUMsRUFBUSxDQUNwQixDQUFLLENBQUMsRUFDRyxTQUFTLHNDQUFzQyxFQUlwRCxPQUFRQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVEsRUFJdEMsV0FBWUEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRLENBQzlDLENBQUMsRUFDWXdHLEdBQWVaLEdBQVcsT0FBTyxDQUMxQyxLQUFNM0YsRUFBVSxPQUFPLEVBSXZCLE1BQU9ELEVBQVEsRUFBRyxTQUFTLDJCQUEyQixDQUMxRCxDQUFDLEVBQ1l5RyxHQUFpQmIsR0FBVyxPQUFPLENBQzVDLEtBQU0zRixFQUFVLE1BQU0sRUFJdEIsS0FBTUQsRUFBUSxDQUNsQixDQUFDLEVBQ0swRyxHQUF3QjNHLEVBQVMsQ0FDbkMsS0FBTTRHLEdBQ0ssQ0FBQzNHLEVBQVEsRUFBSTRHLEdBQWEsVUFBVSxDQUFDLENBQUMsRUFDNUMsU0FBUyw0RUFBNEUsRUFDMUYsVUFBVzVHLEVBQVEsRUFBRyxTQUFRLENBQ2xDLENBQUMsRUFDSzZHLEdBQXVCOUcsRUFBUyxDQUNsQyxJQUFLd0csRUFDTSxFQUNOLFNBQVMsdURBQXVELENBQ3pFLENBQUMsRUFDS08sR0FBMEIvRyxFQUFTLENBQ3JDLE9BQVF3RyxFQUNHLEVBQ04sU0FBUyxtREFBbUQsQ0FDckUsQ0FBQyxFQUNLUSxHQUFvQkMsR0FDZixDQUFDTixHQUF1QkcsR0FBc0JDLEVBQXVCLENBQUMsRUFDNUUsU0FBUyxzREFBc0QsRUFDOURHLEdBQXVCbEgsRUFBUyxDQUNsQyxLQUFNNEcsR0FDSyxDQUFDM0csRUFBUSxFQUFJNEcsR0FBYSxVQUFVLENBQUMsQ0FBQyxFQUM1QyxTQUFTLDRFQUE0RSxFQUMxRixVQUFXTCxFQUNBLEVBQ04sU0FBUyw4Q0FBOEMsRUFDNUQsU0FBVXZHLEVBQVEsRUFBRyxTQUFTLDBDQUEwQyxDQUM1RSxDQUFDLEVBQ0trSCxHQUFzQm5ILEVBQVMsQ0FDakMsSUFBS0MsRUFBUSxFQUFHLFNBQVMsOENBQThDLEVBQ3ZFLFNBQVVBLEVBQVEsRUFBRyxTQUFRLENBQ2pDLENBQUMsRUFDS21ILEdBQXFCcEgsRUFBUyxDQUNoQyxHQUFJQyxFQUFRLEVBQUcsU0FBUyw2Q0FBNkMsRUFDckUsU0FBVUEsRUFBUSxFQUFHLFNBQVEsQ0FDakMsQ0FBQyxFQUNLb0gsR0FBc0JKLEdBQ2pCLENBQ1BoSCxFQUFRLEVBQUcsU0FBUyxvQ0FBb0MsRUFDeERpSCxHQUNBQyxHQUNBQyxFQUNKLENBQUMsRUFDSSxTQUFTLHNFQUFzRSxFQUM5RUUsR0FBbUIsSUFBSUMsSUFBV3RILEVBQVEsRUFDbkN1SCxHQUFrQjNCLEdBQVcsT0FBTyxDQUM3QyxLQUFNM0YsRUFBVSxPQUFPLEVBS3ZCLE1BQU9ELEVBQVEsRUFBRyxHQUFHK0csRUFBaUIsRUFBRSxTQUFRLEVBS2hELE9BQVFNLEdBQWlCLE1BQU8sT0FBUSxNQUFNLEVBQUUsU0FBUSxDQUM1RCxDQUFDLEVBQ1lHLEdBQXdCNUIsR0FBVyxPQUFPLENBQ25ELEtBQU0zRixFQUFVLE1BQU0sRUFLdEIsS0FBTW1ILEVBQ1YsQ0FBQyxFQUNZSyxHQUFxQjdCLEdBQVcsT0FBTyxDQUNoRCxLQUFNM0YsRUFBVSxxQkFBcUIsRUFJckMsS0FBTUQsRUFBUSxFQUFHLFNBQVMsa0NBQWtDLENBQ2hFLENBQUMsRUFDWTBILEdBQWtCQyxHQUFxQixPQUFRLENBQ3hENUgsRUFBUyxDQUFFLEtBQU1FLEVBQVUsWUFBWSxDQUFDLENBQUUsRUFDMUNGLEVBQVMsQ0FDTCxLQUFNRSxFQUFVLE9BQU8sRUFDdkIsRUFBRzJILEVBQVEsRUFDWCxFQUFHQSxFQUFRLEVBQ1gsT0FBUUMsR0FBTyxDQUFDLE9BQVEsUUFBUyxRQUFTLE9BQVEsU0FBUyxDQUFDLENBQ3BFLENBQUssRUFDRDlILEVBQVMsQ0FDTCxLQUFNRSxFQUFVLGNBQWMsRUFDOUIsRUFBRzJILEVBQVEsRUFDWCxFQUFHQSxFQUFRLENBQ25CLENBQUssRUFDRDdILEVBQVMsQ0FDTCxLQUFNRSxFQUFVLFFBQVEsRUFDeEIsRUFBRzJILEVBQVEsRUFDWCxFQUFHQSxFQUFRLEVBQ1gsU0FBVUEsRUFBUSxFQUNsQixTQUFVQSxFQUFRLENBQzFCLENBQUssRUFDRDdILEVBQVMsQ0FDTCxLQUFNRSxFQUFVLE1BQU0sRUFDdEIsS0FBTUQsRUFBUSxDQUN0QixDQUFLLEVBQ0RELEVBQVMsQ0FBRSxLQUFNRSxFQUFVLE1BQU0sQ0FBQyxDQUFFLEVBQ3BDRixFQUFTLENBQ0wsS0FBTUUsRUFBVSxNQUFNLEVBQ3RCLEVBQUcySCxFQUFRLEVBQ1gsRUFBR0EsRUFBUSxDQUNuQixDQUFLLEVBQ0Q3SCxFQUFTLENBQ0wsS0FBTUUsRUFBVSxVQUFVLEVBQzFCLEtBQU1HLEVBQVFKLEdBQVUsQ0FDaEMsQ0FBSyxFQUNERCxFQUFTLENBQ0wsS0FBTUUsRUFBVSxNQUFNLEVBQ3RCLEtBQU1HLEVBQVFMLEVBQVMsQ0FBRSxFQUFHNkgsRUFBUSxFQUFJLEVBQUdBLEVBQVEsQ0FBRSxDQUFFLENBQUMsQ0FDaEUsQ0FBSyxDQUNMLENBQUMsRUFJWUUsR0FBbUJILEdBQXFCLE9BQVEsQ0FDekQ1QixHQUNBRCxHQUNBUSxHQUNBRSxFQUNKLENBQUMsRUFDS3VCLEdBQWNsQyxHQUFTLE9BQU8sQ0FJaEMsS0FBTTVGLEVBQVUsU0FBUyxFQUFFLFNBQVEsQ0FDdkMsQ0FBQyxFQUNZK0gsR0FBdUJELEdBQVksT0FBTyxDQUluRCxLQUFNOUgsRUFBVSxXQUFXLEVBSTNCLE9BQVE0SCxHQUFPLENBQUMsY0FBZSxZQUFhLFlBQVksQ0FBQyxFQUl6RCxRQUFTekgsRUFBUTBILEVBQWdCLENBQ3JDLENBQUMsRUFDWUcsR0FBY04sR0FBcUIsT0FBUSxDQUNwRDNCLEdBQ0FFLEdBQ0FFLEdBQ0FFLEVBQ0osQ0FBQyxFQUNZNEIsR0FBa0JILEdBQVksT0FBTyxDQUs5QyxLQUFNOUgsRUFBVSxNQUFNLEVBSXRCLFFBQVNHLEVBQVE2SCxFQUFXLEVBQUUsR0FBR2pJLEVBQVEsQ0FBRSxDQUMvQyxDQUFDLEVBQ0ttSSxHQUFvQkosR0FBWSxPQUFPLENBS3pDLEtBQU05SCxFQUFVLFFBQVEsRUFJeEIsUUFBU0QsRUFBUSxDQUNyQixDQUFDLEVBQzBCMkgsR0FBcUIsT0FBUSxDQUNwRFEsR0FDQUgsR0FDQUUsRUFDSixDQUFDLEVBSU0sTUFBTUUsR0FBcUJ2QyxHQUFTLE9BQU8sQ0FDOUMsS0FBTTVGLEVBQVUsa0JBQWtCLEVBSWxDLEtBQU1ELEVBQVEsRUFBRyxTQUFTLDZCQUE2QixFQUl2RCxVQUFXdUcsRUFDQSxFQUNOLFNBQVMsdUNBQXVDLEVBQ2hELFNBQVEsRUFJYixPQUFRdkcsRUFBUSxFQUFHLFNBQVEsRUFJM0IsT0FBUUEsRUFBUSxFQUFHLFNBQVEsQ0FDL0IsQ0FBQyxFQUNZcUksR0FBbUJ4QyxHQUFTLE9BQU8sQ0FDNUMsS0FBTTVGLEVBQVUsZUFBZSxFQUkvQixPQUFRRCxFQUFRLEVBQUcsU0FBUyx5QkFBeUIsRUFJckQsS0FBTUEsRUFBUSxFQUFHLFNBQVMsMEJBQTBCLEVBSXBELE9BQVE2SCxHQUFPLENBQUMsY0FBZSxZQUFhLFlBQVksQ0FBQyxFQUFFLFNBQVEsRUFJbkUsVUFBVzdILEVBQVEsQ0FDdkIsQ0FBQyxFQUNZc0ksR0FBd0JYLEdBQXFCLE9BQVEsQ0FDOURsQixHQUNBYyxHQUNBQyxFQUNKLENBQUMsRUFDWWUsR0FBMkJaLEdBQXFCLE9BQVEsQ0FDakUzQixHQUNBRSxHQUNBRSxFQUNKLENBQUMsRUFDWW9DLEdBQXlCM0MsR0FBUyxPQUFPLENBQ2xELEtBQU01RixFQUFVLHNCQUFzQixFQUl0QyxLQUFNRCxFQUFRLEVBQUcsU0FBUyxzQkFBc0IsRUFJaEQsT0FBUUEsRUFBUSxFQUFHLFNBQVMseUJBQXlCLEVBSXJELE9BQVE2SCxHQUFPLENBQUMsY0FBZSxZQUFhLFlBQVksQ0FBQyxFQUl6RCxPQUFRbEIsR0FDRyxDQUNQM0csRUFBUSxFQUNSc0ksR0FDQWxJLEVBQVFtSSxFQUF3QixDQUN4QyxDQUFLLEVBQ0ksU0FBUyxpSEFBaUgsQ0FDbkksQ0FBQyxFQUNZRSxHQUFzQjVDLEdBQVMsT0FBTyxDQUMvQyxLQUFNNUYsRUFBVSxlQUFlLEVBSS9CLE9BQVFELEVBQVEsRUFBRyxTQUFTLDZCQUE2QixFQUl6RCxPQUFRNkgsR0FBTyxDQUFDLGNBQWUsWUFBYSxZQUFZLENBQUMsRUFJekQsT0FBUUgsRUFDWixDQUFDLEVBQ1lnQixHQUF5QjdDLEdBQVMsT0FBTyxDQUNsRCxLQUFNNUYsRUFBVSxzQkFBc0IsRUFJdEMsT0FBUUQsRUFBUSxFQUFHLFNBQVMsNkJBQTZCLEVBSXpELE9BQVF5SCxFQUNaLENBQUMsRUFDWWtCLEdBQWM1SSxFQUFTLENBQ2hDLFNBQVVLLEVBQVFKLEdBQVUsRUFDNUIsVUFBVzRILEVBQVEsRUFBRyxJQUFHLEVBQUcsSUFBSSxDQUFDLEVBQUUsU0FBUSxFQUMzQyxnQkFBaUJBLEVBQVEsRUFBRyxJQUFHLEVBQUcsSUFBSSxDQUFDLEVBQUUsU0FBUSxDQUNyRCxDQUFDLEVBQ1lnQixHQUFnQi9DLEdBQVMsT0FBTyxDQUN6QyxLQUFNNUYsRUFBVSxZQUFZLEVBQzVCLE9BQVFELEVBQVEsRUFDaEIsT0FBUTZILEdBQU8sQ0FBQyxjQUFlLFlBQWEsWUFBWSxDQUFDLEVBQUUsU0FBUSxFQUNuRSxPQUFRYyxFQUNaLENBQUMsRUFDWUUsR0FBbUJsQixHQUFxQixPQUFRLENBQ3pENUgsRUFBUyxDQUFFLEtBQU1FLEVBQVUsU0FBUyxDQUFDLENBQUUsRUFDdkNGLEVBQVMsQ0FDTCxLQUFNRSxFQUFVLE1BQU0sRUFDdEIsU0FBVTJILEVBQVEsRUFBRyxJQUFHLEVBQUcsU0FBUSxDQUMzQyxDQUFLLENBQ0wsQ0FBQyxFQUNZa0IsR0FBeUJDLEVBQzFCLENBQ1IsT0FBUS9JLEVBQVEsRUFDaEIsT0FBUUEsRUFBUSxFQUNoQixRQUFTNkksRUFDYixDQUFDLEVBQ0ksWUFBVyxFQUNIRyxHQUFzQm5ELEdBQVMsT0FBTyxDQUMvQyxLQUFNNUYsRUFBVSxtQkFBbUIsRUFDbkMsT0FBUUQsRUFBUSxFQUNoQixnQkFBaUI0SCxFQUFRLEVBQUcsU0FBUSxFQUNwQyxPQUFReEgsRUFBUTBJLEVBQXNCLENBQzFDLENBQUMsRUFDWUcsR0FBZ0NsSixFQUFTLENBQ2xELEtBQU1FLEVBQVUsYUFBYSxFQUM3QixLQUFNRCxFQUFRLEVBQ2QsS0FBTUEsRUFBUSxDQUNsQixDQUFDLEVBQ1lrSixHQUFnQ25KLEVBQVMsQ0FDbEQsS0FBTUUsRUFBVSxhQUFhLEVBQzdCLEtBQU1ELEVBQVEsRUFDZCxLQUFNQSxFQUFRLENBQ2xCLENBQUMsRUFDWW1KLEdBQWdDcEosRUFBUyxDQUNsRCxLQUFNRSxFQUFVLGFBQWEsRUFDN0IsS0FBTUQsRUFBUSxDQUNsQixDQUFDLEVBQ1lvSixHQUFzQnpCLEdBQXFCLE9BQVEsQ0FDNURzQixHQUNBQyxHQUNBQyxFQUNKLENBQUMsRUFDWUUsR0FBcUJ4RCxHQUFTLE9BQU8sQ0FDOUMsS0FBTTVGLEVBQVUsa0JBQWtCLEVBQ2xDLE9BQVFELEVBQVEsRUFDaEIsT0FBUTZILEdBQU8sQ0FBQyxjQUFlLFdBQVcsQ0FBQyxFQUMzQyxVQUFXdUIsRUFDZixDQUFDLEVBQ1lFLEdBQTJCekQsR0FBUyxPQUFPLENBQ3BELEtBQU01RixFQUFVLHlCQUF5QixFQUN6QyxPQUFRRCxFQUFRLEVBQ2hCLE9BQVE2SCxHQUFPLENBQUMsWUFBYSxRQUFRLENBQUMsRUFDdEMsT0FBUTdILEVBQVEsRUFBRyxTQUFRLENBQy9CLENBQUMsRUFDWXVKLEdBQWU1QixHQUFxQixPQUFRLENBQ3JEYyxHQUNBRyxHQUNBUyxHQUNBaEIsR0FDQUQsRUFDSixDQUFDLEVBSVlvQixHQUFnQjVELEdBQVcsT0FBTyxDQUMzQyxHQUFJNUYsRUFBUSxFQUFHLFNBQVEsRUFDdkIsS0FBTUMsRUFBVSxXQUFXLEVBSTNCLFFBQVNHLEVBQVE0RixFQUFTLEVBSTFCLFdBQVk1RixFQUFRNkYsRUFBYSxFQUFFLFNBQVEsQ0FDL0MsQ0FBQyxFQUNZd0QsR0FBaUI1RCxHQUFTLE9BQU8sQ0FDMUMsS0FBTTVGLEVBQVUsWUFBWSxFQUk1QixrQkFBbUJELEVBQVEsRUFJM0IsR0FBSUEsRUFBUSxFQUFHLFNBQVEsRUFJdkIsV0FBWUEsRUFBUSxFQUFHLFNBQVEsQ0FDbkMsQ0FBQyxFQVVZMEosR0FBYzdELEdBQVMsT0FBTyxDQUN2QyxLQUFNNUYsRUFBVSxTQUFTLENBQzdCLENBQUMsRUFJWTBKLEdBQWtCaEMsR0FBcUIsT0FBUSxDQUN4REssR0FDQUksR0FDQUMsR0FDQUksR0FDQUcsR0FDQVMsR0FDQWIsR0FDQVEsR0FDQU0sR0FDQUUsR0FDQUMsR0FDQUMsRUFDSixDQUFDLEVBQ1lFLEdBQVlDLEdBQVEsQ0FDN0IzQixHQUNBRixHQUNBRyxHQUNBQyxHQUNBQyxHQUNBSSxHQUNBRyxHQUNBUyxHQUNBYixHQUNBRSxHQUNBTSxHQUNBTSxHQUNBRSxHQUNBQyxHQUNBQyxFQUNKLENBQUMsRUFJWUksR0FBbUIvSixFQUFTLENBQ3JDLFlBQWE2SCxFQUFRLEVBQ3JCLGFBQWNBLEVBQVEsRUFDdEIsWUFBYUEsRUFBUSxFQUNyQixtQkFBb0IxSCxFQUFTRixFQUFRLEVBQUk0SCxFQUFRLENBQUUsRUFBRSxTQUFRLEVBQzdELG9CQUFxQjFILEVBQVNGLEVBQVEsRUFBSTRILEVBQVEsQ0FBRSxFQUFFLFNBQVEsRUFDOUQsU0FBVTVILEVBQVEsRUFBRyxTQUFRLENBQ2pDLENBQUMsRUFDWStKLEdBQVloSyxFQUFTLENBQzlCLFNBQVU2SCxFQUFRLEVBQUcsU0FBUSxFQUM3QixZQUFhQSxFQUFRLEVBQ3JCLGFBQWNBLEVBQVEsRUFDdEIsWUFBYUEsRUFBUSxFQUNyQixtQkFBb0JqQixHQUNULENBQ1B6RyxFQUFTRixJQUFZNEgsR0FBVSxFQUMvQnhILEVBQVFGLEVBQVNGLElBQVk0SCxFQUFRLENBQUUsQ0FBQyxDQUNoRCxDQUFLLEVBQ0ksU0FBUSxFQUNiLG9CQUFxQmpCLEdBQ1YsQ0FDUHpHLEVBQVNGLElBQVk0SCxHQUFVLEVBQy9CeEgsRUFBUUYsRUFBU0YsSUFBWTRILEVBQVEsQ0FBRSxDQUFDLENBQ2hELENBQUssRUFDSSxTQUFRLEVBQ2Isb0JBQXFCeEgsRUFBUTBKLEVBQWdCLEVBQUUsU0FBUSxDQUMzRCxDQUFDLEVBT1lFLEdBQXdCcEUsR0FBVyxPQUFPLENBQ25ELEtBQU0zRixFQUFVLG1CQUFtQixFQUluQyxNQUFPRCxFQUFRLENBQ25CLENBQUMsRUFJWWlLLEdBQTZCckUsR0FBVyxPQUFPLENBQ3hELEtBQU0zRixFQUFVLGtCQUFrQixDQUN0QyxDQUFDLEVBSVlpSyxHQUErQnRFLEdBQVcsT0FBTyxDQUMxRCxLQUFNM0YsRUFBVSxlQUFlLEVBSS9CLFNBQVUyRixHQUFXLE9BQU8sQ0FJeEIsR0FBSTVGLEVBQVEsRUFJWixNQUFPK0osR0FJUCxPQUFRM0osRUFBUXVKLEVBQWUsQ0FDdkMsQ0FBSyxDQUNMLENBQUMsRUFLWVEsR0FBeUJ2RSxHQUFXLE9BQU8sQ0FDcEQsS0FBTTNGLEVBQVUsT0FBTyxFQUN2QixNQUFPRSxFQUFLLEVBQUcsU0FBUywwQkFBMEIsQ0FDdEQsQ0FBQyxFQUMwQndILEdBQXFCLE9BQVEsQ0FDcERxQyxHQUNBRSxHQUNBRCxHQUNBRSxFQUNKLENBQUMsRUMzbkJELFNBQVNDLElBQXdCLENBQzdCLE1BQU10eEMsRUFBTSxDQUFBLEVBSVosTUFBTyxDQUFFLElBQUFBLEVBQUssUUFIRSxJQUFNLFFBQ2xCdEQsRUFBQXNELEVBQUksVUFBSixNQUFBdEQsRUFBQSxLQUFBc0QsRUFDSixDQUNxQixDQUN6QixDQUNBLFNBQVN1eEMsTUFBdUJDLEVBQVMsQ0FDckMsTUFBTUMsRUFBU0QsRUFBUSxPQUFPLE9BQU8sRUFDckMsR0FBSUMsRUFBTyxTQUFXLEVBQ2xCLE9BRUosTUFBTUMsRUFBUSxZQUFZLElBQzFCLEdBQUksT0FBT0EsR0FBVSxXQUNqQixHQUFJLENBQ0EsT0FBT0EsRUFBTUQsQ0FBTSxDQUN2QixPQUNPbDJDLEVBQU8sQ0FDVm9ZLEVBQU8sTUFBTSx5Q0FBeUNwWSxDQUFLLEVBQUUsQ0FDakUsQ0FFSixNQUFNbzJDLEVBQWEsSUFBSSxnQkFDakJDLEVBQWlCQyxHQUFXLENBQ3pCRixFQUFXLE9BQU8sU0FDbkJBLEVBQVcsTUFBTUUsQ0FBTSxDQUUvQixFQUNBLFVBQVdDLEtBQVVMLEVBQVEsQ0FDekIsR0FBSUssRUFBTyxRQUFTLENBQ2hCRixFQUFjRSxFQUFPLE1BQU0sRUFDM0IsS0FDSixDQUNBQSxFQUFPLGlCQUFpQixRQUFTLElBQU1GLEVBQWNFLEVBQU8sTUFBTSxFQUFHLENBQ2pFLEtBQU0sRUFDbEIsQ0FBUyxDQUNMLENBQ0EsT0FBT0gsRUFBVyxNQUN0QixDQUNBLE1BQU1JLEVBQWMsQ0FFaEIsWUFBWTltQyxFQUFPLENBRG5CQyxFQUFBLGNBRUksS0FBSyxNQUFRRCxDQUNqQixDQU9BLElBQUksU0FBVSxDQUNWLE9BQU8waEMsR0FBYSxLQUFLLE1BQU8sS0FBSyxRQUFRLENBQ2pELENBU0EsSUFBSSxRQUFTLENBQ1QsT0FBT0EsR0FBYSxDQUFBLEVBQUksS0FBSyxRQUFRLENBQ3pDLENBSUEsSUFBSSxPQUFRLENBQ1IsT0FBTyxLQUFLLE1BQU0sY0FDdEIsQ0FNQSxJQUFJLFVBQVcsQ0FDWCxPQUFPLEtBQUssTUFBTSxlQUN0QixDQUlBLElBQUksY0FBZSxDQUNmLE9BQU8sS0FBSyxNQUFNLGVBQ3RCLENBSUEsSUFBSSxnQkFBaUIsQ0FDakIsTUFBTXFGLEVBQVksS0FBSyxhQUN2QixPQUFPQSxHQUFhQSxFQUFVLE9BQVMsRUFDakNBLEVBQVVBLEVBQVUsT0FBUyxDQUFDLEVBQUUsV0FDaEMsTUFDVixDQUlBLElBQUksV0FBWSxDQUNaLE9BQU8sS0FBSyxNQUFNLGFBQ3RCLENBS0EsSUFBSSxhQUFjLENBQ2QsT0FBTyxLQUFLLFNBQ2hCLENBSUEsSUFBSSx1QkFBd0IsQ0FDeEIsT0FBTyxLQUFLLE1BQU0sc0JBQ3RCLENBSUEsSUFBSSx3QkFBeUIsQ0FDekIsT0FBTyxLQUFLLE1BQU0sdUJBQ3RCLENBSUEsSUFBSSwyQkFBNEIsQ0FDNUIsT0FBTyxLQUFLLE1BQU0sMEJBQ3RCLENBSUEsSUFBSSw0QkFBNkIsQ0FDN0IsT0FBTyxLQUFLLE1BQU0sMkJBQ3RCLENBSUEsSUFBSSxlQUFnQixPQUNoQixRQUFJdDFDLEVBQUEsS0FBSyxNQUFNLGVBQVgsWUFBQUEsRUFBeUIsUUFBUyx5QkFDM0IsS0FBSyxNQUFNLGFBQWEsS0FBSyxjQUVqQyxDQUFBLENBQ1gsQ0FLQSxJQUFJLGFBQWMsT0FDZCxLQUFJQSxFQUFBLEtBQUssTUFBTSxlQUFYLFlBQUFBLEVBQXlCLFFBQVMseUJBQ2xDLE9BQU8sS0FBSyxNQUFNLGNBQWMsbUJBQW1CLEtBQUssTUFBTSxhQUFhLE1BQU0sRUFFckZpWCxFQUFPLEtBQUsscURBQXFELENBRXJFLENBQ0osQ0FJTyxNQUFNcytCLFdBQWtCRixFQUFjLENBQ3pDLFlBQVk5bUMsRUFBTyxDQUNmLE1BQU1BLENBQUssQ0FDZixDQUNKLENBSU8sTUFBTWluQyxXQUEwQkgsRUFBYyxDQTRCakQsWUFBWWoxQyxFQUFTLEdBQUksQ0FDckIsTUFBTUEsRUFBTyxLQUFLLEVBN0JuQitzQyxFQUFBLEtBQUFzSSxJQVVIam5DLEVBQUEsbUJBQWMsR0FJZEEsRUFBQSxpQkFDQTIrQixFQUFBLEtBQUF1SSxHQUFTLE1BQ1R2SSxFQUFBLEtBQUF3SSxJQUNBeEksRUFBQSxLQUFBeUksSUFDQXpJLEVBQUEsS0FBQTBJLElBQ0ExSSxFQUFBLEtBQUEySSxJQUNBM0ksRUFBQSxLQUFBNEksSUFDQTVJLEVBQUEsS0FBQTZJLElBQ0E3SSxFQUFBLEtBQUE4SSxJQUNBOUksRUFBQSxLQUFBK0ksSUFDQS9JLEVBQUEsS0FBQWdKLEdBQWEsSUFDYmhKLEVBQUEsS0FBQWlKLElBQ0FqSixFQUFBLEtBQUFrSixJQUNBbEosRUFBQSxLQUFBbUosSUFHSSxHQUFBQyxFQUFBLEtBQUtWLEdBQW1CLElBQUksaUJBQzVCVSxFQUFBLEtBQUtaLEdBQWtCZCxHQUFvQnowQyxFQUFPLE9BQVFxdEMsRUFBQSxLQUFLb0ksSUFBaUIsTUFBTSxHQUN0RlUsRUFBQSxLQUFLWCxHQUF1Qm5JLEVBQUEsS0FBS2tJLEtBQ2pDWSxFQUFBLEtBQUtSLEdBQWtCLElBQUlTLEdBQWdCLENBQ3ZDLE1BQVF2QixHQUFlLENBQ25Cc0IsRUFBQSxLQUFLVCxHQUFzQmIsRUFDL0IsRUFDQSxPQUFRLElBQU0sQ0FDTHhILEVBQUEsS0FBS29JLElBQWlCLE9BQU8sU0FDOUJwSSxFQUFBLEtBQUtvSSxJQUFpQixNQUFLLENBRW5DLENBQ1osQ0FBUyxHQUNEVSxFQUFBLEtBQUtQLEdBQW9CLElBQUksUUFBUSxDQUFDUyxFQUFTQyxJQUFXLENBQ3RESCxFQUFBLEtBQUtOLEdBQTJCUSxHQUNoQ0YsRUFBQSxLQUFLTCxHQUEwQlEsRUFDbkMsQ0FBQyxHQUNHakosRUFBQSxLQUFLa0ksSUFBaUIsQ0FFdEIsS0FBTSxDQUFFLElBQUtnQixFQUFVLFFBQVNDLENBQVcsRUFBS2hDLEdBQXFCLEVBQ3JFK0IsRUFBUyxRQUFVLElBQU0sQ0FDckJFLEVBQUEsS0FBS3BCLEdBQUFxQixJQUFMLFVBQ0osRUFDQVAsRUFBQSxLQUFLRixHQUFnQk8sR0FDckJMLEVBQUEsS0FBS0QsR0FBbUJLLEdBQ3BCbEosRUFBQSxLQUFLa0ksSUFBZ0IsUUFDckJpQixFQUFXLEVBR1huSixFQUFBLEtBQUtrSSxJQUFnQixpQkFBaUIsUUFBU2lCLEVBQWEsQ0FDeEQsS0FBTSxFQUMxQixDQUFpQixDQUVULENBQ0osQ0E1REEsSUFBSSxjQUFlLENBQ2YsT0FBTyxLQUFLLFNBQ2hCLENBK0RBLFNBQVNueUMsRUFBTSxPQUNOLEtBQUssWUFDTnpFLEVBQUF5dEMsRUFBQSxLQUFLcUksTUFBTCxNQUFBOTFDLEVBQTBCLFFBQVF5RSxFQUUxQyxDQUtBLE9BQVEsT0FDQSxDQUFDLEtBQUssV0FBYWdwQyxFQUFBLEtBQUtxSSxNQUN4QnJJLEVBQUEsS0FBS3FJLElBQW9CLE1BQUssRUFDOUJTLEVBQUEsS0FBS1QsR0FBc0IsU0FDM0I5MUMsRUFBQXl0QyxFQUFBLEtBQUt3SSxNQUFMLE1BQUFqMkMsRUFBQSxZQUVKNjJDLEVBQUEsS0FBS3BCLEdBQUFzQixJQUFMLFVBQ0osQ0FLQSxZQUFZQyxFQUFLLE9BQ1QsQ0FBQyxLQUFLLFdBQWF2SixFQUFBLEtBQUtxSSxNQUN4QnJJLEVBQUEsS0FBS3FJLElBQW9CLE1BQU1rQixDQUFHLEVBQ2xDVCxFQUFBLEtBQUtULEdBQXNCLFNBRS9CUyxFQUFBLEtBQUtiLEdBQVNzQixJQUNkaDNDLEVBQUF5dEMsRUFBQSxLQUFLeUksTUFBTCxNQUFBbDJDLEVBQUEsVUFBK0JnM0MsR0FDL0J2SixFQUFBLEtBQUt1SSxJQUFrQixNQUFPeDFCLEdBQU0sQ0FDaEN2SixFQUFPLE1BQU0seUJBQXlCdUosQ0FBQyxFQUFFLENBQzdDLENBQUMsRUFDRHEyQixFQUFBLEtBQUtwQixHQUFBc0IsSUFBTCxVQUNKLENBSUEsSUFBSSxXQUFZLENBQ1osT0FBT3RKLEVBQUEsS0FBSzBJLEdBQ2hCLENBS0EsVUFBVyxDQUNQLE9BQU8xSSxFQUFBLEtBQUtzSSxHQUNoQixDQUtBLElBQUksV0FBWSxDQUNaLE9BQU90SSxFQUFBLEtBQUt1SSxHQUNoQixDQUlBLElBQUksT0FBUSxDQUNSLE9BQU92SSxFQUFBLEtBQUtpSSxHQUNoQixDQUNBLGFBQWF6d0MsRUFBVSxHQUFJLENBQ3ZCLE1BQU1neUMsRUFBU3hKLEVBQUEsS0FBS3NJLElBQWdCLFlBQVksSUFBSTVILEdBQWdCLENBQ2hFLFVBQVVQLEVBQU9xSCxFQUFZLENBQ3pCLEdBQUlySCxFQUFNLE9BQVMsMEJBQ2ZBLEVBQU0sS0FBSyxPQUFTLG9CQUFxQixDQUN6QyxNQUFNbnBDLEVBQU8rdkMsR0FBc0IsTUFBTTVHLEVBQU0sSUFBSSxFQUNuRHFILEVBQVcsUUFBUXh3QyxFQUFLLEtBQUssQ0FDakMsQ0FDSixDQUNaLENBQVMsQ0FBQyxFQUNGLE9BQUlRLEVBQVEsMEJBQ0Q4b0MsR0FBUyxRQUFRa0osQ0FBTSxFQUUzQkEsQ0FDWCxDQUNBLENBQUMsT0FBTyxhQUFhLEdBQUksQ0FDckIsT0FBT3hKLEVBQUEsS0FBS3NJLElBQWdCLE9BQU8sYUFBYSxFQUFDLENBQ3JELENBTUEsc0JBQXNCbUIsRUFBUyxDQUMzQlgsRUFBQSxLQUFLSCxHQUFxQmMsRUFDOUIsQ0FNQSx1QkFBd0IsQ0FDcEIsT0FBT3pKLEVBQUEsS0FBSzJJLEdBQ2hCLENBS0EsaUJBQWtCLENBQ2QsT0FBTzNJLEVBQUEsS0FBS21JLEtBQXdCbkksRUFBQSxLQUFLa0ksR0FDN0MsQ0FvQ0osQ0E3TElELEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUEzQkdiLEdBQUEsWUF5S0hxQixHQUFZLFVBQUcsT0FDWCxHQUFJckosRUFBQSxLQUFLMEksSUFBWSxDQUNqQlUsRUFBQSxLQUFLcEIsR0FBQXNCLElBQUwsV0FDQSxNQUNKLENBQ0FSLEVBQUEsS0FBS0osR0FBYSxJQUNsQixNQUFNbEIsRUFBYXhILEVBQUEsS0FBS3FJLElBRXhCLEdBREFTLEVBQUEsS0FBS1QsR0FBc0IsUUFDdkJiLEVBQ0EsR0FBSSxDQUNBQSxFQUFXLE1BQUssQ0FDcEIsT0FDTytCLEVBQUssQ0FDUi8vQixFQUFPLE1BQU0sNkNBQTZDKy9CLENBQUcsRUFBRSxDQUNuRSxFQUVKaDNDLEVBQUF5dEMsRUFBQSxLQUFLd0ksTUFBTCxNQUFBajJDLEVBQUEsV0FDQTYyQyxFQUFBLEtBQUtwQixHQUFBc0IsSUFBTCxVQUNKLEVBQ0FBLEdBQW1CLFVBQUcsQ0FLbEIsR0FISXRKLEVBQUEsS0FBSzZJLE1BQ0w3SSxFQUFBLEtBQUs2SSxJQUFpQixRQUFVLFFBRWhDN0ksRUFBQSxLQUFLa0ksS0FBbUJsSSxFQUFBLEtBQUs0SSxJQUM3QixHQUFJLENBQ0E1SSxFQUFBLEtBQUtrSSxJQUFnQixvQkFBb0IsUUFBU2xJLEVBQUEsS0FBSzRJLEdBQWEsQ0FDeEUsT0FDT1csRUFBSyxDQUNSLy9CLEVBQU8sTUFBTSxvQ0FBb0MrL0IsQ0FBRyxFQUFFLENBQzFELENBRUpULEVBQUEsS0FBS0YsR0FBZ0IsUUFDckJFLEVBQUEsS0FBS0QsR0FBbUIsT0FDNUIsRUM3V0osTUFBTWEsR0FBYSxPQUFPLElBQUksc0NBQXNDLEVBQ3BFLElBQUlDLEdBS0osU0FBU0MsSUFBOEIsQ0FDbkMsR0FBSSxDQUNBLE1BQU1DLEVBQWMsV0FDZEMsRUFBWUQsRUFBWUgsRUFBVSxFQUN4QyxHQUFJSSxFQUNBLE9BQU9BLEVBRVgsTUFBTUMsRUFBUyxJQUFJcEosR0FDbkIsT0FBQWtKLEVBQVlILEVBQVUsRUFBSUssRUFDbkJBLENBQ1gsTUFDTSxDQUlGLE9BQUtKLEtBQ0RBLEdBQW1CLElBQUloSixJQUVwQmdKLEVBQ1gsQ0FDSixDQUNBLFNBQVNLLElBQW1CLENBQ3hCLE1BQU1DLEVBQVFMLEdBQTJCLEVBQUcsU0FBUSxFQUNwRCxJQUFJSyxHQUFBLFlBQUFBLEVBQU8sVUFBVyxHQUNsQixPQUFPQSxDQUdmLENBTU8sU0FBU3ZMLElBQWtCLENBQzlCLE1BQU13TCxFQUFlRixHQUFnQixFQUNyQyxPQUFJRSxHQUFBLE1BQUFBLEVBQWMsTUFDUEEsRUFBYSxNQUVqQixJQUNYLENBTU8sU0FBU2g5QixJQUFpQixDQUM3QixNQUFNRCxFQUFjKzhCLEdBQWdCLEVBQ3BDLE9BQUkvOEIsR0FBQSxNQUFBQSxFQUFhLEtBQ05BLEVBQVksS0FFaEIsSUFDWCxDQU9BLFNBQVNrOUIsR0FBZ0NoNUMsRUFBSWk1QyxFQUFnQkMsRUFBa0IsQ0FDM0UsTUFBTyxVQUFZLENBQ2YsTUFBTUMsRUFBUTVMLEdBQWUsRUFDN0IsR0FBSSxDQUFDNEwsRUFDRCxNQUFNLElBQUksTUFBTSxnQkFBZ0IsRUFFcEMsSUFBSUMsRUFBa0IsR0FDbEJDLEVBQVUsR0FDZCxNQUFNQyxFQUFpQixJQUFNLENBQ3pCTCxFQUFlLE9BQVMsR0FDeEJBLEVBQWUsTUFBUSxPQUN2QkEsRUFBZSxLQUFPLE9BQ3RCQSxFQUFlLGFBQWUsT0FDOUJSLEdBQTJCLEVBQUcsVUFBVVMsQ0FBZ0IsQ0FDNUQsRUFDQSxHQUFJLENBQ0EsTUFBTUMsRUFBTSxNQUFLLEVBQ2pCRSxFQUFVLEdBQ1YsTUFBTTczQyxFQUFTLE1BQU14QixFQUFHbTVDLENBQUssRUFFN0IsR0FBSTMzQyxhQUFrQm8xQyxHQUFtQixDQUNyQyxNQUFNMkMsRUFBb0IvM0MsRUFBTyxzQkFBcUIsRUFDdEQsR0FBSSszQyxFQUNBLE9BQUFILEVBQWtCLEdBQ2xCRyxFQUFrQixRQUFRLFNBQVksQ0FDbEMsR0FBSSxDQUNJRixHQUNBLE1BQU1GLEVBQU0sSUFBRyxDQUV2QixRQUN4QixDQUM0QkcsRUFBYyxDQUNsQixDQUNKLENBQUMsRUFDTTkzQyxDQUVmLENBRUEsT0FBSTYzQyxHQUNBLE1BQU1GLEVBQU0sSUFBRyxFQUVaMzNDLENBQ1gsUUFDUixDQUlpQjQzQyxHQUNERSxFQUFjLENBRXRCLENBQ0osQ0FDSixDQVFPLGVBQWVFLEdBQVVMLEVBQU9uNUMsRUFBSXFHLEVBQVUsQ0FBQSxFQUFJLENBT3JELE1BQU1nVixFQUFVLENBQ1osTUFQYSxPQUFPODlCLEdBQVUsU0FDNUJNLEdBQXNCLEVBQUcsWUFBWSxDQUNuQyxHQUFHcHpDLEVBQ0gsS0FBTTh5QyxDQUNsQixDQUFTLEVBQ0NBLEVBR0YsT0FBUSxFQUNoQixFQUNVRCxFQUFtQlQsR0FBMkIsRUFBRyxTQUFRLEVBQy9ELE9BQU9BLEdBQTJCLEVBQUcsSUFBSXA5QixFQUFTMjlCLEdBQWdDaDVDLEVBQUlxYixFQUFTNjlCLENBQWdCLENBQUMsQ0FDcEgsQ0FTTyxlQUFlUSxHQUFpQjE1QyxFQUFJcUcsRUFBVSxHQUFJLENBRXJELEdBRHFCa25DLEdBQWUsRUFFaEMsT0FBTyxNQUFNdnRDLEVBQUUsRUFHbkIsTUFBTTI1QyxFQUFhLENBQ2YsTUFGYUYsS0FBeUIsWUFBWXB6QyxDQUFPLEVBR3pELE9BQVEsRUFDaEIsRUFDVTZ5QyxFQUFtQlQsR0FBMkIsRUFBRyxTQUFRLEVBQy9ELE9BQU9BLEdBQTJCLEVBQUcsSUFBSWtCLEVBQVlYLEdBQWdDaDVDLEVBQUkyNUMsRUFBWVQsQ0FBZ0IsQ0FBQyxDQUMxSCxDQU1PLFNBQVNVLEdBQWVoTixFQUFNLENBQ2pDLE1BQU12eEIsRUFBVXc5QixHQUFnQixFQUNoQyxHQUFJLENBQUN4OUIsRUFDRCxNQUFNLElBQUksTUFBTSx5QkFBeUIsRUFFekNBLEVBQVEsT0FDUkEsRUFBUSxLQUFLLGFBQWVBLEVBQVEsYUFDcENBLEVBQVEsYUFBZUEsRUFBUSxNQUVuQ3V4QixFQUFLLGFBQWV2eEIsRUFBUSxNQUFRQSxFQUFRLGFBQzVDQSxFQUFRLEtBQU91eEIsRUFDZjZMLEdBQTJCLEVBQUcsVUFBVXA5QixDQUFPLENBQ25ELENBQ08sU0FBU3crQixJQUFtQixPQUMvQixNQUFNeCtCLEVBQVV3OUIsR0FBZ0IsRUFDNUJ4OUIsSUFDQUEsRUFBUSxLQUFPQSxFQUFRLGFBQ3ZCQSxFQUFRLGNBQWVqYSxFQUFBaWEsRUFBUSxlQUFSLFlBQUFqYSxFQUFzQixhQUM3Q3EzQyxHQUEyQixFQUFHLFVBQVVwOUIsQ0FBTyxFQUV2RCxDQU1PLFNBQVN5K0IsR0FBc0JDLEVBQVcsQ0FDN0MsTUFBTWorQixFQUFjQyxHQUFjLEVBQzlCRCxHQUNBQSxFQUFZLFNBQVNpK0IsQ0FBUyxDQUV0QyxDQVFPLFNBQVNDLEdBQW9CMytCLEVBQVMsV0FDekMsTUFBTyxDQUNILE9BQU9qYSxFQUFBaWEsRUFBUSxRQUFSLFlBQUFqYSxFQUFlLFFBQ3RCLE1BQU1NLEVBQUEyWixFQUFRLE9BQVIsWUFBQTNaLEVBQWMsUUFDcEIsY0FBY2tCLEVBQUF5WSxFQUFRLGVBQVIsWUFBQXpZLEVBQXNCLFFBQ3BDLE9BQVF5WSxFQUFRLE1BQ3hCLENBQ0EsQ0FNTyxTQUFTNCtCLEdBQW1CajZDLEVBQUksQ0FDbkMsTUFBTWk1QyxFQUFpQkosR0FBZ0IsRUFDdkMsR0FBSSxDQUFDSSxFQUNELE9BQU9qNUMsRUFBRSxFQUViLE1BQU1rNkMsRUFBZ0JGLEdBQW9CZixDQUFjLEVBQ3hELE9BQU9SLEdBQTJCLEVBQUcsSUFBSXlCLEVBQWVsNkMsQ0FBRSxDQUM5RCxDQzVOTyxNQUFNbTZDLEVBQW9CLENBQzdCLE1BQU0sT0FBTzNyQyxFQUFPLENBQ2hCLEdBQUl3SixHQUFRLFNBQVUsQ0FDbEJLLEVBQU8sTUFBTSxzQ0FBc0MsRUFDbkQsTUFDSixDQUNBLFVBQVd4UyxLQUFRMkksRUFDWDNJLEVBQUssT0FBUyxRQUNkLFFBQVEsSUFBSSxtQ0FBbUNBLEVBQUssT0FBTyxTQUFTQSxFQUFLLElBQUksR0FBR0EsRUFBSyxRQUFVLFlBQVlBLEVBQUssT0FBTyxHQUFLLEVBQUUsRUFBRSxFQUdoSSxRQUFRLElBQUksMkJBQTJCLEtBQUssVUFBVUEsQ0FBSSxDQUFDLEVBQUUsQ0FHekUsQ0FDSixDQUNPLE1BQU11MEMsRUFBb0IsQ0FXN0IsWUFBWUMsRUFBVSxDQUFFLGFBQUFDLEVBQWUsSUFBTSxhQUFBQyxFQUFlLElBQUssY0FBQUMsRUFBZ0IsSUFDakYsbUJBQUFDLEVBQXFCLEVBQUcsRUFBTSxHQUFJLENBWi9CbE0sRUFBQSxLQUFBbU0sSUFDSG5NLEVBQUEsS0FBQW9NLElBQ0FwTSxFQUFBLEtBQUFxTSxJQUNBck0sRUFBQSxLQUFBc00sSUFDQXRNLEVBQUEsS0FBQXVNLElBQ0F2TSxFQUFBLEtBQUF3TSxJQUNBeE0sRUFBQSxLQUFBeU0sR0FBVSxDQUFBLEdBQ1Z6TSxFQUFBLEtBQUEwTSxJQUNBMU0sRUFBQSxLQUFBMk0sR0FBVyxNQUNYM00sRUFBQSxLQUFBNE0sR0FBb0IsSUFDcEI1TSxFQUFBLEtBQUE2TSxHQUEwQixNQUd0QnpELEVBQUEsS0FBS2dELEdBQWdCTCxHQUNyQjNDLEVBQUEsS0FBS2lELEdBQWdCTCxHQUNyQjVDLEVBQUEsS0FBS2tELEdBQWlCTCxHQUN0QjdDLEVBQUEsS0FBS21ELEdBQXFCUixFQUFlRyxHQUN6QzlDLEVBQUEsS0FBS29ELEdBQVlWLEdBQ2pCMUMsRUFBQSxLQUFLc0QsR0FBU0EsSUFLVjVpQyxFQUFPLE1BQU0sdUpBQXVKLENBRTVLLENBQ0EsT0FBUSxDQUNKcy9CLEVBQUEsS0FBS3lELEdBQTBCLElBQUksaUJBQ25DbkQsRUFBQSxLQUFLeUMsR0FBQVcsSUFBTCxVQUNKLENBNENBLE1BQU0sYUFBYWxDLEVBQU8sQ0FDdEIsTUFBTWxCLEVBQUEsS0FBS3lDLEdBQUFZLElBQUwsVUFBa0JuQyxFQUM1QixDQUNBLE1BQU0sV0FBV29DLEVBQVEsQ0FFekIsQ0FDQSxNQUFNLFlBQVlDLEVBQU8sQ0FFekIsQ0FDQSxNQUFNLFVBQVU1TyxFQUFNLENBQ2xCLE1BQU1xTCxFQUFBLEtBQUt5QyxHQUFBWSxJQUFMLFVBQWtCMU8sRUFDNUIsQ0FDQSxNQUFNLFNBQVM4QyxFQUFTLE9BUXBCLElBUElBLEdBQ0FiLEVBQUEsS0FBS29NLElBQU8sV0FBVyxJQUFNLFFBRXpCNzVDLEVBQUF5dEMsRUFBQSxLQUFLdU0sTUFBTCxNQUFBaDZDLEVBQThCLE9BQ2xDLEVBQUdzdUMsQ0FBTyxFQUVkcjNCLEVBQU8sTUFBTSwwQkFBMEIsRUFDaEN3MkIsRUFBQSxLQUFLbU0sSUFBUSxPQUFTLEdBQUcsQ0FNNUIsR0FMQTNpQyxFQUFPLE1BQU0sNENBQTRDdzJCLEVBQUEsS0FBS21NLElBQVEsTUFBTSxFQUFFLEVBQ3pFbk0sRUFBQSxLQUFLc00sS0FFTixNQUFNbEQsRUFBQSxLQUFLeUMsR0FBQWUsSUFBTCxVQUFvQixLQUUxQnI2QyxFQUFBeXRDLEVBQUEsS0FBS3VNLE1BQUwsTUFBQWg2QyxFQUE4QixPQUFPLFFBQVMsQ0FDOUNpWCxFQUFPLE1BQU0saUNBQWlDLEVBQzlDLE1BQU00L0IsRUFBQSxLQUFLeUMsR0FBQWUsSUFBTCxVQUFvQixJQUMxQixLQUNKLENBRUEsTUFBTSxJQUFJLFFBQVM1RCxHQUFZaEosRUFBQSxLQUFLb00sSUFBTyxXQUFXcEQsRUFBUyxHQUFHLENBQUMsQ0FDdkUsQ0FDQXgvQixFQUFPLE1BQU0sdUJBQXVCLEVBQ2hDdzJCLEVBQUEsS0FBS29NLEtBQVVwTSxFQUFBLEtBQUtxTSxLQUVwQnJNLEVBQUEsS0FBS29NLElBQU8sYUFBYXBNLEVBQUEsS0FBS3FNLEdBQVEsQ0FFOUMsQ0FDQSxNQUFNLFlBQWEsQ0FDWHJNLEVBQUEsS0FBS21NLElBQVEsT0FBUyxHQUN0QixNQUFNL0MsRUFBQSxLQUFLeUMsR0FBQWUsSUFBTCxVQUFvQixHQUVsQyxDQUNKLENBckhJZCxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBVkdWLEdBQUEsWUE4QkdZLEdBQVksZUFBQ3oxQyxFQUFNLENBQ3JCLEdBQUlncEMsRUFBQSxLQUFLbU0sSUFBUSxPQUFTLEVBQUluTSxFQUFBLEtBQUs4TCxJQUFlLENBQzlDdGlDLEVBQU8sTUFBTSx1Q0FBdUMsRUFDcEQsTUFDSixDQUVBdzJCLEVBQUEsS0FBS21NLElBQVEsS0FBS24xQyxDQUFJLEVBQ2xCZ3BDLEVBQUEsS0FBS21NLElBQVEsT0FBU25NLEVBQUEsS0FBS2lNLEtBRTNCLE1BQU03QyxFQUFBLEtBQUt5QyxHQUFBZSxJQUFMLFVBRWQsRUFDQUosR0FBYyxVQUFHLENBQ2IxRCxFQUFBLEtBQUt1RCxHQUFXck0sRUFBQSxLQUFLb00sSUFBTyxXQUFXLFNBQVksQ0FFL0MsTUFBTWhELEVBQUEsS0FBS3lDLEdBQUFlLElBQUwsV0FDTnhELEVBQUEsS0FBS3lDLEdBQUFXLElBQUwsVUFDSixFQUFHeE0sRUFBQSxLQUFLZ00sR0FBYyxHQUdsQixPQUFPaE0sRUFBQSxLQUFLcU0sSUFBUyxPQUFVLFlBQy9Cck0sRUFBQSxLQUFLcU0sSUFBUyxNQUFLLENBRTNCLEVBQ01PLEdBQWMsZUFBQ0MsRUFBUSxHQUFPLENBQ2hDLEdBQUk3TSxFQUFBLEtBQUttTSxJQUFRLFNBQVcsR0FJNUIsR0FEQTNpQyxFQUFPLE1BQU0sNkJBQTZCcWpDLENBQUssa0JBQWtCN00sRUFBQSxLQUFLbU0sSUFBUSxNQUFNLEVBQUUsRUFDbEZVLEdBQVM3TSxFQUFBLEtBQUttTSxJQUFRLE9BQVNuTSxFQUFBLEtBQUsrTCxJQUFlLENBQ25ELE1BQU1lLEVBQVcsQ0FBQyxHQUFHOU0sRUFBQSxLQUFLbU0sR0FBTyxFQUNqQ3JELEVBQUEsS0FBS3FELEdBQVUsQ0FBQSxHQUNmckQsRUFBQSxLQUFLd0QsR0FBb0IsSUFDekIsTUFBTXRNLEVBQUEsS0FBS2tNLElBQVUsT0FBT1ksQ0FBUSxFQUNwQ2hFLEVBQUEsS0FBS3dELEdBQW9CLEdBQzdCLFNBQ1N0TSxFQUFBLEtBQUttTSxJQUFRLE9BQVMsRUFBRyxDQUM5QixNQUFNWSxFQUFRL00sRUFBQSxLQUFLbU0sSUFBUSxPQUFPLEVBQUduTSxFQUFBLEtBQUsrTCxHQUFhLEVBQ3ZEakQsRUFBQSxLQUFLd0QsR0FBb0IsSUFDekIsTUFBTXRNLEVBQUEsS0FBS2tNLElBQVUsT0FBT2EsQ0FBSyxFQUNqQ2pFLEVBQUEsS0FBS3dELEdBQW9CLEdBQzdCLEVBQ0osRUErQ0csTUFBTVUsRUFBc0IsQ0FBNUIsY0FDSHROLEVBQUEsS0FBQXVOLEdBQWMsQ0FBQSxHQUNkLE9BQVEsQ0FDSixVQUFXL2pCLEtBQWE4VyxFQUFBLEtBQUtpTixJQUNyQi9qQixFQUFVLE9BQ1ZBLEVBQVUsTUFBSyxDQUczQixDQUNBLGtCQUFrQkEsRUFBVyxDQUN6QjhXLEVBQUEsS0FBS2lOLElBQVksS0FBSy9qQixDQUFTLENBQ25DLENBQ0EsY0FBY1MsRUFBWSxDQUN0Qm5nQixFQUFPLE1BQU0sOEJBQThCLEVBQzNDLFVBQVcwZixLQUFhOFcsRUFBQSxLQUFLaU4sSUFDekIvakIsRUFBVSxTQUFRLEVBRXRCNGYsRUFBQSxLQUFLbUUsR0FBY3RqQixFQUN2QixDQUNBLE1BQU0sYUFBYTJnQixFQUFPLENBQ3RCLFVBQVdwaEIsS0FBYThXLEVBQUEsS0FBS2lOLElBQ3pCLE1BQU0vakIsRUFBVSxhQUFhb2hCLENBQUssQ0FFMUMsQ0FDQSxNQUFNLFdBQVdBLEVBQU8sQ0FDcEIsVUFBV3BoQixLQUFhOFcsRUFBQSxLQUFLaU4sSUFDekIsTUFBTS9qQixFQUFVLFdBQVdvaEIsQ0FBSyxDQUV4QyxDQUNBLE1BQU0sWUFBWXZNLEVBQU0sQ0FDcEIsVUFBVzdVLEtBQWE4VyxFQUFBLEtBQUtpTixJQUN6QixNQUFNL2pCLEVBQVUsWUFBWTZVLENBQUksQ0FFeEMsQ0FDQSxNQUFNLFVBQVVBLEVBQU0sQ0FDbEIsVUFBVzdVLEtBQWE4VyxFQUFBLEtBQUtpTixJQUN6QixNQUFNL2pCLEVBQVUsVUFBVTZVLENBQUksQ0FFdEMsQ0FDQSxNQUFNLFNBQVM4QyxFQUFTLENBQ3BCLFVBQVczWCxLQUFhOFcsRUFBQSxLQUFLaU4sSUFDekIsTUFBTS9qQixFQUFVLFNBQVMyWCxDQUFPLENBRXhDLENBQ0EsTUFBTSxZQUFhLENBQ2YsVUFBVzNYLEtBQWE4VyxFQUFBLEtBQUtpTixJQUN6QixNQUFNL2pCLEVBQVUsV0FBVSxDQUVsQyxDQUNKLENBaERJK2pCLEdBQUEsWUFpREosSUFBSUMsR0FBbUIsS0FDbkJDLEdBQW9CLEtBQ2pCLFNBQVNDLElBQWtCLENBQzlCLE9BQUtGLEtBQ0RBLEdBQW1CLElBQUk1QixJQUVwQjRCLEVBQ1gsQ0FDTyxTQUFTL2hCLElBQW1CLENBQy9CLE9BQUtnaUIsS0FDREEsR0FBb0IsSUFBSTVCLEdBQW9CNkIsSUFBaUIsR0FFMURELEVBQ1gsQ0N2TU8sU0FBU0UsSUFBVSxDQUN0QixPQUFPLElBQUksS0FBSSxFQUFHLFlBQVcsQ0FDakMsQ0FNTyxTQUFTQyxJQUFrQixDQUM5QixNQUFPLFNBQVNqTixHQUFVLEVBQUcsUUFBUSxLQUFNLEVBQUUsQ0FBQyxFQUNsRCxDQU1PLFNBQVNrTixJQUFpQixDQUM3QixNQUFPLFFBQVFsTixHQUFVLEVBQUcsUUFBUSxLQUFNLEVBQUUsRUFBRSxNQUFNLEVBQUcsRUFBRSxDQUFDLEVBQzlELENBY08sU0FBU21OLEdBQW9CcDJDLEVBQUssQ0FDckMsT0FBTyxPQUFPLFlBQVksT0FBTyxRQUFRQSxDQUFHLEVBQUUsT0FBTyxDQUFDLENBQUN4RCxDQUFHLElBQU0sQ0FBQ0EsRUFBSSxXQUFXLEdBQUcsQ0FBQyxDQUFDLENBQ3pGLENDckNPLE1BQU02NUMsR0FBTixNQUFNQSxFQUFLLENBWWQsWUFBWWoyQyxFQUFTMHhCLEVBQVcsQ0FYaENub0IsRUFBQSxZQUFPLGNBQ1AyK0IsRUFBQSxLQUFBZ08sSUFDQWhPLEVBQUEsS0FBQWlPLElBQ0FqTyxFQUFBLEtBQUFrTyxJQUNBbE8sRUFBQSxLQUFBbU8sSUFDQW5PLEVBQUEsS0FBQW9PLElBQ0FwTyxFQUFBLEtBQUFxTyxJQUNBck8sRUFBQSxLQUFBc08sSUFDQXRPLEVBQUEsS0FBQXVJLElBQ0F2SSxFQUFBLEtBQUF1TyxJQUNBdk8sRUFBQSxLQUFBd08sSUFFSXBGLEVBQUEsS0FBSzZFLEdBQVduMkMsRUFBUSxTQUN4QnN4QyxFQUFBLEtBQUs4RSxHQUFVcDJDLEVBQVEsUUFBVSsxQyxHQUFjLEdBQy9DekUsRUFBQSxLQUFLNEUsR0FBUWwyQyxFQUFRLE1BQ3JCc3hDLEVBQUEsS0FBS2dGLEdBQWE1a0IsR0FDbEI0ZixFQUFBLEtBQUsrRSxHQUFZcjJDLEVBQVEsVUFBWSxNQUNyQ3N4QyxFQUFBLEtBQUtiLEdBQVN6d0MsRUFBUSxPQUFTLE1BQy9Cc3hDLEVBQUEsS0FBS2lGLEdBQWF2MkMsRUFBUSxXQUFhLE1BQ3ZDc3hDLEVBQUEsS0FBS2tGLEdBQVd4MkMsRUFBUSxTQUFXLE1BQ25Dc3hDLEVBQUEsS0FBS21GLEdBQWlCejJDLEVBQVEsY0FDbEMsQ0FDQSxJQUFJLFNBQVUsQ0FDVixPQUFPd29DLEVBQUEsS0FBSzJOLEdBQ2hCLENBQ0EsSUFBSSxVQUFXLENBQ1gsT0FBTzNOLEVBQUEsS0FBSzBOLEdBQ2hCLENBQ0EsSUFBSSxRQUFTLENBQ1QsT0FBTzFOLEVBQUEsS0FBSzROLEdBQ2hCLENBQ0EsSUFBSSxVQUFXLENBQ1gsT0FBTzVOLEVBQUEsS0FBSzZOLEdBQ2hCLENBQ0EsSUFBSSxjQUFlLENBQ2YsT0FBTzdOLEVBQUEsS0FBS2tPLEdBQ2hCLENBQ0EsSUFBSSxhQUFhblEsRUFBTSxDQUNuQitLLEVBQUEsS0FBS29GLEdBQWdCblEsRUFDekIsQ0FDQSxPQUFRLENBQ0osR0FBSWlDLEVBQUEsS0FBSytOLElBQVksQ0FDakJ2a0MsRUFBTyxLQUFLLHNCQUFzQixFQUNsQyxNQUNKLENBQ0FzL0IsRUFBQSxLQUFLaUYsR0FBYVYsR0FBTyxHQUN6QnJOLEVBQUEsS0FBSzhOLElBQVcsWUFBWSxJQUFJLENBQ3BDLENBQ0EsS0FBTSxDQUNGLEdBQUk5TixFQUFBLEtBQUtnTyxJQUFVLENBQ2Z4a0MsRUFBTyxNQUFNLHdCQUF5QixLQUFLLFFBQVEsRUFDbkQsTUFDSixDQUNBcy9CLEVBQUEsS0FBS2tGLEdBQVdYLEdBQU8sR0FDdkJyTixFQUFBLEtBQUs4TixJQUFXLFVBQVUsSUFBSSxDQUNsQyxDQUNBLFNBQVMxOEMsRUFBTyxDQUNaMDNDLEVBQUEsS0FBS2IsR0FBUzcyQyxFQUNsQixDQUNBLElBQUksT0FBUSxDQUNSLE9BQU80dUMsRUFBQSxLQUFLaUksR0FDaEIsQ0FDQSxJQUFJLFdBQVksQ0FDWixPQUFPakksRUFBQSxLQUFLK04sR0FDaEIsQ0FDQSxJQUFJLFNBQVUsQ0FDVixPQUFPL04sRUFBQSxLQUFLZ08sR0FDaEIsQ0FDQSxJQUFJLGVBQWdCLENBQ2hCLE9BQU9oTyxFQUFBLEtBQUtpTyxHQUNoQixDQUNBLE9BQVEsT0FDSixNQUFNbFEsRUFBTyxJQUFJMFAsR0FBSyxDQUNsQixRQUFTLEtBQUssUUFDZCxPQUFRLEtBQUssT0FDYixTQUFVLEtBQUssVUFBWSxPQUMzQixLQUFNLEtBQUssU0FDWCxVQUFXek4sRUFBQSxLQUFLK04sS0FBYyxPQUM5QixRQUFTL04sRUFBQSxLQUFLZ08sS0FBWSxPQUMxQixNQUFPaE8sRUFBQSxLQUFLaUksS0FBVSxPQUN0QixjQUFlakksRUFBQSxLQUFLaU8sR0FDaEMsRUFBV2pPLEVBQUEsS0FBSzhOLEdBQVUsRUFDbEIsT0FBQS9QLEVBQUssY0FBZXhyQyxFQUFBLEtBQUssZUFBTCxZQUFBQSxFQUFtQixRQUNoQ3dyQyxDQUNYLENBQ0EsUUFBUyxDQUNMLE1BQU8sQ0FDSCxPQUFRLEtBQUssS0FDYixHQUFJLEtBQUssT0FDVCxTQUFVLEtBQUssUUFDZixVQUFXLEtBQUssU0FDaEIsV0FBWSxLQUFLLFVBQ2pCLFNBQVUsS0FBSyxRQUNmLFVBQVd5UCxHQUFvQixLQUFLLFFBQVEsRUFDNUMsTUFBTyxLQUFLLEtBQ3hCLENBQ0ksQ0FDSixFQWhHSUUsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBL0YsR0FBQSxZQUNBZ0csR0FBQSxZQUNBQyxHQUFBLFlBWEcsSUFBTUMsR0FBTlYsR0FtR0EsTUFBTVcsV0FBaUJELEVBQUssQ0FDL0IsWUFBWXgrQixFQUFNdVosRUFBVyxDQUN6QixNQUFNLENBQUUsUUFBUyxRQUFTLE9BQVEsUUFBUyxLQUFBdlosQ0FBSSxFQUFJdVosQ0FBUyxDQUNoRSxDQUNBLE9BQVEsQ0FFUixDQUNBLEtBQU0sQ0FFTixDQUNBLFVBQVcsQ0FFWCxDQUNBLFFBQVMsQ0FDTCxPQUFPLElBQ1gsQ0FDSixDQ25ITyxNQUFNbWxCLEdBQU4sTUFBTUEsRUFBTSxDQVNmLFlBQVk3MkMsRUFBUzB4QixFQUFXLENBUmhDbm9CLEVBQUEsWUFBTyxTQUNQQSxFQUFBLGdCQUNBQSxFQUFBLGFBQ0FBLEVBQUEsZUFBVSxNQUNWQSxFQUFBLGlCQUNBQSxFQUFBLHNCQUNBMitCLEVBQUEsS0FBQW9PLElBQ0FwTyxFQUFBLEtBQUE0TyxJQUVJLEtBQUssUUFBVTkyQyxFQUFRLFNBQVc4MUMsR0FBZSxFQUNqRCxLQUFLLEtBQU85MUMsRUFBUSxNQUFRLGlCQUM1QixLQUFLLFFBQVVBLEVBQVEsU0FBVyxLQUNsQyxLQUFLLFNBQVdBLEVBQVEsVUFBWSxDQUFBLEVBQ3BDLEtBQUssY0FBZ0JBLEVBQVEsY0FDN0JzeEMsRUFBQSxLQUFLZ0YsR0FBYTVrQixHQUFhaUMsR0FBZ0IsR0FDL0MyZCxFQUFBLEtBQUt3RixHQUFXOTJDLEVBQVEsU0FBVyxHQUN2QyxDQUNBLE1BQU0sT0FBUSxDQUNOd29DLEVBQUEsS0FBS3NPLE1BR1R4RixFQUFBLEtBQUt3RixHQUFXLElBQ2hCLE1BQU10TyxFQUFBLEtBQUs4TixJQUFXLGFBQWEsSUFBSSxFQUMzQyxDQUNBLE1BQU0sS0FBTSxDQUNIOU4sRUFBQSxLQUFLc08sTUFHVnhGLEVBQUEsS0FBS3dGLEdBQVcsSUFDaEIsTUFBTXRPLEVBQUEsS0FBSzhOLElBQVcsV0FBVyxJQUFJLEVBQ3pDLENBQ0EsT0FBUSxDQUNKLE9BQU8sSUFBSU8sR0FBTSxDQUNiLFFBQVMsS0FBSyxRQUNkLEtBQU0sS0FBSyxLQUNYLFFBQVMsS0FBSyxTQUFXLE9BQ3pCLFNBQVUsS0FBSyxTQUNmLFFBQVNyTyxFQUFBLEtBQUtzTyxJQUNkLGNBQWUsS0FBSyxhQUNoQyxDQUFTLENBQ0wsQ0FPQSxPQUFPOTJDLEVBQVMsQ0FDWixNQUFNNEUsRUFBTyxDQUNULE9BQVEsS0FBSyxLQUNiLEdBQUksS0FBSyxRQUNULGNBQWUsS0FBSyxLQUNwQixTQUFVLEtBQUssUUFDZixTQUFVLEtBQUssUUFDM0IsRUFDUSxPQUFJNUUsR0FBQSxNQUFBQSxFQUFTLHNCQUF3QixLQUFLLGdCQUN0QzRFLEVBQUssZ0JBQWtCLEtBQUssZUFFekJBLENBQ1gsQ0FDSixFQXRESTB4QyxHQUFBLFlBQ0FRLEdBQUEsWUFSRyxJQUFNQyxHQUFORixHQThEQSxNQUFNRyxXQUFrQkQsRUFBTSxDQUNqQyxhQUFjLENBQ1YsTUFBTSxDQUFBLENBQUUsQ0FDWixDQUNBLE1BQU0sT0FBUSxDQUVkLENBQ0EsTUFBTSxLQUFNLENBRVosQ0FDQSxRQUFTLENBQ0wsT0FBTyxJQUNYLENBQ0osQ0N0RU8sTUFBTUUsRUFBYyxDQUd2QixhQUFjLENBSFgvTyxFQUFBLEtBQUFnUCxJQUNIaFAsRUFBQSxLQUFBaVAsSUFDQWpQLEVBQUEsS0FBQWtQLElBRUk5RixFQUFBLEtBQUs2RixHQUFrQixJQUFJM0IsSUFDM0JsRSxFQUFBLEtBQUs4RixHQUFZemxDLEdBQVEsVUFDekJpZ0MsRUFBQSxLQUFLc0YsR0FBQUcsSUFBTCxVQUNKLENBTUEsa0JBQWtCM2xCLEVBQVcsQ0FDekI4VyxFQUFBLEtBQUsyTyxJQUFnQixrQkFBa0J6bEIsQ0FBUyxDQUNwRCxDQU1BLGNBQWNTLEVBQVksQ0FDdEJxVyxFQUFBLEtBQUsyTyxJQUFnQixjQUFjaGxCLENBQVUsQ0FDakQsQ0FNQSxpQkFBa0IsQ0FDZCxPQUFPK1UsR0FBZSxDQUMxQixDQUNBLGdCQUFpQixDQUNiLE9BQU94eEIsR0FBYyxDQUN6QixDQUNBLFlBQVk0aEMsRUFBVSxDQUNsQmhHLEVBQUEsS0FBSzhGLEdBQVlFLEVBQ3JCLENBQ0EsaUJBQWtCLENBQ2Q5TyxFQUFBLEtBQUsyTyxJQUFnQixNQUFLLENBQzlCLENBQ0EsWUFBWUksRUFBYyxDQUN0QixHQUFJL08sRUFBQSxLQUFLNE8sSUFDTHBsQyxPQUFBQSxFQUFPLE1BQU0sNkNBQThDdWxDLENBQVksRUFDaEUsSUFBSVAsR0FFZixNQUFNUSxFQUFVRCxFQUFhLFNBQVd6QixHQUFlLEVBQ2pEdjFDLEVBQU9nM0MsRUFBYSxNQUFRLGlCQUNsQ3ZsQyxPQUFBQSxFQUFPLE1BQU0saUNBQWtDd2xDLEVBQVNqM0MsQ0FBSSxFQUNyRCxJQUFJdzJDLEdBQU0sQ0FBRSxHQUFHUSxFQUFjLEtBQUFoM0MsRUFBTSxRQUFBaTNDLENBQU8sRUFBSWhQLEVBQUEsS0FBSzJPLEdBQWUsQ0FDN0UsQ0FDQSxXQUFXTSxFQUFhbjhDLEVBQVEsQ0FDNUIsR0FBSWt0QyxFQUFBLEtBQUs0TyxLQUFhSyxFQUFZLFNBQzlCemxDLE9BQUFBLEVBQU8sTUFBTSw0Q0FBNkN5bEMsQ0FBVyxFQUM5RCxJQUFJYixHQUFTYSxFQUFZLEtBQU1qUCxFQUFBLEtBQUsyTyxHQUFlLEVBRTlELElBQUlPLEVBQ0FGLEVBQ0FHLEVBQ0osR0FBS3I4QyxHQXNCQSxHQUFJQSxhQUFrQnk3QyxHQUFPLENBQzlCLEdBQUl6N0MsYUFBa0IwN0MsR0FDbEJobEMsT0FBQUEsRUFBTyxNQUFNLDJDQUEyQyxFQUNqRCxJQUFJNGtDLEdBQVNhLEVBQVksS0FBTWpQLEVBQUEsS0FBSzJPLEdBQWUsRUFFOURLLEVBQVVsOEMsRUFBTyxRQUNqQnE4QyxFQUFnQnI4QyxFQUFPLGFBQzNCLFNBQ1NBLGFBQWtCcTdDLEdBQU0sQ0FDN0IsR0FBSXI3QyxhQUFrQnM3QyxHQUNsQjVrQyxPQUFBQSxFQUFPLE1BQU0sMENBQTBDLEVBQ2hELElBQUk0a0MsR0FBU2EsRUFBWSxLQUFNalAsRUFBQSxLQUFLMk8sR0FBZSxFQUU5RE8sRUFBV3A4QyxFQUFPLE9BQ2xCazhDLEVBQVVsOEMsRUFBTyxRQUNqQnE4QyxFQUFnQnI4QyxFQUFPLGFBQzNCLE1BdENhLENBQ1QsTUFBTW8zQyxFQUFleEwsR0FBZSxFQUM5Qnp4QixFQUFjQyxHQUFjLEVBQ2xDLEdBQUksQ0FBQ2c5QixFQUNEMWdDLE9BQUFBLEVBQU8sTUFBTSwyRkFBMkYsRUFDakcsSUFBSTRrQyxHQUFTYSxFQUFZLEtBQU1qUCxFQUFBLEtBQUsyTyxHQUFlLEVBRTlELEdBQUkxaEMsYUFBdUJtaEMsSUFDdkJsRSxhQUF3QnNFLEdBQ3hCaGxDLE9BQUFBLEVBQU8sTUFBTSxVQUFVeUQsQ0FBVyxPQUFPaTlCLENBQVksK0JBQStCLEVBQzdFLElBQUlrRSxHQUFTYSxFQUFZLEtBQU1qUCxFQUFBLEtBQUsyTyxHQUFlLEVBRTlESyxFQUFVOUUsRUFBYSxRQUN2QmlGLEVBQWdCakYsRUFBYSxjQUN6Qmo5QixHQUNBekQsRUFBTyxNQUFNLHVCQUF3QnlELEVBQVksTUFBTSxFQUN2RGlpQyxFQUFXamlDLEVBQVksUUFHdkJ6RCxFQUFPLE1BQU0seUNBQTBDMGdDLEVBQWEsT0FBTyxDQUVuRixDQWtCQSxPQUFLOEUsR0FJTHhsQyxFQUFPLE1BQU0saUJBQWlCLEtBQUssVUFBVXlsQyxFQUFZLElBQUksQ0FBQyxZQUFZQSxFQUFZLFFBQVVELENBQU8sRUFBRSxFQUNsRyxJQUFJYixHQUFLLENBQ1osR0FBR2MsRUFDSCxRQUFBRCxFQUNBLFNBQUFFLEVBQ0EsY0FBZUMsR0FBaUJGLEVBQVksYUFDeEQsRUFBV2pQLEVBQUEsS0FBSzJPLEdBQWUsSUFUbkJubEMsRUFBTyxNQUFNLDRGQUE0RixFQUNsRyxJQUFJNGtDLEdBQVNhLEVBQVksS0FBTWpQLEVBQUEsS0FBSzJPLEdBQWUsRUFTbEUsQ0FDQSxNQUFNLFNBQVM5TixFQUFTLENBQ3BCLEdBQUksQ0FDQXIzQixFQUFPLE1BQU0sZ0NBQWdDLEVBQzdDLE1BQU13MkIsRUFBQSxLQUFLMk8sSUFBZ0IsU0FBUzlOLENBQU8sQ0FDL0MsT0FDT3p2QyxFQUFPLENBQ1ZvWSxFQUFPLE1BQU0sMENBQTJDcFksQ0FBSyxDQUNqRSxDQUNKLENBNkNBLE1BQU0sWUFBYSxDQUNmLE1BQU00dUMsRUFBQSxLQUFLMk8sSUFBZ0IsV0FBVSxDQUN6QyxDQUNKLENBcktJQSxHQUFBLFlBQ0FDLEdBQUEsWUFGR0YsR0FBQSxZQXdISEcsR0FBb0IsVUFBRyxDQUNuQixHQUFJLE9BQU8sUUFBWSxLQUFlLE9BQU8sUUFBUSxJQUFPLFdBQVksQ0FFcEUsTUFBTU8sRUFBVSxTQUFZLENBQ3hCLE1BQU12TyxFQUFVLFdBQVcsSUFBTSxDQUM3QixRQUFRLEtBQUssK0JBQStCLEVBQzVDLFFBQVEsS0FBSyxDQUFDLENBQ2xCLEVBQUcsR0FBSSxFQUNQLEdBQUksQ0FDQSxNQUFNLEtBQUssU0FBUSxDQUN2QixRQUNoQixDQUNvQixhQUFhQSxDQUFPLENBQ3hCLENBQ0osRUFFQSxRQUFRLEdBQUcsYUFBY3VPLENBQU8sRUFFaEMsUUFBUSxHQUFHLFNBQVUsU0FBWSxDQUM3QixNQUFNQSxFQUFPLEVBQ1JDLEdBQTRCLFFBQVEsR0FFckMsUUFBUSxLQUFLLEdBQUcsQ0FFeEIsQ0FBQyxFQUVELFFBQVEsR0FBRyxVQUFXLFNBQVksQ0FDOUIsTUFBTUQsRUFBTyxFQUNSQyxHQUE0QixTQUFTLEdBRXRDLFFBQVEsS0FBSyxDQUFDLENBRXRCLENBQUMsRUFDRCxRQUFRLEdBQUcscUJBQXNCLE1BQU8zSCxFQUFRK0IsSUFBWSxDQUN4RGpnQyxFQUFPLE1BQU0sc0JBQXVCaytCLEVBQVErQixDQUFPLEVBQ25ELE1BQU0yRixFQUFPLEVBQ1JFLEdBQTJCLG9CQUFvQixHQUVoRCxRQUFRLEtBQUssQ0FBQyxDQUV0QixDQUFDLENBQ0wsQ0FDSixFQUtKLElBQUlDLEdBQ0osU0FBU0YsR0FBNEJsUCxFQUFPLENBQ3hDLE9BQU8sUUFBUSxVQUFVQSxDQUFLLEVBQUUsT0FBUyxDQUM3QyxDQUNBLFNBQVNtUCxHQUEyQm5QLEVBQU8sQ0FDdkMsT0FBTyxRQUFRLFVBQVVBLENBQUssRUFBRSxPQUFTLENBQzdDLENBQ08sU0FBU3lLLElBQXlCLENBQ3JDLE1BQU00RSxFQUFTLE9BQU8sSUFBSSxrQ0FBa0MsRUFDNUQsR0FBSSxDQUNBLE1BQU1DLEVBQWUsV0FJZnhxQyxFQUFXd3FDLEVBQWFELENBQU0sRUFDcEMsR0FBSXZxQyxFQUNBLE9BQU9BLEVBRVgsTUFBTXlxQyxFQUFhLE9BQU8seUJBQXlCRCxFQUFjRCxDQUFNLEVBQ3ZFLEdBQUlFLEdBQ0FBLEVBQVcsV0FBYSxJQUN4QkEsRUFBVyxlQUFpQixJQUM1QixDQUFDQSxFQUFXLElBQ1osT0FBT0MsR0FBc0IsRUFFakMsR0FBSSxDQUFDRCxFQUNELEdBQUksQ0FDQSxPQUFPLGVBQWVELEVBQWNELEVBQVEsQ0FDeEMsTUFBTyxPQUNQLFNBQVUsR0FDVixhQUFjLEVBQ2xDLENBQWlCLENBQ0wsTUFDTSxDQUNGLE9BQU9HLEdBQXNCLENBQ2pDLENBRUosR0FBSSxDQUNBLE1BQU1DLEVBQVcsSUFBSW5CLEdBQ3JCLE9BQUFnQixFQUFhRCxDQUFNLEVBQUlJLEVBQ2hCQSxDQUNYLE1BQ00sQ0FDRixPQUFPRCxHQUFzQixDQUNqQyxDQUNKLE1BQ00sQ0FHRixPQUFPQSxHQUFzQixDQUNqQyxDQUNKLENBQ0EsU0FBU0EsSUFBeUIsQ0FDOUIsT0FBS0osS0FDREEsR0FBc0IsSUFBSWQsSUFFdkJjLEVBQ1gsQ0NyT0EsU0FBU00sR0FBaUJDLEVBQVksQ0FDbEMsTUFBTyxPQUFPMytDLEtBQU95UCxJQUVWd3FDLEdBQW1CLFNBQVksQ0FDbEMsTUFBTXJOLEVBQU8rUixFQUFXLEdBQUdsdkMsQ0FBSSxFQUMvQm1xQyxHQUFlaE4sQ0FBSSxFQUNuQixHQUFJLENBQ0EsT0FBQUEsRUFBSyxNQUFLLEVBQ0gsTUFBTTVzQyxFQUFHNHNDLENBQUksQ0FDeEIsT0FDTzNzQyxFQUFPLENBQ1YsTUFBQTJzQyxFQUFLLFNBQVMsQ0FDVixRQUFTM3NDLEVBQU0sUUFDZixLQUFNQSxFQUFNLElBQ2hDLENBQWlCLEVBQ0tBLENBQ1YsUUFDWixDQUNnQjJzQyxFQUFLLElBQUcsRUFDUmlOLEdBQWdCLENBQ3BCLENBQ0osQ0FBQyxDQUVULENBMkNPLFNBQVMrRSxHQUFnQnY0QyxFQUFTMUUsRUFBUSxPQUM3QyxPQUFPODNDLEdBQXNCLEVBQUcsV0FBVyxDQUN2QyxHQUFHcHpDLEVBQ0gsS0FBTSxDQUNGLEtBQU0sUUFDTixPQUFNakYsRUFBQWlGLEdBQUEsWUFBQUEsRUFBUyxPQUFULFlBQUFqRixFQUFlLE9BQVEsUUFDN0IsR0FBR2lGLEdBQUEsWUFBQUEsRUFBUyxJQUN4QixDQUNBLEVBQU8xRSxDQUFNLENBQ2IsQ0FlTyxTQUFTazlDLEdBQW1CeDRDLEVBQVMxRSxFQUFRLFNBQ2hELE9BQU84M0MsR0FBc0IsRUFBRyxXQUFXLENBQ3ZDLEdBQUdwekMsRUFDSCxLQUFNLENBQ0YsS0FBTSxXQUNOLFFBQU9qRixFQUFBaUYsR0FBQSxZQUFBQSxFQUFTLE9BQVQsWUFBQWpGLEVBQWUsUUFBUyxHQUMvQixTQUFRTSxFQUFBMkUsR0FBQSxZQUFBQSxFQUFTLE9BQVQsWUFBQTNFLEVBQWUsU0FBVSxHQUNqQyxHQUFHMkUsR0FBQSxZQUFBQSxFQUFTLElBQ3hCLENBQ0EsRUFBTzFFLENBQU0sQ0FDYixDQUlPLE1BQU1tOUMsR0FBbUJKLEdBQWlCRyxFQUFrQixFQVc1RCxTQUFTRSxHQUFrQjE0QyxFQUFTMUUsRUFBUSxDQUMvQyxPQUFPODNDLEdBQXNCLEVBQUcsV0FBVyxDQUN2QyxHQUFHcHpDLEVBQ0gsS0FBTSxDQUFFLEtBQU0sVUFBVyxHQUFHQSxHQUFBLFlBQUFBLEVBQVMsSUFBSSxDQUNqRCxFQUFPMUUsQ0FBTSxDQUNiLENBSU8sTUFBTXE5QyxHQUFrQk4sR0FBaUJLLEVBQWlCLEVBdUMxRCxTQUFTRSxHQUFvQjU0QyxFQUFTMUUsRUFBUSxDQUNqRCxPQUFPODNDLEdBQXNCLEVBQUcsV0FBVyxDQUN2QyxHQUFHcHpDLEVBQ0gsS0FBTSxDQUNGLEtBQU0sWUFDTixVQUFXLEdBQ1gsR0FBR0EsR0FBQSxZQUFBQSxFQUFTLElBQ3hCLENBQ0EsRUFBTzFFLENBQU0sQ0FDYixDQUNPLE1BQU11OUMsR0FBb0JSLEdBQWlCTyxFQUFtQixFQTJDOUQsU0FBU0UsR0FBdUI5NEMsRUFBUzFFLEVBQVEsQ0FDcEQsT0FBTzgzQyxHQUFzQixFQUFHLFdBQVcsQ0FDdkMsR0FBR3B6QyxFQUNILEtBQU0sQ0FDRixLQUFNLFlBQ04sR0FBR0EsR0FBQSxZQUFBQSxFQUFTLElBQ3hCLENBQ0EsRUFBTzFFLENBQU0sQ0FDYixDQUNPLE1BQU02ckMsR0FBdUJrUixHQUFpQlMsRUFBc0IsRUN2TnBFLFNBQVNDLEdBQWtCcm5CLEVBQVcsQ0FDekMwaEIsR0FBc0IsRUFBRyxrQkFBa0IxaEIsQ0FBUyxDQUN4RCxDQ2JPLE1BQU1zbkIsRUFBcUIsQ0FDOUIsR0FBRy8yQyxFQUFNb21DLEVBQVUsQ0FDZixZQUFLLGFBQWEsR0FBR3BtQyxFQUFNb21DLENBQVEsRUFDNUIsS0FBSyxZQUNoQixDQUNBLElBQUlwbUMsRUFBTW9tQyxFQUFVLENBQ2hCLFlBQUssYUFBYSxJQUFJcG1DLEVBQU1vbUMsQ0FBUSxFQUM3QixLQUFLLFlBQ2hCLENBQ0EsS0FBS3BtQyxLQUFTbUgsRUFBTSxDQUNoQixPQUFPLEtBQUssYUFBYSxLQUFLbkgsRUFBTSxHQUFHbUgsQ0FBSSxDQUMvQyxDQUNBLEtBQUtuSCxFQUFNb21DLEVBQVUsQ0FDakIsWUFBSyxhQUFhLEtBQUtwbUMsRUFBTW9tQyxDQUFRLEVBQzlCLEtBQUssWUFDaEIsQ0FDSixDQUtPLE1BQU00USxXQUFtQkQsRUFBcUIsQ0FBOUMsa0NBQ0h6dkMsRUFBQSxvQkFBZSxJQUFJMnZDLElBQ3ZCLENBS08sTUFBTUMsV0FBaUJILEVBQXFCLENBQTVDLGtDQUNIenZDLEVBQUEsb0JBQWUsSUFBSTJ2QyxJQUN2QixDQzlCTyxNQUFNRSxHQUF5Qyx1QkFJL0MsU0FBU0MsR0FBOEJDLEVBQVcsQ0FDckQsT0FBSUEsRUFBVSxXQUFXLFlBQVksRUFFMUIsR0FHSkEsRUFBVSxXQUFXLE9BQU8sQ0FDdkMsQ0FDQSxNQUFNQyxHQUErQixJQUFJLElBQUksQ0FBQyxVQUFXLFNBQVMsQ0FBQyxFQUNuRSxTQUFTQyxHQUEyQkYsRUFBVyxDQUMzQyxPQUFPQyxHQUE2QixJQUFJRCxDQUFTLENBQ3JELENBTU8sU0FBU0csSUFBZ0IsQ0FDNUIsT0FBT0osR0FBOEJLLElBQWlCLENBQzFELENBSU8sU0FBU0EsSUFBa0IsT0FFOUIsUUFBUTMrQyxFQURJd1csR0FBTyxFQUNQNm5DLEVBQXNDLElBQTFDLFlBQUFyK0MsRUFBNkMsZ0JBQWlCLFNBQzFFLENBTU8sU0FBUzQrQyxHQUF3QkMsRUFBTyxDQUMzQyxNQUFNQyxFQUFrQkgsR0FBZSxFQUN2QyxPQUFJTCxHQUE4QlEsQ0FBTSxFQUNoQ0wsR0FBMkJLLENBQU0sRUFDMUIsQ0FDSCxVQUFXLENBQUUsT0FBUSxNQUFNLEVBQzNCLEtBQU0sQ0FBRSxVQUFXLEtBQUssQ0FDeEMsRUFFZSxDQUdILFVBQVcsQ0FBRSxPQUFRLEtBQUssRUFDMUIsS0FBTSxDQUFFLFVBQVcsS0FBSyxDQUNwQyxFQUVXLENBQUEsQ0FDWCxDQ2xETyxNQUFNQyxFQUFhLENBeUJ0QixZQUFZOTZDLEVBQU8sQ0FyQm5CdUssRUFBQSxvQkFJQUEsRUFBQSxxQkFJQUEsRUFBQSxvQkFJQUEsRUFBQSwyQkFJQUEsRUFBQSw0QkFJQUEsRUFBQSxpQkFFSSxLQUFLLGFBQWN2SyxHQUFBLFlBQUFBLEVBQU8sZUFBZUEsR0FBQSxZQUFBQSxFQUFPLGVBQWdCLEVBQ2hFLEtBQUssY0FBZUEsR0FBQSxZQUFBQSxFQUFPLGdCQUFnQkEsR0FBQSxZQUFBQSxFQUFPLGdCQUFpQixFQUNuRSxLQUFLLGFBQ0RBLEdBQUEsWUFBQUEsRUFBTyxlQUNIQSxHQUFBLFlBQUFBLEVBQU8sZUFDUCxLQUFLLFlBQWMsS0FBSyxhQUNoQyxNQUFNKzZDLEdBQXFCLzZDLEdBQUEsWUFBQUEsRUFBTyxzQkFBc0JBLEdBQUEsWUFBQUEsRUFBTyxzQkFDL0QsS0FBSyxtQkFBcUIrNkMsR0FFcEIsQ0FBQSxFQUNOLE1BQU1DLEdBQXNCaDdDLEdBQUEsWUFBQUEsRUFBTyx1QkFBdUJBLEdBQUEsWUFBQUEsRUFBTyx1QkFDakUsS0FBSyxvQkFBc0JnN0MsR0FFckIsQ0FBQSxFQUNGLE9BQU9oN0MsR0FBQSxZQUFBQSxFQUFPLFVBQWEsTUFDM0IsS0FBSyxTQUFXQSxFQUFNLFNBRTlCLENBQ0osQ0FJTyxNQUFNaTdDLEVBQU0sQ0E2QmYsWUFBWWo3QyxFQUFPLENBekJuQnVLLEVBQUEsaUJBSUFBLEVBQUEsb0JBSUFBLEVBQUEscUJBSUFBLEVBQUEsb0JBSUFBLEVBQUEsMEJBQXFCLENBQUEsR0FJckJBLEVBQUEsMkJBQXNCLENBQUEsR0FJdEJBLEVBQUEsNEJBRUksR0FBSSxPQUFPdkssRUFBVSxJQUNqQixLQUFLLFNBQVcsRUFDaEIsS0FBSyxZQUFjLEVBQ25CLEtBQUssYUFBZSxFQUNwQixLQUFLLFlBQWMsRUFDbkIsS0FBSyxtQkFBcUIsQ0FBQSxFQUMxQixLQUFLLG9CQUFzQixDQUFBLEVBQzNCLEtBQUssb0JBQXNCLFdBRTFCLENBQ0QsS0FBSyxVQUFXQSxHQUFBLFlBQUFBLEVBQU8sV0FBWSxFQUNuQyxLQUFLLGFBQWNBLEdBQUEsWUFBQUEsRUFBTyxlQUFlQSxHQUFBLFlBQUFBLEVBQU8sZUFBZ0IsRUFDaEUsS0FBSyxjQUFlQSxHQUFBLFlBQUFBLEVBQU8sZ0JBQWdCQSxHQUFBLFlBQUFBLEVBQU8sZ0JBQWlCLEVBQ25FLEtBQUssYUFDREEsR0FBQSxZQUFBQSxFQUFPLGVBQ0hBLEdBQUEsWUFBQUEsRUFBTyxlQUNQLEtBQUssWUFBYyxLQUFLLGFBQ2hDLE1BQU0rNkMsR0FBcUIvNkMsR0FBQSxZQUFBQSxFQUFPLHNCQUFzQkEsR0FBQSxZQUFBQSxFQUFPLHNCQUMzRCxNQUFNLFFBQVErNkMsQ0FBa0IsRUFDaEMsS0FBSyxtQkFBcUJBLEVBRzFCLEtBQUssbUJBQXFCQSxFQUNwQixDQUFDQSxDQUFrQixFQUNuQixDQUFBLEVBRVYsTUFBTUMsR0FBc0JoN0MsR0FBQSxZQUFBQSxFQUFPLHVCQUF1QkEsR0FBQSxZQUFBQSxFQUFPLHVCQUM3RCxNQUFNLFFBQVFnN0MsQ0FBbUIsRUFDakMsS0FBSyxvQkFBc0JBLEVBRzNCLEtBQUssb0JBQXNCQSxFQUNyQixDQUFDQSxDQUFtQixFQUNwQixDQUFBLEVBRVYsTUFBTUUsR0FBc0JsN0MsR0FBQSxZQUFBQSxFQUFPLHVCQUF1QkEsR0FBQSxZQUFBQSxFQUFPLHVCQUMzRG03QyxFQUFnQyxNQUFNLFFBQVFELENBQW1CLEVBQ2pFQSxFQUFvQixJQUFLcjhDLEdBQVVBLGFBQWlCaThDLEdBQWVqOEMsRUFBUSxJQUFJaThDLEdBQWFqOEMsQ0FBSyxDQUFDLEVBQ2xHLE9BQ04sS0FBSyxvQkFDRHM4QyxHQUNJQSxFQUE4QixPQUFTLEVBQ3JDQSxFQUNBLE1BQ2QsQ0FDSixDQUNBLElBQUlDLEVBQVUsU0FDVixLQUFLLFVBQVlBLEVBQVMsVUFBWSxFQUN0QyxLQUFLLGFBQWVBLEVBQVMsYUFBZSxFQUM1QyxLQUFLLGNBQWdCQSxFQUFTLGNBQWdCLEVBQzlDLEtBQUssYUFBZUEsRUFBUyxhQUFlLEVBQ3hDQSxFQUFTLG9CQUVULEtBQUssbUJBQW1CLEtBQUssR0FBR0EsRUFBUyxrQkFBa0IsRUFFM0RBLEVBQVMscUJBRVQsS0FBSyxvQkFBb0IsS0FBSyxHQUFHQSxFQUFTLG1CQUFtQixFQUU3RCxNQUFNLFFBQVFBLEVBQVMsbUJBQW1CLEdBQzFDQSxFQUFTLG9CQUFvQixPQUFTLEdBQ3RDLEtBQUssc0JBQUwsS0FBSyxvQkFBd0IsQ0FBQSxHQUM3QixLQUFLLG9CQUFvQixLQUFLLEdBQUdBLEVBQVMsb0JBQW9CLElBQUt2OEMsR0FBVUEsYUFBaUJpOEMsR0FBZWo4QyxFQUFRLElBQUlpOEMsR0FBYWo4QyxDQUFLLENBQUMsQ0FBQyxHQUV4SXU4QyxFQUFTLFdBQWEsR0FBS0EsRUFBUyxZQUFjLElBQ3ZELEtBQUssc0JBQUwsS0FBSyxvQkFBd0IsQ0FBQSxHQUM3QixLQUFLLG9CQUFvQixLQUFLLElBQUlOLEdBQWEsQ0FDM0MsWUFBYU0sRUFBUyxZQUN0QixhQUFjQSxFQUFTLGFBQ3ZCLFlBQWFBLEVBQVMsWUFDdEIsb0JBQW9Cci9DLEVBQUFxL0MsRUFBUyxxQkFBVCxZQUFBci9DLEVBQThCLEdBQ2xELHFCQUFxQk0sRUFBQSsrQyxFQUFTLHNCQUFULFlBQUEvK0MsRUFBK0IsRUFDcEUsQ0FBYSxDQUFDLEVBRVYsQ0FDSixDQ3hKTyxNQUFNZy9DLEVBQVcsQ0FhcEIsWUFBWXJsQyxFQUFVLEdBQUksQ0FUMUJ6TCxFQUFBLGdCQUlBQSxFQUFBLGNBSUEyK0IsRUFBQSxLQUFBb1MsSUFFSSxLQUFLLFFBQVV0bEMsRUFDZixLQUFLLE1BQVEsSUFBSWlsQyxHQUNqQjNJLEVBQUEsS0FBS2dKLEdBQWEsSUFBSSxJQUMxQixDQU9BLGtCQUFrQkMsRUFBVyxDQUN6QmpKLEVBQUEsS0FBS2dKLEdBQWEsSUFBSSxJQUFJLE9BQU8sUUFBUUMsQ0FBUyxDQUFDLEVBQ3ZELENBT0EsZ0JBQWdCQSxFQUFXLENBQ3ZCLE1BQU1DLEVBQWdCLENBQUNodkMsRUFBU20xQixJQUFhLENBQ3pDLEdBQUluMUIsSUFBWSxJQUFRbTFCLElBQWEsR0FDakMsTUFBTyxHQUVYLE1BQU04WixFQUFjLE1BQU0sUUFBUWp2QyxDQUFPLEVBQUlBLEVBQVUsQ0FBQSxFQUNqRGt2QyxFQUFlLE1BQU0sUUFBUS9aLENBQVEsRUFBSUEsRUFBVyxDQUFBLEVBQzFELE9BQU8sTUFBTSxLQUFLLElBQUksSUFBSSxDQUFDLEdBQUc4WixFQUFhLEdBQUdDLENBQVksQ0FBQyxDQUFDLENBQ2hFLEVBQ0EsU0FBVyxDQUFDQyxFQUFVaGEsQ0FBUSxJQUFLLE9BQU8sUUFBUTRaLENBQVMsRUFBRyxDQUMxRCxNQUFNOXNDLEVBQVcrNkIsRUFBQSxLQUFLOFIsSUFBVyxJQUFJSyxDQUFRLEVBQzdDLEdBQUksQ0FBQ2x0QyxFQUFVLENBQ1grNkIsRUFBQSxLQUFLOFIsSUFBVyxJQUFJSyxFQUFVaGEsQ0FBUSxFQUN0QyxRQUNKLENBQ0E2SCxFQUFBLEtBQUs4UixJQUFXLElBQUlLLEVBQVUsQ0FDMUIsU0FBVUgsRUFBYy9zQyxFQUFTLFNBQVVrekIsRUFBUyxRQUFRLEVBQzVELFNBQVU2WixFQUFjL3NDLEVBQVMsU0FBVWt6QixFQUFTLFFBQVEsQ0FDNUUsQ0FBYSxDQUNMLENBQ0osQ0FPQSxlQUFlaWEsRUFBVSxDQUNyQixLQUFNLENBQUUsU0FBQUQsRUFBVSxPQUFBRSxDQUFNLEVBQUtELEVBQ3ZCRSxFQUFnQnRTLEVBQUEsS0FBSzhSLElBQVcsSUFBSUssQ0FBUSxFQUNsRCxJQUFJRyxHQUFBLFlBQUFBLEVBQWUsWUFBYSxJQUFRQSxFQUFjLFdBQWEsR0FDL0Q5b0MsT0FBQUEsRUFBTyxLQUFLLHVGQUF1RixFQUM1RixHQUVYLElBQUk4b0MsR0FBQSxZQUFBQSxFQUFlLFlBQWEsR0FDNUIsTUFBTyxHQUVYLElBQUlBLEdBQUEsWUFBQUEsRUFBZSxZQUFhLEdBQzVCLE1BQU8sR0FFWCxNQUFNQyxFQUF5QixNQUFNLFFBQVFELEdBQUEsWUFBQUEsRUFBZSxRQUFRLEVBQzlEQSxFQUFjLFNBQVMsU0FBU0QsQ0FBTSxFQUN0QyxHQUNBRyxFQUEwQixNQUFNLFFBQVFGLEdBQUEsWUFBQUEsRUFBZSxRQUFRLEVBQy9EQSxFQUFjLFNBQVMsU0FBU0QsQ0FBTSxFQUN0QyxHQUNOLEdBQUlFLEdBQTBCQyxFQUMxQmhwQyxPQUFBQSxFQUFPLEtBQUssYUFBYTZvQyxDQUFNLDRFQUE0RSxFQUNwRyxHQUVYLEdBQUlFLEVBQ0EsTUFBTyxHQUVYLEdBQUlDLEVBQ0EsTUFBTyxFQUdmLENBT0EsWUFBWUMsRUFBYyxDQUFFLGNBQUFDLEVBQWdCLEVBQUssRUFBSyxDQUFBLEVBQUksQ0FDdEQsTUFBTVAsRUFBV00sRUFBYSxVQUFZQSxFQUFhLFFBQVEsS0FDL0QsR0FBSUMsRUFBZSxDQUNmMVMsRUFBQSxLQUFLOFIsSUFBVyxJQUFJSyxFQUFVLENBQzFCLFNBQVUsR0FDVixTQUFVLENBQUEsQ0FDMUIsQ0FBYSxFQUNELE1BQ0osQ0FDQSxNQUFNRyxFQUFnQnRTLEVBQUEsS0FBSzhSLElBQVcsSUFBSUssQ0FBUSxHQUFLLENBQ25ELFNBQVUsQ0FBQSxFQUNWLFNBQVUsQ0FBQSxDQUN0QixFQUNRLEdBQUksTUFBTSxRQUFRRyxFQUFjLFFBQVEsRUFBRyxDQUV2QyxNQUFNRCxFQUFTLFdBQVlJLEVBQWEsUUFDbENBLEVBQWEsUUFBUSxPQUNyQkEsRUFBYSxRQUFRLEdBQzNCSCxFQUFjLFNBQVMsS0FBS0QsQ0FBTSxDQUN0QyxDQUNBclMsRUFBQSxLQUFLOFIsSUFBVyxJQUFJSyxFQUFVRyxDQUFhLENBQy9DLENBTUEsV0FBV0csRUFBYyxDQUFFLGFBQUFFLEVBQWUsRUFBSyxFQUFLLENBQUEsRUFBSSxDQUNwRCxNQUFNUixFQUFXTSxFQUFhLFVBQVlBLEVBQWEsUUFBUSxLQUMvRCxHQUFJRSxFQUFjLENBQ2QzUyxFQUFBLEtBQUs4UixJQUFXLElBQUlLLEVBQVUsQ0FDMUIsU0FBVSxHQUNWLFNBQVUsRUFDMUIsQ0FBYSxFQUNELE1BQ0osQ0FDQSxNQUFNRyxFQUFnQnRTLEVBQUEsS0FBSzhSLElBQVcsSUFBSUssQ0FBUSxHQUFLLENBQ25ELFNBQVUsQ0FBQSxFQUNWLFNBQVUsQ0FBQSxDQUN0QixFQUNRLEdBQUksTUFBTSxRQUFRRyxFQUFjLFFBQVEsRUFBRyxDQUV2QyxNQUFNRCxFQUFTLFdBQVlJLEVBQWEsUUFDbENBLEVBQWEsUUFBUSxPQUNyQkEsRUFBYSxRQUFRLEdBQzNCSCxFQUFjLFNBQVMsS0FBS0QsQ0FBTSxDQUN0QyxDQUNBclMsRUFBQSxLQUFLOFIsSUFBVyxJQUFJSyxFQUFVRyxDQUFhLENBQy9DLENBQ0EsUUFBUyxDQUNMLE1BQU8sQ0FDSCxRQUFTLEtBQUssUUFDZCxNQUFPLEtBQUssTUFDWixVQUFXLE9BQU8sWUFBWXRTLEVBQUEsS0FBSzhSLElBQVcsUUFBTyxDQUFFLENBQ25FLENBQ0ksQ0FDSixDQTdJSUEsR0FBQSxZQ05HLFNBQVNjLEdBQW1CeGxDLEVBQU8sQ0FDdEMsT0FBTyxLQUFLLFVBQVUsQ0FBRSxVQUFXQSxFQUFNLElBQUksQ0FBRSxDQUNuRCxDQU9BLFNBQVN5bEMsR0FBdUJ6bEMsRUFBTyxDQUNuQyxNQUFPLGVBQWUzSSxHQUFtQjJJLEVBQU0sSUFBSSxDQUFDLEVBQ3hELENBT0EsU0FBUzBsQyxHQUE4QjFsQyxFQUFPLENBQzFDLE1BQU8sa0JBQWtCQSxFQUFNLElBQUksaUNBQWlDQSxFQUFNLG9CQUFzQixFQUFFLEVBQ3RHLENBQ08sTUFBTTJsQyxFQUFRLENBZ0VqQixZQUFZM2xDLEVBQU80bEMsRUFBaUIsQ0E1RHBDanlDLEVBQUEsaUJBSUFBLEVBQUEsd0JBSUFBLEVBQUEsdUJBQWtCLENBQ2QsS0FBTSxTQUNOLFdBQVksQ0FBQSxFQUNaLFNBQVUsQ0FBQSxFQUNWLHFCQUFzQixFQUM5QixHQUtJQSxFQUFBLHdCQUFtQixJQVFuQkEsRUFBQSx3QkFJQUEsRUFBQSxrQkFZQUEsRUFBQSxvQkFJQUEsRUFBQSxjQWFBQSxFQUFBLGlCQUFZLFNBQVksSUFFcEIsS0FBSyxVQUFZcU0sRUFBTSxLQUN2QixLQUFLLGdCQUFrQjRsQyxFQUN2QixLQUFLLFNBQVdILEdBQXVCemxDLENBQUssRUFDNUMsS0FBSyxnQkFBa0IwbEMsR0FBOEIxbEMsQ0FBSyxFQUMxRCxLQUFLLE1BQVFBLENBQ2pCLENBaEJBLDBCQUEyQixDQUN2QixNQUFPLENBQ0gsS0FBTSxXQUNOLEtBQU0sS0FBSyxTQUNYLFlBQWEsS0FBSyxnQkFDbEIsV0FBWSxLQUFLLGdCQUNqQixPQUFRLEtBQUssZ0JBQ3pCLENBQ0ksQ0FTSixDQVVPLFNBQVM2bEMsR0FBUTdsQyxFQUFPVyxFQUFTLEdBQUksQ0FDeEMsSUFBSTVXLEVBQ0osTUFBTSs3QyxFQUFlLENBQUMsQ0FBQ25sQyxFQUFPLFVBQ3hCb2xDLEVBQWUsQ0FBQyxDQUFDcGxDLEVBQU8sVUFFOUIsR0FBSSxFQUR3Q21sQyxJQUFpQkMsR0FFekQsTUFBTSxJQUFJN3hDLEVBQVUsc0VBQXNFLEVBRTlGLGVBQWUweEMsRUFBZ0J4bUMsRUFBUzRtQyxFQUFpQixPQUNyRCxHQUFJajhDLEVBQVEsQ0FDUixHQUFJLENBQUNpOEMsRUFDRCxNQUFBbkksR0FBc0IsQ0FDbEIsUUFBUyxzREFBc0RtSSxDQUFlLEdBQzlFLEtBQU0sQ0FDRixRQUFTLGdCQUNqQyxDQUNBLENBQWlCLEVBQ0ssSUFBSWx5QyxHQUFtQiwyQ0FBMkMsRUFFNUUsR0FBSSxDQUVBLE1BQU00TCxFQUFTLE1BQU0zVixFQUFPaThDLENBQWUsRUFDdkNybEMsRUFBTyxXQUNQLE1BQU1BLEVBQU8sVUFBVXZCLEVBQVNNLENBQU0sQ0FFOUMsT0FDTzFiLEVBQU8sQ0FDVixNQUFBNjVDLEdBQXNCLENBQ2xCLFFBQVMsd0JBQ1QsS0FBTSxDQUFBLENBQzFCLENBQWlCLEVBQ0l6aEMsRUFBTyxpQkFDUkEsRUFBTyxNQUFNLDhCQUE4QjRwQyxDQUFlLFlBQVloaUQsQ0FBSyxFQUFFLEVBRTNFLElBQUk4UCxHQUFtQix1QkFBdUIsQ0FDeEQsQ0FDSixNQUVJLE9BQU0zTyxFQUFBd2IsRUFBTyxZQUFQLFlBQUF4YixFQUFBLEtBQUF3YixFQUFtQnZCLElBRTdCLE9BQU9ZLENBQ1gsQ0FDQSxNQUFNNmxDLEVBQVUsSUFBSUYsR0FBUTNsQyxFQUFPNGxDLENBQWUsRUFDbEQsR0FBSSxPQUFPamxDLEVBQU8sV0FBYyxXQUFZLENBQ3hDLE1BQU1WLEVBQVlVLEVBQU8sVUFDekJrbEMsRUFBUSxVQUFZLE1BQU8sQ0FBRSxXQUFBeG5DLEVBQVksTUFBQTJCLENBQUssSUFFbkMsRUFEUSxNQUFNQyxFQUFVLENBQUUsV0FBQTVCLEVBQVksTUFBQTJCLENBQUssQ0FBRSxDQUc1RCxNQUNTLE9BQU9XLEVBQU8sV0FBYyxZQUNqQ2tsQyxFQUFRLFVBQVksU0FBWWxsQyxFQUFPLFdBRTNDLEdBQUlBLEVBQU8sVUFBVyxDQUNsQixNQUFNcGIsRUFBUytSLEdBQWdDcUosRUFBTyxVQUFXa2xDLEVBQVEsUUFBUSxFQUNqRkEsRUFBUSxnQkFBa0J0Z0QsRUFBTyxPQUNqQ3NnRCxFQUFRLGlCQUFtQixHQUMzQjk3QyxFQUFTeEUsRUFBTyxNQUNwQixDQUNBLE9BQUlvYixFQUFPLG1CQUNQa2xDLEVBQVEsU0FBV2xsQyxFQUFPLGtCQUUxQkEsRUFBTywwQkFDUGtsQyxFQUFRLGdCQUFrQmxsQyxFQUFPLHlCQUVqQ0EsRUFBTyxjQUNQa2xDLEVBQVEsWUFBY2xsQyxFQUFPLGFBRTFCa2xDLENBQ1gsQ0FRTyxTQUFTSSxHQUFXam1DLEVBQU8sQ0FDOUIsT0FBSUEsYUFBaUIybEMsR0FDVjNsQyxFQUVKNmxDLEdBQVE3bEMsQ0FBSyxDQUN4QixDQy9MTyxNQUFNa21DLEVBQXVCLENBU2hDLFlBQVkzakMsRUFBTSxDQVJsQjVPLEVBQUEsYUFJQUEsRUFBQSxZQUFPLDBCQUtILEtBQUssS0FBTzRPLENBQ2hCLENBQ0osQ0FLTyxNQUFNNGpDLEVBQW1CLENBUTVCLFlBQVl4N0MsRUFBTWYsRUFBTSxDQVB4QitKLEVBQUEsYUFDQUEsRUFBQSxhQUNBQSxFQUFBLFlBQU8seUJBTUgsS0FBSyxLQUFPaEosRUFDWixLQUFLLEtBQU9mLENBQ2hCLENBQ0osQ0FJTyxNQUFNdzhDLEVBQTJCLENBTXBDLFlBQVlwbUMsRUFBTyxDQUxuQnJNLEVBQUEsY0FDQUEsRUFBQSxZQUFPLDhCQUtILEtBQUssTUFBUXFNLENBQ2pCLENBQ0osQ0MzQ08sU0FBU3FtQyxHQUFxQixDQUFFLEtBQUExN0MsRUFBTSxRQUFBMjdDLEVBQVMsY0FBQUMsRUFBZ0IsRUFBSSxFQUFLLENBQzNFLE1BQU8sQ0FDSCxLQUFNLFFBQ04sS0FBQTU3QyxFQUNBLGNBQUE0N0MsRUFDQSxrQkFBbUJELEVBQ25CLE1BQU0sSUFBSTl5QyxFQUFNLENBQ1osTUFBTyxDQUNILFVBQVcsQ0FBRSxLQUFNLFFBQVMsS0FBQTdJLENBQUksRUFDaEMsT0FBUSxNQUFNMjdDLEVBQVE5eUMsQ0FBSSxDQUMxQyxDQUNRLENBQ1IsQ0FDQSxDQUlPLFNBQVNnekMsR0FBc0IsQ0FBRSxLQUFBNzdDLEVBQU0sUUFBQTI3QyxHQUFZLENBQ3RELE1BQU8sQ0FDSCxLQUFNLFNBQ04sS0FBQTM3QyxFQUNBLGtCQUFtQjI3QyxFQUNuQixNQUFNLElBQUk5eUMsRUFBTSxDQUNaLE1BQU8sQ0FDSCxVQUFXLENBQUUsS0FBTSxTQUFVLEtBQUE3SSxDQUFJLEVBQ2pDLE1BQU82SSxFQUFLLE1BQ1osWUFBYUEsRUFBSyxZQUNsQixPQUFRLE1BQU04eUMsRUFBUTl5QyxDQUFJLENBQzFDLENBQ1EsQ0FDUixDQUNBLENDcEJPLFNBQVNpekMsSUFBMEIsQ0FFbEMsTUFBTSxJQUFJLE1BQU0sK0pBQStKLENBR3ZMLENDbEJPLE1BQU1DLEVBQVksQ0FBbEIsY0FDSC95QyxFQUFBLFlBQU8sYUFDUEEsRUFBQSxnQkFDQSxRQUFTLENBQ0wsTUFBTyxDQUNILEtBQU0sS0FBSyxLQUNYLFFBQVMsS0FBSyxPQUMxQixDQUNJLENBQ0osQ0FDTyxNQUFNZ3pDLFdBQTZCRCxFQUFZLENBSWxELFlBQVlFLEVBQVM1bUMsRUFBTyxDQUN4QixNQUFLLEVBSlRyTSxFQUFBLGdCQUNBQSxFQUFBLGNBQ0FBLEVBQUEsWUFBTyx1QkFHSCxLQUFLLFFBQVVpekMsRUFDZixLQUFLLE1BQVE1bUMsQ0FDakIsQ0FDQSxRQUFTLENBQ0wsTUFBTyxDQUNILEdBQUcsTUFBTSxPQUFNLEVBQ2YsTUFBTyxLQUFLLE1BQU0sT0FBTSxDQUNwQyxDQUNJLENBQ0EsSUFBSSxTQUFVLENBQ1YsSUFBSTFNLEVBQVUsR0FDZCxVQUFXdXpDLEtBQVEsS0FBSyxRQUFRLFFBQ3hCQSxFQUFLLE9BQVMsZ0JBQ2R2ekMsR0FBV3V6QyxFQUFLLE1BR3hCLE9BQU92ekMsQ0FDWCxDQUNKLENBQ08sTUFBTXd6QyxXQUF3QkosRUFBWSxDQUk3QyxZQUFZRSxFQUFTNW1DLEVBQU8sQ0FDeEIsTUFBSyxFQUpUck0sRUFBQSxnQkFDQUEsRUFBQSxjQUNBQSxFQUFBLFlBQU8sa0JBR0gsS0FBSyxRQUFVaXpDLEVBQ2YsS0FBSyxNQUFRNW1DLENBQ2pCLENBQ0EsUUFBUyxDQUNMLE1BQU8sQ0FDSCxHQUFHLE1BQU0sT0FBTSxFQUNmLE1BQU8sS0FBSyxNQUFNLE9BQU0sQ0FDcEMsQ0FDSSxDQUNKLENBQ08sTUFBTSttQyxXQUE4QkwsRUFBWSxDQUtuRCxZQUFZRSxFQUFTNW1DLEVBQU9sSSxFQUFRLENBQ2hDLE1BQUssRUFMVG5FLEVBQUEsZ0JBQ0FBLEVBQUEsY0FDQUEsRUFBQSxlQUNBQSxFQUFBLFlBQU8seUJBR0gsS0FBSyxRQUFVaXpDLEVBQ2YsS0FBSyxNQUFRNW1DLEVBQ2IsS0FBSyxPQUFTbEksQ0FDbEIsQ0FDQSxRQUFTLENBQ0wsTUFBTyxDQUNILEdBQUcsTUFBTSxPQUFNLEVBQ2YsTUFBTyxLQUFLLE1BQU0sT0FBTSxFQUN4QixPQUFRd0UsR0FBYyxLQUFLLE1BQU0sQ0FDN0MsQ0FDSSxDQUNKLENBQ08sTUFBTTBxQyxXQUF5Qk4sRUFBWSxDQUk5QyxZQUFZRSxFQUFTNW1DLEVBQU8sQ0FDeEIsTUFBSyxFQUpUck0sRUFBQSxnQkFDQUEsRUFBQSxjQUNBQSxFQUFBLFlBQU8sa0JBR0gsS0FBSyxRQUFVaXpDLEVBQ2YsS0FBSyxNQUFRNW1DLENBQ2pCLENBQ0EsUUFBUyxDQUNMLE1BQU8sQ0FDSCxHQUFHLE1BQU0sT0FBTSxFQUNmLE1BQU8sS0FBSyxNQUFNLE9BQU0sQ0FDcEMsQ0FDSSxDQUNKLENBQ08sTUFBTWluQyxXQUEyQlAsRUFBWSxDQUloRCxZQUFZRSxFQUFTNW1DLEVBQU8sQ0FDeEIsTUFBSyxFQUpUck0sRUFBQSxnQkFDQUEsRUFBQSxjQUNBQSxFQUFBLFlBQU8scUJBR0gsS0FBSyxRQUFVaXpDLEVBQ2YsS0FBSyxNQUFRNW1DLENBQ2pCLENBQ0EsUUFBUyxDQUNMLE1BQU8sQ0FDSCxHQUFHLE1BQU0sT0FBTSxFQUNmLE1BQU8sS0FBSyxNQUFNLE9BQU0sQ0FDcEMsQ0FDSSxDQUNKLENBQ08sTUFBTWtuQyxXQUE2QlIsRUFBWSxDQUtsRCxZQUFZRSxFQUFTTyxFQUFhQyxFQUFhLENBQzNDLE1BQUssRUFMVHp6QyxFQUFBLGdCQUNBQSxFQUFBLG9CQUNBQSxFQUFBLG9CQUNBQSxFQUFBLFlBQU8sdUJBR0gsS0FBSyxRQUFVaXpDLEVBQ2YsS0FBSyxZQUFjTyxFQUNuQixLQUFLLFlBQWNDLENBQ3ZCLENBQ0EsUUFBUyxDQUNMLE1BQU8sQ0FDSCxHQUFHLE1BQU0sT0FBTSxFQUNmLFlBQWEsS0FBSyxZQUFZLE9BQU0sRUFDcEMsWUFBYSxLQUFLLFlBQVksT0FBTSxDQUNoRCxDQUNJLENBQ0osQ0FDTyxNQUFNQyxXQUE0QlgsRUFBWSxDQUtqRCxZQUFZRSxFQUFTNW1DLEVBSXJCK2tDLEVBQVUsQ0FDTixNQUFLLEVBVFRweEMsRUFBQSxnQkFDQUEsRUFBQSxjQUNBQSxFQUFBLGlCQUNBQSxFQUFBLFlBQU8sc0JBT0gsS0FBSyxRQUFVaXpDLEVBQ2YsS0FBSyxNQUFRNW1DLEVBQ2IsS0FBSyxTQUFXK2tDLEVBQ2hCLEtBQUssU0FBV0EsR0FBWTZCLEVBQVEsSUFDeEMsQ0FLQSxJQUFJLE1BQU8sQ0FDUCxPQUFPLEtBQUssVUFBWSxLQUFLLFFBQVEsSUFDekMsQ0FJQSxJQUFJLFdBQVksQ0FDWixNQUFPLGNBQWUsS0FBSyxRQUFVLEtBQUssUUFBUSxVQUFZLE1BQ2xFLENBQ0EsUUFBUyxDQUNMLE1BQU8sQ0FDSCxHQUFHLE1BQU0sT0FBTSxFQUNmLE1BQU8sS0FBSyxNQUFNLE9BQU0sRUFDeEIsU0FBVSxLQUFLLFFBQzNCLENBQ0ksQ0FDSixDQzlKTyxNQUFNVSxFQUFvQixDQUExQixjQUNIaFYsRUFBQSxLQUFBaVYsR0FBZ0IsSUFBSSxLQUNwQixXQUFXdm5DLEVBQU8reEIsRUFBVzNuQyxFQUFVLENBQUEsRUFBSSxDQUN2QyxNQUFNbzlDLEVBQWFwOUMsRUFBUSxZQUFjLEdBQ3pDLEdBQUkybkMsRUFBVSxTQUFXLEdBQUssQ0FBQ3lWLEVBQVksQ0FFdkMsTUFBTTN2QyxFQUFXKzZCLEVBQUEsS0FBSzJVLElBQWMsSUFBSXZuQyxDQUFLLEVBQzdDLEdBQUksQ0FBQ25JLEdBQVlBLEVBQVMsT0FBUyxFQUMvQixNQUVSLENBRUEsR0FBSSxDQUFDMnZDLEVBQVksQ0FDYixNQUFNM3ZDLEVBQVcrNkIsRUFBQSxLQUFLMlUsSUFBYyxJQUFJdm5DLENBQUssRUFDN0MsR0FBSW5JLEdBQVlBLEVBQVMsT0FBUyxHQUFLazZCLEVBQVUsU0FBVyxFQUN4RCxNQUVSLENBQ0FhLEVBQUEsS0FBSzJVLElBQWMsSUFBSXZuQyxFQUFPK3hCLENBQVMsQ0FDM0MsQ0FDQSxhQUFhL3hCLEVBQU8sQ0FDaEIsT0FBTzR5QixFQUFBLEtBQUsyVSxJQUFjLElBQUl2bkMsQ0FBSyxDQUN2QyxDQUNBLFFBQVMsQ0FDTCxPQUFPLE9BQU8sWUFBWSxNQUFNLEtBQUs0eUIsRUFBQSxLQUFLMlUsSUFBYyxRQUFPLENBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQ3ZuQyxFQUFPK3hCLENBQVMsSUFDOUUsQ0FBQy94QixFQUFNLEtBQU0reEIsQ0FBUyxDQUNoQyxDQUFDLENBQ04sQ0FDSixDQTNCSXdWLEdBQUEsWUNBRyxNQUFNRSxHQUFpQm5RLEdBQXFCLE9BQVEsQ0FDdkQ1SCxFQUFTLENBQ0wsS0FBTUUsRUFBVSxtQkFBbUIsRUFDbkMsU0FBVUUsRUFBSyxDQUN2QixDQUFLLEVBQ0RKLEVBQVMsQ0FDTCxLQUFNRSxFQUFVLHdCQUF3QixFQUN4QyxPQUFRRCxFQUFRLENBQ3hCLENBQUssRUFDREQsRUFBUyxDQUNMLEtBQU1FLEVBQVUscUJBQXFCLENBQzdDLENBQUssRUFDREYsRUFBUyxDQUNMLEtBQU1FLEVBQVUsd0JBQXdCLEVBQ3hDLEtBQU1DLEVBQVNGLEVBQVEsRUFBSUcsRUFBSyxDQUFFLENBQzFDLENBQUssQ0FDTCxDQUFDLEVBQ00sTUFBTTRYLEVBQWlCLENBTTFCLFlBQVloVCxFQUFlaVQsRUFBZUMsRUFBY0MsRUFBY0MsRUFBVSxDQUxoRm4wQyxFQUFBLHNCQUNBQSxFQUFBLHNCQUNBQSxFQUFBLHFCQUNBQSxFQUFBLHFCQUNBQSxFQUFBLGlCQUVJLEtBQUssY0FBZ0IrZ0MsRUFDckIsS0FBSyxjQUFnQmlULEVBQ3JCLEtBQUssYUFBZUMsRUFDcEIsS0FBSyxhQUFlQyxFQUNwQixLQUFLLFNBQVdDLENBQ3BCLENBQ0EsSUFBSSxnQkFBaUIsQ0FDakIsT0FBTyxLQUFLLGFBQWEsT0FBTyxLQUFLLFlBQVksQ0FDckQsQ0FDSixDQ1BPLE1BQU1DLEdBQXlCLE1BQ2hDQyxHQUE0QixDQUM5QixNQUNBLE1BQ0FELEVBQ0osRUFDTUUsR0FBaUJ6USxHQUFPd1EsRUFBeUIsRUFDakRFLEdBQXdCeFksRUFBUyxDQUNuQyxLQUFNQyxFQUFRLENBQ2xCLENBQUMsRUFnQkt3WSxHQWZxQnpZLEVBQVMsQ0FDaEMsT0FBUUUsRUFBVSxZQUFZLEVBQzlCLEdBQUlELEVBQVEsRUFDWixTQUFVQSxFQUFRLEVBQ2xCLFVBQVdBLEVBQVEsRUFBRyxTQUFRLEVBQzlCLFdBQVlBLEVBQVEsRUFBRyxTQUFRLEVBQy9CLFNBQVVBLEVBQVEsRUFBRyxTQUFRLEVBQzdCLE1BQU95WSxFQUNLLENBQ1IsUUFBU3pZLEVBQVEsRUFDakIsS0FBTUUsRUFBU0YsRUFBUSxFQUFJRyxFQUFLLENBQUUsRUFBRSxTQUFRLENBQ3BELENBQUssRUFDSSxTQUFRLEVBQ2IsVUFBV0QsRUFBU0YsRUFBUSxFQUFJRyxFQUFLLENBQUUsQ0FDM0MsQ0FBQyxFQUN5QyxPQUFPLENBQzdDLGNBQWV1WSxHQUFPLElBQU1GLEVBQWMsRUFBRSxTQUFRLENBQ3hELENBQUMsRUFDS0csR0FBcUI1WSxFQUFTLENBQ2hDLFlBQWE2SCxFQUFRLEVBQ3JCLGFBQWNBLEVBQVEsRUFDdEIsWUFBYUEsRUFBUSxFQUNyQixtQkFBb0IxSCxFQUFTRixFQUFRLEVBQUk0SCxFQUFRLENBQUUsRUFBRSxTQUFRLEVBQzdELG9CQUFxQjFILEVBQVNGLEVBQVEsRUFBSTRILEVBQVEsQ0FBRSxFQUFFLFNBQVEsRUFDOUQsU0FBVTVILEVBQVEsRUFBRyxTQUFRLENBQ2pDLENBQUMsRUFDSzRZLEdBQWM3WSxFQUFTLENBQ3pCLFNBQVU2SCxFQUFRLEVBQ2xCLFlBQWFBLEVBQVEsRUFDckIsYUFBY0EsRUFBUSxFQUN0QixZQUFhQSxFQUFRLEVBQ3JCLG1CQUFvQnhILEVBQVFGLEVBQVNGLEVBQVEsRUFBSTRILEVBQVEsQ0FBRSxDQUFDLEVBQUUsU0FBUSxFQUN0RSxvQkFBcUJ4SCxFQUFRRixFQUFTRixFQUFRLEVBQUk0SCxFQUFRLENBQUUsQ0FBQyxFQUFFLFNBQVEsRUFDdkUsb0JBQXFCeEgsRUFBUXVZLEVBQWtCLEVBQUUsU0FBUSxDQUM3RCxDQUFDLEVBQ0tFLEdBQXNCOVksRUFBUyxDQUNqQyxNQUFPNlksR0FDUCxPQUFReFksRUFBUTBZLEVBQXdCLEVBQ3hDLFdBQVk5WSxFQUFRLEVBQUcsU0FBUSxFQUMvQixhQUFjRSxFQUFTRixFQUFRLEVBQUlHLEVBQUssQ0FBRSxFQUFFLFNBQVEsQ0FDeEQsQ0FBQyxFQUNLNFksR0FBYXBSLEdBQXFCLE9BQVEsQ0FDNUM1SCxFQUFTLENBQ0wsS0FBTUUsRUFBVSxxQkFBcUIsRUFDckMsUUFBUytZLEdBQ1QsTUFBT1QsRUFDZixDQUFLLEVBQ0R4WSxFQUFTLENBQ0wsS0FBTUUsRUFBVSxnQkFBZ0IsRUFDaEMsUUFBU2daLEdBQXNCLEdBQUdDLEVBQTJCLEVBQzdELE1BQU9YLEVBQ2YsQ0FBSyxFQUNEeFksRUFBUyxDQUNMLEtBQU1FLEVBQVUsdUJBQXVCLEVBQ3ZDLFFBQVNrWixHQUFnQyxHQUFHQyxFQUErQixFQUN0RSxHQUFHQyxFQUE0QixFQUMvQixHQUFHQyxFQUFpQyxFQUN6QyxNQUFPZixHQUNQLE9BQVF2WSxFQUFRLENBQ3hCLENBQUssRUFDREQsRUFBUyxDQUNMLEtBQU1FLEVBQVUsZ0JBQWdCLEVBQ2hDLFFBQVNzWixHQUNULE1BQU9oQixFQUNmLENBQUssRUFDRHhZLEVBQVMsQ0FDTCxLQUFNRSxFQUFVLG1CQUFtQixFQUNuQyxRQUFTdVosR0FDVCxNQUFPakIsRUFDZixDQUFLLEVBQ0R4WSxFQUFTLENBQ0wsS0FBTUUsRUFBVSxxQkFBcUIsRUFDckMsUUFBU2taLEdBQ1QsWUFBYVosR0FDYixZQUFhQSxFQUNyQixDQUFLLEVBQ0R4WSxFQUFTLENBQ0wsS0FBTUUsRUFBVSxvQkFBb0IsRUFDcEMsUUFBU3VaLEdBQTBCLEdBQUdOLEVBQTJCLEVBQzVELEdBQUdPLEVBQXNCLEVBQ3pCLEdBQUdDLEVBQTJCLEVBQ25DLE1BQU9uQixHQUNQLFNBQVV2WSxFQUFRLEVBQUcsU0FBUSxDQUNyQyxDQUFLLENBQ0wsQ0FBQyxFQUNLMlosR0FBd0I1WixFQUFTLENBQ25DLE9BQVFFLEVBQVUsT0FBTyxFQUN6QixHQUFJRCxFQUFRLEVBQ1osY0FBZUEsRUFBUSxFQUN2QixTQUFVQSxFQUFRLEVBQUcsU0FBUSxFQUM3QixTQUFVRSxFQUFTRixFQUFRLEVBQUlHLEVBQUssQ0FBRSxFQUd0QyxnQkFBaUJILEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUSxDQUNuRCxDQUFDLEVBQ0s0WixHQUFvQzdaLEVBQVMsQ0FDL0MsU0FBVUssRUFBUTJZLEVBQVUsRUFDNUIsVUFBVzNZLEVBQVFKLEdBQVUsRUFDN0IsU0FBVUksRUFBUUwsRUFBUyxDQUN2QixTQUFVSSxFQUFLLEVBQ2YsUUFBU0EsRUFBSyxDQUN0QixDQUFLLENBQUMsRUFDRixVQUFXQyxFQUFRTCxFQUFTLENBQ3hCLFNBQVVJLEVBQUssRUFDZixLQUFNQSxFQUFLLENBQ25CLENBQUssQ0FBQyxFQUNGLGdCQUFpQkMsRUFBUUwsRUFBUyxDQUM5QixTQUFVSSxFQUFLLEVBQ2YsU0FBVUEsRUFBSyxDQUN2QixDQUFLLENBQUMsRUFDRixhQUFjMFosRUFDSDlaLEVBQVMsQ0FDaEIsU0FBVUksRUFBSyxFQUNmLE1BQU9BLEVBQUssQ0FDcEIsQ0FBSyxDQUFDLEVBQ0csU0FBUSxFQUNiLGtCQUFtQjBaLEVBQ1I5WixFQUFTLENBQ2hCLFNBQVVJLEVBQUssRUFDZixXQUFZQSxFQUFLLENBQ3pCLENBQUssQ0FBQyxFQUNHLFNBQVEsRUFDYixvQkFBcUIwWixFQUNWOVosRUFBUyxDQUNoQixZQUFhQSxFQUFTLENBRWxCLFFBQVNBLEVBQVMsQ0FDZCxLQUFNRSxFQUFVLGtCQUFrQixFQUNsQyxLQUFNRCxFQUFRLEVBQ2QsVUFBV0EsRUFBUSxFQUFHLFNBQVEsRUFDOUIsT0FBUUEsRUFBUSxFQUFHLFNBQVEsRUFDM0IsT0FBUUEsRUFBUSxFQUFHLFNBQVEsRUFFM0IsYUFBY0UsRUFBU0YsRUFBUSxFQUFJRyxFQUFLLENBQUUsRUFBRSxTQUFRLEVBQUcsU0FBUSxDQUMvRSxDQUFhLENBQ2IsQ0FBUyxFQUVELFFBQVNKLEVBQVMsQ0FDZCxLQUFNRSxFQUFVLGFBQWEsRUFDN0IsS0FBTUEsRUFBVSxZQUFZLEVBQzVCLGFBQWNDLEVBQVNGLEVBQVEsRUFBSUcsRUFBSyxDQUFFLENBQ3RELENBQVMsQ0FDVCxDQUFLLENBQUMsRUFDRyxTQUFRLENBQ2pCLENBQUMsRUFDSzJaLEdBQWdDL1osRUFBUyxDQUMzQyxrQkFBbUJNLEdBQVMsRUFDNUIsV0FBWUYsRUFBSyxDQUNyQixDQUFDLEVBQ0s0WixHQUE4QnBTLEdBQXFCLE9BQVEsQ0FDN0Q1SCxFQUFTLENBQUUsS0FBTUUsRUFBVSxPQUFPLENBQUMsQ0FBRSxFQUNyQ0YsRUFBUyxDQUNMLEtBQU1FLEVBQVUsZUFBZSxFQUMvQixRQUFTRCxFQUFRLENBQ3pCLENBQUssRUFDREQsRUFBUyxDQUFFLEtBQU1FLEVBQVUsZ0JBQWdCLENBQUMsQ0FBRSxDQUNsRCxDQUFDLEVBQ0srWixHQUFvQ2phLEVBQVMsQ0FDL0MsV0FBWUksRUFBSyxFQUFHLFNBQVEsRUFDNUIsU0FBVTRaLEVBQ2QsQ0FBQyxFQUNLRSxHQUE4QmxhLEVBQVMsQ0FDekMsS0FBTThKLEdBQVEsQ0FBQzVKLEVBQVUsWUFBWSxFQUFHQSxFQUFVLGFBQWEsQ0FBQyxDQUFDLEVBQ2pFLEtBQU1ELEVBQVEsQ0FDbEIsQ0FBQyxFQUNLa2EsR0FBNkJuYSxFQUFTLENBQ3hDLFVBQVdBLEVBQVMsQ0FDaEIsS0FBTUUsRUFBVSxPQUFPLEVBQ3ZCLEtBQU1ELEVBQVEsQ0FDdEIsQ0FBSyxFQUNELE9BQVE4WixFQUNaLENBQUMsRUFDS0ssR0FBOEJwYSxFQUFTLENBQ3pDLFVBQVdBLEVBQVMsQ0FDaEIsS0FBTUUsRUFBVSxRQUFRLEVBQ3hCLEtBQU1ELEVBQVEsQ0FDdEIsQ0FBSyxFQUNELFlBQWFHLEVBQUssRUFDbEIsTUFBT29ZLEdBQ1AsT0FBUXVCLEVBQ1osQ0FBQyxFQUNLTSxHQUFpQ3JhLEVBQVMsQ0FDNUMsVUFBV2thLEdBQTRCLE9BQU8sQ0FDMUMsS0FBTWhhLEVBQVUsWUFBWSxDQUNwQyxDQUFLLEVBQ0QsT0FBUStaLEVBQ1osQ0FBQyxFQUNLSyxHQUFrQ3RhLEVBQVMsQ0FDN0MsVUFBV2thLEdBQTRCLE9BQU8sQ0FDMUMsS0FBTWhhLEVBQVUsYUFBYSxDQUNyQyxDQUFLLEVBQ0QsT0FBUStaLEVBQ1osQ0FBQyxFQUNZTSxHQUFxQnZhLEVBQVMsQ0FDdkMsZUFBQXVZLEdBQ0EsWUFBYTFRLEVBQVEsRUFDckIsYUFBYzJRLEdBQ2QsY0FBZXZZLEVBQVEsRUFBRyxHQUFHSSxFQUFRbWEsRUFBa0IsQ0FBQyxFQUN4RCxlQUFnQm5hLEVBQVF5WSxFQUFtQixFQUMzQyxRQUFTOVksRUFBUyxDQUNkLE1BQU82WSxHQUNQLFVBQVcxWSxFQUFTRixFQUFRLEVBQUlELEVBQVMsQ0FDckMsU0FBVUssRUFBUUosRUFBUSxDQUFFLEVBQUUsR0FBR0ssR0FBUyxDQUFFLEVBQzVDLFNBQVVELEVBQVFKLEVBQVEsQ0FBRSxFQUFFLEdBQUdLLEdBQVMsQ0FBRSxDQUN4RCxDQUFTLENBQUMsRUFDRixRQUFTSCxFQUFTRixFQUFRLEVBQUlHLEVBQUssQ0FBRSxDQUM3QyxDQUFLLEVBQ0QsZUFBZ0JELEVBQVNGLEVBQVEsRUFBSUksRUFBUUosRUFBUSxDQUFFLENBQUMsRUFDeEQsU0FBVTRILEVBQVEsRUFDbEIsaUJBQWtCNFEsR0FBZSxTQUFRLEVBQUcsU0FBUSxFQUNwRCxpQkFBa0JuWSxHQUFTLEVBQzNCLHNCQUF1QkQsRUFBUThaLEVBQTBCLEVBQ3pELHVCQUF3QjlaLEVBQVErWixFQUEyQixFQUMzRCwwQkFBMkJOLEVBQ2hCTyxFQUE4QixFQUNwQyxTQUFRLEVBQ1IsUUFBUSxDQUFBLENBQUUsRUFDZiwyQkFBNEJQLEVBQ2pCUSxFQUErQixFQUNyQyxTQUFRLEVBQ1IsUUFBUSxDQUFBLENBQUUsRUFDZixzQkFBdUJoYSxHQUFTLEVBQUcsU0FBUSxFQUMzQyxZQUFheVgsR0FBZSxTQUFRLEVBQ3BDLGtCQUFtQmUsR0FBb0IsU0FBUSxFQUMvQyxlQUFnQnpZLEVBQVEyWSxFQUFVLEVBQ2xDLHFCQUFzQjdZLEVBQVNGLElBQVlBLEVBQVEsQ0FBRSxFQUFFLFNBQVEsRUFBRyxRQUFRLEVBQUUsRUFDNUUsc0JBQXVCNFosR0FBa0MsU0FBUSxFQUNqRSw4QkFBK0JoUyxFQUFRLEVBQUcsSUFBRyxFQUFHLElBQUksQ0FBQyxFQUFFLFNBQVEsRUFDL0QsZUFBZ0I1SCxFQUFRLEVBQUcsU0FBUSxFQUNuQyxtQkFBb0JBLEVBQVEsRUFBRyxTQUFRLEVBQ3ZDLE1BQU8yWixHQUFzQixTQUFRLENBQ3pDLENBQUMsRUFTTSxNQUFNYSxFQUFTLENBbUhsQixZQUFZL3FDLEVBQVNzMUIsRUFBZTBWLEVBQWVDLEVBQVUsQ0EvRzdEMTJDLEVBQUEsb0JBQWUsR0FJZkEsRUFBQSw4QkFBeUIsSUFJekJBLEVBQUEsc0JBSUFBLEVBQUEsdUJBSUFBLEVBQUEsd0JBSUFBLEVBQUEsd0JBSUFBLEVBQUEsNEJBSUFBLEVBQUEsMkJBSUFBLEVBQUEsMEJBSUFBLEVBQUEsaUJBVUFBLEVBQUEsd0JBSUFBLEVBQUEsOEJBSUFBLEVBQUEsd0JBV0FBLEVBQUEsdUNBSUFBLEVBQUEsa0JBSUFBLEVBQUEseUJBQW9CLElBSXBCQSxFQUFBLDBCQUlBQSxFQUFBLCtCQUlBQSxFQUFBLGdDQUlBQSxFQUFBLG1DQUlBQSxFQUFBLG9DQUlBQSxFQUFBLHFCQUtBQSxFQUFBLDJCQUlBQSxFQUFBLCtCQUlBQSxFQUFBLGNBQVMsTUFFTCxLQUFLLFNBQVd5TCxFQUNoQixLQUFLLGVBQWlCLGdCQUFnQnMxQixDQUFhLEVBQ25ELEtBQUssZ0JBQWtCLENBQUEsRUFDdkIsS0FBSyxrQkFBb0IsT0FDekIsS0FBSyxjQUFnQjBWLEVBQ3JCLEtBQUssZ0JBQWtCLElBQUk5QyxHQUMzQixLQUFLLHNCQUF3QixJQUFJLElBQ2pDLEtBQUssZ0JBQWtCLENBQUEsRUFDdkIsS0FBSywrQkFBaUMsRUFDdEMsS0FBSyxVQUFZK0MsRUFDakIsS0FBSyx1QkFBeUIsQ0FBQSxFQUM5QixLQUFLLHdCQUEwQixDQUFBLEVBQy9CLEtBQUssMkJBQTZCLENBQUEsRUFDbEMsS0FBSyw0QkFBOEIsQ0FBQSxFQUNuQyxLQUFLLE9BQVMvWSxHQUFlLENBQ2pDLENBdkZBLElBQUksT0FBUSxDQUNSLE9BQU8sS0FBSyxTQUFTLEtBQ3pCLENBeUZBLHVCQUF1QmdaLEVBQWdCQyxFQUFvQixDQUN2RCxLQUFLLGdCQUFrQkQsRUFDdkIsS0FBSyxvQkFBc0JDLENBQy9CLENBSUEsb0JBQW9CNVosRUFBTSxDQUN0QixLQUFLLGtCQUFvQkEsQ0FDN0IsQ0FJQSxnQkFBZ0Izd0IsRUFBTyxDQUNuQixLQUFLLGNBQWdCQSxDQUN6QixDQUlBLElBQUksY0FBZSxDQUNmLE9BQU8sS0FBSyxhQUNoQixDQUlBLHNCQUF1QixDQUNuQixLQUFLLCtCQUFpQyxDQUMxQyxDQUlBLHNCQUFzQndxQyxFQUFPLENBQ3JCQSxHQUFTLElBR2IsS0FBSywrQkFBaUMsS0FBSyxJQUFJLEVBQUcsS0FBSywrQkFBaUNBLENBQUssRUFDakcsQ0FNQSxJQUFJLFNBQVUsQ0FDVixPQUFPcFYsR0FBYSxLQUFLLGVBQWdCLEtBQUssZUFBZSxDQUNqRSxDQUlBLGtCQUFtQixPQUNmLFFBQUlqd0MsRUFBQSxLQUFLLGVBQUwsWUFBQUEsRUFBbUIsUUFBUyx5QkFDckIsQ0FBQSxFQUVKLEtBQUssYUFBYSxLQUFLLGFBQ2xDLENBQ0EsMEJBQTBCNC9DLEVBQVVFLEVBQVEsQ0FDeEMsTUFBTyxHQUFHRixDQUFRLElBQUlFLENBQU0sRUFDaEMsQ0FDQSx1QkFBdUJGLEVBQVVFLEVBQVEsQ0FDckMsT0FBTyxLQUFLLHNCQUFzQixJQUFJLEtBQUssMEJBQTBCRixFQUFVRSxDQUFNLENBQUMsQ0FDMUYsQ0FDQSx1QkFBdUJGLEVBQVVFLEVBQVEsQ0FDckMsT0FBTyxLQUFLLHNCQUFzQixJQUFJLEtBQUssMEJBQTBCRixFQUFVRSxDQUFNLENBQUMsQ0FDMUYsQ0FDQSx1QkFBdUJGLEVBQVVFLEVBQVF3RixFQUFpQixDQUN0RCxLQUFLLHNCQUFzQixJQUFJLEtBQUssMEJBQTBCMUYsRUFBVUUsQ0FBTSxFQUFHd0YsQ0FBZSxDQUNwRyxDQUNBLHlCQUF5QjFGLEVBQVVFLEVBQVEsQ0FDdkMsS0FBSyxzQkFBc0IsT0FBTyxLQUFLLDBCQUEwQkYsRUFBVUUsQ0FBTSxDQUFDLENBQ3RGLENBYUEsUUFBUUksRUFBY2o3QyxFQUFVLENBQUUsY0FBZSxFQUFLLEVBQUksQ0FDdEQsS0FBSyxTQUFTLFlBQVlpN0MsRUFBY2o3QyxDQUFPLENBQ25ELENBYUEsT0FBT2k3QyxFQUFjajdDLEVBQVUsQ0FBRSxhQUFjLEVBQUssRUFBSSxDQUNwRCxLQUFLLFNBQVMsV0FBV2k3QyxFQUFjajdDLENBQU8sQ0FDbEQsQ0FlQSxPQUFPQSxFQUFVLEdBQUksT0FDakIsTUFBTXNnRCxFQUF1QnRnRCxFQUFRLHVCQUF5QixHQUN4RDBOLEVBQVMsQ0FDWCxlQUFnQml3QyxHQUNoQixZQUFhLEtBQUssYUFDbEIsYUFBYyxDQUNWLEtBQU0sS0FBSyxjQUFjLElBQ3pDLEVBQ1ksY0FBZSxLQUFLLGVBQ3BCLGVBQWdCLEtBQUssZ0JBQWdCLElBQUs0QyxJQUMvQixDQUNILE1BQU8sQ0FDSCxTQUFVQSxFQUFTLE1BQU0sU0FDekIsWUFBYUEsRUFBUyxNQUFNLFlBQzVCLGFBQWNBLEVBQVMsTUFBTSxhQUM3QixZQUFhQSxFQUFTLE1BQU0sWUFDNUIsbUJBQW9CQSxFQUFTLE1BQU0sbUJBQ25DLG9CQUFxQkEsRUFBUyxNQUFNLG9CQUNwQyxHQUFJQSxFQUFTLE1BQU0scUJBQ2ZBLEVBQVMsTUFBTSxvQkFBb0IsT0FBUyxFQUMxQyxDQUNFLG9CQUFxQkEsRUFBUyxNQUFNLG9CQUFvQixJQUFLMWlELElBQVcsQ0FDcEUsWUFBYUEsRUFBTSxZQUNuQixhQUFjQSxFQUFNLGFBQ3BCLFlBQWFBLEVBQU0sWUFDbkIsbUJBQW9CQSxFQUFNLG1CQUMxQixvQkFBcUJBLEVBQU0sb0JBQzNCLEdBQUlBLEVBQU0sU0FBVyxDQUFFLFNBQVVBLEVBQU0sUUFBUSxFQUFLLEVBQ3hGLEVBQWtDLENBQ2xDLEVBQzhCLEVBQzlCLEVBQ29CLE9BQVEwaUQsRUFBUyxPQUNqQixXQUFZQSxFQUFTLFdBQ3JCLGFBQWNBLEVBQVMsWUFDM0MsRUFDYSxFQUNELFFBQVMsS0FBSyxTQUFTLE9BQU0sRUFDN0IsZUFBZ0IsS0FBSyxnQkFBZ0IsT0FBTSxFQUMzQyxTQUFVLEtBQUssVUFDZixrQkFBa0J4bEQsRUFBQSxLQUFLLG9CQUFMLFlBQUFBLEVBQXdCLFNBQzFDLGlCQUFrQixLQUFLLGtCQUN2QixzQkFBdUIsS0FBSyx1QkFDNUIsc0JBQXVCLEtBQUssdUJBQzVCLHVCQUF3QixLQUFLLHdCQUF3QixJQUFLc1csSUFBTyxDQUM3RCxHQUFHQSxFQUNILE1BQU9BLEVBQUUsTUFBTSxPQUFNLENBQ3JDLEVBQWMsRUFDRiwwQkFBMkIsS0FBSywyQkFDaEMsMkJBQTRCLEtBQUssNEJBQ2pDLFlBQWEsS0FBSyxhQUNsQixrQkFBbUIsS0FBSyxrQkFDeEIsZUFBZ0IsS0FBSyxnQkFBZ0IsSUFBSzdSLEdBQVNBLEVBQUssUUFBUSxFQUNoRSxxQkFBc0IsT0FBTyxZQUFZLEtBQUssc0JBQXNCLFFBQU8sQ0FBRSxFQUM3RSw4QkFBK0IsS0FBSywrQkFDcEMsc0JBQXVCLEtBQUssdUJBQzVCLGVBQWdCLEtBQUssZ0JBQ3JCLG1CQUFvQixLQUFLLG9CQUN6QixNQUFPLEtBQUssT0FDTixLQUFLLE9BQU8sT0FBTyxDQUFFLHFCQUFBOGdELENBQW9CLENBQUUsRUFDM0MsSUFDbEIsRUFFY2hyQyxFQUFTdXFDLEdBQW1CLFVBQVVueUMsQ0FBTSxFQUNsRCxHQUFJLENBQUM0SCxFQUFPLFFBQ1IsTUFBTSxJQUFJOUwsR0FBWSxrQ0FBa0M4TCxFQUFPLE1BQU0sT0FBTyxFQUFFLEVBRWxGLE9BQU9BLEVBQU8sSUFDbEIsQ0FTQSxTQUFTdFYsRUFBVSxHQUFJLENBQ25CLE9BQU8sS0FBSyxVQUFVLEtBQUssT0FBT0EsQ0FBTyxDQUFDLENBQzlDLENBT0EsYUFBYSxXQUFXd2dELEVBQWNweUMsRUFBSyxDQUN2QyxPQUFPcXlDLEdBQXdCRCxFQUFjcHlDLENBQUcsQ0FDcEQsQ0FDQSxhQUFhLHNCQUFzQm95QyxFQUFjcHlDLEVBQUs0RyxFQUFTaFYsRUFBVSxDQUFBLEVBQUksQ0FDekUsT0FBT3lnRCxHQUF3QkQsRUFBY3B5QyxFQUFLLENBQzlDLGdCQUFpQjRHLEVBQ2pCLGdCQUFpQmhWLEVBQVEsZUFDckMsQ0FBUyxDQUNMLENBQ0osQ0FDQSxlQUFleWdELEdBQXdCRCxFQUFjcHlDLEVBQUtwTyxFQUFVLENBQUEsRUFBSSxDQUNwRSxLQUFNLENBQUMwZ0QsRUFBY0MsQ0FBVSxFQUFJLE1BQU1qbkQsR0FBWSxJQUFNLEtBQUssTUFBTTBVLENBQUcsQ0FBQyxFQUMxRSxHQUFJc3lDLEVBQ0EsTUFBTSxJQUFJNTJDLEVBQVUsOEJBQThCNDJDLGFBQXdCLE1BQVFBLEVBQWEsUUFBVSxPQUFPQSxDQUFZLENBQUMsRUFBRSxFQUVuSSxNQUFNRSxFQUF1QkQsRUFBVyxlQUN4QyxHQUFJLENBQUNDLEVBQ0QsTUFBTSxJQUFJOTJDLEVBQVUscUNBQXFDLEVBRTdELEdBQUksQ0FBQzh6QyxHQUEwQixTQUFTZ0QsQ0FBb0IsRUFDeEQsTUFBTSxJQUFJOTJDLEVBQVUsNEJBQTRCODJDLENBQW9CLHlDQUF5Q2pELEVBQXNCLEdBQUcsRUFFMUksTUFBTWtELEVBQVloQixHQUFtQixNQUFNLEtBQUssTUFBTXp4QyxDQUFHLENBQUMsRUFDMUQsT0FBTzB5QyxHQUFzQk4sRUFBY0ssRUFBVzdnRCxDQUFPLENBQ2pFLENBQ0EsZUFBZThnRCxHQUFzQk4sRUFBY0ssRUFBVzdnRCxFQUFVLENBQUEsRUFBSSxpQkFDeEUsTUFBTStnRCxFQUFXQyxHQUFjUixDQUFZLEVBQ3JDUyxFQUFrQmpoRCxFQUFRLGdCQUMxQmtoRCxFQUFrQmxoRCxFQUFRLGlCQUFtQixRQUk3Q2dWLEVBQVVpc0MsR0FDWixJQUFJNUcsR0FBV3dHLEVBQVUsUUFBUSxPQUFPLEVBQ3hDSSxFQUNJQyxJQUFvQixTQUNwQmxzQyxFQUFRLGdCQUFnQjZyQyxFQUFVLFFBQVEsU0FBUyxFQUl2RDdyQyxFQUFRLGtCQUFrQjZyQyxFQUFVLFFBQVEsU0FBUyxFQUt6RCxNQUFNTSxFQUFlSixFQUFTLElBQUlGLEVBQVUsYUFBYSxJQUFJLEVBQzdELEdBQUksQ0FBQ00sRUFDRCxNQUFNLElBQUlyM0MsRUFBVSxTQUFTKzJDLEVBQVUsYUFBYSxJQUFJLFlBQVksRUFFeEUsTUFBTXYzQyxFQUFRLElBQUl5MkMsR0FBUy9xQyxFQUFTLEdBQUltc0MsRUFBY04sRUFBVSxRQUFRLEVBQ3hFdjNDLEVBQU0sYUFBZXUzQyxFQUFVLFlBQy9CdjNDLEVBQU0sdUJBQXlCdTNDLEVBQVUsdUJBQXlCLEdBQ2xFdjNDLEVBQU0sZ0JBQWtCdTNDLEVBQVUsZ0JBQWtCLE9BQ3BEdjNDLEVBQU0sb0JBQXNCdTNDLEVBQVUsb0JBQXNCLE9BRTVEdjNDLEVBQU0sZ0JBQWtCLElBQUk0ekMsR0FDNUIsU0FBVyxDQUFDa0UsRUFBV3paLENBQVMsSUFBSyxPQUFPLFFBQVFrWixFQUFVLGNBQWMsRUFDeEV2M0MsRUFBTSxnQkFBZ0IsV0FBV3kzQyxFQUFTLElBQUlLLENBQVMsRUFBR3paLEVBQVcsQ0FBRSxXQUFZLEdBQU0sRUFJN0YsR0FGQXIrQixFQUFNLHNCQUF3QixJQUFJLElBQUksT0FBTyxRQUFRdTNDLEVBQVUsc0JBQXdCLENBQUEsQ0FBRSxDQUFDLEVBRXRGQSxFQUFVLGlCQUFrQixDQUN2QkEsRUFBVSxPQUNYN3VDLEVBQU8sS0FBSywwQ0FBMEMsRUFFMUQsTUFBTThnQyxFQUFRTSxHQUFzQixFQUFHLFlBQVksQ0FDL0MsU0FBU3I0QyxFQUFBOGxELEVBQVUsUUFBVixZQUFBOWxELEVBQWlCLEdBQzFCLE1BQU1NLEVBQUF3bEQsRUFBVSxRQUFWLFlBQUF4bEQsRUFBaUIsY0FDdkIsVUFBU2tCLEVBQUFza0QsRUFBVSxRQUFWLFlBQUF0a0QsRUFBaUIsV0FBWSxPQUN0QyxVQUFVb0MsRUFBQWtpRCxFQUFVLFFBQVYsWUFBQWxpRCxFQUFpQixTQUMzQixnQkFBZUMsRUFBQWlpRCxFQUFVLFFBQVYsWUFBQWppRCxFQUFpQixrQkFBbUIsTUFDL0QsQ0FBUyxFQUNEMEssRUFBTSxrQkFBb0IrM0MsR0FBZ0J2TyxFQUFPK04sRUFBVSxnQkFBZ0IsRUFDM0V2M0MsRUFBTSxPQUFTd3BDLENBQ25CLENBQ0EsT0FBQXhwQyxFQUFNLGtCQUFvQnUzQyxFQUFVLGlCQUNwQ3YzQyxFQUFNLHVCQUNGdTNDLEVBQVUsc0JBQ2R2M0MsRUFBTSx3QkFBMEJ1M0MsRUFBVSx1QkFBdUIsSUFBS3h2QyxJQUFPLENBQ3pFLEdBQUdBLEVBQ0gsTUFBTzB2QyxFQUFTLElBQUkxdkMsRUFBRSxNQUFNLElBQUksQ0FDeEMsRUFBTSxFQUNGL0gsRUFBTSwyQkFDRnUzQyxFQUFVLDBCQUNkdjNDLEVBQU0sNEJBQ0Z1M0MsRUFBVSwyQkFDZHYzQyxFQUFNLGFBQWV1M0MsRUFBVSxZQUMvQnYzQyxFQUFNLGVBQWlCdTNDLEVBQVUsY0FDakN2M0MsRUFBTSxnQkFBa0J1M0MsRUFBVSxlQUFlLElBQUlTLEVBQXdCLEVBQzdFaDRDLEVBQU0sa0JBQW9CdTNDLEVBQVUsa0JBQzlCUyxHQUF5QlQsRUFBVSxpQkFBaUIsRUFDcEQsT0FDTnYzQyxFQUFNLGdCQUFrQnUzQyxFQUFVLGVBQWUsSUFBS3JoRCxHQUFTK2hELEdBQWdCL2hELEVBQU11aEQsQ0FBUSxDQUFDLEVBQzlGejNDLEVBQU0sK0JBQ0Z1M0MsRUFBVSwrQkFBaUMsRUFDL0N2M0MsRUFBTSx1QkFBeUJ1M0MsRUFBVSxzQkFDbkMsTUFBTVcsR0FBNkJULEVBQVV6M0MsRUFBTSxjQUFlQSxFQUFNLFNBQVV1M0MsRUFBVSxxQkFBcUIsRUFDakgsU0FDRi9oRCxFQUFBK2hELEVBQVUsY0FBVixZQUFBL2hELEVBQXVCLFFBQVMsc0JBQ2hDd0ssRUFBTSxhQUFlLENBQ2pCLEtBQU0sb0JBQ04sU0FBVXkzQyxFQUFTLElBQUlGLEVBQVUsWUFBWSxTQUFTLElBQUksQ0FDdEUsR0FFV3YzQyxDQUNYLENBSU8sU0FBUzAzQyxHQUFjUixFQUFjLENBQ3hDLE1BQU0vMkIsRUFBTSxJQUFJLElBQ1ZnNEIsRUFBUSxDQUFDakIsQ0FBWSxFQUMzQixLQUFPaUIsRUFBTSxPQUFTLEdBQUcsQ0FDckIsTUFBTU4sRUFBZU0sRUFBTSxNQUFLLEVBQ2hDLEdBQUksQ0FBQWg0QixFQUFJLElBQUkwM0IsRUFBYSxJQUFJLEVBRzdCLENBQUExM0IsRUFBSSxJQUFJMDNCLEVBQWEsS0FBTUEsQ0FBWSxFQUN2QyxVQUFXMUYsS0FBVzBGLEVBQWEsU0FDM0IxRixhQUFtQmlHLEdBQ2RqNEIsRUFBSSxJQUFJZ3lCLEVBQVEsSUFBSSxHQUNyQmdHLEVBQU0sS0FBS2hHLENBQU8sRUFHakJBLEVBQVEsUUFDUmh5QixFQUFJLElBQUlneUIsRUFBUSxNQUFNLElBQUksR0FDM0JnRyxFQUFNLEtBQUtoRyxFQUFRLEtBQUssR0FJeEMsQ0FDQSxPQUFPaHlCLENBQ1gsQ0FJTyxTQUFTNDNCLEdBQWdCdk8sRUFBTzZPLEVBQWdCLENBQ25ELE1BQU1DLEVBQVdELEVBQWUsVUFDMUJFLEVBQWVGLEVBQWUsY0FDOUJOLEdBQWdCdk8sRUFBTzZPLEVBQWUsYUFBYSxFQUNuRCxPQUNBcGIsRUFBTzZNLEdBQXNCLEVBQUcsV0FBVyxDQUM3QyxPQUFRdU8sRUFBZSxHQUN2QixRQUFTQSxFQUFlLFNBQ3hCLFNBQVVBLEVBQWUsV0FBYSxPQUN0QyxVQUFXQSxFQUFlLFlBQWMsT0FDeEMsUUFBU0EsRUFBZSxVQUFZLE9BQ3BDLEtBQU1DLENBQ2QsRUFBTzlPLENBQUssRUFDUixPQUFBdk0sRUFBSyxhQUFlc2IsRUFDYnRiLENBQ1gsQ0FJTyxTQUFTK2EsR0FBeUJRLEVBQXlCLENBRTlELE1BQU8sQ0FDSCxNQUZVLElBQUk3SCxHQUFNNkgsRUFBd0IsS0FBSyxFQUdqRCxPQUFRQSxFQUF3QixPQUFPLElBQUt0aUQsR0FBUzYrQyxHQUF5QixNQUFNNytDLENBQUksQ0FBQyxFQUN6RixXQUFZc2lELEVBQXdCLFdBQ3BDLGFBQWNBLEVBQXdCLFlBQzlDLENBQ0EsQ0FJTyxTQUFTUCxHQUFnQlEsRUFBZ0JoQixFQUFVLENBQ3RELE9BQVFnQixFQUFlLEtBQUksQ0FDdkIsSUFBSyxzQkFDRCxPQUFPLElBQUl4RixHQUFxQndGLEVBQWUsUUFBU2hCLEVBQVMsSUFBSWdCLEVBQWUsTUFBTSxJQUFJLENBQUMsRUFDbkcsSUFBSyxpQkFDRCxPQUFPLElBQUlyRixHQUFnQnFGLEVBQWUsUUFBU2hCLEVBQVMsSUFBSWdCLEVBQWUsTUFBTSxJQUFJLENBQUMsRUFDOUYsSUFBSyx3QkFDRCxPQUFPLElBQUlwRixHQUFzQm9GLEVBQWUsUUFBU2hCLEVBQVMsSUFBSWdCLEVBQWUsTUFBTSxJQUFJLEVBQUdBLEVBQWUsTUFBTSxFQUMzSCxJQUFLLGlCQUNELE9BQU8sSUFBSW5GLEdBQWlCbUYsRUFBZSxRQUFTaEIsRUFBUyxJQUFJZ0IsRUFBZSxNQUFNLElBQUksQ0FBQyxFQUMvRixJQUFLLG9CQUNELE9BQU8sSUFBSWxGLEdBQW1Ca0YsRUFBZSxRQUFTaEIsRUFBUyxJQUFJZ0IsRUFBZSxNQUFNLElBQUksQ0FBQyxFQUNqRyxJQUFLLHNCQUNELE9BQU8sSUFBSWpGLEdBQXFCaUYsRUFBZSxRQUFTaEIsRUFBUyxJQUFJZ0IsRUFBZSxZQUFZLElBQUksRUFBR2hCLEVBQVMsSUFBSWdCLEVBQWUsWUFBWSxJQUFJLENBQUMsRUFDeEosSUFBSyxxQkFDRCxPQUFPLElBQUk5RSxHQUFvQjhFLEVBQWUsUUFBU2hCLEVBQVMsSUFBSWdCLEVBQWUsTUFBTSxJQUFJLEVBQUdBLEVBQWUsUUFBUSxDQUNuSSxDQUNBLENBSUEsZUFBZVAsR0FBNkJULEVBQVVJLEVBQWNuc0MsRUFBU2d0QyxFQUE2QixDQUN0RyxNQUFNdGEsRUFBVyxNQUFNeVosRUFBYSxZQUFZbnNDLENBQU8sRUFDakRpeUIsRUFBUSxJQUFJLElBQUlTLEVBQ2pCLE9BQVF4Z0MsR0FBU0EsRUFBSyxPQUFTLFVBQVUsRUFDekMsSUFBS0EsR0FBUyxDQUFDQSxFQUFLLEtBQU1BLENBQUksQ0FBQyxDQUFDLEVBQy9CKzZDLEVBQWdCLElBQUksSUFBSXZhLEVBQ3pCLE9BQVF4Z0MsR0FBU0EsRUFBSyxPQUFTLFVBQVUsRUFDekMsSUFBS0EsR0FBUyxDQUFDQSxFQUFLLEtBQU1BLENBQUksQ0FBQyxDQUFDLEVBQy9CZzdDLEVBQWEsSUFBSSxJQUFJeGEsRUFDdEIsT0FBUXhnQyxHQUFTQSxFQUFLLE9BQVMsT0FBTyxFQUN0QyxJQUFLQSxHQUFTLENBQUNBLEVBQUssS0FBTUEsQ0FBSSxDQUFDLENBQUMsRUFDL0JpN0MsRUFBa0IsSUFBSSxJQUFJemEsRUFDM0IsT0FBUXhnQyxHQUFTQSxFQUFLLE9BQVMsYUFBYSxFQUM1QyxJQUFLQSxHQUFTLENBQUNBLEVBQUssS0FBTUEsQ0FBSSxDQUFDLENBQUMsRUFDL0JrN0MsRUFBVyxJQUFJLElBQUlqQixFQUFhLFNBQVMsSUFBS3RqRCxHQUM1Q0EsYUFBaUI2akQsR0FDVixDQUFDN2pELEVBQU0sS0FBTTQ5QyxHQUFRNTlDLENBQUssQ0FBQyxFQUUvQixDQUFDQSxFQUFNLFNBQVVBLENBQUssQ0FDaEMsQ0FBQyxFQUNJMUMsRUFBUyxDQUNYLFNBQVU2bUQsRUFBNEIsU0FBUyxJQUFLeGlELEdBQVMraEQsR0FBZ0IvaEQsRUFBTXVoRCxDQUFRLENBQUMsRUFDNUYsVUFBV2lCLEVBQTRCLFVBQ3ZDLFNBQVVBLEVBQTRCLFNBQVMsSUFBS3ZHLEdBQVksQ0FDNUQsR0FBSSxDQUFDMkcsRUFBUyxJQUFJM0csRUFBUSxRQUFRLFFBQVEsRUFDdEMsTUFBTSxJQUFJM3hDLEVBQVUsV0FBVzJ4QyxFQUFRLFFBQVEsUUFBUSxZQUFZLEVBRXZFLE1BQU8sQ0FDSCxTQUFVQSxFQUFRLFNBQ2xCLFFBQVMyRyxFQUFTLElBQUkzRyxFQUFRLFFBQVEsUUFBUSxDQUM5RCxDQUNRLENBQUMsRUFDRCxVQUFXLE1BQU0sUUFBUSxJQUFJdUcsRUFBNEIsVUFBVSxJQUFJLE1BQU9LLEdBQWlCLENBQzNGLEdBQUksQ0FBQ3BiLEVBQU0sSUFBSW9iLEVBQWEsS0FBSyxJQUFJLEVBQ2pDLE1BQU0sSUFBSXY0QyxFQUFVLFFBQVF1NEMsRUFBYSxLQUFLLElBQUksWUFBWSxFQUVsRSxNQUFPLENBQ0gsU0FBVUEsRUFBYSxTQUN2QixLQUFNcGIsRUFBTSxJQUFJb2IsRUFBYSxLQUFLLElBQUksQ0FDdEQsQ0FDUSxDQUFDLENBQUMsRUFDRixnQkFBaUJMLEVBQTRCLGdCQUFnQixJQUFLTSxHQUFtQixDQUNqRixNQUFNM0gsRUFBVzJILEVBQWUsU0FBUyxLQUN6QyxHQUFJLENBQUNMLEVBQWMsSUFBSXRILENBQVEsRUFDM0IsTUFBTSxJQUFJN3dDLEVBQVUsaUJBQWlCNndDLENBQVEsWUFBWSxFQUU3RCxNQUFPLENBQ0gsU0FBVTJILEVBQWUsU0FDekIsU0FBVUwsRUFBYyxJQUFJdEgsQ0FBUSxDQUNwRCxDQUNRLENBQUMsRUFDRCxjQUFlcUgsRUFBNEIsY0FBZ0IsQ0FBQSxHQUFJLElBQUtPLEdBQWdCLENBQ2hGLE1BQU01SCxFQUFXNEgsRUFBWSxNQUFNLEtBQ25DLEdBQUksQ0FBQ0wsRUFBVyxJQUFJdkgsQ0FBUSxFQUN4QixNQUFNLElBQUk3d0MsRUFBVSxjQUFjNndDLENBQVEsWUFBWSxFQUUxRCxNQUFPLENBQ0gsU0FBVTRILEVBQVksU0FDdEIsTUFBT0wsRUFBVyxJQUFJdkgsQ0FBUSxDQUM5QyxDQUNRLENBQUMsRUFDRCxtQkFBb0JxSCxFQUE0QixtQkFBcUIsQ0FBQSxHQUFJLElBQUtRLEdBQXFCLENBQy9GLE1BQU03SCxFQUFXNkgsRUFBaUIsV0FBVyxLQUM3QyxHQUFJLENBQUNMLEVBQWdCLElBQUl4SCxDQUFRLEVBQzdCLE1BQU0sSUFBSTd3QyxFQUFVLG9CQUFvQjZ3QyxDQUFRLFlBQVksRUFFaEUsTUFBTyxDQUNILFNBQVU2SCxFQUFpQixTQUMzQixXQUFZTCxFQUFnQixJQUFJeEgsQ0FBUSxDQUN4RCxDQUNRLENBQUMsRUFDRCxxQkFBc0JxSCxFQUE0QixxQkFBdUIsQ0FBQSxHQUFJLElBQUtTLElBQXFCLENBQ25HLFlBQWEsSUFBSXhGLEdBQW9Cd0YsRUFBZ0IsWUFDaEQsUUFBU3RCLENBQVksRUFDMUIsUUFBU3NCLEVBQWdCLE9BQ3JDLEVBQVUsQ0FDVixFQUNJLE1BQU8sQ0FDSCxHQUFHdG5ELEVBQ0gsMEJBQTJCLENBQ3ZCLE9BQVFBLEVBQU8sU0FBUyxPQUFTLEdBQzdCQSxFQUFPLFVBQVUsT0FBUyxHQUMxQkEsRUFBTyxvQkFBb0IsT0FBUyxHQUNwQ0EsRUFBTyxnQkFBZ0IsT0FBUyxHQUNoQ0EsRUFBTyxhQUFhLE9BQVMsR0FDN0JBLEVBQU8sa0JBQWtCLE9BQVMsQ0FDMUMsQ0FDUixDQUNBLENDdDNCTyxNQUFNdW5ELEdBQW9CLEdDTzFCLGVBQWVDLEdBQTBCL3NDLEVBQU9ndEMsRUFBc0I1dEMsRUFBUzZ0QyxFQUFZQyxFQUFvQixDQUNsSCxNQUFNQyxFQUFrQixDQUFDNTZDLEVBQU9zaEIsSUFBUXRoQixFQUFNLElBQUszSSxHQUFTLENBQ3hELE1BQU13akQsRUFBUyxnQkFBZ0J4akQsQ0FBSSxFQUNuQyxPQUFJaXFCLEdBQU91NUIsR0FBVSxPQUFPQSxHQUFXLFVBQ25DdjVCLEVBQUksSUFBSXU1QixFQUFReGpELENBQUksRUFFakJ3akQsQ0FDWCxDQUFDLEVBRUtDLEVBQVcsSUFBSSxRQUNmQyxFQUFlelksR0FBb0JvWSxDQUFVLEVBQzdDTSxFQUFvQixDQUFBLEVBRTFCLFVBQVczakQsS0FBUXFqRCxFQUNYcmpELEdBQVEsT0FBT0EsR0FBUyxVQUN4QjJqRCxFQUFrQixLQUFLM2pELENBQUksRUFHbkMsTUFBTTRqRCxFQUFzQjc0QyxHQUFjLENBQ3RDLEdBQUksQ0FBQ0EsR0FBYSxPQUFPQSxHQUFjLFNBQ25DLE9BRUosTUFBTWpFLEVBQVE2OEMsRUFBa0IsVUFBV0UsR0FBYUEsSUFBYTk0QyxDQUFTLEVBQzFFakUsSUFBVSxJQUNWNjhDLEVBQWtCLE9BQU83OEMsRUFBTyxDQUFDLENBRXpDLEVBQ01nOUMsRUFBdUIsSUFBTSxDQUMvQixNQUFNNTNDLEVBQU95M0MsRUFBa0IsTUFBSyxFQUNwQyxPQUFJejNDLEdBQ0FtL0IsR0FBeUJxWSxFQUFjeDNDLENBQUksRUFFeENBLENBQ1gsRUFJTTlHLEVBQU8sQ0FDVCxNQUZvQm0rQyxFQUFnQkYsRUFBWUksQ0FBUSxFQUd4RCxhQUFjSCxDQUN0QixFQUNJLEdBQUksQ0FBQ0YsRUFDRCxNQUFPLENBQ0gsV0FBWWgrQyxFQUNaLFlBQWEsQ0FBQyxHQUFHaStDLENBQVUsRUFDM0IsZUFBZ0IsQ0FBQSxFQUNoQixjQUFlLEVBQzNCLEVBRUksR0FBSSxDQUNBLE1BQU0xbkQsRUFBUyxNQUFNeW5ELEVBQXFCLENBQ3RDLFVBQVdoK0MsRUFDWCxNQUFBZ1IsRUFDQSxRQUFTWixFQUFRLE9BQzdCLENBQVMsRUFDRCxHQUFJLENBQUM3WixHQUFVLENBQUMsTUFBTSxRQUFRQSxFQUFPLEtBQUssRUFDdEMsTUFBTSxJQUFJMk8sRUFBVSwrRUFBK0UsRUFJdkcsTUFBTXk1QyxFQUFjcG9ELEVBQU8sTUFBTSxJQUFLcUUsR0FBUyxDQUMzQyxHQUFJLENBQUNBLEdBQVEsT0FBT0EsR0FBUyxTQUN6QixPQUVKLE1BQU02akQsRUFBV0osRUFBUyxJQUFJempELENBQUksRUFDbEMsR0FBSTZqRCxFQUNBLE9BQUFELEVBQW1CQyxDQUFRLEVBQzNCeFksR0FBeUJxWSxFQUFjRyxDQUFRLEVBQ3hDQSxFQUVYLE1BQU1qbkQsRUFBTW11QyxHQUFxQi9xQyxDQUFJLEVBQy9CZ2tELEVBQW1CN1ksR0FBdUJ1WSxFQUFjOW1ELENBQUcsRUFDakUsR0FBSW9uRCxFQUNBLE9BQUFKLEVBQW1CSSxDQUFnQixFQUM1QkEsRUFFWCxNQUFNQyxFQUFXSCxFQUFvQixFQUNyQyxHQUFJRyxFQUNBLE9BQU9BLENBR2YsQ0FBQyxFQUNLQyxFQUFzQlgsRUFBZ0I1bkQsRUFBTyxLQUFLLEVBQ3hELE1BQU8sQ0FDSCxXQUFZLENBQ1IsTUFBT3VvRCxFQUNQLGFBQWMsT0FBT3ZvRCxFQUFPLGFBQWlCLElBQ3ZDMm5ELEVBQ0EzbkQsRUFBTyxZQUM3QixFQUNZLFlBQUFvb0QsRUFDQSxlQUFnQkcsRUFBb0IsSUFBS2xrRCxHQUFTLGdCQUFnQkEsQ0FBSSxDQUFDLEVBQ3ZFLGNBQWUsRUFDM0IsQ0FDSSxPQUNPNUYsRUFBTyxDQUNWLE1BQUE2NUMsR0FBc0IsQ0FDbEIsUUFBUyxnQ0FDVCxLQUFNLENBQUUsTUFBTyxPQUFPNzVDLENBQUssQ0FBQyxDQUN4QyxDQUFTLEVBQ0tBLENBQ1YsQ0FDSixDQUtPLE1BQU0rcEQsRUFBMEIsQ0FXbkMsWUFBWSxDQUFFLGVBQUF6RCxFQUFnQixtQkFBQUMsR0FBdUIsQ0FWckQ1MkMsRUFBQSx1QkFDQUEsRUFBQSwyQkFFQUEsRUFBQSx3QkFBbUIsSUFFbkJBLEVBQUEsaUJBQVksSUFBSSxTQUVoQkEsRUFBQSxtQkFBYyxJQUFJLFNBRWxCQSxFQUFBLDZCQUF3QixNQUVwQixLQUFLLGVBQWlCMjJDLEdBQWtCLE9BQ3hDLEtBQUssbUJBQXFCQyxHQUFzQixNQUNwRCxDQUlBLGVBQWUsQ0FBRSxjQUFBN1YsRUFBZSxlQUFBVyxFQUFnQixlQUFBMlksQ0FBYyxFQUFLLENBQy9ELEdBQUksS0FBSyxpQkFDTCxPQUVKLE1BQU1DLEVBQWdCeFosR0FBaUJDLENBQWEsRUFDOUN3WixFQUFlRixFQUFlLE9BQVMsRUFDdkNHLEVBQWlCLElBQUksSUFDM0IsVUFBV3hELEtBQVlxRCxFQUNuQixVQUFXcGtELEtBQVErZ0QsRUFBUyxPQUNwQi9nRCxHQUFRLE9BQU9BLEdBQVMsV0FDeEIsS0FBSyxZQUFZLElBQUlBLENBQUksRUFDekJ1a0QsRUFBZSxJQUFJeFosR0FBcUIvcUMsQ0FBSSxDQUFDLEdBSXpELEdBQUlza0QsRUFBYyxDQUNkLFVBQVd0a0QsS0FBUXFrRCxFQUNYcmtELEdBQVEsT0FBT0EsR0FBUyxVQUN4QixLQUFLLFVBQVUsSUFBSUEsQ0FBSSxFQUcvQixLQUFLLGlCQUFtQixHQUN4QixLQUFLLHNCQUF3QixJQUNqQyxDQUNBLE1BQU13a0QsRUFBaUJKLEVBQWVBLEVBQWUsT0FBUyxDQUFDLEVBSS9ELEdBSEksQ0FBQyxLQUFLLGlCQUFrQkksR0FBQSxNQUFBQSxFQUFnQixjQUN4QyxLQUFLLG1CQUFxQkEsRUFBZSxZQUV6Q0YsRUFDQSxVQUFXdGtELEtBQVF5ckMsRUFBZ0IsQ0FDL0IsTUFBTXVSLEVBQVVoOUMsRUFBSyxRQUNyQixHQUFJLENBQUNnOUMsR0FBVyxPQUFPQSxHQUFZLFNBQy9CLFNBRUosTUFBTXlILEVBQWExWixHQUFxQmlTLENBQU8sR0FDM0MsS0FBSyxZQUFZLElBQUlBLENBQU8sR0FBS3VILEVBQWUsSUFBSUUsQ0FBVSxJQUM5RCxLQUFLLFVBQVUsSUFBSXpILENBQU8sQ0FFbEMsQ0FFUixDQUtBLGlCQUFpQmUsRUFBZSxDQUM1QixHQUFLQSxFQUdMLFdBQVcvOUMsS0FBUSs5QyxFQUFjLE9BQ3pCLzlDLEdBQVEsT0FBT0EsR0FBUyxVQUN4QixLQUFLLFlBQVksSUFBSUEsQ0FBSSxFQUc3QixDQUFDLEtBQUssZ0JBQWtCKzlDLEVBQWMsYUFDdEMsS0FBSyxtQkFBcUJBLEVBQWMsWUFFaEQsQ0FNQSxhQUFhalQsRUFBZVcsRUFBZ0IsQ0FDeEMsTUFBTTRYLEVBQWEsQ0FBQSxFQUNuQixHQUFLLEtBQUssaUJBT0QsS0FBSyx1QkFDVixLQUFLLHNCQUFzQixPQUFTLEdBRXBDQSxFQUFXLEtBQUssR0FBRyxLQUFLLHFCQUFxQixNQVZyQixDQUN4QixNQUFNcUIsRUFBZTdaLEdBQWlCQyxDQUFhLEVBRW5EdVksRUFBVyxLQUFLLEdBQUdxQixDQUFZLEVBQy9CLEtBQUssc0JBQXdCQSxFQUFhLE9BQVExa0QsR0FBUyxFQUFRQSxHQUFTLE9BQU9BLEdBQVMsUUFBUSxFQUNwRyxLQUFLLGlCQUFtQixFQUM1QixDQU1BLFVBQVdBLEtBQVF5ckMsRUFBZ0IsQ0FDL0IsR0FBSXpyQyxFQUFLLE9BQVMscUJBQ2QsU0FFSixNQUFNZzlDLEVBQVVoOUMsRUFBSyxRQUNqQixDQUFDZzlDLEdBQVcsT0FBT0EsR0FBWSxVQUcvQixLQUFLLFVBQVUsSUFBSUEsQ0FBTyxHQUFLLEtBQUssWUFBWSxJQUFJQSxDQUFPLEdBRy9EcUcsRUFBVyxLQUFLckcsQ0FBTyxDQUMzQixDQUNBLE9BQU9xRyxDQUNYLENBS0EsZ0JBQWdCMTZDLEVBQU9uSSxFQUFTLENBQzVCLE1BQU1ta0QsRUFBWSxJQUFJLElBQ2hCQyxHQUE0QnBrRCxHQUFBLFlBQUFBLEVBQVMsZ0JBQWlCLEdBQ3REcWtELEdBQTBCcmtELEdBQUEsWUFBQUEsRUFBUyxnQkFBaUIsRUFBUUEsRUFBUSxhQUMxRSxLQUFLLGtCQUFrQm1rRCxFQUFXaDhDLENBQUssRUFDdkMsTUFBTW04QyxFQUFldGtELEdBQUEsWUFBQUEsRUFBUyxhQUMxQnFrRCxHQUEyQkMsR0FDM0IsS0FBSyxrQkFBa0JILEVBQVdHLENBQVksRUFFbEQsS0FBSyw0QkFBNEJILEVBQVcsRUFBUUMsQ0FBMEIsQ0FDbEYsQ0FDQSxrQkFBa0JELEVBQVdoOEMsRUFBTyxDQUNoQyxVQUFXM0ksS0FBUTJJLEVBQ1gsQ0FBQzNJLEdBQVEsT0FBT0EsR0FBUyxVQUFZMmtELEVBQVUsSUFBSTNrRCxDQUFJLElBSTNEMmtELEVBQVUsSUFBSTNrRCxDQUFJLEVBQ2xCLEtBQUssVUFBVSxJQUFJQSxDQUFJLEVBRS9CLENBQ0EsNEJBQTRCMmtELEVBQVdDLEVBQTJCLENBQzlELEdBQUksQ0FBQyxLQUFLLHVCQUNOLEtBQUssc0JBQXNCLFNBQVcsR0FDdENELEVBQVUsT0FBUyxFQUFHLENBQ2xCQyxHQUE2QixLQUFLLHdCQUNsQyxLQUFLLHNCQUF3QixNQUVqQyxNQUNKLENBQ0EsS0FBSyxzQkFBd0IsS0FBSyxzQkFBc0IsT0FBUTVrRCxHQUFTLENBQUMya0QsRUFBVSxJQUFJM2tELENBQUksQ0FBQyxFQUN6RixLQUFLLHNCQUFzQixTQUFXLEVBQ3RDLEtBQUssc0JBQXdCLEtBRXhCNGtELElBQ0wsS0FBSyxzQkFBd0IsS0FFckMsQ0FDSixDQ3ZRTyxNQUFNRyxHQUF5QixJQUFNLENBQ3hDLElBQUlDLEVBQVUsR0FDVkMsRUFBUyxHQUNUN3FELEVBQ0FxNEMsRUFDSixNQUFNeVMsRUFBWTNTLEdBQVEsQ0FDdEIwUyxFQUFTLEdBQ1Q3cUQsRUFBUW00QyxFQUNSeVMsRUFBVSxFQUNkLEVBOEJBLE1BQU8sQ0FDSCxJQUFJLFNBQVUsQ0FDVixPQUFPQSxDQUNYLEVBQ0EsSUFBSSxRQUFTLENBQ1QsT0FBT0MsQ0FDWCxFQUNBLElBQUksT0FBUSxDQUNSLE9BQU83cUQsQ0FDWCxFQUNBLFlBQWEsSUFBTSxDQUNmNHFELEVBQVUsRUFDZCxFQUNBLFdBMUNnQjdqQixHQUFhLENBQ3hCQSxJQUdMNmpCLEVBQVUsR0FDVnZTLEVBQVV0UixFQUNMLEtBQU03WCxHQUFZQSxDQUFPLEVBQ3pCLE1BQU9pcEIsSUFDUjJTLEVBQVMzUyxDQUFHLEVBRUwsQ0FBQSxFQUNWLEVBQ0ksUUFBUSxJQUFNLENBQ2Z5UyxFQUFVLEVBQ2QsQ0FBQyxFQUNMLEVBNEJJLFNBQUFFLEVBQ0EsYUE1QmlCLElBQU0sQ0FDdkIsR0FBSTlxRCxFQUNBLE1BQU1BLENBRWQsRUF5QkksZ0JBeEJvQixNQUFPb0csR0FBWSxDQUl2QyxHQUhJaXlDLEdBQ0EsTUFBTUEsRUFFTnI0QyxHQUFTLEVBQUNvRyxHQUFBLE1BQUFBLEVBQVMsZ0JBQ25CLE1BQU1wRyxDQUVkLENBa0JKLENBQ0EsRUFDQSxlQUFlK3FELEdBQTBCM2tELEVBQVMsQ0FDOUMsS0FBTSxDQUFFLE1BQUFzSixFQUFPLFdBQUFpSyxFQUFZLGNBQUFxeEMsRUFBZSxjQUFBQyxFQUFlLFdBQUFDLEVBQVksZ0JBQUFDLEVBQWlCLFFBQUFDLENBQU8sRUFBTWhsRCxFQUNuRyxHQUFJLENBQ0EsTUFBTThvQixFQUFVLE1BQU0sUUFBUSxJQUFJdlYsRUFBVyxJQUFJLE1BQU8weEMsR0FDN0NwTSxHQUFrQixNQUFPdFMsR0FBUyxDQUNyQyxNQUFNcHJDLEVBQVMsTUFBTThwRCxFQUFVLElBQUlMLENBQWEsRUFDaEQsT0FBQXJlLEVBQUssU0FBUyxVQUFZcHJDLEVBQU8sT0FBTyxrQkFDakNBLENBQ1gsRUFBRyxDQUFFLEtBQU0sQ0FBRSxLQUFNOHBELEVBQVUsSUFBSSxDQUFFLEVBQUkzN0MsRUFBTSxpQkFBaUIsQ0FDakUsQ0FBQyxFQUNGdTdDLEVBQWMsS0FBSyxHQUFHLzdCLENBQU8sRUFDN0IsVUFBVzN0QixLQUFVMnRCLEVBQ2IzdEIsRUFBTyxPQUFPLG9CQUNWbU8sRUFBTSxtQkFDTkEsRUFBTSxrQkFBa0IsU0FBUyxDQUM3QixRQUFTLCtCQUNULEtBQU0sQ0FBRSxVQUFXbk8sRUFBTyxVQUFVLElBQUksQ0FDaEUsQ0FBcUIsRUFFTDJwRCxFQUFXM3BELENBQU0sR0FHekIsT0FBTzJ0QixDQUNYLE9BQ09sdkIsRUFBTyxDQUNWLEdBQUltckQsRUFBZ0JuckQsQ0FBSyxFQUNyQixNQUFNQSxFQUVWLE9BQUFvckQsRUFBUXByRCxDQUFLLEVBQ04sQ0FBQSxDQUNYLENBQ0osQ0FDTyxTQUFTc3JELEdBQStCNTdDLEVBQU82N0MsRUFBa0IsQ0FDcEUsT0FBT0EsRUFBaUIsT0FBTzc3QyxFQUFNLGNBQWMsZ0JBQWdCLElBQUkyeUMsRUFBb0IsQ0FBQyxDQUNoRyxDQUNPLFNBQVNtSixHQUFxQjd4QyxFQUFZLENBQzdDLE1BQU04eEMsRUFBVyxDQUFBLEVBQ1hDLEVBQVcsQ0FBQSxFQUNqQixVQUFXTCxLQUFhMXhDLEVBQ2hCMHhDLEVBQVUsZ0JBQWtCLEdBQzVCSSxFQUFTLEtBQUtKLENBQVMsRUFHdkJLLEVBQVMsS0FBS0wsQ0FBUyxFQUcvQixNQUFPLENBQUUsU0FBQUksRUFBVSxTQUFBQyxDQUFRLENBQy9CLENBQ08sZUFBZUMsR0FBbUJqOEMsRUFBT2lLLEVBQVksQ0FDeEQsR0FBSUEsRUFBVyxTQUFXLEVBQ3RCLE1BQU8sQ0FBQSxFQUVYLE1BQU1xeEMsRUFBZ0IsQ0FDbEIsTUFBT3Q3QyxFQUFNLGNBQ2IsTUFBT0EsRUFBTSxlQUNiLFFBQVNBLEVBQU0sUUFDdkIsRUFDSSxPQUFPLE1BQU1xN0MsR0FBMEIsQ0FDbkMsTUFBQXI3QyxFQUNBLFdBQUFpSyxFQUNBLGNBQUFxeEMsRUFDQSxjQUFldDdDLEVBQU0sdUJBQ3JCLFdBQWFuTyxHQUFXLENBQ3BCLE1BQU0sSUFBSThPLEdBQWdDLDhCQUE4QixLQUFLLFVBQVU5TyxFQUFPLE9BQU8sVUFBVSxDQUFDLEdBQUlBLEVBQVFtTyxDQUFLLENBQ3JJLEVBQ0EsZ0JBQWtCMVAsR0FBVUEsYUFBaUJxUSxHQUM3QyxRQUFVclEsR0FBVSxDQUVoQixNQUFBMFAsRUFBTSxlQUNBLElBQUlTLEdBQXdCLHVDQUF1Q25RLENBQUssR0FBSUEsRUFBTzBQLENBQUssQ0FDbEcsQ0FDUixDQUFLLENBQ0wsQ0FDTyxlQUFlazhDLEdBQW9CbDhDLEVBQU9tOEMsRUFBd0IvM0MsRUFBUSxDQUM3RSxNQUFNNkYsRUFBYWt5QyxFQUF1QixPQUFPbjhDLEVBQU0sY0FBYyxpQkFBaUIsSUFBSTh5QyxFQUFxQixDQUFDLEVBQ2hILEdBQUk3b0MsRUFBVyxTQUFXLEVBQ3RCLE9BRUosTUFBTW15QyxFQUFjcDhDLEVBQU0sY0FBYyxtQkFBbUJvRSxDQUFNLEVBQzNEaTRDLEVBQVkzYSxHQUFhLEdBQUkxaEMsRUFBTSxlQUFlLEVBQ2xEczdDLEVBQWdCLENBQ2xCLE1BQU90N0MsRUFBTSxjQUNiLFlBQUFvOEMsRUFDQSxRQUFTcDhDLEVBQU0sU0FDZixRQUFTLENBQ0wsY0FBZUEsRUFBTSxrQkFDckIsT0FBUXE4QyxDQUNwQixDQUNBLEVBQ0ksTUFBTWhCLEdBQTBCLENBQzVCLE1BQUFyN0MsRUFDQSxXQUFBaUssRUFDQSxjQUFBcXhDLEVBQ0EsY0FBZXQ3QyxFQUFNLHdCQUNyQixXQUFhbk8sR0FBVyxDQUNwQixNQUFNLElBQUkrTyxHQUFpQywrQkFBK0IsS0FBSyxVQUFVL08sRUFBTyxPQUFPLFVBQVUsQ0FBQyxHQUFJQSxFQUFRbU8sQ0FBSyxDQUN2SSxFQUNBLGdCQUFrQjFQLEdBQVVBLGFBQWlCc1EsR0FDN0MsUUFBVXRRLEdBQVUsQ0FDaEIsTUFBTSxJQUFJbVEsR0FBd0Isd0NBQXdDblEsQ0FBSyxHQUFJQSxFQUFPMFAsQ0FBSyxDQUNuRyxDQUNSLENBQUssQ0FDTCxDQ2xLQSxNQUFNczhDLEdBQXVCQyxHQUFhLE9BQ3RDLE1BQU1DLEVBQWVELEdBQUEsWUFBQUEsRUFBVSxhQUMvQixNQUFPLEdBQVFDLEdBQUEsTUFBQUEsRUFBYyxZQUN6Qi9xRCxFQUFBK3FELEdBQUEsWUFBQUEsRUFBYyxPQUFkLE1BQUEvcUQsRUFBb0IsV0FDcEIrcUQsR0FBQSxNQUFBQSxFQUNNLGlCQUNkLEVBS08sU0FBU0MsR0FBWUMsRUFBWUMsRUFBZ0IsQ0FDcEQsT0FBSyxPQUFPRCxHQUFlLFVBQ3ZCQSxJQUFldEUsR0FBTSwyQkFDckJzRSxFQUNPQSxFQUVKQyxHQUFrQkQsR0FBY3RFLEdBQU0seUJBQ2pELENBS08sU0FBU3dFLEdBQXFCdHdDLEVBQU91d0MsRUFBZ0JDLEVBQWUsQ0FDdkUsT0FBSXh3QyxFQUFNLGlCQUFtQnV3QyxFQUFlLGFBQWF2d0MsQ0FBSyxFQUNuRCxDQUFFLEdBQUd3d0MsRUFBZSxXQUFZLE1BQVMsRUFFN0NBLENBQ1gsQ0FPTyxTQUFTQyxHQUF5Q0MsRUFBbUJDLEVBQW9CQyxFQUFhSixFQUFlSyxFQUFtQixDQUMzSSxNQUFNbk4sRUFBWW1OLElBQ2IsT0FBT0QsR0FBZ0IsU0FDbEJBLEdBQ0NBLEdBQUEsWUFBQUEsRUFDRyxTQUFTQSxHQUFBLFlBQUFBLEVBQWEsT0FDOUJFLEVBQXVCLE9BQU9wTixHQUFjLFNBQzVDLENBQUNELEdBQThCQyxDQUFTLEVBQ3hDLEdBQ0FxTixFQUFrQmYsR0FBb0JXLENBQWtCLEdBQzFEWCxHQUFvQlEsQ0FBYSxFQUNyQyxPQUFJM00sR0FBYSxHQUNiNk0sR0FDQUksR0FDQUMsRUFDT0MsR0FBc0JSLENBQWEsRUFFdkNBLENBQ1gsQ0FDQSxTQUFTUSxHQUFzQlIsRUFBZSxhQUMxQyxNQUFNUyxFQUFxQlQsRUFBYyxhQUNuQyxDQUFFLEdBQUdBLEVBQWMsWUFBWSxFQUMvQixPQUNGUyxJQUNJQSxFQUFtQixNQUNuQixPQUFPQSxFQUFtQixNQUFTLFdBQ25DQSxFQUFtQixLQUFPLENBQUUsR0FBR0EsRUFBbUIsSUFBSSxFQUN0RCxPQUFPQSxFQUFtQixLQUFLLFdBRW5DLE9BQU9BLEVBQW1CLFVBQzFCLE9BQU9BLEVBQW1CLGtCQUU5QixNQUFNQyxFQUFzQixDQUN4QixHQUFHVixFQUNILGFBQWNTLENBQ3RCLEVBQ0ksT0FBSVQsRUFBYyxZQUNkVSxFQUFvQixVQUFZLENBQUUsR0FBR1YsRUFBYyxTQUFTLEdBRTVEQSxFQUFjLE9BQ2RVLEVBQW9CLEtBQU8sQ0FBRSxHQUFHVixFQUFjLElBQUksSUFFdERyckQsRUFBTytyRCxFQUFvQixlQUEzQixhQUFBL3JELEVBQXlDLFdBQ3pDd0IsR0FBT2xCLEVBQUF5ckQsRUFBb0IsZUFBcEIsWUFBQXpyRCxFQUFrQyxPQUF6QyxhQUFBa0IsRUFBK0MsV0FDL0NvQyxFQUFPbW9ELEVBQW9CLGVBQTNCLGFBQUFub0QsRUFBeUMsaUJBQ3JDbW9ELEVBQW9CLFlBQ3BCLE9BQU9BLEVBQW9CLFVBQVUsT0FDckMsT0FBT0EsRUFBb0IsVUFBVSxTQUVyQ0EsRUFBb0IsTUFDcEIsT0FBT0EsRUFBb0IsS0FBSyxVQUU3QkEsQ0FDWCxDQ3ZGQSxTQUFTQyxHQUFvQjcvQyxFQUFNakUsRUFBU2tWLEVBQU0sQ0FDOUMsR0FBSSxDQUFDalIsRUFDRCxNQUFBdXNDLEdBQXNCLENBQ2xCLFFBQUF4d0MsRUFDQSxLQUFBa1YsQ0FDWixDQUFTLEVBQ0ssSUFBSXpPLEdBQW1CekcsQ0FBTyxFQUV4QyxPQUFPaUUsQ0FDWCxDQUNBLFNBQVM4L0MsR0FBcUIsQ0FBRSxPQUFBdDVDLEVBQVEsS0FBQXhHLEVBQU0sTUFBQTBPLEVBQU8sYUFBQWxWLEVBQWMsVUFBQXVtRCxFQUFXLE1BQUE5K0MsRUFBTyxVQUFBKytDLEVBQVcsUUFBQUMsRUFBUyxZQUFBQyxDQUFXLEVBQUssQ0FDckgsTUFBTUMsRUFBZU4sR0FBb0I3L0MsRUFBTXhHLEVBQWN1bUQsQ0FBUyxFQUN0RTkrQyxFQUFNLEtBQUssSUFBSXUwQyxHQUFnQmh2QyxFQUFRa0ksQ0FBSyxDQUFDLEVBQzdDc3hDLEVBQVUsS0FBS0csRUFBYSxJQUFJLEVBQ2hDRixFQUFRLEtBQUtDLEVBQVlDLENBQVksQ0FBQyxDQUMxQyxDQUNBLFNBQVNDLEdBQXlCQyxFQUFVQyxFQUFZQyxFQUFhN3hDLEVBQU8sQ0FDeEUsTUFBTTZsQyxFQUFVK0wsRUFBVyxJQUFJRCxFQUFTLElBQUksRUFDNUMsR0FBSTlMLEVBQ0EsTUFBTyxDQUFFLEtBQU0sVUFBVyxRQUFBQSxDQUFPLEVBRXJDLE1BQU1pTSxFQUFlRCxFQUFZLElBQUlGLEVBQVMsSUFBSSxFQUNsRCxHQUFJLENBQUNHLEVBQWMsQ0FDZixNQUFNemtELEVBQVUsUUFBUXNrRCxFQUFTLElBQUksdUJBQXVCM3hDLEVBQU0sSUFBSSxJQUN0RSxNQUFBNjlCLEdBQXNCLENBQ2xCLFFBQUF4d0MsRUFDQSxLQUFNLENBQ0YsVUFBV3NrRCxFQUFTLEtBQ3BCLFdBQVkzeEMsRUFBTSxJQUNsQyxDQUNBLENBQVMsRUFDSyxJQUFJbE0sR0FBbUJ6RyxDQUFPLENBQ3hDLENBQ0EsTUFBTyxDQUFFLEtBQU0sV0FBWSxLQUFNeWtELENBQVksQ0FDakQsQ0FLTyxTQUFTQyxHQUFxQnBLLEVBQWUzbkMsRUFBT3F4QixFQUFPbWIsRUFBVSxPQUN4RSxNQUFNajZDLEVBQVEsQ0FBQSxFQUNSeS9DLEVBQWMsQ0FBQSxFQUNkQyxFQUFlLENBQUEsRUFDZkMsRUFBcUIsQ0FBQSxFQUNyQkMsRUFBa0IsQ0FBQSxFQUNsQkMsRUFBdUIsQ0FBQSxFQUN2QkMsRUFBeUIsQ0FBQSxFQUN6QmYsRUFBWSxDQUFBLEVBQ1pNLEVBQWEsSUFBSSxJQUFJcEYsRUFBUyxJQUFLeDBDLEdBQU0sQ0FBQ0EsRUFBRSxTQUFVQSxDQUFDLENBQUMsQ0FBQyxFQUV6RDY1QyxFQUFjLElBQUksSUFBSXhnQixFQUN2QixPQUFRNWYsR0FBTUEsRUFBRSxPQUFTLFVBQVUsRUFDbkMsSUFBS0EsR0FBTSxDQUFDQSxFQUFFLEtBQU1BLENBQUMsQ0FBQyxDQUFDLEVBQ3RCNmdDLEVBQWVqaEIsRUFBTSxLQUFNNWYsR0FBTUEsRUFBRSxPQUFTLFVBQVUsRUFDdEQ4Z0MsRUFBWWxoQixFQUFNLEtBQU01ZixHQUFNQSxFQUFFLE9BQVMsT0FBTyxFQUNoRCtnQyxFQUFpQm5oQixFQUFNLEtBQU01ZixHQUFNQSxFQUFFLE9BQVMsYUFBYSxFQUMzRGdoQyxFQUFhLElBQUksSUFBSXBoQixFQUN0QixPQUFRNWYsR0FBQyxPQUFLLE9BQUFBLEVBQUUsT0FBUyxpQkFBaUJ0c0IsRUFBQXNzQixFQUFFLGVBQUYsWUFBQXRzQixFQUFnQixRQUFTLE1BQUssRUFDeEUsSUFBS3NzQixHQUFNQSxDQUFDLEVBQ1osSUFBS0EsR0FBTSxDQUFDQSxFQUFFLGFBQWEsYUFBY0EsQ0FBQyxDQUFDLENBQUMsRUFDakQsVUFBVzNaLEtBQVU2dkMsRUFBYyxPQUFRLENBQ3ZDLEdBQUk3dkMsRUFBTyxPQUFTLFVBQ1pBLEVBQU8sT0FBUyxhQUNoQnZGLEVBQU0sS0FBSyxJQUFJbzBDLEdBQXFCN3VDLEVBQVFrSSxDQUFLLENBQUMsVUFHakRsSSxFQUFPLE9BQVMsbUJBQW9CLENBQ3pDdkYsRUFBTSxLQUFLLElBQUl1MEMsR0FBZ0JodkMsRUFBUWtJLENBQUssQ0FBQyxFQUM3QyxNQUFNK2tDLEVBQVdqdEMsRUFBTyxLQUV4QixHQURBdzVDLEVBQVUsS0FBS3ZNLENBQVEsSUFDbkI1L0MsRUFBQTJTLEVBQU8sZUFBUCxZQUFBM1MsRUFBcUIsUUFBUyx3QkFDOUIyUyxFQUFPLE9BQVMsdUJBQXdCLENBRXhDLE1BQU1vNEMsRUFBZXA0QyxFQUFPLGFBQ3RCNDZDLEVBQWlCeEMsRUFBYSxhQUM5QnlDLEVBQWdCRixFQUFXLElBQUlDLENBQWMsRUFDbkQsR0FBSSxPQUFPQyxFQUFrQixJQUFhLENBQ3RDLE1BQU10bEQsR0FBVSxlQUFlcWxELENBQWMseUJBQXlCMXlDLEVBQU0sSUFBSSxJQUNoRixNQUFBNjlCLEdBQXNCLENBQ2xCLFFBQUF4d0MsR0FDQSxLQUFNLENBQUUsaUJBQWtCcWxELENBQWMsQ0FDaEUsQ0FBcUIsRUFDSyxJQUFJNStDLEdBQW1CekcsRUFBTyxDQUN4QyxDQUdBLE1BQU1nNEMsRUFBZSxJQUFJZ0MsR0FBb0IsQ0FDekMsS0FBTSxtQkFFTixLQUFNNkksRUFBYSxLQUNuQixHQUFJQSxFQUFhLEdBQ2pCLE9BQVEsY0FDUixhQUFBQSxDQUNwQixFQUFtQmx3QyxDQUFLLEVBQ1JxeUMsRUFBdUIsS0FBSyxDQUN4QixZQUFhaE4sRUFDYixRQUFTc04sQ0FDN0IsQ0FBaUIsRUFDSUEsRUFBYyxhQUFhLGFBRzVCcGdELEVBQU0sS0FBSzh5QyxDQUFZLENBRS9CLENBQ0osTUFDU3Z0QyxFQUFPLE9BQVMsWUFDckJ2RixFQUFNLEtBQUssSUFBSXkwQyxHQUFpQmx2QyxFQUFRa0ksQ0FBSyxDQUFDLEVBRXpDbEksRUFBTyxPQUFTLGdCQUNyQnM1QyxHQUFxQixDQUNqQixPQUFBdDVDLEVBQ0EsS0FBTXc2QyxFQUNOLE1BQUF0eUMsRUFDQSxhQUFjLDBEQUNkLFVBQVcsQ0FBRSxXQUFZQSxFQUFNLElBQUksRUFDbkMsTUFBQXpOLEVBQ0EsVUFBQSsrQyxFQUNBLFFBQVNZLEVBQ1QsWUFBY1QsSUFBa0IsQ0FDNUIsU0FBVTM1QyxFQUNWLFNBQVUyNUMsQ0FDOUIsRUFDQSxDQUFhLEVBRUkzNUMsRUFBTyxPQUFTLGFBQ3JCczVDLEdBQXFCLENBQ2pCLE9BQUF0NUMsRUFDQSxLQUFNeTZDLEVBQ04sTUFBQXZ5QyxFQUNBLGFBQWMsb0RBQ2QsVUFBVyxDQUFFLFdBQVlBLEVBQU0sSUFBSSxFQUNuQyxNQUFBek4sRUFDQSxVQUFBKytDLEVBQ0EsUUFBU2EsRUFDVCxZQUFjVixJQUFrQixDQUM1QixTQUFVMzVDLEVBQ1YsTUFBTzI1QyxDQUMzQixFQUNBLENBQWEsRUFFSTM1QyxFQUFPLE9BQVMsb0JBQ3JCczVDLEdBQXFCLENBQ2pCLE9BQUF0NUMsRUFDQSxLQUFNMDZDLEVBQ04sTUFBQXh5QyxFQUNBLGFBQWMsaUVBQ2QsVUFBVyxDQUFFLFdBQVlBLEVBQU0sSUFBSSxFQUNuQyxNQUFBek4sRUFDQSxVQUFBKytDLEVBQ0EsUUFBU2MsRUFDVCxZQUFjWCxJQUFrQixDQUM1QixTQUFVMzVDLEVBQ1YsV0FBWTI1QyxDQUNoQyxFQUNBLENBQWEsRUFNTCxHQUFJMzVDLEVBQU8sT0FBUyxnQkFDaEIsU0FFSnc1QyxFQUFVLEtBQUt4NUMsRUFBTyxJQUFJLEVBQzFCLE1BQU1yRixFQUFXaS9DLEdBQXlCNTVDLEVBQVE4NUMsRUFBWUMsRUFBYTd4QyxDQUFLLEVBQzVFdk4sRUFBUyxPQUFTLFdBQ2xCRixFQUFNLEtBQUssSUFBSTAwQyxHQUFtQm52QyxFQUFRa0ksQ0FBSyxDQUFDLEVBQ2hEZ3lDLEVBQVksS0FBSyxDQUNiLFNBQVVsNkMsRUFDVixRQUFTckYsRUFBUyxPQUNsQyxDQUFhLElBR0RGLEVBQU0sS0FBSyxJQUFJdTBDLEdBQWdCaHZDLEVBQVFrSSxDQUFLLENBQUMsRUFDN0NpeUMsRUFBYSxLQUFLLENBQ2QsU0FBVW42QyxFQUNWLEtBQU1yRixFQUFTLElBQy9CLENBQWEsRUFFVCxDQUNBLE1BQU8sQ0FDSCxTQUFVRixFQUNWLFNBQVV5L0MsRUFDVixVQUFXQyxFQUNYLGdCQUFpQkMsRUFDakIsYUFBY0MsRUFDZCxrQkFBbUJDLEVBQ25CLG9CQUFxQkMsRUFDckIsVUFBV2YsRUFDWCwwQkFBMkIsQ0FDdkIsT0FBUVUsRUFBWSxPQUFTLEdBQ3pCQyxFQUFhLE9BQVMsR0FDdEJJLEVBQXVCLE9BQVMsR0FDaENILEVBQW1CLE9BQVMsR0FDNUJDLEVBQWdCLE9BQVMsR0FDekJDLEVBQXFCLE9BQVMsQ0FDdEMsQ0FDUixDQUNBLENDdE1PLE1BQU1RLEdBQWdCNXVELEdBQVUsQ0FDbkMsR0FBSSxDQUFDQSxFQUNELE1BQU8sR0FFWCxHQUFJQSxhQUFpQixPQUFTQSxFQUFNLE9BQVMsYUFDekMsTUFBTyxHQUVYLE1BQU02dUQsRUFBbUIsT0FBTyxhQUFpQixJQUFjLGFBQWUsT0FDOUUsTUFBSSxHQUFBQSxHQUNBN3VELGFBQWlCNnVELEdBQ2pCN3VELEVBQU0sT0FBUyxhQUl2QixFQUNBLFNBQVM4dUQsR0FBMEJscEQsRUFBTSxDQUNyQyxHQUFJQSxhQUFnQis4QyxHQUNoQixNQUFPLHlCQUVYLEdBQUkvOEMsYUFBZ0JxOUMsR0FDaEIsTUFBTyxvQkFFWCxHQUFJcjlDLGFBQWdCczlDLEdBQ2hCLE1BQU8sbUJBRVgsR0FBSXQ5QyxhQUFnQms5QyxHQUNoQixNQUFPLGNBRVgsR0FBSWw5QyxhQUFnQm05QyxHQUNoQixNQUFPLGNBRVgsR0FBSW45QyxhQUFnQm85QyxHQUNoQixNQUFPLHlCQUVYLEdBQUlwOUMsYUFBZ0J5OUMsR0FDaEIsTUFBTyx5QkFHZixDQUNBLFNBQVMwTCxHQUEwQnh0RCxFQUFRcUUsRUFBTSxDQUM3QyxNQUFNb3BELEVBQVdGLEdBQTBCbHBELENBQUksRUFDL0MsR0FBSSxDQUFDb3BELEVBQVUsQ0FDWDUyQyxFQUFPLEtBQUssc0JBQXVCeFMsQ0FBSSxFQUN2QyxNQUNKLENBQ0FyRSxFQUFPLFNBQVMsSUFBSTRnRCxHQUFtQjZNLEVBQVVwcEQsQ0FBSSxDQUFDLENBQzFELENBQ08sU0FBU3FwRCxHQUEyQjF0RCxFQUFRZ04sRUFBTyxDQUN0RCxVQUFXM0ksS0FBUTJJLEVBQ2Z3Z0QsR0FBMEJ4dEQsRUFBUXFFLENBQUksQ0FFOUMsQ0FDTyxTQUFTc3BELEdBQW1CM3RELEVBQVE2YixFQUFNaFgsRUFBUyxDQUN0RCxNQUFNK29ELEVBQWUvb0QsR0FBQSxZQUFBQSxFQUFTLFVBQzlCLFVBQVdSLEtBQVF3WCxFQUFLLGFBQ2hCK3hDLEdBQUEsTUFBQUEsRUFBYyxJQUFJdnBELElBR3RCbXBELEdBQTBCeHRELEVBQVFxRSxDQUFJLENBRTlDLENDL0RPLFNBQVN3cEQsR0FBd0NDLEVBQVMsQ0FDN0QsTUFBUSxDQUFDLENBQUNBLEdBQ04sT0FBT0EsRUFBUSxlQUNYLFVBQ1osQ0NHTyxTQUFTQyxHQUFnQ2xwRCxFQUFTLENBQ3JELEtBQU0sQ0FBRSxRQUFBaXBELENBQU8sRUFBS2pwRCxFQUNwQixHQUFJLENBQUNpcEQsRUFDRCxPQUVKLE1BQU1FLENBQThCLENBUWhDLGFBQWMsQ0FQZDUvQyxFQUFBLGdCQUNBQSxFQUFBLGdDQUNBQSxFQUFBLHFCQUNBQSxFQUFBLHlCQUNBQSxFQUFBLHlCQUNBQSxFQUFBLDJCQUNBQSxFQUFBLHNCQUFpQixJQVdqQkEsRUFBQSx3QkFBb0JwQixHQUFVLENBQzFCLE1BQU1paEQsRUFBZWpoRCxHQUFTLENBQUEsRUFDOUIsS0FBSyxpQkFBbUJpaEQsRUFBYSxJQUFLNXBELEdBQVMsZ0JBQWdCQSxDQUFJLENBQUMsRUFDeEUsS0FBSyxtQkFBcUIsSUFBSSxJQUM5QixVQUFXQSxLQUFRNHBELEVBQWMsQ0FDN0IsTUFBTWh0RCxFQUFNbXVDLEdBQXFCL3FDLENBQUksRUFDckMsS0FBSyxtQkFBbUIsSUFBSXBELEdBQU0sS0FBSyxtQkFBbUIsSUFBSUEsQ0FBRyxHQUFLLEdBQUssQ0FBQyxDQUNoRixDQUNKLEdBQ0FtTixFQUFBLHVCQUFrQixDQUFDZzZDLEVBQWE4RixJQUFrQixDQUM5QyxNQUFNQyxFQUFnQixLQUFLLG1CQUMzQixHQUFJRCxJQUFrQixPQUFXLENBQzdCLEdBQUksQ0FBQ0MsRUFBZSxDQUNoQixLQUFLLGlCQUFtQkMsR0FBV0YsQ0FBYSxFQUNoRCxNQUNKLENBQ0EsTUFBTUcsRUFBZUMsR0FBZ0MsQ0FDakQsY0FBQUgsRUFDQSxZQUFBL0YsRUFDQSxjQUFBOEYsRUFDQSxpQkFBa0IsS0FBSyxnQkFDM0MsQ0FBaUIsRUFDR0csSUFBaUIsU0FDakIsS0FBSyxpQkFBbUJBLEdBRTVCLE1BQ0osQ0FDQSxLQUFLLGlCQUFtQkUsR0FBZ0MsQ0FDcEQsY0FBQUosRUFDQSxZQUFBL0YsRUFDQSxpQkFBa0IsS0FBSyxnQkFDdkMsQ0FBYSxDQUNMLEdBQ0FoNkMsRUFBQSw4QkFBeUIsSUFBTSxDQUMzQixHQUFJLEtBQUssbUJBQXFCLE9BQzFCLE9BQU8sS0FBSyxpQkFFaEIsR0FBSSxNQUFLLHdCQUdULE9BQU8sS0FBSyxnQkFDaEIsR0FDQUEsRUFBQSw2QkFBeUJvZ0QsR0FBOEIsQ0FDbkQsR0FBSSxDQUFDLEtBQUssU0FBV0EsRUFDakIsT0FFSixNQUFNQyxFQUFlLEtBQUssY0FBZ0JDLEdBQzFDLE1BQU8sVUFBWSxDQUNmLEdBQUksS0FBSyxlQUNMLE9BRUosTUFBTUMsRUFBaUIsS0FBSyx1QkFBc0IsRUFDOUMsQ0FBQ0EsR0FBa0JBLEVBQWUsU0FBVyxJQUdqRCxLQUFLLGVBQWlCLEdBQ3RCLE1BQU1GLEVBQWEsS0FBSyxRQUFTRSxDQUFjLEVBQ25ELENBQ0osR0FuRUksS0FBSyxRQUFVOXBELEVBQVEsUUFDdkIsS0FBSyx3QkFBMEJBLEVBQVEsd0JBQ3ZDLEtBQUssYUFBZUEsRUFBUSxhQUM1QixLQUFLLGlCQUFtQkEsRUFBUSxrQkFBb0IsQ0FBQSxFQUFLLE9BQ3pELEtBQUssaUJBQW1CLE9BQ3hCLEtBQUssbUJBQXFCQSxFQUFRLGtCQUM1QixJQUFJLElBQ0osTUFDVixDQTREUixDQUNJLE9BQU8sSUFBSW1wRCxDQUNmLENBQ0EsU0FBU0ksR0FBV3BoRCxFQUFPLENBQ3ZCLE9BQU9BLEVBQU0sSUFBSzNJLEdBQVMsZ0JBQWdCQSxDQUFJLENBQUMsQ0FDcEQsQ0FDQSxTQUFTdXFELEdBQTRCeEcsRUFBYSxDQUM5QyxNQUFNeUcsRUFBeUIsSUFBSSxRQUNuQyxVQUFXM21ELEtBQVVrZ0QsRUFBYSxDQUM5QixHQUFJLENBQUNsZ0QsR0FBVSxPQUFPQSxHQUFXLFNBQzdCLFNBRUosTUFBTTRtRCxHQUFhRCxFQUF1QixJQUFJM21ELENBQU0sR0FBSyxHQUFLLEVBQzlEMm1ELEVBQXVCLElBQUkzbUQsRUFBUTRtRCxDQUFTLENBQ2hELENBQ0EsT0FBT0QsQ0FDWCxDQUNBLFNBQVNQLEdBQWdDenBELEVBQVMsQ0FDOUMsS0FBTSxDQUFFLGNBQUFzcEQsRUFBZSxZQUFBL0YsRUFBYSxjQUFBOEYsRUFBZSxpQkFBQWEsQ0FBZ0IsRUFBS2xxRCxFQUNsRW1xRCxFQUFtQixDQUFBLEVBQ25CSCxFQUF5QkQsR0FBNEJ4RyxDQUFXLEVBQ2hFNkcsRUFBNkIsSUFBTSxDQUNyQyxTQUFXLENBQUNodUQsRUFBS2l1RCxDQUFTLElBQUtmLEVBQzNCLEdBQUllLEVBQVksRUFDWixPQUFBZixFQUFjLElBQUlsdEQsRUFBS2l1RCxFQUFZLENBQUMsRUFDN0IsR0FHZixNQUFPLEVBQ1gsRUFDQSxRQUFTNXRELEVBQUksRUFBR0EsRUFBSTRzRCxFQUFjLE9BQVE1c0QsSUFBSyxDQUMzQyxNQUFNNnRELEVBQWVqQixFQUFjNXNELENBQUMsRUFDcEMsR0FBSSxDQUFDNnRELEVBQ0QsU0FFSixJQUFJQyxFQUFZLEdBQ2hCLE1BQU1sbkQsRUFBU2tnRCxFQUFZOW1ELENBQUMsRUFDNUIsR0FBSTRHLEdBQVUsT0FBT0EsR0FBVyxTQUFVLENBQ3RDLE1BQU1tbkQsR0FBc0JSLEVBQXVCLElBQUkzbUQsQ0FBTSxHQUFLLEdBQUssRUFFdkUsR0FEQTJtRCxFQUF1QixJQUFJM21ELEVBQVFtbkQsQ0FBa0IsRUFDakRBLEVBQXFCLEVBQ3JCLFNBRUosTUFBTUMsRUFBWWxnQixHQUFxQmxuQyxDQUFNLEVBQ3ZDZ25ELEVBQVlmLEVBQWMsSUFBSW1CLENBQVMsR0FBSyxFQUNsRCxHQUFJSixFQUFZLEVBQUcsQ0FDZmYsRUFBYyxJQUFJbUIsRUFBV0osRUFBWSxDQUFDLEVBQzFDRixFQUFpQixLQUFLLGdCQUFnQkcsQ0FBWSxDQUFDLEVBQ25EQyxFQUFZLEdBQ1osUUFDSixDQUNKLENBQ0EsTUFBTUcsRUFBY25nQixHQUFxQitmLENBQVksRUFDL0NLLEVBQW9CckIsRUFBYyxJQUFJb0IsQ0FBVyxHQUFLLEVBQzVELEdBQUlDLEVBQW9CLEVBQUcsQ0FDdkJyQixFQUFjLElBQUlvQixFQUFhQyxFQUFvQixDQUFDLEVBQ3BEUixFQUFpQixLQUFLLGdCQUFnQkcsQ0FBWSxDQUFDLEVBQ25EQyxFQUFZLEdBQ1osUUFDSixDQUNJLENBQUNsbkQsR0FBVSttRCxNQUNYRCxFQUFpQixLQUFLLGdCQUFnQkcsQ0FBWSxDQUFDLEVBQ25EQyxFQUFZLElBRVosQ0FBQ0EsR0FBYSxDQUFDbG5ELEdBQVU2bUQsSUFBcUIsUUFDOUNDLEVBQWlCLEtBQUssZ0JBQWdCRyxDQUFZLENBQUMsQ0FFM0QsQ0FDQSxPQUFJSCxFQUFpQixPQUFTLEdBQUtELElBQXFCLE9BQzdDQyxFQUVKRCxDQUNYLENBQ0EsU0FBU1IsR0FBZ0MxcEQsRUFBUyxDQUM5QyxLQUFNLENBQUUsY0FBQXNwRCxFQUFlLFlBQUEvRixFQUFhLGlCQUFBMkcsQ0FBZ0IsRUFBS2xxRCxFQUN6RCxHQUFJLENBQUNzcEQsRUFBZSxDQUNoQixNQUFNc0IsRUFBV3JILEVBQ1osT0FBUS9qRCxHQUFTLEVBQVFBLENBQUssRUFDOUIsSUFBS0EsR0FBUyxnQkFBZ0JBLENBQUksQ0FBQyxFQUN4QyxPQUFPb3JELEVBQVMsT0FBUyxFQUNuQkEsRUFDQVYsSUFBcUIsT0FDakIsQ0FBQSxFQUNBQSxDQUNkLENBQ0EsTUFBTVUsRUFBVyxDQUFBLEVBQ2pCLFVBQVdwckQsS0FBUStqRCxFQUFhLENBQzVCLEdBQUksQ0FBQy9qRCxFQUNELFNBRUosTUFBTXBELEVBQU1tdUMsR0FBcUIvcUMsQ0FBSSxFQUMvQjZxRCxFQUFZZixFQUFjLElBQUlsdEQsQ0FBRyxHQUFLLEVBQ3hDaXVELEdBQWEsSUFHakJmLEVBQWMsSUFBSWx0RCxFQUFLaXVELEVBQVksQ0FBQyxFQUNwQ08sRUFBUyxLQUFLLGdCQUFnQnByRCxDQUFJLENBQUMsRUFDdkMsQ0FDQSxPQUFJb3JELEVBQVMsT0FBUyxFQUNYQSxFQUVKVixJQUFxQixPQUFZLENBQUEsRUFBS0EsQ0FDakQsQ0FDTyxlQUFlVyxHQUFjNUIsRUFBUzZCLEVBQW1CM3ZELEVBQVEsQ0FDcEUsTUFBTW1PLEVBQVFuTyxFQUFPLE1BQ2Y0dkQsRUFBbUJ6aEQsRUFBTSxnQ0FBa0MsRUFDM0QwaEQsRUFBYzd2RCxFQUFPLFNBQVMsTUFBTTR2RCxDQUFnQixFQUN0RCxRQUFRLElBQUksbUNBQ1osUUFBUSxNQUFNLDRCQUE2QkMsRUFBWSxJQUFLeHJELEdBQVNBLEVBQUssSUFBSSxDQUFDLEVBRW5GLE1BQU15ckQsR0FBeUIsQ0FDM0IsUUFBQWhDLEVBQ0EsTUFBQTMvQyxFQUNBLFlBQUEwaEQsRUFDQSxnQkFBaUJGLEVBQ2pCLGVBQWdCM3ZELEVBQU8sZUFDdkIsc0JBQXVCNHZELENBQy9CLENBQUssQ0FDTCxDQUNPLGVBQWVsQixHQUF5QlosRUFBUzZCLEVBQW1CLENBSXZFLEdBSEksQ0FBQzdCLEdBR0QsQ0FBQzZCLEdBQXFCQSxFQUFrQixTQUFXLEVBQ25ELE9BRUosTUFBTUksRUFBaUJDLEdBQW9DTCxDQUFpQixFQUM1RSxNQUFNN0IsRUFBUSxTQUFTaUMsQ0FBYyxDQUN6QyxDQUNPLGVBQWVFLEdBQTBCbkMsRUFBUzl0RCxFQUFRLENBQzdELE1BQU1tTyxFQUFRbk8sRUFBTyxNQUNmNHZELEVBQW1CemhELEVBQU0sZ0NBQWtDLEVBQzNEMGhELEVBQWM3dkQsRUFBTyxTQUFTLE1BQU00dkQsQ0FBZ0IsRUFDMUQsTUFBTUUsR0FBeUIsQ0FDM0IsUUFBQWhDLEVBQ0EsTUFBQTMvQyxFQUNBLFlBQUEwaEQsRUFDQSxlQUFnQjd2RCxFQUFPLGVBQ3ZCLHNCQUF1QjR2RCxDQUMvQixDQUFLLENBQ0wsQ0FDTyxlQUFlTSxHQUE2QnJzRCxFQUFPaXFELEVBQVNxQyxFQUFzQnRyRCxFQUFTLENBQzlGLEdBQUksQ0FBQ2lwRCxFQUNELE1BQU8sQ0FDSCxjQUFlanFELEVBQ2YsYUFBYyxNQUMxQixFQUVJLE1BQU11c0QsR0FBZ0N2ckQsR0FBQSxZQUFBQSxFQUFTLGdDQUFpQyxHQUMxRXdyRCxHQUEwQnhyRCxHQUFBLFlBQUFBLEVBQVMsMEJBQTJCLEdBQzlEeXJELEVBQVUsTUFBTXhDLEVBQVEsU0FBUSxFQUNoQ3lDLEVBQWdCcmhCLEdBQWlCcnJDLENBQUssRUFDNUMsR0FBSSxDQUFDc3NELEVBQ0QsTUFBTyxDQUNILGNBQWVDLEVBQ1QsQ0FBQyxHQUFHRSxFQUFTLEdBQUdDLENBQWEsRUFDN0JBLEVBQ04sYUFBY0EsQ0FDMUIsRUFFSSxNQUFNQyxFQUFrQkYsRUFBUSxNQUFLLEVBQy9CRyxFQUFtQkYsRUFBYyxNQUFLLEVBQ3RDMWtELEVBQVcsTUFBTXNrRCxFQUFxQkcsRUFBU0MsQ0FBYSxFQUNsRSxHQUFJLENBQUMsTUFBTSxRQUFRMWtELENBQVEsRUFDdkIsTUFBTSxJQUFJOEMsRUFBVSx3RUFBd0UsRUFFaEcsTUFBTStoRCxFQUFnQkMsR0FBc0JILENBQWUsRUFDckRJLEVBQWlCRCxHQUFzQkYsQ0FBZ0IsRUFDdkRJLEVBQWN2aEIsR0FBb0JraEIsQ0FBZSxFQUNqRE0sRUFBZXhoQixHQUFvQm1oQixDQUFnQixFQUNuRE0sRUFBVyxDQUFBLEVBQ2pCLFVBQVcxc0QsS0FBUXdILEVBQVUsQ0FDekIsTUFBTTVLLEVBQU1tdUMsR0FBcUIvcUMsQ0FBSSxFQUNyQyxHQUFJcXJDLEdBQXlCb2hCLEVBQWN6c0QsQ0FBSSxFQUFHLENBQzlDMnNELEdBQWVKLEVBQWdCM3ZELENBQUcsRUFDbEM4dkQsRUFBUyxLQUFLMXNELENBQUksRUFDbEIsUUFDSixDQUNBLEdBQUlxckMsR0FBeUJtaEIsRUFBYXhzRCxDQUFJLEVBQUcsQ0FDN0Myc0QsR0FBZU4sRUFBZXp2RCxDQUFHLEVBQ2pDLFFBQ0osQ0FDQSxNQUFNZ3dELEVBQW1CUCxFQUFjLElBQUl6dkQsQ0FBRyxHQUFLLEVBQ25ELEdBQUlnd0QsRUFBbUIsRUFBRyxDQUN0QlAsRUFBYyxJQUFJenZELEVBQUtnd0QsRUFBbUIsQ0FBQyxFQUMzQyxRQUNKLENBQ0EsTUFBTUMsRUFBZU4sRUFBZSxJQUFJM3ZELENBQUcsR0FBSyxFQUNoRCxHQUFJaXdELEVBQWUsRUFBRyxDQUNsQk4sRUFBZSxJQUFJM3ZELEVBQUtpd0QsRUFBZSxDQUFDLEVBQ3hDSCxFQUFTLEtBQUsxc0QsQ0FBSSxFQUNsQixRQUNKLENBQ0Ewc0QsRUFBUyxLQUFLMXNELENBQUksQ0FDdEIsQ0FDQSxNQUFNOHNELEVBQWdCZixFQUNoQnZrRCxFQUNBa2xELEVBQVMsT0FBUyxFQUNkQSxFQUNBVixFQUNJSSxFQUNBLENBQUEsRUFDZCxPQUFJSixHQUNBVSxFQUFTLFNBQVcsR0FDcEJOLEVBQWlCLE9BQVMsR0FFMUI1NUMsRUFBTyxLQUFLLGlPQUFpTyxFQUUxTyxDQUNILGNBQWVzNkMsRUFDZixhQUFjSixDQUN0QixDQUNBLENBQ0EsU0FBU2YsR0FBb0NoakQsRUFBTyxDQUNoRCxPQUFPQSxFQUFNLElBQUszSSxHQUFTK3NELEdBQXdCQyxHQUFzQmh0RCxDQUFJLENBQUMsQ0FBQyxDQUNuRixDQUNBLFNBQVMrc0QsR0FBd0IxckQsRUFBT21VLEVBQVUsR0FBSSxDQUNsRCxHQUFJblUsR0FBVSxLQUNWLE9BQU9BLEVBRVgsTUFBTTZvQyxFQUFTVSxHQUF1QnZwQyxDQUFLLEVBQzNDLEdBQUk2b0MsRUFDQSxPQUFPK2lCLEdBQW1CL2lCLEVBQVExMEIsRUFBUSxTQUFTLEVBRXZELEdBQUksTUFBTSxRQUFRblUsQ0FBSyxFQUNuQixPQUFPQSxFQUFNLElBQUtoRCxHQUFVMHVELEdBQXdCMXVELEVBQU9tWCxDQUFPLENBQUMsRUFFdkUsR0FBSSxDQUFDc0QsR0FBY3pYLENBQUssRUFDcEIsT0FBT0EsRUFFWCxNQUFNc2hDLEVBQVN0aEMsRUFDVDFGLEVBQVMsQ0FBQSxFQUNUdXhELEVBQVksT0FBT3ZxQixFQUFPLFdBQWMsVUFBWUEsRUFBTyxVQUFVLE9BQVMsRUFDOUVBLEVBQU8sVUFDUG50QixFQUFRLFVBQ2QsU0FBVyxDQUFDNVksRUFBS3lCLENBQUssSUFBSyxPQUFPLFFBQVFza0MsQ0FBTSxFQUFHLENBQy9DLE1BQU13cUIsRUFBY3Z3RCxJQUFRLFFBQVVBLElBQVEsV0FBYSxDQUFFLFVBQUFzd0QsQ0FBUyxFQUFLMTNDLEVBQzNFN1osRUFBT2lCLENBQUcsRUFBSW13RCxHQUF3QjF1RCxFQUFPOHVELENBQVcsQ0FDNUQsQ0FDQSxPQUFPeHhELENBQ1gsQ0FDQSxTQUFTc3hELEdBQW1CNzVDLEVBQU84NUMsRUFBVyxDQUMxQyxNQUFNL3VDLEVBQVM2ckIsR0FBeUI1MkIsQ0FBSyxFQUU3QyxNQUFPLFFBRE04NUMsR0FBYSxDQUFDQSxFQUFVLFdBQVcsT0FBTyxFQUFJQSxFQUFZLFlBQ3BELFdBQVcvdUMsQ0FBTSxFQUN4QyxDQUNBLFNBQVNyRixHQUFjelgsRUFBTyxDQUMxQixHQUFJLE9BQU9BLEdBQVUsVUFBWUEsSUFBVSxLQUN2QyxNQUFPLEdBRVgsTUFBTW9WLEVBQVEsT0FBTyxlQUFlcFYsQ0FBSyxFQUN6QyxPQUFPb1YsSUFBVSxPQUFPLFdBQWFBLElBQVUsSUFDbkQsQ0FDQSxTQUFTdTJDLEdBQXNCM3JELEVBQU8sQ0FDbEMsR0FBSUEsR0FBVSxLQUNWLE9BQU9BLEVBRVgsR0FBSSxNQUFNLFFBQVFBLENBQUssRUFDbkIsT0FBT0EsRUFBTSxJQUFLaEQsR0FBVTJ1RCxHQUFzQjN1RCxDQUFLLENBQUMsRUFFNUQsR0FBSSxDQUFDeWEsR0FBY3pYLENBQUssRUFDcEIsT0FBT0EsRUFFWCxNQUFNc2hDLEVBQVN0aEMsRUFDVDFGLEVBQVMsQ0FBQSxFQUVUeXhELEVBRGlCLE9BQU96cUIsRUFBTyxNQUFTLFVBQVlBLEVBQU8sS0FBSyxPQUFTLEdBQ3ZDMHFCLEdBQXFCMXFCLEVBQU8sSUFBSSxFQUN4RSxTQUFXLENBQUMvbEMsRUFBS3lCLENBQUssSUFBSyxPQUFPLFFBQVFza0MsQ0FBTSxFQUN4Q3lxQixHQUFpQnh3RCxJQUFRLE9BRzdCakIsRUFBT2lCLENBQUcsRUFBSW93RCxHQUFzQjN1RCxDQUFLLEdBRTdDLE9BQU8xQyxDQUNYLENBQ0EsU0FBUzB4RCxHQUFxQjVxRCxFQUFNLENBQ2hDLE9BQVFBLEVBQUksQ0FDUixJQUFLLGdCQUNMLElBQUssdUJBQ0QsTUFBTyxHQUNYLFFBQ0ksTUFBTyxFQUNuQixDQUNBLENBQ0EsZUFBZWdwRCxHQUF5QmpyRCxFQUFTLENBQzdDLEtBQU0sQ0FBRSxRQUFBaXBELEVBQVMsTUFBQTMvQyxFQUFPLFlBQUEwaEQsRUFBYSxnQkFBQThCLEVBQWtCLEdBQUksZUFBQUMsRUFBZ0Isc0JBQUFDLENBQXFCLEVBQU1odEQsRUFDdEcsR0FBSSxDQUFDaXBELEVBQ0QsT0FFSixNQUFNZ0UsRUFBYyxDQUNoQixHQUFHSCxFQUNILEdBQUcvaEIsR0FBK0JpZ0IsQ0FBVyxDQUNyRCxFQUNJLEdBQUlpQyxFQUFZLFNBQVcsRUFBRyxDQUMxQjNqRCxFQUFNLCtCQUNGMGpELEVBQXdCaEMsRUFBWSxPQUN4QyxNQUFNa0MsR0FBdUJqRSxFQUFTOEQsRUFBZ0J6akQsQ0FBSyxFQUMzRCxNQUNKLENBQ0EsTUFBTTZqRCxFQUFpQmhDLEdBQW9DOEIsQ0FBVyxFQUN0RSxNQUFNaEUsRUFBUSxTQUFTa0UsQ0FBYyxFQUNyQyxNQUFNRCxHQUF1QmpFLEVBQVM4RCxFQUFnQnpqRCxDQUFLLEVBQzNEQSxFQUFNLCtCQUNGMGpELEVBQXdCaEMsRUFBWSxNQUM1QyxDQUNBLGVBQWVrQyxHQUF1QmpFLEVBQVNtRSxFQUFZOWpELEVBQU8sU0FDOUQsR0FBSSxDQUFDMC9DLEdBQXdDQyxDQUFPLEVBQ2hELE9BRUosTUFBTXhXLElBQVExM0MsRUFBQXVPLEVBQU0scUJBQU4sWUFBQXZPLEVBQTBCLFVBQVNNLEVBQUFpTyxFQUFNLGNBQWMsZ0JBQXBCLFlBQUFqTyxFQUFtQyxPQUM5RWd5RCxFQUFpQixPQUFPRCxFQUFlLEtBQWUsT0FBTzNhLEVBQVUsSUFDdkUsT0FDQSxDQUNFLEdBQUksT0FBTzJhLEVBQWUsSUFBYyxDQUFBLEVBQUssQ0FBRSxXQUFBQSxDQUFVLEVBQ3pELEdBQUksT0FBTzNhLEVBQVUsSUFBYyxDQUFBLEVBQUssQ0FBRSxNQUFBQSxDQUFLLENBQzNELEVBQ1U2YSxFQUFtQixNQUFNckUsRUFBUSxjQUFjb0UsQ0FBYyxFQUNuRSxHQUFJLENBQUNDLEVBQ0QsT0FFSixNQUFNQyxFQUFRRCxFQUFpQixNQUMvQmhrRCxFQUFNLFNBQVMsTUFBTSxJQUFJLElBQUkyd0MsR0FBTSxDQUMvQixTQUFVLEVBQ1YsWUFBYXNULEVBQU0sWUFDbkIsYUFBY0EsRUFBTSxhQUNwQixZQUFhQSxFQUFNLFlBQ25CLG1CQUFvQkEsRUFBTSxtQkFDMUIsb0JBQXFCQSxFQUFNLG9CQUMzQixvQkFBcUIsQ0FBQ0EsQ0FBSyxDQUNuQyxDQUFLLENBQUMsQ0FDTixDQUNBLFNBQVN6QixHQUFzQjNqRCxFQUFPLENBQ2xDLE1BQU1xbEQsRUFBUyxJQUFJLElBQ25CLFVBQVdodUQsS0FBUTJJLEVBQU8sQ0FDdEIsTUFBTS9MLEVBQU1tdUMsR0FBcUIvcUMsQ0FBSSxFQUNyQ2d1RCxFQUFPLElBQUlweEQsR0FBTW94RCxFQUFPLElBQUlweEQsQ0FBRyxHQUFLLEdBQUssQ0FBQyxDQUM5QyxDQUNBLE9BQU9veEQsQ0FDWCxDQUNBLFNBQVNyQixHQUFlMWlDLEVBQUtydEIsRUFBSyxDQUM5QixNQUFNaXVELEdBQWE1Z0MsRUFBSSxJQUFJcnRCLENBQUcsR0FBSyxHQUFLLEVBQ3BDaXVELEdBQWEsRUFDYjVnQyxFQUFJLE9BQU9ydEIsQ0FBRyxFQUdkcXRCLEVBQUksSUFBSXJ0QixFQUFLaXVELENBQVMsQ0FFOUIsQ0MvYU8sU0FBU29ELEdBQTZCQyxFQUFlLENBSXhELEdBSElBLEVBQWMsT0FBUyxXQUd2QkEsRUFBYyxPQUFTLFlBQ3ZCLE9BRUosTUFBTUMsRUFBV0QsRUFBYyxRQUFRQSxFQUFjLFFBQVEsT0FBUyxDQUFDLEVBQ3ZFLEdBQUlDLEVBQVMsT0FBUyxjQUd0QixPQUFPQSxFQUFTLElBQ3BCLENBTU8sU0FBU0MsR0FBY2xnRCxFQUFRLENBQ2xDLE9BQUlBLEVBQU8sT0FBTyxTQUFXLEVBQ2xCLEdBRUgrL0MsR0FBNkIvL0MsRUFBTyxPQUFPQSxFQUFPLE9BQU8sT0FBUyxDQUFDLENBQUMsR0FBSyxFQUNyRixDQzNCQSxTQUFTbWdELEdBQWtCbmdELEVBQVEsQ0FDL0IsT0FBT0EsRUFBTyxVQUFZLENBQUUsS0FBTSxPQUFPLENBQzdDLENBQ08sZUFBZW9nRCxHQUF1QixDQUFFLFdBQUF2NkMsRUFBWSxRQUFBeUIsRUFBUyxNQUFBWSxFQUFPLFNBQUEyeEMsRUFBVSxTQUFBd0csR0FBYSxDQUM5RixNQUFNQyxFQUFPejZDLEdBQWMsQ0FBQSxFQUMzQixVQUFXMHhDLEtBQWErSSxFQUFNLENBQzFCLE1BQU10Z0QsRUFBUyxNQUFNdTNDLEVBQVUsSUFBSSxDQUMvQixRQUFBandDLEVBQ0EsTUFBQVksRUFDQSxTQUFBMnhDLENBQ1osQ0FBUyxFQUNLMEcsRUFBV0osR0FBa0JuZ0QsQ0FBTSxFQUNuQ3ZTLEVBQVMsQ0FDWCxVQUFXLENBQUUsS0FBTSxhQUFjLEtBQU04cEQsRUFBVSxJQUFJLEVBQ3JELE9BQVEsQ0FBRSxHQUFHdjNDLEVBQVEsU0FBQXVnRCxDQUFRLENBQ3pDLEVBRVEsR0FEQUYsR0FBQSxNQUFBQSxFQUFXNXlELEdBQ1A4eUQsRUFBUyxPQUFTLGdCQUNsQixNQUFPLENBQUUsS0FBTSxTQUFVLFFBQVNBLEVBQVMsT0FBTyxFQUV0RCxHQUFJQSxFQUFTLE9BQVMsaUJBQ2xCLE1BQU0sSUFBSTlqRCxHQUFvQyxtQ0FBbUM4NkMsRUFBVSxJQUFJLEdBQUk5cEQsQ0FBTSxDQUVqSCxDQUNBLE1BQU8sQ0FBRSxLQUFNLE9BQU8sQ0FDMUIsQ0FDTyxlQUFlK3lELEdBQXdCLENBQUUsV0FBQTM2QyxFQUFZLFFBQUF5QixFQUFTLE1BQUFZLEVBQU8sU0FBQTJ4QyxFQUFVLFdBQUE0RyxFQUFZLFNBQUFKLEdBQWEsQ0FDM0csTUFBTUMsRUFBT3o2QyxHQUFjLENBQUEsRUFDM0IsSUFBSTY2QyxFQUFjRCxFQUNsQixVQUFXbEosS0FBYStJLEVBQU0sQ0FDMUIsTUFBTXRnRCxFQUFTLE1BQU11M0MsRUFBVSxJQUFJLENBQy9CLFFBQUFqd0MsRUFDQSxNQUFBWSxFQUNBLFNBQUEyeEMsRUFDQSxPQUFRNEcsQ0FDcEIsQ0FBUyxFQUNLRixFQUFXSixHQUFrQm5nRCxDQUFNLEVBQ25DdlMsRUFBUyxDQUNYLFVBQVcsQ0FBRSxLQUFNLGNBQWUsS0FBTThwRCxFQUFVLElBQUksRUFDdEQsT0FBUSxDQUFFLEdBQUd2M0MsRUFBUSxTQUFBdWdELENBQVEsQ0FDekMsRUFFUSxHQURBRixHQUFBLE1BQUFBLEVBQVc1eUQsR0FDUDh5RCxFQUFTLE9BQVMsZ0JBQWlCLENBQ25DRyxFQUFjSCxFQUFTLFFBQ3ZCLEtBQ0osQ0FDQSxHQUFJQSxFQUFTLE9BQVMsaUJBQ2xCLE1BQU0sSUFBSTdqRCxHQUFxQyxvQ0FBb0M2NkMsRUFBVSxJQUFJLEdBQUk5cEQsQ0FBTSxDQUVuSCxDQUNBLE9BQU9pekQsQ0FDWCxDQ3hDQSxNQUFNQyxHQUFrQyxtQ0FNakMsU0FBU0MsR0FBc0IvRyxFQUFVNzVDLEVBQVEsQ0FDcEQsTUFBTTZnRCxFQUF5QkMsR0FBK0I5Z0QsQ0FBTSxFQUNwRSxHQUFJNmdELEVBQXdCLENBQ3hCLE1BQU1FLEVBQWtCRixFQUF1QixJQUFJRyxFQUFzQyxFQUN6RixNQUFPLENBQ0gsS0FBTSx1QkFDTixLQUFNbkgsRUFBUyxLQUNmLE9BQVFBLEVBQVMsT0FDakIsT0FBUSxZQUNSLE9BQVFrSCxDQUNwQixDQUNJLENBQ0EsTUFBTyxDQUNILEtBQU0sdUJBQ04sS0FBTWxILEVBQVMsS0FDZixPQUFRQSxFQUFTLE9BQ2pCLE9BQVEsWUFDUixPQUFRLENBQ0osS0FBTSxPQUNOLEtBQU1yMUMsR0FBY3hFLENBQU0sQ0FDdEMsQ0FDQSxDQUNBLENBTU8sZUFBZWloRCxHQUF5Qi80QyxFQUFPZzVDLEVBQVVDLEVBQVF2bEQsRUFBTyxDQUMzRSxNQUFNd2xELEVBQU8sQ0FBRSxNQUFBbDVDLEVBQU8sT0FBQWk1QyxFQUFRLE1BQUF2bEQsQ0FBSyxFQUNuQyxHQUFJLENBYUEsT0FaZ0IsTUFBTSxRQUFRLElBQUlzbEQsRUFBUyxJQUFJLE1BQU9HLEdBQVksQ0FDOUQsTUFBTUMsRUFBY0MsR0FBbUJGLENBQU8sRUFFOUMsR0FBSSxDQUFDQyxFQUFZLFFBQ2IsT0FBT0UsR0FBc0JKLEVBQU1DLEVBQVNDLEVBQVksS0FBSyxFQUVqRSxNQUFNRyxFQUFrQixNQUFNQyxHQUF1Qk4sRUFBTUMsRUFBU0MsRUFBWSxJQUFJLEVBQ3BGLE9BQUlHLElBQW9CLFdBQ2JBLEVBRUpFLEdBQXdCUCxFQUFNQyxDQUFPLENBQ2hELENBQUMsQ0FBQyxDQUVOLE9BQ094ekMsRUFBRyxDQUNOLE1BQU0sSUFBSXZSLEdBQWMsaUNBQWlDdVIsQ0FBQyxHQUFJQSxFQUFHalMsQ0FBSyxDQUMxRSxDQUNKLENBQ0EsU0FBUzJsRCxHQUFtQkYsRUFBUyxDQUNqQyxHQUFJLENBQ0EsSUFBSU8sRUFBYVAsRUFBUSxTQUFTLFVBQ2xDLE9BQUlBLEVBQVEsS0FBSyxhQUNUcGtELEdBQVlva0QsRUFBUSxLQUFLLFVBQVUsRUFDbkNPLEVBQWFQLEVBQVEsS0FBSyxXQUFXLE1BQU1PLENBQVUsRUFHckRBLEVBQWEsS0FBSyxNQUFNQSxDQUFVLEdBR25DLENBQUUsUUFBUyxHQUFNLEtBQU1BLENBQVUsQ0FDNUMsT0FDTzExRCxFQUFPLENBQ1ZvWSxPQUFBQSxFQUFPLE1BQU0sc0NBQXNDKzhDLEVBQVEsS0FBSyxJQUFJLEtBQUtuMUQsQ0FBSyxFQUFFLEVBQ3pFLENBQUUsUUFBUyxHQUFPLE1BQU9BLENBQUssQ0FDekMsQ0FDSixDQUNBLFNBQVMyMUQsR0FBMkJULEVBQU1DLEVBQVMsQ0FDL0MsTUFBTyxDQUNILEtBQU0sb0JBQ04sS0FBTUEsRUFBUSxLQUNkLFFBQVMsSUFBSTlSLEdBQW9COFIsRUFBUSxTQUFVRCxFQUFLLEtBQUssQ0FDckUsQ0FDQSxDQUNBLFNBQVNJLEdBQXNCSixFQUFNQyxFQUFTbjFELEVBQU8sQ0FDakQsTUFBTThHLEVBQWUsNEZBQTRGOUcsRUFBTSxPQUFPLEdBQzlILE1BQU8sQ0FDSCxLQUFNLGtCQUNOLEtBQU1tMUQsRUFBUSxLQUNkLE9BQVFydUQsRUFDUixRQUFTLElBQUlpOEMsR0FBc0IyUixHQUFzQlMsRUFBUSxTQUFVcnVELENBQVksRUFBR291RCxFQUFLLE1BQU9wdUQsQ0FBWSxDQUMxSCxDQUNBLENBQ0EsZUFBZTh1RCxHQUE2QlYsRUFBTUMsRUFBUyxDQUN2RCxLQUFNLENBQUUsTUFBQW41QyxDQUFLLEVBQUtrNUMsRUFDbEIsT0FBT3JXLEdBQWlCLE1BQU9sUyxHQUFTLENBQ3BDLE1BQU1nYSxFQUFXLG1DQUNqQixPQUFBaGEsRUFBSyxTQUFTLENBQ1YsUUFBU2dhLEVBQ1QsS0FBTSxDQUNGLFVBQVd3TyxFQUFRLEtBQUssS0FDeEIsTUFBTyxzQkFBc0JBLEVBQVEsU0FBUyxNQUFNLGlDQUNwRSxDQUNBLENBQVMsRUFDRHhvQixFQUFLLFNBQVMsT0FBU2dhLEVBQ2hCLENBQ0gsS0FBTSxrQkFDTixLQUFNd08sRUFBUSxLQUNkLE9BQVF4TyxFQUNSLFFBQVMsSUFBSTVELEdBQXNCMlIsR0FBc0JTLEVBQVEsU0FBVXhPLENBQVEsRUFBRzNxQyxFQUFPMnFDLENBQVEsQ0FDakgsQ0FDSSxFQUFHLENBQ0MsS0FBTSxDQUNGLEtBQU13TyxFQUFRLEtBQUssSUFDL0IsQ0FDQSxDQUFLLENBQ0wsQ0FDQSxlQUFlSyxHQUF1Qk4sRUFBTUMsRUFBU08sRUFBWSxDQUM3RCxLQUFNLENBQUUsTUFBQWhtRCxDQUFLLEVBQUt3bEQsRUFFbEIsR0FBSSxDQURrQixNQUFNQyxFQUFRLEtBQUssY0FBY3psRCxFQUFNLFNBQVVnbUQsRUFBWVAsRUFBUSxTQUFTLE1BQU0sRUFFdEcsTUFBTyxXQUVYLE1BQU1uVSxFQUFXdHhDLEVBQU0sU0FBUyxlQUFlLENBQzNDLFNBQVV5bEQsRUFBUSxLQUFLLEtBQ3ZCLE9BQVFBLEVBQVEsU0FBUyxNQUNqQyxDQUFLLEVBQ0QsT0FBSW5VLElBQWEsSUFDYnR4QyxFQUFNLHlCQUF5QnlsRCxFQUFRLEtBQUssS0FBTUEsRUFBUSxTQUFTLE1BQU0sRUFDbEUsTUFBTVMsR0FBNkJWLEVBQU1DLENBQU8sR0FFdkRuVSxJQUFhLEdBQ04yVSxHQUEyQlQsRUFBTUMsQ0FBTyxFQUU1QyxVQUNYLENBQ0EsZUFBZU0sR0FBd0JQLEVBQU1DLEVBQVMsQ0FDbEQsS0FBTSxDQUFFLE1BQUFuNUMsRUFBTyxPQUFBaTVDLEVBQVEsTUFBQXZsRCxDQUFLLEVBQUt3bEQsRUFDakMsT0FBT3JXLEdBQWlCLE1BQU9sUyxHQUFTLENBQ2hDc29CLEVBQU8sT0FBTyw0QkFDZHRvQixFQUFLLFNBQVMsTUFBUXdvQixFQUFRLFNBQVMsV0FFM0MsR0FBSSxDQUNBLE1BQU1VLEVBQXVCLE1BQU0zQixHQUF1QixDQUN0RCxXQUFZaUIsRUFBUSxLQUFLLGdCQUN6QixRQUFTemxELEVBQU0sU0FDZixNQUFBc00sRUFDQSxTQUFVbTVDLEVBQVEsU0FDbEIsU0FBVzV6RCxHQUFXLENBQ2xCbU8sRUFBTSwyQkFBMkIsS0FBS25PLENBQU0sQ0FDaEQsQ0FDaEIsQ0FBYSxFQUNEdTBELEdBQWNiLEVBQVF2bEQsRUFBTSxTQUFVc00sRUFBT201QyxFQUFRLEtBQU1BLEVBQVEsUUFBUSxFQUMzRSxJQUFJWixFQUNKLEdBQUlzQixFQUFxQixPQUFTLFNBQzlCdEIsRUFBYXNCLEVBQXFCLFlBRWpDLENBQ0QsTUFBTUUsRUFBY3JtRCxFQUFNLHVCQUF1QnlsRCxFQUFRLEtBQUssS0FBTUEsRUFBUSxTQUFTLE1BQU0sRUFDM0ZaLEVBQWEsTUFBTVksRUFBUSxLQUFLLE9BQU96bEQsRUFBTSxTQUFVeWxELEVBQVEsU0FBUyxVQUFXLENBQUUsU0FBVUEsRUFBUSxTQUFVLFlBQUFZLENBQVcsQ0FBRSxFQUM5SHhCLEVBQWEsTUFBTUQsR0FBd0IsQ0FDdkMsV0FBWWEsRUFBUSxLQUFLLGlCQUN6QixRQUFTemxELEVBQU0sU0FDZixNQUFBc00sRUFDQSxTQUFVbTVDLEVBQVEsU0FDbEIsV0FBQVosRUFDQSxTQUFXaHpELEdBQVcsQ0FDbEJtTyxFQUFNLDRCQUE0QixLQUFLbk8sQ0FBTSxDQUNqRCxDQUNwQixDQUFpQixDQUNMLENBQ0EsTUFBTW9hLEVBQWVyRCxHQUFjaThDLENBQVUsRUFDN0N5QixHQUFZZixFQUFRdmxELEVBQU0sU0FBVXNNLEVBQU9tNUMsRUFBUSxLQUFNeDVDLEVBQWN3NUMsRUFBUSxRQUFRLEVBQ25GRixFQUFPLE9BQU8sNEJBQ2R0b0IsRUFBSyxTQUFTLE9BQVNoeEIsR0FFM0IsTUFBTXM2QyxFQUFpQixDQUNuQixLQUFNLGtCQUNOLEtBQU1kLEVBQVEsS0FDZCxPQUFRWixFQUNSLFFBQVMsSUFBSXhSLEdBQXNCMlIsR0FBc0JTLEVBQVEsU0FBVVosQ0FBVSxFQUFHdjRDLEVBQU91NEMsQ0FBVSxDQUN6SCxFQUNrQjJCLEVBQWtCQyxHQUEwQmhCLEVBQVEsUUFBUSxFQUNsRSxHQUFJZSxFQUFpQixDQUNqQkQsRUFBZSxlQUFpQkMsRUFDaEMsTUFBTUUsRUFBc0JGLEVBQWdCLGNBQ3hDRSxFQUFvQixPQUFTLEdBQzdCSCxFQUFlLGNBQWdCRyxFQUMvQjFtRCxFQUFNLHVCQUF1QnlsRCxFQUFRLEtBQUssS0FBTUEsRUFBUSxTQUFTLE9BQVFlLEVBQWdCLE1BQU0sU0FBUSxDQUFFLEdBR3pHeG1ELEVBQU0seUJBQXlCeWxELEVBQVEsS0FBSyxLQUFNQSxFQUFRLFNBQVMsTUFBTSxDQUVqRixDQUNBLE9BQU9jLENBQ1gsT0FDT2oyRCxFQUFPLENBQ1Yyc0MsRUFBSyxTQUFTLENBQ1YsUUFBUyxxQkFDVCxLQUFNLENBQ0YsVUFBV3dvQixFQUFRLEtBQUssS0FDeEIsTUFBTyxPQUFPbjFELENBQUssQ0FDdkMsQ0FDQSxDQUFhLEVBQ0QsTUFBTXEyRCxFQUFjLE9BQU9yMkQsQ0FBSyxFQUNoQyxNQUFBZzJELEdBQVlmLEVBQVF2bEQsRUFBTSxTQUFVc00sRUFBT201QyxFQUFRLEtBQU1rQixFQUFhbEIsRUFBUSxRQUFRLEVBQ2hGbjFELENBQ1YsQ0FDSixFQUFHLENBQ0MsS0FBTSxDQUNGLEtBQU1tMUQsRUFBUSxLQUFLLElBQy9CLENBQ0EsQ0FBSyxDQUNMLENBS0EsZUFBZW1CLEdBQWdDeDdDLEVBQVU2eUMsRUFBVSxDQUMvRCxNQUFNNEksRUFBUzVJLEVBQVMsT0FDeEIsSUFBSTZJLEVBRUosT0FBUUQsRUFBTyxLQUFJLENBQ2YsSUFBSyxRQUNELE1BQU16N0MsRUFBUyxNQUFNeTdDLEVBQU8sRUFBR0EsRUFBTyxFQUFHQSxFQUFPLE1BQU0sRUFDdEQsTUFDSixJQUFLLGVBQ0QsTUFBTXo3QyxFQUFTLFlBQVl5N0MsRUFBTyxFQUFHQSxFQUFPLENBQUMsRUFDN0MsTUFDSixJQUFLLE9BQ0QsTUFBTXo3QyxFQUFTLEtBQUt5N0MsRUFBTyxLQUFLLElBQUs1MUQsR0FBTSxDQUFDQSxFQUFFLEVBQUdBLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFDdEQsTUFDSixJQUFLLFdBQ0QsTUFBTW1hLEVBQVMsU0FBU3k3QyxFQUFPLElBQUksRUFDbkMsTUFDSixJQUFLLE9BQ0QsTUFBTXo3QyxFQUFTLEtBQUt5N0MsRUFBTyxFQUFHQSxFQUFPLENBQUMsRUFDdEMsTUFDSixJQUFLLGFBQ0RDLEVBQWEsTUFBTTE3QyxFQUFTLFdBQVUsRUFDdEMsTUFDSixJQUFLLFNBQ0QsTUFBTUEsRUFBUyxPQUFPeTdDLEVBQU8sRUFBR0EsRUFBTyxFQUFHQSxFQUFPLFNBQVVBLEVBQU8sUUFBUSxFQUMxRSxNQUNKLElBQUssT0FDRCxNQUFNejdDLEVBQVMsS0FBS3k3QyxFQUFPLElBQUksRUFDL0IsTUFDSixJQUFLLE9BQ0QsTUFBTXo3QyxFQUFTLEtBQUksRUFDbkIsS0FLWixDQUtJLEdBSkksT0FBTzA3QyxFQUFlLEtBSXRCLE9BQU8xN0MsRUFBUyxZQUFlLGFBQy9CMDdDLEVBQWEsTUFBTTE3QyxFQUFTLFdBQVUsRUFDbEMsT0FBTzA3QyxFQUFlLEtBQ3RCLE9BQU9BLEVBR2YsTUFBTSxJQUFJLE1BQU0sMENBQTBDLENBQzlELENBQ0EsU0FBU0MsR0FBZXoyRCxFQUFPLENBQzNCLEdBQUlBLGFBQWlCLE1BQ2pCLE9BQU9BLEVBQU0sU0FBV0EsRUFBTSxTQUFRLEVBRTFDLEdBQUksQ0FDQSxPQUFPLEtBQUssVUFBVUEsQ0FBSyxDQUMvQixNQUNNLENBQ0YsT0FBTyxPQUFPQSxDQUFLLENBQ3ZCLENBQ0osQ0FDQSxlQUFlMDJELEdBQW9CdHdELEVBQVMsQ0FDeEMsS0FBTSxDQUFFLFdBQUFpVSxFQUFZLFNBQUEwbUMsRUFBVSxPQUFBRSxFQUFRLGFBQUFJLEVBQWMsY0FBQXRsQyxFQUFlLFdBQUE0NkMsQ0FBVSxFQUFNdndELEVBQ25GLEdBQUksQ0FBQzJWLEVBQ0QsTUFBTyxXQUVYLEdBQUk0NkMsRUFBWSxDQUNaLE1BQU1DLEVBQVcsTUFBTUQsRUFBV3Q4QyxFQUFZZ25DLENBQVksRUFDdER1VixFQUFTLFVBQVksR0FDckJ2OEMsRUFBVyxZQUFZZ25DLENBQVksRUFFOUJ1VixFQUFTLFVBQVksSUFDMUJ2OEMsRUFBVyxXQUFXZ25DLENBQVksQ0FFMUMsQ0FDQSxNQUFNTCxFQUFXM21DLEVBQVcsZUFBZSxDQUN2QyxTQUFBMG1DLEVBQ0EsT0FBQUUsQ0FDUixDQUFLLEVBQ0QsT0FBSUQsSUFBYSxHQUNOLFdBRVBBLElBQWEsR0FDTixXQUVKLFNBQ1gsQ0FDQSxlQUFlNlYsR0FBMkJ6d0QsRUFBUyxDQUMvQyxLQUFNLENBQUUsV0FBQWlVLEVBQVksU0FBQTBtQyxFQUFVLE9BQUFFLEVBQVEsYUFBQUksRUFBYyxjQUFBdGxDLEVBQWUsV0FBQTQ2QyxFQUFZLG1CQUFBRyxDQUFrQixFQUFNMXdELEVBQ2pHMndELEVBQWdCLE1BQU1MLEdBQW9CLENBQzVDLFdBQUFyOEMsRUFDQSxTQUFBMG1DLEVBQ0EsT0FBQUUsRUFDQSxhQUFBSSxFQUNBLGNBQUF0bEMsRUFDQSxXQUFBNDZDLENBQ1IsQ0FBSyxFQUNELE9BQUlJLElBQWtCLFdBQ1gsQ0FBRSxPQUFRLFdBQVksS0FBTUQsRUFBa0IsQ0FBRSxFQUV2REMsSUFBa0IsVUFDWCxDQUFFLE9BQVEsVUFBVyxLQUFNMVYsQ0FBWSxFQUUzQyxDQUFFLE9BQVEsVUFBVSxDQUMvQixDQUNBLFNBQVN5VSxHQUFjYixFQUFRNTZDLEVBQVkyQixFQUFPMU8sRUFBTXFnRCxFQUFVLENBQzlEc0gsRUFBTyxLQUFLLG1CQUFvQjU2QyxFQUFZMkIsRUFBTzFPLEVBQU0sQ0FBRSxTQUFBcWdELEVBQVUsRUFDakUsT0FBTzN4QyxFQUFNLE1BQVMsWUFDdEJBLEVBQU0sS0FBSyxtQkFBb0IzQixFQUFZL00sRUFBTSxDQUFFLFNBQUFxZ0QsRUFBVSxDQUVyRSxDQUNBLFNBQVNxSSxHQUFZZixFQUFRNTZDLEVBQVkyQixFQUFPMU8sRUFBTXdHLEVBQVE2NUMsRUFBVSxDQUNwRXNILEVBQU8sS0FBSyxpQkFBa0I1NkMsRUFBWTJCLEVBQU8xTyxFQUFNd0csRUFBUSxDQUFFLFNBQUE2NUMsRUFBVSxFQUN2RSxPQUFPM3hDLEVBQU0sTUFBUyxZQUN0QkEsRUFBTSxLQUFLLGlCQUFrQjNCLEVBQVkvTSxFQUFNd0csRUFBUSxDQUFFLFNBQUE2NUMsRUFBVSxDQUUzRSxDQUNPLGVBQWVxSixHQUFvQmg3QyxFQUFPdXhDLEVBQVMwSCxFQUFRNTZDLEVBQVk0OEMsRUFBZSxPQUFXLENBQ3BHLE1BQU1DLEVBQVVELEdBQWdCNytDLEVBQzFCOFcsRUFBVSxDQUFBLEVBQ2hCLFVBQVdxbkMsS0FBVWhKLEVBQVMsQ0FDMUIsTUFBTWdCLEVBQVlnSSxFQUFPLE1BQ25CNUksRUFBVzRJLEVBQU8sU0FDbEJsVixFQUFlLElBQUlnQyxHQUFvQnNLLEVBQVUzeEMsRUFBT3V5QyxFQUFVLElBQUksRUFDdEU0SSxFQUFtQixNQUFNTixHQUEyQixDQUN0RCxXQUFBeDhDLEVBQ0EsU0FBVWswQyxFQUFVLEtBQ3BCLE9BQVFaLEVBQVMsT0FDakIsYUFBQXRNLEVBQ0EsY0FBZSxNQUFNa04sRUFBVSxjQUFjbDBDLEVBQVlzekMsRUFBUyxPQUFRQSxFQUFTLE1BQU0sRUFDekYsV0FBWVksRUFBVSxXQUN0QixtQkFBb0IsSUFBTSxDQUN0QixNQUFNNUgsRUFBVzhOLEdBQ1gyQyxFQUFrQixDQUNwQixPQUFRLEdBQ1IsT0FBUXpRLEVBQ1IsUUFBUyxDQUFFLEtBQU0sT0FBUSxTQUFVLElBQUksQ0FDM0QsRUFDZ0IsT0FBTyxJQUFJNUQsR0FBc0IsQ0FDN0IsS0FBTSxvQkFDTixPQUFRNEssRUFBUyxPQUNqQixPQUFRLENBQUN5SixDQUFlLENBQzVDLEVBQW1CcDdDLEVBQU8ycUMsQ0FBUSxDQUN0QixDQUNaLENBQVMsRUFDRCxHQUFJd1EsRUFBaUIsU0FBVyxXQUFZLENBQ3hDam9DLEVBQVEsS0FBS2lvQyxFQUFpQixJQUFJLEVBQ2xDLFFBQ0osQ0FDQXJCLEdBQWNiLEVBQVE1NkMsRUFBWTJCLEVBQU91eUMsRUFBV1osQ0FBUSxFQUM1RCxJQUFJMEosRUFDSixNQUFNQyxFQUFlLENBQUEsRUFDckIsSUFBSUMsRUFDSixHQUFJLENBQ0EsTUFBTUMsRUFBYyxNQUFNakosRUFBVSxNQUFNLElBQUlaLEVBQVMsTUFBTSxFQUM3RDBKLEVBQWVHLEVBQVksUUFBVSxDQUFBLEVBQ2pDQSxFQUFZLGNBQ1osT0FBTyxPQUFPRixFQUFjRSxFQUFZLFlBQVksRUFFcEQsT0FBT0EsRUFBWSxpQkFBb0IsV0FDdkNELEVBQWtCQyxFQUFZLGdCQUV0QyxPQUNPcmYsRUFBSyxDQUVSa2YsRUFBZSxDQUNYLENBQ0ksT0FBUSxHQUNSLE9BSlVaLEdBQWV0ZSxDQUFHLEVBSzVCLFFBQVMsQ0FBRSxLQUFNLE9BQVEsU0FBVSxJQUFJLENBQzNELENBQ0EsRUFDWStlLEVBQVEsTUFBTSxrQ0FBbUMvZSxDQUFHLENBQ3hELENBQ0FrZixFQUFlQSxHQUFnQixDQUFBLEVBQy9CckIsR0FBWWYsRUFBUTU2QyxFQUFZMkIsRUFBT3V5QyxFQUFXLEtBQUssVUFBVThJLENBQVksRUFBRzFKLENBQVEsRUFDeEYsTUFBTS9LLEVBQVUsQ0FDWixLQUFNLG9CQUNOLE9BQVErSyxFQUFTLE9BQ2pCLE9BQVEwSixHQUFnQixDQUFBLENBQ3BDLEVBQ1ksT0FBT0UsR0FBb0IsV0FDM0IzVSxFQUFRLGdCQUFrQjJVLEdBRTFCLE9BQU8sS0FBS0QsQ0FBWSxFQUFFLE9BQVMsSUFDbkMxVSxFQUFRLGFBQWUwVSxHQUUzQnBvQyxFQUFRLEtBQUssSUFBSTZ6QixHQUFzQkgsRUFBUzVtQyxFQUFPNG1DLEVBQVEsTUFBTSxDQUFDLENBQzFFLENBQ0EsT0FBTzF6QixDQUNYLENBQ08sZUFBZXVvQyxHQUE0Qno3QyxFQUFPdXhDLEVBQVMwSCxFQUFRNTZDLEVBQVk0OEMsRUFBZSxPQUFXLENBQzVHLE1BQU1DLEVBQVVELEdBQWdCNytDLEVBQzFCOFcsRUFBVSxDQUFBLEVBQ2hCLFVBQVdxbkMsS0FBVWhKLEVBQVMsQ0FDMUIsTUFBTWlCLEVBQWlCK0gsRUFBTyxXQUN4QjVJLEVBQVc0SSxFQUFPLFNBQ2xCbFYsRUFBZSxJQUFJZ0MsR0FBb0JzSyxFQUFVM3hDLEVBQU93eUMsRUFBZSxJQUFJLEVBQzNFMkksRUFBbUIsTUFBTU4sR0FBMkIsQ0FDdEQsV0FBQXg4QyxFQUNBLFNBQVVtMEMsRUFBZSxLQUN6QixPQUFRYixFQUFTLE9BQ2pCLGFBQUF0TSxFQUNBLGNBQWUsTUFBTW1OLEVBQWUsY0FBY24wQyxFQUFZc3pDLEVBQVMsVUFBV0EsRUFBUyxNQUFNLEVBQ2pHLFdBQVlhLEVBQWUsV0FDM0IsbUJBQW9CLElBQU0sQ0FDdEIsTUFBTTdILEVBQVc4TixHQUNqQixPQUFPLElBQUkxUixHQUFzQixDQUM3QixLQUFNLDBCQUNOLE9BQVE0SyxFQUFTLE9BQ2pCLE9BQVEsU0FDUixPQUFRaEgsQ0FDNUIsRUFBbUIzcUMsRUFBTzJxQyxDQUFRLENBQ3RCLENBQ1osQ0FBUyxFQUNELEdBQUl3USxFQUFpQixTQUFXLFdBQVksQ0FDeENqb0MsRUFBUSxLQUFLaW9DLEVBQWlCLElBQUksRUFDbEMsUUFDSixDQUNBckIsR0FBY2IsRUFBUTU2QyxFQUFZMkIsRUFBT3d5QyxFQUFnQmIsQ0FBUSxFQUNqRSxJQUFJK0osRUFBUyxZQUNUNWpELEVBQVMsR0FDYixHQUFJLENBQ0EsSUFBSXZTLEVBQ0osT0FBUW9zRCxFQUFTLFVBQVUsS0FBSSxDQUMzQixJQUFLLGNBQ0Rwc0QsRUFBUyxNQUFNaXRELEVBQWUsT0FBTyxXQUFXYixFQUFTLFNBQVMsRUFDbEUsTUFDSixJQUFLLGNBQ0Rwc0QsRUFBUyxNQUFNaXRELEVBQWUsT0FBTyxXQUFXYixFQUFTLFNBQVMsRUFDbEUsTUFDSixJQUFLLGNBQ0Rwc0QsRUFBUyxNQUFNaXRELEVBQWUsT0FBTyxXQUFXYixFQUFTLFNBQVMsRUFDbEUsTUFDSixRQUNJLE1BQU0sSUFBSSxNQUFNLG1DQUFtQyxDQUN2RSxDQUNnQnBzRCxHQUFVLE9BQU9BLEVBQU8sUUFBVyxXQUNuQ20yRCxFQUFTbjJELEVBQU8sUUFFaEJBLEdBQVUsT0FBT0EsRUFBTyxRQUFXLFdBQ25DdVMsRUFBU3ZTLEVBQU8sT0FFeEIsT0FDTzQyQyxFQUFLLENBQ1J1ZixFQUFTLFNBQ1Q1akQsRUFBUzJpRCxHQUFldGUsQ0FBRyxFQUMzQitlLEVBQVEsTUFBTSwyQ0FBNEMvZSxDQUFHLENBQ2pFLENBQ0E2ZCxHQUFZZixFQUFRNTZDLEVBQVkyQixFQUFPd3lDLEVBQWdCMTZDLEVBQVE2NUMsQ0FBUSxFQUN2RSxNQUFNL0ssRUFBVSxDQUNaLEtBQU0sMEJBQ04sT0FBUStLLEVBQVMsT0FDakIsT0FBQStKLENBQ1osRUFDWTVqRCxJQUNBOHVDLEVBQVEsT0FBUzl1QyxHQUVyQm9iLEVBQVEsS0FBSyxJQUFJNnpCLEdBQXNCSCxFQUFTNW1DLEVBQU9sSSxDQUFNLENBQUMsQ0FDbEUsQ0FDQSxPQUFPb2IsQ0FDWCxDQU1PLGVBQWV5b0MsR0FBdUIzN0MsRUFBT3V4QyxFQUFTMEgsRUFBUTU2QyxFQUFZNDhDLEVBQWUsT0FBVyxDQUN2RyxNQUFNQyxFQUFVRCxHQUFnQjcrQyxFQUMxQjhXLEVBQVUsQ0FBQSxFQUNoQixVQUFXcW5DLEtBQVVoSixFQUFTLENBQzFCLE1BQU1JLEVBQVc0SSxFQUFPLFNBRXhCVCxHQUFjYixFQUFRNTZDLEVBQVkyQixFQUFPdTZDLEVBQU8sU0FBVTVJLENBQVEsRUFFbEUsSUFBSTc1QyxFQUNKLEdBQUksQ0FDQSxNQUFNZ0gsRUFBVyxNQUFNUCxHQUFnQixDQUNuQyxLQUFNZzhDLEVBQU8sU0FDYixXQUFBbDhDLENBQ2hCLENBQWEsRUFDRHZHLEVBQVMsTUFBTXdpRCxHQUFnQ3g3QyxFQUFVNnlDLENBQVEsQ0FDckUsT0FDT3hWLEVBQUssQ0FDUitlLEVBQVEsTUFBTSxxQ0FBc0MvZSxDQUFHLEVBQ3ZEcmtDLEVBQVMsRUFDYixDQUVBa2lELEdBQVlmLEVBQVE1NkMsRUFBWTJCLEVBQU91NkMsRUFBTyxTQUFVemlELEVBQVE2NUMsQ0FBUSxFQUV4RSxNQUFNaUssRUFBVzlqRCxFQUFTLHlCQUF5QkEsQ0FBTSxHQUFLLEdBQ3hEOHVDLEVBQVUsQ0FDWixLQUFNLHVCQUNOLE9BQVErSyxFQUFTLE9BQ2pCLE9BQVEsQ0FBRSxLQUFNLHNCQUF1QixLQUFNaUssQ0FBUSxDQUNqRSxFQUNRMW9DLEVBQVEsS0FBSyxJQUFJNnpCLEdBQXNCSCxFQUFTNW1DLEVBQU80N0MsQ0FBUSxDQUFDLENBQ3BFLENBQ0EsT0FBTzFvQyxDQUNYLENBTU8sZUFBZTJvQyxHQUFvQjc3QyxFQUFPMDBCLEVBQWVrVCxFQUFjQyxFQUFjaVUsRUFBYTlKLEVBQWFpSCxFQUFRNTZDLEVBQVksQ0FFdEksR0FEQXdwQyxFQUFlLENBQUMsR0FBR0EsQ0FBWSxFQUMzQm1LLEVBQVksU0FBVyxFQUN2QjUxQyxPQUFBQSxFQUFPLEtBQUssNkZBQTZGLEVBQ2xHLElBQUlzckMsR0FBaUJoVCxFQUFlb25CLEVBQWFsVSxFQUFjQyxFQUFjLENBQUUsS0FBTSxzQkFBdUIsRUFFdkgsR0FBSW1LLEVBQVksT0FBUyxFQUFHLENBRXhCLE1BQU04RixFQUFnQixpREFDdEIsUUFBU2p4RCxFQUFJLEVBQUdBLEVBQUltckQsRUFBWSxPQUFRbnJELElBQ3BDZ2hELEVBQWEsS0FBSyxJQUFJZCxHQUFzQjJSLEdBQXNCMUcsRUFBWW5yRCxDQUFDLEVBQUUsU0FBVWl4RCxDQUFhLEVBQUc5M0MsRUFBTzgzQyxDQUFhLENBQUMsQ0FFeEksQ0FDQSxNQUFNaUUsRUFBZ0IvSixFQUFZLENBQUMsRUFDbkMsT0FBT2pQLEdBQWdCLE1BQU9pWixHQUFnQixDQUMxQyxNQUFNblcsRUFBVWtXLEVBQWMsUUFDeEJFLEVBQVcsTUFBTXBXLEVBQVEsZ0JBQWdCeG5DLEVBQVkwOUMsRUFBYyxTQUFTLFNBQVMsRUFFM0YsR0FEQUMsRUFBWSxTQUFTLFNBQVdDLEVBQVMsS0FDckNqSyxFQUFZLE9BQVMsRUFBRyxDQUN4QixNQUFNa0ssRUFBa0JsSyxFQUFZLElBQUtoNkMsR0FBTUEsRUFBRSxRQUFRLFNBQVMsRUFDbEVna0QsRUFBWSxTQUFTLENBQ2pCLFFBQVMsOEJBQ1QsS0FBTSxDQUNGLGlCQUFrQkUsQ0FDdEMsQ0FDQSxDQUFhLENBQ0wsQ0FDQXJVLEVBQWEsS0FBSyxJQUFJWCxHQUFxQndSLEdBQXNCcUQsRUFBYyxTQUFVdlcsR0FBbUJ5VyxDQUFRLENBQUMsRUFBR2o4QyxFQUFPaThDLENBQVEsQ0FBQyxFQUN4SWhELEVBQU8sS0FBSyxnQkFBaUI1NkMsRUFBWTJCLEVBQU9pOEMsQ0FBUSxFQUN4RGo4QyxFQUFNLEtBQUssZ0JBQWlCM0IsRUFBWTQ5QyxDQUFRLEVBQ2hELE1BQU1FLEVBQWN0VyxFQUFRLGFBQWVvVCxFQUFPLE9BQU8sbUJBQ3pELEdBQUlrRCxFQUFhLENBQ2IvL0MsRUFBTyxNQUFNLDhCQUE4QixFQUN2QyxPQUFPKy9DLEdBQWdCLFlBQ3ZCSCxFQUFZLFNBQVMsQ0FDakIsUUFBUyx1QkFDVCxLQUFNLENBQ0YsUUFBUyxjQUNqQyxDQUNBLENBQWlCLEVBRUwsTUFBTUksRUFBbUIsQ0FDckIsYUFBYyxNQUFNLFFBQVExbkIsQ0FBYSxFQUNuQyxDQUFDLEdBQUdBLENBQWEsRUFDakJBLEVBQ04sZ0JBQWlCLENBQUMsR0FBR2tULENBQVksRUFDakMsU0FBVSxDQUFDLEdBQUdDLENBQVksRUFDMUIsV0FBQXhwQyxDQUNoQixFQUNrQjIyQyxFQUFXbUgsRUFBWUMsQ0FBZ0IsRUFDN0MxbkIsRUFBZ0JzZ0IsRUFBUyxhQUN6QnBOLEVBQWVvTixFQUFTLGdCQUN4Qm5OLEVBQWVtTixFQUFTLFFBQzVCLENBQ0EsT0FBTyxJQUFJdE4sR0FBaUJoVCxFQUFlb25CLEVBQWFsVSxFQUFjQyxFQUFjLENBQUUsS0FBTSxvQkFBcUIsU0FBQW9VLEVBQVUsQ0FDL0gsRUFBRyxDQUNDLEtBQU0sQ0FDRixXQUFZajhDLEVBQU0sSUFDOUIsQ0FDQSxDQUFLLENBQ0wsQ0FDQSxNQUFNcThDLEdBQW1CLENBQ3JCLGNBQWUsR0FDZixjQUFlLE1BQ25CLEVBS08sU0FBU0MsR0FBcUJDLEVBQWFDLEVBQWtCLEdBQUksQ0FDcEUsTUFBTUMsRUFBZ0IsQ0FBQSxFQUN0QixVQUFXN3lELEtBQVE0eUQsRUFDWDV5RCxhQUFnQnk5QyxJQUNoQm9WLEVBQWMsS0FBSzd5RCxDQUFJLEVBRy9CLFVBQVdyRSxLQUFVZzNELEVBSWpCLEdBSEloM0QsRUFBTyxtQkFBbUI4aEQsSUFDMUJvVixFQUFjLEtBQUtsM0QsRUFBTyxPQUFPLEVBRWpDQSxFQUFPLE9BQVMsbUJBQ2hCLEdBQUksTUFBTSxRQUFRQSxFQUFPLGFBQWEsRUFDbENrM0QsRUFBYyxLQUFLLEdBQUdsM0QsRUFBTyxhQUFhLFVBRXJDQSxFQUFPLGVBQWdCLENBQzVCLE1BQU02MEQsRUFBc0I3MEQsRUFBTyxlQUFlLGNBQzlDNjBELEVBQW9CLE9BQVMsR0FDN0JxQyxFQUFjLEtBQUssR0FBR3JDLENBQW1CLENBRWpELEVBR1IsT0FBT3FDLENBQ1gsQ0FNTyxlQUFlQyxHQUE2QjE4QyxFQUFPdThDLEVBQWE3b0QsRUFBT2lwRCxFQUEwQixDQUFBLEVBQUksQ0FDeEcsR0FBSUosRUFBWSxTQUFXLEdBQUtJLEVBQXdCLFNBQVcsRUFDL0QsT0FBT04sR0FFWCxNQUFNSSxFQUFnQkgsR0FBcUJDLEVBQWFJLENBQXVCLEVBQy9FLEdBQUlGLEVBQWMsT0FBUyxFQUN2QixNQUFPLENBQ0gsY0FBZSxHQUNmLGNBQWUsR0FDZixjQUFBQSxDQUNaLEVBRUksR0FBSXo4QyxFQUFNLGtCQUFvQixnQkFDMUIsT0FBT3E4QyxHQUVYLE1BQU1PLEVBQWtCTCxFQUFZLENBQUMsRUFDckMsR0FBSXY4QyxFQUFNLGtCQUFvQixxQkFDMUIsT0FBSTQ4QyxHQUFBLFlBQUFBLEVBQWlCLFFBQVMsa0JBRW5CLENBQ0gsY0FBZSxHQUNmLGNBQWUsT0FDZixZQUppQnRnRCxHQUFjc2dELEVBQWdCLE1BQU0sQ0FLckUsRUFFZVAsR0FFWCxNQUFNUSxFQUFrQjc4QyxFQUFNLGdCQUM5QixHQUFJLE9BQU82OEMsR0FBb0IsU0FBVSxDQUNyQyxNQUFNQyxFQUFlUCxFQUFZLEtBQU05Z0QsR0FBTW9oRCxFQUFnQixnQkFBZ0IsU0FBU3BoRCxFQUFFLEtBQUssSUFBSSxDQUFDLEVBQ2xHLE9BQUlxaEQsR0FBQSxZQUFBQSxFQUFjLFFBQVMsa0JBRWhCLENBQ0gsY0FBZSxHQUNmLGNBQWUsT0FDZixZQUppQnhnRCxHQUFjd2dELEVBQWEsTUFBTSxDQUtsRSxFQUVlVCxFQUNYLENBQ0EsR0FBSSxPQUFPUSxHQUFvQixXQUMzQixPQUFPQSxFQUFnQm5wRCxFQUFNLFNBQVU2b0QsQ0FBVyxFQUV0RCxNQUFNLElBQUlyb0QsRUFBVSw0QkFBNEIyb0QsQ0FBZSxHQUFJbnBELENBQUssQ0FDNUUsQ0FPQSxTQUFTa2xELEdBQStCOWdELEVBQVEsQ0FDNUMsR0FBSSxNQUFNLFFBQVFBLENBQU0sRUFBRyxDQUN2QixNQUFNaWxELEVBQWEsQ0FBQSxFQUNuQixVQUFXbnpELEtBQVFrTyxFQUFRLENBQ3ZCLE1BQU15YSxFQUFheXFDLEdBQThCcHpELENBQUksRUFDckQsR0FBSSxDQUFDMm9CLEVBQ0QsT0FBTyxLQUVYd3FDLEVBQVcsS0FBS3hxQyxDQUFVLENBQzlCLENBQ0EsT0FBT3dxQyxDQUNYLENBQ0EsTUFBTXhxQyxFQUFheXFDLEdBQThCbGxELENBQU0sRUFDdkQsT0FBT3lhLEVBQWEsQ0FBQ0EsQ0FBVSxFQUFJLElBQ3ZDLENBTUEsU0FBU3lxQyxHQUE4Qi94RCxFQUFPLENBQzFDLEdBQUksQ0FBQ2d5RCxHQUFTaHlELENBQUssRUFDZixPQUFPLEtBRVgsTUFBTW9CLEVBQU9wQixFQUFNLEtBQ25CLEdBQUlvQixJQUFTLFFBQVUsT0FBT3BCLEVBQU0sTUFBUyxTQUFVLENBQ25ELE1BQU02TSxFQUFTLENBQUUsS0FBTSxPQUFRLEtBQU03TSxFQUFNLElBQUksRUFDL0MsT0FBSWd5RCxHQUFTaHlELEVBQU0sWUFBWSxJQUMzQjZNLEVBQU8sYUFBZTdNLEVBQU0sY0FFekI2TSxDQUNYLENBQ0EsR0FBSXpMLElBQVMsUUFBUyxDQUNsQixNQUFNeUwsRUFBUyxDQUFFLEtBQU0sT0FBTyxFQUM5QixJQUFJb2xELEVBQ0FDLEVBQ0osTUFBTUMsRUFBeUJDLEdBQWlCcHlELEVBQU0sU0FBUyxFQUN6REEsRUFBTSxVQUNOLE9BQ0FxeUQsRUFBYXJ5RCxFQUFNLE1BQ3pCLEdBQUksT0FBT3F5RCxHQUFlLFVBQVlBLEVBQVcsT0FBUyxFQUN0REosRUFBY0ksVUFFVEwsR0FBU0ssQ0FBVSxFQUFHLENBQzNCLE1BQU1DLEVBQVdELEVBQ1hFLEVBQWtCSCxHQUFpQkUsRUFBUyxTQUFTLEVBQ3JEQSxFQUFTLFVBQ1RILEVBV04sR0FWSUMsR0FBaUJFLEVBQVMsR0FBRyxFQUM3QkwsRUFBY0ssRUFBUyxLQUVsQkYsR0FBaUJFLEVBQVMsSUFBSSxHQUc5QkEsRUFBUyxnQkFBZ0IsWUFDOUJBLEVBQVMsS0FBSyxPQUFTLEtBQ3ZCTCxFQUFjTyxHQUFvQkYsRUFBUyxLQUFNQyxDQUFlLEdBRWhFLENBQUNOLEVBQWEsQ0FDZCxNQUFNUSxFQUFlTCxHQUFpQkUsRUFBUyxNQUFNLEdBQUtBLEVBQVMsUUFDOURGLEdBQWlCRSxFQUFTLEVBQUUsR0FBS0EsRUFBUyxJQUMzQyxPQUNBRyxJQUNBUCxFQUFjTyxFQUV0QixDQUNKLENBMEJBLEdBekJJLENBQUNSLEdBQ0QsT0FBT2p5RCxFQUFNLFVBQWEsVUFDMUJBLEVBQU0sU0FBUyxPQUFTLElBQ3hCaXlELEVBQWNqeUQsRUFBTSxVQUVwQixDQUFDa3lELEdBQ0QsT0FBT2x5RCxFQUFNLFFBQVcsVUFDeEJBLEVBQU0sT0FBTyxPQUFTLElBQ3RCa3lELEVBQWNseUQsRUFBTSxRQUVwQixDQUFDaXlELEdBQ0QsT0FBT2p5RCxFQUFNLE1BQVMsVUFDdEJBLEVBQU0sS0FBSyxPQUFTLEVBQ3BCaXlELEVBQWNFLEVBQ1JLLEdBQW9CeHlELEVBQU0sS0FBTW15RCxDQUFzQixFQUN0RG55RCxFQUFNLEtBRVAsQ0FBQ2l5RCxHQUNOanlELEVBQU0sZ0JBQWdCLFlBQ3RCQSxFQUFNLEtBQUssT0FBUyxJQUNwQml5RCxFQUFjTyxHQUFvQnh5RCxFQUFNLEtBQU1teUQsQ0FBc0IsR0FFcEUsT0FBT255RCxFQUFNLFFBQVcsVUFBWUEsRUFBTSxPQUFPLE9BQVMsSUFDMUQ2TSxFQUFPLE9BQVM3TSxFQUFNLFFBRXRCaXlELEVBQ0FwbEQsRUFBTyxNQUFRb2xELFVBRVZDLEVBQ0xybEQsRUFBTyxNQUFRLENBQUUsT0FBUXFsRCxDQUFXLE1BR3BDLFFBQU8sS0FFWCxPQUFJRixHQUFTaHlELEVBQU0sWUFBWSxJQUMzQjZNLEVBQU8sYUFBZTdNLEVBQU0sY0FFekI2TSxDQUNYLENBQ0EsR0FBSXpMLElBQVMsT0FBUSxDQUNqQixNQUFNc3hELEVBQVlDLEdBQW1CM3lELENBQUssRUFDMUMsR0FBSSxDQUFDMHlELEVBQ0QsT0FBTyxLQUVYLE1BQU03bEQsRUFBUyxDQUFFLEtBQU0sT0FBUSxLQUFNNmxELENBQVMsRUFDOUMsT0FBSVYsR0FBU2h5RCxFQUFNLFlBQVksSUFDM0I2TSxFQUFPLGFBQWU3TSxFQUFNLGNBRXpCNk0sQ0FDWCxDQUNBLE9BQU8sSUFDWCxDQU1BLFNBQVNnaEQsR0FBdUNoaEQsRUFBUSxDQUNwRCxHQUFJQSxFQUFPLE9BQVMsT0FBUSxDQUN4QixNQUFNdlMsRUFBUyxDQUNYLEtBQU0sYUFDTixLQUFNdVMsRUFBTyxJQUN6QixFQUNRLE9BQUlBLEVBQU8sZUFDUHZTLEVBQU8sYUFBZXVTLEVBQU8sY0FFMUJ2UyxDQUNYLENBQ0EsR0FBSXVTLEVBQU8sT0FBUyxRQUFTLENBQ3pCLE1BQU12UyxFQUFTLENBQUUsS0FBTSxhQUFhLEVBSXBDLEdBSEksT0FBT3VTLEVBQU8sUUFBVyxVQUFZQSxFQUFPLE9BQU8sT0FBUyxJQUM1RHZTLEVBQU8sT0FBU3VTLEVBQU8sUUFFdkIsT0FBT0EsRUFBTyxPQUFVLFVBQVlBLEVBQU8sTUFBTSxPQUFTLEVBQzFEdlMsRUFBTyxNQUFRdVMsRUFBTyxjQUVqQm1sRCxHQUFTbmxELEVBQU8sS0FBSyxFQUFHLENBQzdCLE1BQU15bEQsRUFBV3psRCxFQUFPLE1BQ2xCMGxELEVBQWtCSCxHQUFpQkUsRUFBUyxTQUFTLEVBQ3JEQSxFQUFTLFVBQ1QsT0FDTixHQUFJRixHQUFpQkUsRUFBUyxHQUFHLEVBQzdCaDRELEVBQU8sTUFBUWc0RCxFQUFTLFlBRW5CRixHQUFpQkUsRUFBUyxJQUFJLEVBQ25DaDRELEVBQU8sTUFDSGk0RCxHQUFtQixDQUFDRCxFQUFTLEtBQUssV0FBVyxPQUFPLEVBQzlDTSxHQUFVTixFQUFTLEtBQU1DLENBQWUsRUFDeENELEVBQVMsYUFFZEEsRUFBUyxnQkFBZ0IsWUFDOUJBLEVBQVMsS0FBSyxPQUFTLEVBQUcsQ0FDMUIsTUFBTXgxQyxFQUFTNnJCLEdBQXlCMnBCLEVBQVMsSUFBSSxFQUNyRGg0RCxFQUFPLE1BQVFzNEQsR0FBVTkxQyxFQUFReTFDLENBQWUsQ0FDcEQsS0FDSyxDQUNELE1BQU1NLEVBQWdCVCxHQUFpQkUsRUFBUyxNQUFNLEdBQUtBLEVBQVMsUUFDL0RGLEdBQWlCRSxFQUFTLEVBQUUsR0FBS0EsRUFBUyxJQUMzQyxPQUNBTyxJQUNBdjRELEVBQU8sTUFBUSxDQUFFLEdBQUl1NEQsQ0FBWSxFQUV6QyxDQUNKLENBQ0EsT0FBSWhtRCxFQUFPLGVBQ1B2UyxFQUFPLGFBQWV1UyxFQUFPLGNBRTFCdlMsQ0FDWCxDQUNBLEdBQUl1UyxFQUFPLE9BQVMsT0FBUSxDQUN4QixNQUFNdlMsRUFBUyxDQUFFLEtBQU0sWUFBWSxFQUM3Qm80RCxFQUFZN2xELEVBQU8sS0FDekIsR0FBSSxPQUFPNmxELEdBQWMsU0FDckJwNEQsRUFBTyxLQUFPbzRELFVBRVRBLEdBQWEsT0FBT0EsR0FBYyxTQUFVLENBQ2pELE1BQU1weEIsRUFBU294QixFQUNmLEdBQUksU0FBVXB4QixHQUFVQSxFQUFPLEtBQU0sQ0FDakMsTUFBTXVxQixFQUFZdnFCLEVBQU8sV0FBYSxhQUN0QyxHQUFJLE9BQU9BLEVBQU8sTUFBUyxTQUN2QmhuQyxFQUFPLEtBQU9zNEQsR0FBVXR4QixFQUFPLEtBQU11cUIsQ0FBUyxNQUU3QyxDQUNELE1BQU0vdUMsRUFBUzZyQixHQUF5QnJILEVBQU8sSUFBSSxFQUNuRGhuQyxFQUFPLEtBQU9zNEQsR0FBVTkxQyxFQUFRK3VDLENBQVMsQ0FDN0MsQ0FDSixTQUNTLE9BQU92cUIsRUFBTyxLQUFRLFVBQVlBLEVBQU8sSUFBSSxPQUFTLEVBQzNEaG5DLEVBQU8sS0FBTyxDQUFFLElBQUtnbkMsRUFBTyxHQUFHLE1BRTlCLENBQ0QsTUFBTXV4QixFQUFnQixPQUFPdnhCLEVBQU8sSUFBTyxVQUN2Q0EsRUFBTyxHQUFHLE9BQVMsR0FDbkJBLEVBQU8sS0FDTixPQUFPQSxFQUFPLFFBQVcsVUFBWUEsRUFBTyxPQUFPLE9BQVMsRUFDdkRBLEVBQU8sT0FDUCxRQUNOdXhCLElBQ0F2NEQsRUFBTyxLQUFPLENBQUUsR0FBSXU0RCxDQUFZLEVBRXhDLENBQ0ksT0FBT3Z4QixFQUFPLFVBQWEsVUFBWUEsRUFBTyxTQUFTLE9BQVMsSUFDaEVobkMsRUFBTyxTQUFXZ25DLEVBQU8sU0FFakMsQ0FDQSxPQUFJejBCLEVBQU8sZUFDUHZTLEVBQU8sYUFBZXVTLEVBQU8sY0FFMUJ2UyxDQUNYLENBRUEsT0FEd0J1UyxDQUU1QixDQUNBLFNBQVM4bEQsR0FBbUIzeUQsRUFBTyxDQUMvQixNQUFNOHlELEVBQWE5eUQsRUFBTSxLQUN6QixHQUFJLE9BQU84eUQsR0FBZSxVQUFZQSxFQUFXLE9BQVMsRUFDdEQsT0FBT0EsRUFFWCxNQUFNQyxFQUFtQkMsR0FBNkJGLENBQVUsRUFDaEUsR0FBSUMsRUFDQSxPQUFPQSxFQUVYLE1BQU1FLEVBQWNDLEdBQXlCbHpELENBQUssRUFDbEQsT0FBSWl6RCxHQUdHLElBQ1gsQ0FDQSxTQUFTRCxHQUE2Qmh6RCxFQUFPLENBQ3pDLEdBQUksQ0FBQ2d5RCxHQUFTaHlELENBQUssRUFDZixPQUFPLEtBRVgsR0FBSSxTQUFVQSxHQUFTQSxFQUFNLE9BQVMsT0FBVyxDQUM3QyxNQUFNbXpELEVBQVluekQsRUFBTSxLQUNsQm96RCxFQUFnQixPQUFPRCxHQUFjLFVBQVlBLEVBQVUsT0FBUyxFQUNwRUUsRUFBZ0JGLGFBQXFCLFlBQWNBLEVBQVUsT0FBUyxFQUk1RSxNQUhJLENBQUNDLEdBQWlCLENBQUNDLEdBR25CLENBQUNqQixHQUFpQnB5RCxFQUFNLFNBQVMsR0FDakMsQ0FBQ295RCxHQUFpQnB5RCxFQUFNLFFBQVEsRUFDekIsS0FFSixDQUNILEtBQU0sT0FBT216RCxHQUFjLFNBQVdBLEVBQVksSUFBSSxXQUFXQSxDQUFTLEVBQzFFLFVBQVduekQsRUFBTSxVQUNqQixTQUFVQSxFQUFNLFFBQzVCLENBQ0ksQ0FDQSxHQUFJb3lELEdBQWlCcHlELEVBQU0sR0FBRyxFQUFHLENBQzdCLE1BQU0xRixFQUFTLENBQUUsSUFBSzBGLEVBQU0sR0FBRyxFQUMvQixPQUFJb3lELEdBQWlCcHlELEVBQU0sUUFBUSxJQUMvQjFGLEVBQU8sU0FBVzBGLEVBQU0sVUFFckIxRixDQUNYLENBQ0EsTUFBTXU0RCxFQUFnQlQsR0FBaUJweUQsRUFBTSxFQUFFLEdBQUtBLEVBQU0sSUFDckRveUQsR0FBaUJweUQsRUFBTSxNQUFNLEdBQUtBLEVBQU0sT0FDN0MsR0FBSTZ5RCxFQUFjLENBQ2QsTUFBTXY0RCxFQUFTLENBQUUsR0FBSXU0RCxDQUFZLEVBQ2pDLE9BQUlULEdBQWlCcHlELEVBQU0sUUFBUSxJQUMvQjFGLEVBQU8sU0FBVzBGLEVBQU0sVUFFckIxRixDQUNYLENBQ0EsT0FBTyxJQUNYLENBQ0EsU0FBUzQ0RCxHQUF5Qmx6RCxFQUFPLENBQ3JDLE1BQU1zekQsRUFBVyxPQUFPdHpELEVBQU0sVUFBYSxVQUFZQSxFQUFNLFNBQVMsT0FBUyxFQUN6RUEsRUFBTSxTQUNOLE9BQ0E2ckQsRUFBWSxPQUFPN3JELEVBQU0sV0FBYyxVQUFZQSxFQUFNLFVBQVUsT0FBUyxFQUM1RUEsRUFBTSxVQUNOLE9BQ04sR0FBSSxPQUFPQSxFQUFNLFVBQWEsVUFBWUEsRUFBTSxTQUFTLE9BQVMsRUFDOUQsTUFBSSxDQUFDNnJELEdBQWEsQ0FBQ3lILEVBQ1IsS0FFSixDQUFFLEtBQU10ekQsRUFBTSxTQUFVLFVBQUE2ckQsRUFBVyxTQUFBeUgsQ0FBUSxFQUV0RCxHQUFJdHpELEVBQU0sb0JBQW9CLFlBQWNBLEVBQU0sU0FBUyxPQUFTLEVBQ2hFLE1BQUksQ0FBQzZyRCxHQUFhLENBQUN5SCxFQUNSLEtBRUosQ0FBRSxLQUFNLElBQUksV0FBV3R6RCxFQUFNLFFBQVEsRUFBRyxVQUFBNnJELEVBQVcsU0FBQXlILENBQVEsRUFFdEUsR0FBSSxPQUFPdHpELEVBQU0sU0FBWSxVQUFZQSxFQUFNLFFBQVEsT0FBUyxFQUFHLENBQy9ELE1BQU0xRixFQUFTLENBQUUsSUFBSzBGLEVBQU0sT0FBTyxFQUNuQyxPQUFJc3pELElBQ0FoNUQsRUFBTyxTQUFXZzVELEdBRWZoNUQsQ0FDWCxDQUNBLEdBQUksT0FBTzBGLEVBQU0sUUFBVyxVQUFZQSxFQUFNLE9BQU8sT0FBUyxFQUFHLENBQzdELE1BQU0xRixFQUFTLENBQUUsR0FBSTBGLEVBQU0sTUFBTSxFQUNqQyxPQUFJc3pELElBQ0FoNUQsRUFBTyxTQUFXZzVELEdBRWZoNUQsQ0FDWCxDQUNBLE9BQU8sSUFDWCxDQUNBLFNBQVMwM0QsR0FBU2h5RCxFQUFPLENBQ3JCLE9BQU8sT0FBT0EsR0FBVSxVQUFZQSxJQUFVLElBQ2xELENBQ0EsU0FBU295RCxHQUFpQnB5RCxFQUFPLENBQzdCLE9BQU8sT0FBT0EsR0FBVSxVQUFZQSxFQUFNLE9BQVMsQ0FDdkQsQ0FDQSxTQUFTd3lELEdBQW9CbDdDLEVBQU11MEMsRUFBVyxDQUMxQyxHQUFJLE9BQU92MEMsR0FBUyxTQUNoQixPQUFJdTBDLEdBQWEsQ0FBQ3YwQyxFQUFLLFdBQVcsT0FBTyxFQUM5QnM3QyxHQUFVdDdDLEVBQU11MEMsQ0FBUyxFQUU3QnYwQyxFQUVYLE1BQU13RixFQUFTNnJCLEdBQXlCcnhCLENBQUksRUFDNUMsT0FBT3M3QyxHQUFVOTFDLEVBQVErdUMsQ0FBUyxDQUN0QyxDQUNBLFNBQVMrRyxHQUFVOTFDLEVBQVErdUMsRUFBVyxDQUNsQyxPQUFPQSxFQUFZLFFBQVFBLENBQVMsV0FBVy91QyxDQUFNLEdBQUtBLENBQzlELENDMStCTyxlQUFleTJDLEdBQXlCLENBQUUsU0FBQUMsRUFBVSxNQUFBeitDLEVBQU8sTUFBQXRNLEVBQU8sZ0JBQUFnckQsRUFBaUIsWUFBQUMsRUFBYSxnQkFBQUMsR0FBb0IsQ0FDdkgsTUFBTUMsRUFBbUIsSUFBSSxJQUN2QkMsRUFBcUIsSUFBSSxJQUMvQixVQUFXalMsS0FBbUI0UixFQUFVLENBQ3BDLE1BQU03WCxFQUFVaUcsRUFBZ0IsWUFBWSxRQUM1QyxHQUFJakcsRUFBUSxPQUFTLG1CQUNqQixTQUVKLE1BQU1zSixFQUFldEosRUFBUSxhQUM3QixHQUFJLENBQUNzSixFQUNELFNBRUosTUFBTTZPLEVBQVdsUyxFQUFnQixRQUFRLGFBQ25DbVMsRUFBb0JwWSxFQUFRLElBQU1zSixFQUFhLEdBQ3JELEdBQUk2TyxHQUFBLE1BQUFBLEVBQVUsWUFBYSxDQUN2QixNQUFNRSxFQUFpQixNQUFNRixFQUFTLFlBQVlyckQsRUFBTSxTQUFVbTVDLEVBQWdCLFdBQVcsRUFDdkZxUyxFQUF1QixDQUN6QixRQUFTRCxFQUFlLFFBQ3hCLG9CQUFxQkQsR0FBcUI5TyxFQUFhLEdBQ3ZELE9BQVErTyxFQUFlLE1BQ3ZDLEVBQ1lOLEVBQVksSUFBSTdYLEdBQWdCLENBQzVCLEtBQU0sbUJBQ04sS0FBTSx3QkFDTixhQUFjb1ksQ0FDOUIsRUFBZWwvQyxDQUFLLENBQUMsRUFDVCxRQUNKLENBQ0EsTUFBTW03QyxFQUFtQixPQUFPeUQsR0FBb0IsV0FDOUNBLEVBQWdCaFksQ0FBTyxFQUN2QixPQUNOLEdBQUksT0FBT3VVLEVBQXFCLEtBQWU2RCxFQUFtQixDQUM5RCxNQUFNRSxFQUF1QixDQUN6QixRQUFTL0QsRUFDVCxvQkFBcUI2RCxFQUNyQixPQUFRLE1BQ3hCLEVBQ1lMLEVBQVksSUFBSTdYLEdBQWdCLENBQzVCLEtBQU0sbUJBQ04sS0FBTSx3QkFDTixhQUFjb1ksQ0FDOUIsRUFBZWwvQyxDQUFLLENBQUMsRUFDVCxRQUNKLENBQ0EwK0MsRUFBZ0IsS0FBSyxDQUNqQixLQUFNLDJCQUNOLEtBQU03UixFQUFnQixRQUN0QixRQUFTQSxFQUFnQixXQUNyQyxDQUFTLEVBQ0Q4UixFQUFZOVIsRUFBZ0IsV0FBVyxFQUN2Q2dTLEVBQWlCLElBQUloUyxFQUFnQixXQUFXLEVBQzVDbVMsR0FDQUYsRUFBbUIsSUFBSUUsQ0FBaUIsQ0FFaEQsQ0FDQSxNQUFPLENBQUUsaUJBQUFILEVBQWtCLG1CQUFBQyxDQUFrQixDQUNqRCxDQ25EQSxNQUFNSyxHQUFzQixDQUN4QixnQkFDQSxtQkFDQSxhQUNBLGtCQUNKLEVBQ0EsU0FBU0MsR0FBd0J4MUQsRUFBTSxPQUNuQyxPQUFRQSxFQUFLLFFBQVEsT0FBUyxzQkFDMUJ6RSxFQUFBeUUsRUFBSyxRQUFRLGVBQWIsWUFBQXpFLEVBQTJCLFFBQVMsc0JBQzVDLENBQ0EsU0FBU2s2RCxHQUFxQnoxRCxFQUFNOEosRUFBTyxDQUN2QyxHQUFJMHJELEdBQXdCeDFELENBQUksRUFDNUIsTUFBTyxVQUVYLE1BQU1nOUMsRUFBVWg5QyxFQUFLLFFBQ2ZtN0MsRUFBV243QyxFQUFLLFdBQ2pCLFNBQVVnOUMsR0FBVyxPQUFPQSxFQUFRLE1BQVMsU0FDeENBLEVBQVEsS0FDUixRQUNKM0IsRUFBUyxXQUFZMkIsR0FBVyxPQUFPQSxFQUFRLFFBQVcsU0FDMURBLEVBQVEsT0FDUixPQUFRQSxHQUFXLE9BQU9BLEVBQVEsSUFBTyxTQUNyQ0EsRUFBUSxHQUNSLE9BQ1YsR0FBSSxDQUFDN0IsR0FBWSxDQUFDRSxFQUNkLE1BQU8sVUFFWCxNQUFNRCxFQUFXdHhDLEVBQU0sU0FBUyxlQUFlLENBQUUsU0FBQXF4QyxFQUFVLE9BQUFFLEVBQVEsRUFDbkUsT0FBSUQsSUFBYSxHQUNOLFdBRVBBLElBQWEsR0FDTixXQUVKLFNBQ1gsQ0FDQSxTQUFTc2EsR0FBbUJyMEQsRUFBTyxDQUkvQixHQUhJLENBQUNBLEdBQVMsT0FBT0EsR0FBVSxVQUczQixFQUFFLFlBQWFBLEdBQ2YsTUFBTyxHQUVYLE1BQU0yN0MsRUFBVTM3QyxFQUFNLFFBQ3RCLEdBQUksQ0FBQzI3QyxHQUFXLE9BQU9BLEdBQVksU0FDL0IsTUFBTyxHQUVYLE1BQU0yWSxFQUFXM1ksRUFBUSxLQUN6QixPQUFPdVksR0FBb0IsU0FBU0ksQ0FBUSxDQUNoRCxDQUNBLFNBQVNDLEdBQW9CeGEsRUFBVSxDQUNuQyxNQUFNNEIsRUFBVTVCLEVBQVMsUUFDekIsR0FBSSxDQUFDNEIsRUFDRCxPQUVKLEdBQUlBLEVBQVEsT0FBUyxpQkFBbUJBLEVBQVEsT0FDNUMsTUFBTyxpQkFBaUJBLEVBQVEsTUFBTSxHQUUxQyxHQUFJLFdBQVlBLEdBQVdBLEVBQVEsT0FDL0IsTUFBTyxHQUFHQSxFQUFRLElBQUksSUFBSUEsRUFBUSxNQUFNLEdBRTVDLE1BQU12K0MsRUFBSyxPQUFRdStDLEVBQVVBLEVBQVEsR0FBSyxPQUMxQyxHQUFJditDLEVBQ0EsTUFBTyxHQUFHdStDLEVBQVEsSUFBSSxJQUFJditDLENBQUUsR0FFaEMsTUFBTTZuRCxFQUFlLE9BQU90SixFQUFRLGNBQWlCLFVBQVlBLEVBQVEsYUFDbkVBLEVBQVEsYUFDUixPQUNOLEdBQUlzSixHQUFBLE1BQUFBLEVBQWMsR0FDZCxNQUFPLEdBQUd0SixFQUFRLElBQUksYUFBYXNKLEVBQWEsRUFBRSxHQUV0RCxNQUFNMUUsRUFBWSxVQUFXeEcsR0FBWUEsRUFBUyxNQUFRQSxFQUFTLE1BQU0sS0FBTyxHQUNoRixHQUFJLENBQ0EsTUFBTyxHQUFHd0csQ0FBUyxJQUFJNUUsRUFBUSxJQUFJLElBQUksS0FBSyxVQUFVQSxDQUFPLENBQUMsRUFDbEUsTUFDTSxDQUNGLE1BQU8sR0FBRzRFLENBQVMsSUFBSTVFLEVBQVEsSUFBSSxFQUN2QyxDQUNKLENBQ0EsU0FBUzZZLEdBQW1CQyxFQUFlLENBQ3ZDLE1BQU1DLEVBQVksSUFBSSxJQUFJRCxDQUFhLEVBQ2pDRSxFQUF5QixJQUFJLElBQ25DLFVBQVdoMkQsS0FBUTgxRCxFQUNmLEdBQUk5MUQsYUFBZ0J5OUMsR0FBcUIsQ0FDckMsTUFBTXdZLEVBQVdMLEdBQW9CNTFELENBQUksRUFDckNpMkQsR0FDQUQsRUFBdUIsSUFBSUMsQ0FBUSxDQUUzQyxDQUVKLE1BQU8sQ0FBRSxVQUFBRixFQUFXLHVCQUFBQyxDQUFzQixDQUM5QyxDQUNBLFNBQVNFLEdBQW1CbDJELEVBQU1rWSxFQUFRMUMsRUFBUyxDQUMvQyxHQUFJLENBQUFBLEVBQVEsVUFBVSxJQUFJeFYsQ0FBSSxFQUc5QixJQUFJQSxhQUFnQnk5QyxHQUFxQixDQUNyQyxNQUFNd1ksRUFBV0wsR0FBb0I1MUQsQ0FBSSxFQUN6QyxHQUFJaTJELEVBQVUsQ0FDVixHQUFJemdELEVBQVEsdUJBQXVCLElBQUl5Z0QsQ0FBUSxFQUMzQyxPQUVKemdELEVBQVEsdUJBQXVCLElBQUl5Z0QsQ0FBUSxDQUMvQyxDQUNKLENBQ0F6Z0QsRUFBUSxVQUFVLElBQUl4VixDQUFJLEVBQzFCa1ksRUFBTyxLQUFLbFksQ0FBSSxFQUNwQixDQUNBLFNBQVNtMkQsR0FBdUJ4dEQsRUFBT2xHLEVBQU0sQ0FDekMsTUFBTTJ6RCxFQUFVLElBQUksSUFDcEIsVUFBV3AyRCxLQUFRMkksRUFBTyxDQUN0QixHQUFJLEVBQUUzSSxhQUFnQnk5QyxJQUNsQixTQUVKLE1BQU1ULEVBQVVoOUMsRUFBSyxRQUNqQixDQUFDZzlDLEdBQVdBLEVBQVEsT0FBU3Y2QyxJQUc3QixXQUFZdTZDLEdBQVdBLEVBQVEsT0FDL0JvWixFQUFRLElBQUlwWixFQUFRLE1BQU0sRUFFckIsT0FBUUEsR0FBV0EsRUFBUSxJQUNoQ29aLEVBQVEsSUFBSXBaLEVBQVEsRUFBRSxFQUU5QixDQUNBLE9BQU9vWixDQUNYLENBQ0EsU0FBU0MsR0FBd0IxdEQsRUFBT2xHLEVBQU0sQ0FDMUMsTUFBTTZ6RCxFQUFZLElBQUksSUFDdEIsVUFBV3QyRCxLQUFRMkksRUFBTyxDQUN0QixNQUFNcTBDLEVBQVVoOUMsRUFBSyxRQUlyQixHQUhJLENBQUNnOUMsR0FBVyxPQUFPQSxHQUFZLFVBRy9CQSxFQUFRLE9BQVN2NkMsRUFDakIsU0FFSixNQUFNNDRDLEVBQVMyQixFQUFRLE9BQ25CLE9BQU8zQixHQUFXLFVBQ2xCaWIsRUFBVSxJQUFJamIsQ0FBTSxDQUU1QixDQUNBLE9BQU9pYixDQUNYLENBQ0EsU0FBU0MsR0FBd0J2WSxFQUFjMkosRUFBU2xsRCxFQUFNLENBQzFELE1BQU0rekQsRUFBaUJMLEdBQXVCblksRUFBY3Y3QyxDQUFJLEVBQ2hFLE9BQUkrekQsRUFBZSxPQUFTLEVBQ2pCLENBQUEsRUFFSjdPLEVBQVEsT0FBUWdKLEdBQVcsT0FBT0EsRUFBTyxTQUFTLFFBQVcsVUFDaEU2RixFQUFlLElBQUk3RixFQUFPLFNBQVMsTUFBTSxDQUFDLENBQ2xELENBQ0EsU0FBUzhGLEdBQXFCOU8sRUFBU25uRCxFQUFTLENBQzVDLE9BQU9tbkQsRUFBUSxPQUFRZ0osR0FBVyxDQUM5QixNQUFNdFYsRUFBU3NWLEVBQU8sU0FBUyxPQUN6QitGLEVBQVksT0FBT3JiLEdBQVcsU0FNcEMsTUFMSSxFQUFBNzZDLEVBQVEsZ0JBQWtCQSxFQUFRLGVBQWUsS0FBTyxJQUNwRCxDQUFDazJELEdBQWEsQ0FBQ2wyRCxFQUFRLGVBQWUsSUFBSTY2QyxDQUFNLElBSXBEcWIsR0FBYWwyRCxFQUFRLGlCQUFpQixJQUFJNjZDLENBQU0sRUFJeEQsQ0FBQyxDQUNMLENBQ0EsU0FBU3NiLEdBQXFCbHpELEVBQVNtOUIsRUFBWSxJQUFLLENBQ3BELE1BQU0zZCxFQUFVeGYsRUFBUSxLQUFJLEVBQzVCLE9BQUt3ZixFQUdEQSxFQUFRLFFBQVUyZCxFQUNYM2QsRUFFSixHQUFHQSxFQUFRLE1BQU0sRUFBRzJkLEVBQVksQ0FBQyxDQUFDLE1BTDlCLDJCQU1mLENBQ0EsU0FBU2cyQixHQUEyQng4RCxFQUFPLENBRXZDLEdBQUksQ0FDQSxHQUFJQSxhQUFpQnk4RCxHQUFZLENBQzdCLE1BQU03N0MsRUFBUTVnQixFQUFNLE9BQU8sQ0FBQyxFQUM1QixHQUFJNGdCLEVBQU8sQ0FDUCxNQUFNODdDLEVBQWlCLE1BQU0sUUFBUTk3QyxFQUFNLElBQUksRUFBSUEsRUFBTSxLQUFPLENBQUEsRUFDMUQrN0MsRUFBWUQsRUFBZSxPQUFTLEVBQ3BDQSxFQUFlLElBQUs3WixHQUFTLE9BQU9BLENBQUksQ0FBQyxFQUFFLEtBQUssR0FBRyxFQUNuRCxTQUNBeDVDLEVBQVVrekQsR0FBcUIzN0MsRUFBTSxTQUFXLEVBQUUsRUFDeEQsTUFBTyw0RUFBNEUrN0MsQ0FBUyxNQUFNdHpELENBQU8sSUFDN0csQ0FDQSxNQUFPLHVFQUNYLENBQ0EsR0FBSXJKLGFBQWlCLE9BQVNBLEVBQU0sUUFDaEMsTUFBTyx3QkFBd0J1OEQsR0FBcUJ2OEQsRUFBTSxPQUFPLENBQUMsRUFFMUUsTUFDTSxDQUVOLENBQ0EsTUFBTyxnRkFDWCxDQU1PLGVBQWU0OEQsR0FBdUI1Z0QsRUFBTzAwQixFQUFlbXNCLEVBQXNCL0UsRUFBYWdGLEVBQW1CN0gsRUFBUXZsRCxFQUFPLENBRXBJLE1BQU1xdEQsRUFBa0JGLEVBQ25CLE9BQVFqM0QsR0FBU0EsYUFBZ0J5OUMsSUFDbEMsV0FBWXo5QyxFQUFLLFNBQ2pCQSxFQUFLLFFBQVEsT0FBUyxlQUFlLEVBQ3BDLElBQUtBLEdBQVNBLEVBQUssUUFBUSxNQUFNLEVBQ2hDbzNELEVBQTJCZixHQUF3QlksRUFBc0Isc0JBQXNCLEVBQy9GSSxFQUF3QmhCLEdBQXdCWSxFQUFzQixtQkFBbUIsRUFDekZLLEVBQTZCakIsR0FBd0JZLEVBQXNCLHlCQUF5QixFQUlwR00sRUFBdUJ6dEQsRUFDeEIsaUJBQWdCLEVBQ2hCLE9BQU80ckQsRUFBa0IsRUFDeEI4QixFQUE0QixJQUFJLElBQ3RDLFVBQVdwYyxLQUFZbWMsRUFBc0IsQ0FJekMsR0FISSxFQUFFbmMsYUFBb0JxQyxLQUd0QitYLEdBQXdCcGEsQ0FBUSxFQUNoQyxTQUVKLE1BQU00QixFQUFVNUIsRUFBUyxRQVd6QixHQVZJNEIsRUFBUSxPQUFTLGlCQUNqQkEsRUFBUSxRQUNSb2EsRUFBeUIsSUFBSXBhLEVBQVEsTUFBTSxHQUczQ0EsRUFBUSxPQUFTLGNBQ2pCQSxFQUFRLFFBQ1JxYSxFQUFzQixJQUFJcmEsRUFBUSxNQUFNLEdBR3hDQSxFQUFRLE9BQVMsb0JBQ2pCQSxFQUFRLFFBQ1JzYSxFQUEyQixJQUFJdGEsRUFBUSxNQUFNLEVBQzdDLFNBRUosTUFBTWlaLEdBQVdMLEdBQW9CeGEsQ0FBUSxFQUN6QzZhLElBQ0lSLEdBQXFCcmEsRUFBVXR4QyxDQUFLLElBQU0sV0FDMUMwdEQsRUFBMEIsSUFBSXZCLEVBQVEsQ0FHbEQsQ0FFQSxNQUFNd0IsRUFBbUJQLEVBQWtCLFVBQVUsT0FBUVEsR0FBUSxDQUNqRSxNQUFNcmMsRUFBU3FjLEVBQUksU0FBUyxPQUM1QixHQUFJLENBQUNyYyxFQUNELE1BQU8sR0FFWCxNQUFNc2MsR0FBaUJSLEVBQWdCLFNBQVM5YixDQUFNLEVBQ2hEdWMsR0FBa0I5dEQsRUFBTSx1QkFBdUI0dEQsRUFBSSxLQUFLLEtBQU1yYyxDQUFNLEVBQzFFLE1BQUksQ0FBQ3NjLElBQWtCLENBQUNDLEdBQ2IsR0FFSixDQUFDUixFQUF5QixJQUFJL2IsQ0FBTSxDQUMvQyxDQUFDLEVBQ0t3YyxFQUFZcEIsR0FBcUJGLEdBQXdCVSxFQUFzQkMsRUFBa0IsYUFBYyxZQUFZLEVBQUcsQ0FDaEksaUJBQWtCRyxDQUMxQixDQUFLLEVBQ0tTLEVBQXlCckIsR0FBcUJTLEVBQWtCLGdCQUFpQixDQUNuRixpQkFBa0JiLEdBQXdCWSxFQUFzQixzQkFBc0IsQ0FDOUYsQ0FBSyxFQUNLYyxFQUFpQnRCLEdBQXFCRixHQUF3QlUsRUFBc0JDLEVBQWtCLGtCQUFtQixrQkFBa0IsRUFBRyxDQUNoSixpQkFBa0JJLENBQzFCLENBQUssRUFDS3hDLEVBQWtCLE1BQU0zRixHQUF5Qi80QyxFQUFPcWhELEVBQWtCcEksRUFBUXZsRCxDQUFLLEVBR3ZGa3VELEVBQWtCRixFQUF1QixPQUFTLEVBQ2xELE1BQU0vRixHQUF1QjM3QyxFQUFPMGhELEVBQXdCekksRUFBUXZsRCxFQUFNLFFBQVEsRUFDbEYsQ0FBQSxFQUNBbXVELEVBQWVKLEVBQVUsT0FBUyxFQUNsQyxNQUFNekcsR0FBb0JoN0MsRUFBT3loRCxFQUFXeEksRUFBUXZsRCxFQUFNLFFBQVEsRUFDbEUsQ0FBQSxFQUNBb3VELEVBQW9CSCxFQUFlLE9BQVMsRUFDNUMsTUFBTWxHLEdBQTRCejdDLEVBQU8yaEQsRUFBZ0IxSSxFQUFRdmxELEVBQU0sUUFBUSxFQUMvRSxDQUFBLEVBQ0FxdUQsRUFBVyxDQUFBLEVBQ1hDLEVBQWdCdkMsR0FBbUJvQixDQUFvQixFQUN2RGxDLEVBQWUvMEQsR0FBU2syRCxHQUFtQmwyRCxFQUFNbTRELEVBQVVDLENBQWEsRUFDOUUsVUFBV3o4RCxLQUFVbTVELEVBQ2JuNUQsRUFBTyxPQUFTLG1CQUNoQixNQUFNLFFBQVFBLEVBQU8sYUFBYSxHQUNsQ0EsRUFBTyxjQUFjLE9BQVMsR0FHbENvNUQsRUFBWXA1RCxFQUFPLE9BQU8sRUFFOUIsVUFBV0EsS0FBVXE4RCxFQUNqQmpELEVBQVlwNUQsQ0FBTSxFQUV0QixVQUFXQSxLQUFVczhELEVBQ2pCbEQsRUFBWXA1RCxDQUFNLEVBRXRCLFVBQVdBLEtBQVV1OEQsRUFDakJuRCxFQUFZcDVELENBQU0sRUFFdEIsTUFBTW8zRCxFQUEwQkwsR0FBcUIsQ0FBQSxFQUFJLENBQUMsR0FBR3VGLEVBQWMsR0FBR0MsQ0FBaUIsQ0FBQyxFQUMxRkcsRUFBcUIsTUFBTXpELEdBQXlCLENBQ3RELFNBQVVzQyxFQUFrQixvQkFDNUIsTUFBQTlnRCxFQUNBLE1BQUF0TSxFQUNBLGdCQUFBZ3JELEVBQ0EsWUFBQUMsRUFDQSxnQkFBa0IvWCxHQUFZLENBQzFCLE1BQU1zSixFQUFldEosRUFBUSxhQUN2Qm9ZLEdBQW9CcFksRUFBUSxLQUFNc0osR0FBQSxZQUFBQSxFQUFjLElBQ3RELEdBQUs4TyxHQUdMLE9BQU90ckQsRUFBTSxTQUFTLGVBQWUsQ0FDakMsU0FBVWt6QyxFQUFRLEtBQ2xCLE9BQVFvWSxFQUN4QixDQUFhLENBQ0wsQ0FDUixDQUFLLEVBS0twWCxHQUFlaVosRUFBcUIsT0FBUWozRCxHQUFTLFFBQ3ZELEdBQUksRUFBRUEsYUFBZ0J5OUMsSUFDbEIsTUFBTyxHQUVYLEdBQUkrWCxHQUF3QngxRCxDQUFJLEVBQUcsQ0FDL0IsR0FBSXE0RCxFQUFtQixpQkFBaUIsSUFBSXI0RCxDQUFJLEVBQzVDLE1BQU8sR0FFWCxNQUFNbzFELEdBQW9CcDFELEVBQUssUUFBUSxNQUNuQ3pFLEdBQUF5RSxFQUFLLFFBQVEsZUFBYixZQUFBekUsR0FBMkIsSUFDL0IsT0FBSTY1RCxHQUNPaUQsRUFBbUIsbUJBQW1CLElBQUlqRCxFQUFpQixFQUUvRCxFQUNYLENBR0EsTUFBTWEsRUFBV0wsR0FBb0I1MUQsQ0FBSSxFQUN6QyxPQUFLaTJELEVBR0V1QixFQUEwQixJQUFJdkIsQ0FBUSxFQUZsQyxFQUdmLENBQUMsRUFDS3FDLEdBQW9CLElBQUksSUFDOUIsVUFBV3Q0RCxLQUFRZytDLEdBQ1hoK0MsYUFBZ0J5OUMsSUFDaEI2YSxHQUFrQixJQUFJdDRELENBQUksRUFHbEMsSUFBSXU0RCxHQUF1QixFQUMzQixVQUFXdjRELEtBQVFpM0QsRUFDWGozRCxhQUFnQnk5QyxJQUF1QixDQUFDNmEsR0FBa0IsSUFBSXQ0RCxDQUFJLEdBQ2xFdTRELEtBR0pBLEdBQXVCLEdBR3ZCenVELEVBQU0sc0JBQXNCeXVELEVBQW9CLEVBRXBELE1BQU1DLEdBQWdCLE1BQU1DLEdBQWlDLENBQ3pELE1BQUFyaUQsRUFDQSxPQUFBaTVDLEVBQ0EsTUFBQXZsRCxFQUNBLGdCQUFBZ3JELEVBQ0EsY0FBQWhxQixFQUNBLFlBQUFvbkIsRUFDQSxhQUFBbFUsR0FDQSxTQUFBbWEsRUFDQSx3QkFBQXBGLENBQ1IsQ0FBSyxFQUNELE9BQUl5RixJQUlHLElBQUkxYSxHQUFpQmhULEVBQWVvbkIsRUFBYWxVLEdBQWNtYSxFQUFVLENBQUUsS0FBTSxzQkFBdUIsQ0FDbkgsQ0FNTyxlQUFlTyxHQUE4QnRpRCxFQUFPMDBCLEVBQWVtc0IsRUFBc0IvRSxFQUFhZ0YsRUFBbUI3SCxFQUFRdmxELEVBQU8sQ0FHM0ksTUFBTWswQyxFQUFlaVosRUFDZmtCLEVBQVcsQ0FBQSxFQUNYQyxFQUFnQnZDLEdBQW1Cb0IsQ0FBb0IsRUFDdkRsQyxFQUFlLzBELEdBQVNrMkQsR0FBbUJsMkQsRUFBTW00RCxFQUFVQyxDQUFhLEVBQzlFLFVBQVdwNEQsS0FBUWszRCxFQUFrQixTQUNqQ25DLEVBQVkvMEQsQ0FBSSxFQUdwQixLQUFNLENBQUM4MEQsRUFBaUJrRCxFQUFpQkMsRUFBY0MsQ0FBaUIsRUFBSSxNQUFNLFFBQVEsSUFBSSxDQUMxRi9JLEdBQXlCLzRDLEVBQU84Z0QsRUFBa0IsVUFBVzdILEVBQVF2bEQsQ0FBSyxFQUMxRWlvRCxHQUF1QjM3QyxFQUFPOGdELEVBQWtCLGdCQUFpQjdILEVBQVF2bEQsRUFBTSxRQUFRLEVBQ3ZGc25ELEdBQW9CaDdDLEVBQU84Z0QsRUFBa0IsYUFBYzdILEVBQVF2bEQsRUFBTSxRQUFRLEVBQ2pGK25ELEdBQTRCejdDLEVBQU84Z0QsRUFBa0Isa0JBQW1CN0gsRUFBUXZsRCxFQUFNLFFBQVEsQ0FDdEcsQ0FBSyxFQUNELFVBQVduTyxLQUFVbTVELEVBQ2JuNUQsRUFBTyxPQUFTLG1CQUNoQixNQUFNLFFBQVFBLEVBQU8sYUFBYSxHQUNsQ0EsRUFBTyxjQUFjLE9BQVMsR0FHbENvNUQsRUFBWXA1RCxFQUFPLE9BQU8sRUFFOUIsVUFBV3FFLEtBQVFnNEQsRUFDZmpELEVBQVkvMEQsQ0FBSSxFQUVwQixVQUFXQSxLQUFRaTRELEVBQ2ZsRCxFQUFZLzBELENBQUksRUFFcEIsVUFBV0EsS0FBUWs0RCxFQUNmbkQsRUFBWS8wRCxDQUFJLEVBRXBCLE1BQU0reUQsRUFBMEJMLEdBQXFCLENBQUEsRUFBSSxDQUFDLEdBQUd1RixFQUFjLEdBQUdDLENBQWlCLENBQUMsRUFzQmhHLEdBckJJaEIsRUFBa0Isb0JBQW9CLE9BQVMsR0FDL0MsTUFBTXRDLEdBQXlCLENBQzNCLFNBQVVzQyxFQUFrQixvQkFDNUIsTUFBQTlnRCxFQUNBLE1BQUF0TSxFQUNBLGdCQUFBZ3JELEVBQ0EsWUFBQUMsRUFDQSxnQkFBa0IvWCxHQUFZLENBQzFCLE1BQU1zSixFQUFldEosRUFBUSxhQUN2Qm9ZLEVBQW9CcFksRUFBUSxLQUFNc0osR0FBQSxZQUFBQSxFQUFjLElBQ3RELEdBQUs4TyxFQUdMLE9BQU90ckQsRUFBTSxTQUFTLGVBQWUsQ0FDakMsU0FBVWt6QyxFQUFRLEtBQ2xCLE9BQVFvWSxDQUM1QixDQUFpQixDQUNMLENBQ1osQ0FBUyxFQUdEOEIsRUFBa0IsU0FBUyxPQUFTLEVBQ3BDLE9BQU8sTUFBTWpGLEdBQW9CNzdDLEVBQU8wMEIsRUFBZWtULEVBQWNtYSxFQUFVakcsRUFBYWdGLEVBQWtCLFNBQVU3SCxFQUFRdmxELEVBQU0sUUFBUSxFQUVsSixNQUFNMHVELEVBQWdCLE1BQU1DLEdBQWlDLENBQ3pELE1BQUFyaUQsRUFDQSxPQUFBaTVDLEVBQ0EsTUFBQXZsRCxFQUNBLGdCQUFBZ3JELEVBQ0EsY0FBQWhxQixFQUNBLFlBQUFvbkIsRUFDQSxhQUFBbFUsRUFDQSxTQUFBbWEsRUFDQSx3QkFBQXBGLENBQ1IsQ0FBSyxFQUNELEdBQUl5RixFQUNBLE9BQU9BLEVBS1gsR0FBSXRCLEVBQWtCLDJCQUNsQixPQUFPLElBQUlwWixHQUFpQmhULEVBQWVvbkIsRUFBYWxVLEVBQWNtYSxFQUFVLENBQUUsS0FBTSxzQkFBdUIsRUFHbkgsTUFBTVEsRUFBZVIsRUFBUyxPQUFRbjRELEdBQVNBLGFBQWdCKzhDLEVBQW9CLEVBRTdFNmIsRUFBdUJELEVBQWEsT0FBUyxFQUM3QzFLLEdBQTZCMEssRUFBYUEsRUFBYSxPQUFTLENBQUMsRUFBRSxPQUFPLEVBQzFFLE9BRU4sR0FBSSxPQUFPQyxFQUF5QixJQUNoQyxPQUFPLElBQUk5YSxHQUFpQmhULEVBQWVvbkIsRUFBYWxVLEVBQWNtYSxFQUFVLENBQUUsS0FBTSxzQkFBdUIsRUFJbkgsR0FBSSxFQUQrQnJELEVBQWdCLEtBQU1uNUQsR0FBV0EsRUFBTyxtQkFBbUI4aEQsRUFBbUIsR0FBS3NWLEVBQXdCLE9BQVMsR0FDdEgsQ0FDN0IsR0FBSTM4QyxFQUFNLGFBQWUsT0FDckIsT0FBTyxJQUFJMG5DLEdBQWlCaFQsRUFBZW9uQixFQUFhbFUsRUFBY21hLEVBQVUsQ0FDNUUsS0FBTSx5QkFDTixPQUFRUyxDQUN4QixDQUFhLEVBRUwsR0FBSXhpRCxFQUFNLGFBQWUsUUFBVXdpRCxFQUFzQixDQUVyRCxLQUFNLENBQUUsT0FBQXo0RCxDQUFNLEVBQUt1TixHQUFnQzBJLEVBQU0sV0FBWSxjQUFjLEVBQzdFLENBQUNoYyxDQUFLLEVBQUksTUFBTUYsR0FBWSxJQUFNaUcsRUFBT3k0RCxDQUFvQixDQUFDLEVBQ3BFLEdBQUl4K0QsRUFBTyxDQUNQLE1BQU15K0QsRUFBcUJqQyxHQUEyQng4RCxDQUFLLEVBQzNELE1BQUE2NUMsR0FBc0IsQ0FDbEIsUUFBUzRrQixFQUNULEtBQU0sQ0FDRixNQUFPLE9BQU96K0QsQ0FBSyxDQUMzQyxDQUNBLENBQWlCLEVBQ0ssSUFBSThQLEdBQW1CMnVELENBQWtCLENBQ25ELENBQ0EsT0FBTyxJQUFJL2EsR0FBaUJoVCxFQUFlb25CLEVBQWFsVSxFQUFjbWEsRUFBVSxDQUFFLEtBQU0seUJBQTBCLE9BQVFTLENBQW9CLENBQUUsQ0FDcEosQ0FDSixDQUNBLE9BQU8sSUFBSTlhLEdBQWlCaFQsRUFBZW9uQixFQUFhbFUsRUFBY21hLEVBQVUsQ0FBRSxLQUFNLHNCQUF1QixDQUNuSCxDQUdBLGVBQWVNLEdBQWlDLENBQUUsTUFBQXJpRCxFQUFPLE9BQVEwaUQsRUFBUyxNQUFBaHZELEVBQU8sZ0JBQUFnckQsRUFBaUIsY0FBQWhxQixFQUFlLFlBQUFvbkIsRUFBYSxhQUFBbFUsRUFBYyxTQUFBbWEsRUFBVSx3QkFBQXBGLEVBQTBCLENBQUEsQ0FBRSxFQUFLLENBQ25MLE1BQU1nRyxFQUFjLE1BQU1qRyxHQUE2QjE4QyxFQUFPMCtDLEVBQWlCaHJELEVBQU9pcEQsQ0FBdUIsRUFDN0csT0FBSWdHLEVBQVksY0FDTCxJQUFJamIsR0FBaUJoVCxFQUFlb25CLEVBQWFsVSxFQUFjbWEsRUFBVSxDQUM1RSxLQUFNLHlCQUNOLE9BQVFZLEVBQVksV0FDaEMsQ0FBUyxFQUVEQSxFQUFZLGNBQ0wsSUFBSWpiLEdBQWlCaFQsRUFBZW9uQixFQUFhbFUsRUFBY21hLEVBQVUsQ0FDNUUsS0FBTSx5QkFDTixLQUFNLENBQ0YsY0FBZVksRUFBWSxhQUMzQyxDQUNBLENBQVMsRUFFRSxJQUNYLENDemhCQSxTQUFTQyxHQUFtQjMzRCxFQUFPLENBQy9CLE1BQVEsQ0FBQyxDQUFDQSxHQUNOLE9BQU9BLEdBQVUsVUFDakIsZ0JBQWlCQSxHQUNqQixlQUFnQkEsQ0FDeEIsQ0FDTyxTQUFTNDNELEdBQWN2eEQsRUFBTSxDQUNoQyxHQUFJQSxFQUFLLE9BQVMsV0FDZCxNQUFPLENBQ0gsS0FBTSxXQUNOLEtBQU1BLEVBQUssS0FDWCxZQUFhQSxFQUFLLFlBQ2xCLFdBQVlBLEVBQUssV0FDakIsT0FBUUEsRUFBSyxNQUN6QixFQUVJLEdBQUlBLEVBQUssT0FBUyxXQUFZLENBRTFCLEdBQUksQ0FBQ3N4RCxHQUFtQnR4RCxFQUFLLFFBQVEsRUFDakMsTUFBTSxJQUFJNEMsRUFBVSx1S0FBdUssRUFFL0wsTUFBTyxDQUNILEtBQU0sV0FDTixLQUFNNUMsRUFBSyxLQUNYLFlBQWFBLEVBQUssU0FBUyxZQUMzQixXQUFZQSxFQUFLLFNBQVMsVUFDdEMsQ0FDSSxDQUNBLE9BQUlBLEVBQUssT0FBUyxRQUNQLENBQ0gsS0FBTSxRQUNOLEtBQU1BLEVBQUssSUFDdkIsRUFFUUEsRUFBSyxPQUFTLGNBQ1AsQ0FDSCxLQUFNLGNBQ04sS0FBTUEsRUFBSyxJQUN2QixFQUVXLENBQ0gsS0FBTSxjQUNOLEtBQU1BLEVBQUssS0FDWCxhQUFjQSxFQUFLLFlBQzNCLENBQ0EsQ0FDTyxTQUFTd3hELEdBQWlCOXFELEVBQUcsQ0FDaEMsTUFBTyxDQUNILFNBQVVBLEVBQUUsU0FDWixnQkFBaUJBLEVBQUUsZ0JBQ25CLGdCQUFpQkEsRUFBRSxnQkFDbkIsaUJBQWtCQSxFQUFFLGdCQUM1QixDQUNBLENDOUNPLFNBQVMrcUQsR0FBV0MsRUFBaUJDLEVBQTJCLENBQ25FLE9BQUlELEVBQ08sR0FFUEMsRUFDTyxHQUVKLHNCQUNYLENBQ0EsU0FBU0MsR0FBZ0J2eUIsRUFBTXVNLEVBQU8sQ0FDbEMsTUFBTStPLEVBQWV0YixFQUFLLGFBQ3BCdXlCLEdBQWdCdnlCLEVBQUssYUFBY3VNLENBQUssRUFDeEMsT0FDQXgzQyxFQUFTdW1ELEdBQWdCL08sRUFDekJpbUIsRUFBYzNsQixHQUFzQixFQUFHLFdBQVcsQ0FDcEQsT0FBUTdNLEVBQUssT0FDYixTQUFVQSxFQUFLLFVBQVksT0FDM0IsVUFBV0EsRUFBSyxXQUFhLE9BQzdCLFFBQVNBLEVBQUssU0FBVyxPQUN6QixLQUFNQSxFQUFLLFNBQ1gsTUFBT0EsRUFBSyxPQUFTLE9BQ3JCLGNBQWVBLEVBQUssYUFDNUIsRUFBT2pyQyxDQUFNLEVBQ1QsT0FBQXk5RCxFQUFZLGFBQWVsWCxFQUNwQmtYLENBQ1gsQ0FDTyxTQUFTQyxHQUFvQmxtQixFQUFPcjlCLEVBQWF3akQsRUFBVyxDQUMvRCxNQUFNQyxFQUFrQkQsRUFBVSxVQUFZLFFBQWFBLEVBQVUsVUFBWW5tQixFQUFNLFFBQ2pGcW1CLEVBQXdCRixFQUFVLGdCQUFrQixRQUN0REEsRUFBVSxnQkFBa0JubUIsRUFBTSxjQWdCdEMsT0FmSW1tQixFQUFVLFVBQVksU0FDdEJubUIsRUFBTSxRQUFVbW1CLEVBQVUsU0FFMUJBLEVBQVUsZUFBaUIsU0FDM0JubUIsRUFBTSxLQUFPbW1CLEVBQVUsY0FFdkJBLEVBQVUsVUFBWSxTQUN0Qm5tQixFQUFNLFFBQVVtbUIsRUFBVSxTQUFXLE1BRXJDQSxFQUFVLGdCQUFrQixTQUM1Qm5tQixFQUFNLFNBQVdtbUIsRUFBVSxlQUUzQkEsRUFBVSxnQkFBa0IsU0FDNUJubUIsRUFBTSxjQUFnQm1tQixFQUFVLGVBRWhDeGpELElBQWdCeWpELEdBQW1CQyxHQUM1QixDQUFFLE1BQUFybUIsRUFBTyxZQUFhZ21CLEdBQWdCcmpELEVBQWFxOUIsQ0FBSyxDQUFDLEVBRTdELENBQUUsTUFBQUEsRUFBTyxZQUFBcjlCLENBQVcsQ0FDL0IsQ0FLTyxTQUFTMmpELEdBQWdCditELEVBQVEsQ0FDcEMsS0FBTSxDQUFFLE1BQUErYSxFQUFPLFNBQUF3c0MsRUFBVSxNQUFBbmIsRUFBTyxZQUFBeHhCLENBQVcsRUFBSzVhLEVBQzFDdytELEVBQWU1akQsRUFDckIsR0FBSTRqRCxFQUNBLE9BQUFBLEVBQWEsU0FBUyxNQUFRcHlCLEVBQU0sSUFBSzVmLEdBQU1BLEVBQUUsSUFBSSxFQUM5Q2d5QyxFQUVYLE1BQU1DLEVBQWVsWCxFQUFTLElBQUt4MEMsR0FBTUEsRUFBRSxTQUFTLEVBQzlDMjRCLEVBQU9nUyxHQUFnQixDQUN6QixLQUFNLENBQ0YsS0FBTTNpQyxFQUFNLEtBQ1osU0FBVTBqRCxFQUNWLE1BQU9yeUIsRUFBTSxJQUFLNWYsR0FBTUEsRUFBRSxJQUFJLEVBQzlCLFlBQWF6UixFQUFNLGdCQUMvQixDQUNBLENBQUssRUFDRCxPQUFBMndCLEVBQUssTUFBSyxFQUNWZ04sR0FBZWhOLENBQUksRUFDWkEsQ0FDWCxDQzFFTyxlQUFlZ3pCLEdBQXNCandELEVBQU8sQ0FDL0MsTUFBTWt3RCxFQUFlLE1BQU1DLEdBQXlCbndELENBQUssRUFDekQsYUFBTW93RCxHQUFvQkYsRUFBYSxNQUFPbHdELEVBQU0sUUFBUSxFQUM1REEsRUFBTSxvQkFBb0I4dkQsR0FBZ0IsQ0FDdEMsTUFBTzl2RCxFQUFNLGNBQ2IsU0FBVWt3RCxFQUFhLFNBQ3ZCLE1BQU9BLEVBQWEsTUFDcEIsWUFBYWx3RCxFQUFNLGlCQUMzQixDQUFLLENBQUMsRUFDSyxDQUNILEdBQUdrd0QsRUFDSCxtQkFBb0JBLEVBQWEsU0FBUyxJQUFLL2QsR0FBWWlkLEdBQWlCamQsQ0FBTyxDQUFDLEVBQ3BGLGdCQUFpQitkLEVBQWEsTUFBTSxJQUFLdHlELEdBQVN1eEQsR0FBY3Z4RCxDQUFJLENBQUMsRUFDckUsd0JBQXlCb0MsRUFBTSxjQUFjLHNCQUFxQixDQUMxRSxDQUNBLENBQ0EsZUFBZW13RCxHQUF5Qm53RCxFQUFPLENBQzNDLE1BQU04NEMsRUFBVyxNQUFNOTRDLEVBQU0sY0FBYyxtQkFBbUJBLEVBQU0sUUFBUSxFQUN0RTI5QixFQUFTLE1BQU0zOUIsRUFBTSxjQUFjLFlBQVlBLEVBQU0sUUFBUSxFQUNuRSxNQUFPLENBQUUsU0FBQTg0QyxFQUFVLE1BQUFuYixDQUFLLENBQzVCLENBQ0EsZUFBZXl5QixHQUFvQnp5QixFQUFPaHpCLEVBQVksQ0FDbEQsTUFBTWd1QyxFQUFnQmhiLEVBQU0sT0FBUS8vQixHQUFTQSxFQUFLLE9BQVMsVUFBVSxFQUNqRSs2QyxFQUFjLFNBQVcsR0FHN0IsTUFBTSxRQUFRLElBQUlBLEVBQWMsSUFBSSxNQUFPLzZDLEdBQVMsQ0FDaEQsTUFBTWlOLEdBQWdCLENBQUUsS0FBQWpOLEVBQU0sV0FBQStNLEVBQVksQ0FDOUMsQ0FBQyxDQUFDLENBQ04sQ0MvQk8sZUFBZTBsRCxHQUFZMzVELEVBQVMsT0FDdkMsS0FBTSxDQUFFLE1BQUFzSixFQUFPLE1BQUF0SyxFQUFPLGVBQUFpc0MsRUFBZ0IsZUFBQTJ1QixFQUFnQixnQ0FBQUMsRUFBaUMsMEJBQUFDLEVBQTJCLDBCQUFBQyxFQUEyQixtQkFBQUMsRUFBb0Isa0JBQUFDLEVBQW1CLGVBQUFDLENBQWMsRUFBTWw2RCxFQUNsTW02RCxFQUFZLE1BQU1aLEdBQXNCandELENBQUssRUFDN0MsQ0FBRSwyQkFBQTh3RCxDQUEwQixFQUFLQyxHQUFVL3dELEVBQU8sQ0FDcEQsZUFBQXN3RCxFQUNBLGdDQUFBQyxFQUNBLDBCQUFBQyxDQUNSLENBQUssRUFDRCxHQUFJeHdELEVBQU0sYUFBZUEsRUFBTSxVQUMzQixNQUFBdk8sRUFBQXVPLEVBQU0sb0JBQU4sTUFBQXZPLEVBQXlCLFNBQVMsQ0FDOUIsUUFBUyxxQkFDVCxLQUFNLENBQUUsVUFBV3VPLEVBQU0sU0FBUyxDQUM5QyxHQUNjLElBQUlHLEdBQXNCLGNBQWNILEVBQU0sU0FBUyxhQUFjQSxDQUFLLEVBRXBGMEksRUFBTyxNQUFNLGlCQUFpQjFJLEVBQU0sY0FBYyxJQUFJLFVBQVVBLEVBQU0sWUFBWSxHQUFHLEVBQ3JGLEtBQU0sQ0FBRSx5QkFBQWd4RCxDQUF3QixFQUFLLE1BQU1DLEdBQTBCanhELEVBQU8wd0QsRUFBb0JJLEVBQTRCSCxDQUFpQixFQUN2SU8sRUFBWVQsRUFDWkEsRUFBMEIsYUFBYS82RCxFQUFPaXNDLENBQWMsRUFDNURELEdBQWFoc0MsRUFBT2lzQyxDQUFjLEVBQ3hDLE9BQUkzaEMsRUFBTSxvQkFDTkEsRUFBTSxjQUFjLEtBQUssY0FBZUEsRUFBTSxTQUFVQSxFQUFNLGNBQWVreEQsQ0FBUyxFQUN0Rk4sR0FBQSxNQUFBQSxFQUFpQjV3RCxFQUFNLFNBQVVBLEVBQU0sY0FBZWt4RCxJQUVuRCxDQUNILFVBQUFMLEVBQ0EsVUFBQUssRUFDQSx5QkFBQUYsQ0FDUixDQUNBLENBQ0EsZUFBZUMsR0FBMEJqeEQsRUFBTzY3QyxFQUFrQmlWLEVBQTRCSyxFQUFXLENBQUEsRUFBSSxPQUN6RyxHQUFJbnhELEVBQU0sZUFBaUIsR0FBSzh3RCxFQUM1QixNQUFPLENBQUEsRUFFWCxNQUFNTSxFQUFnQnhWLEdBQStCNTdDLEVBQU82N0MsQ0FBZ0IsRUFDdEU1eEMsRUFBYTZ4QyxHQUFxQnNWLENBQWEsRUFJckQsT0FISW5uRCxFQUFXLFNBQVMsT0FBUyxHQUM3QixNQUFNZ3lDLEdBQW1CajhDLEVBQU9pSyxFQUFXLFFBQVEsRUFFbkRBLEVBQVcsU0FBUyxPQUFTLElBQzdCeFksRUFBQTAvRCxFQUFTLGtCQUFULE1BQUExL0QsRUFBQSxLQUFBMC9ELEdBTU8sQ0FBRSx5QkFMT2xWLEdBQW1CajhDLEVBQU9pSyxFQUFXLFFBQVEsRUFDcEIsTUFBT3crQixHQUFRLE9BQ3BELE9BQUFoM0MsRUFBQTAvRCxFQUFTLGtCQUFULE1BQUExL0QsRUFBQSxLQUFBMC9ELEVBQTJCMW9CLEdBQ3BCLENBQUEsQ0FDWCxDQUFDLENBQ2dDLEdBRTlCLENBQUEsQ0FDWCxDQUNBLFNBQVNzb0IsR0FBVS93RCxFQUFPdEosRUFBUyxDQUMvQixNQUFNbzZELEVBQTZCcDZELEVBQVEsZ0JBQWtCQSxFQUFRLDBCQUMvRDI2RCxFQUF5QjM2RCxFQUFRLGdCQUFrQnNKLEVBQU0seUJBQTJCLEdBRzFGLE1BQUksQ0FBQzh3RCxHQUE4QixDQUFDTyxJQUNoQ3J4RCxFQUFNLGdCQUNGLENBQUN0SixFQUFRLGdCQUFrQixDQUFDQSxFQUFRLGlDQUcvQnNKLEVBQU0sK0JBQWlDQSxFQUFNLGdCQUFnQixTQUVsRUEsRUFBTSxxQkFBb0IsR0FHbENBLEVBQU0sdUJBQXlCLEdBQ3hCLENBQUUsMkJBQUE4d0QsQ0FBMEIsQ0FDdkMsQ0N2RU8sU0FBU1EsR0FBZ0I1NkQsRUFBUyxDQUNyQyxLQUFNLENBQUUsTUFBQXNKLEVBQU8sV0FBQXV4RCxFQUFZLE1BQUFqbEQsRUFBTyxVQUFBc3hDLEVBQVcscUJBQUE0VCxFQUFzQixZQUFBQyxDQUFXLEVBQU0vNkQsRUFDcEYrNkQsR0FBQSxNQUFBQSxFQUFjRixHQUNkdnhELEVBQU0sZ0JBQWdCLFdBQVdzTSxFQUFPc3hDLENBQVMsRUFDakQ1OUMsRUFBTSxlQUFpQnV4RCxFQUFXLGNBQ2xDdnhELEVBQU0sZ0JBQWtCdXhELEVBQVcsZUFDL0JDLEdBQ0FELEVBQVcsU0FBUyxPQUFTLHVCQUM3QnZ4RCxFQUFNLHFCQUFvQixFQUU5QkEsRUFBTSxhQUFldXhELEVBQVcsU0FDaEN2eEQsRUFBTSxtQkFDRnV4RCxFQUFXLFNBQVMsT0FBUyx5QkFDdkIsa0JBQ0EsTUFDZCxDQUNPLGVBQWVHLEdBQXNCaDdELEVBQVMsT0FDakQsS0FBTSxDQUFFLE1BQUFzSixFQUFPLE9BQUF1bEQsRUFBUSxZQUFBa00sQ0FBVyxFQUFLLzZELEVBQ2pDNjZELEVBQWEsTUFBTXJFLEdBQXVCbHRELEVBQU0sY0FBZUEsRUFBTSxlQUFnQkEsRUFBTSxnQkFBaUJBLEVBQU0sa0JBQW1CQSxFQUFNLHVCQUF3QnVsRCxFQUFRdmxELENBQUssRUFZdEwsT0FYQXN4RCxHQUFnQixDQUNaLE1BQUF0eEQsRUFDQSxXQUFBdXhELEVBQ0EsTUFBT3Z4RCxFQUFNLGNBQ2IsWUFBV3ZPLEVBQUF1TyxFQUFNLHlCQUFOLFlBQUF2TyxFQUE4QixZQUFhLENBQUEsRUFDdEQscUJBQXNCLEdBQ3RCLFlBQUFnZ0UsQ0FDUixDQUFLLEVBSUdGLEVBQVcsU0FBUyxPQUFTLHlCQUN0QixDQUFFLFNBQVVBLEVBQVcsU0FBVSxPQUFRLHFCQUFxQixFQUVyRUEsRUFBVyxTQUFTLE9BQVMsc0JBQ3RCLENBQUUsU0FBVUEsRUFBVyxTQUFVLE9BQVEsWUFBWSxFQUV6RCxDQUFFLFNBQVVBLEVBQVcsU0FBVSxPQUFRLGNBQWMsQ0FDbEUsQ0FDTyxTQUFTSSxHQUF5Qmo3RCxFQUFTLENBQzlDLEtBQU0sQ0FBRSxNQUFBc0osRUFBTyxRQUFBNHhELEVBQVMsNkJBQUFDLENBQTRCLEVBQUtuN0QsRUFDekQsT0FBUWs3RCxFQUFRLE9BQU0sQ0FDbEIsSUFBSyxzQkFDRCxPQUFBNXhELEVBQU0sYUFBZTR4RCxFQUFRLFNBQ3RCLENBQUUsYUFBYyxHQUFNLGVBQWdCLEVBQUssRUFDdEQsSUFBSyxhQUVELE9BQUFDLEVBQTZCLEVBQUksRUFDakM3eEQsRUFBTSxhQUFlLE9BQ2QsQ0FBRSxhQUFjLEdBQU8sZUFBZ0IsRUFBSSxFQUN0RCxJQUFLLGVBQ0QsT0FBQTZ4RCxFQUE2QixFQUFLLEVBQ2xDN3hELEVBQU0sYUFBZTR4RCxFQUFRLFNBQ3RCLENBQUUsYUFBYyxHQUFPLGVBQWdCLEVBQUssRUFDdkQsUUFBUyxDQUNMLE1BQU1FLEVBQWNGLEVBQVEsT0FDNUIsTUFBTSxJQUFJLE1BQU0sbUNBQW1DRSxDQUFXLEVBQUUsQ0FDcEUsQ0FDUixDQUNBLENDZk8sU0FBU0MsR0FBVW55RCxFQUFTbEosRUFBUyxDQUN4QyxNQUFPLENBQ0gsS0FBTSxVQUNOLEtBQU0sWUFDTixRQUFTLE9BQU9rSixHQUFZLFNBQ3RCLENBQ0UsQ0FDSSxLQUFNLGNBQ04sS0FBTUEsQ0FDMUIsQ0FDQSxFQUNjQSxFQUNOLE9BQVEsWUFDUixhQUFjbEosQ0FDdEIsQ0FDQSxDQ3BEQSxNQUFNczdELEdBQWdCaHlELElBQVcsQ0FDN0IsTUFBT0EsRUFBTSxlQUNiLFNBQVVBLEVBQU0sZ0JBQ2hCLFFBQVMwaEMsR0FBYTFoQyxFQUFNLGVBQWdCQSxFQUFNLGVBQWUsRUFDakUsT0FBUTBoQyxHQUFhLEdBQUkxaEMsRUFBTSxlQUFlLEVBQzlDLGFBQWNBLEVBQU0sZ0JBQ3BCLFVBQVdBLEVBQU0sY0FDakIsTUFBQUEsQ0FDSixHQUNNaXlELEdBQW9CLENBQUMzbEQsRUFBT3c0QyxJQUMxQng0QyxFQUFNLGFBQWUsT0FDZCxPQUFPdzRDLENBQVcsRUFFdEIsS0FBSyxVQUFVQSxDQUFXLEVBRS9Cb04sR0FBd0IsQ0FBQzVsRCxFQUFPNmxELElBQWUsSUFBSWxmLEdBQXFCOGUsR0FBVUksQ0FBVSxFQUFHN2xELENBQUssRUFDN0Y4bEQsR0FBb0IsTUFBTyxDQUFFLE1BQUE5aEUsRUFBTyxNQUFBMFAsRUFBTyxjQUFBcXlELEVBQWUsb0JBQUFDLEVBQXFCLGFBQUFDLEVBQWMsYUFBQUMsS0FBb0IsQ0FDMUgsR0FBSSxFQUFFbGlFLGFBQWlCNlAsSUFDbkIsT0FFSixNQUFNbS9CLEdBQVUreUIsR0FBQSxZQUFBQSxFQUFlLFlBQVlBLEdBQUEsWUFBQUEsRUFBZSxTQUMxRCxHQUFJLENBQUMveUIsRUFDRCxPQUVKLE1BQU1tekIsRUFBZ0IsTUFBTW56QixFQUFRLENBQ2hDLE1BQUFodkMsRUFDQSxRQUFTMFAsRUFBTSxTQUNmLFFBQVNneUQsR0FBYWh5RCxDQUFLLENBQ25DLENBQUssRUFDRCxHQUFJLENBQUN5eUQsRUFDRCxPQUVKLE1BQU1DLEVBQW1CRCxFQUFjLG1CQUFxQixHQUN0RE4sRUFBYUYsR0FBa0JqeUQsRUFBTSxjQUFleXlELEVBQWMsV0FBVyxFQUNuRnp5RCxFQUFNLGtCQUFvQixPQUMxQkEsRUFBTSx1QkFBeUIsT0FDL0IsTUFBTTlKLEVBQU9nOEQsR0FBc0JseUQsRUFBTSxjQUFlbXlELENBQVUsRUFDbEUsT0FBSU8sR0FDQTF5RCxFQUFNLGdCQUFnQixLQUFLOUosQ0FBSSxFQUUvQnM4RCxHQUNBalQsR0FBMkJpVCxFQUFjLENBQUN0OEQsQ0FBSSxDQUFDLEVBRW5EOEosRUFBTSxhQUFlLENBQ2pCLEtBQU0seUJBQ04sT0FBUW15RCxDQUNoQixFQUNJbnlELEVBQU0sbUJBQXFCLGdCQUMzQixNQUFNazhDLEdBQW9CbDhDLEVBQU9zeUQsRUFBcUJILENBQVUsRUFDaEVueUQsRUFBTSx1QkFBeUIsR0FDL0J1eUQsRUFBYXZ5RCxFQUFNLFNBQVVBLEVBQU0sY0FBZW15RCxDQUFVLEVBQ3JELElBQUluckIsR0FBVWhuQyxDQUFLLENBQzlCLEVDaEJPLE1BQU0yeUQsV0FBZTlpQixFQUFTLENBUWpDLFlBQVk1aUMsRUFBUyxHQUFJLE9BQ3JCLE1BQUssRUFUTjJ4QixFQUFBLEtBQUFnMEIsSUFDSDN5RCxFQUFBLGVBQ0FBLEVBQUEsdUJBa0pBQSxFQUFBLDJCQUNBQSxFQUFBLDRCQTNJSSxLQUFLLE9BQVMsQ0FDVixjQUFlZ04sRUFBTyxlQUFpQjhsQyxHQUF1QixFQUM5RCxNQUFPOWxDLEVBQU8sTUFDZCxjQUFlQSxFQUFPLGNBQ3RCLG1CQUFvQkEsRUFBTyxtQkFDM0IsZ0JBQWlCQSxFQUFPLGdCQUN4QixpQkFBa0JBLEVBQU8saUJBQ3pCLGdCQUFpQkEsRUFBTyxpQkFBbUIsR0FDM0MsMEJBQTJCQSxFQUFPLDJCQUE2QixHQUMvRCxhQUFjQSxFQUFPLGNBQWdCLGlCQUNyQyxRQUFTQSxFQUFPLFFBQ2hCLFFBQVNBLEVBQU8sUUFDaEIsY0FBZUEsRUFBTyxjQUN0QixRQUFTQSxFQUFPLFFBQ2hCLHFCQUFzQkEsRUFBTyxxQkFDN0IscUJBQXNCQSxFQUFPLG9CQUN6QyxFQUNRLEtBQUssZUFBaUIsQ0FDbEIsR0FBSUEsRUFBTyxVQUFZLE9BQVksQ0FBRSxRQUFTQSxFQUFPLE9BQU8sRUFBSyxHQUNqRSxHQUFJQSxFQUFPLGVBQWlCLE9BQ3RCLENBQUUsYUFBY0EsRUFBTyxZQUFZLEVBQ25DLEdBQ04sR0FBSUEsRUFBTyxVQUFZLE9BQVksQ0FBRSxRQUFTQSxFQUFPLE9BQU8sRUFBSyxHQUNqRSxHQUFJQSxFQUFPLGdCQUFrQixPQUN2QixDQUFFLGNBQWVBLEVBQU8sYUFBYSxFQUNyQyxHQUNOLEtBQUl4YixFQUFBd2IsRUFBTyxVQUFQLFlBQUF4YixFQUFnQixVQUFXLE9BQ3pCLENBQUUsY0FBZXdiLEVBQU8sUUFBUSxNQUFNLEVBQ3RDLEVBQ2xCLEVBQ1EsS0FBSyxvQkFBc0JBLEVBQU8saUJBQW1CLENBQUEsR0FBSSxJQUFJMGxDLEVBQW9CLEVBQ2pGLEtBQUsscUJBQXVCMWxDLEVBQU8sa0JBQW9CLENBQUEsR0FBSSxJQUFJNmxDLEVBQXFCLENBQ3hGLENBQ0EsTUFBTSxJQUFJeG1DLEVBQU81VyxFQUFPZ0IsRUFBVSxDQUM5QixPQUFRLEdBQ1IsUUFBUyxNQUNqQixFQUFPLE9BQ0MsTUFBTW04RCxFQUFrQm44RCxHQUFXLENBQUUsT0FBUSxHQUFPLFFBQVMsTUFBUyxFQUVoRXNyRCxFQUF1QjZRLEVBQWdCLHNCQUF3QixLQUFLLE9BQU8scUJBRTNFdlosRUFBdUJ1WixFQUFnQixzQkFBd0IsS0FBSyxPQUFPLHFCQUMzRUMsRUFBMEIsRUFBUXhaLEVBQ2xDeVosRUFBZ0JGLEVBQWdCLFNBQVcsS0FBSyxPQUFPLFFBQ3ZERyxFQUFpQixDQUNuQixHQUFHLEtBQUssZUFDUixLQUFJdmhFLEVBQUFvaEUsRUFBZ0IsVUFBaEIsWUFBQXBoRSxFQUF5QixVQUFXLE9BQ2xDLENBQUUsY0FBZW9oRSxFQUFnQixRQUFRLE1BQU0sRUFDL0MsRUFDbEIsRUFDY0ksRUFBbUIsQ0FDckIsR0FBR0osRUFDSCxxQkFBQTdRLEVBQ0EscUJBQUExSSxDQUNaLEVBQ2M0WixFQUFvQng5RCxhQUFpQitnRCxHQUNyQzhaLEVBQWtDMkMsR0FDcEN4OUQsRUFBTSx5QkFBMkIsR0FDL0J5OUQsRUFBd0JELEVBQ3hCeDlELEVBQU0sZ0JBQ04sT0FDQTA5RCxFQUE0QkYsRUFDNUJ4OUQsRUFBTSxvQkFDTixPQUNBMnFELEVBQTRCLEdBQVE0UyxFQUFpQixnQkFBa0JFLElBQ3pFLEdBQVFGLEVBQWlCLG9CQUFzQkcsR0FHN0N6VCxFQUFVc1QsRUFBaUIsUUFDM0JJLEVBQXFCelQsR0FBZ0MsQ0FDdkQsUUFBQUQsRUFDQSx3QkFBQW1ULEVBQ0EsYUFBY3ZTLEdBQ2Qsa0JBQUEyUyxDQUNaLENBQVMsRUFDRCxJQUFJSSxFQUFnQjU5RCxFQUNwQixHQUFJLEVBQUU0OUQsYUFBeUI3YyxJQUFXLENBQ3RDLE1BQU04YyxFQUFXLE1BQU14UixHQUE2QnVSLEVBQWUzVCxFQUFTcUMsRUFBc0IsQ0FHOUYsOEJBQStCLENBQUMzQixFQUNoQyx3QkFBeUJBLENBQ3pDLENBQWEsRUFDRCxHQUFJQSxHQUE2QlYsRUFBUyxDQUd0QyxNQUFNRyxFQUFleVQsRUFBUyxhQUMxQnpULEdBQWdCQSxFQUFhLE9BQVMsRUFDdEN3VCxFQUFnQnhULEVBR2hCd1QsRUFBZ0JDLEVBQVMsYUFFakMsTUFFSUQsRUFBZ0JDLEVBQVMsY0FFN0JGLEdBQUEsTUFBQUEsRUFBb0IsaUJBQWlCRSxFQUFTLGFBQ2xELENBR0EsTUFBTUMsRUFBNkJILEdBQUEsWUFBQUEsRUFBb0Isc0JBQXNCaFQsR0FDdkVvVCxFQUFhLFNBQVksQ0FDM0IsR0FBSVIsRUFBaUIsT0FFakIsT0FEcUIsTUFBTTNxQixFQUFBLEtBQUtzcUIsR0FBQWMsSUFBTCxVQUEwQnBuRCxFQUFPZ25ELEVBQWVMLEVBQWtCTyxFQUE0QkgsR0FBQSxZQUFBQSxFQUFvQixnQkFBaUI5QyxHQUdsSyxNQUFNb0QsRUFBWSxNQUFNcnJCLEVBQUEsS0FBS3NxQixHQUFBZ0IsSUFBTCxVQUE2QnRuRCxFQUFPZ25ELEVBQWVMLEVBQWtCSSxHQUFBLFlBQUFBLEVBQW9CLGdCQUFpQjlDLEdBR2xJLE9BQUk4QyxHQUFzQixDQUFDaFQsR0FDdkIsTUFBTWtCLEdBQWM1QixFQUFTMFQsRUFBbUIsdUJBQXNCLEVBQUlNLENBQVMsRUFFaEZBLENBQ1gsRUFDQSxHQUFJTCxhQUF5QjdjLElBQVk2YyxFQUFjLE9BQVEsQ0FDM0QsTUFBTU8sRUFBVW5FLEdBQW9CNEQsRUFBYyxPQUFRQSxFQUFjLGtCQUFtQk4sQ0FBYyxFQUN6RyxPQUFBTSxFQUFjLE9BQVNPLEVBQVEsTUFDL0JQLEVBQWMsa0JBQW9CTyxFQUFRLFlBQ25DaHFCLEdBQVV5cEIsRUFBYyxPQUFRLFVBQy9CQSxFQUFjLG1CQUNkcnBCLEdBQWVxcEIsRUFBYyxpQkFBaUIsRUFFM0NHLEVBQVUsRUFDcEIsQ0FDTCxDQUNBLE9BQU8xcEIsR0FBaUIsU0FBWTBwQixJQUFjLENBQzlDLFFBQVMsS0FBSyxPQUFPLFFBQ3JCLEtBQU0sS0FBSyxPQUFPLGFBQ2xCLFFBQVMsS0FBSyxPQUFPLFFBQ3JCLFNBQVUsS0FBSyxPQUFPLGNBRXRCLGNBQWVWLEdBQUEsWUFBQUEsRUFBZSxNQUMxQyxDQUFTLENBQ0wsQ0E2cEJKLENBN3lCT0gsR0FBQSxZQTBKR2tCLEdBQXFCLGVBQUN4bkQsRUFBTyxDQUMvQixNQUFNMHdDLEVBQXFCMXdDLEVBQU0sUUFBVSxRQUN2Q0EsRUFBTSxRQUFVOHJDLEdBQU0sMkJBQ3JCLEtBQUssT0FBTyxRQUFVLFFBQ25CLEtBQUssT0FBTyxRQUFVQSxHQUFNLDBCQUM5QjJiLEVBQWdCdFgsR0FBWW53QyxFQUFNLE1BQU8sS0FBSyxPQUFPLEtBQUssRUFDMUQ2d0MsRUFBb0IsT0FBTzRXLEdBQWtCLFNBQVdBLEVBQWdCLE9BSTlFLE1BQU8sQ0FBRSxNQUhhLE9BQU9BLEdBQWtCLFNBQ3pDLE1BQU0sS0FBSyxPQUFPLGNBQWMsU0FBU0EsQ0FBYSxFQUN0REEsRUFDeUIsa0JBQUEvVyxFQUFtQixrQkFBQUcsQ0FBaUIsQ0FDdkUsRUFJTXlXLEdBQXVCLGVBQUNsZCxFQUFlaGhELEVBQU9nQixFQUdwRHM5RCxFQUFvQnpELEVBQWlDLENBQ2pELE9BQU9qbUIsR0FBbUIsU0FBWSxXQUVsQyxNQUFNZ21CLEVBQWlCNTZELGFBQWlCK2dELEdBQ2xDejJDLEVBQVFzd0QsRUFDUjU2RCxFQUNBLElBQUkrZ0QsR0FBUy8vQyxFQUFRLG1CQUFtQnE2QyxHQUNwQ3I2QyxFQUFRLFFBQ1IsSUFBSXE2QyxHQUFXcjZDLEVBQVEsT0FBTyxFQUFHaEIsRUFBT2doRCxFQUFlaGdELEVBQVEsVUFBWTBpRCxFQUFpQixFQUNoRzZhLEVBQXlCdjlELEVBQVEsaUJBQ2xDNDVELEVBQWlCdHdELEVBQU0sZ0JBQWtCLFFBQ3hDazBELEVBQTZCeDlELEVBQVEscUJBQ3RDNDVELEVBQWlCdHdELEVBQU0sb0JBQXNCLFFBQzdDc3dELEdBQ0R0d0QsRUFBTSx1QkFBdUJpMEQsRUFBd0JDLENBQTBCLEVBRW5GLE1BQU16RCxFQUE0QndELEdBQTBCQyxFQUN0RCxJQUFJN1osR0FBMEIsQ0FDNUIsZUFBZ0I0WixFQUNoQixtQkFBb0JDLENBQ3hDLENBQWlCLEVBQ0MsT0FDRnpELEdBQTZCSCxJQUM3QkcsRUFBMEIsZUFBZSxDQUNyQyxjQUFlendELEVBQU0sZUFDckIsZUFBZ0JBLEVBQU0sZ0JBQ3RCLGVBQWdCQSxFQUFNLGVBQzFDLENBQWlCLEVBQ0RBLEVBQU0sdUJBQXVCeXdELEVBQTBCLGVBQWdCQSxFQUEwQixrQkFBa0IsR0FHdkgsSUFBSUQsRUFBNEIsR0FDaEMsR0FBSSxDQUNBLE9BQWEsQ0FLVCxHQUhBeHdELEVBQU0sYUFBZUEsRUFBTSxjQUFnQixDQUN2QyxLQUFNLHFCQUM5QixFQUN3QkEsRUFBTSxhQUFhLE9BQVMseUJBQTBCLENBRXRELEdBREEwSSxFQUFPLE1BQU0sOEJBQThCLEVBQ3ZDLENBQUMxSSxFQUFNLG1CQUFxQixDQUFDQSxFQUFNLHVCQUNuQyxNQUFNLElBQUlRLEVBQVUsNENBQTZDUixDQUFLLEVBRTFFLE1BQU1tMEQsRUFBcUIsTUFBTXpDLEdBQXNCLENBQ25ELE1BQUExeEQsRUFDQSxPQUFRLElBQ3BDLENBQXlCLEVBR0ssQ0FBRSxhQUFBbzBELEVBQWMsZUFBQUMsQ0FBYyxFQUFLMUMsR0FBeUIsQ0FDOUQsTUFBQTN4RCxFQUNBLFFBQVNtMEQsRUFDVCw2QkFBK0I1OEQsR0FBVSxDQUNyQ2k1RCxFQUE0Qmo1RCxDQUNoQyxDQUM1QixDQUF5QixFQUNELEdBQUk2OEQsRUFFQSxPQUFPLElBQUlwdEIsR0FBVWhuQyxDQUFLLEVBRTlCLEdBQUlxMEQsRUFDQSxRQUVSLENBQ0EsR0FBSXIwRCxFQUFNLGFBQWEsT0FBUyxzQkFBdUIsQ0FDbkQsTUFBTXMwRCxFQUErQjlELEVBQ3JDQSxFQUE0QixHQUM1QixNQUFNK0QsRUFBbUJ0WixHQUFzQixFQUN6Q3VaLEVBQWV4MEQsRUFBTSxhQUNyQnkwRCxFQUF5QnowRCxFQUFNLCtCQUMvQjAwRCxFQUF5QjEwRCxFQUFNLGdCQUFnQixPQUMvQyxDQUFFLFVBQUE2d0QsRUFBVyxVQUFBSyxFQUFXLHlCQUFBRixDQUF3QixFQUFLLE1BQU1YLEdBQVksQ0FDekUsTUFBQXJ3RCxFQUNBLE1BQU9BLEVBQU0sZUFDYixlQUFnQkEsRUFBTSxnQkFDdEIsZUFBQXN3RCxFQUNBLGdDQUFBQyxFQUNBLDBCQUEyQitELEVBQzNCLDBCQUFBN0QsRUFDQSxtQkFBb0IsS0FBSyxtQkFDekIsa0JBQW1CLENBQ2YsZ0JBQWlCOEQsRUFBaUIsWUFDbEMsZ0JBQWlCQSxFQUFpQixRQUNsRSxFQUM0QixlQUFnQixDQUFDN29ELEdBQVNZLEdBQU9pdEMsSUFBZSxDQUM1QyxLQUFLLEtBQUssY0FBZTd0QyxHQUFTWSxHQUFPaXRDLENBQVUsQ0FDdkQsQ0FDNUIsQ0FBeUIsRUFDR2dYLEdBQ0F2d0QsRUFBTSxhQUFldzBELEdBQ3JCQyxHQUEwQkMsSUFFMUIxMEQsRUFBTSwrQkFBaUN5MEQsR0FFM0NGLEVBQWlCLFdBQVd2RCxDQUF3QixFQUNwRCxNQUFNMkQsRUFBZSxNQUFNcnNCLEVBQUEsS0FBS3NxQixHQUFBZ0MsSUFBTCxVQUF1QjUwRCxFQUFPdEosRUFBU202RCxFQUFXSyxFQUFXVCxFQUEyQnVELEdBQ25ITyxFQUFpQixhQUFZLEVBQzdCdjBELEVBQU0sa0JBQW9CLE1BQU0yMEQsRUFBYSxNQUFNLFlBQVksQ0FDM0QsbUJBQW9CQSxFQUFhLFdBQVcsYUFDNUMsT0FBUUEsRUFBYSxPQUVyQixHQUFJQSxFQUFhLGtCQUNYLENBQUUsb0JBQXFCLEVBQUksRUFDM0IsR0FDTixNQUFPQSxFQUFhLFdBQVcsTUFDL0IsbUJBQW9CQSxFQUFhLG1CQUNqQyxlQUFnQkEsRUFBYSxlQUM3QixjQUFlQSxFQUFhLGNBQzVCLE1BQU9BLEVBQWEsZ0JBQ3BCLHdCQUF5QkEsRUFBYSx3QkFDdEMsV0FBWTF3RCxHQUFxQ2pFLEVBQU0sY0FBYyxVQUFVLEVBQy9FLFNBQVUyMEQsRUFBYSxtQkFDdkIsUUFBU3RGLEdBQVcsS0FBSyxPQUFPLGdCQUFpQixLQUFLLE9BQU8seUJBQXlCLEVBQ3RGLE9BQVEzNEQsRUFBUSxNQUM1QyxDQUF5QixFQUNHKzVELEdBQ0FBLEVBQTBCLGdCQUFnQmtFLEVBQWEsWUFBYSxDQUNoRSxjQUFlQSxFQUFhLGNBQzVCLGFBQWNBLEVBQWEsU0FDM0QsQ0FBNkIsRUFFTDMwRCxFQUFNLGdCQUFnQixLQUFLQSxFQUFNLGlCQUFpQixFQUNsREEsRUFBTSxTQUFTLE1BQU0sSUFBSUEsRUFBTSxrQkFBa0IsS0FBSyxFQUN0REEsRUFBTSxrQkFBb0IsR0FHMUJ5d0QsR0FBQSxNQUFBQSxFQUEyQixpQkFBaUJ6d0QsRUFBTSxtQkFDOUN5d0QsR0FDQXp3RCxFQUFNLHVCQUF1Qnl3RCxFQUEwQixlQUFnQkEsRUFBMEIsa0JBQWtCLEVBRXZILE1BQU1yRCxHQUFvQi9PLEdBQXFCcitDLEVBQU0sa0JBQW1CQSxFQUFNLGNBQWUyMEQsRUFBYSxNQUFPQSxFQUFhLFFBQVEsRUFDdEkzMEQsRUFBTSx1QkFBeUJvdEQsR0FDL0IsTUFBTW1FLEdBQWEsTUFBTTNDLEdBQThCNXVELEVBQU0sY0FBZUEsRUFBTSxlQUFnQkEsRUFBTSxnQkFBaUJBLEVBQU0sa0JBQW1CQSxFQUFNLHVCQUF3QixLQUFNQSxDQUFLLEVBQzNMc3hELEdBQWdCLENBQ1osTUFBQXR4RCxFQUNBLFdBQUF1eEQsR0FDQSxNQUFPdnhELEVBQU0sY0FDYixZQUFXdk8sRUFBQXVPLEVBQU0seUJBQU4sWUFBQXZPLEVBQThCLFlBQWEsQ0FBQSxFQUN0RCxxQkFBc0IsQ0FBQzYrRCxDQUNuRCxDQUF5QixFQUNELE1BQU1pRSxFQUFpQixnQkFBZSxDQUMxQyxDQUNBLE1BQU1NLEVBQWM3MEQsRUFBTSxhQUMxQixHQUFJLENBQUM2MEQsRUFBYSxDQUNkbnNELEVBQU8sTUFBTSxtQkFBbUIsRUFDaEMsUUFDSixDQUNBLE9BQVFtc0QsRUFBWSxLQUFJLENBQ3BCLElBQUsseUJBQ0QsYUFBTTNZLEdBQW9CbDhDLEVBQU8sS0FBSyxvQkFBcUI2MEQsRUFBWSxNQUFNLEVBQzdFNzBELEVBQU0sdUJBQXlCLEdBQy9CLEtBQUssS0FBSyxZQUFhQSxFQUFNLFNBQVVBLEVBQU0sY0FBZTYwRCxFQUFZLE1BQU0sRUFDOUU3MEQsRUFBTSxjQUFjLEtBQUssWUFBYUEsRUFBTSxTQUFVNjBELEVBQVksTUFBTSxFQUNqRSxJQUFJN3RCLEdBQVVobkMsQ0FBSyxFQUM5QixJQUFLLG9CQUNEQSxFQUFNLGdCQUFnQjYwRCxFQUFZLFFBQVEsRUFDdEM3MEQsRUFBTSxvQkFDTkEsRUFBTSxrQkFBa0IsSUFBRyxFQUMzQmtxQyxHQUFnQixFQUNoQmxxQyxFQUFNLG9CQUFvQixNQUFTLEdBRXZDQSxFQUFNLGtCQUFvQixHQUMxQkEsRUFBTSx1QkFBeUIsR0FFL0JBLEVBQU0sYUFBZSxDQUFFLEtBQU0scUJBQXFCLEVBQ2xELE1BQ0osSUFBSyx5QkFFRCxPQUFPLElBQUlnbkMsR0FBVWhuQyxDQUFLLEVBQzlCLElBQUssc0JBQ0RBLEVBQU0sdUJBQXlCLEdBQy9CMEksRUFBTyxNQUFNLG1CQUFtQixFQUNoQyxNQUNKLFFBQ0lBLEVBQU8sTUFBTSxtQkFBbUIsQ0FDNUQsQ0FDZ0IsQ0FDSixPQUNPKy9CLEVBQUssQ0FDUnpvQyxFQUFNLHVCQUF5QixHQUMvQixNQUFNODBELEVBQWdCLE1BQU0xQyxHQUFrQixDQUMxQyxNQUFPM3BCLEVBQ1AsTUFBQXpvQyxFQUNBLGNBQWV0SixFQUFRLGNBQ3ZCLG9CQUFxQixLQUFLLG9CQUMxQixhQUFjLENBQUNnVixFQUFTWSxFQUFPNmxELElBQWUsQ0FDMUMsS0FBSyxLQUFLLFlBQWF6bUQsRUFBU1ksRUFBTzZsRCxDQUFVLEVBQ2pEN2xELEVBQU0sS0FBSyxZQUFhWixFQUFTeW1ELENBQVUsQ0FDL0MsQ0FDcEIsQ0FBaUIsRUFDRCxHQUFJMkMsRUFDQSxPQUFPQSxFQUVYLE1BQUk5MEQsRUFBTSxtQkFDTkEsRUFBTSxrQkFBa0IsU0FBUyxDQUM3QixRQUFTLHFCQUNULEtBQU0sQ0FBRSxNQUFPLE9BQU95b0MsQ0FBRyxDQUFDLENBQ2xELENBQXFCLEVBRUNBLENBQ1YsUUFDWixDQUNnQixLQUFJMTJDLEVBQUFpTyxFQUFNLGVBQU4sWUFBQWpPLEVBQW9CLFFBQVMseUJBQzdCLEdBQUksQ0FDQSxNQUFNc1osR0FBeUIsQ0FBRSxXQUFZckwsRUFBTSxRQUFRLENBQUUsQ0FDakUsT0FDTzFQLEVBQU8sQ0FDVm9ZLEVBQU8sS0FBSywwQ0FBMENwWSxDQUFLLEVBQUUsQ0FDakUsQ0FFQTBQLEVBQU0sc0JBQ0YvTSxFQUFBK00sRUFBTSxlQUFOLFlBQUEvTSxFQUFvQixRQUFTLDBCQUU3QitNLEVBQU0sa0JBQWtCLElBQUcsRUFFL0JrcUMsR0FBZ0IsRUFFeEIsQ0FDSixDQUFDLENBQ0wsRUFJTTZxQixHQUFjLGVBQUNsakUsRUFBUTZFLEVBQVM0NUQsRUFBZ0JrRCxFQUE0QlEsRUFBb0J6RCxFQUFpQyxTQUNuSSxNQUFNMEQsRUFBeUJ2OUQsRUFBUSxnQkFBa0I3RSxFQUFPLE1BQU0sZ0JBQ2hFcWlFLEVBQTZCeDlELEVBQVEsb0JBQXNCN0UsRUFBTyxNQUFNLG9CQUN4RXd1RCxFQUE0QixFQUFRNFQsR0FBMkIsRUFBUUMsRUFDdkV6RCxFQUE0QnBRLEVBQzVCLElBQUloRyxHQUEwQixDQUM1QixlQUFnQjRaLEVBQ2hCLG1CQUFvQkMsQ0FDcEMsQ0FBYSxFQUNDLE9BQ0Z6RCxHQUNBNStELEVBQU8sTUFBTSx1QkFBdUI0K0QsRUFBMEIsZUFBZ0JBLEVBQTBCLGtCQUFrQixFQUU5SCxJQUFJdUUsRUFBbUIsR0FDbkJDLEVBQXVCLEdBQ3ZCVixFQUFtQnRaLEdBQXNCLEVBQzdDLE1BQU1pYSxFQUE2QixTQUFZLENBQ3ZDRCxHQUF3QixDQUFDekIsSUFJN0IsTUFBTUEsRUFBMEIsRUFDaEN5QixFQUF1QixHQUMzQixFQUNBLElBQUlqRSxFQUNKLE1BQU1tRSxFQUFpQyxTQUFZLENBRS9DLEdBREEsTUFBTVosRUFBaUIsZ0JBQWUsRUFDbENBLEVBQWlCLE9BQ2pCLE1BQU1BLEVBQWlCLE1BRXZCUyxHQUNBLENBQUNDLEdBQ0QsQ0FBQ1YsRUFBaUIsUUFDbEIsTUFBTVcsRUFBMEIsQ0FFeEMsRUFDSXpFLEdBQTZCSCxJQUM3QkcsRUFBMEIsZUFBZSxDQUNyQyxjQUFlNStELEVBQU8sTUFBTSxlQUM1QixlQUFnQkEsRUFBTyxNQUFNLGdCQUM3QixlQUFnQkEsRUFBTyxNQUFNLGVBQzdDLENBQWEsRUFDREEsRUFBTyxNQUFNLHVCQUF1QjQrRCxFQUEwQixlQUFnQkEsRUFBMEIsa0JBQWtCLEdBRzlILElBQUlELEVBQTRCLEdBQ2hDLEdBQUksQ0FDQSxPQUFhLENBQ1QsTUFBTTNZLEVBQWVobUQsRUFBTyxNQUFNLGNBSWxDLEdBSEFBLEVBQU8sTUFBTSxhQUFlQSxFQUFPLE1BQU0sY0FBZ0IsQ0FDckQsS0FBTSxxQkFDMUIsRUFDb0JBLEVBQU8sTUFBTSxhQUFhLE9BQVMseUJBQTBCLENBRTdELEdBREE2VyxFQUFPLE1BQU0sOEJBQThCLEVBQ3ZDLENBQUM3VyxFQUFPLE1BQU0sbUJBQ2QsQ0FBQ0EsRUFBTyxNQUFNLHVCQUNkLE1BQU0sSUFBSTJPLEVBQVUsNENBQTZDM08sRUFBTyxLQUFLLEVBRWpGLE1BQU1zaUUsRUFBcUIsTUFBTXpDLEdBQXNCLENBQ25ELE1BQU83L0QsRUFBTyxNQUNkLE9BQVEsS0FDUixZQUFjMC9ELElBQWUsQ0FDekIvUixHQUFtQjN0RCxFQUFRMC9ELEVBQVUsQ0FDekMsQ0FDeEIsQ0FBcUIsRUFHSyxDQUFFLGFBQUE2QyxFQUFjLGVBQUFDLENBQWMsRUFBSzFDLEdBQXlCLENBQzlELE1BQU85L0QsRUFBTyxNQUNkLFFBQVNzaUUsRUFDVCw2QkFBK0I1OEQsSUFBVSxDQUNyQ2k1RCxFQUE0Qmo1RCxFQUNoQyxDQUN4QixDQUFxQixFQUNELEdBQUk2OEQsRUFFQSxPQUVKLEdBQUlDLEVBQ0EsUUFFUixDQUNBLEdBQUl4aUUsRUFBTyxNQUFNLGFBQWEsT0FBUyxzQkFBdUIsQ0FDMURtL0QsRUFBMkIsT0FDM0J1RCxFQUFtQnRaLEdBQXNCLEVBQ3pDLE1BQU1xWixFQUErQjlELEVBQ3JDQSxFQUE0QixHQUM1QixNQUFNZ0UsRUFBZTNpRSxFQUFPLE1BQU0sYUFDNUI0aUUsRUFBeUI1aUUsRUFBTyxNQUFNLCtCQUN0QzZpRSxHQUF5QjdpRSxFQUFPLE1BQU0sZ0JBQWdCLE9BQ3REdWpFLEdBQWUsTUFBTS9FLEdBQVksQ0FDbkMsTUFBT3grRCxFQUFPLE1BQ2QsTUFBT0EsRUFBTyxNQUNkLGVBQWdCQSxFQUFPLFNBQ3ZCLGVBQUF5K0QsRUFDQSxnQ0FBQUMsRUFDQSwwQkFBMkIrRCxFQUMzQiwwQkFBQTdELEVBQ0EsbUJBQW9CLEtBQUssbUJBQ3pCLGtCQUFtQixDQUNmLGdCQUFpQixJQUFNLENBQ25COEQsRUFBaUIsWUFBVyxDQUNoQyxFQUNBLGdCQUFrQjlyQixJQUFRLENBQ3RCOHJCLEVBQWlCLFNBQVM5ckIsRUFBRyxDQUNqQyxDQUM1QixFQUN3QixlQUFnQixDQUFDLzhCLEdBQVNZLEdBQU9pdEMsS0FBZSxDQUM1QyxLQUFLLEtBQUssY0FBZTd0QyxHQUFTWSxHQUFPaXRDLEVBQVUsQ0FDdkQsQ0FDeEIsQ0FBcUIsRUFDR2dYLEdBQ0ExK0QsRUFBTyxNQUFNLGFBQWUyaUUsR0FDNUJDLEdBQTBCQyxLQUUxQjdpRSxFQUFPLE1BQU0sK0JBQ1Q0aUUsR0FFUixLQUFNLENBQUUsVUFBQTVELEdBQVcsVUFBQUssRUFBUyxFQUFLa0UsR0FDakNwRSxFQUEyQm9FLEdBQWEseUJBQ3hDYixFQUFpQixXQUFXdkQsQ0FBd0IsRUFFcEQsTUFBTXFFLEVBQThCZCxFQUFpQixRQUMvQ0ksRUFBZSxNQUFNcnNCLEVBQUEsS0FBS3NxQixHQUFBZ0MsSUFBTCxVQUF1Qi9pRSxFQUFPLE1BQU82RSxFQUFTbTZELEdBQVdLLEdBQVdULEVBQTJCdUQsR0FDMUhPLEVBQWlCLGFBQVksRUFDN0IsSUFBSWUsR0FDQUMsR0FBYyxHQUNsQixNQUFNQyxHQUFnQixJQUFNLENBQ3BCRCxJQUFlLENBQUM5RSxJQVFwQkEsRUFBMEIsZ0JBQWdCa0UsRUFBYSxZQUFhLENBQ2hFLGNBQWVBLEVBQWEsY0FDNUIsYUFBY0EsRUFBYSxTQUN2RCxDQUF5QixFQUNEWSxHQUFjLEdBQ2xCLEVBQ0FQLEVBQW1CLEdBQ2RLLEdBQ0QsTUFBTUgsRUFBMEIsRUFFcEMsR0FBSSxDQUNBLGdCQUFpQjcxQixNQUFTczFCLEVBQWEsTUFBTSxvQkFBb0IsQ0FDN0QsbUJBQW9CQSxFQUFhLFdBQVcsYUFDNUMsT0FBUUEsRUFBYSxPQUVyQixHQUFJQSxFQUFhLGtCQUNYLENBQUUsb0JBQXFCLEVBQUksRUFDM0IsR0FDTixNQUFPQSxFQUFhLFdBQVcsTUFDL0IsbUJBQW9CQSxFQUFhLG1CQUNqQyxlQUFnQkEsRUFBYSxlQUM3QixjQUFlQSxFQUFhLGNBQzVCLE1BQU9BLEVBQWEsZ0JBQ3BCLHdCQUF5QkEsRUFBYSx3QkFDdEMsU0FBVUEsRUFBYSxtQkFDdkIsV0FBWTF3RCxHQUFxQzR6QyxFQUFhLFVBQVUsRUFDeEUsUUFBU3dYLEdBQVcsS0FBSyxPQUFPLGdCQUFpQixLQUFLLE9BQU8seUJBQXlCLEVBQ3RGLE9BQVEzNEQsRUFBUSxNQUM1QyxDQUF5QixFQUFHLENBR0EsR0FGQTY5RCxFQUFpQixhQUFZLEVBQzdCaUIsR0FBYSxFQUNUbjJCLEdBQU0sT0FBUyxnQkFBaUIsQ0FDaEMsTUFBTXJ6QixHQUFTbTZCLEdBQTZCLE1BQU05RyxFQUFLLEVBQ3ZEaTJCLEdBQWdCLENBQ1osTUFBTyxJQUFJM2tCLEdBQU0za0MsR0FBTyxTQUFTLEtBQUssRUFDdEMsT0FBUUEsR0FBTyxTQUFTLE9BQ3hCLFdBQVlBLEdBQU8sU0FBUyxFQUNoRSxFQUNnQ25hLEVBQU8sTUFBTSxTQUFTLE1BQU0sSUFBSXlqRSxHQUFjLEtBQUssQ0FDdkQsQ0FDQSxHQUFJempFLEVBQU8sVUFBVyxDQUdsQixNQUFNc2pFLEVBQThCLEVBQ3BDLE1BQ0osQ0FDQXRqRSxFQUFPLFNBQVMsSUFBSTJnRCxHQUF1Qm5ULEVBQUssQ0FBQyxDQUNyRCxDQUNKLE9BQ08vdUMsR0FBTyxDQUNWLEdBQUk0dUQsR0FBYTV1RCxFQUFLLEVBQUcsQ0FDakIwa0UsR0FDQVEsR0FBYSxFQUVqQixNQUFNTCxFQUE4QixFQUNwQyxNQUNKLENBQ0EsTUFBTTdrRSxFQUNWLENBS0EsR0FKSWdsRSxJQUNBRSxHQUFhLEVBRWpCLE1BQU1MLEVBQThCLEVBQ2hDdGpFLEVBQU8sVUFDUCxPQUdKLEdBREFBLEVBQU8sTUFBTSxrQkFBb0IsR0FDN0IsQ0FBQ3lqRSxHQUNELE1BQU0sSUFBSWwxRCxHQUFtQiwwQ0FBMkN2TyxFQUFPLEtBQUssRUFFeEZBLEVBQU8sTUFBTSxrQkFBb0J5akUsR0FFakM3RSxHQUFBLE1BQUFBLEVBQTJCLGlCQUFpQjZFLElBQ3hDN0UsR0FDQTUrRCxFQUFPLE1BQU0sdUJBQXVCNCtELEVBQTBCLGVBQWdCQSxFQUEwQixrQkFBa0IsRUFFOUg1K0QsRUFBTyxNQUFNLGdCQUFnQixLQUFLQSxFQUFPLE1BQU0saUJBQWlCLEVBQ2hFLE1BQU11N0QsR0FBb0IvTyxHQUFxQnhzRCxFQUFPLE1BQU0sa0JBQW1CZ21ELEVBQWM4YyxFQUFhLE1BQU9BLEVBQWEsUUFBUSxFQUN0STlpRSxFQUFPLE1BQU0sdUJBQXlCdTdELEdBR3RDLE1BQU1xSSxHQUFlLElBQUksSUFBSXJJLEdBQWtCLFFBQVEsRUFDbkRxSSxHQUFhLEtBQU8sR0FDcEJsVyxHQUEyQjF0RCxFQUFRdTdELEdBQWtCLFFBQVEsRUFFakUsTUFBTW1FLEdBQWEsTUFBTTNDLEdBQThCL1csRUFBY2htRCxFQUFPLE1BQU0sZUFBZ0JBLEVBQU8sTUFBTSxnQkFBaUJBLEVBQU8sTUFBTSxrQkFBbUJBLEVBQU8sTUFBTSx1QkFBd0IsS0FBTUEsRUFBTyxLQUFLLEVBQ3ZOeS9ELEdBQWdCLENBQ1osTUFBT3ovRCxFQUFPLE1BQ2QsV0FBQTAvRCxHQUNBLE1BQU8xWixFQUNQLFVBQVd1VixHQUFrQixVQUM3QixxQkFBc0IsQ0FBQ2tELEVBQ3ZCLFlBQWM1aUQsSUFBUyxDQUNuQjh4QyxHQUFtQjN0RCxFQUFRNmIsR0FBTSxDQUFFLFVBQVcrbkQsRUFBWSxDQUFFLENBQ2hFLENBQ3hCLENBQXFCLENBQ0wsQ0FDQSxNQUFNWixFQUFjaGpFLEVBQU8sTUFBTSxhQUNqQyxPQUFRZ2pFLEVBQVksS0FBSSxDQUNwQixJQUFLLHlCQUNELE1BQU0zWSxHQUFvQnJxRCxFQUFPLE1BQU8sS0FBSyxvQkFBcUJnakUsRUFBWSxNQUFNLEVBQ3BGaGpFLEVBQU8sTUFBTSx1QkFBeUIsR0FDdEMsTUFBTXFqRSxFQUEwQixFQUUzQjdVLEdBQ0QsTUFBTXlCLEdBQTBCcHJELEVBQVEsUUFBUzdFLENBQU0sRUFFM0QsS0FBSyxLQUFLLFlBQWFBLEVBQU8sTUFBTSxTQUFVZ21ELEVBQWNnZCxFQUFZLE1BQU0sRUFDOUVoZCxFQUFhLEtBQUssWUFBYWhtRCxFQUFPLE1BQU0sU0FBVWdqRSxFQUFZLE1BQU0sRUFDeEUsT0FDSixJQUFLLHlCQUVELE1BQU1LLEVBQTBCLEVBQzNCN1UsR0FDRCxNQUFNeUIsR0FBMEJwckQsRUFBUSxRQUFTN0UsQ0FBTSxFQUUzRCxPQUNKLElBQUssb0JBQ0RBLEVBQU8sTUFBTSxnQkFBZ0JnakUsRUFBWSxRQUFRLEVBQzdDaGpFLEVBQU8sTUFBTSxvQkFDYkEsRUFBTyxNQUFNLGtCQUFrQixJQUFHLEVBQ2xDcTRDLEdBQWdCLEdBRXBCcjRDLEVBQU8sTUFBTSxvQkFBb0IsTUFBUyxFQUMxQ0EsRUFBTyxTQUFTLElBQUk2Z0QsR0FBMkI3Z0QsRUFBTyxNQUFNLGFBQWEsQ0FBQyxFQUMxRUEsRUFBTyxNQUFNLGtCQUFvQixHQUNqQ0EsRUFBTyxNQUFNLHVCQUF5QixHQUV0Q0EsRUFBTyxNQUFNLGFBQWUsQ0FDeEIsS0FBTSxxQkFDbEMsRUFDd0IsTUFDSixJQUFLLHNCQUNEQSxFQUFPLE1BQU0sdUJBQXlCLEdBQ3RDNlcsRUFBTyxNQUFNLG1CQUFtQixFQUNoQyxNQUNKLFFBQ0lBLEVBQU8sTUFBTSxtQkFBbUIsQ0FDeEQsQ0FDWSxDQUNKLE9BQ09wWSxFQUFPLENBcUJWLEdBcEJBdUIsRUFBTyxNQUFNLHVCQUF5QixHQUNsQzBpRSxFQUFpQixTQUNqQixNQUFNQSxFQUFpQixnQkFBZ0IsQ0FBRSxlQUFnQixFQUFJLENBQUUsRUFFL0RTLEdBQ0EsQ0FBQ0MsR0FDRCxDQUFDVixFQUFpQixRQUNsQixNQUFNVyxFQUEwQixFQUVkLE1BQU05QyxHQUFrQixDQUMxQyxNQUFBOWhFLEVBQ0EsTUFBT3VCLEVBQU8sTUFDZCxjQUFlNkUsRUFBUSxjQUN2QixvQkFBcUIsS0FBSyxvQkFDMUIsYUFBYyxDQUFDZ1YsRUFBU1ksRUFBTzZsRCxJQUFlLENBQzFDLEtBQUssS0FBSyxZQUFhem1ELEVBQVNZLEVBQU82bEQsQ0FBVSxFQUNqRDdsRCxFQUFNLEtBQUssWUFBYVosRUFBU3ltRCxDQUFVLENBQy9DLEVBQ0EsYUFBY3RnRSxDQUM5QixDQUFhLEVBQ2tCLENBQ2YsTUFBTXFqRSxFQUEwQixFQUMzQjdVLEdBQ0QsTUFBTXlCLEdBQTBCcHJELEVBQVEsUUFBUzdFLENBQU0sRUFFM0QsTUFDSixDQUNBLE1BQUlBLEVBQU8sTUFBTSxtQkFDYkEsRUFBTyxNQUFNLGtCQUFrQixTQUFTLENBQ3BDLFFBQVMscUJBQ1QsS0FBTSxDQUFFLE1BQU8sT0FBT3ZCLENBQUssQ0FBQyxDQUNoRCxDQUFpQixFQUVDQSxDQUNWLFFBQ1IsQ0FTWSxHQVJJaWtFLEVBQWlCLFNBQ2pCLE1BQU1BLEVBQWlCLGdCQUFnQixDQUFFLGVBQWdCLEVBQUksQ0FBRSxFQUUvRFMsR0FDQSxDQUFDQyxHQUNELENBQUNWLEVBQWlCLFFBQ2xCLE1BQU1XLEVBQTBCLElBRWhDempFLEVBQUFJLEVBQU8sTUFBTSxlQUFiLFlBQUFKLEVBQTJCLFFBQVMseUJBQ3BDLEdBQUksQ0FDQSxNQUFNNFosR0FBeUIsQ0FBRSxXQUFZeFosRUFBTyxNQUFNLFFBQVEsQ0FBRSxDQUN4RSxPQUNPdkIsRUFBTyxDQUNWb1ksRUFBTyxLQUFLLDBDQUEwQ3BZLENBQUssRUFBRSxDQUNqRSxDQUVBdUIsRUFBTyxNQUFNLHNCQUNURSxFQUFBRixFQUFPLE1BQU0sZUFBYixZQUFBRSxFQUEyQixRQUFTLDBCQUNwQ0YsRUFBTyxNQUFNLGtCQUFrQixJQUFHLEVBRXRDcTRDLEdBQWdCLEVBRXhCLENBQ0osRUFJTXdwQixHQUFvQixlQUFDcG5ELEVBQU81VyxFQUFPZ0IsRUFBUzg4RCxFQUE0QlEsRUFBb0J6RCxFQUFpQyxDQUMvSCxPQUFBNzVELEVBQVVBLEdBQVcsQ0FBQSxFQUNkNHpDLEdBQW1CLFNBQVksQ0FFbEMsTUFBTWdtQixFQUFpQjU2RCxhQUFpQitnRCxHQUNsQ3oyQyxFQUFRc3dELEVBQ1I1NkQsRUFDQSxJQUFJK2dELEdBQVMvL0MsRUFBUSxtQkFBbUJxNkMsR0FDcENyNkMsRUFBUSxRQUNSLElBQUlxNkMsR0FBV3I2QyxFQUFRLE9BQU8sRUFBR2hCLEVBQU80VyxFQUFPNVYsRUFBUSxVQUFZMGlELEVBQWlCLEVBQ3hGNmEsRUFBeUJ2OUQsRUFBUSxpQkFDbEM0NUQsRUFBaUJ0d0QsRUFBTSxnQkFBa0IsUUFDeENrMEQsRUFBNkJ4OUQsRUFBUSxxQkFDdEM0NUQsRUFBaUJ0d0QsRUFBTSxvQkFBc0IsUUFDN0Nzd0QsR0FDRHR3RCxFQUFNLHVCQUF1QmkwRCxFQUF3QkMsQ0FBMEIsRUFHbkYsTUFBTXJpRSxFQUFTLElBQUlvMUMsR0FBa0IsQ0FDakMsT0FBUXZ3QyxFQUFRLE9BQ2hCLE1BQUFzSixDQUNoQixDQUFhLEVBQ0swMUQsRUFBZ0IsQ0FDbEIsR0FBR2gvRCxFQUNILE9BQVE3RSxFQUFPLGdCQUFlLENBQzlDLEVBRVlBLEVBQU8sU0FBVzZqRSxFQUFjLFVBQVkxMUQsRUFBTSxVQUVsRCxNQUFNNHBDLEVBQW9CdEIsRUFBQSxLQUFLc3FCLEdBQUFtQyxJQUFMLFVBQW9CbGpFLEVBQVE2akUsRUFBZXBGLEVBQWdCa0QsRUFBNEJRLEVBQW9CekQsR0FBaUMsS0FBSyxJQUFNLENBQzdLMStELEVBQU8sTUFBSyxDQUNoQixFQUFJNDJDLEdBQVEsQ0FDUjUyQyxFQUFPLFlBQVk0MkMsQ0FBRyxDQUMxQixDQUFDLEVBRUQsT0FBQTUyQyxFQUFPLHNCQUFzQiszQyxDQUFpQixFQUN2Qy8zQyxDQUNYLENBQUMsQ0FDTCxFQU1NK2lFLEdBQWlCLGVBQUM1MEQsRUFBT3RKLEVBQVNtNkQsRUFBV0ssRUFBV1QsRUFBMkJ1RCxFQUFvQixDQUN6RyxLQUFNLENBQUUsTUFBQTFqQixFQUFPLGtCQUFBME0sRUFBbUIsa0JBQUFHLENBQWlCLEVBQUssTUFBTTdVLEVBQUEsS0FBS3NxQixHQUFBa0IsSUFBTCxVQUEyQjl6RCxFQUFNLGVBQy9GLElBQUk4OEMsRUFBZ0IsQ0FDaEIsR0FBRyxLQUFLLE9BQU8sY0FDZixHQUFHOThDLEVBQU0sY0FBYyxhQUNuQyxFQUNRODhDLEVBQWdCQyxHQUF5Q0MsRUFBbUJoOUMsRUFBTSxjQUFjLGNBQWVzd0MsRUFBT3dNLEVBQWVLLENBQWlCLEVBQ3RKTCxFQUFnQkYsR0FBcUI1OEMsRUFBTSxjQUFlQSxFQUFNLGdCQUFpQjg4QyxDQUFhLEVBQzlGOThDLEVBQU0sbUJBQXFCODhDLEVBQzNCLE1BQU10RCxFQUFxQixNQUFNeDVDLEVBQU0sY0FBYyxnQkFBZ0JBLEVBQU0sUUFBUSxFQUM3RTIxRCxFQUFTLE1BQU0zMUQsRUFBTSxjQUFjLFVBQVVBLEVBQU0sUUFBUSxFQUMzRCxDQUFFLFdBQUE0MUQsRUFBWSxZQUFBM2IsRUFBYSxlQUFBNGIsRUFBZ0IsY0FBQUMsQ0FBYSxFQUFLLE1BQU16YyxHQUEwQnI1QyxFQUFNLGNBQWV0SixFQUFRLHFCQUFzQnNKLEVBQU0sU0FBVWt4RCxFQUFXMVgsQ0FBa0IsRUFJbk13YSxHQUFBLE1BQUFBLEVBQXFCL1osRUFBYTZiLEVBQWdCRCxFQUFpQixRQUNuRSxNQUFNaGYsR0FBcUI0WixHQUFBLFlBQUFBLEVBQTJCLHFCQUNsRC81RCxFQUFRLG1CQUNOa2dELEdBQWlCNlosR0FBQSxZQUFBQSxFQUEyQixpQkFBa0IvNUQsRUFBUSxlQUM1RSxNQUFPLENBQ0gsR0FBR202RCxFQUNILE1BQUF2Z0IsRUFDQSxrQkFBQTBNLEVBQ0EsY0FBQUYsRUFDQSxXQUFBOFksRUFDQSxPQUFBRCxFQUNBLG1CQUFBOWUsRUFDQSxlQUFBRCxFQUNBLFlBQUFxRCxFQUNBLGNBQUE2YixFQUNBLFVBQUE1RSxDQUNaLENBQ0ksRUN0MEJKLE1BQU02RSxHQUFzQixJQUFJLFFBQ3pCLFNBQVNDLEdBQXVCL1gsRUFBVTBWLEVBQVcsQ0FDcEQxVixHQUNBOFgsR0FBb0IsSUFBSTlYLEVBQVUwVixDQUFTLENBRW5ELENBQ08sU0FBU2xOLEdBQTBCeEksRUFBVSxDQUNoRCxNQUFNMFYsRUFBWW9DLEdBQW9CLElBQUk5WCxDQUFRLEVBQ2xELE9BQUkwVixHQUNBb0MsR0FBb0IsT0FBTzlYLENBQVEsRUFFaEMwVixDQUNYLENBRUEsTUFBTXNDLEdBQWdDajZCLEVBQVMsQ0FBRSxNQUFPQyxFQUFRLENBQUUsQ0FBRSxFQVd2RGk2QixHQUFOLE1BQU1BLFdBQWN2bUIsRUFBVyxDQTRCbEMsWUFBWTFpQyxFQUFRLENBQ2hCLE1BQUssRUFoQlRoTixFQUFBLGFBQ0FBLEVBQUEscUJBQ0FBLEVBQUEsZUFDQUEsRUFBQSwyQkFDQUEsRUFBQSxpQkFDQUEsRUFBQSxjQUNBQSxFQUFBLHNCQUNBQSxFQUFBLGNBQ0FBLEVBQUEsbUJBQ0FBLEVBQUEsd0JBQ0FBLEVBQUEseUJBQ0FBLEVBQUEsa0JBQWEsUUFDYkEsRUFBQSx3QkFDQUEsRUFBQSx3QkFDQUEsRUFBQSxtQ0FHUSxVQUFPZ04sRUFBTyxNQUFTLFVBQVlBLEVBQU8sS0FBSyxLQUFJLElBQU8sR0FDMUQsTUFBTSxJQUFJek0sRUFBVSx5QkFBeUIsRUFtQ2pELEdBakNBLEtBQUssS0FBT3lNLEVBQU8sS0FDbkIsS0FBSyxhQUFlQSxFQUFPLGNBQWdCaXBELEdBQU0sMEJBQ2pELEtBQUssT0FBU2pwRCxFQUFPLE9BQ3JCLEtBQUssbUJBQXFCQSxFQUFPLG9CQUFzQixHQUN2RCxLQUFLLFNBQVdBLEVBQU8sVUFBWSxDQUFBLEVBQ25DLEtBQUssTUFBUUEsRUFBTyxPQUFTLEdBQzdCLEtBQUssY0FBZ0JBLEVBQU8sZUFBaUJvakMsR0FBdUIsRUFDcEUsS0FBSyxNQUFRcGpDLEVBQU8sT0FBUyxDQUFBLEVBQzdCLEtBQUssMkJBQTZCQSxFQUFPLFFBQVUsT0FDbkQsS0FBSyxXQUFhQSxFQUFPLFlBQWMsQ0FBQSxFQUN2QyxLQUFLLGdCQUFrQkEsRUFBTyxpQkFBbUIsQ0FBQSxFQUNqRCxLQUFLLGlCQUFtQkEsRUFBTyxrQkFBb0IsQ0FBQSxFQUMvQ0EsRUFBTyxhQUNQLEtBQUssV0FBYUEsRUFBTyxZQUU3QixLQUFLLGdCQUFrQkEsRUFBTyxpQkFBbUIsZ0JBQ2pELEtBQUssZ0JBQWtCQSxFQUFPLGlCQUFtQixHQUdqREEsRUFBTyxRQUFVLFFBRWJrakMsR0FBYSxJQUVaLE9BQU9sakMsRUFBTyxPQUFVLFVBQ3JCLENBQUM4aUMsR0FBOEI5aUMsRUFBTyxLQUFLLElBRS9DQSxFQUFPLGdCQUFrQixTQUl6QixLQUFLLGNBQWdCLENBQUEsSUFHckJBLEVBQU8sa0NBQW9DLFFBQzNDQSxFQUFPLGtDQUNILEtBQUssVUFBWSxLQUFLLFdBQVksQ0FDbEMsTUFBTWtwRCxFQUFjLElBQUksSUFBSSxDQUFDLEtBQUssVUFBVSxLQUFLLFVBQVUsQ0FBQyxDQUFDLEVBQzdELFVBQVc3eEQsS0FBSyxLQUFLLFNBQ2IsZUFBZ0JBLEdBQUtBLEVBQUUsV0FDdkI2eEQsRUFBWSxJQUFJLEtBQUssVUFBVTd4RCxFQUFFLFVBQVUsQ0FBQyxFQUV2QyxVQUFXQSxHQUFLQSxFQUFFLE1BQU0sWUFDN0I2eEQsRUFBWSxJQUFJLEtBQUssVUFBVTd4RCxFQUFFLE1BQU0sVUFBVSxDQUFDLEVBR3RENnhELEVBQVksS0FBTyxHQUNuQnp0RCxFQUFPLEtBQUssZ0VBQWdFLE1BQU0sS0FBS3l0RCxDQUFXLEVBQUUsS0FBSyxJQUFJLENBQUMsNEVBQTRFLENBRWxNLENBRVIsQ0EvRUEsT0FBTyxPQUFPbHBELEVBQVEsQ0FDbEIsT0FBTyxJQUFJaXBELEdBQU0sQ0FDYixHQUFHanBELEVBQ0gsU0FBVUEsRUFBTyxTQUNqQixXQUFZQSxFQUFPLFdBQ25CLGdDQUFpQyxFQUM3QyxDQUFTLENBQ0wsQ0E0RUEsSUFBSSxrQkFBbUIsQ0FDbkIsR0FBSSxLQUFLLGFBQWUsT0FDcEIsTUFBTyxPQUVOLEdBQUk1TCxHQUFZLEtBQUssVUFBVSxFQUNoQyxNQUFPLFlBRU4sR0FBSSxPQUFPLEtBQUssWUFBZSxTQUNoQyxPQUFPLEtBQUssV0FBVyxLQUUzQixNQUFNLElBQUksTUFBTSx3QkFBd0IsS0FBSyxVQUFVLEVBQUUsQ0FDN0QsQ0FXQSxNQUFNNEwsRUFBUSxDQUNWLE9BQU8sSUFBSWlwRCxHQUFNLENBQ2IsR0FBRyxLQUNILEdBQUdqcEQsQ0FDZixDQUFTLENBQ0wsQ0FhQSxPQUFPdlcsRUFBUyxDQUNaLEtBQU0sQ0FBRSxTQUFBMjZDLEVBQVUsZ0JBQUEra0IsRUFBaUIsc0JBQUFDLEVBQXVCLGNBQUFocUQsRUFBZSxVQUFBaXFELEVBQVcsV0FBQUMsRUFBWSxZQUFBbFEsRUFBYSxVQUFBbCtDLEVBQVcsU0FBQXF1RCxDQUFRLEVBQU05L0QsRUFFaEkrL0QsRUFBZ0IsSUFBSSxJQUNwQkMsRUFBWSxNQUFPcjNCLEdBQVUsQ0FFL0IsTUFBTXMzQixFQUFXRixFQUFjLElBQUlwM0IsRUFBTSxNQUFNLElBQUksRUFDN0N1M0IsRUFBV0gsRUFBYyxJQUFJLEdBQUcsRUFDaENuMUIsRUFBYSxDQUNmLEdBQUlrMUIsRUFBVyxDQUFDQSxDQUFRLEVBQUksR0FDNUIsR0FBSUcsRUFBVyxNQUFNLEtBQUtBLENBQVEsRUFBSSxDQUFBLEVBQ3RDLEdBQUlDLEVBQVcsTUFBTSxLQUFLQSxDQUFRLEVBQUksQ0FBQSxDQUN0RCxFQUVZLE1BQU0sUUFBUSxXQUFXdDFCLEVBQVcsSUFBS2hDLEdBQVksUUFBUSxRQUFPLEVBQUcsS0FBSyxJQUFNQSxFQUFRRCxDQUFLLENBQUMsQ0FBQyxDQUFDLENBQ3RHLEVBc0dNdzNCLEVBQVksQ0FDZCxHQXRHYWo1RCxHQUFLLENBQ2xCLEtBQU15ekMsR0FBWTF0QyxHQUFtQixLQUFLLElBQUksRUFDOUMsWUFBYXl5RCxHQUFtQixHQUNoQyxXQUFZSCxHQUNaLE9BQVEsR0FDUixjQUFBNXBELEVBQ0EsVUFBQWxFLEVBQ0EsUUFBUyxNQUFPMEcsRUFBTW5ELEVBQVNLLElBQVksUUFDdkMsR0FBSSxDQUFDekssR0FBaUJ1TixDQUFJLEVBQ3RCLE1BQU0sSUFBSXpPLEdBQW1CLHNDQUFzQyxFQUV2RSxNQUFNbWxELEVBQVMsSUFBSW9OLEdBQU8yRCxHQUFhLENBQUEsQ0FBRSxFQUNuQ1EsR0FBd0J6USxHQUFBLFlBQUFBLEVBQWEsa0JBQW1CLFFBQ3hEMFEsRUFBZ0JELElBQTBCLG1CQUMxQyxRQUNBUCxHQUFBLFlBQUFBLEVBQVksbUJBQW1CeGxCLEdBQzNCd2xCLEVBQVcsUUFDWCxPQUFPQSxHQUFBLFlBQUFBLEVBQVksU0FBWSxJQUMzQixJQUFJeGxCLEdBQVd3bEIsRUFBVyxPQUFPLEVBQ2pDN3FELEVBQ2QsSUFBSXNyRCxFQUFXbm9ELEVBQUssTUFDaEI5QyxHQUFBLE1BQUFBLEVBQVMsY0FDTCtxRCxJQUEwQixvQkFBc0IsQ0FBQ0MsRUFDakRDLEVBQVcsTUFBTXZnQixHQUFTLFdBQVcsS0FBTTFxQyxFQUFRLFdBQVcsR0FHMUQrcUQsSUFBMEIsU0FDMUJwckQsR0FDQXFyRCxJQUFrQnJyRCxHQUNsQnFyRCxFQUFjLGdCQUFnQnJyRCxFQUFRLE9BQU0sRUFBRyxTQUFTLEVBRTVEc3JELEVBQVcsTUFBTXZnQixHQUFTLHNCQUFzQixLQUFNMXFDLEVBQVEsWUFBYWdyRCxFQUFlLENBQ3RGLGdCQUFpQkQsSUFBMEIsVUFBWSxVQUFZLE9BQy9GLENBQXlCLElBS1QsTUFBTUcsRUFBZSxPQUFPVCxHQUFhLFlBQWNDLEVBQWMsS0FBTyxFQUN0RTVrRSxFQUFTb2xFLEVBQ1QsTUFBTTFSLEVBQU8sSUFBSSxLQUFNeVIsRUFBVSxDQUMvQixRQUFBdHJELEVBQ0EsR0FBSTZxRCxHQUFjLENBQUEsRUFDbEIsT0FBUSxFQUNoQyxDQUFxQixFQUNDLE1BQU1oUixFQUFPLElBQUksS0FBTXlSLEVBQVUsQ0FDL0IsUUFBQXRyRCxFQUNBLEdBQUk2cUQsR0FBYyxDQUFBLENBQzFDLENBQXFCLEVBQ0NXLEVBQWdCLENBQ2xCLE1BQU8sS0FDUCxTQUFVbnJELEdBQUEsWUFBQUEsRUFBUyxRQUN2QyxFQUNnQixHQUFJa3JELEVBQWMsQ0FFZCxNQUFNekUsRUFBZTNnRSxFQUVyQixnQkFBaUJ3dEMsS0FBU216QixFQUN0QixNQUFNa0UsRUFBVSxDQUNaLE1BQUFyM0IsRUFDQSxHQUFHNjNCLENBQy9CLENBQXlCLEVBRUwsTUFBTTFFLEVBQWEsU0FDdkIsQ0FDQSxNQUFNMkUsR0FBa0J0bEUsRUFDbEJ1bEUsR0FBc0IsT0FBTyxLQUFLLGlCQUFvQixVQUN4RCxLQUFLLGtCQUFvQixNQUN6QixvQkFBcUIsS0FBSyxnQkFDMUIsT0FBT2YsR0FBMEIsWUFDakNlLElBQ0ExdUQsRUFBTyxNQUFNLG1DQUFtQyxLQUFLLElBQUksME1BQTBNLEVBRXZRLElBQUl5cEQsR0FDSixHQUFJLE9BQU9rRSxHQUEwQixXQUNqQ2xFLEdBQWEsTUFBTWtFLEVBQXNCYyxFQUFlLE1BRXZELENBQ0QsTUFBTUUsRUFBa0IsT0FBT0YsR0FBZ0IsWUFBZ0IsSUFDekQsS0FBSyxhQUFlLE9BQ2hCLE9BQU9BLEdBQWdCLFdBQVcsRUFDbEMsS0FBSyxVQUFVQSxHQUFnQixXQUFXLEVBQzlDLE9BQ0FHLEVBQWVILEdBQWdCLGFBQy9CSSxHQUFnQkQsR0FBZ0JBLEVBQWEsT0FBUyxFQUN0RGhULEdBQWNnVCxFQUFhQSxFQUFhLE9BQVMsQ0FBQyxDQUFDLEVBQ25ELE9BQ0FFLEdBQTBCLE9BQU9ELElBQWtCLFVBQVlBLEdBQWMsS0FBSSxJQUFPLEdBQ3hGLE9BQ0FBLEdBRU5wRixLQUQyQjFnRSxHQUFBMGxFLEdBQWdCLFFBQWhCLFlBQUExbEUsR0FBdUIsc0JBQXVCLGdCQUVsRTRsRSxHQUFtQkcsSUFBMkIsR0FDOUNBLElBQTJCSCxHQUFtQixFQUN6RCxDQUNBLE9BQUl0ckQsR0FBQSxNQUFBQSxFQUFTLFVBQ1RpcUQsR0FBdUJqcUQsRUFBUSxTQUFVb3JELEVBQWUsRUFFckRoRixFQUNYLENBQ1osQ0FBUyxFQUdHLEdBQUksQ0FBQ2w3RCxFQUFNcW9DLElBQVksQ0FDbkIsTUFBTW00QixFQUFNaEIsRUFBYyxJQUFJeC9ELENBQUksR0FBSyxJQUFJLElBQzNDLE9BQUF3Z0UsRUFBSSxJQUFJbjRCLENBQU8sRUFDZm0zQixFQUFjLElBQUl4L0QsRUFBTXdnRSxDQUFHLEVBQ3BCWixDQUNYLENBQ1osRUFDUSxPQUFPQSxDQUNYLENBT0EsTUFBTSxnQkFBZ0Jsc0QsRUFBWSxDQUM5QixPQUFJLE9BQU8sS0FBSyxjQUFpQixXQUN0QixNQUFNLEtBQUssYUFBYUEsRUFBWSxJQUFJLEVBRTVDLEtBQUssWUFDaEIsQ0FPQSxNQUFNLFVBQVVBLEVBQVksQ0FDeEIsT0FBSSxPQUFPLEtBQUssUUFBVyxXQUNoQixNQUFNLEtBQUssT0FBT0EsRUFBWSxJQUFJLEVBRXRDLEtBQUssTUFDaEIsQ0FLQSxNQUFNLFlBQVlBLEVBQVksQ0FDMUIsT0FBSSxLQUFLLFdBQVcsT0FBUyxFQUNsQm16QixHQUFlLENBQ2xCLFdBQVksS0FBSyxXQUNqQixXQUFBbnpCLEVBQ0EsTUFBTyxLQUNQLHVCQUF3QixFQUN4QyxDQUFhLEVBRUUsQ0FBQSxDQUNYLENBTUEsTUFBTSxZQUFZQSxFQUFZLENBQzFCLE1BQU13eUIsRUFBVyxNQUFNLEtBQUssWUFBWXh5QixDQUFVLEVBQzVDK3NELEVBQWUsQ0FBQSxFQUNyQixVQUFXejJELEtBQWEsS0FBSyxNQUFPLENBQ2hDLEdBQUlBLEVBQVUsT0FBUyxXQUFZLENBQy9CLE1BQU0wMkQsRUFBaUIxMkQsRUFBVSxVQU1qQyxHQUFJLEVBTFksT0FBTzAyRCxHQUFtQixXQUNwQyxNQUFNQSxFQUFlaHRELEVBQVksSUFBSSxFQUNyQyxPQUFPZ3RELEdBQW1CLFVBQ3RCQSxFQUNBLElBRU4sUUFFUixDQUNBRCxFQUFhLEtBQUt6MkQsQ0FBUyxDQUMvQixDQUNBLE1BQU8sQ0FBQyxHQUFHazhCLEVBQVUsR0FBR3U2QixDQUFZLENBQ3hDLENBQ0EsdUJBQXdCLENBQ3BCLE9BQU8sS0FBSywwQkFDaEIsQ0FNQSxNQUFNLG1CQUFtQi9zRCxFQUFZLE9BQ2pDLE1BQU1tdUMsSUFBV3JuRCxFQUFBLEtBQUssV0FBTCxZQUFBQSxFQUFlLElBQUs2UyxHQUFNaXVDLEdBQVdqdUMsQ0FBQyxLQUFNLENBQUEsRUFDdkRtQixFQUFVLENBQUEsRUFDaEIsVUFBVzBzQyxLQUFXMkcsRUFDZCxNQUFNM0csRUFBUSxVQUFVLENBQUUsV0FBQXhuQyxFQUFZLE1BQU8sSUFBSSxDQUFFLEdBQ25EbEYsRUFBUSxLQUFLMHNDLENBQU8sRUFHNUIsT0FBTzFzQyxDQUNYLENBT0EsbUJBQW1CckIsRUFBUSxDQUN2QixHQUFJLEtBQUssYUFBZSxPQUNwQixPQUFPQSxFQUVYLEdBQUksT0FBTyxLQUFLLFlBQWUsU0FBVSxDQUNyQyxNQUFNNEgsRUFBUyxLQUFLLE1BQU01SCxDQUFNLEVBQ2hDLE9BQUkvQyxHQUFZLEtBQUssVUFBVSxFQUNwQixLQUFLLFdBQVcsTUFBTTJLLENBQU0sRUFFaENBLENBQ1gsQ0FDQSxNQUFNLElBQUksTUFBTSx3QkFBd0IsS0FBSyxVQUFVLEVBQUUsQ0FDN0QsQ0FNQSxRQUFTLENBQ0wsTUFBTyxDQUNILEtBQU0sS0FBSyxJQUN2QixDQUNJLENBQ0osRUFqV0kvTCxFQVpTaTJELEdBWUYsNEJBQTRCLElBWmhDLElBQU05ZCxHQUFOOGQsR0N2Q1F6dEQsR0FBVSwyQkFBMkIsRUNrQ3BEZ25DLEdBQWtCcGxCLEdBQWdCLENBQUUsRUM5QjdCLFNBQVN1dEMsR0FBb0J2akQsRUFBUSxDQUN4QyxNQUFNd2pELEVBQWUsS0FBS3hqRCxDQUFNLEVBQzFCMGlCLEVBQU04Z0MsRUFBYSxPQUNuQnZ1RCxFQUFRLElBQUksV0FBV3l0QixDQUFHLEVBQ2hDLFFBQVM1akMsRUFBSSxFQUFHQSxFQUFJNGpDLEVBQUs1akMsSUFDckJtVyxFQUFNblcsQ0FBQyxFQUFJMGtFLEVBQWEsV0FBVzFrRSxDQUFDLEVBRXhDLE9BQU9tVyxFQUFNLE1BQ2pCLENBTU8sU0FBU3d1RCxHQUFvQkMsRUFBYSxDQUM3QyxNQUFNRixFQUFlLE9BQU8sYUFBYSxHQUFHLElBQUksV0FBV0UsQ0FBVyxDQUFDLEVBQ3ZFLE9BQU8sS0FBS0YsQ0FBWSxDQUM1QixDQU1PLFNBQVNHLEdBQWtDOWhFLEVBQU0sQ0FZcEQsR0FYSSxPQUFPQSxFQUFTLEtBQ2hCQSxJQUFTLE1BQ1QsT0FBT0EsR0FBUyxVQUNoQixFQUFFLFNBQVVBLElBQ1osT0FBT0EsRUFBSyxNQUFTLFVBQ3JCLENBQUNBLEVBQUssTUFHTkEsRUFBSyxPQUFTLFdBR2QsRUFBRSxZQUFhQSxJQUNmLENBQUMsTUFBTSxRQUFRQSxFQUFLLE9BQU8sR0FDM0JBLEVBQUssUUFBUSxPQUFTLEVBQ3RCLE9BRUosTUFBTStoRSxFQUFrQi9oRSxFQUFLLFFBQVFBLEVBQUssUUFBUSxPQUFTLENBQUMsRUFDNUQsR0FBSSxJQUFFLFNBQVUraEUsSUFDWixPQUFPQSxFQUFnQixNQUFTLFVBR3BDLElBQUlBLEVBQWdCLE9BQVMsY0FDekIsT0FBTyxPQUFPQSxFQUFnQixNQUFTLFNBQ2pDQSxFQUFnQixLQUNoQixPQUVWLEdBQUlBLEVBQWdCLE9BQVMsZUFDekIsT0FBTyxPQUFPQSxFQUFnQixZQUFlLFNBQ3ZDQSxFQUFnQixXQUNoQixPQUdkLENBT08sU0FBU0MsR0FBb0JDLEVBQVlDLEVBQVksQ0FDeEQsTUFBTUMsRUFBV0YsRUFBVyxPQUFRamlFLEdBQVMsQ0FBQ2tpRSxFQUFXLEtBQU16N0QsR0FBWUEsRUFBUSxTQUFXekcsRUFBSyxNQUFNLENBQUMsRUFDcEdvaUUsRUFBWUYsRUFBVyxPQUFRbGlFLEdBQVMsQ0FBQ2lpRSxFQUFXLEtBQU1JLEdBQVlBLEVBQVEsU0FBV3JpRSxFQUFLLE1BQU0sQ0FBQyxFQUNyR3NpRSxFQUFVSixFQUFXLE9BQVFsaUUsR0FBU2lpRSxFQUFXLEtBQU1JLEdBQVlBLEVBQVEsU0FBV3JpRSxFQUFLLFFBQzdGLEtBQUssVUFBVXFpRSxDQUFPLElBQU0sS0FBSyxVQUFVcmlFLENBQUksQ0FBQyxDQUFDLEVBQ3JELE1BQU8sQ0FDSCxTQUFBbWlFLEVBQ0EsVUFBQUMsRUFDQSxRQUFBRSxDQUNSLENBQ0EsQ0FLTyxTQUFTQyxJQUFtQixDQUMvQixPQUFJLE9BQU8sT0FBVyxJQUNYLEdBRUosT0FBTyxPQUFPLGtCQUF5QixHQUNsRCxDQU1PLFNBQVNDLEdBQXVCeGlFLEVBQU0sQ0FDekMsT0FBSUEsRUFBSyxPQUFTLFNBQ1BBLEVBRVBBLEVBQUssT0FBUyxZQUNQLENBQ0gsR0FBR0EsRUFDSCxRQUFTQSxFQUFLLFFBQVEsSUFBSzNCLEdBQ25CQSxFQUFNLE9BQVMsZUFDUixDQUNILEdBQUdBLEVBQ0gsTUFBTyxJQUMvQixFQUV1QkEsQ0FDVixDQUNiLEVBRVEyQixFQUFLLE9BQVMsT0FDUCxDQUNILEdBQUdBLEVBQ0gsUUFBU0EsRUFBSyxRQUFRLElBQUszQixHQUNuQkEsRUFBTSxPQUFTLGNBQ1IsQ0FDSCxHQUFHQSxFQUNILE1BQU8sSUFDL0IsRUFFdUJBLENBQ1YsQ0FDYixFQUVXMkIsQ0FDWCxDQUtBLFNBQVN5aUUsR0FBa0N4MEQsRUFBVWt6QixFQUFVLENBQzNELEdBQUlsekIsRUFBUyxPQUFTLGFBQWVrekIsRUFBUyxPQUFTLFlBQ25ELE9BQU9BLEVBRVgsTUFBTXVoQyxFQUFnQnZoQyxFQUFTLFFBQVEsSUFBSSxDQUFDOWlDLEVBQU95SSxJQUFVLENBS3pELEdBSkl6SSxFQUFNLE9BQVMsZ0JBSWYsRUFEc0IsT0FBT0EsRUFBTSxZQUFlLFVBQVlBLEVBQU0sV0FBVyxTQUFXLEdBRTFGLE9BQU9BLEVBRVgsTUFBTXNrRSxFQUFnQjEwRCxFQUFTLFFBQVFuSCxDQUFLLEVBQzVDLE9BQUk2N0QsR0FDQUEsRUFBYyxPQUFTLGdCQUN2QixPQUFPQSxFQUFjLFlBQWUsVUFDcENBLEVBQWMsV0FBVyxPQUFTLEVBQzNCLENBQ0gsR0FBR3RrRSxFQUNILFdBQVlza0UsRUFBYyxVQUMxQyxFQUVldGtFLENBQ1gsQ0FBQyxFQUNELE1BQU8sQ0FDSCxHQUFHOGlDLEVBQ0gsUUFBU3VoQyxDQUNqQixDQUNBLENBUU8sU0FBU0UsR0FBc0IzVyxFQUFTOWlCLEVBQU8wNUIsRUFBd0IsQ0FFMUUsR0FBSTE1QixFQUFNLE9BQVMsd0RBQ2YsT0FBTzhpQixFQUFRLElBQUtqc0QsR0FBUyxDQUN6QixHQUFJQSxFQUFLLFNBQVdtcEMsRUFBTSxTQUN0Qm5wQyxFQUFLLE9BQVMsV0FDZCxTQUFVQSxHQUNWQSxFQUFLLE9BQVMsT0FBUSxDQUN0QixNQUFNOGlFLEVBQWlCOWlFLEVBQUssUUFBUSxJQUFLM0IsR0FDakNBLEVBQU0sT0FBUyxjQUNSLENBQ0gsR0FBR0EsRUFDSCxXQUFZOHFDLEVBQU0sVUFDOUMsRUFFMkI5cUMsQ0FDVixFQUNELE1BQU8sQ0FDSCxHQUFHMkIsRUFDSCxRQUFTOGlFLEVBQ1QsT0FBUSxXQUM1QixDQUNZLENBQ0EsT0FBTzlpRSxDQUNYLENBQUMsRUFFTCxNQUFNK2lFLEVBQVcsQ0FBQ0YsR0FBMEIxNUIsRUFBTSxPQUFTLFVBQ3JEcTVCLEdBQXVCcjVCLENBQUssRUFDNUJBLEVBQ0E2NUIsRUFBZ0IvVyxFQUFRLFVBQVdqc0QsR0FBU0EsRUFBSyxTQUFXbXBDLEVBQU0sTUFBTSxFQUM5RSxHQUFJNjVCLElBQWtCLEdBQUksQ0FDdEIsTUFBTUMsRUFBZWhYLEVBQVErVyxDQUFhLEVBQ3BDRSxFQUFjSCxFQUFTLE9BQVMsV0FBYUUsRUFBYSxPQUFTLFVBQ25FUixHQUFrQ1EsRUFBY0YsQ0FBUSxFQUN4REEsRUFFTixPQUFPOVcsRUFBUSxJQUFJLENBQUNqc0QsRUFBTW1qRSxJQUNsQkEsSUFBUUgsRUFDREUsRUFFUCxDQUFDTCxHQUEwQjdpRSxFQUFLLE9BQVMsVUFDbEN3aUUsR0FBdUJ4aUUsQ0FBSSxFQUUvQkEsQ0FDVixDQUNMLFNBQ1NtcEMsRUFBTSxlQUFnQixDQUUzQixNQUFNaTZCLEVBQVluWCxFQUFRLFVBQVdqc0QsR0FBU0EsRUFBSyxTQUFXbXBDLEVBQU0sY0FBYyxFQUNsRixPQUFJaTZCLElBQWMsR0FDUCxDQUNILEdBQUduWCxFQUFRLE1BQU0sRUFBR21YLEVBQVksQ0FBQyxFQUNqQ0wsRUFDQSxHQUFHOVcsRUFBUSxNQUFNbVgsRUFBWSxDQUFDLENBQzlDLEVBR21CLENBQUMsR0FBR25YLEVBQVM4VyxDQUFRLENBRXBDLEtBRUksT0FBTyxDQUFDLEdBQUc5VyxFQUFTOFcsQ0FBUSxDQUVwQyxDQUlPLE1BQU1NLEdBQVUsQ0FDbkIsYUFBYyxxQkFBcUJwcEUsRUFBUyxPQUFPLEdBQ25ELHNCQUF1QixxQkFBcUJBLEVBQVMsT0FBTyxFQUNoRSxFQUlhcXBFLEdBQWlCLHFCQUFxQnJwRSxFQUFTLE9BQU8sR0FDNUQsU0FBU3NwRSxHQUFtQ250RCxFQUFPcFcsRUFBTSxDQUM1RCxLQUFNLENBQUUsS0FBQWUsRUFBTSxVQUFXNkksRUFBTSxHQUFHcE0sQ0FBSSxFQUFLd0MsRUFDM0MsT0FBTyxJQUFJeTlDLEdBQW9CLENBQzNCLEtBQU0sbUJBQ04sS0FBQTE4QyxFQUNBLFVBQVcsS0FBSyxVQUFVNkksQ0FBSSxFQUM5QixPQUFRLGNBQ1IsYUFBYyxDQUNWLEdBQUdwTSxDQUNmLENBQ0EsRUFBTzRZLENBQUssQ0FDWixDQUNPLFNBQVNvdEQsR0FBbUN4akUsRUFBTSxDQUNyRCxHQUFJQSxFQUFLLFFBQVEsT0FBUyxpQkFDdEJBLEVBQUssUUFBUSxPQUFTLG1CQUN0QixNQUFNLElBQUksTUFBTSw4REFBOEQsRUFFbEYsS0FBTSxDQUFFLEtBQUFlLEVBQU0sVUFBVzZJLEVBQU0sYUFBQTA4QyxDQUFZLEVBQUt0bUQsRUFBSyxRQUMvQyxDQUFFLE9BQUF5akUsRUFBUSxZQUFBQyxFQUFhLEdBQUdsbUUsQ0FBSSxFQUFLOG9ELEdBQWdCLENBQUEsRUFDekQsR0FBSSxDQUFDbWQsR0FBVSxDQUFDQyxFQUNaLE1BQU0sSUFBSSxNQUFNLHlEQUF5RCxFQUU3RSxNQUFPLENBQ0gsS0FBTSx1QkFDTixPQUFBRCxFQUNBLFlBQUFDLEVBQ0EsR0FBR2xtRSxFQUNILEtBQUF1RCxFQUNBLFVBQVc2SSxFQUFPLEtBQUssTUFBTUEsQ0FBSSxFQUFJLENBQUEsRUFDckMsU0FBVSxJQUNsQixDQUNBLENDM1BPLE1BQU0rNUQsV0FBc0J6aEIsRUFBTSxDQU1yQyxZQUFZbnJDLEVBQVEsQ0FDaEIsTUFBTUEsQ0FBTSxFQUZoQmhOLEVBQUEsY0FHSSxLQUFLLE1BQVFnTixFQUFPLEtBQ3hCLENBQ0osQ0NsQ08sU0FBUzZzRCxHQUE2QnZkLEVBQVUsQ0FDbkQsTUFBTyxDQUNILG1CQUFvQkEsRUFBUyxvQkFBc0IsR0FDM0QsQ0FDQSxDQUNPLFNBQVN3ZCxHQUE4QixDQUFFLFdBQVlDLEVBQWlCLEdBQUd0akUsQ0FBTyxFQUFJLENBQ3ZGLE1BQU11akUsRUFBZ0JubkIsR0FBc0JwOEMsQ0FBTyxFQUM3Q3dqRSxFQUFhRixHQUFtQkMsRUFBYyxLQUNwRCxNQUFPLENBQ0gsR0FBR0EsRUFDSCxXQUFBQyxFQUNBLElBQUssTUFBT3A2RCxHQUFTLENBQ2pCLE1BQU1qTyxFQUFTLE1BQU1vb0UsRUFBYyxJQUFJbjZELENBQUksRUFDM0MsTUFBTyxDQUNILEdBQUdqTyxFQUNILFVBQVcsQ0FBRSxHQUFHQSxFQUFPLFVBQVcsV0FBQXFvRSxDQUFVLENBQzVELENBQ1EsQ0FDUixDQUNBLENBS08sU0FBU0MsR0FBb0N0b0UsRUFBUSxDQUN4RCxNQUFPO0FBQUE7QUFBQSwyQkFFZ0JBLEVBQU8sVUFBVSxVQUFVO0FBQUEsbUJBQ25DLEtBQUssVUFBVUEsRUFBTyxPQUFPLFlBQWMsQ0FBQSxDQUFFLENBQUM7QUFBQTtBQUFBLEVBRS9ELEtBQUksQ0FDTixDQ2hDQSxTQUFTdW9FLEdBQVV0bkUsRUFBSzRILEVBQVEsQ0FFNUIsT0FBTzVILEtBQU80SCxHQUFVLE9BQU9BLEVBQU81SCxDQUFHLEVBQU0sR0FDbkQsQ0FDQSxTQUFTdW5FLEdBQW1CcHRELEVBQVEsQ0FDaEMsT0FBUW10RCxHQUFVLGFBQWNudEQsQ0FBTSxHQUNsQ210RCxHQUFVLG1CQUFvQm50RCxDQUFNLEdBQ3BDbXRELEdBQVUsb0JBQXFCbnRELENBQU0sR0FDckNtdEQsR0FBVSwwQkFBMkJudEQsQ0FBTSxHQUMzQ210RCxHQUFVLGdCQUFpQm50RCxDQUFNLEdBQ2pDbXRELEdBQVUsMkJBQTRCbnRELENBQU0sR0FDNUNtdEQsR0FBVSxRQUFTbnRELENBQU0sQ0FDakMsQ0FLTyxTQUFTcXRELEdBQW1CcnRELEVBQVEscUJBQ3ZDLEdBQUksQ0FBQ290RCxHQUFtQnB0RCxDQUFNLEVBQUcsQ0FDN0IsTUFBTXN0RCxHQUFjOW9FLEVBQUF3YixFQUFPLFFBQVAsTUFBQXhiLEVBQWMsTUFDNUIsQ0FDRSxPQUFRK29FLEdBQXFCdnRELEVBQU8sTUFBTSxNQUFNLE1BQU0sRUFDdEQsZUFBZ0JBLEVBQU8sTUFBTSxNQUFNLGdCQUFrQixLQUNyRCxjQUFlQSxFQUFPLE1BQU0sTUFBTSxjQUNsQyxjQUFlQSxFQUFPLE1BQU0sTUFBTSxhQUNsRCxFQUNjLE9BQ0F3dEQsSUFBdUJ4bkUsR0FBQWxCLEVBQUFrYixFQUFPLFFBQVAsWUFBQWxiLEVBQWMsU0FBZCxZQUFBa0IsRUFBc0IsUUFBU2dhLEVBQU8sTUFDN0R5dEQsR0FBZXJsRSxFQUFBNFgsRUFBTyxRQUFQLE1BQUE1WCxFQUFjLFFBQVUsT0FBT29sRSxFQUF5QixJQUN2RSxDQUNFLE9BQVFELElBQXFCaGxFLEdBQUFGLEVBQUEyWCxFQUFPLFFBQVAsWUFBQTNYLEVBQWMsU0FBZCxZQUFBRSxFQUFzQixNQUFNLEVBQ3pELE1BQU9pbEUsRUFDUCxPQUFPRSxHQUFBQyxFQUFBM3RELEVBQU8sUUFBUCxZQUFBMnRELEVBQWMsU0FBZCxZQUFBRCxFQUFzQixLQUM3QyxFQUNjLE9BQ04sTUFBTyxDQUNILE1BQU8xdEQsRUFBTyxNQUNkLGFBQWNBLEVBQU8sYUFDckIsV0FBWUEsRUFBTyxXQUNuQixNQUFPQSxFQUFPLE1BQ2QsUUFBU0EsRUFBTyxRQUNoQixhQUFjQSxFQUFPLGFBQ3JCLE9BQVFBLEVBQU8sT0FDZixpQkFBa0JBLEVBQU8saUJBQ3pCLE1BQU9zdEQsR0FBZUcsRUFDaEIsQ0FDRSxNQUFPSCxFQUNQLE9BQVFHLENBQzVCLEVBQ2tCLE1BQ2xCLENBQ0ksQ0FDQSxNQUFPLENBQ0gsTUFBT3p0RCxFQUFPLE1BQ2QsYUFBY0EsRUFBTyxhQUNyQixXQUFZQSxFQUFPLFdBQ25CLE1BQU9BLEVBQU8sTUFDZCxRQUFTQSxFQUFPLFFBQ2hCLGFBQWNBLEVBQU8sYUFDckIsT0FBUUEsRUFBTyxPQUNmLGlCQUFrQkEsRUFBTyxXQUN6QixNQUFPLENBQ0gsTUFBTyxDQUNILE9BQVF1dEQsR0FBcUJ2dEQsRUFBTyxnQkFBZ0IsRUFDcEQsZUFBZ0JBLEVBQU8sMEJBQTRCLEtBQ25ELGNBQWVBLEVBQU8sd0JBQ3RCLGNBQWVBLEVBQU8sYUFDdEMsRUFDWSxPQUFRLENBQ0osT0FBUXV0RCxHQUFxQnZ0RCxFQUFPLGlCQUFpQixFQUNyRCxNQUFPQSxFQUFPLE1BQ2QsTUFBT0EsRUFBTyxLQUM5QixDQUNBLENBQ0EsQ0FDQSxDQUNPLFNBQVN1dEQsR0FBcUJub0UsRUFBUSxDQUN6QyxHQUFJLENBQUNBLEVBQ0QsT0FDSixHQUFJLE9BQU9BLEdBQVcsU0FDbEIsT0FBT0EsRUFDWCxNQUFNOHVCLEVBQUksT0FBTzl1QixDQUFNLEVBQ3ZCLE9BQUk4dUIsSUFBTSxRQUNDLENBQUUsS0FBTSxZQUFhLEtBQU0sSUFBSyxFQUN2Q0EsSUFBTSxZQUNDLENBQUUsS0FBTSxZQUFZLEVBQzNCQSxJQUFNLFlBQ0MsQ0FBRSxLQUFNLFlBQVksRUFFeEIsQ0FBRSxLQUFNLFlBQWEsS0FBTSxJQUFLLENBQzNDLENDekY4QjZhLEVBQVMsQ0FDbkMsT0FBUUMsRUFBUSxDQUNwQixDQUFDLEVBQ00sTUFBTTQrQixHQUE0QmozQixHQUFxQixPQUFRLENBQ2xFNUgsRUFBUyxDQUNMLE9BQVFDLEVBQVEsRUFDaEIsZUFBZ0JBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUSxFQUM5QyxLQUFNQyxFQUFVLFNBQVMsRUFDekIsS0FBTUEsRUFBVSxRQUFRLEVBQ3hCLFFBQVNHLEVBQVFMLEVBQVMsQ0FBRSxLQUFNRSxFQUFVLFlBQVksRUFBRyxLQUFNRCxFQUFRLENBQUUsQ0FBRSxDQUFDLENBQ3RGLENBQUssRUFDREQsRUFBUyxDQUNMLE9BQVFDLEVBQVEsRUFDaEIsZUFBZ0JBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUSxFQUM5QyxLQUFNQyxFQUFVLFNBQVMsRUFDekIsS0FBTUEsRUFBVSxNQUFNLEVBQ3RCLE9BQVE0SCxHQUFPLENBQUMsY0FBZSxXQUFXLENBQUMsRUFDM0MsUUFBU3pILEVBQVFMLEVBQVMsQ0FBRSxLQUFNRSxFQUFVLFlBQVksRUFBRyxLQUFNRCxFQUFRLENBQUUsQ0FBRSxFQUFFLEdBQUdELEVBQVMsQ0FDdkYsS0FBTUUsRUFBVSxhQUFhLEVBQzdCLE1BQU9ELEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUSxFQUNyQyxXQUFZQSxFQUFRLEVBQUcsU0FBUSxDQUMzQyxDQUFTLENBQUMsQ0FBQyxDQUNYLENBQUssRUFDREQsRUFBUyxDQUNMLE9BQVFDLEVBQVEsRUFDaEIsZUFBZ0JBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUSxFQUM5QyxLQUFNQyxFQUFVLFNBQVMsRUFDekIsS0FBTUEsRUFBVSxXQUFXLEVBQzNCLE9BQVE0SCxHQUFPLENBQUMsY0FBZSxZQUFhLFlBQVksQ0FBQyxFQUN6RCxRQUFTekgsRUFBUUwsRUFBUyxDQUFFLEtBQU1FLEVBQVUsYUFBYSxFQUFHLEtBQU1ELEVBQVEsQ0FBRSxDQUFFLEVBQUUsR0FBR0QsRUFBUyxDQUN4RixLQUFNRSxFQUFVLGNBQWMsRUFDOUIsTUFBT0QsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRLEVBQ3JDLFdBQVlBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUSxDQUN0RCxDQUFTLENBQUMsQ0FBQyxDQUNYLENBQUssQ0FDTCxDQUFDLEVBQ1k2K0IsR0FBdUI5K0IsRUFBUyxDQUN6QyxPQUFRQyxFQUFRLEVBQ2hCLGVBQWdCQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVEsRUFDOUMsS0FBTUMsRUFBVSxlQUFlLEVBQy9CLE9BQVE0SCxHQUFPLENBQUMsY0FBZSxZQUFhLFlBQVksQ0FBQyxFQUN6RCxVQUFXN0gsRUFBUSxFQUNuQixLQUFNQSxFQUFRLEVBQ2QsT0FBUUEsRUFBUSxFQUFHLFNBQVEsQ0FDL0IsQ0FBQyxFQUNZOCtCLEdBQXNCLytCLEVBQVMsQ0FDeEMsT0FBUUMsRUFBUSxFQUNoQixlQUFnQkEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRLEVBQzlDLEtBQU02SCxHQUFPLENBQUMsV0FBWSxlQUFlLENBQUMsRUFDMUMsT0FBUUEsR0FBTyxDQUFDLGNBQWUsWUFBYSxZQUFZLENBQUMsRUFDekQsVUFBVzdILEVBQVEsRUFDbkIsS0FBTUEsRUFBUSxFQUNkLE9BQVFBLEVBQVEsRUFBRyxTQUFRLENBQy9CLENBQUMsRUFDWSsrQixHQUFxQ2gvQixFQUFTLENBQ3ZELE9BQVFDLEVBQVEsRUFDaEIsS0FBTUMsRUFBVSxzQkFBc0IsRUFDdEMsWUFBYUQsRUFBUSxFQUNyQixLQUFNQSxFQUFRLEVBQ2QsVUFBV0UsRUFBU0YsRUFBUSxFQUFJRyxFQUFLLENBQUUsRUFDdkMsU0FBVUUsR0FBUyxFQUFHLFNBQVEsRUFBRyxTQUFRLENBQzdDLENBQUMsRUM3REs1ekIsR0FBU0QsR0FBVSx3QkFBd0IsRUNHcEN3eUQsR0FBbUJqL0IsRUFBUyxDQUNyQyxHQUFJQyxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVEsRUFDbEMsZ0JBQWlCQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVEsRUFDL0Msa0JBQW1CNEgsRUFBUSxFQUFHLEdBQUczSCxFQUFVLEtBQUssQ0FBQyxFQUFFLFNBQVEsRUFBRyxTQUFRLEVBQ3RFLFNBQVVDLEVBQVNGLEVBQVEsRUFBSUcsRUFBSyxDQUFFLEVBQUUsU0FBUSxFQUFHLFNBQVEsRUFFM0Qsa0JBQW1CQyxFQUFRSixFQUFRLENBQUUsRUFBRSxTQUFRLEVBQUcsU0FBUSxFQUMxRCxPQUFRQyxFQUFVLG1CQUFtQixFQUFFLFNBQVEsRUFBRyxTQUFRLEVBQzFELE9BQVFHLEVBQVFELEVBQUssQ0FBRSxFQUFFLFNBQVEsRUFBRyxTQUFRLEVBRTVDLE1BQU9zWSxFQUNLLENBQ1IsT0FBUXdtQixFQUNJLENBQ1IsT0FBUTkrQixFQUFLLEVBQUcsU0FBUSxFQUFHLFNBQVEsRUFDbkMsTUFBT0gsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRLENBQ2pELENBQVMsRUFDSSxTQUFRLEVBQ1IsU0FBUSxDQUNyQixDQUFLLEVBQ0ksU0FBUSxFQUNSLFNBQVEsRUFDYixPQUFRay9CLEdBQ0UsQ0FBQyxZQUFhLGFBQWMsU0FBVSxZQUFhLGFBQWEsQ0FBQyxFQUN0RSxTQUFRLEVBQ1IsU0FBUSxFQUNiLGVBQWdCaC9CLEVBQVNGLEVBQVEsRUFBSUcsRUFBSyxDQUFFLEVBQUUsU0FBUSxFQUFHLFNBQVEsRUFDakUsTUFBT3NZLEVBQ0ssQ0FDUixhQUFjN1EsRUFBUSxFQUFHLFNBQVEsRUFDakMsb0JBQXFCMUgsRUFBU0YsRUFBUSxFQUFJRyxFQUFLLENBQUUsRUFBRSxTQUFRLEVBQUcsU0FBUSxFQUN0RSxjQUFleUgsRUFBUSxFQUFHLFNBQVEsRUFDbEMscUJBQXNCMUgsRUFBU0YsRUFBUSxFQUFJRyxFQUFLLENBQUUsRUFBRSxTQUFRLEVBQUcsU0FBUSxDQUMvRSxDQUFLLEVBQ0ksU0FBUSxFQUNSLFNBQVEsQ0FDakIsQ0FBQyxFQUVZZy9CLEdBQWdDcC9CLEVBQVMsQ0FDbEQsR0FBSUMsRUFBUSxFQUFHLFNBQVEsRUFDdkIsTUFBT0EsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRLEVBQ3JDLEtBQU1BLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUSxFQUNwQyxXQUFZQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVEsRUFDMUMsS0FBTTZKLEdBQVEsQ0FDVjVKLEVBQVUsWUFBWSxFQUN0QkEsRUFBVSxhQUFhLEVBQ3ZCQSxFQUFVLGdCQUFnQixFQUMxQkEsRUFBVSxhQUFhLEVBQ3ZCQSxFQUFVLGNBQWMsQ0FDaEMsQ0FBSyxDQUNMLENBQUMsRUFDWW0vQixHQUF5QnIyQixFQUMxQixDQUNSLEdBQUkvSSxFQUFRLEVBQUcsU0FBUSxFQUN2QixVQUFXQSxFQUFRLEVBQUcsU0FBUSxFQUM5QixRQUFTQSxFQUFRLEVBQUcsU0FBUSxFQUM1QixRQUFTSSxFQUFRKytCLEVBQTZCLEVBQUUsU0FBUSxFQUN4RCxLQUFNbi9CLEVBQVEsRUFBRyxTQUFRLEVBQ3pCLE9BQVFBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUSxFQUN0QyxLQUFNNkgsR0FBTyxDQUFDLE9BQVEsWUFBYSxRQUFRLENBQUMsRUFBRSxTQUFRLEVBQ3RELE9BQVFBLEdBQU8sQ0FBQyxZQUFhLGFBQWMsYUFBYSxDQUFDLEVBQUUsU0FBUSxFQUNuRSxLQUFNcTNCLEdBQ0ksQ0FDTixVQUNBLGdCQUNBLHVCQUNBLGlCQUNBLGdCQUNBLFdBQ0EsdUJBQ0EsdUJBQ1IsQ0FBSyxFQUNJLFNBQVEsRUFDYixvQkFBcUJsL0IsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRLEVBQ25ELFFBQVNLLEdBQVMsRUFBRyxTQUFRLEVBQUcsU0FBUSxFQUN4QyxPQUFRTCxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVEsRUFDdEMsYUFBY0EsRUFBUSxFQUFHLFNBQVEsRUFDakMsTUFBT0csRUFBSyxFQUFHLFNBQVEsRUFBRyxTQUFRLEVBQ2xDLE1BQU8wWixFQUNJcEIsRUFDQyxDQUNSLEtBQU16WSxFQUFRLEVBQ2QsWUFBYUEsRUFBUSxFQUNyQixhQUFjRSxFQUFTRixFQUFRLEVBQUlHLEVBQUssQ0FBRSxFQUFFLFNBQVEsQ0FDNUQsQ0FBSyxFQUNJLFlBQVcsQ0FBRSxFQUNiLFNBQVEsQ0FDakIsQ0FBQyxFQUNJLFlBQVcsRUFDSGsvQixHQUFpQ3QvQixFQUFTLENBQ25ELEtBQU1FLEVBQVUsc0JBQXNCLEVBQ3RDLFNBQVVELEVBQVEsRUFDbEIsYUFBY0QsRUFBUyxDQUNuQixHQUFJQyxFQUFRLEVBQUcsU0FBUSxFQUN2QixPQUFRQyxFQUFVLHVCQUF1QixFQUFFLFNBQVEsQ0FDM0QsQ0FBSyxDQUNMLENBQUMsRUFFWXEvQixHQUFtQ3YvQixFQUFTLENBQ3JELEtBQU1FLEVBQVUseUJBQXlCLEVBQ3pDLFNBQVVELEVBQVEsRUFDbEIsS0FBTW8vQixHQUNOLGlCQUFrQnAvQixFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVEsQ0FDcEQsQ0FBQyxFQUVZdS9CLEdBQWtDeC9CLEVBQVMsQ0FDcEQsS0FBTUUsRUFBVSx3QkFBd0IsRUFDeEMsU0FBVUQsRUFBUSxFQUNsQixLQUFNby9CLEdBQ04saUJBQWtCcC9CLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUSxDQUNwRCxDQUFDLEVBQ1l3L0IsR0FBcUN6L0IsRUFBUyxDQUN2RCxLQUFNRSxFQUFVLDJCQUEyQixFQUMzQyxTQUFVRCxFQUFRLEVBQ2xCLFFBQVNBLEVBQVEsQ0FDckIsQ0FBQyxFQUNZeS9CLEdBQThEMS9CLEVBQVMsQ0FDaEYsS0FBTUUsRUFBVSx1REFBdUQsRUFDdkUsU0FBVUQsRUFBUSxFQUNsQixRQUFTQSxFQUFRLEVBQ2pCLGNBQWU0SCxFQUFRLEVBQ3ZCLFdBQVk1SCxFQUFRLEVBQ3BCLFNBQVVJLEVBQVFELEVBQUssQ0FBRSxFQUFFLFNBQVEsRUFBRyxTQUFRLEVBQzlDLE1BQU9zWSxFQUNLLENBQ1IsS0FBTXhZLEVBQVUsUUFBUSxFQUN4QixhQUFjMkgsRUFBUSxFQUN0QixhQUFjQSxFQUFRLEVBQ3RCLG9CQUFxQjdILEVBQVMsQ0FDMUIsWUFBYTZILEVBQVEsRUFDckIsYUFBY0EsRUFBUSxDQUNsQyxDQUFTLEVBQ0QsY0FBZUEsRUFBUSxDQUMvQixDQUFLLEVBQ0ksU0FBUSxDQUNqQixDQUFDLEVBQ1k4M0IsR0FBMEQzL0IsRUFBUyxDQUM1RSxLQUFNRSxFQUFVLG1EQUFtRCxFQUNuRSxTQUFVRCxFQUFRLEVBQ2xCLFFBQVNBLEVBQVEsRUFDakIsY0FBZTRILEVBQVEsRUFBRyxTQUFRLEVBQ2xDLE1BQU81SCxFQUFRLEVBQUcsU0FBUSxFQUMxQixTQUFVSSxFQUFRRCxFQUFLLENBQUUsRUFBRSxTQUFRLEVBQUcsU0FBUSxDQUNsRCxDQUFDLEVBQ1l3L0IsR0FBMkQ1L0IsRUFBUyxDQUM3RSxLQUFNRSxFQUFVLG9EQUFvRCxFQUNwRSxTQUFVRCxFQUFRLEVBQ2xCLFFBQVNBLEVBQVEsRUFDakIsY0FBZTRILEVBQVEsRUFDdkIsTUFBTzdILEVBQVMsQ0FDWixLQUFNQyxFQUFRLEVBQUcsU0FBUSxFQUN6QixRQUFTQSxFQUFRLEVBQUcsU0FBUSxFQUM1QixNQUFPQSxFQUFRLEVBQUcsU0FBUSxFQUMxQixLQUFNQSxFQUFRLEVBQUcsU0FBUSxDQUNqQyxDQUFLLENBQ0wsQ0FBQyxFQUNZNC9CLEdBQXVDNy9CLEVBQVMsQ0FDekQsS0FBTUUsRUFBVSw2QkFBNkIsRUFDN0MsU0FBVUQsRUFBUSxFQUNsQixLQUFNby9CLEVBQ1YsQ0FBQyxFQUNZUyxHQUF1QzkvQixFQUFTLENBQ3pELEtBQU1FLEVBQVUsNkJBQTZCLEVBQzdDLFNBQVVELEVBQVEsRUFDbEIsUUFBU0EsRUFBUSxFQUNqQixhQUFjNEgsRUFBUSxFQUN0QixjQUFlQSxFQUFRLENBQzNCLENBQUMsRUFDWWs0QixHQUFvQy8vQixFQUFTLENBQ3RELEtBQU1FLEVBQVUsMEJBQTBCLEVBQzFDLEtBQU1tL0IsR0FDTixTQUFVcC9CLEVBQVEsRUFBRyxTQUFRLEVBQzdCLGlCQUFrQkEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRLENBQ3BELENBQUMsRUFDWSsvQixHQUFvQ2hnQyxFQUFTLENBQ3RELEtBQU1FLEVBQVUsMEJBQTBCLEVBQzFDLFFBQVNELEVBQVEsRUFDakIsU0FBVUEsRUFBUSxFQUFHLFNBQVEsQ0FDakMsQ0FBQyxFQUNZZ2dDLEdBQXNDamdDLEVBQVMsQ0FDeEQsS0FBTUUsRUFBVSw0QkFBNEIsRUFDNUMsUUFBU0QsRUFBUSxFQUNqQixTQUFVQSxFQUFRLEVBQUcsU0FBUSxDQUNqQyxDQUFDLEVBQ1lpZ0MsR0FBc0NsZ0MsRUFBUyxDQUN4RCxLQUFNRSxFQUFVLDRCQUE0QixFQUM1QyxRQUFTRCxFQUFRLEVBQ2pCLGFBQWM0SCxFQUFRLEVBQ3RCLGNBQWVBLEVBQVEsRUFDdkIsU0FBVTVILEVBQVEsRUFBRyxTQUFRLENBQ2pDLENBQUMsRUFDWWtnQyxHQUFtQm5nQyxFQUFTLENBQ3JDLEtBQU1FLEVBQVUsT0FBTyxFQUN2QixTQUFVRCxFQUFRLEVBQUcsU0FBUSxFQUM3QixNQUFPRyxFQUFLLEVBQUcsU0FBUSxDQUMzQixDQUFDLEVBQ1lnZ0MsR0FBcUNwZ0MsRUFBUyxDQUN2RCxLQUFNRSxFQUFVLDRCQUE0QixFQUM1QyxTQUFVRCxFQUFRLENBQ3RCLENBQUMsRUFDWW9nQyxHQUFvQ3JnQyxFQUFTLENBQ3RELEtBQU1FLEVBQVUsMkJBQTJCLEVBQzNDLE1BQU9ELEVBQVEsRUFDZixTQUFVQSxFQUFRLEVBQUcsU0FBUSxDQUNqQyxDQUFDLEVBQ1lxZ0MsR0FBbUN0Z0MsRUFBUyxDQUNyRCxLQUFNRSxFQUFVLDBCQUEwQixFQUMxQyxTQUFVRCxFQUFRLEVBQUcsU0FBUSxDQUNqQyxDQUFDLEVBQ1lzZ0MsR0FBb0N2Z0MsRUFBUyxDQUN0RCxLQUFNRSxFQUFVLDJCQUEyQixFQUMzQyxTQUFVRCxFQUFRLEVBQUcsU0FBUSxDQUNqQyxDQUFDLEVBQ1l1Z0MsR0FBdUN4Z0MsRUFBUyxDQUN6RCxLQUFNRSxFQUFVLDhCQUE4QixFQUM5QyxTQUFVRCxFQUFRLEVBQ2xCLFFBQVNBLEVBQVEsRUFDakIsaUJBQWtCQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVEsQ0FDcEQsQ0FBQyxFQUNZd2dDLEdBQTJDemdDLEVBQVMsQ0FDN0QsS0FBTUUsRUFBVSxtQ0FBbUMsRUFDbkQsU0FBVUQsRUFBUSxFQUNsQixRQUFTQSxFQUFRLEVBQ2pCLGVBQWdCNEgsRUFBUSxDQUM1QixDQUFDLEVBQ1k2NEIsR0FBMkMxZ0MsRUFBUyxDQUM3RCxLQUFNRSxFQUFVLG1DQUFtQyxFQUNuRCxTQUFVRCxFQUFRLEVBQ2xCLFFBQVNBLEVBQVEsRUFDakIsYUFBYzRILEVBQVEsQ0FDMUIsQ0FBQyxFQUNZODRCLEdBQXNDMzNCLEVBQ3ZDLENBQ1IsS0FBTTlJLEVBQVUsNkJBQTZCLEVBQzdDLFNBQVVELEVBQVEsQ0FDdEIsQ0FBQyxFQUNJLFlBQVcsRUFDSDJnQyxHQUFzQzUzQixFQUN2QyxDQUNSLEtBQU05SSxFQUFVLDZCQUE2QixFQUM3QyxTQUFVRCxFQUFRLENBQ3RCLENBQUMsRUFDSSxZQUFXLEVBQ0g0Z0MsR0FBc0M3Z0MsRUFBUyxDQUN4RCxLQUFNRSxFQUFVLDZCQUE2QixFQUM3QyxTQUFVRCxFQUFRLENBQ3RCLENBQUMsRUFDWTZnQyxHQUErQjlnQyxFQUFTLENBQ2pELEtBQU1FLEVBQVUscUJBQXFCLEVBQ3JDLFNBQVVELEVBQVEsRUFDbEIsWUFBYUksRUFBUUwsRUFBUyxDQUMxQixNQUFPNkgsRUFBUSxFQUFHLFNBQVEsRUFDMUIsS0FBTUMsR0FBTyxDQUFDLFdBQVksUUFBUSxDQUFDLEVBQUUsU0FBUSxFQUM3QyxVQUFXRCxFQUFRLEVBQUcsU0FBUSxFQUM5QixjQUFlQSxFQUFRLEVBQUcsU0FBUSxDQUMxQyxDQUFLLENBQUMsQ0FDTixDQUFDLEVBQ1lrNUIsR0FBZ0MvZ0MsRUFBUyxDQUNsRCxLQUFNRSxFQUFVLDZCQUE2QixFQUM3QyxTQUFVRCxFQUFRLEVBQ2xCLFFBQVNBLEVBQVEsRUFDakIsY0FBZTRILEVBQVEsRUFDdkIsTUFBTzVILEVBQVEsRUFDZixhQUFjNEgsRUFBUSxFQUN0QixZQUFhNUgsRUFBUSxDQUN6QixDQUFDLEVBQ1krZ0MsR0FBK0JoaEMsRUFBUyxDQUNqRCxLQUFNRSxFQUFVLDRCQUE0QixFQUM1QyxTQUFVRCxFQUFRLEVBQ2xCLFFBQVNBLEVBQVEsRUFDakIsY0FBZTRILEVBQVEsRUFDdkIsYUFBY0EsRUFBUSxFQUN0QixZQUFhNUgsRUFBUSxDQUN6QixDQUFDLEVBQ1lnaEMsR0FBMENqaEMsRUFBUyxDQUM1RCxLQUFNRSxFQUFVLHdDQUF3QyxFQUN4RCxTQUFVRCxFQUFRLEVBQ2xCLFFBQVNBLEVBQVEsRUFDakIsY0FBZTRILEVBQVEsRUFDdkIsTUFBTzVILEVBQVEsRUFDZixhQUFjNEgsRUFBUSxFQUN0QixZQUFhNUgsRUFBUSxDQUN6QixDQUFDLEVBQ1lpaEMsR0FBeUNsaEMsRUFBUyxDQUUzRCxLQUFNRSxFQUFVLHVDQUF1QyxFQUN2RCxTQUFVRCxFQUFRLEVBQ2xCLFFBQVNBLEVBQVEsRUFDakIsY0FBZTRILEVBQVEsRUFDdkIsV0FBWTVILEVBQVEsRUFDcEIsYUFBYzRILEVBQVEsRUFDdEIsWUFBYTVILEVBQVEsQ0FDekIsQ0FBQyxFQUNZa2hDLEdBQXNDbmhDLEVBQVMsQ0FDeEQsS0FBTUUsRUFBVSw2QkFBNkIsRUFDN0MsU0FBVUQsRUFBUSxFQUNsQixRQUFTQSxFQUFRLEVBQ2pCLGNBQWU0SCxFQUFRLEVBQ3ZCLGFBQWNBLEVBQVEsRUFDdEIsWUFBYTVILEVBQVEsRUFDckIsS0FBTUQsRUFBUyxDQUNYLE1BQU9DLEVBQVEsRUFBRyxTQUFRLEVBQzFCLEtBQU1BLEVBQVEsRUFBRyxTQUFRLEVBQ3pCLFdBQVlBLEVBQVEsRUFBRyxTQUFRLEVBQy9CLEtBQU02SCxHQUFPLENBQUMsT0FBUSxPQUFPLENBQUMsRUFBRSxTQUFRLENBQ2hELENBQUssQ0FDTCxDQUFDLEVBQ1lzNUIsR0FBcUNwaEMsRUFBUyxDQUN2RCxLQUFNRSxFQUFVLDRCQUE0QixFQUM1QyxTQUFVRCxFQUFRLEVBQ2xCLFFBQVNBLEVBQVEsRUFDakIsY0FBZTRILEVBQVEsRUFDdkIsYUFBY0EsRUFBUSxFQUN0QixZQUFhNUgsRUFBUSxFQUNyQixLQUFNRCxFQUFTLENBQ1gsTUFBT0MsRUFBUSxFQUFHLFNBQVEsRUFDMUIsS0FBTUEsRUFBUSxFQUFHLFNBQVEsRUFDekIsV0FBWUEsRUFBUSxFQUFHLFNBQVEsRUFDL0IsS0FBTTZILEdBQU8sQ0FBQyxPQUFRLE9BQU8sQ0FBQyxFQUFFLFNBQVEsQ0FDaEQsQ0FBSyxDQUNMLENBQUMsRUFDWXU1QixHQUE2QnJoQyxFQUFTLENBQy9DLEtBQU1FLEVBQVUsa0JBQWtCLEVBQ2xDLFNBQVVELEVBQVEsRUFDbEIsU0FBVWcvQixFQUNkLENBQUMsRUFDWXFDLEdBQTBCdGhDLEVBQVMsQ0FDNUMsS0FBTUUsRUFBVSxlQUFlLEVBQy9CLFNBQVVELEVBQVEsRUFDbEIsU0FBVWcvQixFQUNkLENBQUMsRUFDWXNDLEdBQWdEdmhDLEVBQVMsQ0FDbEUsS0FBTUUsRUFBVSx3Q0FBd0MsRUFDeEQsU0FBVUQsRUFBUSxFQUNsQixRQUFTQSxFQUFRLEVBQ2pCLFFBQVNBLEVBQVEsRUFDakIsTUFBT0EsRUFBUSxFQUNmLGFBQWM0SCxFQUFRLEVBQ3RCLFlBQWE1SCxFQUFRLENBQ3pCLENBQUMsRUFDWXVoQyxHQUErQ3hoQyxFQUFTLENBQ2pFLEtBQU1FLEVBQVUsdUNBQXVDLEVBQ3ZELFNBQVVELEVBQVEsRUFDbEIsUUFBU0EsRUFBUSxFQUNqQixRQUFTQSxFQUFRLEVBQ2pCLFVBQVdBLEVBQVEsRUFDbkIsYUFBYzRILEVBQVEsRUFDdEIsWUFBYTVILEVBQVEsQ0FDekIsQ0FBQyxFQUNZd2hDLEdBQXFDemhDLEVBQVMsQ0FDdkQsS0FBTUUsRUFBVSw0QkFBNEIsRUFDNUMsU0FBVUQsRUFBUSxFQUNsQixLQUFNby9CLEdBQ04sYUFBY3gzQixFQUFRLEVBQ3RCLFlBQWE1SCxFQUFRLENBQ3pCLENBQUMsRUFDWXloQyxHQUFvQzFoQyxFQUFTLENBQ3RELEtBQU1FLEVBQVUsMkJBQTJCLEVBQzNDLFNBQVVELEVBQVEsRUFDbEIsS0FBTW8vQixHQUNOLGFBQWN4M0IsRUFBUSxFQUN0QixZQUFhNUgsRUFBUSxDQUN6QixDQUFDLEVBQ1kwaEMsR0FBK0IzaEMsRUFBUyxDQUNqRCxLQUFNRSxFQUFVLDRCQUE0QixFQUM1QyxTQUFVRCxFQUFRLEVBQ2xCLFFBQVNBLEVBQVEsRUFDakIsY0FBZTRILEVBQVEsRUFDdkIsTUFBTzVILEVBQVEsRUFDZixhQUFjNEgsRUFBUSxFQUN0QixZQUFhNUgsRUFBUSxDQUN6QixDQUFDLEVBQ1kyaEMsR0FBOEI1aEMsRUFBUyxDQUVoRCxLQUFNRSxFQUFVLDJCQUEyQixFQUMzQyxTQUFVRCxFQUFRLEVBQ2xCLFFBQVNBLEVBQVEsRUFDakIsY0FBZTRILEVBQVEsRUFDdkIsS0FBTTVILEVBQVEsRUFDZCxhQUFjNEgsRUFBUSxFQUN0QixZQUFhNUgsRUFBUSxDQUN6QixDQUFDLEVBQ1k0aEMsR0FBNEI3aEMsRUFBUyxDQUM5QyxLQUFNRSxFQUFVLGlCQUFpQixFQUNqQyxTQUFVRCxFQUFRLEVBQ2xCLFFBQVNHLEVBQUssQ0FDbEIsQ0FBQyxFQUNZMGhDLEdBQTRCOWhDLEVBQVMsQ0FDOUMsS0FBTUUsRUFBVSxpQkFBaUIsRUFDakMsU0FBVUQsRUFBUSxFQUNsQixRQUFTRyxFQUFLLENBQ2xCLENBQUMsRUFDWTJoQyxHQUE0Qi9oQyxFQUFTLENBQzlDLEtBQU1FLEVBQVUsaUJBQWlCLEVBQ2pDLFNBQVVELEVBQVEsRUFBRyxTQUFRLEVBQzdCLFlBQWFBLEVBQVEsRUFBRyxTQUFRLENBQ3BDLENBQUMsRUFDWStoQyxHQUE0QmhpQyxFQUFTLENBQzlDLEtBQU1FLEVBQVUsaUJBQWlCLEVBQ2pDLFNBQVVELEVBQVEsRUFBRyxTQUFRLEVBQzdCLFNBQVVHLEVBQUssRUFBRyxTQUFRLENBQzlCLENBQUMsRUFDWTZoQyxHQUEyQmppQyxFQUFTLENBQzdDLEtBQU1FLEVBQVUsZ0JBQWdCLEVBQ2hDLFNBQVVELEVBQVEsRUFBRyxTQUFRLEVBQzdCLFFBQVNHLEVBQUssQ0FDbEIsQ0FBQyxFQUNZOGhDLEdBQW9DbGlDLEVBQVMsQ0FDdEQsS0FBTUUsRUFBVSw0QkFBNEIsRUFDNUMsU0FBVUQsRUFBUSxFQUFHLFNBQVEsRUFDN0IsUUFBU0EsRUFBUSxFQUFHLFNBQVEsQ0FDaEMsQ0FBQyxFQUNZa2lDLEdBQW1DbmlDLEVBQVMsQ0FDckQsS0FBTUUsRUFBVSwwQkFBMEIsRUFDMUMsU0FBVUQsRUFBUSxFQUFHLFNBQVEsRUFDN0IsUUFBU0EsRUFBUSxFQUFHLFNBQVEsQ0FDaEMsQ0FBQyxFQUNZbWlDLEdBQTJDcGlDLEVBQVMsQ0FDN0QsS0FBTUUsRUFBVSxtQ0FBbUMsRUFDbkQsU0FBVUQsRUFBUSxFQUNsQixZQUFhQSxFQUFRLEVBQ3JCLFFBQVNBLEVBQVEsRUFDakIsYUFBYzRILEVBQVEsRUFDdEIsTUFBTzVILEVBQVEsRUFDZixZQUFhQSxFQUFRLENBQ3pCLENBQUMsRUFDWW9pQyxHQUEwQ3JpQyxFQUFTLENBQzVELEtBQU1FLEVBQVUsa0NBQWtDLEVBQ2xELFNBQVVELEVBQVEsRUFDbEIsWUFBYUEsRUFBUSxFQUNyQixRQUFTQSxFQUFRLEVBQ2pCLGFBQWM0SCxFQUFRLEVBQ3RCLFVBQVc1SCxFQUFRLENBQ3ZCLENBQUMsRUFDWXFpQyxHQUF1Q3RpQyxFQUFTLENBQ3pELEtBQU1FLEVBQVUsK0JBQStCLEVBQy9DLFNBQVVELEVBQVEsRUFDbEIsYUFBYzRILEVBQVEsRUFDdEIsUUFBUzVILEVBQVEsQ0FDckIsQ0FBQyxFQUNZc2lDLEdBQXNDdmlDLEVBQVMsQ0FDeEQsS0FBTUUsRUFBVSw2QkFBNkIsRUFDN0MsU0FBVUQsRUFBUSxFQUNsQixhQUFjNEgsRUFBUSxFQUN0QixRQUFTNUgsRUFBUSxDQUNyQixDQUFDLEVBQ1l1aUMsR0FBZ0N4aUMsRUFBUyxDQUNsRCxLQUFNRSxFQUFVLHVCQUF1QixFQUN2QyxTQUFVRCxFQUFRLEVBQUcsU0FBUSxFQUM3QixRQUFTQSxFQUFRLEVBQUcsU0FBUSxDQUNoQyxDQUFDLEVBTVl3aUMsR0FBcUJ6NUIsRUFDdEIsQ0FDUixLQUFNL0ksRUFBUSxFQUNkLFNBQVVBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUSxDQUM1QyxDQUFDLEVBQ0ksWUFBVyxFQUNIeWlDLEdBQTRCOTZCLEdBQXFCLE9BQVEsQ0FDbEUwM0IsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUssR0FDQUMsR0FDQUksR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUksR0FDQUMsR0FDQUssR0FDQUosR0FDQUMsR0FDQUMsR0FDQUMsRUFDSixDQUFDLEVBQ3dDMzZCLEdBQXFCLE9BQVEsQ0FDbEVtNEIsR0FDQUMsR0FDQUMsR0FDQUMsR0FDQUcsR0FDQUMsR0FDQUMsR0FDQXdCLEdBQ0FDLEdBQ0FDLEVBQ0osQ0FBQyxFQU1NLFNBQVNVLEdBQW1CdC9CLEVBQU8sQ0FDdEMsTUFBTXUvQixFQUFNLEtBQUssTUFBTXYvQixFQUFNLEtBQUssVUFBVSxFQUN0Q3J6QixFQUFTMHlELEdBQTBCLFVBQVVFLENBQUcsRUFDdEQsR0FBSSxDQUFDNXlELEVBQU8sUUFBUyxDQUNqQixNQUFNNnlELEVBQWdCSixHQUFtQixVQUFVRyxDQUFHLEVBQ3RELE9BQUlDLEVBQWMsUUFDUCxDQUFFLEtBQU1BLEVBQWMsS0FBTSxVQUFXLEVBQUksRUFFL0MsQ0FBRSxLQUFNLEtBQU0sVUFBVyxFQUFJLENBQ3hDLENBQ0EsTUFBTyxDQUFFLEtBQU03eUQsRUFBTyxLQUFNLFVBQVcsRUFBSyxDQUNoRCxDQy9nQlksTUFBQzh5RCxHQUFnQyxlQUtoQ0MsR0FBeUMsQ0FDbEQsaUJBQWtCLENBQUMsT0FBTyxFQUMxQixNQUFPLENBQ0gsTUFBTyxDQUNILE9BQVEsQ0FBRSxLQUFNLFlBQWEsS0FBTSxJQUFLLEVBQ3hDLGNBQWUsQ0FBRSxNQUFPLHdCQUF3QixFQUNoRCxjQUFlLENBQUUsS0FBTSxjQUFjLEVBQ3JDLGVBQWdCLElBQzVCLEVBQ1EsT0FBUSxDQUNKLE9BQVEsQ0FBRSxLQUFNLFlBQWEsS0FBTSxJQUFLLEVBQ3hDLE1BQU8sQ0FDbkIsQ0FDQSxDQUNBLEVBQ2FDLEdBQU4sTUFBTUEsV0FBMkJ0dkIsRUFBcUIsQ0FNekQsWUFBWWg1QyxFQUFVLEdBQUksQ0FDdEIsTUFBSyxFQU5Ua29DLEVBQUEsS0FBQTJSLElBQ0EzUixFQUFBLEtBQUFxZ0MsSUFDQXJnQyxFQUFBLEtBQUFzZ0MsR0FBaUIsTUFDakJ0Z0MsRUFBQSxLQUFBdWdDLEdBQW9CLE1BQ3BCbC9ELEVBQUEsb0JBQWUsSUFBSTJ2QyxJQUdmNUgsRUFBQSxLQUFLdUksR0FBUzc1QyxFQUFRLE9BQVNvb0UsSUFDL0I5MkIsRUFBQSxLQUFLaTNCLEdBQVV2b0UsRUFBUSxPQUMzQixDQUlBLElBQUksY0FBZSxDQUNmLE9BQU93b0MsRUFBQSxLQUFLcVIsR0FDaEIsQ0FLQSxJQUFJLGFBQWFELEVBQU8sQ0FDcEJ0SSxFQUFBLEtBQUt1SSxHQUFTRCxFQUNsQixDQUtBLHNCQUF1QixDQUV2QixDQUNBLElBQUksbUJBQW9CLENBQ3BCLE9BQU9wUixFQUFBLEtBQUtpZ0MsS0FBcUIsSUFDckMsQ0FDQSxNQUFNLFdBQVd6b0UsRUFBUyxDQUN0QixNQUFNMG9FLEVBQVMxb0UsRUFBUSxRQUFVd29DLEVBQUEsS0FBSysvQixJQUN0QyxPQUFJLE9BQU9HLEdBQVcsV0FDWCxNQUFNQSxFQUFNLEVBRWhCQSxDQUNYLENBQ0EsV0FBVy8vQixFQUFPLGlCQUNkLEtBQU0sQ0FBRSxLQUFNcnpCLEVBQVEsVUFBQXF6RCxDQUFTLEVBQUtWLEdBQW1CdC9CLENBQUssRUFDNUQsR0FBSXJ6QixJQUFXLE9BR2YsS0FBSyxLQUFLLElBQUtBLENBQU0sRUFDakIsQ0FBQXF6RCxHQVNKLElBTklyekQsRUFBTyxPQUFTLFFBQ2hCLEtBQUssS0FBSyxRQUFTLENBQUUsS0FBTSxRQUFTLE1BQU9BLEVBQVEsRUFHbkQsS0FBSyxLQUFLQSxFQUFPLEtBQU1BLENBQU0sRUFFN0JBLEVBQU8sT0FBUyxtQkFBb0IsQ0FDcEMsS0FBSyxLQUFLLGVBQWdCLENBQ3RCLEtBQU0sbUJBQ04sYUFBYyxDQUNWLEdBQUdBLENBQ3ZCLENBQ0EsQ0FBYSxFQUNELE1BQ0osQ0FJQSxHQUhJQSxFQUFPLE9BQVMsbUJBQ2hCZzhCLEVBQUEsS0FBS20zQixHQUFvQm56RCxFQUFPLFNBRWhDQSxFQUFPLE9BQVMsZ0JBQWlCLENBQ2pDLE1BQU1pckMsRUFBV3FtQixHQUF3QixVQUFVdHhELENBQU0sRUFDekQsR0FBSSxDQUFDaXJDLEVBQVMsUUFBUyxDQUNuQnZ1QyxHQUFPLE1BQU0sb0NBQXFDdXVDLEVBQVMsS0FBSyxFQUNoRSxNQUNKLENBQ0EsTUFBTXFvQixJQUFjN3RFLEVBQUF3bEQsRUFBUyxLQUFLLFNBQVMsUUFBdkIsWUFBQXhsRCxFQUE4QixlQUFnQixFQUM1RDh0RSxJQUFleHRFLEVBQUFrbEQsRUFBUyxLQUFLLFNBQVMsUUFBdkIsWUFBQWxsRCxFQUE4QixnQkFBaUIsRUFDOUR5dEUsRUFBY0YsRUFBY0MsRUFDNUJ0YixFQUFRLElBQUl0VCxHQUFNLENBQ3BCLFlBQUEydUIsRUFDQSxxQkFBb0Jyc0UsRUFBQWdrRCxFQUFTLEtBQUssU0FBUyxRQUF2QixZQUFBaGtELEVBQThCLHNCQUF1QixDQUFBLEVBQ3pFLGFBQUFzc0UsRUFDQSxzQkFBcUJscUUsRUFBQTRoRCxFQUFTLEtBQUssU0FBUyxRQUF2QixZQUFBNWhELEVBQThCLHVCQUF3QixDQUFBLEVBQzNFLFlBQUFtcUUsQ0FDaEIsQ0FBYSxFQUNELEtBQUssS0FBSyxlQUFnQnZiLENBQUssRUFDL0IsS0FBSyxLQUFLLFlBQWEsQ0FDbkIsS0FBTSxnQkFDTixTQUFVLENBQ04sR0FBSWhOLEVBQVMsS0FBSyxTQUFTLElBQU0sR0FDakMsT0FBUUEsRUFBUyxLQUFLLFNBQVMsUUFBVSxDQUFBLEVBQ3pDLE1BQU8sQ0FDSCxZQUFBcW9CLEVBQ0EscUJBQW9CaHFFLEVBQUEyaEQsRUFBUyxLQUFLLFNBQVMsUUFBdkIsWUFBQTNoRCxFQUE4QixzQkFBdUIsQ0FBQSxFQUN6RSxhQUFBaXFFLEVBQ0Esc0JBQXFCL3BFLEVBQUF5aEQsRUFBUyxLQUFLLFNBQVMsUUFBdkIsWUFBQXpoRCxFQUE4Qix1QkFBd0IsQ0FBQSxFQUMzRSxZQUFBZ3FFLENBQ3hCLENBQ0EsQ0FDQSxDQUFhLEVBQ0QsTUFDSixDQUNBLEdBQUl4ekQsRUFBTyxPQUFTLDZCQUE4QixDQUM5QyxLQUFLLEtBQUssWUFBWSxFQUN0QixLQUFLLHFCQUFvQixFQUN6QixNQUNKLENBQ0EsR0FBSUEsRUFBTyxPQUFTLDRCQUE2QixDQUM3QyxLQUFLLEtBQUssZUFBZ0IsQ0FDdEIsT0FBUUEsRUFBTyxPQUMvQixDQUFhLEVBQ0QsTUFDSixDQUNBLEdBQUlBLEVBQU8sT0FBUyx5REFDaEJBLEVBQU8sT0FBUyw4QkFBK0IsQ0FHL0MsS0FBSyxVQUFVLENBQ1gsS0FBTSw2QkFDTixRQUFTQSxFQUFPLE9BQ2hDLENBQWEsRUFDRCxNQUNKLENBQ0EsR0FBSUEsRUFBTyxPQUFTLHFEQUNoQkEsRUFBTyxPQUFTLDhCQUNoQkEsRUFBTyxPQUFTLDBDQUNoQkEsRUFBTyxPQUFTLHlDQUEwQyxDQUN0REEsRUFBTyxPQUFTLDBDQUNoQixLQUFLLEtBQUsseUJBQTBCLENBQ2hDLEtBQU0sbUJBQ04sTUFBT0EsRUFBTyxNQUNkLE9BQVFBLEVBQU8sUUFDZixXQUFZQSxFQUFPLFdBQ3ZDLENBQWlCLEVBR0wsTUFDSixDQUNBLEdBQUlBLEVBQU8sT0FBUywyQkFDaEJBLEVBQU8sT0FBUywwQkFDaEJBLEVBQU8sT0FBUyw4QkFBK0IsQ0FFL0MsR0FBSUEsRUFBTyxLQUFLLE9BQVMsa0JBQ3JCQSxFQUFPLE9BQVMseUJBQTBCLENBQzFDLE1BQU00dEQsRUFBYzV0RCxFQUFPLEtBQUssY0FBZ0IsR0FDMUMyeEIsRUFBUzN4QixFQUFPLEtBQUssT0FBUyxDQUFBLEVBQ3BDLEdBQUksQ0FDQSxLQUFLLEtBQUssbUJBQW9CLENBQzFCLFlBQUE0dEQsRUFDQSxNQUFBajhCLENBQ3hCLENBQXFCLENBQ0wsT0FDTzhLLEVBQUssQ0FDUi8vQixHQUFPLE1BQU0sa0NBQW1DKy9CLEVBQUt6OEIsRUFBTyxJQUFJLENBQ3BFLENBRUEsTUFDSixDQUNBLEdBQUlBLEVBQU8sS0FBSyxPQUFTLFVBQVcsQ0FDaEMsTUFBTXl6RCxFQUFpQnp6RCxFQUFPLE9BQVMsMkJBQ25DQSxFQUFPLE9BQVMseUJBQ2RBLEVBQU8saUJBQ1AsS0FDQTlWLEVBQU8ya0UsR0FBMEIsTUFBTSxDQUN6QyxPQUFRN3VELEVBQU8sS0FBSyxHQUNwQixlQUFBeXpELEVBQ0EsS0FBTXp6RCxFQUFPLEtBQUssS0FDbEIsS0FBTUEsRUFBTyxLQUFLLEtBQ2xCLFFBQVNBLEVBQU8sS0FBSyxRQUNyQixPQUFRQSxFQUFPLEtBQUssTUFDeEMsQ0FBaUIsRUFDRCxLQUFLLEtBQUssY0FBZTlWLENBQUksRUFDN0IsTUFDSixDQUNBLEdBQUk4VixFQUFPLEtBQUssT0FBUyx3QkFDckJBLEVBQU8sT0FBUyx5QkFBMEIsQ0FDMUMsTUFBTTlWLEVBQU84VixFQUFPLEtBQ2QwekQsRUFBcUIxRSxHQUFtQyxNQUFNLENBQ2hFLE9BQVE5a0UsRUFBSyxHQUNiLEtBQU1BLEVBQUssS0FDWCxZQUFhQSxFQUFLLGFBQ2xCLEtBQU1BLEVBQUssS0FDWCxVQUFXLEtBQUssTUFBTUEsRUFBSyxXQUFhLElBQUksRUFDNUMsU0FBVUEsRUFBSyxRQUNuQyxDQUFpQixFQUNELEtBQUssS0FBSyxjQUFld3BFLENBQWtCLEVBQzNDLEtBQUssS0FBSyx1QkFBd0JBLENBQWtCLEVBQ3BELE1BQ0osQ0FDQSxHQUFJMXpELEVBQU8sS0FBSyxPQUFTLGlCQUNyQkEsRUFBTyxLQUFLLE9BQVMsV0FBWSxDQUNqQyxNQUFNZzhDLEVBQVNoOEMsRUFBTyxPQUFTLHlCQUN6QixZQUNBLGNBQ0EyekQsRUFBVTVFLEdBQW9CLE1BQU0sQ0FDdEMsT0FBUS91RCxFQUFPLEtBQUssR0FDcEIsS0FBTUEsRUFBTyxLQUFLLEtBQ2xCLE9BQUFnOEMsRUFDQSxVQUFXaDhDLEVBQU8sS0FBSyxVQUN2QixLQUFNQSxFQUFPLEtBQUssS0FDbEIsT0FBUUEsRUFBTyxLQUFLLE1BQ3hDLENBQWlCLEVBQ0QsS0FBSyxLQUFLLGNBQWUyekQsQ0FBTyxFQUM1QjN6RCxFQUFPLE9BQVMsMEJBQ2hCLEtBQUssS0FBSywwQkFBMkIyekQsQ0FBTyxFQUVoRCxNQUNKLENBQ0osQ0FDQSxHQUFJM3pELEVBQU8sT0FBUyxnQ0FBaUMsQ0FDakQsTUFBTTlWLEVBQU84VixFQUNiLEtBQUssVUFBVSxDQUNYLEtBQU0sNkJBQ04sUUFBUzlWLEVBQUssT0FDOUIsQ0FBYSxFQUNELE1BQ0osQ0FDQSxHQUFJOFYsRUFBTyxPQUFTLDZCQUE4QixDQUM5QyxNQUFNOVYsRUFBTzhWLEVBQ1Q5VixFQUFLLFNBQ0wsS0FBSyxVQUFVLENBQ1gsS0FBTSw2QkFDTixRQUFTQSxFQUFLLE9BQ2xDLENBQWlCLEVBRUwsTUFDSixDQUNBLEdBQUk4VixFQUFPLE9BQVMsNkJBQ2hCQSxFQUFPLE9BQVMsNkJBQThCLENBQzlDLE1BQU05VixFQUFPOFYsRUFBTyxLQUNwQixHQUFJOVYsRUFBSyxPQUFTLGlCQUFtQkEsRUFBSyxTQUFXLFlBQWEsQ0FDOUQsTUFBTStuRCxFQUFXNmMsR0FBcUIsTUFBTSxDQUN4QyxPQUFRNWtFLEVBQUssR0FDYixLQUFNQSxFQUFLLEtBQ1gsT0FBUSxjQUNSLFVBQVdBLEVBQUssVUFDaEIsS0FBTUEsRUFBSyxLQUNYLE9BQVEsSUFDNUIsQ0FBaUIsRUFDRCxLQUFLLEtBQUssY0FBZStuRCxDQUFRLEVBQ2pDLEtBQUssS0FBSyxnQkFBaUIsQ0FDdkIsR0FBSS9uRCxFQUFLLEdBQ1QsS0FBTSxnQkFDTixPQUFRQSxFQUFLLFNBQVcsR0FDeEIsVUFBV0EsRUFBSyxXQUFhLEdBQzdCLEtBQU1BLEVBQUssTUFBUSxFQUN2QyxDQUFpQixFQUNELE1BQ0osQ0FDQSxHQUFJQSxFQUFLLE9BQVMsaUJBQW1CQSxFQUFLLE9BQVMsV0FBWSxDQUMzRCxNQUFNeXBFLEVBQVU1RSxHQUFvQixNQUFNLENBQ3RDLE9BQVE3a0UsRUFBSyxHQUNiLEtBQU1BLEVBQUssS0FDWCxPQUFROFYsRUFBTyxPQUFTLDRCQUNsQixZQUNBLGNBQ04sVUFBVzlWLEVBQUssVUFDaEIsS0FBTUEsRUFBSyxLQUNYLE9BQVFBLEVBQUssTUFDakMsQ0FBaUIsRUFDRCxLQUFLLEtBQUssY0FBZXlwRSxDQUFPLEVBQ2hDLE1BQ0osQ0FDQSxHQUFJenBFLEVBQUssT0FBUyxVQUFXLENBQ3pCLE1BQU0wcEUsRUFBZS9FLEdBQTBCLE1BQU0sQ0FDakQsT0FBUTd1RCxFQUFPLEtBQUssR0FDcEIsS0FBTUEsRUFBTyxLQUFLLEtBQ2xCLEtBQU1BLEVBQU8sS0FBSyxLQUNsQixRQUFTQSxFQUFPLEtBQUssUUFDckIsT0FBUUEsRUFBTyxPQUFTLDRCQUNqQjlWLEVBQUssUUFBVSxZQUNmQSxFQUFLLFFBQVUsYUFDMUMsQ0FBaUIsRUFDRCxLQUFLLEtBQUssY0FBZTBwRSxDQUFZLEVBQ3JDLE1BQ0osQ0FDSixFQUNKLENBQ0EsU0FBU3R2RSxFQUFPLENBQ1osS0FBSyxLQUFLLFFBQVMsQ0FDZixLQUFNLFFBQ04sTUFBQUEsQ0FDWixDQUFTLENBQ0wsQ0FDQSxTQUFVLENBQ04sS0FBSyxLQUFLLFdBQVcsQ0FDekIsQ0FDQSxVQUFXLENBQ1AsS0FBSyxLQUFLLGNBQWMsQ0FDNUIsQ0FRQSxZQUFZcUosRUFBU2ttRSxFQUFnQixDQUFFLGdCQUFBQyxFQUFrQixFQUFJLEVBQUssR0FBSSxDQUNsRSxNQUFNbGdFLEVBQVUsT0FBT2pHLEdBQVksU0FDN0IsQ0FDRSxDQUNJLEtBQU0sYUFDTixLQUFNQSxDQUMxQixDQUNBLEVBQ2NBLEVBQVEsUUFBUSxJQUFLaUcsR0FDZkEsRUFBUSxPQUFTLGNBQ1YsQ0FDSCxLQUFNLGNBQ04sVUFBV0EsRUFBUSxNQUNuQixHQUFJQSxFQUFRLGNBQWdCLEVBQ3BELEVBRXVCQSxDQUNWLEVBQ0wsS0FBSyxVQUFVLENBQ1gsS0FBTSwyQkFDTixLQUFNLENBQ0YsS0FBTSxVQUNOLEtBQU0sT0FDTixRQUFBQSxDQUNoQixFQUNZLEdBQUdpZ0UsQ0FDZixDQUFTLEVBQ0dDLEdBQ0EsS0FBSyxVQUFVLENBQ1gsS0FBTSxpQkFDdEIsQ0FBYSxDQUVULENBQ0EsU0FBU0MsRUFBTyxDQUFFLGdCQUFBRCxFQUFrQixFQUFJLEVBQUssQ0FBQSxFQUFJLENBQzdDLEtBQUssWUFBWSxDQUNiLEtBQU0sVUFDTixLQUFNLE9BQ04sUUFBUyxDQUFDLENBQUUsS0FBTSxjQUFlLE1BQUFDLENBQUssQ0FBRSxDQUNwRCxFQUFXLENBQUEsRUFBSSxDQUFFLGdCQUFBRCxFQUFpQixDQUM5QixDQUNBLHdCQUF3Qjd5RCxFQUFRLHFFQUM1QixNQUFNQyxFQUFZb3RELEdBQW1CcnRELENBQU0sRUFDckMreUQsR0FBeUJqdUUsR0FBQU4sRUFBQXliLEVBQVUsUUFBVixZQUFBemIsRUFBaUIsUUFBakIsWUFBQU0sRUFBd0IsZUFDakRrdUUsR0FBd0I1cUUsR0FBQXBDLEVBQUFpYSxFQUFVLFFBQVYsWUFBQWphLEVBQWlCLFFBQWpCLFlBQUFvQyxFQUF3QixjQUNoRDZxRSxFQUF3QmxCLEdBQW1CLDBCQUF5QnhwRSxHQUFBRixFQUFBNFgsRUFBVSxRQUFWLFlBQUE1WCxFQUFpQixRQUFqQixZQUFBRSxFQUF3QixhQUFhLEVBQ3pHMnFFLEVBQWMsQ0FDaEIsS0FBTSxXQUNOLGFBQWNqekQsRUFBVSxhQUN4QixNQUFPQSxFQUFVLE9BQVNneUIsRUFBQSxLQUFLcVIsSUFDL0Isa0JBQW1CcmpDLEVBQVUsa0JBQ3pCNnhELEdBQXVDLGlCQUMzQyxNQUFPLENBQ0gsTUFBTyxDQUNILFNBQVFwRSxHQUFBQyxFQUFBMXRELEVBQVUsUUFBVixZQUFBMHRELEVBQWlCLFFBQWpCLFlBQUFELEVBQXdCLFdBQzVCeUYsR0FBQUMsRUFBQXRCLEdBQXVDLFFBQXZDLFlBQUFzQixFQUE4QyxRQUE5QyxZQUFBRCxFQUFxRCxRQUN6RCxnQkFBaUJKLElBQTJCLFFBQ3RDTSxHQUFBenBFLEVBQUFrb0UsR0FBdUMsUUFBdkMsWUFBQWxvRSxFQUE4QyxRQUE5QyxZQUFBeXBFLEVBQ0ksZUFDSk4sRUFDTixjQUFlQyxJQUEwQixRQUNuQ00sR0FBQUMsRUFBQXpCLEdBQXVDLFFBQXZDLFlBQUF5QixFQUE4QyxRQUE5QyxZQUFBRCxFQUNJLGNBQ0pOLEVBQ04sZUFBZ0JDLElBQTBCLFFBQ3BDTyxHQUFBQyxFQUFBM0IsR0FBdUMsUUFBdkMsWUFBQTJCLEVBQThDLFFBQTlDLFlBQUFELEVBQ0ksY0FDSlAsQ0FDMUIsRUFDZ0IsT0FBUSxDQUNKLFNBQVFTLEdBQUFDLEVBQUExekQsRUFBVSxRQUFWLFlBQUEwekQsRUFBaUIsU0FBakIsWUFBQUQsRUFBeUIsV0FDN0JFLElBQUFDLEdBQUEvQixHQUF1QyxRQUF2QyxZQUFBK0IsR0FBOEMsU0FBOUMsWUFBQUQsR0FBc0QsUUFDMUQsUUFBT0UsSUFBQUMsR0FBQTl6RCxFQUFVLFFBQVYsWUFBQTh6RCxHQUFpQixTQUFqQixZQUFBRCxHQUF5QixVQUM1QkUsR0FBQUMsRUFBQW5DLEdBQXVDLFFBQXZDLFlBQUFtQyxFQUE4QyxTQUE5QyxZQUFBRCxFQUFzRCxPQUMxRCxRQUFPRSxJQUFBQyxHQUFBbDBELEVBQVUsUUFBVixZQUFBazBELEdBQWlCLFNBQWpCLFlBQUFELEdBQXlCLFVBQzVCRSxJQUFBQyxHQUFBdkMsR0FBdUMsUUFBdkMsWUFBQXVDLEdBQThDLFNBQTlDLFlBQUFELEdBQXNELE1BQzlFLENBQ0EsRUFDWSxZQUFhbjBELEVBQVUsWUFDbkI2eEQsR0FBdUMsV0FHM0MsR0FBSTd4RCxFQUFVLGNBQWdCLEVBQzFDLEVBQ1EsT0FBSUEsRUFBVSxTQUNWaXpELEVBQVksT0FBUyxDQUNqQixHQUFJanpELEVBQVUsT0FBTyxTQUNyQixRQUFTQSxFQUFVLE9BQU8sUUFDMUIsVUFBV0EsRUFBVSxPQUFPLFNBQzVDLEdBRVlBLEVBQVUsT0FBU0EsRUFBVSxNQUFNLE9BQVMsSUFDNUNpekQsRUFBWSxNQUFRanpELEVBQVUsTUFBTSxJQUFLdFAsSUFBUyxDQUM5QyxNQUFNMmpFLEdBQWVqckUsSUFBUSxPQUFPLFlBQVksT0FBTyxRQUFRQSxFQUFHLEVBQUUsT0FBTyxDQUFDLENBQUEsQ0FBR2lCLEVBQUssSUFBTSxPQUFPQSxHQUFVLEdBQVcsQ0FBQyxFQUN2SCxPQUFJcUcsR0FBSyxPQUFTLE1BRVAyakUsR0FBWSxDQUNmLEtBQU0sTUFDTixhQUFjM2pFLEdBQUssYUFDbkIsV0FBWUEsR0FBSyxXQUNqQixtQkFBb0JBLEdBQUssbUJBQ3pCLGFBQWNBLEdBQUssYUFDbkIsY0FBZUEsR0FBSyxjQUNwQixRQUFTQSxHQUFLLFFBQ2QsY0FBZUEsR0FBSyxjQUNwQixpQkFBa0JBLEdBQUssZ0JBQy9DLENBQXFCLEVBR0UyakUsR0FBWSxDQUNmLEtBQU0zakUsR0FBSyxLQUNYLEtBQU1BLEdBQUssS0FDWCxZQUFhQSxHQUFLLFlBQ2xCLFdBQVlBLEdBQUssVUFDckMsQ0FBaUIsQ0FDTCxDQUFDLEdBRUV1aUUsQ0FDWCxDQVVBLG9CQUFvQmx6RCxFQUFRLENBQ3hCLE9BQU8sS0FBSyx3QkFBd0JBLENBQU0sQ0FDOUMsQ0FDQSxPQUFPLHlCQUF5QnZULEVBQUcsQ0FDL0IsR0FBSSxPQUFPQSxFQUFNLElBQ2IsT0FFSixHQUFJQSxJQUFNLEtBQ04sT0FBTyxLQUVYLEtBQU0sQ0FBRSxLQUFBZixFQUFNLGVBQUE2b0UsRUFBZ0IsZ0JBQUFDLEVBQWlCLFVBQUFDLEVBQVcsa0JBQUFDLEVBQW1CLG1CQUFBQyxFQUFvQixnQkFBQUMsRUFBaUIsa0JBQUFDLEVBQW1CLGtCQUFBQyxFQUFtQixvQkFBQUMsRUFBcUIsVUFBQUMsRUFBVyxjQUFBQyxFQUFlLGdCQUFBQyxFQUFpQixHQUFHenVFLENBQUksRUFBS2dHLEVBQzlOdVQsRUFBUyxDQUNYLEtBQUF0VSxFQUNBLGdCQUFpQjZvRSxHQUFrQkMsRUFDbkMsVUFBQUMsRUFDQSxtQkFBb0JDLEdBQXFCQyxFQUN6QyxrQkFBbUJDLEdBQW1CQyxFQUN0QyxvQkFBcUJDLEdBQXFCQyxFQUMxQyxnQkFBaUJFLEdBQWlCQyxFQUNsQyxVQUFBRixFQUNBLEdBQUd2dUUsQ0FDZixFQUVRLGNBQU8sS0FBS3VaLENBQU0sRUFBRSxRQUFTbmEsR0FBUSxDQUM3Qm1hLEVBQU9uYSxDQUFHLElBQU0sUUFDaEIsT0FBT21hLEVBQU9uYSxDQUFHLENBQ3pCLENBQUMsRUFDTSxPQUFPLEtBQUttYSxDQUFNLEVBQUUsT0FBUyxFQUFJQSxFQUFTLE1BQ3JELENBS0EsSUFBSSxlQUFlOGxELEVBQWUsQ0FDOUIvcUIsRUFBQSxLQUFLazNCLEdBQWlCbk0sRUFDMUIsQ0FNQSxxQkFBcUJBLEVBQWUsV0FLaEMsR0FKSSxPQUFPN3pCLEVBQUEsS0FBS2dnQyxJQUFtQixLQUUvQmwzQixFQUFBLEtBQUtrM0IsR0FBaUIsTUFFdEJuTSxJQUFrQixPQUFRLENBRTFCLEtBQUssVUFBVSxDQUNYLEtBQU0saUJBQ04sUUFBUyxDQUNMLEtBQU0sV0FDTixRQUFTLE1BQzdCLENBQ0EsQ0FBYSxFQUNELE1BQ0osQ0FDQSxHQUFJN3pCLEVBQUEsS0FBS2dnQyxNQUFtQixNQUN4QixPQUFPaGdDLEVBQUEsS0FBS2dnQyxLQUFtQixVQUMvQixPQUFPbk0sR0FBa0IsU0FBVSxDQUVuQ3JxRCxHQUFPLEtBQUssMElBQTBJLEVBQ3RKLE1BQ0osQ0FDQSxHQUFJcXFELElBQWtCLEtBQU0sQ0FDeEJycUQsR0FBTyxNQUFNLGlHQUFpRyxFQUM5RyxLQUFLLFVBQVUsQ0FDWCxLQUFNLGlCQUNOLFFBQVMsQ0FDTCxLQUFNLFdBQ04sUUFBUyxJQUM3QixDQUNBLENBQWEsRUFDRCxNQUNKLENBQ0EsR0FBSXcyQixFQUFBLEtBQUtnZ0MsTUFBbUIsTUFDeEIsT0FBT2hnQyxFQUFBLEtBQUtnZ0MsS0FBbUIsU0FBVSxDQUV6QyxLQUFLLFVBQVUsQ0FDWCxLQUFNLGlCQUNOLFFBQVMsQ0FDTCxLQUFNLFdBQ04sUUFBU25NLENBQzdCLENBQ0EsQ0FBYSxFQUNELE1BQ0osQ0FDQSxJQUFJQSxHQUFBLFlBQUFBLEVBQWUsY0FBYXRoRSxFQUFBeXRDLEVBQUEsS0FBS2dnQyxNQUFMLFlBQUF6dEUsRUFBcUIsWUFDakRzaEUsR0FBQSxZQUFBQSxFQUFlLGNBQWFoaEUsRUFBQW10QyxFQUFBLEtBQUtnZ0MsTUFBTCxZQUFBbnRFLEVBQXFCLFlBQ2pEZ2hFLEdBQUEsWUFBQUEsRUFBZSxtQkFBa0I5L0QsRUFBQWlzQyxFQUFBLEtBQUtnZ0MsTUFBTCxZQUFBanNFLEVBQXFCLGVBQWUsQ0FDckV5VixHQUFPLEtBQUssaU1BQWtNLEtBQUssVUFBVXcyQixFQUFBLEtBQUtnZ0MsR0FBYyxFQUFHLEtBQUssVUFBVW5NLENBQWEsQ0FBQyxFQUNoUixNQUNKLENBQ0EsS0FBSyxVQUFVLENBQ1gsS0FBTSxpQkFDTixRQUFTLENBQ0wsS0FBTSxXQUNOLFFBQVNBLENBQ3pCLENBQ0EsQ0FBUyxDQUNMLENBT0Esb0JBQW9COWxELEVBQVEsQ0FDeEIsTUFBTWt6RCxFQUFjLEtBQUssb0JBQW9CbHpELENBQU0sRUFDbkQsS0FBSyxVQUFVLENBQ1gsS0FBTSxpQkFDTixRQUFTa3pELENBQ3JCLENBQVMsQ0FDTCxDQVFBLHVCQUF1QmxpQixFQUFVNzVDLEVBQVFnK0QsRUFBZ0IsR0FBTSxDQUMzRCxLQUFLLFVBQVUsQ0FDWCxLQUFNLDJCQUNOLEtBQU0sQ0FDRixLQUFNLHVCQUNOLE9BQUFoK0QsRUFDQSxRQUFTNjVDLEVBQVMsTUFDbEMsQ0FDQSxDQUFTLEVBQ0QsR0FBSSxDQUNBLE1BQU0vbkQsRUFBTzRrRSxHQUFxQixNQUFNLENBQ3BDLE9BQVE3YyxFQUFTLEdBQ2pCLGVBQWdCQSxFQUFTLGVBQ3pCLEtBQU0sZ0JBQ04sT0FBUSxZQUNSLFVBQVdBLEVBQVMsVUFDcEIsS0FBTUEsRUFBUyxLQUNmLE9BQUE3NUMsQ0FDaEIsQ0FBYSxFQUNELEtBQUssS0FBSyxjQUFlbE8sQ0FBSSxDQUNqQyxPQUNPNUYsRUFBTyxDQUNWb1ksR0FBTyxNQUFNLCtCQUFnQ3BZLEVBQU8ydEQsQ0FBUSxDQUNoRSxDQUNJbWtCLEdBQ0EsS0FBSyxVQUFVLENBQ1gsS0FBTSxpQkFDdEIsQ0FBYSxDQUVULENBU0EsVUFBVUMsRUFBTyxDQUFFLE9BQUFDLEVBQVMsRUFBSyxFQUFLLENBQUEsRUFBSSxDQUN0QyxLQUFLLFVBQVUsQ0FDWCxLQUFNLDRCQUNOLE1BQU94SyxHQUFvQnVLLENBQUssQ0FDNUMsQ0FBUyxFQUNHQyxHQUNBLEtBQUssVUFBVSxDQUNYLEtBQU0sMkJBQ3RCLENBQWEsQ0FFVCxDQVFBLGFBQWFuSyxFQUFZQyxFQUFZLENBQ2pDLEtBQU0sQ0FBRSxTQUFBQyxFQUFVLFVBQUFDLEVBQVcsUUFBQUUsQ0FBTyxFQUFLTixHQUFvQkMsRUFBWUMsQ0FBVSxFQUM3RW1LLEVBQWEsSUFBSSxJQUFJbEssRUFBUyxJQUFLbmlFLEdBQVNBLEVBQUssTUFBTSxDQUFDLEVBRTlELFVBQVdzc0UsS0FBVWhLLEVBQ2pCK0osRUFBVyxJQUFJQyxFQUFPLE1BQU0sRUFFaEMsR0FBSUQsRUFBVyxLQUFPLEVBQ2xCLFVBQVc1SSxLQUFVNEksRUFDakIsS0FBSyxVQUFVLENBQ1gsS0FBTSwyQkFDTixRQUFTNUksQ0FDN0IsQ0FBaUIsRUFHVCxNQUFNOEksRUFBc0IsQ0FBQyxHQUFHbkssRUFBVyxHQUFHRSxDQUFPLEVBQ3JELFVBQVdrSyxLQUFZRCxFQUNuQixHQUFJQyxFQUFTLE9BQVMsVUFBVyxDQUM3QixNQUFNQyxFQUFZLENBQ2QsS0FBTSxVQUNOLEtBQU1ELEVBQVMsS0FDZixRQUFTQSxFQUFTLFFBQ2xCLEdBQUlBLEVBQVMsTUFDakMsRUFDb0JBLEVBQVMsT0FBUyxVQUFZQSxFQUFTLFNBQ3ZDQyxFQUFVLE9BQVNELEVBQVMsUUFFaEMsS0FBSyxVQUFVLENBQ1gsS0FBTSwyQkFDTixLQUFNQyxDQUMxQixDQUFpQixDQUNMLE1BQ1NELEVBQVMsT0FBUyxpQkFDdkJoNkQsR0FBTyxLQUFLLDZFQUE2RSxDQUdyRyxDQUNBLGdCQUFnQnl3QyxFQUFpQnlwQixFQUFVLENBQ3ZDLEtBQUssVUFBVSxDQUNYLEtBQU0sMkJBQ04saUJBQWtCenBCLEVBQWdCLE9BQ2xDLEtBQU0sQ0FDRixLQUFNLHdCQUNOLG9CQUFxQkEsRUFBZ0IsT0FDckMsUUFBU3lwQixDQUN6QixDQUNBLENBQVMsQ0FDTCxDQUNKLEVBdm9CSXJ5QixHQUFBLFlBQ0EwdUIsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFKRyxJQUFNMEQsR0FBTjdELEdDZkEsTUFBTThELFdBQTZCRCxFQUFtQixDQVl6RCxZQUFZbnNFLEVBQVUsR0FBSSxDQUN0QixHQUFJLE9BQU8sa0JBQXNCLElBQzdCLE1BQU0sSUFBSSxNQUFNLDZDQUE2QyxFQUVqRSxNQUFNQSxDQUFPLEVBZmpCdUosRUFBQSxnQkFDQTIrQixFQUFBLEtBQUEvYSxJQUNBK2EsRUFBQSxLQUFBbWtDLEVBQVMsQ0FDTCxPQUFRLGVBQ1IsZUFBZ0IsT0FDaEIsWUFBYSxPQUNiLE9BQVEsTUFDaEIsR0FDSW5rQyxFQUFBLEtBQUFva0MsSUFDQXBrQyxFQUFBLEtBQUFxa0MsR0FBbUIsSUFDbkJya0MsRUFBQSxLQUFBc2tDLEdBQVMsSUFNTCxLQUFLLFFBQVV4c0UsRUFDZnN4QyxFQUFBLEtBQUtua0IsR0FBT250QixFQUFRLFNBQVcsNENBQy9Cc3hDLEVBQUEsS0FBS2c3QixHQUFxQnRzRSxFQUFRLG1CQUFxQixHQUMzRCxDQUlBLElBQUksUUFBUyxDQUNULE9BQU93b0MsRUFBQSxLQUFLNmpDLEdBQU8sTUFDdkIsQ0FJQSxJQUFJLFFBQVMsQ0FDVCxPQUFPN2pDLEVBQUEsS0FBSzZqQyxHQUFPLE1BQ3ZCLENBS0EsSUFBSSxpQkFBa0IsQ0FDbEIsT0FBTzdqQyxFQUFBLEtBQUs2akMsRUFDaEIsQ0FJQSxJQUFJLE9BQVEsQ0FDUixPQUFPN2pDLEVBQUEsS0FBS2drQyxHQUNoQixDQVVBLE1BQU0sUUFBUXhzRSxFQUFTLENBQ25CLEdBQUl3b0MsRUFBQSxLQUFLNmpDLEdBQU8sU0FBVyxZQUN2QixPQUVBN2pDLEVBQUEsS0FBSzZqQyxHQUFPLFNBQVcsY0FDdkJyNkQsR0FBTyxLQUFLLHdFQUF3RSxFQUV4RixNQUFNNG5DLEVBQVE1NUMsRUFBUSxPQUFTLEtBQUssYUFDcEMsS0FBSyxhQUFlNDVDLEVBQ3BCLE1BQU02eUIsRUFBVXpzRSxFQUFRLEtBQU93b0MsRUFBQSxLQUFLcmIsSUFDOUJ1N0MsRUFBUyxNQUFNLEtBQUssV0FBVzFvRSxDQUFPLEVBQ3RDMHNFLEVBQWMsT0FBT2hFLEdBQVcsVUFBWUEsRUFBTyxXQUFXLEtBQUssRUFDekUsR0FBOEIsQ0FBQ2xnQyxFQUFBLEtBQUs4akMsS0FBc0IsQ0FBQ0ksRUFDdkQsTUFBTSxJQUFJNWlFLEVBQVUseU1BQXlNLEVBR2pPLE9BQU8sSUFBSSxRQUFRLE1BQU8wbkMsRUFBU0MsSUFBVyxTQUMxQyxHQUFJLENBQ0EsTUFBTWs3QixFQUFvQixDQUN0QixHQUFJM3NFLEVBQVEsc0JBQXdCLEdBQ3BDLE1BQU8sS0FBSyxZQUNoQyxFQUNzQjRzRSxFQUFnQixJQUFJLElBQUlILENBQU8sRUFDckMsSUFBSUksRUFBaUIsSUFBSSxrQkFDekIsTUFBTUMsRUFBY0QsRUFBZSxrQkFBa0IsWUFBWSxFQUNqRSxJQUFJaHlCLEVBQ0osTUFBTWt5QixFQUFnQ0MsR0FBZSxDQUNqREEsRUFBVyx3QkFBMEIsSUFBTSxDQUN2QyxPQUFRQSxFQUFXLGdCQUFlLENBQzlCLElBQUssZUFDTCxJQUFLLFNBQ0wsSUFBSyxTQUNELEtBQUssTUFBSyxFQUNWLEtBR2hDLENBQ29CLENBQ0osRUFDQUQsRUFBNkJGLENBQWMsRUFDM0N2N0IsRUFBQSxLQUFLKzZCLEVBQVMsQ0FDVixPQUFRLGFBQ1IsZUFBQVEsRUFDQSxZQUFBQyxFQUNBLE9BQUFqeUIsQ0FDcEIsR0FDZ0IsS0FBSyxLQUFLLG9CQUFxQnJTLEVBQUEsS0FBSzZqQyxHQUFPLE1BQU0sRUFDakRTLEVBQVksaUJBQWlCLE9BQVEsSUFBTSxDQUN2Q3g3QixFQUFBLEtBQUsrNkIsRUFBUyxDQUNWLE9BQVEsWUFDUixlQUFBUSxFQUNBLFlBQUFDLEVBQ0EsT0FBQWp5QixDQUN4QixHQUtvQixLQUFLLG9CQUFvQjh4QixDQUFpQixFQUMxQyxLQUFLLEtBQUssb0JBQXFCbmtDLEVBQUEsS0FBSzZqQyxHQUFPLE1BQU0sRUFDakQsS0FBSyxRQUFPLEVBQ1o3NkIsRUFBTyxDQUNYLENBQUMsRUFDRHM3QixFQUFZLGlCQUFpQixRQUFVbmtDLEdBQVUsQ0FDN0MsS0FBSyxNQUFLLEVBQ1YsS0FBSyxTQUFTQSxDQUFLLEVBQ25COEksRUFBTzlJLENBQUssQ0FDaEIsQ0FBQyxFQUNEbWtDLEVBQVksaUJBQWlCLFVBQVlua0MsR0FBVSxDQUMvQyxLQUFLLFdBQVdBLENBQUssRUFDckIsS0FBTSxDQUFFLEtBQU1yekIsRUFBUSxVQUFBcXpELENBQVMsRUFBS1YsR0FBbUJ0L0IsQ0FBSyxFQUM1RCxHQUFJLEdBQUNyekIsR0FBVXF6RCxLQUdYcnpELEVBQU8sT0FBUyxtQkFDaEJnOEIsRUFBQSxLQUFLaTdCLEdBQW1CLElBRW5CajNELEVBQU8sT0FBUyxpQkFDckJnOEIsRUFBQSxLQUFLaTdCLEdBQW1CLElBRXhCajNELEVBQU8sT0FBUyxtQkFBbUIsQ0FDbkMsS0FBSyxlQUFpQkEsRUFBTyxRQUFRLFFBRXJDLE1BQU0rbUQsRUFBZ0IsT0FBT3NRLEVBQWtCLFFBQVksSUFDckQsT0FDQUEsRUFBa0IsUUFDeEIsS0FBSyxxQkFBcUJ0USxDQUFhLENBQzNDLENBQ0osQ0FBQyxFQUVELE1BQU00USxFQUFlLEtBQUssUUFBUSxjQUFnQixTQUFTLGNBQWMsT0FBTyxFQUNoRkEsRUFBYSxTQUFXLEdBQ3hCSixFQUFlLFFBQVdsa0MsR0FBVSxDQUNoQ3NrQyxFQUFhLFVBQVl0a0MsRUFBTSxRQUFRLENBQUMsQ0FDNUMsRUFFQSxNQUFNcUosRUFBUyxLQUFLLFFBQVEsYUFDdkIsTUFBTSxVQUFVLGFBQWEsYUFBYSxDQUN2QyxNQUFPLEVBQy9CLENBQXFCLEVBRUwsR0FEQTY2QixFQUFlLFNBQVM3NkIsRUFBTyxlQUFjLEVBQUcsQ0FBQyxDQUFDLEVBQzlDLEtBQUssUUFBUSxxQkFBc0IsQ0FDbkMsTUFBTWs3QixFQUF5QkwsRUFDL0JBLEVBQ0ksTUFBTSxLQUFLLFFBQVEscUJBQXFCQSxDQUFjLEVBQ3RESyxJQUEyQkwsSUFDM0JLLEVBQXVCLHdCQUEwQixNQUVyREgsRUFBNkJGLENBQWMsRUFDM0N2N0IsRUFBQSxLQUFLKzZCLEVBQVMsQ0FBRSxHQUFHN2pDLEVBQUEsS0FBSzZqQyxHQUFRLGVBQUFRLENBQWMsRUFDbEQsQ0FDQSxNQUFNTSxFQUFRLE1BQU1OLEVBQWUsWUFBVyxFQUU5QyxHQURBLE1BQU1BLEVBQWUsb0JBQW9CTSxDQUFLLEVBQzFDLENBQUNBLEVBQU0sSUFDUCxNQUFNLElBQUksTUFBTSx3QkFBd0IsRUFFNUMsTUFBTUMsRUFBYyxNQUFNLE1BQU1SLEVBQWUsQ0FDM0MsT0FBUSxPQUNSLEtBQU1PLEVBQU0sSUFDWixRQUFTLENBQ0wsZUFBZ0Isa0JBQ2hCLGNBQWUsVUFBVXpFLENBQU0sR0FDL0Isc0JBQXVCN0YsR0FBUSxxQkFBcUIsQ0FDNUUsQ0FDQSxDQUFpQixFQUNEaG9CLEdBQVN4L0MsR0FBQU4sRUFBQXF5RSxFQUFZLFVBQVosWUFBQXJ5RSxFQUFxQixJQUFJLGNBQXpCLFlBQUFNLEVBQXNDLE1BQU0sS0FBSyxNQUMxRGkyQyxFQUFBLEtBQUsrNkIsRUFBUyxDQUFFLEdBQUc3akMsRUFBQSxLQUFLNmpDLEdBQVEsT0FBQXh4QixDQUFNLEdBQ3RDLE1BQU13eUIsRUFBUyxDQUNYLEtBQU0sU0FDTixJQUFLLE1BQU1ELEVBQVksS0FBSSxDQUMvQyxFQUNnQixNQUFNUCxFQUFlLHFCQUFxQlEsQ0FBTSxDQUNwRCxPQUNPenpFLEVBQU8sQ0FDVixLQUFLLE1BQUssRUFDVixLQUFLLFNBQVNBLENBQUssRUFDbkI2M0MsRUFBTzczQyxDQUFLLENBQ2hCLENBQ0osQ0FBQyxDQUNMLENBT0EsVUFBVSt1QyxFQUFPLENBQ2IsR0FBSSxDQUFDSCxFQUFBLEtBQUs2akMsR0FBTyxhQUNiN2pDLEVBQUEsS0FBSzZqQyxHQUFPLFlBQVksYUFBZSxPQUN2QyxNQUFNLElBQUksTUFBTSw2RkFBNkYsRUFFakg3akMsRUFBQSxLQUFLNmpDLEdBQU8sWUFBWSxLQUFLLEtBQUssVUFBVTFqQyxDQUFLLENBQUMsQ0FDdEQsQ0FLQSxLQUFLMmtDLEVBQU8sQ0FDUmg4QixFQUFBLEtBQUtrN0IsR0FBU2MsR0FDVjlrQyxFQUFBLEtBQUs2akMsR0FBTyxnQkFDVzdqQyxFQUFBLEtBQUs2akMsR0FBTyxlQUNwQixXQUFVLEVBQUcsUUFBU2tCLEdBQVcsQ0FDeENBLEVBQU8sUUFDUEEsRUFBTyxNQUFNLFFBQVUsQ0FBQ0QsRUFFaEMsQ0FBQyxDQUVULENBQ0Esc0JBQXVCLENBQ25CaDhCLEVBQUEsS0FBS2k3QixHQUFtQixHQUM1QixDQUlBLE9BQVEsQ0FJSixHQUhJL2pDLEVBQUEsS0FBSzZqQyxHQUFPLGFBQ1o3akMsRUFBQSxLQUFLNmpDLEdBQU8sWUFBWSxNQUFLLEVBRTdCN2pDLEVBQUEsS0FBSzZqQyxHQUFPLGVBQWdCLENBQzVCLE1BQU1RLEVBQWlCcmtDLEVBQUEsS0FBSzZqQyxHQUFPLGVBQ25DUSxFQUFlLHdCQUEwQixLQUN6Q0EsRUFBZSxXQUFVLEVBQUcsUUFBU1UsR0FBVyxRQUM1Q3h5RSxFQUFBd3lFLEVBQU8sUUFBUCxNQUFBeHlFLEVBQWMsTUFDbEIsQ0FBQyxFQUNEOHhFLEVBQWUsTUFBSyxDQUN4QixDQUNJcmtDLEVBQUEsS0FBSzZqQyxHQUFPLFNBQVcsaUJBQ3ZCLzZCLEVBQUEsS0FBSys2QixFQUFTLENBQ1YsT0FBUSxlQUNSLGVBQWdCLE9BQ2hCLFlBQWEsT0FDYixPQUFRLE1BQ3hCLEdBQ1ksS0FBSyxLQUFLLG9CQUFxQjdqQyxFQUFBLEtBQUs2akMsR0FBTyxNQUFNLEVBQ2pELEtBQUssU0FBUSxFQUVyQixDQUtBLFdBQVksQ0FDSjdqQyxFQUFBLEtBQUsrakMsTUFDTCxLQUFLLFVBQVUsQ0FDWCxLQUFNLGlCQUN0QixDQUFhLEVBQ0RqN0IsRUFBQSxLQUFLaTdCLEdBQW1CLEtBRTVCLEtBQUssVUFBVSxDQUNYLEtBQU0sMkJBQ2xCLENBQVMsQ0FDTCxDQUNKLENBelFJcC9DLEdBQUEsWUFDQWsvQyxFQUFBLFlBTUFDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlDekJHLE1BQU1nQixHQUFZLFdBQVcsVUNTN0IsTUFBTUMsV0FBZ0N0QixFQUFtQixDQTZCNUQsWUFBWW5zRSxFQUFVLEdBQUksQ0FDdEIsTUFBTUEsQ0FBTyxFQTlCZGtvQyxFQUFBLEtBQUF3bEMsSUFDSHhsQyxFQUFBLEtBQUFxZ0MsSUFDQXJnQyxFQUFBLEtBQUEvYSxJQUNBK2EsRUFBQSxLQUFBeWxDLElBQ0F6bEMsRUFBQSxLQUFBbWtDLEdBQVMsQ0FDTCxPQUFRLGVBQ1IsVUFBVyxNQUNuQixHQUNJbmtDLEVBQUEsS0FBQW9rQyxJQUNBcGtDLEVBQUEsS0FBQTBsQyxJQUNBMWxDLEVBQUEsS0FBQTJsQyxJQVFBdGtFLEVBQUEsNkJBQ0FBLEVBQUEsc0JBQWlCLEdBQ2pCMitCLEVBQUEsS0FBQXFrQyxHQUFtQixJQUNuQnJrQyxFQUFBLEtBQUE0bEMsSUFDQTVsQyxFQUFBLEtBQUE2bEMsSUFTSXo4QixFQUFBLEtBQUtua0IsR0FBT250QixFQUFRLEtBQ3BCc3hDLEVBQUEsS0FBS3E4QixHQUFjM3RFLEVBQVEsS0FDM0JzeEMsRUFBQSxLQUFLZzdCLEdBQXFCdHNFLEVBQVEsbUJBQXFCLElBQ3ZEc3hDLEVBQUEsS0FBS3c4QixHQUFtQjl0RSxFQUFRLGlCQUNoQ3N4QyxFQUFBLEtBQUt5OEIsR0FBMEIvdEUsRUFBUSx3QkFBMEIsR0FDckUsQ0FDQSx5QkFBMEIsQ0FDdEIsT0FBTzZpRSxFQUNYLENBSUEsSUFBSSxRQUFTLENBQ1QsT0FBT3I2QixFQUFBLEtBQUs2akMsSUFBTyxNQUN2QixDQUlBLElBQUksaUJBQWtCLENBQ2xCLE9BQU83akMsRUFBQSxLQUFLNmpDLEdBQ2hCLENBS0EsSUFBSSxPQUFRLENBQ1IsT0FBTyxJQUNYLENBSUEsSUFBSSxlQUFnQixDQUNoQixPQUFPN2pDLEVBQUEsS0FBS29sQyxHQUNoQixDQVFBLFNBQVNJLEVBQVksQ0FDakIsS0FBSyxLQUFLLFFBQVNBLENBQVUsQ0FDakMsQ0FDQSxzQkFBdUIsQ0FDbkJwOEIsRUFBQSxLQUFLODdCLEdBQUFPLElBQUwsVUFDSixDQXlKQSxNQUFNLFFBQVFqdUUsRUFBUyxDQUNuQixNQUFNNDVDLEVBQVE1NUMsRUFBUSxPQUFTLEtBQUssYUFDcEMsS0FBSyxhQUFlNDVDLEVBQ3BCdEksRUFBQSxLQUFLaTNCLEdBQVUsTUFBTSxLQUFLLFdBQVd2b0UsQ0FBTyxHQUM1QyxNQUFNNjZDLEVBQVM3NkMsRUFBUSxPQUN2QixJQUFJMGlCLEVBQ0ExaUIsRUFBUSxLQUNSMGlCLEVBQU0xaUIsRUFBUSxJQUNkc3hDLEVBQUEsS0FBS3E4QixHQUFjM3RFLEVBQVEsTUFFdEI2NkMsRUFDTG40QixFQUFNLDRDQUE0Q200QixDQUFNLEdBRW5EclMsRUFBQSxLQUFLbWxDLElBQ1ZqckQsRUFBTThsQixFQUFBLEtBQUttbEMsSUFHWGpyRCxFQUFNLDBDQUEwQyxLQUFLLFlBQVksR0FFckU0dUIsRUFBQSxLQUFLbmtCLEdBQU96SyxHQUNaLE1BQU13ckQsRUFBZ0IsQ0FDbEIsR0FBSWx1RSxFQUFRLHNCQUF3QixHQUNwQyxNQUFPLEtBQUssWUFDeEIsRUFDUSxNQUFNLElBQUksUUFBUSxDQUFDd3hDLEVBQVNDLElBQVcsQ0FDbkNHLEVBQUEsS0FBSzg3QixHQUFBUyxJQUFMLFVBQXFCMzhCLEVBQVNDLEVBQVF5OEIsR0FBZSxNQUFNejhCLENBQU0sQ0FDckUsQ0FBQyxFQUNELE1BQU0sS0FBSyxvQkFBb0J5OEIsQ0FBYSxDQUNoRCxDQU9BLFVBQVV2bEMsRUFBTyxDQUNiLEdBQUksQ0FBQ0gsRUFBQSxLQUFLNmpDLElBQU8sVUFDYixNQUFNLElBQUksTUFBTSxtRkFBbUYsRUFFdkc3akMsRUFBQSxLQUFLNmpDLElBQU8sVUFBVSxLQUFLLEtBQUssVUFBVTFqQyxDQUFLLENBQUMsQ0FDcEQsQ0FNQSxPQUFRLFFBQ0o1dEMsRUFBQXl0QyxFQUFBLEtBQUs2akMsSUFBTyxZQUFaLE1BQUF0eEUsRUFBdUIsUUFDdkJ1MkMsRUFBQSxLQUFLczhCLEdBQWlCLFFBQ3RCLEtBQUsscUJBQXVCLE9BQzVCLEtBQUssZUFBaUIsRUFDdEJ0OEIsRUFBQSxLQUFLdThCLEdBQTRCLE9BQ3JDLENBSUEsS0FBS3JCLEVBQVEsQ0FDVCxNQUFNLElBQUksTUFBTSwrRkFBK0YsQ0FDbkgsQ0FRQSxVQUFVYixFQUFPM3JFLEVBQVUsR0FBSSxDQUN2QndvQyxFQUFBLEtBQUs2akMsSUFBTyxTQUFXLGFBQ3ZCLE1BQU0sVUFBVVYsRUFBTzNyRSxDQUFPLENBRXRDLENBS0EsaUJBQWtCLENBRVZ3b0MsRUFBQSxLQUFLK2pDLE1BQ0wsS0FBSyxVQUFVLENBQ1gsS0FBTSxpQkFDdEIsQ0FBYSxFQUNEajdCLEVBQUEsS0FBS2k3QixHQUFtQixJQUVoQyxDQVVBLFdBQVc2QixFQUFhQyxFQUF3QixHQUFNLENBQ2xELEdBQUlELEVBQWMsRUFDZCxPQUdBQyxHQUNBLEtBQUssZ0JBQWUsRUFFeEIsTUFBTXR1RCxFQUFTLEtBQUssZ0JBQWtCLE9BQU8sa0JBRXZDdXVELEVBQWUsS0FBSyxJQUFJLEVBQUcsS0FBSyxNQUFNLEtBQUssSUFBSUYsRUFBYXJ1RCxDQUFNLENBQUMsQ0FBQyxFQUMxRSxLQUFLLEtBQUssbUJBQW1CLEVBQzdCLEtBQUssVUFBVSxDQUNYLEtBQU0sNkJBQ04sUUFBU3lvQixFQUFBLEtBQUtvbEMsSUFDZCxjQUFlcGxDLEVBQUEsS0FBS3FsQyxJQUNwQixhQUFBUyxDQUNaLENBQVMsQ0FDTCxDQVNBLFVBQVVELEVBQXdCLEdBQU0sQ0FDcEMsR0FBSSxDQUFDN2xDLEVBQUEsS0FBS29sQyxLQUFrQixPQUFPLEtBQUssc0JBQXlCLFNBQzdELE9BRUosTUFBTVEsRUFBYyxLQUFLLElBQUcsRUFBSyxLQUFLLHFCQUNsQ0EsR0FBZSxHQUNmLEtBQUssV0FBV0EsRUFBYUMsQ0FBcUIsRUFFdER6OEIsRUFBQSxLQUFLODdCLEdBQUFPLElBQUwsVUFDSixDQUNKLENBdldJMUYsR0FBQSxZQUNBcDdDLEdBQUEsWUFDQXdnRCxHQUFBLFlBQ0F0QixHQUFBLFlBSUFDLEdBQUEsWUFDQXNCLEdBQUEsWUFDQUMsR0FBQSxZQVVBdEIsR0FBQSxZQUNBdUIsR0FBQSxZQUNBQyxHQUFBLFlBdEJHTCxHQUFBLFlBdUJITyxHQUF3QixVQUFHLENBQ3ZCMzhCLEVBQUEsS0FBS3M4QixHQUFpQixRQUN0QixLQUFLLHFCQUF1QixPQUM1QixLQUFLLGVBQWlCLEVBQ3RCdDhCLEVBQUEsS0FBS3U4QixHQUE0QixPQUNyQyxFQWtETU0sR0FBZSxlQUFDMzhCLEVBQVNDLEVBQVF5OEIsRUFBZSxDQUNsRCxHQUFJMWxDLEVBQUEsS0FBSzZqQyxJQUFPLFVBQVcsQ0FDdkI3NkIsRUFBTyxFQUNQLE1BQ0osQ0FDQSxHQUFJLENBQUNoSixFQUFBLEtBQUsrL0IsSUFDTixNQUFNLElBQUl6K0QsRUFBVSxvRUFBb0UsRUFFNUYsR0FDSSxDQUFDMCtCLEVBQUEsS0FBSysvQixJQUFRLFdBQVcsS0FBSyxHQUM5QixDQUFDLy9CLEVBQUEsS0FBSzhqQyxJQUNOLE1BQU0sSUFBSXhpRSxFQUFVLDZLQUE2SyxFQUVyTSxJQUFJeWtFLEVBQUssS0FDVCxHQUFJL2xDLEVBQUEsS0FBS3NsQyxJQUNMUyxFQUFLLE1BQU0vbEMsRUFBQSxLQUFLc2xDLElBQUwsVUFBc0IsQ0FDN0IsSUFBS3RsQyxFQUFBLEtBQUtyYixJQUNWLE9BQVFxYixFQUFBLEtBQUsrL0IsR0FDN0IsT0FFYSxDQUVELE1BQU1pRyxFQUNBLENBQ0UsV0FFQSwyQkFBNkJobUMsRUFBQSxLQUFLKy9CLElBRWxDekYsRUFDcEIsRUFPWXlMLEVBQUssSUFBSWYsR0FBVWhsQyxFQUFBLEtBQUtyYixJQUFNcWhELENBQWtCLENBQ3BELENBQ0FsOUIsRUFBQSxLQUFLKzZCLEdBQVMsQ0FDVixPQUFRLGFBQ1IsVUFBV2tDLENBQ3ZCLEdBQ1EsS0FBSyxLQUFLLG9CQUFxQi9sQyxFQUFBLEtBQUs2akMsSUFBTyxNQUFNLEVBQ2pELE1BQU1vQyxFQUFvQixJQUFNLENBQzVCbjlCLEVBQUEsS0FBSys2QixHQUFTLENBQ1YsT0FBUSxZQUNSLFVBQVdrQyxDQUMzQixHQUNZLEtBQUssS0FBSyxvQkFBcUIvbEMsRUFBQSxLQUFLNmpDLElBQU8sTUFBTSxFQUNqRCxLQUFLLFFBQU8sRUFDWjc2QixFQUFPLENBQ1gsRUFDSWhKLEVBQUEsS0FBS3VsQyxNQUE0QixHQUNqQ1UsRUFBaUIsRUFHakJGLEVBQUcsaUJBQWlCLE9BQVFFLENBQWlCLEVBRWpERixFQUFHLGlCQUFpQixRQUFVMzBFLEdBQVUsQ0FDcEMsS0FBSyxTQUFTQSxDQUFLLEVBQ25CMDNDLEVBQUEsS0FBSys2QixHQUFTLENBQ1YsT0FBUSxlQUNSLFVBQVcsTUFDM0IsR0FDWSxLQUFLLEtBQUssb0JBQXFCN2pDLEVBQUEsS0FBSzZqQyxJQUFPLE1BQU0sRUFDakQ1NkIsRUFBTzczQyxDQUFLLENBQ2hCLENBQUMsRUFDRDIwRSxFQUFHLGlCQUFpQixVQUFZdHJFLEdBQVksbUJBQ3hDLEtBQUssV0FBV0EsQ0FBTyxFQUN2QixLQUFNLENBQUUsS0FBTXFTLEVBQVEsVUFBQXF6RCxDQUFTLEVBQUtWLEdBQW1CaGxFLENBQU8sRUFDOUQsR0FBSSxHQUFDcVMsR0FBVXF6RCxJQUdmLEdBQUlyekQsRUFBTyxPQUFTLDhCQUErQixDQUMvQ2c4QixFQUFBLEtBQUt1OEIsR0FBNEJ2NEQsRUFBTyxlQUN4Q2c4QixFQUFBLEtBQUtzOEIsR0FBaUJ0NEQsRUFBTyxTQUN6QixLQUFLLHVCQUF5QixTQUc5QixLQUFLLHFCQUF1QixLQUFLLElBQUcsRUFDcEMsS0FBSyxlQUFpQixHQUUxQixNQUFNbzVELEVBQU94TixHQUFvQjVyRCxFQUFPLEtBQUssRUFHdkNxNUQsR0FBTXB5RSxHQUFBbEIsR0FBQU4sRUFBQSxLQUFLLG9CQUFMLFlBQUFBLEVBQXdCLFFBQXhCLFlBQUFNLEVBQStCLFNBQS9CLFlBQUFrQixFQUF1QyxPQUNuRCxHQUFJb3lFLEdBQU8sT0FBT0EsR0FBUSxTQUFVLENBRWhDLE1BQU10bkQsRUFBSXNuRCxFQUFJLEtBQ2QsR0FBSXRuRCxJQUFNLGNBQWdCQSxJQUFNLGFBRTVCLEtBQUssZ0JBQWtCcW5ELEVBQUssV0FBYSxVQUVwQ3JuRCxJQUFNLFlBQWEsQ0FDeEIsTUFBTXVuRCxFQUFPRCxFQUFJLE1BQVEsS0FFekIsS0FBSyxnQkFBbUJELEVBQUssV0FBYSxFQUFJRSxFQUFRLEdBQzFELE1BR0ksS0FBSyxnQkFBa0JGLEVBQUssV0FBYSxHQUFLLENBRXRELE1BQ1MsT0FBT0MsR0FBUSxTQUNoQkEsRUFBSSxXQUFXLE9BQU8sRUFDdEIsS0FBSyxnQkFBa0JELEVBQUssV0FBYSxFQUl6QyxLQUFLLGdCQUFrQkEsRUFBSyxXQUFhLEdBQUssRUFLbEQsS0FBSyxnQkFBa0JBLEVBQUssV0FBYSxHQUFLLEVBRWxELE1BQU1WLEVBQWEsQ0FDZixLQUFNLFFBQ04sS0FBTVUsRUFDTixXQUFZcDVELEVBQU8sV0FDdkMsRUFDZ0IsS0FBSyxTQUFTMDRELENBQVUsQ0FDNUIsU0FDUzE0RCxFQUFPLE9BQVMsb0NBQXFDLENBQzFELE1BQU11NUQsSUFBdUMzSyxHQUFBcGxFLEdBQUFGLEdBQUFELEVBQUEsS0FBSyxvQkFBTCxZQUFBQSxFQUF3QixRQUF4QixZQUFBQyxFQUErQixRQUEvQixZQUFBRSxFQUFzQyxpQkFBdEMsWUFBQW9sRSxFQUN2QyxxQkFBc0IsR0FDNUIsS0FBSyxVQUFVLENBQUMySyxDQUFvQyxDQUN4RCxTQUNTdjVELEVBQU8sT0FBUyxtQkFDckJnOEIsRUFBQSxLQUFLaTdCLEdBQW1CLFlBRW5CajNELEVBQU8sT0FBUyxnQkFDckJnOEIsRUFBQSxLQUFLaTdCLEdBQW1CLFlBRW5CajNELEVBQU8sT0FBUyxrQkFBbUIsQ0FDeEMsS0FBSyxlQUFpQkEsRUFBTyxRQUFRLFFBRXJDLE1BQU0rbUQsRUFBZ0IsT0FBTzZSLEVBQWMsUUFBWSxJQUNqRCxPQUNBQSxFQUFjLFFBQ3BCLEtBQUsscUJBQXFCN1IsQ0FBYSxDQUMzQyxFQUNKLENBQUMsRUFDRGtTLEVBQUcsaUJBQWlCLFFBQVMsSUFBTSxDQUMvQmo5QixFQUFBLEtBQUsrNkIsR0FBUyxDQUNWLE9BQVEsZUFDUixVQUFXLE1BQzNCLEdBQ1ksS0FBSyxLQUFLLG9CQUFxQjdqQyxFQUFBLEtBQUs2akMsSUFBTyxNQUFNLEVBQ2pELEtBQUssU0FBUSxDQUNqQixDQUFDLENBQ0wsRUM5T0csTUFBTXlDLEdBQTJCLE9BQU8sa0JBQWtCLEVBQzFELFNBQVNDLEdBQWlCN2xFLEVBQVMsQ0FDdEMsTUFBTyxDQUNILENBQUM0bEUsRUFBd0IsRUFBRyxHQUM1QixRQUFBNWxFLENBQ1IsQ0FDQSxDQUNPLFNBQVM4bEUsR0FBbUI3ekUsRUFBUSxDQUN2QyxPQUFRLE9BQU9BLEdBQVcsVUFDdEJBLElBQVcsTUFDWDJ6RSxNQUE0QjN6RSxDQUNwQyxDQUNPLFNBQVM4ekUsR0FBb0IvbkUsRUFBTSxDQUN0QyxPQUFRQSxFQUFLLE9BQVMsWUFDakJBLEVBQUssT0FBUyxlQUFpQkEsRUFBSyxPQUFTLFlBQ3RELENBQ08sU0FBU2dvRSxHQUF5QmhvRSxFQUFNLENBQzNDLEdBQUlBLEVBQUssT0FBUyxXQUNkLE9BQU9BLEVBRVgsR0FBSUEsRUFBSyxPQUFTLGVBQWlCQSxFQUFLLE9BQVMsYUFBYyxDQUMzRCxNQUFNaW9FLEVBQVlqb0UsRUFBSyxhQUFhLFlBQWNBLEVBQUssYUFBYSxXQUFXLE9BQVMsRUFDbEZBLEVBQUssYUFBYSxXQUNsQixPQUNOLE1BQU8sQ0FDSCxLQUFNLE1BQ04sYUFBY0EsRUFBSyxhQUFhLGFBQ2hDLFdBQVlpb0UsRUFDWixRQUFTam9FLEVBQUssYUFBYSxRQUMzQixjQUFlQSxFQUFLLGFBQWEsY0FDakMsaUJBQWtCQSxFQUFLLGFBQWEsZ0JBQ2hELENBQ0ksQ0FDQSxNQUFNLElBQUk0QyxFQUFVLHNCQUFzQjVDLENBQUksRUFBRSxDQUNwRCxDQ3hCQSxTQUFTa29FLElBQTRCLENBQ2pDLE9BQU8sS0FBSyxNQUFNLEtBQUssVUFBVS9HLEVBQXNDLENBQUMsQ0FDNUUsQ0FrQ08sTUFBTWdILEdBQU4sTUFBTUEsV0FBd0JuMkIsRUFBb0IsQ0EwQnJELFlBQVlzSCxFQUFjeGdELEVBQVUsR0FBSSxDQUNwQyxNQUFLLEVBM0JOa29DLEVBQUEsS0FBQW9uQyxJQUNIL2xFLEVBQUEscUJBQ0FBLEVBQUEsZ0JBQ0EyK0IsRUFBQSxLQUFBcW5DLEdBQ0FybkMsRUFBQSxLQUFBc25DLEdBQ0F0bkMsRUFBQSxLQUFBdW5DLElBQ0F2bkMsRUFBQSxLQUFBSixHQUNBSSxFQUFBLEtBQUF3bkMsR0FBb0IsQ0FBQSxHQUNwQnhuQyxFQUFBLEtBQUF5bkMsSUFDQXpuQyxFQUFBLEtBQUEwbkMsR0FBeUIsQ0FBQSxHQUN6QjFuQyxFQUFBLEtBQUEybkMsR0FBVyxDQUFBLEdBQ1gzbkMsRUFBQSxLQUFBNG5DLElBQ0E1bkMsRUFBQSxLQUFBNm5DLEdBQTBCLENBQUEsR0FDMUI3bkMsRUFBQSxLQUFBOG5DLEdBQWdCLElBRWhCOW5DLEVBQUEsS0FBQStuQyxHQUF1QixJQUFJLEtBRTNCL25DLEVBQUEsS0FBQWdvQyxHQUFxQixDQUFBLEdBT3JCaG9DLEVBQUEsS0FBQWlvQyxHQUFxQmYsR0FBeUIsR0FDOUNsbkMsRUFBQSxLQUFBa29DLEdBQStDLElBRzNDLEtBQUssYUFBZTV2QixFQUNwQixLQUFLLFFBQVV4Z0QsRUFDVixPQUFPQSxFQUFRLFVBQWMsS0FBZStoRSxHQUFnQixHQUM3RC9oRSxFQUFRLFlBQWMsU0FDdEJzeEMsRUFBQSxLQUFLaStCLEVBQWEsSUFBSW5ELElBRWpCcHNFLEVBQVEsWUFBYyxhQUMzQixPQUFPQSxFQUFRLFVBQWMsSUFDN0JzeEMsRUFBQSxLQUFLaStCLEVBQWEsSUFBSTlCLElBR3RCbjhCLEVBQUEsS0FBS2krQixFQUFhdnZFLEVBQVEsV0FFOUJzeEMsRUFBQSxLQUFLaytCLEVBQWdCaHZCLEdBQ3JCbFAsRUFBQSxLQUFLeEosRUFBVyxJQUFJdVMsR0FBVyxDQUMzQixHQUFJcjZDLEVBQVEsU0FBVyxHQUN2QixRQUFTd29DLEVBQUEsS0FBS3FuQyxHQUMxQixDQUFTLEdBQ0R2K0IsRUFBQSxLQUFLbytCLElBQXFCMXZFLEVBQVEsa0JBQW9CLENBQUEsR0FBSSxJQUFJcWpFLEVBQTZCLEdBQzNGL3hCLEVBQUEsS0FBS3ErQixHQUEyQnZNLEdBQTZCcGpFLEVBQVEseUJBQTJCLENBQUEsQ0FBRSxHQUNsR3N4QyxFQUFBLEtBQUt3K0IsR0FBMEI5dkUsRUFBUSxtQkFBcUIsSUFDNURzeEMsRUFBQSxLQUFLOCtCLEdBQ0Rwd0UsRUFBUSw2Q0FBK0MsR0FDL0QsQ0FJQSxJQUFJLFdBQVksQ0FDWixPQUFPd29DLEVBQUEsS0FBSyttQyxFQUNoQixDQUlBLElBQUksY0FBZSxDQUNmLE9BQU8vbUMsRUFBQSxLQUFLZ25DLEVBQ2hCLENBSUEsSUFBSSxPQUFRLENBQ1IsT0FBT2huQyxFQUFBLEtBQUtWLEdBQVMsS0FDekIsQ0FJQSxJQUFJLFNBQVUsQ0FDVixPQUFPVSxFQUFBLEtBQUtWLEVBQ2hCLENBS0EsSUFBSSxPQUFRLENBQ1IsT0FBT1UsRUFBQSxLQUFLK21DLEdBQVcsS0FDM0IsQ0FJQSxJQUFJLFNBQVUsQ0FDVixPQUFPL21DLEVBQUEsS0FBS3FuQyxHQUNoQixDQUNBLElBQUksbUJBQW9CLENBQ3BCLE9BQU9ybkMsRUFBQSxLQUFLMG5DLEdBQ2hCLENBK0ZBLE1BQU0sd0JBQXdCalgsRUFBWSxHQUFJLENBQzFDLGFBQU1ybkIsRUFBQSxLQUFLMDlCLEdBQUFlLElBQUwsVUFBc0IsS0FBSyxjQUMxQnorQixFQUFBLEtBQUswOUIsR0FBQWdCLElBQUwsVUFBdUIsQ0FDMUIsR0FBSSxLQUFLLFFBQVEsUUFBVSxHQUMzQixHQUFJclgsR0FBYSxDQUFBLENBQzdCLEVBQ0ksQ0FhQSxhQUFhLDRCQUE0QnJqRCxFQUFPNVYsRUFBVSxDQUFBLEVBQUlpNUQsRUFBWSxDQUFBLEVBQUksQ0FDMUUsTUFBTWhRLEVBQVUsSUFBSW9tQixHQUFnQno1RCxFQUFPNVYsQ0FBTyxFQUNsRCxHQUFJLENBQ0EsT0FBTyxNQUFNaXBELEVBQVEsd0JBQXdCZ1EsQ0FBUyxDQUMxRCxRQUNSLENBQ1loUSxFQUFRLE1BQUssQ0FDakIsQ0FDSixDQUNBLE1BQU0sWUFBWTRJLEVBQVUsQ0FDeEIsT0FBQXJwQixFQUFBLEtBQUtnbkMsR0FBYyxLQUFLLGdCQUFpQmhuQyxFQUFBLEtBQUtWLEdBQVUrcEIsQ0FBUSxFQUNoRSxLQUFLLEtBQUssZ0JBQWlCcnBCLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLZ25DLEdBQWUzZCxDQUFRLEVBQ3RFLE1BQU1qZ0IsRUFBQSxLQUFLMDlCLEdBQUFlLElBQUwsVUFBc0J4ZSxHQUM1QixNQUFNcnBCLEVBQUEsS0FBSyttQyxHQUFXLG9CQUFvQixNQUFNMzlCLEVBQUEsS0FBSzA5QixHQUFBZ0IsSUFBTCxVQUF3QixFQUNqRXplLENBQ1gsQ0EyVkEsTUFBTSxRQUFRN3hELEVBQVMsQ0FFbkIsTUFBTTR4QyxFQUFBLEtBQUswOUIsR0FBQWUsSUFBTCxVQUFzQixLQUFLLGNBQ2pDeitCLEVBQUEsS0FBSzA5QixHQUFBaUIsSUFBTCxXQUNBLE1BQU0vbkMsRUFBQSxLQUFLK21DLEdBQVcsUUFBUSxDQUMxQixPQUFRdnZFLEVBQVEsUUFBVSxLQUFLLFFBQVEsT0FDdkMsTUFBTyxLQUFLLFFBQVEsTUFDcEIsSUFBS0EsRUFBUSxJQUNiLE9BQVFBLEVBQVEsT0FDaEIscUJBQXNCLE1BQU00eEMsRUFBQSxLQUFLMDlCLEdBQUFnQixJQUFMLFVBQXVCLEtBQUssUUFBUSxPQUM1RSxDQUFTLEVBSURoL0IsRUFBQSxLQUFLdStCLEdBQVcsQ0FBQSxHQUNoQixLQUFLLEtBQUssa0JBQW1Ccm5DLEVBQUEsS0FBS3FuQyxHQUFRLENBQzlDLENBS0EsY0FBY25PLEVBQVksQ0FDdEIsSUFBSThPLEVBQ0EsT0FBTzlPLEdBQWUsV0FDdEI4TyxFQUFpQjlPLEVBQVdsNUIsRUFBQSxLQUFLcW5DLEdBQVEsRUFHekNXLEVBQWlCOU8sRUFFckJsNUIsRUFBQSxLQUFLK21DLEdBQVcsYUFBYS9tQyxFQUFBLEtBQUtxbkMsSUFBVVcsQ0FBYyxDQUM5RCxDQU1BLFlBQVl2dEUsRUFBU2ttRSxFQUFpQixHQUFJLENBQ3RDM2dDLEVBQUEsS0FBSyttQyxHQUFXLFlBQVl0c0UsRUFBU2ttRSxDQUFjLENBQ3ZELENBS0EsU0FBU0UsRUFBTyxDQUFFLGdCQUFBRCxFQUFrQixFQUFJLEVBQUssQ0FBQSxFQUFJLENBQzdDNWdDLEVBQUEsS0FBSyttQyxHQUFXLFNBQVNsRyxFQUFPLENBQUUsZ0JBQUFELENBQWUsQ0FBRSxDQUN2RCxDQUtBLEtBQUtrRSxFQUFPLENBQ1I5a0MsRUFBQSxLQUFLK21DLEdBQVcsS0FBS2pDLENBQUssQ0FDOUIsQ0FJQSxPQUFRLENBQ0poOEIsRUFBQSxLQUFLeStCLEdBQTBCLENBQUEsR0FDL0J2bkMsRUFBQSxLQUFLK21DLEdBQVcsTUFBSyxDQUN6QixDQU9BLFVBQVU1RCxFQUFPM3JFLEVBQVUsR0FBSSxDQUMzQndvQyxFQUFBLEtBQUsrbUMsR0FBVyxVQUFVNUQsRUFBTzNyRSxDQUFPLENBQzVDLENBS0EsV0FBWSxDQUNSd29DLEVBQUEsS0FBSyttQyxHQUFXLFVBQVMsQ0FDN0IsQ0FPQSxNQUFNLFFBQVF0MEIsRUFBY2o3QyxFQUFVLENBQUUsY0FBZSxFQUFLLEVBQUksQ0FDNUR3b0MsRUFBQSxLQUFLVixHQUFTLFlBQVltVCxFQUFjajdDLENBQU8sRUFDL0MsTUFBTTI2QyxFQUFXTSxFQUFhLFVBQVlBLEVBQWEsUUFBUSxLQUN6RC96QyxFQUFPc2hDLEVBQUEsS0FBS2duQyxHQUFjLE1BQU0sS0FBTXRvRSxHQUFTQSxFQUFLLE9BQVN5ekMsQ0FBUSxFQUMzRSxHQUFJenpDLEdBQ0FBLEVBQUssT0FBUyxZQUNkK3pDLEVBQWEsUUFBUSxPQUFTLGdCQUM5QixNQUFNckosRUFBQSxLQUFLMDlCLEdBQUFtQixJQUFMLFVBQTZCeDFCLEVBQWEsUUFBUy96QyxXQUVwRCt6QyxFQUFhLFFBQVEsT0FBUyxtQkFBb0IsQ0FDbkRqN0MsRUFBUSxlQUNSZ1MsR0FBTyxLQUFLLDJGQUEyRixFQUUzRyxNQUFNZzNELEVBQXFCaEcsR0FBbUMvbkIsQ0FBWSxFQUMxRXpTLEVBQUEsS0FBSyttQyxHQUFXLGdCQUFnQnZHLEVBQW9CLEVBQUksQ0FDNUQsS0FFSSxPQUFNLElBQUl0L0QsR0FBbUIsUUFBUWl4QyxHQUFZLFNBQVMsWUFBWSxDQUU5RSxDQU9BLE1BQU0sT0FBT00sRUFBY2o3QyxFQUFVLENBQUUsYUFBYyxFQUFLLEVBQUksQ0FDMUR3b0MsRUFBQSxLQUFLVixHQUFTLFdBQVdtVCxFQUFjajdDLENBQU8sRUFFOUMsTUFBTTI2QyxFQUFXTSxFQUFhLFVBQVlBLEVBQWEsUUFBUSxLQUN6RC96QyxFQUFPc2hDLEVBQUEsS0FBS2duQyxHQUFjLE1BQU0sS0FBTXRvRSxHQUFTQSxFQUFLLE9BQVN5ekMsQ0FBUSxFQUMzRSxHQUFJenpDLEdBQ0FBLEVBQUssT0FBUyxZQUNkK3pDLEVBQWEsUUFBUSxPQUFTLGdCQUM5QixNQUFNckosRUFBQSxLQUFLMDlCLEdBQUFtQixJQUFMLFVBQTZCeDFCLEVBQWEsUUFBUy96QyxXQUVwRCt6QyxFQUFhLFFBQVEsT0FBUyxtQkFBb0IsQ0FDbkRqN0MsRUFBUSxjQUNSZ1MsR0FBTyxLQUFLLDJGQUEyRixFQUUzRyxNQUFNZzNELEVBQXFCaEcsR0FBbUMvbkIsQ0FBWSxFQUMxRXpTLEVBQUEsS0FBSyttQyxHQUFXLGdCQUFnQnZHLEVBQW9CLEVBQUssQ0FDN0QsS0FFSSxPQUFNLElBQUl0L0QsR0FBbUIsUUFBUWl4QyxHQUFZLFNBQVMsWUFBWSxDQUU5RSxDQUNKLEVBcnJCSTQwQixFQUFBLFlBQ0FDLEVBQUEsWUFDQUMsR0FBQSxZQUNBM25DLEVBQUEsWUFDQTRuQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBRUFDLEdBQUEsWUFFQUMsR0FBQSxZQU9BQyxHQUFBLFlBQ0FDLEdBQUEsWUF6QkdkLEdBQUEsWUE0RkdlLEdBQWdCLGVBQUN6NkQsRUFBTyxDQUMxQjA3QixFQUFBLEtBQUtrK0IsRUFBZ0I1NUQsR0FDckIsTUFBTXdzQyxFQUFXLE1BQU01WixFQUFBLEtBQUtnbkMsR0FBYyxtQkFBbUJobkMsRUFBQSxLQUFLVixFQUFRLEVBQ3BFNG9DLEVBQWV0dUIsRUFBUyxJQUFLM0csR0FBWUEsRUFBUSwwQkFBMEIsRUFDM0UvVCxHQUFZLE1BQU1jLEVBQUEsS0FBS2duQyxHQUFjLFlBQVlobkMsRUFBQSxLQUFLVixFQUFRLEdBQy9ELE9BQU9tbkMsRUFBbUIsRUFDMUIsSUFBSUMsRUFBd0IsRUFDM0J5QixFQUFrQixPQUFPbm9DLEVBQUEsS0FBS2duQyxHQUFjLE1BQVUsS0FDeEQsT0FBT2huQyxFQUFBLEtBQUtnbkMsR0FBYyxXQUFlLElBQ3ZDb0IsRUFBcUJ4dUIsRUFBUyxPQUFTLEVBQzdDOVEsRUFBQSxLQUFLbStCLEdBQ0RrQixHQUFtQkMsRUFDYixDQUFDLEdBQUdscEMsRUFBVSxHQUFHZ3BDLENBQVksRUFDN0IsUUFFVjkrQixFQUFBLEtBQUswOUIsR0FBQXVCLElBQUwsVUFDSixFQUNNUCxHQUFpQixlQUFDUSxFQUFtQixHQUFJLENBQzNDLE1BQU1DLEVBQWtCRCxHQUFvQixDQUFBLEVBQ3RDRSxFQUFnQixLQUFLLFFBQVEsUUFBVSxDQUFBLEVBQ3ZDQyxFQUFlLE1BQU16b0MsRUFBQSxLQUFLZ25DLEdBQWMsZ0JBQWdCaG5DLEVBQUEsS0FBS1YsRUFBUSxFQUNyRW9wQyxFQUErQjM2RCxHQUFXLE9BQzVDLE1BQU00NkQsRUFBYzU2RCxFQUNmLE1BQ0wsT0FBT3hiLEVBQUFvMkUsR0FBQSxZQUFBQSxFQUFhLFNBQWIsWUFBQXAyRSxFQUFxQixLQUNoQyxFQUdNc2hFLEVBQWdCLEtBQUssUUFDdEIsZ0JBQ0MsS0FDQSxLQUFLLFFBQVEsYUFDVCxDQUNFLGNBQWUsS0FBSyxRQUFRLFlBQ2hELEVBQ2tCLE9BQ05BLElBQWtCLE1BQVFBLElBQWtCLFFBQ3hDLEtBQUssUUFBUSxVQUNiQSxFQUFjLFNBQVcsS0FBSyxRQUFRLFNBRXRDLEtBQUssUUFBUSxnQkFDYkEsRUFBYyxTQUFXLEtBQUssUUFBUSxpQkFHckMsS0FBSyxRQUFRLFNBQVcsS0FBSyxRQUFRLGdCQUMxQ3JxRCxHQUFPLEtBQUssZ0ZBQWdGLEVBRWhHLE1BQU1vL0QsRUFBMkJGLEVBQTRCSCxDQUFlLEdBQ3hFRyxFQUE0QkYsQ0FBYSxFQUN2Q0ssRUFBd0JOLEVBQWdCLE9BQVNDLEVBQWMsTUFDL0RNLEVBQWdCLE9BQU9GLEVBQTZCLElBQ3BEQSxFQUNBLE9BQU9DLEVBQTBCLElBQzdCQSxFQUNBN29DLEVBQUEsS0FBS2duQyxHQUFjLE1BY3ZCK0IsRUFBYSxDQUNmLEdBUFMsQ0FDVCxHQUFJL29DLEVBQUEsS0FBSzJuQyxLQUFzQixHQUMvQixHQUFHYSxFQUNILEdBQUdELENBQ2YsRUFJWSxhQUFBRSxFQUNBLE1BQU9LLEVBQ1AsTUFBTyxLQUFLLFFBQVEsTUFDcEIsTUFBTzlvQyxFQUFBLEtBQUtpbkMsSUFDWixRQUFTcFQsRUFDVCxPQUFRLE9BQU83ekIsRUFBQSxLQUFLZ25DLEdBQWMsUUFBVyxXQUN2QyxNQUFNaG5DLEVBQUEsS0FBS2duQyxHQUFjLE9BQU9obkMsRUFBQSxLQUFLVixHQUFVVSxFQUFBLEtBQUtnbkMsRUFBYSxFQUNqRWhuQyxFQUFBLEtBQUtnbkMsR0FBYyxNQUNyQyxFQUdRLE9BQUFsK0IsRUFBQSxLQUFLNitCLEdBQXFCb0IsR0FDbkJBLENBQ1gsRUE4Q01DLEdBQWMsZUFBQ2pxQixFQUFVOUwsRUFBUyxDQUNwQyxNQUFNb1csRUFBWSxNQUFNcFcsRUFBUSxnQkFBZ0JqVCxFQUFBLEtBQUtWLEdBQVV5ZixFQUFTLFNBQVMsRUFDakYvZSxFQUFBLEtBQUtnbkMsR0FBYyxLQUFLLGdCQUFpQmhuQyxFQUFBLEtBQUtWLEdBQVUrcEIsQ0FBUSxFQUNoRSxLQUFLLEtBQUssZ0JBQWlCcnBCLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLZ25DLEdBQWUzZCxDQUFRLEVBRXRFLE1BQU1qZ0IsRUFBQSxLQUFLMDlCLEdBQUFlLElBQUwsVUFBc0J4ZSxHQUM1QixNQUFNcnBCLEVBQUEsS0FBSyttQyxHQUFXLG9CQUFvQixNQUFNMzlCLEVBQUEsS0FBSzA5QixHQUFBZ0IsSUFBTCxVQUF3QixFQUN4RSxNQUFNNWlFLEVBQVMwdEMsR0FBbUJ5VyxDQUFRLEVBQzFDLE9BQUFycEIsRUFBQSxLQUFLK21DLEdBQVcsdUJBQXVCaG9CLEVBQVU3NUMsRUFBUSxFQUFJLEVBQ3REbWtELENBQ1gsRUFDTTRlLEdBQXVCLGVBQUNscEIsRUFBVXJnRCxFQUFNLENBQzFDc2hDLEVBQUEsS0FBS1YsR0FBUyxRQUFRLFFBQVUsS0FBSyxNQUFNLEtBQUssVUFBVVUsRUFBQSxLQUFLcW5DLEdBQVEsQ0FBQyxFQUN4RSxJQUFJdmdCLEVBQWEvSCxFQUFTLFVBVTFCLEdBVElyZ0QsRUFBSyxhQUNEeUQsR0FBWXpELEVBQUssVUFBVSxFQUMzQm9vRCxFQUFhcG9ELEVBQUssV0FBVyxNQUFNb29ELENBQVUsRUFHN0NBLEVBQWEsS0FBSyxNQUFNQSxDQUFVLEdBR3BCLE1BQU1wb0QsRUFBSyxjQUFjc2hDLEVBQUEsS0FBS1YsR0FBVXduQixFQUFZL0gsRUFBUyxNQUFNLEVBQ3RFLENBQ2YsTUFBTTNNLEVBQVcsS0FBSyxRQUFRLGVBQWUsQ0FDekMsU0FBVTF6QyxFQUFLLEtBQ2YsT0FBUXFnRCxFQUFTLE1BQ2pDLENBQWEsRUFDRCxHQUFJM00sSUFBYSxHQUFPLENBQ3BCLEtBQUssS0FBSyxtQkFBb0JwUyxFQUFBLEtBQUtWLEdBQVVVLEVBQUEsS0FBS2duQyxHQUFldG9FLEVBQU0sQ0FDbkUsU0FBQXFnRCxDQUNwQixDQUFpQixFQUNEL2UsRUFBQSxLQUFLZ25DLEdBQWMsS0FBSyxtQkFBb0JobkMsRUFBQSxLQUFLVixHQUFVNWdDLEVBQU0sQ0FDN0QsU0FBQXFnRCxDQUNwQixDQUFpQixFQUNELE1BQU1wc0QsRUFBUyxtQ0FDZnF0QyxFQUFBLEtBQUsrbUMsR0FBVyx1QkFBdUJob0IsRUFBVXBzRCxFQUFRLEVBQUksRUFDN0QsS0FBSyxLQUFLLGlCQUFrQnF0QyxFQUFBLEtBQUtWLEdBQVVVLEVBQUEsS0FBS2duQyxHQUFldG9FLEVBQU0vTCxFQUFRLENBQUUsU0FBQW9zRCxDQUFRLENBQUUsRUFDekYvZSxFQUFBLEtBQUtnbkMsR0FBYyxLQUFLLGlCQUFrQmhuQyxFQUFBLEtBQUtWLEdBQVU1Z0MsRUFBTS9MLEVBQVEsQ0FDbkUsU0FBQW9zRCxDQUNwQixDQUFpQixFQUNELE1BQ0osU0FDUyxPQUFPM00sRUFBYSxJQUFhLENBQ3RDLEtBQUssS0FBSywwQkFBMkJwUyxFQUFBLEtBQUtWLEdBQVVVLEVBQUEsS0FBS2duQyxHQUFlLENBQ3BFLEtBQU0sb0JBQ04sS0FBQXRvRSxFQUNBLGFBQWMsSUFBSSsxQyxHQUFvQnNLLEVBQVUvZSxFQUFBLEtBQUtnbkMsRUFBYSxDQUN0RixDQUFpQixFQUNELE1BQ0osQ0FDSixDQUNBLE1BQU0vZixFQUF1QixNQUFNM0IsR0FBdUIsQ0FDdEQsV0FBWTVtRCxFQUFLLGdCQUNqQixRQUFTc2hDLEVBQUEsS0FBS1YsR0FDZCxNQUFPVSxFQUFBLEtBQUtnbkMsR0FDWixTQUFVam9CLENBQ3RCLENBQVMsRUFDRCxLQUFLLEtBQUssbUJBQW9CL2UsRUFBQSxLQUFLVixHQUFVVSxFQUFBLEtBQUtnbkMsR0FBZXRvRSxFQUFNLENBQ25FLFNBQUFxZ0QsQ0FDWixDQUFTLEVBQ0QvZSxFQUFBLEtBQUtnbkMsR0FBYyxLQUFLLG1CQUFvQmhuQyxFQUFBLEtBQUtWLEdBQVU1Z0MsRUFBTSxDQUM3RCxTQUFBcWdELENBQ1osQ0FBUyxFQUNEL2UsRUFBQSxLQUFLVixHQUFTLFFBQVEsUUFBVSxLQUFLLE1BQU0sS0FBSyxVQUFVVSxFQUFBLEtBQUtxbkMsR0FBUSxDQUFDLEVBQ3hFLE1BQU0xMEUsRUFBU3MwRCxFQUFxQixPQUFTLFNBQ3ZDQSxFQUFxQixRQUNyQixNQUFNdm9ELEVBQUssT0FBT3NoQyxFQUFBLEtBQUtWLEdBQVV5ZixFQUFTLFVBQVcsQ0FDbkQsU0FBQUEsQ0FDaEIsQ0FBYSxFQUNDa3FCLEVBQWdCaGlCLEVBQXFCLE9BQVMsU0FDOUN0MEQsRUFDQSxNQUFNK3lELEdBQXdCLENBQzVCLFdBQVlobkQsRUFBSyxpQkFDakIsUUFBU3NoQyxFQUFBLEtBQUtWLEdBQ2QsTUFBT1UsRUFBQSxLQUFLZ25DLEdBQ1osU0FBVWpvQixFQUNWLFdBQVlwc0QsQ0FDNUIsQ0FBYSxFQUNMLElBQUlvYSxFQUNBeTVELEdBQW1CeUMsQ0FBYSxHQUVoQ2w4RCxFQUFlckQsR0FBY3UvRCxFQUFjLE9BQU8sRUFDbERqcEMsRUFBQSxLQUFLK21DLEdBQVcsdUJBQXVCaG9CLEVBQVVoeUMsRUFBYyxFQUFLLElBR3BFQSxFQUFlckQsR0FBY3UvRCxDQUFhLEVBQzFDanBDLEVBQUEsS0FBSyttQyxHQUFXLHVCQUF1QmhvQixFQUFVaHlDLEVBQWMsRUFBSSxHQUV2RSxLQUFLLEtBQUssaUJBQWtCaXpCLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLZ25DLEdBQWV0b0UsRUFBTXFPLEVBQWMsQ0FBRSxTQUFBZ3lDLENBQVEsQ0FBRSxFQUMvRi9lLEVBQUEsS0FBS2duQyxHQUFjLEtBQUssaUJBQWtCaG5DLEVBQUEsS0FBS1YsR0FBVTVnQyxFQUFNcU8sRUFBYyxDQUFFLFNBQUFneUMsRUFBVSxDQUM3RixFQUNNbXFCLEdBQW1CLGVBQUNucUIsRUFBVSxDQUNoQyxNQUFNb3FCLEVBQWtCLE1BQU1ucEMsRUFBQSxLQUFLZ25DLEdBQWMsbUJBQW1CaG5DLEVBQUEsS0FBS1YsRUFBUSxFQUMzRTBmLEVBQWEsSUFBSSxJQUFJbXFCLEVBQWdCLElBQUtsMkIsR0FBWSxDQUFDQSxFQUFRLFNBQVVBLENBQU8sQ0FBQyxDQUFDLEVBQ2xGL1QsRUFBVyxNQUFNYyxFQUFBLEtBQUtnbkMsR0FBYyxZQUFZaG5DLEVBQUEsS0FBS1YsRUFBUSxFQUM3RDhwQyxFQUFrQixJQUFJLElBQUlscUMsRUFBUyxJQUFLeGdDLEdBQVMsQ0FBQ0EsRUFBSyxLQUFNQSxDQUFJLENBQUMsQ0FBQyxFQUNuRTJxRSxFQUFrQnJxQixFQUFXLElBQUlELEVBQVMsSUFBSSxFQUNwRCxHQUFJc3FCLEVBQ0EsTUFBTWpnQyxFQUFBLEtBQUswOUIsR0FBQWtDLElBQUwsVUFBb0JqcUIsRUFBVXNxQixPQUVuQyxDQUNELE1BQU1ucUIsRUFBZWtxQixFQUFnQixJQUFJcnFCLEVBQVMsSUFBSSxFQUN0RCxHQUFJRyxHQUFnQkEsRUFBYSxPQUFTLFdBQ3RDLE1BQU05VixFQUFBLEtBQUswOUIsR0FBQW1CLElBQUwsVUFBNkJscEIsRUFBVUcsT0FHN0MsT0FBTSxJQUFJaCtDLEdBQW1CLFFBQVE2OUMsRUFBUyxJQUFJLFlBQVksQ0FFdEUsQ0FDSixFQUNNdXFCLEdBQW9CLGVBQUNwa0UsRUFBUTAvQyxFQUFZNlYsRUFBUSxDQUNuRCxHQUFJejZCLEVBQUEsS0FBS2tuQyxJQUFrQixTQUFXLEVBQ2xDLE9BRUosTUFBTTlxQixFQUFnQixDQUNsQixNQUFPcGMsRUFBQSxLQUFLZ25DLEdBQ1osWUFBYTloRSxFQUNiLFFBQVM4NkIsRUFBQSxLQUFLVixFQUMxQixFQUVjaXFDLEdBRFUsTUFBTSxRQUFRLElBQUl2cEMsRUFBQSxLQUFLa25DLElBQWtCLElBQUt6cUIsR0FBY0EsRUFBVSxJQUFJTCxDQUFhLENBQUMsQ0FBQyxHQUNsRSxLQUFNenBELEdBQVdBLEVBQU8sT0FBTyxpQkFBaUIsRUFDdkYsR0FBSTQyRSxFQUF3QixDQUd4QixHQUFJdnBDLEVBQUEsS0FBS3VuQyxJQUF3QjNpQixDQUFVLEVBQ3ZDLE9BRUo1a0IsRUFBQSxLQUFLdW5DLElBQXdCM2lCLENBQVUsRUFBSSxHQUMzQyxNQUFNeHpELEVBQVEsSUFBSXNRLEdBQWlDLCtCQUErQixLQUFLLFVBQVU2bkUsRUFBdUIsT0FBTyxVQUFVLENBQUMsR0FBSUEsQ0FBc0IsRUFDcEssS0FBSyxLQUFLLG9CQUFxQnZwQyxFQUFBLEtBQUtWLEdBQVVVLEVBQUEsS0FBS2duQyxHQUFlNTFFLEVBQU8sQ0FDckUsT0FBQXFwRSxDQUNoQixDQUFhLEVBQ0QsS0FBSyxVQUFTLEVBQ2QsTUFBTStPLEVBQWV2TyxHQUFvQ3NPLENBQXNCLEVBQy9FLEtBQUssWUFBWUMsQ0FBWSxFQUM3QixNQUNKLENBQ0osRUFDQXpCLEdBQWtCLFVBQUcsQ0FDakIvbkMsRUFBQSxLQUFLK21DLEdBQVcsR0FBRyxJQUFNNW1DLEdBQVUsQ0FHL0IsR0FGQSxLQUFLLEtBQUssa0JBQW1CQSxDQUFLLEVBRTlCQSxFQUFNLE9BQVMsd0RBQ2YsR0FBSSxDQUNBLE1BQU1zcEMsRUFBaUJ0cEMsRUFDdkIySSxFQUFBLEtBQUt1K0IsR0FBV3pOLEdBQXNCNTVCLEVBQUEsS0FBS3FuQyxJQUFVb0MsRUFBZ0J6cEMsRUFBQSxLQUFLc25DLEdBQXVCLEdBQ2pHdG5DLEVBQUEsS0FBS1YsR0FBUyxRQUFRLFFBQVVVLEVBQUEsS0FBS3FuQyxJQUNyQyxLQUFLLEtBQUssa0JBQW1Ccm5DLEVBQUEsS0FBS3FuQyxHQUFRLENBQzlDLE9BQ085OUIsRUFBSyxDQUNSLEtBQUssS0FBSyxRQUFTLENBQ2YsS0FBTSxRQUNOLE1BQU9BLENBQy9CLENBQXFCLENBQ0wsQ0FFUixDQUFDLEVBQ0R2SixFQUFBLEtBQUsrbUMsR0FBVyxHQUFHLG1CQUFvQixDQUFDLENBQUUsWUFBQXJNLEVBQWEsTUFBQWo4QixLQUFZLENBQy9ELEdBQUksQ0FDQXVCLEVBQUEsS0FBS3luQyxJQUFxQixJQUFJL00sRUFBYWo4QixHQUFTLENBQUEsQ0FBRSxFQUN0RDJLLEVBQUEsS0FBSzA5QixHQUFBdUIsSUFBTCxVQUNKLE9BQ085K0IsRUFBSyxDQUNSLEtBQUssS0FBSyxRQUFTLENBQUUsS0FBTSxRQUFTLE1BQU9BLEVBQUssQ0FDcEQsQ0FDSixDQUFDLEVBQ0R2SixFQUFBLEtBQUsrbUMsR0FBVyxHQUFHLFFBQVU1bUMsR0FBVSxDQUM5QkgsRUFBQSxLQUFLd25DLE1BQ04xK0IsRUFBQSxLQUFLMCtCLEdBQWdCLElBQ3JCLEtBQUssS0FBSyxjQUFleG5DLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLZ25DLEVBQWEsR0FFOUQsS0FBSyxLQUFLLFFBQVM3bUMsQ0FBSyxDQUM1QixDQUFDLEVBQ0RILEVBQUEsS0FBSyttQyxHQUFXLEdBQUcsZUFBZ0IsSUFBTSxDQUNyQ2orQixFQUFBLEtBQUswK0IsR0FBZ0IsSUFDckIsS0FBSyxLQUFLLGNBQWV4bkMsRUFBQSxLQUFLVixHQUFVVSxFQUFBLEtBQUtnbkMsRUFBYSxFQUMxRGhuQyxFQUFBLEtBQUtnbkMsR0FBYyxLQUFLLGNBQWVobkMsRUFBQSxLQUFLVixHQUFVVSxFQUFBLEtBQUtnbkMsRUFBYSxDQUM1RSxDQUFDLEVBQ0RobkMsRUFBQSxLQUFLK21DLEdBQVcsR0FBRyxZQUFjNW1DLEdBQVUsQ0FDdkMsTUFBTW5wQyxFQUFPbXBDLEVBQU0sU0FBUyxPQUFPQSxFQUFNLFNBQVMsT0FBTyxPQUFTLENBQUMsRUFDN0R1cEMsRUFBYTVRLEdBQWtDOWhFLENBQUksR0FBSyxHQUN4RHlqRSxHQUFTempFLEdBQUEsWUFBQUEsRUFBTSxLQUFNLEdBQzNCLEtBQUssS0FBSyxZQUFhZ3BDLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLZ25DLEdBQWUwQyxDQUFVLEVBQ3BFMXBDLEVBQUEsS0FBS2duQyxHQUFjLEtBQUssWUFBYWhuQyxFQUFBLEtBQUtWLEdBQVVvcUMsQ0FBVSxFQUM5RHRnQyxFQUFBLEtBQUswOUIsR0FBQXdDLElBQUwsVUFBMEJJLEVBQVl2cEMsRUFBTSxTQUFTLEdBQUlzNkIsRUFDN0QsQ0FBQyxFQUNEejZCLEVBQUEsS0FBSyttQyxHQUFXLEdBQUcsYUFBYyxJQUFNLENBQy9CL21DLEVBQUEsS0FBS3duQyxLQUNMMStCLEVBQUEsS0FBSzArQixHQUFnQixJQUV6QixLQUFLLEtBQUssZ0JBQWlCeG5DLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLZ25DLEVBQWEsQ0FDaEUsQ0FBQyxFQUNELElBQUkyQyxFQUFlLEVBQ2ZDLEVBQ0o1cEMsRUFBQSxLQUFLK21DLEdBQVcsR0FBRyx5QkFBMkI1bUMsR0FBVSxDQUNwRCxHQUFJLENBQ0EsTUFBTTBwQyxFQUFRMXBDLEVBQU0sTUFDZHM2QixFQUFTdDZCLEVBQU0sT0FDZnlrQixFQUFhemtCLEVBQU0sV0FDckJ5cEMsSUFBZW5QLElBQ2ZtUCxFQUFhblAsRUFDYmtQLEVBQWUsR0FHbkIsTUFBTUcsR0FEYzlwQyxFQUFBLEtBQUtvbkMsSUFBdUIzTSxDQUFNLEdBQUssSUFDN0JvUCxFQUU5QixHQURBN3BDLEVBQUEsS0FBS29uQyxJQUF1QjNNLENBQU0sRUFBSXFQLEVBQ2xDOXBDLEVBQUEsS0FBS21uQyxJQUF5QixtQkFBcUIsRUFDbkQsT0FFSixNQUFNNEMsRUFBYyxLQUFLLE1BQU1ELEVBQVEsT0FBUzlwQyxFQUFBLEtBQUttbkMsSUFBeUIsa0JBQWtCLEVBQzVGNEMsRUFBY0osSUFDZEEsRUFBZUksRUFJZjNnQyxFQUFBLEtBQUswOUIsR0FBQXdDLElBQUwsVUFBMEJRLEVBQVNsbEIsRUFBWTZWLEdBRXZELE9BQ09seEIsRUFBSyxDQUNSLEtBQUssS0FBSyxRQUFTLENBQ2YsS0FBTSxRQUNOLE1BQU9BLENBQzNCLENBQWlCLENBQ0wsQ0FDSixDQUFDLEVBQ0R2SixFQUFBLEtBQUsrbUMsR0FBVyxHQUFHLGNBQWdCNW1DLEdBQVUsQ0FDekMsR0FBSSxDQUNBLE1BQU02cEMsRUFBUSxDQUFDaHFDLEVBQUEsS0FBS3FuQyxJQUFTLEtBQU1yd0UsR0FBU0EsRUFBSyxTQUFXbXBDLEVBQU0sTUFBTSxFQUd4RSxHQUZBMkksRUFBQSxLQUFLdStCLEdBQVd6TixHQUFzQjU1QixFQUFBLEtBQUtxbkMsSUFBVWxuQyxFQUFPSCxFQUFBLEtBQUtzbkMsR0FBdUIsR0FDeEZ0bkMsRUFBQSxLQUFLVixHQUFTLFFBQVEsUUFBVVUsRUFBQSxLQUFLcW5DLElBQ2pDMkMsRUFBTyxDQUNQLE1BQU1DLEVBQVlqcUMsRUFBQSxLQUFLcW5DLElBQVMsS0FBTXJ3RSxHQUFTQSxFQUFLLFNBQVdtcEMsRUFBTSxNQUFNLEVBQ3ZFOHBDLEdBQ0EsS0FBSyxLQUFLLGdCQUFpQkEsQ0FBUyxDQUU1QyxDQUNBLEtBQUssS0FBSyxrQkFBbUJqcUMsRUFBQSxLQUFLcW5DLEdBQVEsQ0FDOUMsT0FDTzk5QixFQUFLLENBQ1IsS0FBSyxLQUFLLFFBQVMsQ0FDZixLQUFNLFFBQ04sTUFBT0EsQ0FDM0IsQ0FBaUIsQ0FDTCxDQUNKLENBQUMsRUFDRHZKLEVBQUEsS0FBSyttQyxHQUFXLEdBQUcsZUFBaUI1bUMsR0FBVSxDQUMxQyxHQUFJLENBQ0EySSxFQUFBLEtBQUt1K0IsR0FBV3JuQyxFQUFBLEtBQUtxbkMsSUFBUyxPQUFRcndFLEdBQVNBLEVBQUssU0FBV21wQyxFQUFNLE1BQU0sR0FDM0VILEVBQUEsS0FBS1YsR0FBUyxRQUFRLFFBQVVVLEVBQUEsS0FBS3FuQyxJQUNyQyxLQUFLLEtBQUssa0JBQW1Ccm5DLEVBQUEsS0FBS3FuQyxHQUFRLENBQzlDLE9BQ085OUIsRUFBSyxDQUNSLEtBQUssS0FBSyxRQUFTLENBQ2YsS0FBTSxRQUNOLE1BQU9BLENBQzNCLENBQWlCLENBQ0wsQ0FDSixDQUFDLEVBQ0R2SixFQUFBLEtBQUsrbUMsR0FBVyxHQUFHLGdCQUFpQixNQUFPNW1DLEdBQVUsQ0FDakQsR0FBSSxDQUNBLE1BQU1pSixFQUFBLEtBQUswOUIsR0FBQW9DLElBQUwsVUFBeUIvb0MsRUFDbkMsT0FDTy91QyxFQUFPLENBQ1ZvWSxHQUFPLE1BQU0sK0JBQWdDcFksQ0FBSyxFQUNsRCxLQUFLLEtBQUssUUFBUyxDQUNmLEtBQU0sUUFDTixNQUFBQSxDQUNwQixDQUFpQixDQUNMLENBQ0osQ0FBQyxFQUNENHVDLEVBQUEsS0FBSyttQyxHQUFXLEdBQUcsZUFBaUJoaUIsR0FBVSxDQUMxQy9rQixFQUFBLEtBQUtWLEdBQVMsTUFBTSxJQUFJeWxCLENBQUssQ0FDakMsQ0FBQyxFQUNEL2tCLEVBQUEsS0FBSyttQyxHQUFXLEdBQUcsb0JBQXFCLElBQU0sQ0FDdEMvbUMsRUFBQSxLQUFLd25DLEtBQ0wxK0IsRUFBQSxLQUFLMCtCLEdBQWdCLElBRXpCLEtBQUssS0FBSyxvQkFBcUJ4bkMsRUFBQSxLQUFLVixHQUFVVSxFQUFBLEtBQUtnbkMsRUFBYSxDQUNwRSxDQUFDLEVBQ0RobkMsRUFBQSxLQUFLK21DLEdBQVcsR0FBRyxRQUFVMzFFLEdBQVUsQ0FDbkMsS0FBSyxLQUFLLFFBQVNBLENBQUssQ0FDNUIsQ0FBQyxFQUNENHVDLEVBQUEsS0FBSyttQyxHQUFXLEdBQUcsMEJBQTRCaG9CLEdBQWEsQ0FDeEQsS0FBSyxLQUFLLDBCQUEyQi9lLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLZ25DLEdBQWVqb0IsQ0FBUSxFQUM1RS9lLEVBQUEsS0FBSzRuQyxLQUNMNW5DLEVBQUEsS0FBSyttQyxHQUFXLFVBQVUsQ0FDdEIsS0FBTSxpQkFDMUIsQ0FBaUIsQ0FFVCxDQUFDLEVBQ0QvbUMsRUFBQSxLQUFLK21DLEdBQVcsR0FBRyx1QkFBeUI5c0IsR0FBb0IsQ0FDNUQsS0FBSyxLQUFLLDBCQUEyQmphLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLZ25DLEdBQWUsQ0FDcEUsS0FBTSx1QkFDTixhQUFjek0sR0FBbUN2NkIsRUFBQSxLQUFLZ25DLEdBQWUvc0IsQ0FBZSxDQUNwRyxDQUFhLENBQ0wsQ0FBQyxDQUNMLEVBTUFvdUIsR0FBd0IsVUFBRyxPQUV2QixNQUFNNkIsR0FBbUIzM0UsRUFBQXl0QyxFQUFBLEtBQUtpbkMsTUFBTCxZQUFBMTBFLEVBQW9CLE9BQVFzc0IsR0FBTUEsRUFBRSxPQUFTLE9BQ2hFc3JELEVBQXFCQyxHQUFRLENBQy9CLE1BQU03ckMsRUFBVTZyQyxFQUFJLGNBQ3BCLEdBQUs3ckMsRUFFTCxJQUFJLE1BQU0sUUFBUUEsQ0FBTyxFQUNyQixPQUFPQSxFQUNYLEdBQUlBLEdBQVcsTUFBTSxRQUFRQSxFQUFRLFVBQVUsRUFDM0MsT0FBT0EsRUFBUSxXQUV2QixFQUNNOHJDLEVBQWMsSUFBSSxJQUN4QixVQUFXRCxLQUFPRixFQUFrQixDQUNoQyxNQUFNenJDLEVBQVF1QixFQUFBLEtBQUt5bkMsSUFBcUIsSUFBSTJDLEVBQUksWUFBWSxHQUFLLENBQUEsRUFDM0Q3ckMsRUFBVTRyQyxFQUFrQkMsQ0FBRyxFQUNyQyxVQUFXMXJFLEtBQVErL0IsRUFDWEYsR0FBVyxDQUFDQSxFQUFRLFNBQVM3L0IsRUFBSyxJQUFJLEdBRXJDMnJFLEVBQVksSUFBSTNyRSxFQUFLLElBQUksR0FDMUIyckUsRUFBWSxJQUFJM3JFLEVBQUssS0FBTUEsQ0FBSSxDQUczQyxDQUNBLE1BQU13RSxFQUFPLE1BQU0sS0FBS21uRSxFQUFZLE9BQU0sQ0FBRSxFQUN0Q0MsRUFBT3RxQyxFQUFBLEtBQUswbkMsS0FDRjRDLEVBQUssU0FBV3BuRSxFQUFLLFFBQ2pDLEtBQUssVUFBVW9uRSxFQUFLLElBQUt6ckQsR0FBTUEsRUFBRSxJQUFJLEVBQUUsTUFBTSxJQUN6QyxLQUFLLFVBQVUzYixFQUFLLElBQUsyYixHQUFNQSxFQUFFLElBQUksRUFBRSxNQUFNLEtBRWpEaXFCLEVBQUEsS0FBSzQrQixHQUFxQnhrRSxHQUMxQixLQUFLLEtBQUssb0JBQXFCODhCLEVBQUEsS0FBSzBuQyxHQUFrQixFQUU5RCxFQTlpQkcsSUFBTTZDLEdBQU4xRCxHQ3pDQSxNQUFNMkQsV0FBMEJ2RixFQUF3QixDQUMzRCxZQUFZenRFLEVBQVUsR0FBSSxDQUN0QixNQUFNQSxDQUFPLENBQ2pCLENBY0EsYUFBYSxtQkFBbUI0VixFQUFPNVYsRUFBVSxDQUFBLEVBQUlpNUQsRUFBWSxDQUFBLEVBQUksQ0FDakUsTUFBTWlWLEVBQWdCLE1BQU02RSxHQUFnQiw0QkFBNEJuOUQsRUFBTzVWLEVBQVNpNUQsQ0FBUyxFQUVqRyxPQURrQixJQUFJK1osR0FBaUIsRUFDdEIsb0JBQW9COUUsQ0FBYSxDQUN0RCxDQUNBLFVBQVUrRSxFQUFRNXlFLEVBQVcsR0FBSSxDQUc3QixNQUFNLElBQUksTUFBTSw2RkFBNkYsQ0FDakgsQ0FDQSxNQUFNLFFBQVFMLEVBQVMsQ0FDbkIsR0FBSSxDQUFDQSxFQUFRLE9BQ1QsTUFBTSxJQUFJOEosRUFBVSw2REFBNkQsRUFFckYsTUFBTSxNQUFNLFFBQVE5SixDQUFPLENBQy9CLENBQ0osQ0NoQ1ksTUFBQ2t6RSxHQUFRLENBQ2pCLG9CQUFxQkMsR0FDckIsb0JBQXFCQyxHQUNyQixrQ0FBbUNDLEVBQ3ZDIiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzIsMyw0LDUsNiw3LDgsOSwxMCwxMSwxMiwxMywxNCwxNSwxNiwxNywxOCwxOSwyMCwyMSwyMiwyMywyNCwyNSwyNiwyNywyOCwyOSwzMCwzMSwzMiwzMywzNCwzNSwzNiwzNywzOCwzOSw0MCw0MSw0Miw0Myw0NCw0NSw1MSw1Miw1Myw1OSw2MCw2MSw2Miw2Myw2NCw2NSw2Niw2Nyw2OCw2OSw3MCw3MSw3Miw3Myw3NCw3NV19
